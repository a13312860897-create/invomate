/*! For license information please see main.fbcf7a0e.js.LICENSE.txt */
(()=>{var e={356:(e,t,n)=>{e.exports=n(9645).last},528:(e,t)=>{"use strict";var n=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler");Symbol.for("react.provider");var o=Symbol.for("react.consumer"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.suspense_list"),h=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.for("react.view_transition"),f=Symbol.for("react.client.reference");function g(e){if("object"===typeof e&&null!==e){var t=e.$$typeof;switch(t){case n:switch(e=e.type){case i:case a:case s:case d:case u:case m:return e;default:switch(e=e&&e.$$typeof){case l:case c:case p:case h:case o:return e;default:return t}}case r:return t}}}t.zv=function(e){return g(e)===i}},579:(e,t,n)=>{"use strict";e.exports=n(1153)},870:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObject=function(e){return null!==e&&("object"===typeof e||"function"===typeof e)}},1153:(e,t,n)=>{"use strict";var r=n(5043),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:d,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},1203:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8420);t.isArrayLike=function(e){return null!=e&&"function"!==typeof e&&r.isLength(e.length)}},1293:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4830);t.debounce=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"!==typeof n&&(n={});const{leading:i=!1,trailing:s=!0,maxWait:a}=n,o=Array(2);let l;i&&(o[0]="leading"),s&&(o[1]="trailing");let c=null;const d=r.debounce(function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];l=e.apply(this,n),c=null},t,{edges:o}),u=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return null!=a&&(null===c&&(c=Date.now()),Date.now()-c>=a)?(l=e.apply(this,n),c=Date.now(),d.cancel(),d.schedule(),l):(d.apply(this,n),l)};return u.cancel=d.cancel,u.flush=()=>(d.flush(),l),u}},1444:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toPath=function(e){const t=[],n=e.length;if(0===n)return t;let r=0,i="",s="",a=!1;for(46===e.charCodeAt(0)&&(t.push(""),r++);r<n;){const o=e[r];s?"\\"===o&&r+1<n?(r++,i+=e[r]):o===s?s="":i+=o:a?'"'===o||"'"===o?s=o:"]"===o?(a=!1,t.push(i),i=""):i+=o:"["===o?(a=!0,i&&(t.push(i),i="")):"."===o?i&&(t.push(i),i=""):i+=o,r++}return i&&t.push(i),t}},1497:(e,t,n)=>{"use strict";var r=n(3218);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,a){if(a!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},1844:e=>{e.exports={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}},2104:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(1203),i=n(9921);t.isArrayLikeObject=function(e){return i.isObjectLike(e)&&r.isArrayLike(e)}},2132:(e,t,n)=>{"use strict";var r=n(2897).default;Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const i=n(8268),s=n(870),a=n(4803),o=n(9972);function l(e,t,n,i){if(t===e)return!0;switch(typeof t){case"object":return function(e,t,n,r){if(null==t)return!0;if(Array.isArray(t))return c(e,t,n,r);if(t instanceof Map)return function(e,t,n,r){if(0===t.size)return!0;if(!(e instanceof Map))return!1;for(const[i,s]of t.entries()){if(!1===n(e.get(i),s,i,e,t,r))return!1}return!0}(e,t,n,r);if(t instanceof Set)return d(e,t,n,r);const i=Object.keys(t);if(null==e)return 0===i.length;if(0===i.length)return!0;if(r&&r.has(t))return r.get(t)===e;r&&r.set(t,e);try{for(let s=0;s<i.length;s++){const o=i[s];if(!a.isPrimitive(e)&&!(o in e))return!1;if(void 0===t[o]&&void 0!==e[o])return!1;if(null===t[o]&&null!==e[o])return!1;if(!n(e[o],t[o],o,e,t,r))return!1}return!0}finally{r&&r.delete(t)}}(e,t,n,i);case"function":return Object.keys(t).length>0?l(e,r({},t),n,i):o.eq(e,t);default:return s.isObject(e)?"string"!==typeof t||""===t:o.eq(e,t)}}function c(e,t,n,r){if(0===t.length)return!0;if(!Array.isArray(e))return!1;const i=new Set;for(let s=0;s<t.length;s++){const a=t[s];let o=!1;for(let l=0;l<e.length;l++){if(i.has(l))continue;let c=!1;if(n(e[l],a,s,e,t,r)&&(c=!0),c){i.add(l),o=!0;break}}if(!o)return!1}return!0}function d(e,t,n,r){return 0===t.size||e instanceof Set&&c([...e],[...t],n,r)}t.isMatchWith=function(e,t,n){return"function"!==typeof n?i.isMatch(e,t):l(e,t,function e(t,r,i,s,a,o){const c=n(t,r,i,s,a,o);return void 0!==c?Boolean(c):l(t,r,e,o)},new Map)},t.isSetMatch=d},2204:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5316),i=n(7312),s=n(3799);t.sortBy=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),a=1;a<t;a++)n[a-1]=arguments[a];const o=n.length;return o>1&&s.isIterateeCall(e,n[0],n[1])?n=[]:o>2&&s.isIterateeCall(n[0],n[1],n[2])&&(n=[n[0]]),r.orderBy(e,i.flatten(n),["asc"])}},2330:(e,t,n)=>{"use strict";var r=n(5043);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useState,a=r.useEffect,o=r.useLayoutEffect,l=r.useDebugValue;function c(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!i(e,n)}catch(r){return!0}}var d="undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=s({inst:{value:n,getSnapshot:t}}),i=r[0].inst,d=r[1];return o(function(){i.value=n,i.getSnapshot=t,c(i)&&d({inst:i})},[e,n,t]),a(function(){return c(i)&&d({inst:i}),e(function(){c(i)&&d({inst:i})})},[e]),l(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:d},2489:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isDeepKey=function(e){switch(typeof e){case"number":case"symbol":return!1;case"string":return e.includes(".")||e.includes("[")||e.includes("]")}}},2682:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPlainObject=function(e){if("object"!==typeof e)return!1;if(null==e)return!1;if(null===Object.getPrototypeOf(e))return!0;if("[object Object]"!==Object.prototype.toString.call(e)){var t;const n=e[Symbol.toStringTag];if(null==n)return!1;return!!(null!==(t=Object.getOwnPropertyDescriptor(e,Symbol.toStringTag))&&void 0!==t&&t.writable)&&e.toString()==="[object ".concat(n,"]")}let n=e;for(;null!==Object.getPrototypeOf(n);)n=Object.getPrototypeOf(n);return Object.getPrototypeOf(e)===n}},2715:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9599),i=n(7330),s=n(3808),a=n(8845);t.iteratee=function(e){if(null==e)return r.identity;switch(typeof e){case"function":return e;case"object":return Array.isArray(e)&&2===e.length?a.matchesProperty(e[0],e[1]):s.matches(e);case"string":case"symbol":case"number":return i.property(e)}}},2730:(e,t,n)=>{"use strict";var r=n(5043),i=n(8853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,h=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function f(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new f(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new f(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new f(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new f(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new f(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new f(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new f(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new f(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new f(e,5,!1,e.toLowerCase(),null,!1,!1)});var v=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function x(e,t,n,r){var i=g.hasOwnProperty(t)?g[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!u.call(m,e)||!u.call(p,e)&&(h.test(e)?m[e]=!0:(p[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(v,y);g[t]=new f(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new f("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new f(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),A=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),_=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),M=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var D=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var O=Symbol.iterator;function R(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=O&&e[O]||e["@@iterator"])?e:null}var I,L=Object.assign;function F(e){if(void 0===I)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);I=t&&t[1]||""}return"\n"+I+e}var B=!1;function z(e,t){if(!e||B)return"";B=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{B=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function W(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function U(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case j:return"Portal";case A:return"Profiler";case k:return"StrictMode";case E:return"Suspense";case P:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case _:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:U(e.type)||"Memo";case M:t=e._payload,e=e._init;try{return U(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return U(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function H(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function q(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function G(e){e._valueTracker||(e._valueTracker=function(e){var t=q(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function K(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=q(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Y(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function X(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function J(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=H(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&x(e,"checked",t,!1)}function Q(e,t){$(e,t);var n=H(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,H(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Y(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+H(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:H(n)}}function se(e,t){var n=H(t.value),r=H(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function he(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var pe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},me=["Webkit","ms","Moz","O"];function fe(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||pe.hasOwnProperty(e)&&pe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=fe(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(pe).forEach(function(e){me.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),pe[t]=pe[e]})});var ve=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(ve[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function xe(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,Ne=null,ke=null;function Ae(e){if(e=xi(e)){if("function"!==typeof je)throw Error(s(280));var t=e.stateNode;t&&(t=wi(t),je(e.stateNode,e.type,t))}}function Se(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function _e(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,Ae(e),t)for(e=0;e<t.length;e++)Ae(t[e])}}function Ce(e,t){return e(t)}function Ee(){}var Pe=!1;function Te(e,t,n){if(Pe)return e(t,n);Pe=!0;try{return Ce(e,t,n)}finally{Pe=!1,(null!==Ne||null!==ke)&&(Ee(),_e())}}function Me(e,t){var n=e.stateNode;if(null===n)return null;var r=wi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var De=!1;if(d)try{var Oe={};Object.defineProperty(Oe,"passive",{get:function(){De=!0}}),window.addEventListener("test",Oe,Oe),window.removeEventListener("test",Oe,Oe)}catch(de){De=!1}function Re(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Ie=!1,Le=null,Fe=!1,Be=null,ze={onError:function(e){Ie=!0,Le=e}};function We(e,t,n,r,i,s,a,o,l){Ie=!1,Le=null,Re.apply(ze,arguments)}function Ue(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function He(e){if(Ue(e)!==e)throw Error(s(188))}function qe(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Ue(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return He(i),e;if(a===r)return He(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ge(e):null}function Ge(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ge(e);if(null!==t)return t;e=e.sibling}return null}var Ke=i.unstable_scheduleCallback,Ye=i.unstable_cancelCallback,Xe=i.unstable_shouldYield,Je=i.unstable_requestPaint,$e=i.unstable_now,Qe=i.unstable_getCurrentPriorityLevel,Ze=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ht(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ut(o):0!==(s&=a)&&(r=ut(s))}else 0!==(a=n&~i)?r=ut(a):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function pt(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function mt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ft(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function vt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var xt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,Nt,kt,At,St=!1,_t=[],Ct=null,Et=null,Pt=null,Tt=new Map,Mt=new Map,Dt=[],Ot="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Rt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":Pt=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Mt.delete(t.pointerId)}}function It(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=xi(t))&&jt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=yi(e.target);if(null!==t){var n=Ue(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void At(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Xt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=xi(n))&&jt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Bt(e,t,n){Ft(e)&&n.delete(t)}function zt(){St=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==Et&&Ft(Et)&&(Et=null),null!==Pt&&Ft(Pt)&&(Pt=null),Tt.forEach(Bt),Mt.forEach(Bt)}function Wt(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Ut(e){function t(t){return Wt(t,e)}if(0<_t.length){Wt(_t[0],e);for(var n=1;n<_t.length;n++){var r=_t[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Wt(Ct,e),null!==Et&&Wt(Et,e),null!==Pt&&Wt(Pt,e),Tt.forEach(t),Mt.forEach(t),n=0;n<Dt.length;n++)(r=Dt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Dt.length&&null===(n=Dt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Dt.shift()}var Vt=b.ReactCurrentBatchConfig,Ht=!0;function qt(e,t,n,r){var i=xt,s=Vt.transition;Vt.transition=null;try{xt=1,Kt(e,t,n,r)}finally{xt=i,Vt.transition=s}}function Gt(e,t,n,r){var i=xt,s=Vt.transition;Vt.transition=null;try{xt=4,Kt(e,t,n,r)}finally{xt=i,Vt.transition=s}}function Kt(e,t,n,r){if(Ht){var i=Xt(e,t,n,r);if(null===i)Hr(e,t,r,Yt,n),Rt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=It(Ct,e,t,n,r,i),!0;case"dragenter":return Et=It(Et,e,t,n,r,i),!0;case"mouseover":return Pt=It(Pt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Tt.set(s,It(Tt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Mt.set(s,It(Mt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(Rt(e,r),4&t&&-1<Ot.indexOf(e)){for(;null!==i;){var s=xi(i);if(null!==s&&wt(s),null===(s=Xt(e,t,n,r))&&Hr(e,t,r,Yt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else Hr(e,t,r,null,n)}}var Yt=null;function Xt(e,t,n,r){if(Yt=null,null!==(e=yi(e=we(r))))if(null===(t=Ue(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Yt=e,null}function Jt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Qe()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Qt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Qt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Zt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=sn(cn),un=L({},cn,{view:0,detail:0}),hn=sn(un),pn=L({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:An,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),mn=sn(pn),fn=sn(L({},pn,{dataTransfer:0})),gn=sn(L({},un,{relatedTarget:0})),vn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),xn=sn(yn),bn=sn(L({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function An(){return kn}var Sn=L({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:An,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),_n=sn(Sn),Cn=sn(L({},pn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),En=sn(L({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:An})),Pn=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=L({},pn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Mn=sn(Tn),Dn=[9,13,27,32],On=d&&"CompositionEvent"in window,Rn=null;d&&"documentMode"in document&&(Rn=document.documentMode);var In=d&&"TextEvent"in window&&!Rn,Ln=d&&(!On||Rn&&8<Rn&&11>=Rn),Fn=String.fromCharCode(32),Bn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Dn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Wn(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Un=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Hn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function qn(e,t,n,r){Se(r),0<(t=Gr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Gn=null,Kn=null;function Yn(e){Fr(e,0)}function Xn(e){if(K(bi(e)))return e}function Jn(e,t){if("change"===e)return t}var $n=!1;if(d){var Qn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Qn=Zn}else Qn=!1;$n=Qn&&(!document.documentMode||9<document.documentMode)}function tr(){Gn&&(Gn.detachEvent("onpropertychange",nr),Kn=Gn=null)}function nr(e){if("value"===e.propertyName&&Xn(Kn)){var t=[];qn(t,Kn,e,we(e)),Te(Yn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Kn=n,(Gn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Xn(Kn)}function sr(e,t){if("click"===e)return Xn(t)}function ar(e,t){if("input"===e||"change"===e)return Xn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!u.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function hr(){for(var e=window,t=Y();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Y((e=t.contentWindow).document)}return t}function pr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function mr(e){var t=hr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&pr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=dr(n,s);var a=dr(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var fr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,vr=null,yr=null,xr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;xr||null==gr||gr!==Y(r)||("selectionStart"in(r=gr)&&pr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&lr(yr,r)||(yr=r,0<(r=Gr(vr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Nr={},kr={};function Ar(e){if(Nr[e])return Nr[e];if(!jr[e])return e;var t,n=jr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Nr[e]=n[t];return e}d&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var Sr=Ar("animationend"),_r=Ar("animationiteration"),Cr=Ar("animationstart"),Er=Ar("transitionend"),Pr=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mr(e,t){Pr.set(e,t),l(t,[e])}for(var Dr=0;Dr<Tr.length;Dr++){var Or=Tr[Dr];Mr(Or.toLowerCase(),"on"+(Or[0].toUpperCase()+Or.slice(1)))}Mr(Sr,"onAnimationEnd"),Mr(_r,"onAnimationIteration"),Mr(Cr,"onAnimationStart"),Mr("dblclick","onDoubleClick"),Mr("focusin","onFocus"),Mr("focusout","onBlur"),Mr(Er,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Rr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ir=new Set("cancel close invalid load scroll toggle".split(" ").concat(Rr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(We.apply(this,arguments),Ie){if(!Ie)throw Error(s(198));var d=Le;Ie=!1,Le=null,Fe||(Fe=!0,Be=d)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}}}if(Fe)throw e=Be,Fe=!1,Be=null,e}function Br(e,t){var n=t[fi];void 0===n&&(n=t[fi]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Wr="_reactListening"+Math.random().toString(36).slice(2);function Ur(e){if(!e[Wr]){e[Wr]=!0,a.forEach(function(t){"selectionchange"!==t&&(Ir.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Wr]||(t[Wr]=!0,zr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Jt(t)){case 1:var i=qt;break;case 4:i=Gt;break;default:i=Kt}n=i.bind(null,t,n,e),i=void 0,!De||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function Hr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=yi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Te(function(){var r=s,i=we(n),a=[];e:{var o=Pr.get(e);if(void 0!==o){var l=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=_n;break;case"focusin":c="focus",l=gn;break;case"focusout":c="blur",l=gn;break;case"beforeblur":case"afterblur":l=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=mn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=fn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=En;break;case Sr:case _r:case Cr:l=vn;break;case Er:l=Pn;break;case"scroll":l=hn;break;case"wheel":l=Mn;break;case"copy":case"cut":case"paste":l=xn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var d=0!==(4&t),u=!d&&"scroll"===e,h=d?null!==o?o+"Capture":null:o;d=[];for(var p,m=r;null!==m;){var f=(p=m).stateNode;if(5===p.tag&&null!==f&&(p=f,null!==h&&(null!=(f=Me(m,h))&&d.push(qr(m,f,p)))),u)break;m=m.return}0<d.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:d}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!yi(c)&&!c[mi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?yi(c):null)&&(c!==(u=Ue(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(d=mn,f="onMouseLeave",h="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cn,f="onPointerLeave",h="onPointerEnter",m="pointer"),u=null==l?o:bi(l),p=null==c?o:bi(c),(o=new d(f,m+"leave",l,n,i)).target=u,o.relatedTarget=p,f=null,yi(i)===r&&((d=new d(h,m+"enter",c,n,i)).target=p,d.relatedTarget=u,f=d),u=f,l&&c)e:{for(h=c,m=0,p=d=l;p;p=Kr(p))m++;for(p=0,f=h;f;f=Kr(f))p++;for(;0<m-p;)d=Kr(d),m--;for(;0<p-m;)h=Kr(h),p--;for(;m--;){if(d===h||null!==h&&d===h.alternate)break e;d=Kr(d),h=Kr(h)}d=null}else d=null;null!==l&&Yr(a,o,l,d,!1),null!==c&&null!==u&&Yr(a,u,c,d,!0)}if("select"===(l=(o=r?bi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var g=Jn;else if(Hn(o))if($n)g=ar;else{g=ir;var v=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(g=sr);switch(g&&(g=g(e,r))?qn(a,g,n,i):(v&&v(e,o,r),"focusout"===e&&(v=o._wrapperState)&&v.controlled&&"number"===o.type&&ee(o,"number",o.value)),v=r?bi(r):window,e){case"focusin":(Hn(v)||"true"===v.contentEditable)&&(gr=v,vr=r,yr=null);break;case"focusout":yr=vr=gr=null;break;case"mousedown":xr=!0;break;case"contextmenu":case"mouseup":case"dragend":xr=!1,br(a,n,i);break;case"selectionchange":if(fr)break;case"keydown":case"keyup":br(a,n,i)}var y;if(On)e:{switch(e){case"compositionstart":var x="onCompositionStart";break e;case"compositionend":x="onCompositionEnd";break e;case"compositionupdate":x="onCompositionUpdate";break e}x=void 0}else Un?zn(e,n)&&(x="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(x="onCompositionStart");x&&(Ln&&"ko"!==n.locale&&(Un||"onCompositionStart"!==x?"onCompositionEnd"===x&&Un&&(y=en()):(Qt="value"in($t=i)?$t.value:$t.textContent,Un=!0)),0<(v=Gr(r,x)).length&&(x=new bn(x,e,null,n,i),a.push({event:x,listeners:v}),y?x.data=y:null!==(y=Wn(n))&&(x.data=y))),(y=In?function(e,t){switch(e){case"compositionend":return Wn(t);case"keypress":return 32!==t.which?null:(Bn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Bn?null:e;default:return null}}(e,n):function(e,t){if(Un)return"compositionend"===e||!On&&zn(e,t)?(e=en(),Zt=Qt=$t=null,Un=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Gr(r,"onBeforeInput")).length&&(i=new bn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=y))}Fr(a,t)})}function qr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Gr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Me(e,n))&&r.unshift(qr(e,s,i)),null!=(s=Me(e,t))&&r.push(qr(e,s,i))),e=e.return}return r}function Kr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Yr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Me(n,s))&&a.unshift(qr(n,l,o)):i||null!=(l=Me(n,s))&&a.push(qr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Xr=/\r\n?/g,Jr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Xr,"\n").replace(Jr,"")}function Qr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Zr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Ut(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Ut(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function di(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ui=Math.random().toString(36).slice(2),hi="__reactFiber$"+ui,pi="__reactProps$"+ui,mi="__reactContainer$"+ui,fi="__reactEvents$"+ui,gi="__reactListeners$"+ui,vi="__reactHandles$"+ui;function yi(e){var t=e[hi];if(t)return t;for(var n=e.parentNode;n;){if(t=n[mi]||n[hi]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=di(e);null!==e;){if(n=e[hi])return n;e=di(e)}return t}n=(e=n).parentNode}return null}function xi(e){return!(e=e[hi]||e[mi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function bi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wi(e){return e[pi]||null}var ji=[],Ni=-1;function ki(e){return{current:e}}function Ai(e){0>Ni||(e.current=ji[Ni],ji[Ni]=null,Ni--)}function Si(e,t){Ni++,ji[Ni]=e.current,e.current=t}var _i={},Ci=ki(_i),Ei=ki(!1),Pi=_i;function Ti(e,t){var n=e.type.contextTypes;if(!n)return _i;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Mi(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Di(){Ai(Ei),Ai(Ci)}function Oi(e,t,n){if(Ci.current!==_i)throw Error(s(168));Si(Ci,t),Si(Ei,n)}function Ri(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,V(e)||"Unknown",i));return L({},n,r)}function Ii(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||_i,Pi=Ci.current,Si(Ci,e),Si(Ei,Ei.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ri(e,t,Pi),r.__reactInternalMemoizedMergedChildContext=e,Ai(Ei),Ai(Ci),Si(Ci,e)):Ai(Ei),Si(Ei,n)}var Fi=null,Bi=!1,zi=!1;function Wi(e){null===Fi?Fi=[e]:Fi.push(e)}function Ui(){if(!zi&&null!==Fi){zi=!0;var e=0,t=xt;try{var n=Fi;for(xt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Bi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ke(Ze,Ui),i}finally{xt=t,zi=!1}}return null}var Vi=[],Hi=0,qi=null,Gi=0,Ki=[],Yi=0,Xi=null,Ji=1,$i="";function Qi(e,t){Vi[Hi++]=Gi,Vi[Hi++]=qi,qi=e,Gi=t}function Zi(e,t,n){Ki[Yi++]=Ji,Ki[Yi++]=$i,Ki[Yi++]=Xi,Xi=e;var r=Ji;e=$i;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Ji=1<<32-at(t)+i|n<<i|r,$i=s+e}else Ji=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Qi(e,1),Zi(e,1,0))}function ts(e){for(;e===qi;)qi=Vi[--Hi],Vi[Hi]=null,Gi=Vi[--Hi],Vi[Hi]=null;for(;e===Xi;)Xi=Ki[--Yi],Ki[Yi]=null,$i=Ki[--Yi],Ki[Yi]=null,Ji=Ki[--Yi],Ki[Yi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Xi?{id:Ji,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function ds(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function us(e){if(e!==ns)return!1;if(!is)return ds(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw hs(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(ds(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function hs(){for(var e=rs;e;)e=ci(e.nextSibling)}function ps(){rs=ns=null,is=!1}function ms(e){null===ss?ss=[e]:ss.push(e)}var fs=b.ReactCurrentBatchConfig;function gs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function ys(e){return(0,e._init)(e._payload)}function xs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Dc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===N?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===M&&ys(s)===t.type)?((r=i(t,n.props)).ref=gs(e,t,n),r.return=e,r):((r=Oc(n.type,n.key,n.props,null,e.mode,r)).ref=gs(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Rc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function h(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Oc(t.type,t.key,t.props,null,e.mode,n)).ref=gs(e,null,t),n.return=e,n;case j:return(t=Fc(t,e.mode,n)).return=e,t;case M:return h(e,(0,t._init)(t._payload),n)}if(te(t)||R(t))return(t=Rc(t,e.mode,n,null)).return=e,t;vs(e,t)}return null}function p(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===i?c(e,t,n,r):null;case j:return n.key===i?d(e,t,n,r):null;case M:return p(e,t,(i=n._init)(n._payload),r)}if(te(n)||R(n))return null!==i?null:u(e,t,n,r,null);vs(e,n)}return null}function m(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case j:return d(t,e=e.get(null===r.key?n:r.key)||null,r,i);case M:return m(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||R(r))return u(t,e=e.get(n)||null,r,i,null);vs(t,r)}return null}function f(i,s,o,l){for(var c=null,d=null,u=s,f=s=0,g=null;null!==u&&f<o.length;f++){u.index>f?(g=u,u=null):g=u.sibling;var v=p(i,u,o[f],l);if(null===v){null===u&&(u=g);break}e&&u&&null===v.alternate&&t(i,u),s=a(v,s,f),null===d?c=v:d.sibling=v,d=v,u=g}if(f===o.length)return n(i,u),is&&Qi(i,f),c;if(null===u){for(;f<o.length;f++)null!==(u=h(i,o[f],l))&&(s=a(u,s,f),null===d?c=u:d.sibling=u,d=u);return is&&Qi(i,f),c}for(u=r(i,u);f<o.length;f++)null!==(g=m(u,i,f,o[f],l))&&(e&&null!==g.alternate&&u.delete(null===g.key?f:g.key),s=a(g,s,f),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(i,e)}),is&&Qi(i,f),c}function g(i,o,l,c){var d=R(l);if("function"!==typeof d)throw Error(s(150));if(null==(l=d.call(l)))throw Error(s(151));for(var u=d=null,f=o,g=o=0,v=null,y=l.next();null!==f&&!y.done;g++,y=l.next()){f.index>g?(v=f,f=null):v=f.sibling;var x=p(i,f,y.value,c);if(null===x){null===f&&(f=v);break}e&&f&&null===x.alternate&&t(i,f),o=a(x,o,g),null===u?d=x:u.sibling=x,u=x,f=v}if(y.done)return n(i,f),is&&Qi(i,g),d;if(null===f){for(;!y.done;g++,y=l.next())null!==(y=h(i,y.value,c))&&(o=a(y,o,g),null===u?d=y:u.sibling=y,u=y);return is&&Qi(i,g),d}for(f=r(i,f);!y.done;g++,y=l.next())null!==(y=m(f,i,g,y.value,c))&&(e&&null!==y.alternate&&f.delete(null===y.key?g:y.key),o=a(y,o,g),null===u?d=y:u.sibling=y,u=y);return e&&f.forEach(function(e){return t(i,e)}),is&&Qi(i,g),d}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===N&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case w:e:{for(var c=a.key,d=s;null!==d;){if(d.key===c){if((c=a.type)===N){if(7===d.tag){n(r,d.sibling),(s=i(d,a.props.children)).return=r,r=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===M&&ys(c)===d.type){n(r,d.sibling),(s=i(d,a.props)).ref=gs(r,d,a),s.return=r,r=s;break e}n(r,d);break}t(r,d),d=d.sibling}a.type===N?((s=Rc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Oc(a.type,a.key,a.props,null,r.mode,l)).ref=gs(r,s,a),l.return=r,r=l)}return o(r);case j:e:{for(d=a.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(a,r.mode,l)).return=r,r=s}return o(r);case M:return e(r,s,(d=a._init)(a._payload),l)}if(te(a))return f(r,s,a,l);if(R(a))return g(r,s,a,l);vs(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Lc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var bs=xs(!0),ws=xs(!1),js=ki(null),Ns=null,ks=null,As=null;function Ss(){As=ks=Ns=null}function _s(e){var t=js.current;Ai(js),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Es(e,t){Ns=e,As=ks=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(xo=!0),e.firstContext=null)}function Ps(e){var t=e._currentValue;if(As!==e)if(e={context:e,memoizedValue:t,next:null},null===ks){if(null===Ns)throw Error(s(308));ks=e,Ns.dependencies={lanes:0,firstContext:e}}else ks=ks.next=e;return t}var Ts=null;function Ms(e){null===Ts?Ts=[e]:Ts.push(e)}function Ds(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ms(t)):(n.next=i.next,i.next=n),t.interleaved=n,Os(e,r)}function Os(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var Rs=!1;function Is(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Bs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Os(e,n)}return null===(i=r.interleaved)?(t.next=t,Ms(r)):(t.next=i.next,i.next=t),r.interleaved=t,Os(e,n)}function zs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function Ws(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Us(e,t,n,r){var i=e.updateQueue;Rs=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==a&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==s){var u=i.baseState;for(a=0,d=c=l=null,o=s;;){var h=o.lane,p=o.eventTime;if((r&h)===h){null!==d&&(d=d.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var m=e,f=o;switch(h=t,p=n,f.tag){case 1:if("function"===typeof(m=f.payload)){u=m.call(p,u,h);break e}u=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null===(h="function"===typeof(m=f.payload)?m.call(p,u,h):m)||void 0===h)break e;u=L({},u,h);break e;case 2:Rs=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(h=i.effects)?i.effects=[o]:h.push(o))}else p={eventTime:p,lane:h,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=p,l=u):d=d.next=p,a|=h;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(h=o).next,h.next=null,i.lastBaseUpdate=h,i.shared.pending=null}}if(null===d&&(l=u),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=d,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Il|=a,e.lanes=a,e.memoizedState=u}}function Vs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var Hs={},qs=ki(Hs),Gs=ki(Hs),Ks=ki(Hs);function Ys(e){if(e===Hs)throw Error(s(174));return e}function Xs(e,t){switch(Si(Ks,t),Si(Gs,e),Si(qs,Hs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ai(qs),Si(qs,t)}function Js(){Ai(qs),Ai(Gs),Ai(Ks)}function $s(e){Ys(Ks.current);var t=Ys(qs.current),n=le(t,e.type);t!==n&&(Si(Gs,e),Si(qs,n))}function Qs(e){Gs.current===e&&(Ai(qs),Ai(Gs))}var Zs=ki(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=b.ReactCurrentDispatcher,ia=b.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,da=!1,ua=0,ha=0;function pa(){throw Error(s(321))}function ma(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function fa(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Qa:Za,e=n(r,i),da){a=0;do{if(da=!1,ua=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(da)}if(ra.current=$a,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ga(){var e=0!==ua;return ua=0,e}function va(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function ya(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function xa(e,t){return"function"===typeof t?t(e):t}function ba(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((sa&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(l=c=h,o=r):c=c.next=h,aa.lanes|=u,Il|=u}d=d.next}while(null!==d&&d!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(xo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Il|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function wa(e){var t=ya(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(xo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function ja(){}function Na(e,t){var n=aa,r=ya(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,xo=!0),r=r.queue,Ra(Sa.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Pa(9,Aa.bind(null,n,r,i,t),void 0,null),null===El)throw Error(s(349));0!==(30&sa)||ka(n,t,i)}return i}function ka(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Aa(e,t,n,r){t.value=n,t.getSnapshot=r,_a(t)&&Ca(e)}function Sa(e,t,n){return n(function(){_a(t)&&Ca(e)})}function _a(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ca(e){var t=Os(e,1);null!==t&&nc(t,e,1,-1)}function Ea(e){var t=va();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:xa,lastRenderedState:e},t.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[t.memoizedState,e]}function Pa(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ta(){return ya().memoizedState}function Ma(e,t,n,r){var i=va();aa.flags|=e,i.memoizedState=Pa(1|t,n,void 0,void 0===r?null:r)}function Da(e,t,n,r){var i=ya();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&ma(r,a.deps))return void(i.memoizedState=Pa(t,n,s,r))}aa.flags|=e,i.memoizedState=Pa(1|t,n,s,r)}function Oa(e,t){return Ma(8390656,8,e,t)}function Ra(e,t){return Da(2048,8,e,t)}function Ia(e,t){return Da(4,2,e,t)}function La(e,t){return Da(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Ba(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Da(4,4,Fa.bind(null,t,e),n)}function za(){}function Wa(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ua(e,t){var n=ya();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&ma(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Va(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,xo=!0),e.memoizedState=n):(or(n,t)||(n=ft(),aa.lanes|=n,Il|=n,e.baseState=!0),t)}function Ha(e,t){var n=xt;xt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{xt=n,ia.transition=r}}function qa(){return ya().memoizedState}function Ga(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ya(e))Xa(t,n);else if(null!==(n=Ds(e,t,n,r))){nc(n,e,r,ec()),Ja(n,t,r)}}function Ka(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ya(e))Xa(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ms(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ds(e,t,i,r))&&(nc(n,e,r,i=ec()),Ja(n,t,r))}}function Ya(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Xa(e,t){da=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Ja(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var $a={readContext:Ps,useCallback:pa,useContext:pa,useEffect:pa,useImperativeHandle:pa,useInsertionEffect:pa,useLayoutEffect:pa,useMemo:pa,useReducer:pa,useRef:pa,useState:pa,useDebugValue:pa,useDeferredValue:pa,useTransition:pa,useMutableSource:pa,useSyncExternalStore:pa,useId:pa,unstable_isNewReconciler:!1},Qa={readContext:Ps,useCallback:function(e,t){return va().memoizedState=[e,void 0===t?null:t],e},useContext:Ps,useEffect:Oa,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ma(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ma(4,2,e,t)},useMemo:function(e,t){var n=va();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=va();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},va().memoizedState=e},useState:Ea,useDebugValue:za,useDeferredValue:function(e){return va().memoizedState=e},useTransition:function(){var e=Ea(!1),t=e[0];return e=Ha.bind(null,e[1]),va().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=va();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===El)throw Error(s(349));0!==(30&sa)||ka(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Oa(Sa.bind(null,r,a,e),[e]),r.flags|=2048,Pa(9,Aa.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=va(),t=El.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Ji&~(1<<32-at(Ji)-1)).toString(32)+n),0<(n=ua++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=ha++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Za={readContext:Ps,useCallback:Wa,useContext:Ps,useEffect:Ra,useImperativeHandle:Ba,useInsertionEffect:Ia,useLayoutEffect:La,useMemo:Ua,useReducer:ba,useRef:Ta,useState:function(){return ba(xa)},useDebugValue:za,useDeferredValue:function(e){return Va(ya(),oa.memoizedState,e)},useTransition:function(){return[ba(xa)[0],ya().memoizedState]},useMutableSource:ja,useSyncExternalStore:Na,useId:qa,unstable_isNewReconciler:!1},eo={readContext:Ps,useCallback:Wa,useContext:Ps,useEffect:Ra,useImperativeHandle:Ba,useInsertionEffect:Ia,useLayoutEffect:La,useMemo:Ua,useReducer:wa,useRef:Ta,useState:function(){return wa(xa)},useDebugValue:za,useDeferredValue:function(e){var t=ya();return null===oa?t.memoizedState=e:Va(t,oa.memoizedState,e)},useTransition:function(){return[wa(xa)[0],ya().memoizedState]},useMutableSource:ja,useSyncExternalStore:Na,useId:qa,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Ue(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,i))&&(nc(t,e,i,r),zs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Bs(e,s,i))&&(nc(t,e,i,r),zs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Bs(e,i,r))&&(nc(t,e,r,n),zs(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=_i,s=t.contextType;return"object"===typeof s&&null!==s?s=Ps(s):(i=Mi(t)?Pi:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ti(e,i):_i),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Is(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ps(s):(s=Mi(t)?Pi:Ci.current,i.context=Ti(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Us(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=W(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function po(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Hl||(Hl=!0,ql=r),uo(0,t)},n}function mo(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Gl?Gl=new Set([this]):Gl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function fo(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ac.bind(null,e,t,n),t.then(e,e))}function go(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function vo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Bs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var yo=b.ReactCurrentOwner,xo=!1;function bo(e,t,n,r){t.child=null===e?ws(t,null,n,r):bs(t,e.child,n,r)}function wo(e,t,n,r,i){n=n.render;var s=t.ref;return Es(t,i),r=fa(e,t,n,r,s,i),n=ga(),null===e||xo?(is&&n&&es(t),t.flags|=1,bo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function jo(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Mc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Oc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,No(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return Ho(e,t,i)}return t.flags|=1,(e=Dc(s,r)).ref=t.ref,e.return=t,t.child=e}function No(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(xo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,Ho(e,t,i);0!==(131072&e.flags)&&(xo=!0)}}return So(e,t,n,r,i)}function ko(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Si(Dl,Ml),Ml|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Si(Dl,Ml),Ml|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Si(Dl,Ml),Ml|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Si(Dl,Ml),Ml|=r;return bo(e,t,i,n),t.child}function Ao(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function So(e,t,n,r,i){var s=Mi(n)?Pi:Ci.current;return s=Ti(t,s),Es(t,i),n=fa(e,t,n,r,s,i),r=ga(),null===e||xo?(is&&r&&es(t),t.flags|=1,bo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,Ho(e,t,i))}function _o(e,t,n,r,i){if(Mi(n)){var s=!0;Ii(t)}else s=!1;if(Es(t,i),null===t.stateNode)Vo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ps(c):c=Ti(t,c=Mi(n)?Pi:Ci.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof a.getSnapshotBeforeUpdate;u||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),Rs=!1;var h=t.memoizedState;a.state=h,Us(t,r,a,i),l=t.memoizedState,o!==r||h!==l||Ei.current||Rs?("function"===typeof d&&(no(t,n,d,r),l=t.memoizedState),(o=Rs||io(t,n,o,r,h,l,c))?(u||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ls(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,u=t.pendingProps,h=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ps(l):l=Ti(t,l=Mi(n)?Pi:Ci.current);var p=n.getDerivedStateFromProps;(d="function"===typeof p||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==u||h!==l)&&ao(t,a,r,l),Rs=!1,h=t.memoizedState,a.state=h,Us(t,r,a,i);var m=t.memoizedState;o!==u||h!==m||Ei.current||Rs?("function"===typeof p&&(no(t,n,p,r),m=t.memoizedState),(c=Rs||io(t,n,c,r,h,m,l)||!1)?(d||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,m,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,m,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=m),a.props=r,a.state=m,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,s,i)}function Co(e,t,n,r,i,s){Ao(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Li(t,n,!1),Ho(e,t,s);r=t.stateNode,yo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=bs(t,e.child,null,s),t.child=bs(t,null,o,s)):bo(e,t,o,s),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Eo(e){var t=e.stateNode;t.pendingContext?Oi(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Oi(0,t.context,!1),Xs(e,t.containerInfo)}function Po(e,t,n,r,i){return ps(),ms(i),t.flags|=256,bo(e,t,n,r),t.child}var To,Mo,Do,Oo,Ro={dehydrated:null,treeContext:null,retryLane:0};function Io(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,i=t.pendingProps,a=Zs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Si(Zs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Ic(l,i,0,null),e=Rc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Io(n),t.memoizedState=Ro,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Bo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Ic({mode:"visible",children:r.children},i,0,null),(a=Rc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&bs(t,e.child,null,o),t.child.memoizedState=Io(o),t.memoizedState=Ro,a);if(0===(1&t.mode))return Bo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Bo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),xo||l){if(null!==(r=El)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Os(e,i),nc(r,e,i,-1))}return fc(),Bo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=_c.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Ki[Yi++]=Ji,Ki[Yi++]=$i,Ki[Yi++]=Xi,Ji=e.id,$i=e.overflow,Xi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Dc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Dc(r,o):(o=Rc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Io(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=Ro,i}return e=(o=e.child).sibling,i=Dc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Ic({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Bo(e,t,n,r){return null!==r&&ms(r),bs(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function Wo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Uo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(bo(e,t,r.children,n),0!==(2&(r=Zs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Si(Zs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Wo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Wo(t,!0,n,null,s);break;case"together":Wo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Vo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ho(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Il|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Dc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Dc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function qo(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Go(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Ko(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Go(t),null;case 1:case 17:return Mi(t.type)&&Di(),Go(t),null;case 3:return r=t.stateNode,Js(),Ai(Ei),Ai(Ci),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(us(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),Mo(e,t),Go(t),null;case 5:Qs(t);var i=Ys(Ks.current);if(n=t.type,null!==e&&null!=t.stateNode)Do(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Go(t),null}if(e=Ys(qs.current),us(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[hi]=t,r[pi]=a,e=0!==(1&t.mode),n){case"dialog":Br("cancel",r),Br("close",r);break;case"iframe":case"object":case"embed":Br("load",r);break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],r);break;case"source":Br("error",r);break;case"img":case"image":case"link":Br("error",r),Br("load",r);break;case"details":Br("toggle",r);break;case"input":J(r,a),Br("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Br("invalid",r);break;case"textarea":ie(r,a),Br("invalid",r)}for(var l in ye(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Qr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Br("scroll",r)}switch(n){case"input":G(r),Z(r,a,!0);break;case"textarea":G(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Zr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[hi]=t,e[pi]=r,To(e,t,!1,!1),t.stateNode=e;e:{switch(l=xe(n,r),n){case"dialog":Br("cancel",e),Br("close",e),i=r;break;case"iframe":case"object":case"embed":Br("load",e),i=r;break;case"video":case"audio":for(i=0;i<Rr.length;i++)Br(Rr[i],e);i=r;break;case"source":Br("error",e),i=r;break;case"img":case"image":case"link":Br("error",e),Br("load",e),i=r;break;case"details":Br("toggle",e),i=r;break;case"input":J(e,r),i=X(e,r),Br("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Br("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Br("invalid",e)}for(a in ye(n,i),c=i)if(c.hasOwnProperty(a)){var d=c[a];"style"===a?ge(e,d):"dangerouslySetInnerHTML"===a?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===a?"string"===typeof d?("textarea"!==n||""!==d)&&he(e,d):"number"===typeof d&&he(e,""+d):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=d&&"onScroll"===a&&Br("scroll",e):null!=d&&x(e,a,d,l))}switch(n){case"input":G(e),Z(e,r,!1);break;case"textarea":G(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+H(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Go(t),null;case 6:if(e&&null!=t.stateNode)Oo(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Ys(Ks.current),Ys(qs.current),us(t)){if(r=t.stateNode,n=t.memoizedProps,r[hi]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Qr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Qr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[hi]=t,t.stateNode=r}return Go(t),null;case 13:if(Ai(Zs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))hs(),ps(),t.flags|=98560,a=!1;else if(a=us(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[hi]=t}else ps(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Go(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Zs.current)?0===Ol&&(Ol=3):fc())),null!==t.updateQueue&&(t.flags|=4),Go(t),null);case 4:return Js(),Mo(e,t),null===e&&Ur(t.stateNode.containerInfo),Go(t),null;case 10:return _s(t.type._context),Go(t),null;case 19:if(Ai(Zs),null===(a=t.memoizedState))return Go(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)qo(a,!1);else{if(0!==Ol||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,qo(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Si(Zs,1&Zs.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Ul&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),qo(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Go(t),null}else 2*$e()-a.renderingStartTime>Ul&&1073741824!==n&&(t.flags|=128,r=!0,qo(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=Zs.current,Si(Zs,r?1&n|2:1&n),t):(Go(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ml)&&(Go(t),6&t.subtreeFlags&&(t.flags|=8192)):Go(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Yo(e,t){switch(ts(t),t.tag){case 1:return Mi(t.type)&&Di(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Js(),Ai(Ei),Ai(Ci),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Qs(t),null;case 13:if(Ai(Zs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));ps()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ai(Zs),null;case 4:return Js(),null;case 10:return _s(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}To=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},Mo=function(){},Do=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Ys(qs.current);var s,a=null;switch(n){case"input":i=X(e,i),r=X(e,r),a=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in ye(n,r),n=null,i)if(!r.hasOwnProperty(d)&&i.hasOwnProperty(d)&&null!=i[d])if("style"===d){var l=i[d];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(o.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in r){var c=r[d];if(l=null!=i?i[d]:void 0,r.hasOwnProperty(d)&&c!==l&&(null!=c||null!=l))if("style"===d)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(o.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Br("scroll",e),a||l===c||(a=[])):(a=a||[]).push(d,c))}n&&(a=a||[]).push("style",n);var d=a;(t.updateQueue=d)&&(t.flags|=4)}},Oo=function(e,t,n,r){n!==r&&(t.flags|=4)};var Xo=!1,Jo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Qo=null;function Zo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){kc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[hi],delete t[pi],delete t[fi],delete t[gi],delete t[vi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var dl=null,ul=!1;function hl(e,t,n){for(n=n.child;null!==n;)pl(e,t,n),n=n.sibling}function pl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Jo||Zo(n,t);case 6:var r=dl,i=ul;dl=null,hl(e,t,n),ul=i,null!==(dl=r)&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):dl.removeChild(n.stateNode));break;case 18:null!==dl&&(ul?(e=dl,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Ut(e)):li(dl,n.stateNode));break;case 4:r=dl,i=ul,dl=n.stateNode.containerInfo,ul=!0,hl(e,t,n),dl=r,ul=i;break;case 0:case 11:case 14:case 15:if(!Jo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}hl(e,t,n);break;case 1:if(!Jo&&(Zo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){kc(n,t,o)}hl(e,t,n);break;case 21:hl(e,t,n);break;case 22:1&n.mode?(Jo=(r=Jo)||null!==n.memoizedState,hl(e,t,n),Jo=r):hl(e,t,n);break;default:hl(e,t,n)}}function ml(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:dl=l.stateNode,ul=!1;break e;case 3:case 4:dl=l.stateNode.containerInfo,ul=!0;break e}l=l.return}if(null===dl)throw Error(s(160));pl(a,o,i),dl=null,ul=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(d){kc(i,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)gl(t,e),t=t.sibling}function gl(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fl(t,e),vl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(g){kc(e,e.return,g)}try{nl(5,e,e.return)}catch(g){kc(e,e.return,g)}}break;case 1:fl(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return);break;case 5:if(fl(t,e),vl(e),512&r&&null!==n&&Zo(n,n.return),32&e.flags){var i=e.stateNode;try{he(i,"")}catch(g){kc(e,e.return,g)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(i,a),xe(l,o);var d=xe(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];"style"===u?ge(i,h):"dangerouslySetInnerHTML"===u?ue(i,h):"children"===u?he(i,h):x(i,u,h,d)}switch(l){case"input":Q(i,a);break;case"textarea":se(i,a);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var m=a.value;null!=m?ne(i,!!a.multiple,m,!1):p!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[pi]=a}catch(g){kc(e,e.return,g)}}break;case 6:if(fl(t,e),vl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){kc(e,e.return,g)}}break;case 3:if(fl(t,e),vl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ut(t.containerInfo)}catch(g){kc(e,e.return,g)}break;case 4:default:fl(t,e),vl(e);break;case 13:fl(t,e),vl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Wl=$e())),4&r&&ml(e);break;case 22:if(u=null!==n&&null!==n.memoizedState,1&e.mode?(Jo=(d=Jo)||u,fl(t,e),Jo=d):fl(t,e),vl(e),8192&r){if(d=null!==e.memoizedState,(e.stateNode.isHidden=d)&&!u&&0!==(1&e.mode))for(Qo=e,u=e.child;null!==u;){for(h=Qo=u;null!==Qo;){switch(m=(p=Qo).child,p.tag){case 0:case 11:case 14:case 15:nl(4,p,p.return);break;case 1:Zo(p,p.return);var f=p.stateNode;if("function"===typeof f.componentWillUnmount){r=p,n=p.return;try{t=r,f.props=t.memoizedProps,f.state=t.memoizedState,f.componentWillUnmount()}catch(g){kc(r,n,g)}}break;case 5:Zo(p,p.return);break;case 22:if(null!==p.memoizedState){wl(h);continue}}null!==m?(m.return=p,Qo=m):wl(h)}u=u.sibling}e:for(u=null,h=e;;){if(5===h.tag){if(null===u){u=h;try{i=h.stateNode,d?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=h.stateNode,o=void 0!==(c=h.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=fe("display",o))}catch(g){kc(e,e.return,g)}}}else if(6===h.tag){if(null===u)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(g){kc(e,e.return,g)}}else if((22!==h.tag&&23!==h.tag||null===h.memoizedState||h===e)&&null!==h.child){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;null===h.sibling;){if(null===h.return||h.return===e)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:fl(t,e),vl(e),4&r&&ml(e);case 21:}}function vl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(he(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){kc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function yl(e,t,n){Qo=e,xl(e,t,n)}function xl(e,t,n){for(var r=0!==(1&e.mode);null!==Qo;){var i=Qo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Xo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Jo;o=Xo;var c=Jo;if(Xo=a,(Jo=l)&&!c)for(Qo=i;null!==Qo;)l=(a=Qo).child,22===a.tag&&null!==a.memoizedState?jl(i):null!==l?(l.return=a,Qo=l):jl(i);for(;null!==s;)Qo=s,xl(s,t,n),s=s.sibling;Qo=i,Xo=o,Jo=c}bl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Qo=s):bl(e)}}function bl(e){for(;null!==Qo;){var t=Qo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Jo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Jo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Vs(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Vs(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var h=u.dehydrated;null!==h&&Ut(h)}}}break;default:throw Error(s(163))}Jo||512&t.flags&&il(t)}catch(p){kc(t,t.return,p)}}if(t===e){Qo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Qo=n;break}Qo=t.return}}function wl(e){for(;null!==Qo;){var t=Qo;if(t===e){Qo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Qo=n;break}Qo=t.return}}function jl(e){for(;null!==Qo;){var t=Qo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){kc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){kc(t,i,l)}}var s=t.return;try{il(t)}catch(l){kc(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){kc(t,a,l)}}}catch(l){kc(t,t.return,l)}if(t===e){Qo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Qo=o;break}Qo=t.return}}var Nl,kl=Math.ceil,Al=b.ReactCurrentDispatcher,Sl=b.ReactCurrentOwner,_l=b.ReactCurrentBatchConfig,Cl=0,El=null,Pl=null,Tl=0,Ml=0,Dl=ki(0),Ol=0,Rl=null,Il=0,Ll=0,Fl=0,Bl=null,zl=null,Wl=0,Ul=1/0,Vl=null,Hl=!1,ql=null,Gl=null,Kl=!1,Yl=null,Xl=0,Jl=0,$l=null,Ql=-1,Zl=0;function ec(){return 0!==(6&Cl)?$e():-1!==Ql?Ql:Ql=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Tl?Tl&-Tl:null!==fs.transition?(0===Zl&&(Zl=ft()),Zl):0!==(e=xt)?e:e=void 0===(e=window.event)?16:Jt(e.type)}function nc(e,t,n,r){if(50<Jl)throw Jl=0,$l=null,Error(s(185));vt(e,n,r),0!==(2&Cl)&&e===El||(e===El&&(0===(2&Cl)&&(Ll|=n),4===Ol&&oc(e,Tl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Ul=$e()+500,Bi&&Ui()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=pt(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=ht(e,e===El?Tl:0);if(0===r)null!==n&&Ye(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Ye(n),1===t)0===e.tag?function(e){Bi=!0,Wi(e)}(lc.bind(null,e)):Wi(lc.bind(null,e)),ai(function(){0===(6&Cl)&&Ui()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ec(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Ql=-1,Zl=0,0!==(6&Cl))throw Error(s(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var r=ht(e,e===El?Tl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var i=Cl;Cl|=2;var a=mc();for(El===e&&Tl===t||(Vl=null,Ul=$e()+500,hc(e,t));;)try{yc();break}catch(l){pc(e,l)}Ss(),Al.current=a,Cl=i,null!==Pl?t=0:(El=null,Tl=0,t=Ol)}if(0!==t){if(2===t&&(0!==(i=mt(e))&&(r=i,t=sc(e,i))),1===t)throw n=Rl,hc(e,0),oc(e,r),rc(e,$e()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=gc(e,r))&&(0!==(a=mt(e))&&(r=a,t=sc(e,a))),1===t))throw n=Rl,hc(e,0),oc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,zl,Vl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Wl+500-$e())){if(0!==ht(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(wc.bind(null,e,zl,Vl),t);break}wc(e,zl,Vl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*kl(r/1960))-r)){e.timeoutHandle=ri(wc.bind(null,e,zl,Vl),r);break}wc(e,zl,Vl);break;default:throw Error(s(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Bl;return e.current.memoizedState.isDehydrated&&(hc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(s(327));jc();var t=ht(e,0);if(0===(1&t))return rc(e,$e()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=mt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Rl,hc(e,0),oc(e,t),rc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zl,Vl),rc(e,$e()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Ul=$e()+500,Bi&&Ui())}}function dc(e){null!==Yl&&0===Yl.tag&&0===(6&Cl)&&jc();var t=Cl;Cl|=1;var n=_l.transition,r=xt;try{if(_l.transition=null,xt=1,e)return e()}finally{xt=r,_l.transition=n,0===(6&(Cl=t))&&Ui()}}function uc(){Ml=Dl.current,Ai(Dl)}function hc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Pl)for(n=Pl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Di();break;case 3:Js(),Ai(Ei),Ai(Ci),na();break;case 5:Qs(r);break;case 4:Js();break;case 13:case 19:Ai(Zs);break;case 10:_s(r.type._context);break;case 22:case 23:uc()}n=n.return}if(El=e,Pl=e=Dc(e.current,null),Tl=Ml=t,Ol=0,Rl=null,Fl=Ll=Il=0,zl=Bl=null,null!==Ts){for(t=0;t<Ts.length;t++)if(null!==(r=(n=Ts[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ts=null}return e}function pc(e,t){for(;;){var n=Pl;try{if(Ss(),ra.current=$a,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,da=!1,ua=0,Sl.current=null,null===n||null===n.return){Ol=1,Rl=t,Pl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Tl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=l,h=u.tag;if(0===(1&u.mode)&&(0===h||11===h||15===h)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=go(o);if(null!==m){m.flags&=-257,vo(m,o,l,0,t),1&m.mode&&fo(a,d,t),c=d;var f=(t=m).updateQueue;if(null===f){var g=new Set;g.add(c),t.updateQueue=g}else f.add(c);break e}if(0===(1&t)){fo(a,d,t),fc();break e}c=Error(s(426))}else if(is&&1&l.mode){var v=go(o);if(null!==v){0===(65536&v.flags)&&(v.flags|=256),vo(v,o,l,0,t),ms(lo(c,l));break e}}a=c=lo(c,l),4!==Ol&&(Ol=2),null===Bl?Bl=[a]:Bl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Ws(a,po(0,c,t));break e;case 1:l=c;var y=a.type,x=a.stateNode;if(0===(128&a.flags)&&("function"===typeof y.getDerivedStateFromError||null!==x&&"function"===typeof x.componentDidCatch&&(null===Gl||!Gl.has(x)))){a.flags|=65536,t&=-t,a.lanes|=t,Ws(a,mo(a,l,t));break e}}a=a.return}while(null!==a)}bc(n)}catch(b){t=b,Pl===n&&null!==n&&(Pl=n=n.return);continue}break}}function mc(){var e=Al.current;return Al.current=$a,null===e?$a:e}function fc(){0!==Ol&&3!==Ol&&2!==Ol||(Ol=4),null===El||0===(268435455&Il)&&0===(268435455&Ll)||oc(El,Tl)}function gc(e,t){var n=Cl;Cl|=2;var r=mc();for(El===e&&Tl===t||(Vl=null,hc(e,t));;)try{vc();break}catch(i){pc(e,i)}if(Ss(),Cl=n,Al.current=r,null!==Pl)throw Error(s(261));return El=null,Tl=0,Ol}function vc(){for(;null!==Pl;)xc(Pl)}function yc(){for(;null!==Pl&&!Xe();)xc(Pl)}function xc(e){var t=Nl(e.alternate,e,Ml);e.memoizedProps=e.pendingProps,null===t?bc(e):Pl=t,Sl.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Ko(n,t,Ml)))return void(Pl=n)}else{if(null!==(n=Yo(n,t)))return n.flags&=32767,void(Pl=n);if(null===e)return Ol=6,void(Pl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Pl=t);Pl=t=e}while(null!==t);0===Ol&&(Ol=5)}function wc(e,t,n){var r=xt,i=_l.transition;try{_l.transition=null,xt=1,function(e,t,n,r){do{jc()}while(null!==Yl);if(0!==(6&Cl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===El&&(Pl=El=null,Tl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Kl||(Kl=!0,Ec(tt,function(){return jc(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=_l.transition,_l.transition=null;var o=xt;xt=1;var l=Cl;Cl|=4,Sl.current=null,function(e,t){if(ei=Ht,pr(e=hr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(w){n=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=e,p=null;t:for(;;){for(var m;h!==n||0!==i&&3!==h.nodeType||(l=o+i),h!==a||0!==r&&3!==h.nodeType||(c=o+r),3===h.nodeType&&(o+=h.nodeValue.length),null!==(m=h.firstChild);)p=h,h=m;for(;;){if(h===e)break t;if(p===n&&++d===i&&(l=o),p===a&&++u===r&&(c=o),null!==(m=h.nextSibling))break;p=(h=p).parentNode}h=m}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},Ht=!1,Qo=t;null!==Qo;)if(e=(t=Qo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Qo=e;else for(;null!==Qo;){t=Qo;try{var f=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==f){var g=f.memoizedProps,v=f.memoizedState,y=t.stateNode,x=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:to(t.type,g),v);y.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var b=t.stateNode.containerInfo;1===b.nodeType?b.textContent="":9===b.nodeType&&b.documentElement&&b.removeChild(b.documentElement);break;default:throw Error(s(163))}}catch(w){kc(t,t.return,w)}if(null!==(e=t.sibling)){e.return=t.return,Qo=e;break}Qo=t.return}f=tl,tl=!1}(e,n),gl(n,e),mr(ti),Ht=!!ei,ti=ei=null,e.current=n,yl(n,e,i),Je(),Cl=l,xt=o,_l.transition=a}else e.current=n;if(Kl&&(Kl=!1,Yl=e,Xl=i),a=e.pendingLanes,0===a&&(Gl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Hl)throw Hl=!1,e=ql,ql=null,e;0!==(1&Xl)&&0!==e.tag&&jc(),a=e.pendingLanes,0!==(1&a)?e===$l?Jl++:(Jl=0,$l=e):Jl=0,Ui()}(e,t,n,r)}finally{_l.transition=i,xt=r}return null}function jc(){if(null!==Yl){var e=bt(Xl),t=_l.transition,n=xt;try{if(_l.transition=null,xt=16>e?16:e,null===Yl)var r=!1;else{if(e=Yl,Yl=null,Xl=0,0!==(6&Cl))throw Error(s(331));var i=Cl;for(Cl|=4,Qo=e.current;null!==Qo;){var a=Qo,o=a.child;if(0!==(16&Qo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var d=l[c];for(Qo=d;null!==Qo;){var u=Qo;switch(u.tag){case 0:case 11:case 15:nl(8,u,a)}var h=u.child;if(null!==h)h.return=u,Qo=h;else for(;null!==Qo;){var p=(u=Qo).sibling,m=u.return;if(sl(u),u===d){Qo=null;break}if(null!==p){p.return=m,Qo=p;break}Qo=m}}}var f=a.alternate;if(null!==f){var g=f.child;if(null!==g){f.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(null!==g)}}Qo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Qo=o;else e:for(;null!==Qo;){if(0!==(2048&(a=Qo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var y=a.sibling;if(null!==y){y.return=a.return,Qo=y;break e}Qo=a.return}}var x=e.current;for(Qo=x;null!==Qo;){var b=(o=Qo).child;if(0!==(2064&o.subtreeFlags)&&null!==b)b.return=o,Qo=b;else e:for(o=x;null!==Qo;){if(0!==(2048&(l=Qo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(j){kc(l,l.return,j)}if(l===o){Qo=null;break e}var w=l.sibling;if(null!==w){w.return=l.return,Qo=w;break e}Qo=l.return}}if(Cl=i,Ui(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(j){}r=!0}return r}finally{xt=n,_l.transition=t}}return!1}function Nc(e,t,n){e=Bs(e,t=po(0,t=lo(n,t),1),1),t=ec(),null!==e&&(vt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Gl||!Gl.has(r))){t=Bs(t,e=mo(t,e=lo(n,e),1),1),e=ec(),null!==t&&(vt(t,1,e),rc(t,e));break}}t=t.return}}function Ac(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,El===e&&(Tl&n)===n&&(4===Ol||3===Ol&&(130023424&Tl)===Tl&&500>$e()-Wl?hc(e,0):Fl|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=ec();null!==(e=Os(e,t))&&(vt(e,t,n),rc(e,n))}function _c(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Sc(e,n)}function Ec(e,t){return Ke(e,t)}function Pc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,r){return new Pc(e,t,n,r)}function Mc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Dc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Oc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Mc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case N:return Rc(n.children,i,a,t);case k:o=8,i|=8;break;case A:return(e=Tc(12,n,t,2|i)).elementType=A,e.lanes=a,e;case E:return(e=Tc(13,n,t,i)).elementType=E,e.lanes=a,e;case P:return(e=Tc(19,n,t,i)).elementType=P,e.lanes=a,e;case D:return Ic(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:o=10;break e;case _:o=9;break e;case C:o=11;break e;case T:o=14;break e;case M:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Tc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function Rc(e,t,n,r){return(e=Tc(7,e,r,t)).lanes=n,e}function Ic(e,t,n,r){return(e=Tc(22,e,r,t)).elementType=D,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Bc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,a,o,l){return e=new Bc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Tc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Is(s),e}function Wc(e){if(!e)return _i;e:{if(Ue(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Mi(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Mi(n))return Ri(e,n,t)}return t}function Uc(e,t,n,r,i,s,a,o,l){return(e=zc(n,r,!0,e,0,s,0,o,l)).context=Wc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Bs(n,s,i),e.current.lanes=i,vt(e,i,r),rc(e,r),e}function Vc(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=Wc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Bs(i,t,a))&&(nc(e,i,a,s),zs(e,i,a)),a}function Hc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function qc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Gc(e,t){qc(e,t),(e=e.alternate)&&qc(e,t)}Nl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ei.current)xo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return xo=!1,function(e,t,n){switch(t.tag){case 3:Eo(t),ps();break;case 5:$s(t);break;case 1:Mi(t.type)&&Ii(t);break;case 4:Xs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Si(js,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Si(Zs,1&Zs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Si(Zs,1&Zs.current),null!==(e=Ho(e,t,n))?e.sibling:null);Si(Zs,1&Zs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Uo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Si(Zs,Zs.current),r)break;return null;case 22:case 23:return t.lanes=0,ko(e,t,n)}return Ho(e,t,n)}(e,t,n);xo=0!==(131072&e.flags)}else xo=!1,is&&0!==(1048576&t.flags)&&Zi(t,Gi,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Vo(e,t),e=t.pendingProps;var i=Ti(t,Ci.current);Es(t,n),i=fa(null,t,r,e,i,n);var a=ga();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Mi(r)?(a=!0,Ii(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Is(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Co(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),bo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Vo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Mc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===T)return 14}return 2}(r),e=to(r,e),i){case 0:t=So(null,t,r,e,n);break e;case 1:t=_o(null,t,r,e,n);break e;case 11:t=wo(null,t,r,e,n);break e;case 14:t=jo(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,So(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,_o(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Eo(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ls(e,t),Us(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Po(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=Po(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=ws(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(ps(),r===i){t=Ho(e,t,n);break e}bo(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Ao(e,t),bo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Lo(e,t,n);case 4:return Xs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=bs(t,null,r,n):bo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,wo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return bo(e,t,t.pendingProps,n),t.child;case 8:case 12:return bo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Si(js,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ei.current){t=Ho(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var d=a.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Cs(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Cs(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}bo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Es(t,n),r=r(i=Ps(i)),t.flags|=1,bo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),jo(e,t,r,i=to(r.type,i),n);case 15:return No(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Vo(e,t),t.tag=1,Mi(r)?(e=!0,Ii(t)):e=!1,Es(t,n),so(t,r,i),oo(t,r,i,n),Co(null,t,r,!0,e,n);case 19:return Uo(e,t,n);case 22:return ko(e,t,n)}throw Error(s(156,t.tag))};var Kc="function"===typeof reportError?reportError:function(e){console.error(e)};function Yc(e){this._internalRoot=e}function Xc(e){this._internalRoot=e}function Jc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Qc(){}function Zc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=Hc(a);o.call(e)}}Vc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=Hc(a);s.call(e)}}var a=Uc(t,r,e,0,null,!1,0,"",Qc);return e._reactRootContainer=a,e[mi]=a.current,Ur(8===e.nodeType?e.parentNode:e),dc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=Hc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Qc);return e._reactRootContainer=l,e[mi]=l.current,Ur(8===e.nodeType?e.parentNode:e),dc(function(){Vc(t,l,n,r)}),l}(n,t,e,i,r);return Hc(a)}Xc.prototype.render=Yc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Vc(e,t,null,null)},Xc.prototype.unmount=Yc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Vc(null,e,null,null)}),t[mi]=null}},Xc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Dt.length&&0!==t&&t<Dt[n].priority;n++);Dt.splice(n,0,e),0===n&&Lt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,$e()),0===(6&Cl)&&(Ul=$e()+500,Ui()))}break;case 13:dc(function(){var t=Os(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Gc(e,1)}},jt=function(e){if(13===e.tag){var t=Os(e,134217728);if(null!==t)nc(t,e,134217728,ec());Gc(e,134217728)}},Nt=function(e){if(13===e.tag){var t=tc(e),n=Os(e,t);if(null!==n)nc(n,e,t,ec());Gc(e,t)}},kt=function(){return xt},At=function(e,t){var n=xt;try{return xt=e,t()}finally{xt=n}},je=function(e,t,n){switch(t){case"input":if(Q(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=wi(r);if(!i)throw Error(s(90));K(r),Q(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ee=dc;var ed={usingClientEntryPoint:!1,Events:[xi,bi,wi,Se,_e,cc]},td={findFiberByHostInstance:yi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=qe(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{it=rd.inject(nd),st=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Jc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Jc(e))throw Error(s(299));var n=!1,r="",i=Kc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[mi]=t.current,Ur(8===e.nodeType?e.parentNode:e),new Yc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=qe(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Jc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Kc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Uc(t,null,e,1,null!=n?n:null,i,0,a,o),e[mi]=t.current,Ur(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Xc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[mi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},2777:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isSymbol=function(e){return"symbol"===typeof e||e instanceof Symbol}},2897:(e,t,n)=>{var r=n(3693);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}e.exports=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){r(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e},e.exports.__esModule=!0,e.exports.default=e.exports},3218:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},3272:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toKey=function(e){var t;return"string"===typeof e||"symbol"===typeof e?e:Object.is(null===e||void 0===e||null===(t=e.valueOf)||void 0===t?void 0:t.call(e),-0)?"-0":String(e)}},3693:(e,t,n)=>{var r=n(7736);e.exports=function(e,t,n){return(t=r(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},e.exports.__esModule=!0,e.exports.default=e.exports},3738:e=>{function t(n){return e.exports=t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,t(n)}e.exports=t,e.exports.__esModule=!0,e.exports.default=e.exports},3757:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isTypedArray=function(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}},3799:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4704),i=n(1203),s=n(870),a=n(9972);t.isIterateeCall=function(e,t,n){return!!s.isObject(n)&&(!!("number"===typeof t&&i.isArrayLike(n)&&r.isIndex(t)&&t<n.length||"string"===typeof t&&t in n)&&a.eq(n[t],e))}},3808:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8268),i=n(5261);t.matches=function(e){return e=i.cloneDeep(e),t=>r.isMatch(t,e)}},3821:(e,t,n)=>{e.exports=n(2204).sortBy},4202:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;var m={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},f=Object.assign,g={};function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}function y(){}function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||m}v.prototype.isReactComponent={},v.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},v.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=v.prototype;var b=x.prototype=new y;b.constructor=x,f(b,v.prototype),b.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function A(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)j.call(t,i)&&!k.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:N.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var _=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function E(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+C(l,0):s,w(a)?(i="",null!=e&&(i=e.replace(_,"$&/")+"/"),E(a,t,i,"",function(e){return e})):null!=a&&(S(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(_,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+C(o=e[c],c);l+=E(o,t,i,d,a)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=p&&e[p]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(o=e.next()).done;)l+=E(o=o.value,t,i,d=s+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function P(e,t,n){if(null==e)return e;var r=[],i=0;return E(e,r,"","",function(e){return t.call(n,e,i++)}),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var M={current:null},D={transition:null},O={ReactCurrentDispatcher:M,ReactCurrentBatchConfig:D,ReactCurrentOwner:N};function R(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:P,forEach:function(e,t,n){P(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return P(e,function(){t++}),t},toArray:function(e){return P(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=v,t.Fragment=i,t.Profiler=a,t.PureComponent=x,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=O,t.act=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=f({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)j.call(t,c)&&!k.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=A,t.createFactory=function(e){var t=A.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:h,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=D.transition;D.transition={};try{e()}finally{D.transition=t}},t.unstable_act=R,t.useCallback=function(e,t){return M.current.useCallback(e,t)},t.useContext=function(e){return M.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return M.current.useDeferredValue(e)},t.useEffect=function(e,t){return M.current.useEffect(e,t)},t.useId=function(){return M.current.useId()},t.useImperativeHandle=function(e,t,n){return M.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return M.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return M.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return M.current.useMemo(e,t)},t.useReducer=function(e,t,n){return M.current.useReducer(e,t,n)},t.useRef=function(e){return M.current.useRef(e)},t.useState=function(e){return M.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return M.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return M.current.useTransition()},t.version="18.3.1"},4208:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.uniqBy=function(e,t){const n=new Map;for(let r=0;r<e.length;r++){const i=e[r],s=t(i);n.has(s)||n.set(s,i)}return Array.from(n.values())}},4332:(e,t,n)=>{e.exports=n(5053).uniqBy},4391:(e,t,n)=>{"use strict";var r=n(7950);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},4704:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const n=/^(?:0|[1-9]\d*)$/;t.isIndex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_SAFE_INTEGER;switch(typeof e){case"number":return Number.isInteger(e)&&e>=0&&e<t;case"symbol":return!1;case"string":return n.test(e)}}},4705:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>s})},4803:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isPrimitive=function(e){return null==e||"object"!==typeof e&&"function"!==typeof e}},4830:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.debounce=function(e,t){let n,{signal:r,edges:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=null;const a=null!=i&&i.includes("leading"),o=null==i||i.includes("trailing"),l=()=>{null!==s&&(e.apply(n,s),n=void 0,s=null)};let c=null;const d=()=>{null!=c&&clearTimeout(c),c=setTimeout(()=>{c=null,o&&l(),u()},t)},u=()=>{null!==c&&(clearTimeout(c),c=null),n=void 0,s=null},h=function(){if(null!==r&&void 0!==r&&r.aborted)return;n=this;for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];s=t;const o=null==c;d(),a&&o&&l()};return h.schedule=d,h.cancel=u,h.flush=()=>{l()},null===r||void 0===r||r.addEventListener("abort",u,{once:!0}),h}},4879:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6770);t.toFinite=function(e){if(!e)return 0===e?e:0;if((e=r.toNumber(e))===1/0||e===-1/0){return(e<0?-1:1)*Number.MAX_VALUE}return e===e?e:0}},5043:(e,t,n)=>{"use strict";e.exports=n(4202)},5053:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(4208),i=n(9599),s=n(2104),a=n(2715);t.uniqBy=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.identity;return s.isArrayLikeObject(e)?r.uniqBy(Array.from(e),a.iteratee(t)):[]}},5173:(e,t,n)=>{e.exports=n(1497)()},5261:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6433);t.cloneDeep=function(e){return r.cloneDeepWithImpl(e,void 0,e,new Map,void 0)}},5303:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2489),i=n(4704),s=n(6321),a=n(1444);t.has=function(e,t){let n;if(n=Array.isArray(t)?t:"string"===typeof t&&r.isDeepKey(t)&&null==(null===e||void 0===e?void 0:e[t])?a.toPath(t):[t],0===n.length)return!1;let o=e;for(let r=0;r<n.length;r++){const e=n[r];if(null==o||!Object.hasOwn(o,e)){if(!((Array.isArray(o)||s.isArguments(o))&&i.isIndex(e)&&e<o.length))return!1}o=o[e]}return!0}},5316:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9709),i=n(7043),s=n(1444);t.orderBy=function(e,t,n,a){if(null==e)return[];n=a?void 0:n,Array.isArray(e)||(e=Object.values(e)),Array.isArray(t)||(t=null==t?[null]:[t]),0===t.length&&(t=[null]),Array.isArray(n)||(n=null==n?[]:[n]),n=n.map(e=>String(e));const o=(e,t)=>{let n=e;for(let r=0;r<t.length&&null!=n;++r)n=n[t[r]];return n},l=t.map(e=>(Array.isArray(e)&&1===e.length&&(e=e[0]),null==e||"function"===typeof e||Array.isArray(e)||i.isKey(e)?e:{key:e,path:s.toPath(e)}));return e.map(e=>({original:e,criteria:l.map(t=>((e,t)=>null==t||null==e?t:"object"===typeof e&&"key"in e?Object.hasOwn(t,e.key)?t[e.key]:o(t,e.path):"function"===typeof e?e(t):Array.isArray(e)?o(t,e):"object"===typeof t?t[e]:t)(t,e))})).slice().sort((e,t)=>{for(let i=0;i<l.length;i++){const s=r.compareValues(e.criteria[i],t.criteria[i],n[i]);if(0!==s)return s}return 0}).map(e=>e.original)}},5414:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(1293);t.throttle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const{leading:i=!0,trailing:s=!0}=n;return r.debounce(e,t,{leading:i,maxWait:t,trailing:s})}},5508:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6433),i=n(7599);t.cloneDeepWith=function(e,t){return r.cloneDeepWith(e,(n,s,a,o)=>{const l=null===t||void 0===t?void 0:t(n,s,a,o);if(void 0!==l)return l;if("object"===typeof e)switch(Object.prototype.toString.call(e)){case i.numberTag:case i.stringTag:case i.booleanTag:{const t=new e.constructor(null===e||void 0===e?void 0:e.valueOf());return r.copyProperties(t,e),t}case i.argumentsTag:{const t={};return r.copyProperties(t,e),t.length=e.length,t[Symbol.iterator]=e[Symbol.iterator],t}default:return}})}},5990:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getTag=function(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}},6321:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5990);t.isArguments=function(e){return null!==e&&"object"===typeof e&&"[object Arguments]"===r.getTag(e)}},6392:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.last=function(e){return e[e.length-1]}},6433:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6443),i=n(5990),s=n(7599),a=n(4803),o=n(3757);function l(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:new Map,d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;const u=null===d||void 0===d?void 0:d(e,t,n,r);if(void 0!==u)return u;if(a.isPrimitive(e))return e;if(r.has(e))return r.get(e);if(Array.isArray(e)){const t=new Array(e.length);r.set(e,t);for(let i=0;i<e.length;i++)t[i]=l(e[i],i,n,r,d);return Object.hasOwn(e,"index")&&(t.index=e.index),Object.hasOwn(e,"input")&&(t.input=e.input),t}if(e instanceof Date)return new Date(e.getTime());if(e instanceof RegExp){const t=new RegExp(e.source,e.flags);return t.lastIndex=e.lastIndex,t}if(e instanceof Map){const t=new Map;r.set(e,t);for(const[i,s]of e)t.set(i,l(s,i,n,r,d));return t}if(e instanceof Set){const t=new Set;r.set(e,t);for(const i of e)t.add(l(i,void 0,n,r,d));return t}if("undefined"!==typeof Buffer&&Buffer.isBuffer(e))return e.subarray();if(o.isTypedArray(e)){const t=new(Object.getPrototypeOf(e).constructor)(e.length);r.set(e,t);for(let i=0;i<e.length;i++)t[i]=l(e[i],i,n,r,d);return t}if(e instanceof ArrayBuffer||"undefined"!==typeof SharedArrayBuffer&&e instanceof SharedArrayBuffer)return e.slice(0);if(e instanceof DataView){const t=new DataView(e.buffer.slice(0),e.byteOffset,e.byteLength);return r.set(e,t),c(t,e,n,r,d),t}if("undefined"!==typeof File&&e instanceof File){const t=new File([e],e.name,{type:e.type});return r.set(e,t),c(t,e,n,r,d),t}if(e instanceof Blob){const t=new Blob([e],{type:e.type});return r.set(e,t),c(t,e,n,r,d),t}if(e instanceof Error){const t=new e.constructor;return r.set(e,t),t.message=e.message,t.name=e.name,t.stack=e.stack,t.cause=e.cause,c(t,e,n,r,d),t}if("object"===typeof e&&function(e){switch(i.getTag(e)){case s.argumentsTag:case s.arrayTag:case s.arrayBufferTag:case s.dataViewTag:case s.booleanTag:case s.dateTag:case s.float32ArrayTag:case s.float64ArrayTag:case s.int8ArrayTag:case s.int16ArrayTag:case s.int32ArrayTag:case s.mapTag:case s.numberTag:case s.objectTag:case s.regexpTag:case s.setTag:case s.stringTag:case s.symbolTag:case s.uint8ArrayTag:case s.uint8ClampedArrayTag:case s.uint16ArrayTag:case s.uint32ArrayTag:return!0;default:return!1}}(e)){const t=Object.create(Object.getPrototypeOf(e));return r.set(e,t),c(t,e,n,r,d),t}return e}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,i=arguments.length>3?arguments[3]:void 0,s=arguments.length>4?arguments[4]:void 0;const a=[...Object.keys(t),...r.getSymbols(t)];for(let r=0;r<a.length;r++){const o=a[r],c=Object.getOwnPropertyDescriptor(e,o);(null==c||c.writable)&&(e[o]=l(t[o],o,n,i,s))}}t.cloneDeepWith=function(e,t){return l(e,void 0,e,new Map,t)},t.cloneDeepWithImpl=l,t.copyProperties=c},6440:e=>{"use strict";var t=function(){};e.exports=t},6443:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.getSymbols=function(e){return Object.getOwnPropertySymbols(e).filter(t=>Object.prototype.propertyIsEnumerable.call(e,t))}},6770:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2777);t.toNumber=function(e){return r.isSymbol(e)?NaN:Number(e)}},7043:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2777),i=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,s=/^\w*$/;t.isKey=function(e,t){return!Array.isArray(e)&&(!("number"!==typeof e&&"boolean"!==typeof e&&null!=e&&!r.isSymbol(e))||("string"===typeof e&&(s.test(e)||!i.test(e))||null!=t&&Object.hasOwn(t,e)))}},7231:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(3799),i=n(4879);t.range=function(e,t,n){n&&"number"!==typeof n&&r.isIterateeCall(e,t,n)&&(t=n=void 0),e=i.toFinite(e),void 0===t?(t=e,e=0):t=i.toFinite(t),n=void 0===n?e<t?1:-1:i.toFinite(n);const s=Math.max(Math.ceil((t-e)/(n||1)),0),a=new Array(s);for(let r=0;r<s;r++)a[r]=e,e+=n;return a}},7234:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,d=e[c];if(0>s(l,n))c<i&&0>s(d,l)?(e[r]=d,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,p=3,m=!1,f=!1,g=!1,v="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,x="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)i(d);else{if(!(t.startTime<=e))break;i(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,b(e),!f)if(null!==r(c))f=!0,D(j);else{var t=r(d);null!==t&&O(w,t.startTime-e)}}function j(e,n){f=!1,g&&(g=!1,y(S),S=-1),m=!0;var s=p;try{for(b(n),h=r(c);null!==h&&(!(h.expirationTime>n)||e&&!E());){var a=h.callback;if("function"===typeof a){h.callback=null,p=h.priorityLevel;var o=a(h.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?h.callback=o:h===r(c)&&i(c),b(n)}else i(c);h=r(c)}if(null!==h)var l=!0;else{var u=r(d);null!==u&&O(w,u.startTime-n),l=!1}return l}finally{h=null,p=s,m=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,A=null,S=-1,_=5,C=-1;function E(){return!(t.unstable_now()-C<_)}function P(){if(null!==A){var e=t.unstable_now();C=e;var n=!0;try{n=A(!0,e)}finally{n?N():(k=!1,A=null)}}else k=!1}if("function"===typeof x)N=function(){x(P)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,M=T.port2;T.port1.onmessage=P,N=function(){M.postMessage(null)}}else N=function(){v(P,0)};function D(e){A=e,k||(k=!0,N())}function O(e,n){S=v(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){f||m||(f=!0,D(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(p){case 1:case 2:case 3:var t=3;break;default:t=p}var n=p;p=t;try{return e()}finally{p=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=p;p=e;try{return t()}finally{p=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:u++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(d,e),null===r(c)&&e===r(d)&&(g?(y(S),S=-1):g=!0,O(w,s-a))):(e.sortIndex=o,n(c,e),f||m||(f=!0,D(j))),e},t.unstable_shouldYield=E,t.unstable_wrapCallback=function(e){var t=p;return function(){var n=p;p=t;try{return e.apply(this,arguments)}finally{p=n}}}},7237:(e,t,n)=>{"use strict";n(8365)},7260:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isUnsafeProperty=function(e){return"__proto__"===e}},7312:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.flatten=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;const n=[],r=Math.floor(t),i=(e,t)=>{for(let s=0;s<e.length;s++){const a=e[s];Array.isArray(a)&&t<r?i(a,t+1):n.push(a)}};return i(e,0),n}},7330:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(9323);t.property=function(e){return function(t){return r.get(t,e)}}},7599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.argumentsTag="[object Arguments]",t.arrayBufferTag="[object ArrayBuffer]",t.arrayTag="[object Array]",t.bigInt64ArrayTag="[object BigInt64Array]",t.bigUint64ArrayTag="[object BigUint64Array]",t.booleanTag="[object Boolean]",t.dataViewTag="[object DataView]",t.dateTag="[object Date]",t.errorTag="[object Error]",t.float32ArrayTag="[object Float32Array]",t.float64ArrayTag="[object Float64Array]",t.functionTag="[object Function]",t.int16ArrayTag="[object Int16Array]",t.int32ArrayTag="[object Int32Array]",t.int8ArrayTag="[object Int8Array]",t.mapTag="[object Map]",t.numberTag="[object Number]",t.objectTag="[object Object]",t.regexpTag="[object RegExp]",t.setTag="[object Set]",t.stringTag="[object String]",t.symbolTag="[object Symbol]",t.uint16ArrayTag="[object Uint16Array]",t.uint32ArrayTag="[object Uint32Array]",t.uint8ArrayTag="[object Uint8Array]",t.uint8ClampedArrayTag="[object Uint8ClampedArray]"},7736:(e,t,n)=>{var r=n(3738).default,i=n(9045);e.exports=function(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""},e.exports.__esModule=!0,e.exports.default=e.exports},7770:(e,t,n)=>{e.exports=n(9323).get},7820:(e,t,n)=>{e.exports=n(5414).throttle},7834:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>i});var r=n(9064);const i=new class{constructor(){this.apiClient=r.default}async getPricingPlans(){try{return(await this.apiClient.get("/paddle/pricing-plans")).data}catch(e){throw console.error("Error fetching pricing plans:",e),e}}async createPaymentLink(e){try{return(await this.apiClient.post("/paddle/create-payment-link",e)).data}catch(t){throw console.error("Error creating payment link:",t),t}}async activateTrial(e){try{return(await this.apiClient.post("/paddle/activate-trial",e)).data}catch(t){throw console.error("Error activating trial:",t),t}}async getSubscriptionStatus(){try{return(await this.apiClient.get("/paddle/subscription-status")).data}catch(e){throw console.error("Error fetching subscription status:",e),e}}async mockPaymentSuccess(e){try{return(await this.apiClient.post("/paddle/mock-payment-success",e)).data}catch(t){throw console.error("Error in mock payment success:",t),t}}async resetTrialStatus(){try{return(await this.apiClient.post("/paddle/reset-trial-status")).data}catch(e){throw console.error("Error resetting trial status:",e),e}}async cancelSubscription(){try{return(await this.apiClient.post("/paddle/cancel-subscription")).data}catch(e){throw console.error("Error cancelling subscription:",e),e}}async getBillingHistory(){try{return(await this.apiClient.get("/paddle/billing-history")).data}catch(e){throw console.error("Error fetching billing history:",e),e}}async checkFeatureAccess(e){try{return(await this.apiClient.get("/paddle/check-feature/".concat(e))).data}catch(t){throw console.error("Error checking feature access:",t),t}}loadPaddle(){return new Promise((e,t)=>{if(window.Paddle)return void e(window.Paddle);const n=document.createElement("script");n.src="https://cdn.paddle.com/paddle/v2/paddle.js",n.async=!0,n.onload=()=>{window.Paddle?e(window.Paddle):t(new Error("Paddle failed to load"))},n.onerror=()=>{t(new Error("Failed to load Paddle script"))},document.head.appendChild(n)})}initializePaddleCheckout(){return this.loadPaddle()}async openCheckout(e){try{if(!e)throw new Error("No checkout URL provided");await this.initializePaddleCheckout();window.location.href=e}catch(t){throw console.error("Error opening Paddle checkout:",t),t}}}},7950:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(2730)},8210:function(e,t,n){var r;!function(){"use strict";var i,s=1e9,a={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},o=!0,l="[DecimalError] ",c=l+"Invalid argument: ",d=l+"Exponent out of range: ",u=Math.floor,h=Math.pow,p=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,m=1e7,f=9007199254740991,g=u(1286742750677284.5),v={};function y(e,t){var n,r,i,s,a,l,c,d,u=e.constructor,h=u.precision;if(!e.s||!t.s)return t.s||(t=new u(e)),o?C(t,h):t;if(c=e.d,d=t.d,a=e.e,i=t.e,c=c.slice(),s=a-i){for(s<0?(r=c,s=-s,l=d.length):(r=d,i=a,l=c.length),s>(l=(a=Math.ceil(h/7))>l?a+1:l+1)&&(s=l,r.length=1),r.reverse();s--;)r.push(0);r.reverse()}for((l=c.length)-(s=d.length)<0&&(s=l,r=d,d=c,c=r),n=0;s;)n=(c[--s]=c[s]+d[s]+n)/m|0,c[s]%=m;for(n&&(c.unshift(n),++i),l=c.length;0==c[--l];)c.pop();return t.d=c,t.e=i,o?C(t,h):t}function x(e,t,n){if(e!==~~e||e<t||e>n)throw Error(c+e)}function b(e){var t,n,r,i=e.length-1,s="",a=e[0];if(i>0){for(s+=a,t=1;t<i;t++)(n=7-(r=e[t]+"").length)&&(s+=A(n)),s+=r;(n=7-(r=(a=e[t])+"").length)&&(s+=A(n))}else if(0===a)return"0";for(;a%10===0;)a/=10;return s+a}v.absoluteValue=v.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e},v.comparedTo=v.cmp=function(e){var t,n,r,i,s=this;if(e=new s.constructor(e),s.s!==e.s)return s.s||-e.s;if(s.e!==e.e)return s.e>e.e^s.s<0?1:-1;for(t=0,n=(r=s.d.length)<(i=e.d.length)?r:i;t<n;++t)if(s.d[t]!==e.d[t])return s.d[t]>e.d[t]^s.s<0?1:-1;return r===i?0:r>i^s.s<0?1:-1},v.decimalPlaces=v.dp=function(){var e=this,t=e.d.length-1,n=7*(t-e.e);if(t=e.d[t])for(;t%10==0;t/=10)n--;return n<0?0:n},v.dividedBy=v.div=function(e){return w(this,new this.constructor(e))},v.dividedToIntegerBy=v.idiv=function(e){var t=this.constructor;return C(w(this,new t(e),0,1),t.precision)},v.equals=v.eq=function(e){return!this.cmp(e)},v.exponent=function(){return N(this)},v.greaterThan=v.gt=function(e){return this.cmp(e)>0},v.greaterThanOrEqualTo=v.gte=function(e){return this.cmp(e)>=0},v.isInteger=v.isint=function(){return this.e>this.d.length-2},v.isNegative=v.isneg=function(){return this.s<0},v.isPositive=v.ispos=function(){return this.s>0},v.isZero=function(){return 0===this.s},v.lessThan=v.lt=function(e){return this.cmp(e)<0},v.lessThanOrEqualTo=v.lte=function(e){return this.cmp(e)<1},v.logarithm=v.log=function(e){var t,n=this,r=n.constructor,s=r.precision,a=s+5;if(void 0===e)e=new r(10);else if((e=new r(e)).s<1||e.eq(i))throw Error(l+"NaN");if(n.s<1)throw Error(l+(n.s?"NaN":"-Infinity"));return n.eq(i)?new r(0):(o=!1,t=w(S(n,a),S(e,a),a),o=!0,C(t,s))},v.minus=v.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?E(t,e):y(t,(e.s=-e.s,e))},v.modulo=v.mod=function(e){var t,n=this,r=n.constructor,i=r.precision;if(!(e=new r(e)).s)throw Error(l+"NaN");return n.s?(o=!1,t=w(n,e,0,1).times(e),o=!0,n.minus(t)):C(new r(n),i)},v.naturalExponential=v.exp=function(){return j(this)},v.naturalLogarithm=v.ln=function(){return S(this)},v.negated=v.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e},v.plus=v.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?y(t,e):E(t,(e.s=-e.s,e))},v.precision=v.sd=function(e){var t,n,r,i=this;if(void 0!==e&&e!==!!e&&1!==e&&0!==e)throw Error(c+e);if(t=N(i)+1,n=7*(r=i.d.length-1)+1,r=i.d[r]){for(;r%10==0;r/=10)n--;for(r=i.d[0];r>=10;r/=10)n++}return e&&t>n?t:n},v.squareRoot=v.sqrt=function(){var e,t,n,r,i,s,a,c=this,d=c.constructor;if(c.s<1){if(!c.s)return new d(0);throw Error(l+"NaN")}for(e=N(c),o=!1,0==(i=Math.sqrt(+c))||i==1/0?(((t=b(c.d)).length+e)%2==0&&(t+="0"),i=Math.sqrt(t),e=u((e+1)/2)-(e<0||e%2),r=new d(t=i==1/0?"5e"+e:(t=i.toExponential()).slice(0,t.indexOf("e")+1)+e)):r=new d(i.toString()),i=a=(n=d.precision)+3;;)if(r=(s=r).plus(w(c,s,a+2)).times(.5),b(s.d).slice(0,a)===(t=b(r.d)).slice(0,a)){if(t=t.slice(a-3,a+1),i==a&&"4999"==t){if(C(s,n+1,0),s.times(s).eq(c)){r=s;break}}else if("9999"!=t)break;a+=4}return o=!0,C(r,n)},v.times=v.mul=function(e){var t,n,r,i,s,a,l,c,d,u=this,h=u.constructor,p=u.d,f=(e=new h(e)).d;if(!u.s||!e.s)return new h(0);for(e.s*=u.s,n=u.e+e.e,(c=p.length)<(d=f.length)&&(s=p,p=f,f=s,a=c,c=d,d=a),s=[],r=a=c+d;r--;)s.push(0);for(r=d;--r>=0;){for(t=0,i=c+r;i>r;)l=s[i]+f[r]*p[i-r-1]+t,s[i--]=l%m|0,t=l/m|0;s[i]=(s[i]+t)%m|0}for(;!s[--a];)s.pop();return t?++n:s.shift(),e.d=s,e.e=n,o?C(e,h.precision):e},v.toDecimalPlaces=v.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),void 0===e?n:(x(e,0,s),void 0===t?t=r.rounding:x(t,0,8),C(n,e+N(n)+1,t))},v.toExponential=function(e,t){var n,r=this,i=r.constructor;return void 0===e?n=P(r,!0):(x(e,0,s),void 0===t?t=i.rounding:x(t,0,8),n=P(r=C(new i(r),e+1,t),!0,e+1)),n},v.toFixed=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?P(i):(x(e,0,s),void 0===t?t=a.rounding:x(t,0,8),n=P((r=C(new a(i),e+N(i)+1,t)).abs(),!1,e+N(r)+1),i.isneg()&&!i.isZero()?"-"+n:n)},v.toInteger=v.toint=function(){var e=this,t=e.constructor;return C(new t(e),N(e)+1,t.rounding)},v.toNumber=function(){return+this},v.toPower=v.pow=function(e){var t,n,r,s,a,c,d=this,h=d.constructor,p=+(e=new h(e));if(!e.s)return new h(i);if(!(d=new h(d)).s){if(e.s<1)throw Error(l+"Infinity");return d}if(d.eq(i))return d;if(r=h.precision,e.eq(i))return C(d,r);if(c=(t=e.e)>=(n=e.d.length-1),a=d.s,c){if((n=p<0?-p:p)<=f){for(s=new h(i),t=Math.ceil(r/7+4),o=!1;n%2&&T((s=s.times(d)).d,t),0!==(n=u(n/2));)T((d=d.times(d)).d,t);return o=!0,e.s<0?new h(i).div(s):C(s,r)}}else if(a<0)throw Error(l+"NaN");return a=a<0&&1&e.d[Math.max(t,n)]?-1:1,d.s=1,o=!1,s=e.times(S(d,r+12)),o=!0,(s=j(s)).s=a,s},v.toPrecision=function(e,t){var n,r,i=this,a=i.constructor;return void 0===e?r=P(i,(n=N(i))<=a.toExpNeg||n>=a.toExpPos):(x(e,1,s),void 0===t?t=a.rounding:x(t,0,8),r=P(i=C(new a(i),e,t),e<=(n=N(i))||n<=a.toExpNeg,e)),r},v.toSignificantDigits=v.tosd=function(e,t){var n=this.constructor;return void 0===e?(e=n.precision,t=n.rounding):(x(e,1,s),void 0===t?t=n.rounding:x(t,0,8)),C(new n(this),e,t)},v.toString=v.valueOf=v.val=v.toJSON=function(){var e=this,t=N(e),n=e.constructor;return P(e,t<=n.toExpNeg||t>=n.toExpPos)};var w=function(){function e(e,t){var n,r=0,i=e.length;for(e=e.slice();i--;)n=e[i]*t+r,e[i]=n%m|0,r=n/m|0;return r&&e.unshift(r),e}function t(e,t,n,r){var i,s;if(n!=r)s=n>r?1:-1;else for(i=s=0;i<n;i++)if(e[i]!=t[i]){s=e[i]>t[i]?1:-1;break}return s}function n(e,t,n){for(var r=0;n--;)e[n]-=r,r=e[n]<t[n]?1:0,e[n]=r*m+e[n]-t[n];for(;!e[0]&&e.length>1;)e.shift()}return function(r,i,s,a){var o,c,d,u,h,p,f,g,v,y,x,b,w,j,k,A,S,_,E=r.constructor,P=r.s==i.s?1:-1,T=r.d,M=i.d;if(!r.s)return new E(r);if(!i.s)throw Error(l+"Division by zero");for(c=r.e-i.e,S=M.length,k=T.length,g=(f=new E(P)).d=[],d=0;M[d]==(T[d]||0);)++d;if(M[d]>(T[d]||0)&&--c,(b=null==s?s=E.precision:a?s+(N(r)-N(i))+1:s)<0)return new E(0);if(b=b/7+2|0,d=0,1==S)for(u=0,M=M[0],b++;(d<k||u)&&b--;d++)w=u*m+(T[d]||0),g[d]=w/M|0,u=w%M|0;else{for((u=m/(M[0]+1)|0)>1&&(M=e(M,u),T=e(T,u),S=M.length,k=T.length),j=S,y=(v=T.slice(0,S)).length;y<S;)v[y++]=0;(_=M.slice()).unshift(0),A=M[0],M[1]>=m/2&&++A;do{u=0,(o=t(M,v,S,y))<0?(x=v[0],S!=y&&(x=x*m+(v[1]||0)),(u=x/A|0)>1?(u>=m&&(u=m-1),1==(o=t(h=e(M,u),v,p=h.length,y=v.length))&&(u--,n(h,S<p?_:M,p))):(0==u&&(o=u=1),h=M.slice()),(p=h.length)<y&&h.unshift(0),n(v,h,y),-1==o&&(o=t(M,v,S,y=v.length))<1&&(u++,n(v,S<y?_:M,y)),y=v.length):0===o&&(u++,v=[0]),g[d++]=u,o&&v[0]?v[y++]=T[j]||0:(v=[T[j]],y=1)}while((j++<k||void 0!==v[0])&&b--)}return g[0]||g.shift(),f.e=c,C(f,a?s+N(f)+1:s)}}();function j(e,t){var n,r,s,a,l,c=0,u=0,p=e.constructor,m=p.precision;if(N(e)>16)throw Error(d+N(e));if(!e.s)return new p(i);for(null==t?(o=!1,l=m):l=t,a=new p(.03125);e.abs().gte(.1);)e=e.times(a),u+=5;for(l+=Math.log(h(2,u))/Math.LN10*2+5|0,n=r=s=new p(i),p.precision=l;;){if(r=C(r.times(e),l),n=n.times(++c),b((a=s.plus(w(r,n,l))).d).slice(0,l)===b(s.d).slice(0,l)){for(;u--;)s=C(s.times(s),l);return p.precision=m,null==t?(o=!0,C(s,m)):s}s=a}}function N(e){for(var t=7*e.e,n=e.d[0];n>=10;n/=10)t++;return t}function k(e,t,n){if(t>e.LN10.sd())throw o=!0,n&&(e.precision=n),Error(l+"LN10 precision limit exceeded");return C(new e(e.LN10),t)}function A(e){for(var t="";e--;)t+="0";return t}function S(e,t){var n,r,s,a,c,d,u,h,p,m=1,f=e,g=f.d,v=f.constructor,y=v.precision;if(f.s<1)throw Error(l+(f.s?"NaN":"-Infinity"));if(f.eq(i))return new v(0);if(null==t?(o=!1,h=y):h=t,f.eq(10))return null==t&&(o=!0),k(v,h);if(h+=10,v.precision=h,r=(n=b(g)).charAt(0),a=N(f),!(Math.abs(a)<15e14))return u=k(v,h+2,y).times(a+""),f=S(new v(r+"."+n.slice(1)),h-10).plus(u),v.precision=y,null==t?(o=!0,C(f,y)):f;for(;r<7&&1!=r||1==r&&n.charAt(1)>3;)r=(n=b((f=f.times(e)).d)).charAt(0),m++;for(a=N(f),r>1?(f=new v("0."+n),a++):f=new v(r+"."+n.slice(1)),d=c=f=w(f.minus(i),f.plus(i),h),p=C(f.times(f),h),s=3;;){if(c=C(c.times(p),h),b((u=d.plus(w(c,new v(s),h))).d).slice(0,h)===b(d.d).slice(0,h))return d=d.times(2),0!==a&&(d=d.plus(k(v,h+2,y).times(a+""))),d=w(d,new v(m),h),v.precision=y,null==t?(o=!0,C(d,y)):d;d=u,s+=2}}function _(e,t){var n,r,i;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;48===t.charCodeAt(r);)++r;for(i=t.length;48===t.charCodeAt(i-1);)--i;if(t=t.slice(r,i)){if(i-=r,n=n-r-1,e.e=u(n/7),e.d=[],r=(n+1)%7,n<0&&(r+=7),r<i){for(r&&e.d.push(+t.slice(0,r)),i-=7;r<i;)e.d.push(+t.slice(r,r+=7));r=7-(t=t.slice(r)).length}else r-=i;for(;r--;)t+="0";if(e.d.push(+t),o&&(e.e>g||e.e<-g))throw Error(d+n)}else e.s=0,e.e=0,e.d=[0];return e}function C(e,t,n){var r,i,s,a,l,c,p,f,v=e.d;for(a=1,s=v[0];s>=10;s/=10)a++;if((r=t-a)<0)r+=7,i=t,p=v[f=0];else{if((f=Math.ceil((r+1)/7))>=(s=v.length))return e;for(p=s=v[f],a=1;s>=10;s/=10)a++;i=(r%=7)-7+a}if(void 0!==n&&(l=p/(s=h(10,a-i-1))%10|0,c=t<0||void 0!==v[f+1]||p%s,c=n<4?(l||c)&&(0==n||n==(e.s<0?3:2)):l>5||5==l&&(4==n||c||6==n&&(r>0?i>0?p/h(10,a-i):0:v[f-1])%10&1||n==(e.s<0?8:7))),t<1||!v[0])return c?(s=N(e),v.length=1,t=t-s-1,v[0]=h(10,(7-t%7)%7),e.e=u(-t/7)||0):(v.length=1,v[0]=e.e=e.s=0),e;if(0==r?(v.length=f,s=1,f--):(v.length=f+1,s=h(10,7-r),v[f]=i>0?(p/h(10,a-i)%h(10,i)|0)*s:0),c)for(;;){if(0==f){(v[0]+=s)==m&&(v[0]=1,++e.e);break}if(v[f]+=s,v[f]!=m)break;v[f--]=0,s=1}for(r=v.length;0===v[--r];)v.pop();if(o&&(e.e>g||e.e<-g))throw Error(d+N(e));return e}function E(e,t){var n,r,i,s,a,l,c,d,u,h,p=e.constructor,f=p.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new p(e),o?C(t,f):t;if(c=e.d,h=t.d,r=t.e,d=e.e,c=c.slice(),a=d-r){for((u=a<0)?(n=c,a=-a,l=h.length):(n=h,r=d,l=c.length),a>(i=Math.max(Math.ceil(f/7),l)+2)&&(a=i,n.length=1),n.reverse(),i=a;i--;)n.push(0);n.reverse()}else{for((u=(i=c.length)<(l=h.length))&&(l=i),i=0;i<l;i++)if(c[i]!=h[i]){u=c[i]<h[i];break}a=0}for(u&&(n=c,c=h,h=n,t.s=-t.s),l=c.length,i=h.length-l;i>0;--i)c[l++]=0;for(i=h.length;i>a;){if(c[--i]<h[i]){for(s=i;s&&0===c[--s];)c[s]=m-1;--c[s],c[i]+=m}c[i]-=h[i]}for(;0===c[--l];)c.pop();for(;0===c[0];c.shift())--r;return c[0]?(t.d=c,t.e=r,o?C(t,f):t):new p(0)}function P(e,t,n){var r,i=N(e),s=b(e.d),a=s.length;return t?(n&&(r=n-a)>0?s=s.charAt(0)+"."+s.slice(1)+A(r):a>1&&(s=s.charAt(0)+"."+s.slice(1)),s=s+(i<0?"e":"e+")+i):i<0?(s="0."+A(-i-1)+s,n&&(r=n-a)>0&&(s+=A(r))):i>=a?(s+=A(i+1-a),n&&(r=n-i-1)>0&&(s=s+"."+A(r))):((r=i+1)<a&&(s=s.slice(0,r)+"."+s.slice(r)),n&&(r=n-a)>0&&(i+1===a&&(s+="."),s+=A(r))),e.s<0?"-"+s:s}function T(e,t){if(e.length>t)return e.length=t,!0}function M(e){if(!e||"object"!==typeof e)throw Error(l+"Object expected");var t,n,r,i=["precision",1,s,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<i.length;t+=3)if(void 0!==(r=e[n=i[t]])){if(!(u(r)===r&&r>=i[t+1]&&r<=i[t+2]))throw Error(c+n+": "+r);this[n]=r}if(void 0!==(r=e[n="LN10"])){if(r!=Math.LN10)throw Error(c+n+": "+r);this[n]=new this(r)}return this}a=function e(t){var n,r,i;function s(e){var t=this;if(!(t instanceof s))return new s(e);if(t.constructor=s,e instanceof s)return t.s=e.s,t.e=e.e,void(t.d=(e=e.d)?e.slice():e);if("number"===typeof e){if(0*e!==0)throw Error(c+e);if(e>0)t.s=1;else{if(!(e<0))return t.s=0,t.e=0,void(t.d=[0]);e=-e,t.s=-1}return e===~~e&&e<1e7?(t.e=0,void(t.d=[e])):_(t,e.toString())}if("string"!==typeof e)throw Error(c+e);if(45===e.charCodeAt(0)?(e=e.slice(1),t.s=-1):t.s=1,!p.test(e))throw Error(c+e);_(t,e)}if(s.prototype=v,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=e,s.config=s.set=M,void 0===t&&(t={}),t)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],n=0;n<i.length;)t.hasOwnProperty(r=i[n++])||(t[r]=this[r]);return s.config(t),s}(a),a.default=a.Decimal=a,i=new a(1),void 0===(r=function(){return a}.call(t,n,t,e))||(e.exports=r)}()},8268:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(2132);t.isMatch=function(e,t){return r.isMatchWith(e,t,()=>{})}},8346:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)}},8365:(e,t,n)=>{"use strict";var r=n(5043);var i="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},s=r.useSyncExternalStore,a=r.useRef,o=r.useEffect,l=r.useMemo,c=r.useDebugValue},8396:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(5508);t.cloneDeep=function(e){return r.cloneDeepWith(e)}},8420:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isLength=function(e){return Number.isSafeInteger(e)&&e>=0}},8443:(e,t,n)=>{"use strict";e.exports=n(9717)},8499:e=>{"use strict";var t=Object.prototype.hasOwnProperty,n="~";function r(){}function i(e,t,n){this.fn=e,this.context=t,this.once=n||!1}function s(e,t,r,s,a){if("function"!==typeof r)throw new TypeError("The listener must be a function");var o=new i(r,s||e,a),l=n?n+t:t;return e._events[l]?e._events[l].fn?e._events[l]=[e._events[l],o]:e._events[l].push(o):(e._events[l]=o,e._eventsCount++),e}function a(e,t){0===--e._eventsCount?e._events=new r:delete e._events[t]}function o(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(n=!1)),o.prototype.eventNames=function(){var e,r,i=[];if(0===this._eventsCount)return i;for(r in e=this._events)t.call(e,r)&&i.push(n?r.slice(1):r);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(e)):i},o.prototype.listeners=function(e){var t=n?n+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,a=new Array(s);i<s;i++)a[i]=r[i].fn;return a},o.prototype.listenerCount=function(e){var t=n?n+e:e,r=this._events[t];return r?r.fn?1:r.length:0},o.prototype.emit=function(e,t,r,i,s,a){var o=n?n+e:e;if(!this._events[o])return!1;var l,c,d=this._events[o],u=arguments.length;if(d.fn){switch(d.once&&this.removeListener(e,d.fn,void 0,!0),u){case 1:return d.fn.call(d.context),!0;case 2:return d.fn.call(d.context,t),!0;case 3:return d.fn.call(d.context,t,r),!0;case 4:return d.fn.call(d.context,t,r,i),!0;case 5:return d.fn.call(d.context,t,r,i,s),!0;case 6:return d.fn.call(d.context,t,r,i,s,a),!0}for(c=1,l=new Array(u-1);c<u;c++)l[c-1]=arguments[c];d.fn.apply(d.context,l)}else{var h,p=d.length;for(c=0;c<p;c++)switch(d[c].once&&this.removeListener(e,d[c].fn,void 0,!0),u){case 1:d[c].fn.call(d[c].context);break;case 2:d[c].fn.call(d[c].context,t);break;case 3:d[c].fn.call(d[c].context,t,r);break;case 4:d[c].fn.call(d[c].context,t,r,i);break;default:if(!l)for(h=1,l=new Array(u-1);h<u;h++)l[h-1]=arguments[h];d[c].fn.apply(d[c].context,l)}}return!0},o.prototype.on=function(e,t,n){return s(this,e,t,n,!1)},o.prototype.once=function(e,t,n){return s(this,e,t,n,!0)},o.prototype.removeListener=function(e,t,r,i){var s=n?n+e:e;if(!this._events[s])return this;if(!t)return a(this,s),this;var o=this._events[s];if(o.fn)o.fn!==t||i&&!o.once||r&&o.context!==r||a(this,s);else{for(var l=0,c=[],d=o.length;l<d;l++)(o[l].fn!==t||i&&!o[l].once||r&&o[l].context!==r)&&c.push(o[l]);c.length?this._events[s]=1===c.length?c[0]:c:a(this,s)}return this},o.prototype.removeAllListeners=function(e){var t;return e?(t=n?n+e:e,this._events[t]&&a(this,t)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o},8845:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(8268),i=n(3272),s=n(8396),a=n(9323),o=n(5303);t.matchesProperty=function(e,t){switch(typeof e){case"object":var n;Object.is(null===(n=e)||void 0===n?void 0:n.valueOf(),-0)&&(e="-0");break;case"number":e=i.toKey(e)}return t=s.cloneDeep(t),function(n){const i=a.get(n,e);return void 0===i?o.has(n,e):void 0===t?void 0===i:r.isMatch(i,t)}}},8853:(e,t,n)=>{"use strict";e.exports=n(7234)},9045:(e,t,n)=>{var r=n(3738).default;e.exports=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)},e.exports.__esModule=!0,e.exports.default=e.exports},9064:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>Tt});var r={};function i(e,t){return function(){return e.apply(t,arguments)}}n.r(r),n.d(r,{hasBrowserEnv:()=>de,hasStandardBrowserEnv:()=>he,hasStandardBrowserWebWorkerEnv:()=>pe,navigator:()=>ue,origin:()=>me});const{toString:s}=Object.prototype,{getPrototypeOf:a}=Object,{iterator:o,toStringTag:l}=Symbol,c=(d=Object.create(null),e=>{const t=s.call(e);return d[t]||(d[t]=t.slice(8,-1).toLowerCase())});var d;const u=e=>(e=e.toLowerCase(),t=>c(t)===e),h=e=>t=>typeof t===e,{isArray:p}=Array,m=h("undefined");function f(e){return null!==e&&!m(e)&&null!==e.constructor&&!m(e.constructor)&&y(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const g=u("ArrayBuffer");const v=h("string"),y=h("function"),x=h("number"),b=e=>null!==e&&"object"===typeof e,w=e=>{if("object"!==c(e))return!1;const t=a(e);return(null===t||t===Object.prototype||null===Object.getPrototypeOf(t))&&!(l in e)&&!(o in e)},j=u("Date"),N=u("File"),k=u("Blob"),A=u("FileList"),S=u("URLSearchParams"),[_,C,E,P]=["ReadableStream","Request","Response","Headers"].map(u);function T(e,t){let n,r,{allOwnKeys:i=!1}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(null!==e&&"undefined"!==typeof e)if("object"!==typeof e&&(e=[e]),p(e))for(n=0,r=e.length;n<r;n++)t.call(null,e[n],n,e);else{if(f(e))return;const r=i?Object.getOwnPropertyNames(e):Object.keys(e),s=r.length;let a;for(n=0;n<s;n++)a=r[n],t.call(null,e[a],a,e)}}function M(e,t){if(f(e))return null;t=t.toLowerCase();const n=Object.keys(e);let r,i=n.length;for(;i-- >0;)if(r=n[i],t===r.toLowerCase())return r;return null}const D="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof self?self:"undefined"!==typeof window?window:global,O=e=>!m(e)&&e!==D;const R=(I="undefined"!==typeof Uint8Array&&a(Uint8Array),e=>I&&e instanceof I);var I;const L=u("HTMLFormElement"),F=(e=>{let{hasOwnProperty:t}=e;return(e,n)=>t.call(e,n)})(Object.prototype),B=u("RegExp"),z=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};T(n,(n,i)=>{let s;!1!==(s=t(n,i,e))&&(r[i]=s||n)}),Object.defineProperties(e,r)};const W=u("AsyncFunction"),U=((e,t)=>{return e?setImmediate:t?(n="axios@".concat(Math.random()),r=[],D.addEventListener("message",e=>{let{source:t,data:i}=e;t===D&&i===n&&r.length&&r.shift()()},!1),e=>{r.push(e),D.postMessage(n,"*")}):e=>setTimeout(e);var n,r})("function"===typeof setImmediate,y(D.postMessage)),V="undefined"!==typeof queueMicrotask?queueMicrotask.bind(D):"undefined"!==typeof process&&process.nextTick||U,H={isArray:p,isArrayBuffer:g,isBuffer:f,isFormData:e=>{let t;return e&&("function"===typeof FormData&&e instanceof FormData||y(e.append)&&("formdata"===(t=c(e))||"object"===t&&y(e.toString)&&"[object FormData]"===e.toString()))},isArrayBufferView:function(e){let t;return t="undefined"!==typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&g(e.buffer),t},isString:v,isNumber:x,isBoolean:e=>!0===e||!1===e,isObject:b,isPlainObject:w,isEmptyObject:e=>{if(!b(e)||f(e))return!1;try{return 0===Object.keys(e).length&&Object.getPrototypeOf(e)===Object.prototype}catch(t){return!1}},isReadableStream:_,isRequest:C,isResponse:E,isHeaders:P,isUndefined:m,isDate:j,isFile:N,isBlob:k,isRegExp:B,isFunction:y,isStream:e=>b(e)&&y(e.pipe),isURLSearchParams:S,isTypedArray:R,isFileList:A,forEach:T,merge:function e(){const{caseless:t,skipUndefined:n}=O(this)&&this||{},r={},i=(i,s)=>{const a=t&&M(r,s)||s;w(r[a])&&w(i)?r[a]=e(r[a],i):w(i)?r[a]=e({},i):p(i)?r[a]=i.slice():n&&m(i)||(r[a]=i)};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&T(arguments[s],i);return r},extend:function(e,t,n){let{allOwnKeys:r}=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return T(t,(t,r)=>{n&&y(t)?e[r]=i(t,n):e[r]=t},{allOwnKeys:r}),e},trim:e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:e=>(65279===e.charCodeAt(0)&&(e=e.slice(1)),e),inherits:(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},toFlatObject:(e,t,n,r)=>{let i,s,o;const l={};if(t=t||{},null==e)return t;do{for(i=Object.getOwnPropertyNames(e),s=i.length;s-- >0;)o=i[s],r&&!r(o,e,t)||l[o]||(t[o]=e[o],l[o]=!0);e=!1!==n&&a(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},kindOf:c,kindOfTest:u,endsWith:(e,t,n)=>{e=String(e),(void 0===n||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return-1!==r&&r===n},toArray:e=>{if(!e)return null;if(p(e))return e;let t=e.length;if(!x(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},forEachEntry:(e,t)=>{const n=(e&&e[o]).call(e);let r;for(;(r=n.next())&&!r.done;){const n=r.value;t.call(e,n[0],n[1])}},matchAll:(e,t)=>{let n;const r=[];for(;null!==(n=e.exec(t));)r.push(n);return r},isHTMLForm:L,hasOwnProperty:F,hasOwnProp:F,reduceDescriptors:z,freezeMethods:e=>{z(e,(t,n)=>{if(y(e)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=e[n];y(r)&&(t.enumerable=!1,"writable"in t?t.writable=!1:t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")}))})},toObjectSet:(e,t)=>{const n={},r=e=>{e.forEach(e=>{n[e]=!0})};return p(e)?r(e):r(String(e).split(t)),n},toCamelCase:e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(e,t,n){return t.toUpperCase()+n}),noop:()=>{},toFiniteNumber:(e,t)=>null!=e&&Number.isFinite(e=+e)?e:t,findKey:M,global:D,isContextDefined:O,isSpecCompliantForm:function(e){return!!(e&&y(e.append)&&"FormData"===e[l]&&e[o])},toJSONObject:e=>{const t=new Array(10),n=(e,r)=>{if(b(e)){if(t.indexOf(e)>=0)return;if(f(e))return e;if(!("toJSON"in e)){t[r]=e;const i=p(e)?[]:{};return T(e,(e,t)=>{const s=n(e,r+1);!m(s)&&(i[t]=s)}),t[r]=void 0,i}}return e};return n(e,0)},isAsyncFn:W,isThenable:e=>e&&(b(e)||y(e))&&y(e.then)&&y(e.catch),setImmediate:U,asap:V,isIterable:e=>null!=e&&y(e[o])};function q(e,t,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i,this.status=i.status?i.status:null)}H.inherits(q,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:H.toJSONObject(this.config),code:this.code,status:this.status}}});const G=q.prototype,K={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{K[e]={value:e}}),Object.defineProperties(q,K),Object.defineProperty(G,"isAxiosError",{value:!0}),q.from=(e,t,n,r,i,s)=>{const a=Object.create(G);H.toFlatObject(e,a,function(e){return e!==Error.prototype},e=>"isAxiosError"!==e);const o=e&&e.message?e.message:"Error",l=null==t&&e?e.code:t;return q.call(a,o,l,n,r,i),e&&null==a.cause&&Object.defineProperty(a,"cause",{value:e,configurable:!0}),a.name=e&&e.name||"Error",s&&Object.assign(a,s),a};const Y=q;function X(e){return H.isPlainObject(e)||H.isArray(e)}function J(e){return H.endsWith(e,"[]")?e.slice(0,-2):e}function $(e,t,n){return e?e.concat(t).map(function(e,t){return e=J(e),!n&&t?"["+e+"]":e}).join(n?".":""):t}const Q=H.toFlatObject(H,{},null,function(e){return/^is[A-Z]/.test(e)});const Z=function(e,t,n){if(!H.isObject(e))throw new TypeError("target must be an object");t=t||new FormData;const r=(n=H.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(e,t){return!H.isUndefined(t[e])})).metaTokens,i=n.visitor||c,s=n.dots,a=n.indexes,o=(n.Blob||"undefined"!==typeof Blob&&Blob)&&H.isSpecCompliantForm(t);if(!H.isFunction(i))throw new TypeError("visitor must be a function");function l(e){if(null===e)return"";if(H.isDate(e))return e.toISOString();if(H.isBoolean(e))return e.toString();if(!o&&H.isBlob(e))throw new Y("Blob is not supported. Use a Buffer instead.");return H.isArrayBuffer(e)||H.isTypedArray(e)?o&&"function"===typeof Blob?new Blob([e]):Buffer.from(e):e}function c(e,n,i){let o=e;if(e&&!i&&"object"===typeof e)if(H.endsWith(n,"{}"))n=r?n:n.slice(0,-2),e=JSON.stringify(e);else if(H.isArray(e)&&function(e){return H.isArray(e)&&!e.some(X)}(e)||(H.isFileList(e)||H.endsWith(n,"[]"))&&(o=H.toArray(e)))return n=J(n),o.forEach(function(e,r){!H.isUndefined(e)&&null!==e&&t.append(!0===a?$([n],r,s):null===a?n:n+"[]",l(e))}),!1;return!!X(e)||(t.append($(i,n,s),l(e)),!1)}const d=[],u=Object.assign(Q,{defaultVisitor:c,convertValue:l,isVisitable:X});if(!H.isObject(e))throw new TypeError("data must be an object");return function e(n,r){if(!H.isUndefined(n)){if(-1!==d.indexOf(n))throw Error("Circular reference detected in "+r.join("."));d.push(n),H.forEach(n,function(n,s){!0===(!(H.isUndefined(n)||null===n)&&i.call(t,n,H.isString(s)?s.trim():s,r,u))&&e(n,r?r.concat(s):[s])}),d.pop()}}(e),t};function ee(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(e){return t[e]})}function te(e,t){this._pairs=[],e&&Z(e,this,t)}const ne=te.prototype;ne.append=function(e,t){this._pairs.push([e,t])},ne.toString=function(e){const t=e?function(t){return e.call(this,t,ee)}:ee;return this._pairs.map(function(e){return t(e[0])+"="+t(e[1])},"").join("&")};const re=te;function ie(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function se(e,t,n){if(!t)return e;const r=n&&n.encode||ie;H.isFunction(n)&&(n={serialize:n});const i=n&&n.serialize;let s;if(s=i?i(t,n):H.isURLSearchParams(t)?t.toString():new re(t,n).toString(r),s){const t=e.indexOf("#");-1!==t&&(e=e.slice(0,t)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}const ae=class{constructor(){this.handlers=[]}use(e,t,n){return this.handlers.push({fulfilled:e,rejected:t,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){H.forEach(this.handlers,function(t){null!==t&&e(t)})}},oe={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1};var le=n(9379);const ce={isBrowser:!0,classes:{URLSearchParams:"undefined"!==typeof URLSearchParams?URLSearchParams:re,FormData:"undefined"!==typeof FormData?FormData:null,Blob:"undefined"!==typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]},de="undefined"!==typeof window&&"undefined"!==typeof document,ue="object"===typeof navigator&&navigator||void 0,he=de&&(!ue||["ReactNative","NativeScript","NS"].indexOf(ue.product)<0),pe="undefined"!==typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"===typeof self.importScripts,me=de&&window.location.href||"http://localhost",fe=(0,le.A)((0,le.A)({},r),ce);const ge=function(e){function t(e,n,r,i){let s=e[i++];if("__proto__"===s)return!0;const a=Number.isFinite(+s),o=i>=e.length;if(s=!s&&H.isArray(r)?r.length:s,o)return H.hasOwnProp(r,s)?r[s]=[r[s],n]:r[s]=n,!a;r[s]&&H.isObject(r[s])||(r[s]=[]);return t(e,n,r[s],i)&&H.isArray(r[s])&&(r[s]=function(e){const t={},n=Object.keys(e);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],t[s]=e[s];return t}(r[s])),!a}if(H.isFormData(e)&&H.isFunction(e.entries)){const n={};return H.forEachEntry(e,(e,r)=>{t(function(e){return H.matchAll(/\w+|\[(\w*)]/g,e).map(e=>"[]"===e[0]?"":e[1]||e[0])}(e),r,n,0)}),n}return null};const ve={transitional:oe,adapter:["xhr","http","fetch"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,i=H.isObject(e);i&&H.isHTMLForm(e)&&(e=new FormData(e));if(H.isFormData(e))return r?JSON.stringify(ge(e)):e;if(H.isArrayBuffer(e)||H.isBuffer(e)||H.isStream(e)||H.isFile(e)||H.isBlob(e)||H.isReadableStream(e))return e;if(H.isArrayBufferView(e))return e.buffer;if(H.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let s;if(i){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(e,t){return Z(e,new fe.classes.URLSearchParams,(0,le.A)({visitor:function(e,t,n,r){return fe.isNode&&H.isBuffer(e)?(this.append(t,e.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},t))}(e,this.formSerializer).toString();if((s=H.isFileList(e))||n.indexOf("multipart/form-data")>-1){const t=this.env&&this.env.FormData;return Z(s?{"files[]":e}:e,t&&new t,this.formSerializer)}}return i||r?(t.setContentType("application/json",!1),function(e,t,n){if(H.isString(e))try{return(t||JSON.parse)(e),H.trim(e)}catch(r){if("SyntaxError"!==r.name)throw r}return(n||JSON.stringify)(e)}(e)):e}],transformResponse:[function(e){const t=this.transitional||ve.transitional,n=t&&t.forcedJSONParsing,r="json"===this.responseType;if(H.isResponse(e)||H.isReadableStream(e))return e;if(e&&H.isString(e)&&(n&&!this.responseType||r)){const n=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(i){if(n){if("SyntaxError"===i.name)throw Y.from(i,Y.ERR_BAD_RESPONSE,this,null,this.response);throw i}}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fe.classes.FormData,Blob:fe.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};H.forEach(["delete","get","head","post","put","patch"],e=>{ve.headers[e]={}});const ye=ve,xe=H.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),be=Symbol("internals");function we(e){return e&&String(e).trim().toLowerCase()}function je(e){return!1===e||null==e?e:H.isArray(e)?e.map(je):String(e)}function Ne(e,t,n,r,i){return H.isFunction(r)?r.call(this,t,n):(i&&(t=n),H.isString(t)?H.isString(r)?-1!==t.indexOf(r):H.isRegExp(r)?r.test(t):void 0:void 0)}class ke{constructor(e){e&&this.set(e)}set(e,t,n){const r=this;function i(e,t,n){const i=we(t);if(!i)throw new Error("header name must be a non-empty string");const s=H.findKey(r,i);(!s||void 0===r[s]||!0===n||void 0===n&&!1!==r[s])&&(r[s||t]=je(e))}const s=(e,t)=>H.forEach(e,(e,n)=>i(e,n,t));if(H.isPlainObject(e)||e instanceof this.constructor)s(e,t);else if(H.isString(e)&&(e=e.trim())&&!/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim()))s((e=>{const t={};let n,r,i;return e&&e.split("\n").forEach(function(e){i=e.indexOf(":"),n=e.substring(0,i).trim().toLowerCase(),r=e.substring(i+1).trim(),!n||t[n]&&xe[n]||("set-cookie"===n?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t})(e),t);else if(H.isObject(e)&&H.isIterable(e)){let n,r,i={};for(const t of e){if(!H.isArray(t))throw TypeError("Object iterator must return a key-value pair");i[r=t[0]]=(n=i[r])?H.isArray(n)?[...n,t[1]]:[n,t[1]]:t[1]}s(i,t)}else null!=e&&i(t,e,n);return this}get(e,t){if(e=we(e)){const n=H.findKey(this,e);if(n){const e=this[n];if(!t)return e;if(!0===t)return function(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}(e);if(H.isFunction(t))return t.call(this,e,n);if(H.isRegExp(t))return t.exec(e);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,t){if(e=we(e)){const n=H.findKey(this,e);return!(!n||void 0===this[n]||t&&!Ne(0,this[n],n,t))}return!1}delete(e,t){const n=this;let r=!1;function i(e){if(e=we(e)){const i=H.findKey(n,e);!i||t&&!Ne(0,n[i],i,t)||(delete n[i],r=!0)}}return H.isArray(e)?e.forEach(i):i(e),r}clear(e){const t=Object.keys(this);let n=t.length,r=!1;for(;n--;){const i=t[n];e&&!Ne(0,this[i],i,e,!0)||(delete this[i],r=!0)}return r}normalize(e){const t=this,n={};return H.forEach(this,(r,i)=>{const s=H.findKey(n,i);if(s)return t[s]=je(r),void delete t[i];const a=e?function(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,t,n)=>t.toUpperCase()+n)}(i):String(i).trim();a!==i&&delete t[i],t[a]=je(r),n[a]=!0}),this}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.constructor.concat(this,...t)}toJSON(e){const t=Object.create(null);return H.forEach(this,(n,r)=>{null!=n&&!1!==n&&(t[r]=e&&H.isArray(n)?n.join(", "):n)}),t}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(e=>{let[t,n]=e;return t+": "+n}).join("\n")}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e){const t=new this(e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return r.forEach(e=>t.set(e)),t}static accessor(e){const t=(this[be]=this[be]={accessors:{}}).accessors,n=this.prototype;function r(e){const r=we(e);t[r]||(!function(e,t){const n=H.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(e,n,i){return this[r].call(this,t,e,n,i)},configurable:!0})})}(n,e),t[r]=!0)}return H.isArray(e)?e.forEach(r):r(e),this}}ke.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),H.reduceDescriptors(ke.prototype,(e,t)=>{let{value:n}=e,r=t[0].toUpperCase()+t.slice(1);return{get:()=>n,set(e){this[r]=e}}}),H.freezeMethods(ke);const Ae=ke;function Se(e,t){const n=this||ye,r=t||n,i=Ae.from(r.headers);let s=r.data;return H.forEach(e,function(e){s=e.call(n,s,i.normalize(),t?t.status:void 0)}),i.normalize(),s}function _e(e){return!(!e||!e.__CANCEL__)}function Ce(e,t,n){Y.call(this,null==e?"canceled":e,Y.ERR_CANCELED,t,n),this.name="CanceledError"}H.inherits(Ce,Y,{__CANCEL__:!0});const Ee=Ce;function Pe(e,t,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?t(new Y("Request failed with status code "+n.status,[Y.ERR_BAD_REQUEST,Y.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):e(n)}const Te=function(e,t){e=e||10;const n=new Array(e),r=new Array(e);let i,s=0,a=0;return t=void 0!==t?t:1e3,function(o){const l=Date.now(),c=r[a];i||(i=l),n[s]=o,r[s]=l;let d=a,u=0;for(;d!==s;)u+=n[d++],d%=e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),l-i<t)return;const h=c&&l-c;return h?Math.round(1e3*u/h):void 0}};const Me=function(e,t){let n,r,i=0,s=1e3/t;const a=function(t){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();i=s,n=null,r&&(clearTimeout(r),r=null),e(...t)};return[function(){const e=Date.now(),t=e-i;for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];t>=s?a(l,e):(n=l,r||(r=setTimeout(()=>{r=null,a(n)},s-t)))},()=>n&&a(n)]},De=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=0;const i=Te(50,250);return Me(n=>{const s=n.loaded,a=n.lengthComputable?n.total:void 0,o=s-r,l=i(o);r=s;e({loaded:s,total:a,progress:a?s/a:void 0,bytes:o,rate:l||void 0,estimated:l&&a&&s<=a?(a-s)/l:void 0,event:n,lengthComputable:null!=a,[t?"download":"upload"]:!0})},n)},Oe=(e,t)=>{const n=null!=e;return[r=>t[0]({lengthComputable:n,total:e,loaded:r}),t[1]]},Re=e=>function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return H.asap(()=>e(...n))},Ie=fe.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,fe.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(fe.origin),fe.navigator&&/(msie|trident)/i.test(fe.navigator.userAgent)):()=>!0,Le=fe.hasStandardBrowserEnv?{write(e,t,n,r,i,s){const a=[e+"="+encodeURIComponent(t)];H.isNumber(n)&&a.push("expires="+new Date(n).toGMTString()),H.isString(r)&&a.push("path="+r),H.isString(i)&&a.push("domain="+i),!0===s&&a.push("secure"),document.cookie=a.join("; ")},read(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Fe(e,t,n){let r=!/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t);return e&&(r||0==n)?function(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}(e,t):t}const Be=e=>e instanceof Ae?(0,le.A)({},e):e;function ze(e,t){t=t||{};const n={};function r(e,t,n,r){return H.isPlainObject(e)&&H.isPlainObject(t)?H.merge.call({caseless:r},e,t):H.isPlainObject(t)?H.merge({},t):H.isArray(t)?t.slice():t}function i(e,t,n,i){return H.isUndefined(t)?H.isUndefined(e)?void 0:r(void 0,e,0,i):r(e,t,0,i)}function s(e,t){if(!H.isUndefined(t))return r(void 0,t)}function a(e,t){return H.isUndefined(t)?H.isUndefined(e)?void 0:r(void 0,e):r(void 0,t)}function o(n,i,s){return s in t?r(n,i):s in e?r(void 0,n):void 0}const l={url:s,method:s,data:s,baseURL:a,transformRequest:a,transformResponse:a,paramsSerializer:a,timeout:a,timeoutMessage:a,withCredentials:a,withXSRFToken:a,adapter:a,responseType:a,xsrfCookieName:a,xsrfHeaderName:a,onUploadProgress:a,onDownloadProgress:a,decompress:a,maxContentLength:a,maxBodyLength:a,beforeRedirect:a,transport:a,httpAgent:a,httpsAgent:a,cancelToken:a,socketPath:a,responseEncoding:a,validateStatus:o,headers:(e,t,n)=>i(Be(e),Be(t),0,!0)};return H.forEach(Object.keys((0,le.A)((0,le.A)({},e),t)),function(r){const s=l[r]||i,a=s(e[r],t[r],r);H.isUndefined(a)&&s!==o||(n[r]=a)}),n}const We=e=>{const t=ze({},e);let{data:n,withXSRFToken:r,xsrfHeaderName:i,xsrfCookieName:s,headers:a,auth:o}=t;if(t.headers=a=Ae.from(a),t.url=se(Fe(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),o&&a.set("Authorization","Basic "+btoa((o.username||"")+":"+(o.password?unescape(encodeURIComponent(o.password)):""))),H.isFormData(n))if(fe.hasStandardBrowserEnv||fe.hasStandardBrowserWebWorkerEnv)a.setContentType(void 0);else if(H.isFunction(n.getHeaders)){const e=n.getHeaders(),t=["content-type","content-length"];Object.entries(e).forEach(e=>{let[n,r]=e;t.includes(n.toLowerCase())&&a.set(n,r)})}if(fe.hasStandardBrowserEnv&&(r&&H.isFunction(r)&&(r=r(t)),r||!1!==r&&Ie(t.url))){const e=i&&s&&Le.read(s);e&&a.set(i,e)}return t},Ue="undefined"!==typeof XMLHttpRequest&&function(e){return new Promise(function(t,n){const r=We(e);let i=r.data;const s=Ae.from(r.headers).normalize();let a,o,l,c,d,{responseType:u,onUploadProgress:h,onDownloadProgress:p}=r;function m(){c&&c(),d&&d(),r.cancelToken&&r.cancelToken.unsubscribe(a),r.signal&&r.signal.removeEventListener("abort",a)}let f=new XMLHttpRequest;function g(){if(!f)return;const r=Ae.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders());Pe(function(e){t(e),m()},function(e){n(e),m()},{data:u&&"text"!==u&&"json"!==u?f.response:f.responseText,status:f.status,statusText:f.statusText,headers:r,config:e,request:f}),f=null}f.open(r.method.toUpperCase(),r.url,!0),f.timeout=r.timeout,"onloadend"in f?f.onloadend=g:f.onreadystatechange=function(){f&&4===f.readyState&&(0!==f.status||f.responseURL&&0===f.responseURL.indexOf("file:"))&&setTimeout(g)},f.onabort=function(){f&&(n(new Y("Request aborted",Y.ECONNABORTED,e,f)),f=null)},f.onerror=function(t){const r=t&&t.message?t.message:"Network Error",i=new Y(r,Y.ERR_NETWORK,e,f);i.event=t||null,n(i),f=null},f.ontimeout=function(){let t=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const i=r.transitional||oe;r.timeoutErrorMessage&&(t=r.timeoutErrorMessage),n(new Y(t,i.clarifyTimeoutError?Y.ETIMEDOUT:Y.ECONNABORTED,e,f)),f=null},void 0===i&&s.setContentType(null),"setRequestHeader"in f&&H.forEach(s.toJSON(),function(e,t){f.setRequestHeader(t,e)}),H.isUndefined(r.withCredentials)||(f.withCredentials=!!r.withCredentials),u&&"json"!==u&&(f.responseType=r.responseType),p&&([l,d]=De(p,!0),f.addEventListener("progress",l)),h&&f.upload&&([o,c]=De(h),f.upload.addEventListener("progress",o),f.upload.addEventListener("loadend",c)),(r.cancelToken||r.signal)&&(a=t=>{f&&(n(!t||t.type?new Ee(null,e,f):t),f.abort(),f=null)},r.cancelToken&&r.cancelToken.subscribe(a),r.signal&&(r.signal.aborted?a():r.signal.addEventListener("abort",a)));const v=function(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}(r.url);v&&-1===fe.protocols.indexOf(v)?n(new Y("Unsupported protocol "+v+":",Y.ERR_BAD_REQUEST,e)):f.send(i||null)})},Ve=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let n,r=new AbortController;const i=function(e){if(!n){n=!0,a();const t=e instanceof Error?e:this.reason;r.abort(t instanceof Y?t:new Ee(t instanceof Error?t.message:t))}};let s=t&&setTimeout(()=>{s=null,i(new Y("timeout ".concat(t," of ms exceeded"),Y.ETIMEDOUT))},t);const a=()=>{e&&(s&&clearTimeout(s),s=null,e.forEach(e=>{e.unsubscribe?e.unsubscribe(i):e.removeEventListener("abort",i)}),e=null)};e.forEach(e=>e.addEventListener("abort",i));const{signal:o}=r;return o.unsubscribe=()=>H.asap(a),o}};function He(e,t){this.v=e,this.k=t}function qe(e){return function(){return new Ge(e.apply(this,arguments))}}function Ge(e){var t,n;function r(t,n){try{var s=e[t](n),a=s.value,o=a instanceof He;Promise.resolve(o?a.v:a).then(function(n){if(o){var l="return"===t?"return":"next";if(!a.k||n.done)return r(l,n);n=e[l](n).value}i(s.done?"return":"normal",n)},function(e){r("throw",e)})}catch(e){i("throw",e)}}function i(e,i){switch(e){case"return":t.resolve({value:i,done:!0});break;case"throw":t.reject(i);break;default:t.resolve({value:i,done:!1})}(t=t.next)?r(t.key,t.arg):n=null}this._invoke=function(e,i){return new Promise(function(s,a){var o={key:e,arg:i,resolve:s,reject:a,next:null};n?n=n.next=o:(t=n=o,r(e,i))})},"function"!=typeof e.return&&(this.return=void 0)}function Ke(e){return new He(e,0)}function Ye(e){var t={},n=!1;function r(t,r){return n=!0,r=new Promise(function(n){n(e[t](r))}),{done:!1,value:new He(r,1)}}return t["undefined"!=typeof Symbol&&Symbol.iterator||"@@iterator"]=function(){return this},t.next=function(e){return n?(n=!1,e):r("next",e)},"function"==typeof e.throw&&(t.throw=function(e){if(n)throw n=!1,e;return r("throw",e)}),"function"==typeof e.return&&(t.return=function(e){return n?(n=!1,e):r("return",e)}),t}Ge.prototype["function"==typeof Symbol&&Symbol.asyncIterator||"@@asyncIterator"]=function(){return this},Ge.prototype.next=function(e){return this._invoke("next",e)},Ge.prototype.throw=function(e){return this._invoke("throw",e)},Ge.prototype.return=function(e){return this._invoke("return",e)};var Xe=n(9495);const Je=function*(e,t){let n=e.byteLength;if(!t||n<t)return void(yield e);let r,i=0;for(;i<n;)r=i+t,yield e.slice(i,r),i=r},$e=function(){var e=qe(function*(e,t){var n,r=!1,i=!1;try{for(var s,a=(0,Xe.A)(Qe(e));r=!(s=yield Ke(a.next())).done;r=!1){const e=s.value;yield*Ye((0,Xe.A)(Je(e,t)))}}catch(o){i=!0,n=o}finally{try{r&&null!=a.return&&(yield Ke(a.return()))}finally{if(i)throw n}}});return function(t,n){return e.apply(this,arguments)}}(),Qe=function(){var e=qe(function*(e){if(e[Symbol.asyncIterator])return void(yield*Ye((0,Xe.A)(e)));const t=e.getReader();try{for(;;){const{done:e,value:n}=yield Ke(t.read());if(e)break;yield n}}finally{yield Ke(t.cancel())}});return function(t){return e.apply(this,arguments)}}(),Ze=(e,t,n,r)=>{const i=$e(e,t);let s,a=0,o=e=>{s||(s=!0,r&&r(e))};return new ReadableStream({async pull(e){try{const{done:t,value:r}=await i.next();if(t)return o(),void e.close();let s=r.byteLength;if(n){let e=a+=s;n(e)}e.enqueue(new Uint8Array(r))}catch(t){throw o(t),t}},cancel:e=>(o(e),i.return())},{highWaterMark:2})},{isFunction:et}=H,tt=(e=>{let{Request:t,Response:n}=e;return{Request:t,Response:n}})(H.global),{ReadableStream:nt,TextEncoder:rt}=H.global,it=function(e){try{for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return!!e(...n)}catch(i){return!1}},st=e=>{e=H.merge.call({skipUndefined:!0},tt,e);const{fetch:t,Request:n,Response:r}=e,i=t?et(t):"function"===typeof fetch,s=et(n),a=et(r);if(!i)return!1;const o=i&&et(nt),l=i&&("function"===typeof rt?(c=new rt,e=>c.encode(e)):async e=>new Uint8Array(await new n(e).arrayBuffer()));var c;const d=s&&o&&it(()=>{let e=!1;const t=new n(fe.origin,{body:new nt,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!t}),u=a&&o&&it(()=>H.isReadableStream(new r("").body)),h={stream:u&&(e=>e.body)};i&&["text","arrayBuffer","blob","formData","stream"].forEach(e=>{!h[e]&&(h[e]=(t,n)=>{let r=t&&t[e];if(r)return r.call(t);throw new Y("Response type '".concat(e,"' is not supported"),Y.ERR_NOT_SUPPORT,n)})});const p=async(e,t)=>{const r=H.toFiniteNumber(e.getContentLength());return null==r?(async e=>{if(null==e)return 0;if(H.isBlob(e))return e.size;if(H.isSpecCompliantForm(e)){const t=new n(fe.origin,{method:"POST",body:e});return(await t.arrayBuffer()).byteLength}return H.isArrayBufferView(e)||H.isArrayBuffer(e)?e.byteLength:(H.isURLSearchParams(e)&&(e+=""),H.isString(e)?(await l(e)).byteLength:void 0)})(t):r};return async e=>{let{url:i,method:a,data:o,signal:l,cancelToken:c,timeout:m,onDownloadProgress:f,onUploadProgress:g,responseType:v,headers:y,withCredentials:x="same-origin",fetchOptions:b}=We(e),w=t||fetch;v=v?(v+"").toLowerCase():"text";let j=Ve([l,c&&c.toAbortSignal()],m),N=null;const k=j&&j.unsubscribe&&(()=>{j.unsubscribe()});let A;try{if(g&&d&&"get"!==a&&"head"!==a&&0!==(A=await p(y,o))){let e,t=new n(i,{method:"POST",body:o,duplex:"half"});if(H.isFormData(o)&&(e=t.headers.get("content-type"))&&y.setContentType(e),t.body){const[e,n]=Oe(A,De(Re(g)));o=Ze(t.body,65536,e,n)}}H.isString(x)||(x=x?"include":"omit");const t=s&&"credentials"in n.prototype,l=(0,le.A)((0,le.A)({},b),{},{signal:j,method:a.toUpperCase(),headers:y.normalize().toJSON(),body:o,duplex:"half",credentials:t?x:void 0});N=s&&new n(i,l);let c=await(s?w(N,b):w(i,l));const m=u&&("stream"===v||"response"===v);if(u&&(f||m&&k)){const e={};["status","statusText","headers"].forEach(t=>{e[t]=c[t]});const t=H.toFiniteNumber(c.headers.get("content-length")),[n,i]=f&&Oe(t,De(Re(f),!0))||[];c=new r(Ze(c.body,65536,n,()=>{i&&i(),k&&k()}),e)}v=v||"text";let S=await h[H.findKey(h,v)||"text"](c,e);return!m&&k&&k(),await new Promise((t,n)=>{Pe(t,n,{data:S,headers:Ae.from(c.headers),status:c.status,statusText:c.statusText,config:e,request:N})})}catch(S){if(k&&k(),S&&"TypeError"===S.name&&/Load failed|fetch/i.test(S.message))throw Object.assign(new Y("Network Error",Y.ERR_NETWORK,e,N),{cause:S.cause||S});throw Y.from(S,S&&S.code,e,N)}}},at=new Map,ot=e=>{let t=e?e.env:{};const{fetch:n,Request:r,Response:i}=t,s=[r,i,n];let a,o,l=s.length,c=at;for(;l--;)a=s[l],o=c.get(a),void 0===o&&c.set(a,o=l?new Map:st(t)),c=o;return o},lt=(ot(),{http:null,xhr:Ue,fetch:{get:ot}});H.forEach(lt,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch(n){}Object.defineProperty(e,"adapterName",{value:t})}});const ct=e=>"- ".concat(e),dt=e=>H.isFunction(e)||null===e||!1===e,ut=(e,t)=>{e=H.isArray(e)?e:[e];const{length:n}=e;let r,i;const s={};for(let a=0;a<n;a++){let n;if(r=e[a],i=r,!dt(r)&&(i=lt[(n=String(r)).toLowerCase()],void 0===i))throw new Y("Unknown adapter '".concat(n,"'"));if(i&&(H.isFunction(i)||(i=i.get(t))))break;s[n||"#"+a]=i}if(!i){const e=Object.entries(s).map(e=>{let[t,n]=e;return"adapter ".concat(t," ")+(!1===n?"is not supported by the environment":"is not available in the build")});let t=n?e.length>1?"since :\n"+e.map(ct).join("\n"):" "+ct(e[0]):"as no adapter specified";throw new Y("There is no suitable adapter to dispatch the request "+t,"ERR_NOT_SUPPORT")}return i};function ht(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ee(null,e)}function pt(e){ht(e),e.headers=Ae.from(e.headers),e.data=Se.call(e,e.transformRequest),-1!==["post","put","patch"].indexOf(e.method)&&e.headers.setContentType("application/x-www-form-urlencoded",!1);return ut(e.adapter||ye.adapter,e)(e).then(function(t){return ht(e),t.data=Se.call(e,e.transformResponse,t),t.headers=Ae.from(t.headers),t},function(t){return _e(t)||(ht(e),t&&t.response&&(t.response.data=Se.call(e,e.transformResponse,t.response),t.response.headers=Ae.from(t.response.headers))),Promise.reject(t)})}const mt="1.12.2",ft={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{ft[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const gt={};ft.transitional=function(e,t,n){function r(e,t){return"[Axios v"+mt+"] Transitional option '"+e+"'"+t+(n?". "+n:"")}return(n,i,s)=>{if(!1===e)throw new Y(r(i," has been removed"+(t?" in "+t:"")),Y.ERR_DEPRECATED);return t&&!gt[i]&&(gt[i]=!0,console.warn(r(i," has been deprecated since v"+t+" and will be removed in the near future"))),!e||e(n,i,s)}},ft.spelling=function(e){return(t,n)=>(console.warn("".concat(n," is likely a misspelling of ").concat(e)),!0)};const vt={assertOptions:function(e,t,n){if("object"!==typeof e)throw new Y("options must be an object",Y.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let i=r.length;for(;i-- >0;){const s=r[i],a=t[s];if(a){const t=e[s],n=void 0===t||a(t,s,e);if(!0!==n)throw new Y("option "+s+" must be "+n,Y.ERR_BAD_OPTION_VALUE);continue}if(!0!==n)throw new Y("Unknown option "+s,Y.ERR_BAD_OPTION)}},validators:ft},yt=vt.validators;class xt{constructor(e){this.defaults=e||{},this.interceptors={request:new ae,response:new ae}}async request(e,t){try{return await this._request(e,t)}catch(n){if(n instanceof Error){let e={};Error.captureStackTrace?Error.captureStackTrace(e):e=new Error;const t=e.stack?e.stack.replace(/^.+\n/,""):"";try{n.stack?t&&!String(n.stack).endsWith(t.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+t):n.stack=t}catch(r){}}throw n}}_request(e,t){"string"===typeof e?(t=t||{}).url=e:t=e||{},t=ze(this.defaults,t);const{transitional:n,paramsSerializer:r,headers:i}=t;void 0!==n&&vt.assertOptions(n,{silentJSONParsing:yt.transitional(yt.boolean),forcedJSONParsing:yt.transitional(yt.boolean),clarifyTimeoutError:yt.transitional(yt.boolean)},!1),null!=r&&(H.isFunction(r)?t.paramsSerializer={serialize:r}:vt.assertOptions(r,{encode:yt.function,serialize:yt.function},!0)),void 0!==t.allowAbsoluteUrls||(void 0!==this.defaults.allowAbsoluteUrls?t.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:t.allowAbsoluteUrls=!0),vt.assertOptions(t,{baseUrl:yt.spelling("baseURL"),withXsrfToken:yt.spelling("withXSRFToken")},!0),t.method=(t.method||this.defaults.method||"get").toLowerCase();let s=i&&H.merge(i.common,i[t.method]);i&&H.forEach(["delete","get","head","post","put","patch","common"],e=>{delete i[e]}),t.headers=Ae.concat(s,i);const a=[];let o=!0;this.interceptors.request.forEach(function(e){"function"===typeof e.runWhen&&!1===e.runWhen(t)||(o=o&&e.synchronous,a.unshift(e.fulfilled,e.rejected))});const l=[];let c;this.interceptors.response.forEach(function(e){l.push(e.fulfilled,e.rejected)});let d,u=0;if(!o){const e=[pt.bind(this),void 0];for(e.unshift(...a),e.push(...l),d=e.length,c=Promise.resolve(t);u<d;)c=c.then(e[u++],e[u++]);return c}d=a.length;let h=t;for(;u<d;){const e=a[u++],t=a[u++];try{h=e(h)}catch(p){t.call(this,p);break}}try{c=pt.call(this,h)}catch(p){return Promise.reject(p)}for(u=0,d=l.length;u<d;)c=c.then(l[u++],l[u++]);return c}getUri(e){return se(Fe((e=ze(this.defaults,e)).baseURL,e.url,e.allowAbsoluteUrls),e.params,e.paramsSerializer)}}H.forEach(["delete","get","head","options"],function(e){xt.prototype[e]=function(t,n){return this.request(ze(n||{},{method:e,url:t,data:(n||{}).data}))}}),H.forEach(["post","put","patch"],function(e){function t(t){return function(n,r,i){return this.request(ze(i||{},{method:e,headers:t?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}xt.prototype[e]=t(),xt.prototype[e+"Form"]=t(!0)});const bt=xt;class wt{constructor(e){if("function"!==typeof e)throw new TypeError("executor must be a function.");let t;this.promise=new Promise(function(e){t=e});const n=this;this.promise.then(e=>{if(!n._listeners)return;let t=n._listeners.length;for(;t-- >0;)n._listeners[t](e);n._listeners=null}),this.promise.then=e=>{let t;const r=new Promise(e=>{n.subscribe(e),t=e}).then(e);return r.cancel=function(){n.unsubscribe(t)},r},e(function(e,r,i){n.reason||(n.reason=new Ee(e,r,i),t(n.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){this.reason?e(this.reason):this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const t=this._listeners.indexOf(e);-1!==t&&this._listeners.splice(t,1)}toAbortSignal(){const e=new AbortController,t=t=>{e.abort(t)};return this.subscribe(t),e.signal.unsubscribe=()=>this.unsubscribe(t),e.signal}static source(){let e;return{token:new wt(function(t){e=t}),cancel:e}}}const jt=wt;const Nt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Nt).forEach(e=>{let[t,n]=e;Nt[n]=t});const kt=Nt;const At=function e(t){const n=new bt(t),r=i(bt.prototype.request,n);return H.extend(r,bt.prototype,n,{allOwnKeys:!0}),H.extend(r,n,null,{allOwnKeys:!0}),r.create=function(n){return e(ze(t,n))},r}(ye);At.Axios=bt,At.CanceledError=Ee,At.CancelToken=jt,At.isCancel=_e,At.VERSION=mt,At.toFormData=Z,At.AxiosError=Y,At.Cancel=At.CanceledError,At.all=function(e){return Promise.all(e)},At.spread=function(e){return function(t){return e.apply(null,t)}},At.isAxiosError=function(e){return H.isObject(e)&&!0===e.isAxiosError},At.mergeConfig=ze,At.AxiosHeaders=Ae,At.formToJSON=e=>ge(H.isHTMLForm(e)?new FormData(e):e),At.getAdapter=ut,At.HttpStatusCode=kt,At.default=At;const St=At,_t="".concat("http://localhost:3001","/api"),Ct=St.create({baseURL:_t,timeout:3e4,headers:{"Content-Type":"application/json","bypass-tunnel-reminder":"true"},withCredentials:!0});let Et=!1;const Pt=[{test:e=>e.startsWith("/settings/profile"),build:()=>({data:{id:"offline",name:"\u79bb\u7ebf\u7528\u6237",email:""}})},{test:e=>"/clients"===e||e.startsWith("/clients?")||e.startsWith("/clients/"),build:()=>[]},{test:e=>e.startsWith("/dashboard/stats"),build:()=>({success:!0,data:{totals:{invoiceCount:0,revenue:0},charts:{}}})},{test:e=>e.startsWith("/invoices/stats/dashboard"),build:()=>({recentInvoices:[],overdueInvoices:[],summary:{}})},{test:e=>e.startsWith("/dashboard/unified-chart-data"),build:()=>({success:!0,data:{statusDistribution:{distribution:[],totalInvoices:0},revenueTrend:{totalRevenue:0,totalCount:0,trendData:[]}}})},{test:e=>e.startsWith("/notifications"),build:()=>({success:!0,data:{notifications:[],total:0,unreadCount:0}})},{test:e=>e.startsWith("/subscriptions/current"),build:()=>({subscription:{status:"inactive",plan:"free",current_period_end:null}})},{test:e=>e.startsWith("/subscriptions/features"),build:()=>({features:{}})},{test:e=>e.startsWith("/subscriptions/history"),build:()=>({history:[]})},{test:e=>e.startsWith("/subscriptions/billing-history"),build:()=>({bills:[]})}];Ct.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>{Promise.reject(e)}),Ct.interceptors.response.use(e=>e,async function(e){var t;const n=e.config;if(!e.response&&("ERR_NETWORK"===e.code||/Network Error/i.test(e.message||""))){if(!Et){Et=!0,console.warn("[API] \u540e\u7aef\u4e0d\u53ef\u7528\uff0c\u8fdb\u5165\u79bb\u7ebf\u6a21\u5f0f\uff1a\u8fd4\u56de\u9ed8\u8ba4\u6570\u636e\u4ee5\u964d\u4f4e\u566a\u58f0");try{window.__API_OFFLINE__=!0}catch(s){}}const e=function(e){const t=(null===e||void 0===e?void 0:e.url)||"",n=Pt.find(e=>e.test(t));return n?{data:n.build(),status:200,statusText:"OK",headers:{},config:e,request:{offline:!0}}:null}(n);if(e)return Promise.resolve(e)}if(401===(null===(t=e.response)||void 0===t?void 0:t.status)&&(null===n||void 0===n||!n._retry)){var r,i;n._retry=!0;const e="undefined"!==typeof window&&null!==(r=window.location)&&void 0!==r&&r.hash?window.location.hash.replace(/^#/,""):"",t="undefined"!==typeof window&&null!==(i=window.location)&&void 0!==i&&i.pathname?window.location.pathname:"/",a=(e||t||"/").toLowerCase(),o=a.includes("/login"),l=a.includes("/register"),c=o||l,d=((null===n||void 0===n?void 0:n.url)||"").includes("/auth/login")||((null===n||void 0===n?void 0:n.url)||"").includes("/auth/register")||((null===n||void 0===n?void 0:n.url)||"").includes("/auth/profile");if(localStorage.removeItem("token"),delete Ct.defaults.headers.common.Authorization,!c&&!d){try{localStorage.setItem("redirectAfterLogin",a)}catch(s){}try{"undefined"!==typeof window&&(window.location.hash="#/login")}catch(s){window.location.href="/#/login"}}}return Promise.reject(e)});const Tt=Ct},9323:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(7260),i=n(2489),s=n(3272),a=n(1444);t.get=function e(t,n,o){if(null==t)return o;switch(typeof n){case"string":{if(r.isUnsafeProperty(n))return o;const s=t[n];return void 0===s?i.isDeepKey(n)?e(t,a.toPath(n),o):o:s}case"number":case"symbol":{"number"===typeof n&&(n=s.toKey(n));const e=t[n];return void 0===e?o:e}default:{var l;if(Array.isArray(n))return function(e,t,n){if(0===t.length)return n;let i=e;for(let s=0;s<t.length;s++){if(null==i)return n;if(r.isUnsafeProperty(t[s]))return n;i=i[t[s]]}if(void 0===i)return n;return i}(t,n,o);if(n=Object.is(null===(l=n)||void 0===l?void 0:l.valueOf(),-0)?"-0":String(n),r.isUnsafeProperty(n))return o;const e=t[n];return void 0===e?o:e}}}},9379:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(4705);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},9397:(e,t,n)=>{e.exports=n(2682).isPlainObject},9461:(e,t,n)=>{"use strict";e.exports=n(2330)},9495:(e,t,n)=>{"use strict";function r(e){var t,n,r,s=2;for("undefined"!=typeof Symbol&&(n=Symbol.asyncIterator,r=Symbol.iterator);s--;){if(n&&null!=(t=e[n]))return t.call(e);if(r&&null!=(t=e[r]))return new i(t.call(e));n="@@asyncIterator",r="@@iterator"}throw new TypeError("Object is not async iterable")}function i(e){function t(e){if(Object(e)!==e)return Promise.reject(new TypeError(e+" is not an object."));var t=e.done;return Promise.resolve(e.value).then(function(e){return{value:e,done:t}})}return i=function(e){this.s=e,this.n=e.next},i.prototype={s:null,n:null,next:function(){return t(this.n.apply(this.s,arguments))},return:function(e){var n=this.s.return;return void 0===n?Promise.resolve({value:e,done:!0}):t(n.apply(this.s,arguments))},throw:function(e){var n=this.s.return;return void 0===n?Promise.reject(e):t(n.apply(this.s,arguments))}},new i(e)}n.d(t,{A:()=>r})},9599:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.identity=function(e){return e}},9645:(e,t,n)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});const r=n(6392),i=n(8346),s=n(1203);t.last=function(e){if(s.isArrayLike(e))return r.last(i.toArray(e))}},9709:(e,t)=>{"use strict";function n(e){return"symbol"===typeof e?1:null===e?2:void 0===e?3:e!==e?4:0}Object.defineProperty(t,Symbol.toStringTag,{value:"Module"});t.compareValues=(e,t,r)=>{if(e!==t){const i=n(e),s=n(t);if(i===s&&0===i){if(e<t)return"desc"===r?1:-1;if(e>t)return"desc"===r?-1:1}return"desc"===r?s-i:i-s}return 0}},9717:(e,t,n)=>{"use strict";var r=n(5043),i=n(9461);var s="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t},a=i.useSyncExternalStore,o=r.useRef,l=r.useEffect,c=r.useMemo,d=r.useDebugValue;t.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var u=o(null);if(null===u.current){var h={hasValue:!1,value:null};u.current=h}else h=u.current;u=c(function(){function e(e){if(!l){if(l=!0,a=e,e=r(e),void 0!==i&&h.hasValue){var t=h.value;if(i(t,e))return o=t}return o=e}if(t=o,s(a,e))return t;var n=r(e);return void 0!==i&&i(t,n)?(a=e,t):(a=e,o=n)}var a,o,l=!1,c=void 0===n?null:n;return[function(){return e(t())},null===c?void 0:function(){return e(c())}]},[t,n,r,i]);var p=a(e,u[0],u[1]);return l(function(){h.hasValue=!0,h.value=p},[p]),d(p),p}},9859:(e,t,n)=>{e.exports=n(7231).range},9921:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.isObjectLike=function(e){return"object"===typeof e&&null!==e}},9972:(e,t)=>{"use strict";Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),t.eq=function(e,t){return e===t||Number.isNaN(e)&&Number.isNaN(t)}}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";var e={};n.r(e),n.d(e,{scaleBand:()=>hp,scaleDiverging:()=>oy,scaleDivergingLog:()=>ly,scaleDivergingPow:()=>dy,scaleDivergingSqrt:()=>uy,scaleDivergingSymlog:()=>cy,scaleIdentity:()=>ef,scaleImplicit:()=>dp,scaleLinear:()=>Zm,scaleLog:()=>df,scaleOrdinal:()=>up,scalePoint:()=>mp,scalePow:()=>xf,scaleQuantile:()=>Tf,scaleQuantize:()=>Mf,scaleRadial:()=>jf,scaleSequential:()=>ey,scaleSequentialLog:()=>ty,scaleSequentialPow:()=>ry,scaleSequentialQuantile:()=>sy,scaleSequentialSqrt:()=>iy,scaleSequentialSymlog:()=>ny,scaleSqrt:()=>bf,scaleSymlog:()=>mf,scaleThreshold:()=>Df,scaleTime:()=>Jv,scaleUtc:()=>$v,tickFormat:()=>$m});var t={};n.r(t),n.d(t,{dU:()=>JQ,ng:()=>DB,EA:()=>xY,Tm:()=>$X,D6:()=>PX,YE:()=>VX});var r,i=n(5043),s=n.t(i,2),a=n(4391);function o(){return o=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(r||(r={}));const l="popstate";function c(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function d(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(Ae){}}}function u(e,t){return{usr:e.state,key:e.key,idx:t}}function h(e,t,n,r){return void 0===n&&(n=null),o({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?m(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function p(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function m(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(e,t,n,i){void 0===i&&(i={});let{window:s=document.defaultView,v5Compat:a=!1}=i,d=s.history,m=r.Pop,f=null,g=v();function v(){return(d.state||{idx:null}).idx}function y(){m=r.Pop;let e=v(),t=null==e?null:e-g;g=e,f&&f({action:m,location:b.location,delta:t})}function x(e){let t="null"!==s.location.origin?s.location.origin:s.location.href,n="string"===typeof e?e:p(e);return n=n.replace(/ $/,"%20"),c(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==g&&(g=0,d.replaceState(o({},d.state,{idx:g}),""));let b={get action(){return m},get location(){return e(s,d)},listen(e){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(l,y),f=e,()=>{s.removeEventListener(l,y),f=null}},createHref:e=>t(s,e),createURL:x,encodeLocation(e){let t=x(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(e,t){m=r.Push;let i=h(b.location,e,t);n&&n(i,e),g=v()+1;let o=u(i,g),l=b.createHref(i);try{d.pushState(o,"",l)}catch(c){if(c instanceof DOMException&&"DataCloneError"===c.name)throw c;s.location.assign(l)}a&&f&&f({action:m,location:b.location,delta:1})},replace:function(e,t){m=r.Replace;let i=h(b.location,e,t);n&&n(i,e),g=v();let s=u(i,g),o=b.createHref(i);d.replaceState(s,"",o),a&&f&&f({action:m,location:b.location,delta:0})},go:e=>d.go(e)};return b}var g;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(g||(g={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function v(e,t,n){return void 0===n&&(n="/"),y(e,t,n,!1)}function y(e,t,n,r){let i=M(("string"===typeof t?m(t):t).pathname||"/",n);if(null==i)return null;let s=x(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=T(i);a=E(s[o],e,r)}return a}function x(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(c(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let o=L([r,a.relativePath]),l=n.concat(a);e.children&&e.children.length>0&&(c(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+o+'".'),x(e.children,t,l,o)),(null!=e.path||e.index)&&t.push({path:o,score:C(o,e.index),routesMeta:l})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of b(e.path))i(e,t,r);else i(e,t)}),t}function b(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=b(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const w=/^:[\w-]+$/,j=3,N=2,k=1,A=10,S=-2,_=e=>"*"===e;function C(e,t){let n=e.split("/"),r=n.length;return n.some(_)&&(r+=S),t&&(r+=N),n.filter(e=>!_(e)).reduce((e,t)=>e+(w.test(t)?j:""===t?k:A),r)}function E(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),u=e.route;if(!d&&l&&n&&!r[r.length-1].route.index&&(d=P({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!d)return null;Object.assign(i,d.params),a.push({params:i,pathname:L([s,d.pathname]),pathnameBase:F(L([s,d.pathnameBase])),route:u}),"/"!==d.pathnameBase&&(s=L([s,d.pathnameBase]))}return a}function P(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);d("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1),l=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:l,pathname:s,pathnameBase:a,pattern:e}}function T(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return d(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function M(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function D(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function O(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function R(e,t){let n=O(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function I(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=m(e):(i=o({},e),c(!i.pathname||!i.pathname.includes("?"),D("?","pathname","search",i)),c(!i.pathname||!i.pathname.includes("#"),D("#","pathname","hash",i)),c(!i.search||!i.search.includes("#"),D("#","search","hash",i)));let s,a=""===e||""===i.pathname,l=a?"/":i.pathname;if(null==l)s=n;else{let e=t.length-1;if(!r&&l.startsWith("..")){let t=l.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}s=e>=0?t[e]:"/"}let d=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?m(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:B(r),hash:z(i)}}(i,s),u=l&&"/"!==l&&l.endsWith("/"),h=(a||"."===l)&&n.endsWith("/");return d.pathname.endsWith("/")||!u&&!h||(d.pathname+="/"),d}const L=e=>e.join("/").replace(/\/\/+/g,"/"),F=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),B=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",z=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function W(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const U=["post","put","patch","delete"],V=(new Set(U),["get",...U]);new Set(V),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function H(){return H=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H.apply(this,arguments)}const q=i.createContext(null);const G=i.createContext(null);const K=i.createContext(null);const Y=i.createContext(null);const X=i.createContext({outlet:null,matches:[],isDataRoute:!1});const J=i.createContext(null);function $(){return null!=i.useContext(Y)}function Q(){return $()||c(!1),i.useContext(Y).location}function Z(e){i.useContext(K).static||i.useLayoutEffect(e)}function ee(){let{isDataRoute:e}=i.useContext(X);return e?function(){let{router:e}=he(de.UseNavigateStable),t=me(ue.UseNavigateStable),n=i.useRef(!1);Z(()=>{n.current=!0});let r=i.useCallback(function(r,i){void 0===i&&(i={}),n.current&&("number"===typeof r?e.navigate(r):e.navigate(r,H({fromRouteId:t},i)))},[e,t]);return r}():function(){$()||c(!1);let e=i.useContext(q),{basename:t,future:n,navigator:r}=i.useContext(K),{matches:s}=i.useContext(X),{pathname:a}=Q(),o=JSON.stringify(R(s,n.v7_relativeSplatPath)),l=i.useRef(!1);Z(()=>{l.current=!0});let d=i.useCallback(function(n,i){if(void 0===i&&(i={}),!l.current)return;if("number"===typeof n)return void r.go(n);let s=I(n,JSON.parse(o),a,"path"===i.relative);null==e&&"/"!==t&&(s.pathname="/"===s.pathname?t:L([t,s.pathname])),(i.replace?r.replace:r.push)(s,i.state,i)},[t,r,o,a,e]);return d}()}const te=i.createContext(null);function ne(){let{matches:e}=i.useContext(X),t=e[e.length-1];return t?t.params:{}}function re(e,t){let{relative:n}=void 0===t?{}:t,{future:r}=i.useContext(K),{matches:s}=i.useContext(X),{pathname:a}=Q(),o=JSON.stringify(R(s,r.v7_relativeSplatPath));return i.useMemo(()=>I(e,JSON.parse(o),a,"path"===n),[e,o,a,n])}function ie(e,t,n,s){$()||c(!1);let{navigator:a}=i.useContext(K),{matches:o}=i.useContext(X),l=o[o.length-1],d=l?l.params:{},u=(l&&l.pathname,l?l.pathnameBase:"/");l&&l.route;let h,p=Q();if(t){var f;let e="string"===typeof t?m(t):t;"/"===u||(null==(f=e.pathname)?void 0:f.startsWith(u))||c(!1),h=e}else h=p;let g=h.pathname||"/",y=g;if("/"!==u){let e=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(e.length).join("/")}let x=v(e,{pathname:y});let b=ce(x&&x.map(e=>Object.assign({},e,{params:Object.assign({},d,e.params),pathname:L([u,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?u:L([u,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),o,n,s);return t&&b?i.createElement(Y.Provider,{value:{location:H({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:r.Pop}},b):b}function se(){let e=function(){var e;let t=i.useContext(J),n=pe(ue.UseRouteError),r=me(ue.UseRouteError);if(void 0!==t)return t;return null==(e=n.errors)?void 0:e[r]}(),t=W(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:r};return i.createElement(i.Fragment,null,i.createElement("h2",null,"Unexpected Application Error!"),i.createElement("h3",{style:{fontStyle:"italic"}},t),n?i.createElement("pre",{style:s},n):null,null)}const ae=i.createElement(se,null);class oe extends i.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?i.createElement(X.Provider,{value:this.props.routeContext},i.createElement(J.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function le(e){let{routeContext:t,match:n,children:r}=e,s=i.useContext(q);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),i.createElement(X.Provider,{value:t},r)}function ce(e,t,n,r){var s;if(void 0===t&&(t=[]),void 0===n&&(n=null),void 0===r&&(r=null),null==e){var a;if(!n)return null;if(n.errors)e=n.matches;else{if(!(null!=(a=r)&&a.v7_partialHydration&&0===t.length&&!n.initialized&&n.matches.length>0))return null;e=n.matches}}let o=e,l=null==(s=n)?void 0:s.errors;if(null!=l){let e=o.findIndex(e=>e.route.id&&void 0!==(null==l?void 0:l[e.route.id]));e>=0||c(!1),o=o.slice(0,Math.min(o.length,e+1))}let d=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let i=0;i<o.length;i++){let e=o[i];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(u=i),e.route.id){let{loaderData:t,errors:r}=n,i=e.route.loader&&void 0===t[e.route.id]&&(!r||void 0===r[e.route.id]);if(e.route.lazy||i){d=!0,o=u>=0?o.slice(0,u+1):[o[0]];break}}}return o.reduceRight((e,r,s)=>{let a,c=!1,h=null,p=null;var m;n&&(a=l&&r.route.id?l[r.route.id]:void 0,h=r.route.errorElement||ae,d&&(u<0&&0===s?(m="route-fallback",!1||fe[m]||(fe[m]=!0),c=!0,p=null):u===s&&(c=!0,p=r.route.hydrateFallbackElement||null)));let f=t.concat(o.slice(0,s+1)),g=()=>{let t;return t=a?h:c?p:r.route.Component?i.createElement(r.route.Component,null):r.route.element?r.route.element:e,i.createElement(le,{match:r,routeContext:{outlet:e,matches:f,isDataRoute:null!=n},children:t})};return n&&(r.route.ErrorBoundary||r.route.errorElement||0===s)?i.createElement(oe,{location:n.location,revalidation:n.revalidation,component:h,error:a,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var de=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(de||{}),ue=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(ue||{});function he(e){let t=i.useContext(q);return t||c(!1),t}function pe(e){let t=i.useContext(G);return t||c(!1),t}function me(e){let t=function(){let e=i.useContext(X);return e||c(!1),e}(),n=t.matches[t.matches.length-1];return n.route.id||c(!1),n.route.id}const fe={};function ge(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}s.startTransition;function ve(e){let{to:t,replace:n,state:r,relative:s}=e;$()||c(!1);let{future:a,static:o}=i.useContext(K),{matches:l}=i.useContext(X),{pathname:d}=Q(),u=ee(),h=I(t,R(l,a.v7_relativeSplatPath),d,"path"===s),p=JSON.stringify(h);return i.useEffect(()=>u(JSON.parse(p),{replace:n,state:r,relative:s}),[u,p,s,n,r]),null}function ye(e){return function(e){let t=i.useContext(X).outlet;return t?i.createElement(te.Provider,{value:e},t):t}(e.context)}function xe(e){c(!1)}function be(e){let{basename:t="/",children:n=null,location:s,navigationType:a=r.Pop,navigator:o,static:l=!1,future:d}=e;$()&&c(!1);let u=t.replace(/^\/*/,"/"),h=i.useMemo(()=>({basename:u,navigator:o,static:l,future:H({v7_relativeSplatPath:!1},d)}),[u,d,o,l]);"string"===typeof s&&(s=m(s));let{pathname:p="/",search:f="",hash:g="",state:v=null,key:y="default"}=s,x=i.useMemo(()=>{let e=M(p,u);return null==e?null:{location:{pathname:e,search:f,hash:g,state:v,key:y},navigationType:a}},[u,p,f,g,v,y,a]);return null==x?null:i.createElement(K.Provider,{value:h},i.createElement(Y.Provider,{children:n,value:x}))}function we(e){let{children:t,location:n}=e;return ie(je(t),n)}new Promise(()=>{});i.Component;function je(e,t){void 0===t&&(t=[]);let n=[];return i.Children.forEach(e,(e,r)=>{if(!i.isValidElement(e))return;let s=[...t,r];if(e.type===i.Fragment)return void n.push.apply(n,je(e.props.children,s));e.type!==xe&&c(!1),e.props.index&&e.props.children&&c(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=je(e.props.children,s)),n.push(a)}),n}var Ne=n(9379);function ke(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}let Ae={data:""},Se=e=>"object"==typeof window?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Ae,_e=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ce=/\/\*[^]*?\*\/|  +/g,Ee=/\n+/g,Pe=(e,t)=>{let n="",r="",i="";for(let s in e){let a=e[s];"@"==s[0]?"i"==s[1]?n=s+" "+a+";":r+="f"==s[1]?Pe(a,s):s+"{"+Pe(a,"k"==s[1]?"":t)+"}":"object"==typeof a?r+=Pe(a,t?t.replace(/([^,])+/g,e=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,t=>/&/.test(t)?t.replace(/&/g,e):e?e+" "+t:t)):s):null!=a&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),i+=Pe.p?Pe.p(s,a):s+":"+a+";")}return n+(t&&i?t+"{"+i+"}":i)+r},Te={},Me=e=>{if("object"==typeof e){let t="";for(let n in e)t+=n+Me(e[n]);return t}return e},De=(e,t,n,r,i)=>{let s=Me(e),a=Te[s]||(Te[s]=(e=>{let t=0,n=11;for(;t<e.length;)n=101*n+e.charCodeAt(t++)>>>0;return"go"+n})(s));if(!Te[a]){let t=s!==e?e:(e=>{let t,n,r=[{}];for(;t=_e.exec(e.replace(Ce,""));)t[4]?r.shift():t[3]?(n=t[3].replace(Ee," ").trim(),r.unshift(r[0][n]=r[0][n]||{})):r[0][t[1]]=t[2].replace(Ee," ").trim();return r[0]})(e);Te[a]=Pe(i?{["@keyframes "+a]:t}:t,n?"":"."+a)}let o=n&&Te.g?Te.g:null;return n&&(Te.g=Te[a]),((e,t,n,r)=>{r?t.data=t.data.replace(r,e):-1===t.data.indexOf(e)&&(t.data=n?e+t.data:t.data+e)})(Te[a],t,r,o),a};function Oe(e){let t=this||{},n=e.call?e(t.p):e;return De(n.unshift?n.raw?((e,t,n)=>e.reduce((e,r,i)=>{let s=t[i];if(s&&s.call){let e=s(n),t=e&&e.props&&e.props.className||/^go/.test(e)&&e;s=t?"."+t:e&&"object"==typeof e?e.props?"":Pe(e,""):!1===e?"":e}return e+r+(null==s?"":s)},""))(n,[].slice.call(arguments,1),t.p):n.reduce((e,n)=>Object.assign(e,n&&n.call?n(t.p):n),{}):n,Se(t.target),t.g,t.o,t.k)}Oe.bind({g:1});let Re,Ie,Le,Fe=Oe.bind({k:1});function Be(e,t){let n=this||{};return function(){let r=arguments;function i(s,a){let o=Object.assign({},s),l=o.className||i.className;n.p=Object.assign({theme:Ie&&Ie()},o),n.o=/ *go\d+/.test(l),o.className=Oe.apply(n,r)+(l?" "+l:""),t&&(o.ref=a);let c=e;return e[0]&&(c=o.as||e,delete o.as),Le&&c[0]&&Le(o),Re(c,o)}return t?t(i):i}}var ze,We,Ue,Ve,He,qe,Ge,Ke,Ye,Xe,Je,$e,Qe,Ze,et,tt,nt=(e,t)=>(e=>"function"==typeof e)(e)?e(t):e,rt=(()=>{let e=0;return()=>(++e).toString()})(),it=(()=>{let e;return()=>{if(void 0===e&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),st="default",at=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return(0,Ne.A)((0,Ne.A)({},e),{},{toasts:[t.toast,...e.toasts].slice(0,n)});case 1:return(0,Ne.A)((0,Ne.A)({},e),{},{toasts:e.toasts.map(e=>e.id===t.toast.id?(0,Ne.A)((0,Ne.A)({},e),t.toast):e)});case 2:let{toast:r}=t;return at(e,{type:e.toasts.find(e=>e.id===r.id)?1:0,toast:r});case 3:let{toastId:i}=t;return(0,Ne.A)((0,Ne.A)({},e),{},{toasts:e.toasts.map(e=>e.id===i||void 0===i?(0,Ne.A)((0,Ne.A)({},e),{},{dismissed:!0,visible:!1}):e)});case 4:return void 0===t.toastId?(0,Ne.A)((0,Ne.A)({},e),{},{toasts:[]}):(0,Ne.A)((0,Ne.A)({},e),{},{toasts:e.toasts.filter(e=>e.id!==t.toastId)});case 5:return(0,Ne.A)((0,Ne.A)({},e),{},{pausedAt:t.time});case 6:let s=t.time-(e.pausedAt||0);return(0,Ne.A)((0,Ne.A)({},e),{},{pausedAt:void 0,toasts:e.toasts.map(e=>(0,Ne.A)((0,Ne.A)({},e),{},{pauseDuration:e.pauseDuration+s}))})}},ot=[],lt={toasts:[],pausedAt:void 0,settings:{toastLimit:20}},ct={},dt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st;ct[t]=at(ct[t]||lt,e),ot.forEach(e=>{let[n,r]=e;n===t&&r(ct[t])})},ut=e=>Object.keys(ct).forEach(t=>dt(e,t)),ht=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:st;return t=>{dt(t,e)}},pt={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},mt=e=>(t,n)=>{let r=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"blank",n=arguments.length>2?arguments[2]:void 0;return(0,Ne.A)((0,Ne.A)({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0},n),{},{id:(null==n?void 0:n.id)||rt()})}(t,e,n);return ht(r.toasterId||(e=>Object.keys(ct).find(t=>ct[t].toasts.some(t=>t.id===e)))(r.id))({type:2,toast:r}),r.id},ft=(e,t)=>mt("blank")(e,t);ft.error=mt("error"),ft.success=mt("success"),ft.loading=mt("loading"),ft.custom=mt("custom"),ft.dismiss=(e,t)=>{let n={type:3,toastId:e};t?ht(t)(n):ut(n)},ft.dismissAll=e=>ft.dismiss(void 0,e),ft.remove=(e,t)=>{let n={type:4,toastId:e};t?ht(t)(n):ut(n)},ft.removeAll=e=>ft.remove(void 0,e),ft.promise=(e,t,n)=>{let r=ft.loading(t.loading,(0,Ne.A)((0,Ne.A)({},n),null==n?void 0:n.loading));return"function"==typeof e&&(e=e()),e.then(e=>{let i=t.success?nt(t.success,e):void 0;return i?ft.success(i,(0,Ne.A)((0,Ne.A)({id:r},n),null==n?void 0:n.success)):ft.dismiss(r),e}).catch(e=>{let i=t.error?nt(t.error,e):void 0;i?ft.error(i,(0,Ne.A)((0,Ne.A)({id:r},n),null==n?void 0:n.error)):ft.dismiss(r)}),e};var gt=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",{toasts:n,pausedAt:r}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:st,[n,r]=(0,i.useState)(ct[t]||lt),s=(0,i.useRef)(ct[t]);(0,i.useEffect)(()=>(s.current!==ct[t]&&r(ct[t]),ot.push([t,r]),()=>{let e=ot.findIndex(e=>{let[n]=e;return n===t});e>-1&&ot.splice(e,1)}),[t]);let a=n.toasts.map(t=>{var n,r,i;return(0,Ne.A)((0,Ne.A)((0,Ne.A)((0,Ne.A)({},e),e[t.type]),t),{},{removeDelay:t.removeDelay||(null==(n=e[t.type])?void 0:n.removeDelay)||(null==e?void 0:e.removeDelay),duration:t.duration||(null==(r=e[t.type])?void 0:r.duration)||(null==e?void 0:e.duration)||pt[t.type],style:(0,Ne.A)((0,Ne.A)((0,Ne.A)({},e.style),null==(i=e[t.type])?void 0:i.style),t.style)})});return(0,Ne.A)((0,Ne.A)({},n),{},{toasts:a})}(e,t),s=(0,i.useRef)(new Map).current,a=(0,i.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;if(s.has(e))return;let n=setTimeout(()=>{s.delete(e),o({type:4,toastId:e})},t);s.set(e,n)},[]);(0,i.useEffect)(()=>{if(r)return;let e=Date.now(),i=n.map(n=>{if(n.duration===1/0)return;let r=(n.duration||0)+n.pauseDuration-(e-n.createdAt);if(!(r<0))return setTimeout(()=>ft.dismiss(n.id,t),r);n.visible&&ft.dismiss(n.id)});return()=>{i.forEach(e=>e&&clearTimeout(e))}},[n,r,t]);let o=(0,i.useCallback)(ht(t),[t]),l=(0,i.useCallback)(()=>{o({type:5,time:Date.now()})},[o]),c=(0,i.useCallback)((e,t)=>{o({type:1,toast:{id:e,height:t}})},[o]),d=(0,i.useCallback)(()=>{r&&o({type:6,time:Date.now()})},[r,o]),u=(0,i.useCallback)((e,t)=>{let{reverseOrder:r=!1,gutter:i=8,defaultPosition:s}=t||{},a=n.filter(t=>(t.position||s)===(e.position||s)&&t.height),o=a.findIndex(t=>t.id===e.id),l=a.filter((e,t)=>t<o&&e.visible).length;return a.filter(e=>e.visible).slice(...r?[l+1]:[0,l]).reduce((e,t)=>e+(t.height||0)+i,0)},[n]);return(0,i.useEffect)(()=>{n.forEach(e=>{if(e.dismissed)a(e.id,e.removeDelay);else{let t=s.get(e.id);t&&(clearTimeout(t),s.delete(e.id))}})},[n,a]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:u}}},vt=Fe(ze||(ze=ke(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n transform: scale(1) rotate(45deg);\n  opacity: 1;\n}"]))),yt=Fe(We||(We=ke(["\nfrom {\n  transform: scale(0);\n  opacity: 0;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),xt=Fe(Ue||(Ue=ke(["\nfrom {\n  transform: scale(0) rotate(90deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(90deg);\n\topacity: 1;\n}"]))),bt=Be("div")(Ve||(Ve=ke(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n\n  &:after,\n  &:before {\n    content: '';\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 150ms;\n    position: absolute;\n    border-radius: 3px;\n    opacity: 0;\n    background: ",";\n    bottom: 9px;\n    left: 4px;\n    height: 2px;\n    width: 12px;\n  }\n\n  &:before {\n    animation: "," 0.15s ease-out forwards;\n    animation-delay: 180ms;\n    transform: rotate(90deg);\n  }\n"])),e=>e.primary||"#ff4b4b",vt,yt,e=>e.secondary||"#fff",xt),wt=Fe(He||(He=ke(["\n  from {\n    transform: rotate(0deg);\n  }\n  to {\n    transform: rotate(360deg);\n  }\n"]))),jt=Be("div")(qe||(qe=ke(["\n  width: 12px;\n  height: 12px;\n  box-sizing: border-box;\n  border: 2px solid;\n  border-radius: 100%;\n  border-color: ",";\n  border-right-color: ",";\n  animation: "," 1s linear infinite;\n"])),e=>e.secondary||"#e0e0e0",e=>e.primary||"#616161",wt),Nt=Fe(Ge||(Ge=ke(["\nfrom {\n  transform: scale(0) rotate(45deg);\n\topacity: 0;\n}\nto {\n  transform: scale(1) rotate(45deg);\n\topacity: 1;\n}"]))),kt=Fe(Ke||(Ke=ke(["\n0% {\n\theight: 0;\n\twidth: 0;\n\topacity: 0;\n}\n40% {\n  height: 0;\n\twidth: 6px;\n\topacity: 1;\n}\n100% {\n  opacity: 1;\n  height: 10px;\n}"]))),At=Be("div")(Ye||(Ye=ke(["\n  width: 20px;\n  opacity: 0;\n  height: 20px;\n  border-radius: 10px;\n  background: ",";\n  position: relative;\n  transform: rotate(45deg);\n\n  animation: "," 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n  animation-delay: 100ms;\n  &:after {\n    content: '';\n    box-sizing: border-box;\n    animation: "," 0.2s ease-out forwards;\n    opacity: 0;\n    animation-delay: 200ms;\n    position: absolute;\n    border-right: 2px solid;\n    border-bottom: 2px solid;\n    border-color: ",";\n    bottom: 6px;\n    left: 6px;\n    height: 10px;\n    width: 6px;\n  }\n"])),e=>e.primary||"#61d345",Nt,kt,e=>e.secondary||"#fff"),St=Be("div")(Xe||(Xe=ke(["\n  position: absolute;\n"]))),_t=Be("div")(Je||(Je=ke(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-width: 20px;\n  min-height: 20px;\n"]))),Ct=Fe($e||($e=ke(["\nfrom {\n  transform: scale(0.6);\n  opacity: 0.4;\n}\nto {\n  transform: scale(1);\n  opacity: 1;\n}"]))),Et=Be("div")(Qe||(Qe=ke(["\n  position: relative;\n  transform: scale(0.6);\n  opacity: 0.4;\n  min-width: 20px;\n  animation: "," 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)\n    forwards;\n"])),Ct),Pt=e=>{let{toast:t}=e,{icon:n,type:r,iconTheme:s}=t;return void 0!==n?"string"==typeof n?i.createElement(Et,null,n):n:"blank"===r?null:i.createElement(_t,null,i.createElement(jt,(0,Ne.A)({},s)),"loading"!==r&&i.createElement(St,null,"error"===r?i.createElement(bt,(0,Ne.A)({},s)):i.createElement(At,(0,Ne.A)({},s))))},Tt=e=>"\n0% {transform: translate3d(0,".concat(-200*e,"%,0) scale(.6); opacity:.5;}\n100% {transform: translate3d(0,0,0) scale(1); opacity:1;}\n"),Mt=e=>"\n0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}\n100% {transform: translate3d(0,".concat(-150*e,"%,-1px) scale(.6); opacity:0;}\n"),Dt=Be("div")(Ze||(Ze=ke(["\n  display: flex;\n  align-items: center;\n  background: #fff;\n  color: #363636;\n  line-height: 1.3;\n  will-change: transform;\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);\n  max-width: 350px;\n  pointer-events: auto;\n  padding: 8px 10px;\n  border-radius: 8px;\n"]))),Ot=Be("div")(et||(et=ke(["\n  display: flex;\n  justify-content: center;\n  margin: 4px 10px;\n  color: inherit;\n  flex: 1 1 auto;\n  white-space: pre-line;\n"]))),Rt=i.memo(e=>{let{toast:t,position:n,style:r,children:s}=e,a=t.height?((e,t)=>{let n=e.includes("top")?1:-1,[r,i]=it()?["0%{opacity:0;} 100%{opacity:1;}","0%{opacity:1;} 100%{opacity:0;}"]:[Tt(n),Mt(n)];return{animation:t?"".concat(Fe(r)," 0.35s cubic-bezier(.21,1.02,.73,1) forwards"):"".concat(Fe(i)," 0.4s forwards cubic-bezier(.06,.71,.55,1)")}})(t.position||n||"top-center",t.visible):{opacity:0},o=i.createElement(Pt,{toast:t}),l=i.createElement(Ot,(0,Ne.A)({},t.ariaProps),nt(t.message,t));return i.createElement(Dt,{className:t.className,style:(0,Ne.A)((0,Ne.A)((0,Ne.A)({},a),r),t.style)},"function"==typeof s?s({icon:o,message:l}):i.createElement(i.Fragment,null,o,l))});!function(e,t,n,r){Pe.p=t,Re=e,Ie=n,Le=r}(i.createElement);var It=e=>{let{id:t,className:n,style:r,onHeightUpdate:s,children:a}=e,o=i.useCallback(e=>{if(e){let n=()=>{let n=e.getBoundingClientRect().height;s(t,n)};n(),new MutationObserver(n).observe(e,{subtree:!0,childList:!0,characterData:!0})}},[t,s]);return i.createElement("div",{ref:o,className:n,style:r},a)},Lt=Oe(tt||(tt=ke(["\n  z-index: 9999;\n  > * {\n    pointer-events: auto;\n  }\n"]))),Ft=e=>{let{reverseOrder:t,position:n="top-center",toastOptions:r,gutter:s,children:a,toasterId:o,containerStyle:l,containerClassName:c}=e,{toasts:d,handlers:u}=gt(r,o);return i.createElement("div",{"data-rht-toaster":o||"",style:(0,Ne.A)({position:"fixed",zIndex:9999,top:16,left:16,right:16,bottom:16,pointerEvents:"none"},l),className:c,onMouseEnter:u.startPause,onMouseLeave:u.endPause},d.map(e=>{let r=e.position||n,o=((e,t)=>{let n=e.includes("top"),r=n?{top:0}:{bottom:0},i=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return(0,Ne.A)((0,Ne.A)({left:0,right:0,display:"flex",position:"absolute",transition:it()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:"translateY(".concat(t*(n?1:-1),"px)")},r),i)})(r,u.calculateOffset(e,{reverseOrder:t,gutter:s,defaultPosition:n}));return i.createElement(It,{id:e.id,key:e.id,onHeightUpdate:u.updateHeight,className:e.visible?Lt:"",style:o},"custom"===e.type?nt(e.message,e):a?a(e):i.createElement(Rt,{toast:e,position:r}))}))},Bt=ft,zt=n(9064);const Wt=new class{setApi(e){this.api=e}async getClients(){try{const e=(await zt.default.get("/clients")).data;return e.success&&e.data&&Array.isArray(e.data.clients)?(console.log("\u8fd4\u56de\u5ba2\u6237\u6570\u7ec4\uff0c\u957f\u5ea6:",e.data.clients.length),e.data.clients):Array.isArray(e)?(console.log("\u76f4\u63a5\u8fd4\u56de\u6570\u7ec4\uff0c\u957f\u5ea6:",e.length),e):(console.warn("Unexpected response format:",e),[])}catch(n){var e,t;throw console.error("Error fetching clients:",n),console.error("\u9519\u8bef\u8be6\u60c5:",n.message),console.error("\u54cd\u5e94\u72b6\u6001:",null===(e=n.response)||void 0===e?void 0:e.status),console.error("\u54cd\u5e94\u6570\u636e:",null===(t=n.response)||void 0===t?void 0:t.data),n}}async getClient(e){try{const t=(await zt.default.get("/clients/".concat(e))).data;return t.success?t.data:t}catch(t){throw console.error("Error fetching client:",t),t}}async createClient(e){try{if(!e||!e.name||""===e.name.trim())throw new Error("Client name is required");const t=(await zt.default.post("/clients",e)).data;return t.success?t.data:t}catch(t){throw console.error("Error creating client:",t),t}}async updateClient(e,t){try{const n=(await zt.default.put("/clients/".concat(e),t)).data;return n.success?n.data:n}catch(n){throw console.error("Error updating client:",n),n}}async deleteClient(e){try{const t=await zt.default.delete("/clients/".concat(e));return t.data}catch(t){throw console.error("Error deleting client:",t),t}}},Ut=Wt;n(1844);Object.create(null);const Vt={};function Ht(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"===typeof t[0]&&Vt[t[0]]||("string"===typeof t[0]&&(Vt[t[0]]=new Date),function(){if(console&&console.warn){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];"string"===typeof t[0]&&(t[0]="react-i18next:: ".concat(t[0])),console.warn(...t)}}(...t))}const qt=(e,t)=>()=>{if(e.isInitialized)t();else{const n=()=>{setTimeout(()=>{e.off("initialized",n)},0),t()};e.on("initialized",n)}};function Gt(e,t,n){e.loadNamespaces(t,qt(e,n))}function Kt(e,t,n,r){"string"===typeof n&&(n=[n]),n.forEach(t=>{e.options.ns.indexOf(t)<0&&e.options.ns.push(t)}),e.loadLanguages(t,qt(e,r))}const Yt=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,Xt={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"\xa9","&#169;":"\xa9","&reg;":"\xae","&#174;":"\xae","&hellip;":"\u2026","&#8230;":"\u2026","&#x2F;":"/","&#47;":"/"},Jt=e=>Xt[e];let $t={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:e=>e.replace(Yt,Jt)};let Qt;const Zt={type:"3rdParty",init(e){!function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$t=(0,Ne.A)((0,Ne.A)({},$t),e)}(e.options.react),function(e){Qt=e}(e)}},en=(0,i.createContext)();class tn{constructor(){this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(e=>{this.usedNamespaces[e]||(this.usedNamespaces[e]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}function nn(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const{i18n:n}=t,{i18n:r,defaultNS:s}=(0,i.useContext)(en)||{},a=n||r||Qt;if(a&&!a.reportNamespaces&&(a.reportNamespaces=new tn),!a){Ht("You will need to pass in an i18next instance by using initReactI18next");const e=(e,t)=>"string"===typeof t?t:t&&"object"===typeof t&&"string"===typeof t.defaultValue?t.defaultValue:Array.isArray(e)?e[e.length-1]:e,t=[e,{},!1];return t.t=e,t.i18n={},t.ready=!1,t}a.options.react&&void 0!==a.options.react.wait&&Ht("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const o=(0,Ne.A)((0,Ne.A)((0,Ne.A)({},$t),a.options.react),t),{useSuspense:l,keyPrefix:c}=o;let d=e||s||a.options&&a.options.defaultNS;d="string"===typeof d?[d]:d||["translation"],a.reportNamespaces.addUsedNamespaces&&a.reportNamespaces.addUsedNamespaces(d);const u=(a.isInitialized||a.initializedStoreOnce)&&d.every(e=>function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return t.languages&&t.languages.length?void 0!==t.options.ignoreJSONStructure?t.hasLoadedNamespace(e,{lng:n.lng,precheck:(t,r)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!r(t.isLanguageChangingTo,e))return!1}}):function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=t.languages[0],i=!!t.options&&t.options.fallbackLng,s=t.languages[t.languages.length-1];if("cimode"===r.toLowerCase())return!0;const a=(e,n)=>{const r=t.services.backendConnector.state["".concat(e,"|").concat(n)];return-1===r||2===r};return!(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&t.services.backendConnector.backend&&t.isLanguageChangingTo&&!a(t.isLanguageChangingTo,e))&&(!!t.hasResourceBundle(r,e)||!(t.services.backendConnector.backend&&(!t.options.resources||t.options.partialBundledLanguages))||!(!a(r,e)||i&&!a(s,e)))}(e,t,n):(Ht("i18n.languages were undefined or empty",t.languages),!0)}(e,a,o));function h(){return a.getFixedT(t.lng||null,"fallback"===o.nsMode?d:d[0],c)}const[p,m]=(0,i.useState)(h);let f=d.join();t.lng&&(f="".concat(t.lng).concat(f));const g=((e,t)=>{const n=(0,i.useRef)();return(0,i.useEffect)(()=>{n.current=t?n.current:e},[e,t]),n.current})(f),v=(0,i.useRef)(!0);(0,i.useEffect)(()=>{const{bindI18n:e,bindI18nStore:n}=o;function r(){v.current&&m(h)}return v.current=!0,u||l||(t.lng?Kt(a,t.lng,d,()=>{v.current&&m(h)}):Gt(a,d,()=>{v.current&&m(h)})),u&&g&&g!==f&&v.current&&m(h),e&&a&&a.on(e,r),n&&a&&a.store.on(n,r),()=>{v.current=!1,e&&a&&e.split(" ").forEach(e=>a.off(e,r)),n&&a&&n.split(" ").forEach(e=>a.store.off(e,r))}},[a,f]);const y=(0,i.useRef)(!0);(0,i.useEffect)(()=>{v.current&&!y.current&&m(h),y.current=!1},[a,c]);const x=[p,a,u];if(x.t=p,x.i18n=a,x.ready=u,u)return x;if(!u&&!l)return x;throw new Promise(e=>{t.lng?Kt(a,t.lng,d,()=>e()):Gt(a,d,()=>e())})}function rn(e){let{i18n:t,defaultNS:n,children:r}=e;const s=(0,i.useMemo)(()=>({i18n:t,defaultNS:n}),[t,n]);return(0,i.createElement)(en.Provider,{value:s},r)}var sn=n(579);const an=!0,on=e=>{try{localStorage.setItem("mockAppData",JSON.stringify(e))}catch(Ae){console.warn("Failed to save mock data:",Ae)}};let ln=(()=>{const e=localStorage.getItem("mockAppData");if(e)try{return JSON.parse(e)}catch(Ae){console.warn("Failed to parse stored mock data:",Ae)}return{clients:[],invoices:[],nextClientId:1,nextInvoiceId:1}})(),cn=ln.clients,dn=ln.invoices,un=ln.nextClientId,hn=ln.nextInvoiceId;const pn=(0,i.createContext)(),mn=()=>{const{t:e}=nn(),t=(0,i.useContext)(pn);if(!t)throw new Error(e("auth:useAuthMustBeUsedWithinAuthProvider"));return t},fn=e=>{let{children:t}=e;const{t:n}=nn(),[r,s]=(0,i.useState)(null),[a,o]=(0,i.useState)(!0);(0,i.useEffect)(()=>{const e=localStorage.getItem("token");e&&(zt.default.defaults.headers.common.Authorization="Bearer ".concat(e))},[]),(0,i.useEffect)(()=>{Ut.setApi(l)},[]),(0,i.useEffect)(()=>{(async()=>{try{console.log("=== \u524d\u7aef\u8ba4\u8bc1\u521d\u59cb\u5316 ==="),console.log("DEV_MODE:",an),console.log("NODE_ENV:","production");const t=localStorage.getItem("token");if(t&&"dev-mock-token"!==t){zt.default.defaults.headers.common.Authorization="Bearer ".concat(t),console.log("\u4f7f\u7528\u5b58\u50a8\u7684token:",t.substring(0,20)+"...");try{const e=await zt.default.get("/auth/profile");e.data.success&&(s(e.data.data),console.log("Token\u9a8c\u8bc1\u6210\u529f\uff0c\u7528\u6237:",e.data.data))}catch(e){console.log("Token\u9a8c\u8bc1\u5931\u8d25\uff0c\u6e05\u9664token"),localStorage.removeItem("token"),delete zt.default.defaults.headers.common.Authorization}}else{{const e="dev-mock-token";localStorage.setItem("token",e),zt.default.defaults.headers.common.Authorization="Bearer ".concat(e),console.log("\u8bbe\u7f6e\u5f00\u53d1\u6a21\u5f0ftoken:",e),s({id:1,name:"Test User",email:"dev@example.com",role:"admin",nationality:"FR",currency:"EUR",language:"fr",invoiceMode:"french",subscription:"professional",subscriptionStatus:"active",subscriptionEndDate:new Date(Date.now()+2592e6).toISOString(),paddleTransactionId:null})}}console.log("\u7528\u6237\u8ba4\u8bc1\u5b8c\u6210")}catch(e){console.error(n("auth:checkError"),e),localStorage.removeItem("token"),delete zt.default.defaults.headers.common.Authorization}finally{o(!1)}})()},[]);const l={get:async e=>{if("/clients"===e)return{data:[...cn]};if("/invoices"===e){const e=dn.map(e=>{if(e.clientId&&!e.client){const t=cn.find(t=>t.id===e.clientId);return(0,Ne.A)((0,Ne.A)({},e),{},{client:t})}return e});return{data:e}}if("/dashboard"===e)return{data:{todayRevenue:{paid:1250,due:750.5,total:2000.5},overdueInvoices:[{id:"inv-001",invoiceNumber:"INV-001",clientName:n("auth:testClientA"),total:500,currency:"EUR",dueDate:new Date(Date.now()-432e6).toISOString(),daysOverdue:5},{id:"inv-002",invoiceNumber:"INV-002",clientName:n("auth:testClientB"),total:300,currency:"EUR",dueDate:new Date(Date.now()-2592e5).toISOString(),daysOverdue:3}],recentInvoices:[{id:"inv-003",invoiceNumber:"INV-003",clientName:n("auth:testClientC"),total:800,currency:"EUR",status:"paid",issueDate:(new Date).toISOString(),dueDate:new Date(Date.now()+6048e5).toISOString()},{id:"inv-004",invoiceNumber:"INV-004",clientName:n("auth:testClientD"),total:450,currency:"EUR",status:"sent",issueDate:new Date(Date.now()-1728e5).toISOString(),dueDate:new Date(Date.now()+432e6).toISOString()}]}};if(e.startsWith("/clients/")){const t=e.split("/")[2],r=cn.find(e=>e.id===t);return{data:r||{id:t,name:n("auth:testClient"),vatNumber:"FR12345678901",siren:"123456789",siret:"12345678901234"}}}if(e.startsWith("/invoices/")){const t=e.split("/")[2],n=dn.find(e=>e.id===t);if(n&&n.clientId&&!n.client){const e=cn.find(e=>e.id===n.clientId);e&&(n.client=e)}return{data:n||{id:t,amount:100,status:"pending",date:(new Date).toISOString()}}}return{data:{}}},post:async(e,t)=>{if("/clients"===e){const e=(0,Ne.A)((0,Ne.A)({},t),{},{id:"client-".concat(un++)});return cn.push(e),on({clients:cn,invoices:dn,nextClientId:un,nextInvoiceId:hn}),{data:{message:n("auth:clientCreatedSuccess"),data:e}}}if("/invoices"===e){const e=cn.find(e=>e.id===t.clientId),r=(0,Ne.A)((0,Ne.A)({},t),{},{id:"invoice-".concat(hn++),invoiceNumber:"INV-".concat(String(hn).padStart(3,"0")),client:e,createdAt:(new Date).toISOString()});return dn.push(r),on({clients:cn,invoices:dn,nextClientId:un,nextInvoiceId:hn}),{data:{message:n("auth:invoiceCreatedSuccess"),invoice:r}}}return{data:{message:n("auth:success")}}},put:async(e,t)=>{if(e.startsWith("/clients/")){const r=e.split("/")[2],i=cn.findIndex(e=>e.id===r);if(-1!==i)return cn[i]=(0,Ne.A)((0,Ne.A)({},cn[i]),t),on({clients:cn,invoices:dn,nextClientId:un,nextInvoiceId:hn}),{data:{message:n("auth:clientUpdatedSuccess"),data:cn[i]}}}else if(e.startsWith("/invoices/")){const r=e.split("/")[2],i=dn.findIndex(e=>e.id===r);if(-1!==i)return dn[i]=(0,Ne.A)((0,Ne.A)({},dn[i]),t),{data:{message:n("auth:invoiceUpdatedSuccess"),invoice:dn[i]}}}return{data:{message:n("auth:success")}}},delete:async e=>{if(e.startsWith("/clients/")){const t=e.split("/")[2],r=cn.findIndex(e=>e.id===t);if(-1!==r)return cn.splice(r,1),on({clients:cn,invoices:dn,nextClientId:un,nextInvoiceId:hn}),{data:{message:n("auth:clientDeletedSuccess")}}}else if(e.startsWith("/invoices/")){const t=e.split("/")[2],r=dn.findIndex(e=>e.id===t);if(-1!==r)return dn.splice(r,1),{data:{message:n("auth:invoiceDeletedSuccess")}}}return{data:{message:n("auth:success")}}}},c={user:r,loading:a,login:async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"intl";try{o(!0),console.log("=== \u524d\u7aef\u767b\u5f55\u5904\u7406 ==="),console.log("DEV_MODE:",an),console.log("\u767b\u5f55\u53c2\u6570:",{email:e,invoiceMode:r});{const t="dev-mock-token";localStorage.setItem("token",t),zt.default.defaults.headers.common.Authorization="Bearer ".concat(t),console.log("\u5f00\u53d1\u6a21\u5f0f\u767b\u5f55\u8bbe\u7f6etoken:",t);const i={id:1,name:"Test User",email:e||"dev@example.com",role:"admin",nationality:"fr"===r?"FR":"US",currency:"EUR",language:"fr"===r?"fr":"en",invoiceMode:r,companyName:"",phone:"",vatNumber:"",siren:"",siret:"",rcsNumber:"",nafCode:"",legalForm:"",registeredCapital:"",peppolId:"",subscription:"professional",subscriptionStatus:"expired",subscriptionEndDate:new Date(Date.now()-864e5).toISOString(),paddleTransactionId:null};return s(i),console.log("\u5f00\u53d1\u6a21\u5f0f\u767b\u5f55\u6210\u529f\uff0c\u7528\u6237\u4fe1\u606f:",i),Bt.success(n("auth:devLoginSuccess")),{success:!0,shouldRedirect:!0}}}catch(l){var i,a;const e=(null===(i=l.response)||void 0===i||null===(a=i.data)||void 0===a?void 0:a.message)||n("auth:loginFailed");return Bt.error(e),{success:!1,message:e}}finally{o(!1)}},register:async e=>{try{o(!0);{localStorage.setItem("token","dev-mock-token"),zt.default.defaults.headers.common.Authorization="Bearer dev-mock-token";const t={id:"dev-user-id",name:"".concat(e.firstName," ").concat(e.lastName),email:e.email||"dev@example.com",role:"admin",nationality:e.nationality||"US",currency:e.currency||"EUR",language:e.language||"en",invoiceMode:e.invoiceMode||"intl",companyName:e.companyName||"",phone:e.phone||"",vatNumber:e.vatNumber||"",siren:e.siren||"",siret:e.siret||"",rcsNumber:e.rcsNumber||"",nafCode:e.nafCode||"",legalForm:e.legalForm||"",registeredCapital:e.registeredCapital||"",peppolId:e.peppolId||"",subscription:"free",subscriptionStatus:"active",subscriptionEndDate:null,paddleTransactionId:null};return s(t),Bt.success(n("auth:devRegisterSuccess")),{success:!0,shouldRedirect:!0}}}catch(i){var t,r;const e=(null===(t=i.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||n("auth:registerFailed");return Bt.error(e),{success:!1,message:e}}finally{o(!1)}},logout:()=>{localStorage.removeItem("token"),delete zt.default.defaults.headers.common.Authorization,s(null),Bt.success(n("auth:logoutSuccess"))},updateProfile:async e=>{try{o(!0);const t=await zt.default.put("/settings/profile",e);return s(t.data.data),Bt.success(n("auth:profileUpdateSuccess")),{success:!0}}catch(i){var t,r;const e=(null===(t=i.response)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.message)||n("auth:profileUpdateFailed");return Bt.error(e),{success:!1,message:e}}finally{o(!1)}},updateUser:e=>{s(e)},refreshUser:async()=>{try{return console.log("Development mode: refreshUser called, triggering state update"),s(e=>(0,Ne.A)({},e)),r}catch(e){throw console.error("Error refreshing user:",e),e}},handleAuthRedirect:()=>{const e=localStorage.getItem("redirectAfterLogin");return e?(localStorage.removeItem("redirectAfterLogin"),e):null},saveRedirectPath:e=>{localStorage.setItem("redirectAfterLogin",e)},api:l,isAuthenticated:!!r,isAdmin:"admin"===(null===r||void 0===r?void 0:r.role),isPremium:"active"===(null===r||void 0===r?void 0:r.subscriptionStatus)||"trialing"===(null===r||void 0===r?void 0:r.subscriptionStatus)};return(0,sn.jsx)(pn.Provider,{value:c,children:t})},gn=(0,i.createContext)(),vn=()=>{const e=(0,i.useContext)(gn);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},yn=e=>{let{children:t}=e;const[n,r]=(0,i.useState)(()=>{const e=localStorage.getItem("theme");return e||(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches,"dark")}),[s,a]=(0,i.useState)(()=>{const e=localStorage.getItem("autoMode");return!!e&&JSON.parse(e)});(0,i.useEffect)(()=>{if(!s)return;const e=window.matchMedia("(prefers-color-scheme: dark)"),t=e=>{const t=e.matches?"dark":"light";r(t),localStorage.setItem("theme",t)};return e.addEventListener("change",t),()=>e.removeEventListener("change",t)},[s]),(0,i.useEffect)(()=>{const e=document.documentElement;e.setAttribute("data-theme",n),"dark"===n?e.classList.add("dark"):e.classList.remove("dark"),localStorage.setItem("theme",n)},[n]),(0,i.useEffect)(()=>{localStorage.setItem("autoMode",JSON.stringify(s))},[s]);const o={theme:n,autoMode:s,toggleTheme:()=>{r("light"===n?"dark":"light"),a(!1)},setLightTheme:()=>{r("light"),a(!1)},setDarkTheme:()=>{r("dark"),a(!1)},setAutoTheme:()=>{a(!0);const e=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";r(e)},isDark:"dark"===n};return(0,sn.jsx)(gn.Provider,{value:o,children:t})};const xn=new class{async getProfile(){try{return(await zt.default.get("/settings/profile")).data.data}catch(n){var e,t;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"\u83b7\u53d6\u4e2a\u4eba\u8d44\u6599\u5931\u8d25")}}async updateProfile(e){try{return(await zt.default.put("/settings/profile",e)).data.data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u66f4\u65b0\u4e2a\u4eba\u8d44\u6599\u5931\u8d25")}}async changePassword(e){try{return(await zt.default.put("/settings/password",e)).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u66f4\u6539\u5bc6\u7801\u5931\u8d25")}}async getSubscription(){try{return(await zt.default.get("/settings/subscription")).data}catch(n){var e,t;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"\u83b7\u53d6\u8ba2\u9605\u4fe1\u606f\u5931\u8d25")}}async upgradeSubscription(e){try{return(await zt.default.post("/settings/subscription/upgrade",e)).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u5347\u7ea7\u8ba2\u9605\u5931\u8d25")}}async cancelSubscription(){try{return(await zt.default.post("/settings/subscription/cancel")).data}catch(n){var e,t;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"\u53d6\u6d88\u8ba2\u9605\u5931\u8d25")}}async getNotificationSettings(){try{return(await zt.default.get("/notifications")).data}catch(n){var e,t;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"\u83b7\u53d6\u901a\u77e5\u8bbe\u7f6e\u5931\u8d25")}}async updateNotificationSettings(e){try{return(await zt.default.put("/notifications",e)).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u66f4\u65b0\u901a\u77e5\u8bbe\u7f6e\u5931\u8d25")}}async deleteAccount(e){try{return(await zt.default.delete("/settings/account",{data:e})).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u5220\u9664\u8d26\u6237\u5931\u8d25")}}async getEmailConfig(){try{var e;return(null===(e=(await zt.default.get("/email-config")).data)||void 0===e?void 0:e.data)||null}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u83b7\u53d6\u90ae\u4ef6\u914d\u7f6e\u5931\u8d25")}}async saveEmailConfig(e){try{var t;return(null===(t=(await zt.default.put("/email-config",e)).data)||void 0===t?void 0:t.data)||null}catch(i){var n,r;throw new Error((null===(n=i.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"\u4fdd\u5b58\u90ae\u4ef6\u914d\u7f6e\u5931\u8d25")}}async verifyEmailConfig(e){try{return(await zt.default.post("/email-config/verify",e)).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u9a8c\u8bc1\u90ae\u4ef6\u914d\u7f6e\u5931\u8d25")}}},bn=(0,i.createContext)();function wn(e){let{children:t}=e;const[n,r]=(0,i.useState)(null),[s,a]=(0,i.useState)([]),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(null),{user:u,isAuthenticated:h}=mn(),p=(0,i.useCallback)(async()=>{if(h&&u)try{l(!0);const e=await xn.getProfile();r(e),d(null)}catch(c){console.error("Error loading user profile:",c),d(c.message)}finally{l(!1)}},[h,u]),m=(0,i.useCallback)(async()=>{if(h&&u)try{l(!0);const e=await Ut.getClients();a(Array.isArray(e)?e:[]),d(null)}catch(c){console.error("Failed to load clients:",c),d(c.message)}finally{l(!1)}},[h,u]),f=async e=>{try{l(!0);const t=await Ut.createClient(e);return a(e=>[...e,t]),d(null),t}catch(c){throw console.error("Error creating client:",c),d(c.message),c}finally{l(!1)}};(0,i.useEffect)(()=>{h&&u?(p(),m()):(r(null),a([]),d(null))},[h,u,p,m]);const g={userProfile:n,clients:s,loading:o,error:c,loadUserProfile:p,loadClients:m,updateUserProfile:async e=>{try{l(!0);const t=await xn.updateProfile(e);return r(t),d(null),t}catch(c){throw console.error("Error updating user profile:",c),d(c.message),c}finally{l(!1)}},createClient:f,updateClient:async(e,t)=>{try{l(!0);const n=await Ut.updateClient(e,t);return a(t=>t.map(t=>t.id===e?n:t)),d(null),n}catch(c){throw console.error("Error updating client:",c),d(c.message),c}finally{l(!1)}},deleteClient:async e=>{try{l(!0),await Ut.deleteClient(e),a(t=>t.filter(t=>t.id!==e)),d(null)}catch(c){throw console.error("Error deleting client:",c),d(c.message),c}finally{l(!1)}},createClientFromProfile:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!n)throw new Error("\u7528\u6237\u8d44\u6599\u672a\u52a0\u8f7d\uff0c\u8bf7\u5148\u5b8c\u5584\u4e2a\u4eba\u8d44\u6599");const t=n.firstName||"",r=n.lastName||"",i="".concat(t," ").concat(r).trim();if(!i)throw new Error("\u8bf7\u5148\u5728\u8bbe\u7f6e\u9875\u9762\u586b\u5199\u60a8\u7684\u59d3\u540d\u4fe1\u606f");const s=(0,Ne.A)({name:i,company:n.companyName||"",phone:n.phone||"",address:n.address||"",city:n.city||"",postalCode:n.postalCode||"",country:n.country||"France",vatNumber:n.vatNumber||"",siren:n.sirenNumber||n.siren||"",siret:n.siretNumber||n.siret||""},e);return await f(s)},clearError:()=>{d(null)},refresh:()=>{p(),m()}};return(0,sn.jsx)(bn.Provider,{value:g,children:t})}function jn(){const e=(0,i.useContext)(bn);if(!e)throw new Error("useUnifiedData must be used within a UnifiedDataProvider");return e}const Nn=(0,i.createContext)(),kn=()=>{const e=(0,i.useContext)(Nn);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e},An=e=>{let{children:t}=e;const{user:n,isLoading:r}=mn(),[s,a]=(0,i.useState)(null),[o,l]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null),u=(0,i.useCallback)(async()=>{if(!r&&n)try{l(!0),d(null);const e=await xn.getProfile(),t=e.Company||{},n=t.bankInfo||{},r={company:{name:t.name||e.companyName||"",address:t.address||e.address||"",city:t.city||e.city||"",postalCode:t.postalCode||e.postalCode||"",country:t.country||e.country||"",phone:t.phone||e.phone||"",email:t.email||e.email||"",vatNumber:t.vatNumber||e.vatNumber||"",siren:t.siren||e.siren||e.sirenNumber||"",siret:t.siret||e.siretNumber||"",legalForm:t.legalForm||e.legalForm||"",registeredCapital:t.capital||e.registeredCapital||"",rcsNumber:t.rcs||e.rcsNumber||"",nafCode:t.naf||e.nafCode||""},user:{firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",language:e.language||"fr",timezone:e.timezone||"Europe/Paris"},bank:{iban:n.iban||e.bankIBAN||"",bic:n.bic||e.bankBIC||"",bankName:n.bankName||e.bankName||"",accountHolder:n.accountHolder||e.accountHolder||""}};if(a(r),localStorage.setItem("unifiedSettings",JSON.stringify(r)),"France"===e.country||e.vatNumber){const t={sellerCompanyName:e.companyName||"",sellerAddress:"".concat(e.address||""," ").concat(e.city||""," ").concat(e.postalCode||"").trim(),sellerVATNumber:e.vatNumber||"",sellerSIREN:e.sirenNumber||e.siren||"",sellerSIRET:e.siretNumber||"",sellerLegalForm:e.legalForm||"",sellerRegisteredCapital:e.registeredCapital||"",sellerRcsNumber:e.rcsNumber||"",sellerNafCode:e.nafCode||""};localStorage.setItem("frenchCompanySettings",JSON.stringify(t))}}catch(c){console.error("\u52a0\u8f7d\u8bbe\u7f6e\u5931\u8d25:",c),d(c.message);try{const e=localStorage.getItem("unifiedSettings");e&&a(JSON.parse(e))}catch(e){console.error("\u4ecelocalStorage\u6062\u590d\u8bbe\u7f6e\u5931\u8d25:",e)}}finally{l(!1)}},[n,r]),h=(0,i.useCallback)(async e=>{try{var t,n,r,i,o,u,h,p,m,f,g,v,y,x,b,w,j,N,k,A,S,_,C,E,P,T,M,D,O,R,I,L,F,B,z,W,U,V,H,q,G,K;l(!0),d(null);const c={firstName:(null===(t=e.user)||void 0===t?void 0:t.firstName)||(null===s||void 0===s||null===(n=s.user)||void 0===n?void 0:n.firstName)||"",lastName:(null===(r=e.user)||void 0===r?void 0:r.lastName)||(null===s||void 0===s||null===(i=s.user)||void 0===i?void 0:i.lastName)||"",companyName:(null===(o=e.company)||void 0===o?void 0:o.name)||(null===s||void 0===s||null===(u=s.company)||void 0===u?void 0:u.name)||"",phone:(null===(h=e.company)||void 0===h?void 0:h.phone)||(null===s||void 0===s||null===(p=s.company)||void 0===p?void 0:p.phone)||"",address:(null===(m=e.company)||void 0===m?void 0:m.address)||(null===s||void 0===s||null===(f=s.company)||void 0===f?void 0:f.address)||"",city:(null===(g=e.company)||void 0===g?void 0:g.city)||(null===s||void 0===s||null===(v=s.company)||void 0===v?void 0:v.city)||"",postalCode:(null===(y=e.company)||void 0===y?void 0:y.postalCode)||(null===s||void 0===s||null===(x=s.company)||void 0===x?void 0:x.postalCode)||"",country:(null===(b=e.company)||void 0===b?void 0:b.country)||(null===s||void 0===s||null===(w=s.company)||void 0===w?void 0:w.country)||"",vatNumber:(null===(j=e.company)||void 0===j?void 0:j.vatNumber)||(null===s||void 0===s||null===(N=s.company)||void 0===N?void 0:N.vatNumber)||"",sirenNumber:(null===(k=e.company)||void 0===k?void 0:k.siren)||(null===s||void 0===s||null===(A=s.company)||void 0===A?void 0:A.siren)||"",siretNumber:(null===(S=e.company)||void 0===S?void 0:S.siret)||(null===s||void 0===s||null===(_=s.company)||void 0===_?void 0:_.siret)||"",rcsNumber:(null===(C=e.company)||void 0===C?void 0:C.rcsNumber)||(null===s||void 0===s||null===(E=s.company)||void 0===E?void 0:E.rcsNumber)||"",nafCode:(null===(P=e.company)||void 0===P?void 0:P.nafCode)||(null===s||void 0===s||null===(T=s.company)||void 0===T?void 0:T.nafCode)||"",legalForm:(null===(M=e.company)||void 0===M?void 0:M.legalForm)||(null===s||void 0===s||null===(D=s.company)||void 0===D?void 0:D.legalForm)||"",registeredCapital:(null===(O=e.company)||void 0===O?void 0:O.registeredCapital)||(null===s||void 0===s||null===(R=s.company)||void 0===R?void 0:R.registeredCapital)||"",language:(null===(I=e.user)||void 0===I?void 0:I.language)||(null===s||void 0===s||null===(L=s.user)||void 0===L?void 0:L.language)||"fr",timezone:(null===(F=e.user)||void 0===F?void 0:F.timezone)||(null===s||void 0===s||null===(B=s.user)||void 0===B?void 0:B.timezone)||"Europe/Paris",bankIBAN:(null===(z=e.bank)||void 0===z?void 0:z.iban)||(null===s||void 0===s||null===(W=s.bank)||void 0===W?void 0:W.iban)||"",bankBIC:(null===(U=e.bank)||void 0===U?void 0:U.bic)||(null===s||void 0===s||null===(V=s.bank)||void 0===V?void 0:V.bic)||"",bankName:(null===(H=e.bank)||void 0===H?void 0:H.bankName)||(null===s||void 0===s||null===(q=s.bank)||void 0===q?void 0:q.bankName)||"",accountHolder:(null===(G=e.bank)||void 0===G?void 0:G.accountHolder)||(null===s||void 0===s||null===(K=s.bank)||void 0===K?void 0:K.accountHolder)||""},Y=await xn.updateProfile(c),X={company:{name:Y.companyName||"",address:Y.address||"",city:Y.city||"",postalCode:Y.postalCode||"",country:Y.country||"",phone:Y.phone||"",email:Y.email||"",vatNumber:Y.vatNumber||"",siren:Y.siren||Y.sirenNumber||"",siret:Y.siretNumber||"",rcsNumber:Y.rcsNumber||"",nafCode:Y.nafCode||"",legalForm:Y.legalForm||"",registeredCapital:Y.registeredCapital||""},user:{firstName:Y.firstName||"",lastName:Y.lastName||"",email:Y.email||"",language:Y.language||"fr",timezone:Y.timezone||"Europe/Paris"},bank:{iban:Y.bankIBAN||Y.iban||"",bic:Y.bankBIC||Y.bic||"",bankName:Y.bankName||"",accountHolder:Y.accountHolder||""}};if(a(X),localStorage.setItem("unifiedSettings",JSON.stringify(X)),"France"===Y.country||Y.vatNumber){const e={sellerCompanyName:Y.companyName||"",sellerAddress:"".concat(Y.address||""," ").concat(Y.city||""," ").concat(Y.postalCode||"").trim(),sellerVATNumber:Y.vatNumber||"",sellerSIREN:Y.siren||Y.sirenNumber||"",sellerSIRET:Y.siretNumber||"",sellerLegalForm:Y.legalForm||"",sellerRegisteredCapital:Y.registeredCapital||"",sellerRcsNumber:Y.rcsNumber||"",sellerNafCode:Y.nafCode||""};localStorage.setItem("frenchCompanySettings",JSON.stringify(e))}return{success:!0,data:X}}catch(c){return console.error("\u66f4\u65b0\u8bbe\u7f6e\u5931\u8d25:",c),d(c.message),{success:!1,error:c.message}}finally{l(!1)}},[s]),p=(0,i.useCallback)(()=>{if(null===s||void 0===s||!s.company){try{const e=localStorage.getItem("unifiedSettings");if(e){return JSON.parse(e).company||{}}}catch(c){console.error("\u4ecelocalStorage\u83b7\u53d6\u516c\u53f8\u8bbe\u7f6e\u5931\u8d25:",c)}return{}}return s.company},[s]);(0,i.useEffect)(()=>{u()},[u]),(0,i.useEffect)(()=>{n&&!r&&u()},[n,r,u]);const m={settings:s,loading:o,error:c,loadSettings:u,updateSettings:h,getCompanySettings:p};return(0,sn.jsx)(Nn.Provider,{value:m,children:t})},Sn=e=>"string"===typeof e,_n=()=>{let e,t;const n=new Promise((n,r)=>{e=n,t=r});return n.resolve=e,n.reject=t,n},Cn=e=>null==e?"":""+e,En=/###/g,Pn=e=>e&&e.indexOf("###")>-1?e.replace(En,"."):e,Tn=e=>!e||Sn(e),Mn=(e,t,n)=>{const r=Sn(t)?t.split("."):t;let i=0;for(;i<r.length-1;){if(Tn(e))return{};const t=Pn(r[i]);!e[t]&&n&&(e[t]=new n),e=Object.prototype.hasOwnProperty.call(e,t)?e[t]:{},++i}return Tn(e)?{}:{obj:e,k:Pn(r[i])}},Dn=(e,t,n)=>{const{obj:r,k:i}=Mn(e,t,Object);if(void 0!==r||1===t.length)return void(r[i]=n);let s=t[t.length-1],a=t.slice(0,t.length-1),o=Mn(e,a,Object);for(;void 0===o.obj&&a.length;)s="".concat(a[a.length-1],".").concat(s),a=a.slice(0,a.length-1),o=Mn(e,a,Object),o&&o.obj&&"undefined"!==typeof o.obj["".concat(o.k,".").concat(s)]&&(o.obj=void 0);o.obj["".concat(o.k,".").concat(s)]=n},On=(e,t)=>{const{obj:n,k:r}=Mn(e,t);if(n)return n[r]},Rn=(e,t,n)=>{for(const r in t)"__proto__"!==r&&"constructor"!==r&&(r in e?Sn(e[r])||e[r]instanceof String||Sn(t[r])||t[r]instanceof String?n&&(e[r]=t[r]):Rn(e[r],t[r],n):e[r]=t[r]);return e},In=e=>e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&");var Ln={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};const Fn=e=>Sn(e)?e.replace(/[&<>"'\/]/g,e=>Ln[e]):e;const Bn=[" ",",","?","!",";"],zn=new class{constructor(e){this.capacity=e,this.regExpMap=new Map,this.regExpQueue=[]}getRegExp(e){const t=this.regExpMap.get(e);if(void 0!==t)return t;const n=new RegExp(e);return this.regExpQueue.length===this.capacity&&this.regExpMap.delete(this.regExpQueue.shift()),this.regExpMap.set(e,n),this.regExpQueue.push(e),n}}(20),Wn=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".";if(!e)return;if(e[t])return e[t];const r=t.split(n);let i=e;for(let s=0;s<r.length;){if(!i||"object"!==typeof i)return;let e,t="";for(let a=s;a<r.length;++a)if(a!==s&&(t+=n),t+=r[a],e=i[t],void 0!==e){if(["string","number","boolean"].indexOf(typeof e)>-1&&a<r.length-1)continue;s+=a-s+1;break}i=e}return i},Un=e=>e&&e.replace("_","-"),Vn={type:"logger",log(e){this.output("log",e)},warn(e){this.output("warn",e)},error(e){this.output("error",e)},output(e,t){console&&console[e]&&console[e].apply(console,t)}};class Hn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.init(e,t)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.prefix=t.prefix||"i18next:",this.logger=e||Vn,this.options=t,this.debug=t.debug}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"log","",!0)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","",!0)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"error","")}deprecate(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.forward(t,"warn","WARNING DEPRECATED: ",!0)}forward(e,t,n,r){return r&&!this.debug?null:(Sn(e[0])&&(e[0]="".concat(n).concat(this.prefix," ").concat(e[0])),this.logger[t](e))}create(e){return new Hn(this.logger,(0,Ne.A)((0,Ne.A)({},{prefix:"".concat(this.prefix,":").concat(e,":")}),this.options))}clone(e){return(e=e||this.options).prefix=e.prefix||this.prefix,new Hn(this.logger,e)}}var qn=new Hn;class Gn{constructor(){this.observers={}}on(e,t){return e.split(" ").forEach(e=>{this.observers[e]||(this.observers[e]=new Map);const n=this.observers[e].get(t)||0;this.observers[e].set(t,n+1)}),this}off(e,t){this.observers[e]&&(t?this.observers[e].delete(t):delete this.observers[e])}emit(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(this.observers[e]){Array.from(this.observers[e].entries()).forEach(e=>{let[t,r]=e;for(let i=0;i<r;i++)t(...n)})}if(this.observers["*"]){Array.from(this.observers["*"].entries()).forEach(t=>{let[r,i]=t;for(let s=0;s<i;s++)r.apply(r,[e,...n])})}}}class Kn extends Gn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{ns:["translation"],defaultNS:"translation"};super(),this.data=e||{},this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),void 0===this.options.ignoreJSONStructure&&(this.options.ignoreJSONStructure=!0)}addNamespaces(e){this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}removeNamespaces(e){const t=this.options.ns.indexOf(e);t>-1&&this.options.ns.splice(t,1)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=void 0!==r.keySeparator?r.keySeparator:this.options.keySeparator,s=void 0!==r.ignoreJSONStructure?r.ignoreJSONStructure:this.options.ignoreJSONStructure;let a;e.indexOf(".")>-1?a=e.split("."):(a=[e,t],n&&(Array.isArray(n)?a.push(...n):Sn(n)&&i?a.push(...n.split(i)):a.push(n)));const o=On(this.data,a);return!o&&!t&&!n&&e.indexOf(".")>-1&&(e=a[0],t=a[1],n=a.slice(2).join(".")),!o&&s&&Sn(n)?Wn(this.data&&this.data[e]&&this.data[e][t],n,i):o}addResource(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{silent:!1};const s=void 0!==i.keySeparator?i.keySeparator:this.options.keySeparator;let a=[e,t];n&&(a=a.concat(s?n.split(s):n)),e.indexOf(".")>-1&&(a=e.split("."),r=t,t=a[1]),this.addNamespaces(t),Dn(this.data,a,r),i.silent||this.emit("added",e,t,n,r)}addResources(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{silent:!1};for(const i in n)(Sn(n[i])||Array.isArray(n[i]))&&this.addResource(e,t,i,n[i],{silent:!0});r.silent||this.emit("added",e,t,n)}addResourceBundle(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{silent:!1,skipCopy:!1},a=[e,t];e.indexOf(".")>-1&&(a=e.split("."),r=n,n=t,t=a[1]),this.addNamespaces(t);let o=On(this.data,a)||{};s.skipCopy||(n=JSON.parse(JSON.stringify(n))),r?Rn(o,n,i):o=(0,Ne.A)((0,Ne.A)({},o),n),Dn(this.data,a,o),s.silent||this.emit("added",e,t,n)}removeResourceBundle(e,t){this.hasResourceBundle(e,t)&&delete this.data[e][t],this.removeNamespaces(t),this.emit("removed",e,t)}hasResourceBundle(e,t){return void 0!==this.getResource(e,t)}getResourceBundle(e,t){return t||(t=this.options.defaultNS),"v1"===this.options.compatibilityAPI?(0,Ne.A)((0,Ne.A)({},{}),this.getResource(e,t)):this.getResource(e,t)}getDataByLanguage(e){return this.data[e]}hasLanguageSomeTranslations(e){const t=this.getDataByLanguage(e);return!!(t&&Object.keys(t)||[]).find(e=>t[e]&&Object.keys(t[e]).length>0)}toJSON(){return this.data}}var Yn={processors:{},addPostProcessor(e){this.processors[e.name]=e},handle(e,t,n,r,i){return e.forEach(e=>{this.processors[e]&&(t=this.processors[e].process(t,n,r,i))}),t}};const Xn={};class Jn extends Gn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};super(),((e,t,n)=>{e.forEach(e=>{t[e]&&(n[e]=t[e])})})(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],e,this),this.options=t,void 0===this.options.keySeparator&&(this.options.keySeparator="."),this.logger=qn.create("translator")}changeLanguage(e){e&&(this.language=e)}exists(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};if(void 0===e||null===e)return!1;const n=this.resolve(e,t);return n&&void 0!==n.res}extractFromKey(e,t){let n=void 0!==t.nsSeparator?t.nsSeparator:this.options.nsSeparator;void 0===n&&(n=":");const r=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator;let i=t.ns||this.options.defaultNS||[];const s=n&&e.indexOf(n)>-1,a=!this.options.userDefinedKeySeparator&&!t.keySeparator&&!this.options.userDefinedNsSeparator&&!t.nsSeparator&&!((e,t,n)=>{t=t||"",n=n||"";const r=Bn.filter(e=>t.indexOf(e)<0&&n.indexOf(e)<0);if(0===r.length)return!0;const i=zn.getRegExp("(".concat(r.map(e=>"?"===e?"\\?":e).join("|"),")"));let s=!i.test(e);if(!s){const t=e.indexOf(n);t>0&&!i.test(e.substring(0,t))&&(s=!0)}return s})(e,n,r);if(s&&!a){const t=e.match(this.interpolator.nestingRegexp);if(t&&t.length>0)return{key:e,namespaces:Sn(i)?[i]:i};const s=e.split(n);(n!==r||n===r&&this.options.ns.indexOf(s[0])>-1)&&(i=s.shift()),e=s.join(r)}return{key:e,namespaces:Sn(i)?[i]:i}}translate(e,t,n){if("object"!==typeof t&&this.options.overloadTranslationOptionHandler&&(t=this.options.overloadTranslationOptionHandler(arguments)),"object"===typeof t&&(t=(0,Ne.A)({},t)),t||(t={}),void 0===e||null===e)return"";Array.isArray(e)||(e=[String(e)]);const r=void 0!==t.returnDetails?t.returnDetails:this.options.returnDetails,i=void 0!==t.keySeparator?t.keySeparator:this.options.keySeparator,{key:s,namespaces:a}=this.extractFromKey(e[e.length-1],t),o=a[a.length-1],l=t.lng||this.language,c=t.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(l&&"cimode"===l.toLowerCase()){if(c){const e=t.nsSeparator||this.options.nsSeparator;return r?{res:"".concat(o).concat(e).concat(s),usedKey:s,exactUsedKey:s,usedLng:l,usedNS:o,usedParams:this.getUsedParamsDetails(t)}:"".concat(o).concat(e).concat(s)}return r?{res:s,usedKey:s,exactUsedKey:s,usedLng:l,usedNS:o,usedParams:this.getUsedParamsDetails(t)}:s}const d=this.resolve(e,t);let u=d&&d.res;const h=d&&d.usedKey||s,p=d&&d.exactUsedKey||s,m=Object.prototype.toString.apply(u),f=void 0!==t.joinArrays?t.joinArrays:this.options.joinArrays,g=!this.i18nFormat||this.i18nFormat.handleAsObject,v=!Sn(u)&&"boolean"!==typeof u&&"number"!==typeof u;if(!(g&&u&&v&&["[object Number]","[object Function]","[object RegExp]"].indexOf(m)<0)||Sn(f)&&Array.isArray(u))if(g&&Sn(f)&&Array.isArray(u))u=u.join(f),u&&(u=this.extendTranslation(u,e,t,n));else{let r=!1,a=!1;const c=void 0!==t.count&&!Sn(t.count),h=Jn.hasDefaultValue(t),p=c?this.pluralResolver.getSuffix(l,t.count,t):"",m=t.ordinal&&c?this.pluralResolver.getSuffix(l,t.count,{ordinal:!1}):"",f=c&&!t.ordinal&&0===t.count&&this.pluralResolver.shouldUseIntlApi(),g=f&&t["defaultValue".concat(this.options.pluralSeparator,"zero")]||t["defaultValue".concat(p)]||t["defaultValue".concat(m)]||t.defaultValue;!this.isValidLookup(u)&&h&&(r=!0,u=g),this.isValidLookup(u)||(a=!0,u=s);const v=(t.missingKeyNoValueFallbackToKey||this.options.missingKeyNoValueFallbackToKey)&&a?void 0:u,y=h&&g!==u&&this.options.updateMissing;if(a||r||y){if(this.logger.log(y?"updateKey":"missingKey",l,o,s,y?g:u),i){const e=this.resolve(s,(0,Ne.A)((0,Ne.A)({},t),{},{keySeparator:!1}));e&&e.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")}let e=[];const n=this.languageUtils.getFallbackCodes(this.options.fallbackLng,t.lng||this.language);if("fallback"===this.options.saveMissingTo&&n&&n[0])for(let t=0;t<n.length;t++)e.push(n[t]);else"all"===this.options.saveMissingTo?e=this.languageUtils.toResolveHierarchy(t.lng||this.language):e.push(t.lng||this.language);const r=(e,n,r)=>{const i=h&&r!==u?r:v;this.options.missingKeyHandler?this.options.missingKeyHandler(e,o,n,i,y,t):this.backendConnector&&this.backendConnector.saveMissing&&this.backendConnector.saveMissing(e,o,n,i,y,t),this.emit("missingKey",e,o,n,u)};this.options.saveMissing&&(this.options.saveMissingPlurals&&c?e.forEach(e=>{const n=this.pluralResolver.getSuffixes(e,t);f&&t["defaultValue".concat(this.options.pluralSeparator,"zero")]&&n.indexOf("".concat(this.options.pluralSeparator,"zero"))<0&&n.push("".concat(this.options.pluralSeparator,"zero")),n.forEach(n=>{r([e],s+n,t["defaultValue".concat(n)]||g)})}):r(e,s,g))}u=this.extendTranslation(u,e,t,d,n),a&&u===s&&this.options.appendNamespaceToMissingKey&&(u="".concat(o,":").concat(s)),(a||r)&&this.options.parseMissingKeyHandler&&(u="v1"!==this.options.compatibilityAPI?this.options.parseMissingKeyHandler(this.options.appendNamespaceToMissingKey?"".concat(o,":").concat(s):s,r?u:void 0):this.options.parseMissingKeyHandler(u))}else{if(!t.returnObjects&&!this.options.returnObjects){this.options.returnedObjectHandler||this.logger.warn("accessing an object - but returnObjects options is not enabled!");const e=this.options.returnedObjectHandler?this.options.returnedObjectHandler(h,u,(0,Ne.A)((0,Ne.A)({},t),{},{ns:a})):"key '".concat(s," (").concat(this.language,")' returned an object instead of string.");return r?(d.res=e,d.usedParams=this.getUsedParamsDetails(t),d):e}if(i){const e=Array.isArray(u),n=e?[]:{},r=e?p:h;for(const s in u)if(Object.prototype.hasOwnProperty.call(u,s)){const e="".concat(r).concat(i).concat(s);n[s]=this.translate(e,(0,Ne.A)((0,Ne.A)({},t),{joinArrays:!1,ns:a})),n[s]===e&&(n[s]=u[s])}u=n}}return r?(d.res=u,d.usedParams=this.getUsedParamsDetails(t),d):u}extendTranslation(e,t,n,r,i){var s=this;if(this.i18nFormat&&this.i18nFormat.parse)e=this.i18nFormat.parse(e,(0,Ne.A)((0,Ne.A)({},this.options.interpolation.defaultVariables),n),n.lng||this.language||r.usedLng,r.usedNS,r.usedKey,{resolved:r});else if(!n.skipInterpolation){n.interpolation&&this.interpolator.init((0,Ne.A)((0,Ne.A)({},n),{interpolation:(0,Ne.A)((0,Ne.A)({},this.options.interpolation),n.interpolation)}));const a=Sn(e)&&(n&&n.interpolation&&void 0!==n.interpolation.skipOnVariables?n.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables);let o;if(a){const t=e.match(this.interpolator.nestingRegexp);o=t&&t.length}let l=n.replace&&!Sn(n.replace)?n.replace:n;if(this.options.interpolation.defaultVariables&&(l=(0,Ne.A)((0,Ne.A)({},this.options.interpolation.defaultVariables),l)),e=this.interpolator.interpolate(e,l,n.lng||this.language||r.usedLng,n),a){const t=e.match(this.interpolator.nestingRegexp);o<(t&&t.length)&&(n.nest=!1)}!n.lng&&"v1"!==this.options.compatibilityAPI&&r&&r.res&&(n.lng=this.language||r.usedLng),!1!==n.nest&&(e=this.interpolator.nest(e,function(){for(var e=arguments.length,r=new Array(e),a=0;a<e;a++)r[a]=arguments[a];return i&&i[0]===r[0]&&!n.context?(s.logger.warn("It seems you are nesting recursively key: ".concat(r[0]," in key: ").concat(t[0])),null):s.translate(...r,t)},n)),n.interpolation&&this.interpolator.reset()}const a=n.postProcess||this.options.postProcess,o=Sn(a)?[a]:a;return void 0!==e&&null!==e&&o&&o.length&&!1!==n.applyPostProcessor&&(e=Yn.handle(o,e,t,this.options&&this.options.postProcessPassResolved?(0,Ne.A)({i18nResolved:(0,Ne.A)((0,Ne.A)({},r),{},{usedParams:this.getUsedParamsDetails(n)})},n):n,this)),e}resolve(e){let t,n,r,i,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Sn(e)&&(e=[e]),e.forEach(e=>{if(this.isValidLookup(t))return;const o=this.extractFromKey(e,a),l=o.key;n=l;let c=o.namespaces;this.options.fallbackNS&&(c=c.concat(this.options.fallbackNS));const d=void 0!==a.count&&!Sn(a.count),u=d&&!a.ordinal&&0===a.count&&this.pluralResolver.shouldUseIntlApi(),h=void 0!==a.context&&(Sn(a.context)||"number"===typeof a.context)&&""!==a.context,p=a.lngs?a.lngs:this.languageUtils.toResolveHierarchy(a.lng||this.language,a.fallbackLng);c.forEach(e=>{this.isValidLookup(t)||(s=e,!Xn["".concat(p[0],"-").concat(e)]&&this.utils&&this.utils.hasLoadedNamespace&&!this.utils.hasLoadedNamespace(s)&&(Xn["".concat(p[0],"-").concat(e)]=!0,this.logger.warn('key "'.concat(n,'" for languages "').concat(p.join(", "),'" won\'t get resolved as namespace "').concat(s,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),p.forEach(n=>{if(this.isValidLookup(t))return;i=n;const s=[l];if(this.i18nFormat&&this.i18nFormat.addLookupKeys)this.i18nFormat.addLookupKeys(s,l,n,e,a);else{let e;d&&(e=this.pluralResolver.getSuffix(n,a.count,a));const t="".concat(this.options.pluralSeparator,"zero"),r="".concat(this.options.pluralSeparator,"ordinal").concat(this.options.pluralSeparator);if(d&&(s.push(l+e),a.ordinal&&0===e.indexOf(r)&&s.push(l+e.replace(r,this.options.pluralSeparator)),u&&s.push(l+t)),h){const n="".concat(l).concat(this.options.contextSeparator).concat(a.context);s.push(n),d&&(s.push(n+e),a.ordinal&&0===e.indexOf(r)&&s.push(n+e.replace(r,this.options.pluralSeparator)),u&&s.push(n+t))}}let o;for(;o=s.pop();)this.isValidLookup(t)||(r=o,t=this.getResource(n,e,o,a))}))})}),{res:t,usedKey:n,exactUsedKey:r,usedLng:i,usedNS:s}}isValidLookup(e){return void 0!==e&&!(!this.options.returnNull&&null===e)&&!(!this.options.returnEmptyString&&""===e)}getResource(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(e,t,n,r):this.resourceStore.getResource(e,t,n,r)}getUsedParamsDetails(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=["defaultValue","ordinal","context","replace","lng","lngs","fallbackLng","ns","keySeparator","nsSeparator","returnObjects","returnDetails","joinArrays","postProcess","interpolation"],n=e.replace&&!Sn(e.replace);let r=n?e.replace:e;if(n&&"undefined"!==typeof e.count&&(r.count=e.count),this.options.interpolation.defaultVariables&&(r=(0,Ne.A)((0,Ne.A)({},this.options.interpolation.defaultVariables),r)),!n){r=(0,Ne.A)({},r);for(const e of t)delete r[e]}return r}static hasDefaultValue(e){const t="defaultValue";for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&t===n.substring(0,12)&&void 0!==e[n])return!0;return!1}}const $n=e=>e.charAt(0).toUpperCase()+e.slice(1);class Qn{constructor(e){this.options=e,this.supportedLngs=this.options.supportedLngs||!1,this.logger=qn.create("languageUtils")}getScriptPartFromCode(e){if(!(e=Un(e))||e.indexOf("-")<0)return null;const t=e.split("-");return 2===t.length?null:(t.pop(),"x"===t[t.length-1].toLowerCase()?null:this.formatLanguageCode(t.join("-")))}getLanguagePartFromCode(e){if(!(e=Un(e))||e.indexOf("-")<0)return e;const t=e.split("-");return this.formatLanguageCode(t[0])}formatLanguageCode(e){if(Sn(e)&&e.indexOf("-")>-1){if("undefined"!==typeof Intl&&"undefined"!==typeof Intl.getCanonicalLocales)try{let t=Intl.getCanonicalLocales(e)[0];if(t&&this.options.lowerCaseLng&&(t=t.toLowerCase()),t)return t}catch(Ae){}const t=["hans","hant","latn","cyrl","cans","mong","arab"];let n=e.split("-");return this.options.lowerCaseLng?n=n.map(e=>e.toLowerCase()):2===n.length?(n[0]=n[0].toLowerCase(),n[1]=n[1].toUpperCase(),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=$n(n[1].toLowerCase()))):3===n.length&&(n[0]=n[0].toLowerCase(),2===n[1].length&&(n[1]=n[1].toUpperCase()),"sgn"!==n[0]&&2===n[2].length&&(n[2]=n[2].toUpperCase()),t.indexOf(n[1].toLowerCase())>-1&&(n[1]=$n(n[1].toLowerCase())),t.indexOf(n[2].toLowerCase())>-1&&(n[2]=$n(n[2].toLowerCase()))),n.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?e.toLowerCase():e}isSupportedCode(e){return("languageOnly"===this.options.load||this.options.nonExplicitSupportedLngs)&&(e=this.getLanguagePartFromCode(e)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(e)>-1}getBestMatchFromCodes(e){if(!e)return null;let t;return e.forEach(e=>{if(t)return;const n=this.formatLanguageCode(e);this.options.supportedLngs&&!this.isSupportedCode(n)||(t=n)}),!t&&this.options.supportedLngs&&e.forEach(e=>{if(t)return;const n=this.getLanguagePartFromCode(e);if(this.isSupportedCode(n))return t=n;t=this.options.supportedLngs.find(e=>e===n?e:e.indexOf("-")<0&&n.indexOf("-")<0?void 0:e.indexOf("-")>0&&n.indexOf("-")<0&&e.substring(0,e.indexOf("-"))===n||0===e.indexOf(n)&&n.length>1?e:void 0)}),t||(t=this.getFallbackCodes(this.options.fallbackLng)[0]),t}getFallbackCodes(e,t){if(!e)return[];if("function"===typeof e&&(e=e(t)),Sn(e)&&(e=[e]),Array.isArray(e))return e;if(!t)return e.default||[];let n=e[t];return n||(n=e[this.getScriptPartFromCode(t)]),n||(n=e[this.formatLanguageCode(t)]),n||(n=e[this.getLanguagePartFromCode(t)]),n||(n=e.default),n||[]}toResolveHierarchy(e,t){const n=this.getFallbackCodes(t||this.options.fallbackLng||[],e),r=[],i=e=>{e&&(this.isSupportedCode(e)?r.push(e):this.logger.warn("rejecting language code not found in supportedLngs: ".concat(e)))};return Sn(e)&&(e.indexOf("-")>-1||e.indexOf("_")>-1)?("languageOnly"!==this.options.load&&i(this.formatLanguageCode(e)),"languageOnly"!==this.options.load&&"currentOnly"!==this.options.load&&i(this.getScriptPartFromCode(e)),"currentOnly"!==this.options.load&&i(this.getLanguagePartFromCode(e))):Sn(e)&&i(this.formatLanguageCode(e)),n.forEach(e=>{r.indexOf(e)<0&&i(this.formatLanguageCode(e))}),r}}let Zn=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","tl","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kk","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],er={1:e=>Number(e>1),2:e=>Number(1!=e),3:e=>0,4:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),5:e=>Number(0==e?0:1==e?1:2==e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5),6:e=>Number(1==e?0:e>=2&&e<=4?1:2),7:e=>Number(1==e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2),8:e=>Number(1==e?0:2==e?1:8!=e&&11!=e?2:3),9:e=>Number(e>=2),10:e=>Number(1==e?0:2==e?1:e<7?2:e<11?3:4),11:e=>Number(1==e||11==e?0:2==e||12==e?1:e>2&&e<20?2:3),12:e=>Number(e%10!=1||e%100==11),13:e=>Number(0!==e),14:e=>Number(1==e?0:2==e?1:3==e?2:3),15:e=>Number(e%10==1&&e%100!=11?0:e%10>=2&&(e%100<10||e%100>=20)?1:2),16:e=>Number(e%10==1&&e%100!=11?0:0!==e?1:2),17:e=>Number(1==e||e%10==1&&e%100!=11?0:1),18:e=>Number(0==e?0:1==e?1:2),19:e=>Number(1==e?0:0==e||e%100>1&&e%100<11?1:e%100>10&&e%100<20?2:3),20:e=>Number(1==e?0:0==e||e%100>0&&e%100<20?1:2),21:e=>Number(e%100==1?1:e%100==2?2:e%100==3||e%100==4?3:0),22:e=>Number(1==e?0:2==e?1:(e<0||e>10)&&e%10==0?2:3)};const tr=["v1","v2","v3"],nr=["v4"],rr={zero:0,one:1,two:2,few:3,many:4,other:5};class ir{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.languageUtils=e,this.options=t,this.logger=qn.create("pluralResolver"),this.options.compatibilityJSON&&!nr.includes(this.options.compatibilityJSON)||"undefined"!==typeof Intl&&Intl.PluralRules||(this.options.compatibilityJSON="v3",this.logger.error("Your environment seems not to be Intl API compatible, use an Intl.PluralRules polyfill. Will fallback to the compatibilityJSON v3 format handling.")),this.rules=(()=>{const e={};return Zn.forEach(t=>{t.lngs.forEach(n=>{e[n]={numbers:t.nr,plurals:er[t.fc]}})}),e})(),this.pluralRulesCache={}}addRule(e,t){this.rules[e]=t}clearCache(){this.pluralRulesCache={}}getRule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.shouldUseIntlApi()){const r=Un("dev"===e?"en":e),i=t.ordinal?"ordinal":"cardinal",s=JSON.stringify({cleanedCode:r,type:i});if(s in this.pluralRulesCache)return this.pluralRulesCache[s];let a;try{a=new Intl.PluralRules(r,{type:i})}catch(n){if(!e.match(/-|_/))return;const r=this.languageUtils.getLanguagePartFromCode(e);a=this.getRule(r,t)}return this.pluralRulesCache[s]=a,a}return this.rules[e]||this.rules[this.languageUtils.getLanguagePartFromCode(e)]}needsPlural(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return this.shouldUseIntlApi()?n&&n.resolvedOptions().pluralCategories.length>1:n&&n.numbers.length>1}getPluralFormsOfKey(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.getSuffixes(e,n).map(e=>"".concat(t).concat(e))}getSuffixes(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=this.getRule(e,t);return n?this.shouldUseIntlApi()?n.resolvedOptions().pluralCategories.sort((e,t)=>rr[e]-rr[t]).map(e=>"".concat(this.options.prepend).concat(t.ordinal?"ordinal".concat(this.options.prepend):"").concat(e)):n.numbers.map(n=>this.getSuffix(e,n,t)):[]}getSuffix(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getRule(e,n);return r?this.shouldUseIntlApi()?"".concat(this.options.prepend).concat(n.ordinal?"ordinal".concat(this.options.prepend):"").concat(r.select(t)):this.getSuffixRetroCompatible(r,t):(this.logger.warn("no plural rule found for: ".concat(e)),"")}getSuffixRetroCompatible(e,t){const n=e.noAbs?e.plurals(t):e.plurals(Math.abs(t));let r=e.numbers[n];this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]&&(2===r?r="plural":1===r&&(r=""));const i=()=>this.options.prepend&&r.toString()?this.options.prepend+r.toString():r.toString();return"v1"===this.options.compatibilityJSON?1===r?"":"number"===typeof r?"_plural_".concat(r.toString()):i():"v2"===this.options.compatibilityJSON||this.options.simplifyPluralSuffix&&2===e.numbers.length&&1===e.numbers[0]?i():this.options.prepend&&n.toString()?this.options.prepend+n.toString():n.toString()}shouldUseIntlApi(){return!tr.includes(this.options.compatibilityJSON)}}const sr=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:".",i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],s=((e,t,n)=>{const r=On(e,n);return void 0!==r?r:On(t,n)})(e,t,n);return!s&&i&&Sn(n)&&(s=Wn(e,n,r),void 0===s&&(s=Wn(t,n,r))),s},ar=e=>e.replace(/\$/g,"$$$$");class or{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=qn.create("interpolator"),this.options=e,this.format=e.interpolation&&e.interpolation.format||(e=>e),this.init(e)}init(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.interpolation||(e.interpolation={escapeValue:!0});const{escape:t,escapeValue:n,useRawValueToEscape:r,prefix:i,prefixEscaped:s,suffix:a,suffixEscaped:o,formatSeparator:l,unescapeSuffix:c,unescapePrefix:d,nestingPrefix:u,nestingPrefixEscaped:h,nestingSuffix:p,nestingSuffixEscaped:m,nestingOptionsSeparator:f,maxReplaces:g,alwaysFormat:v}=e.interpolation;this.escape=void 0!==t?t:Fn,this.escapeValue=void 0===n||n,this.useRawValueToEscape=void 0!==r&&r,this.prefix=i?In(i):s||"{{",this.suffix=a?In(a):o||"}}",this.formatSeparator=l||",",this.unescapePrefix=c?"":d||"-",this.unescapeSuffix=this.unescapePrefix?"":c||"",this.nestingPrefix=u?In(u):h||In("$t("),this.nestingSuffix=p?In(p):m||In(")"),this.nestingOptionsSeparator=f||",",this.maxReplaces=g||1e3,this.alwaysFormat=void 0!==v&&v,this.resetRegExp()}reset(){this.options&&this.init(this.options)}resetRegExp(){const e=(e,t)=>e&&e.source===t?(e.lastIndex=0,e):new RegExp(t,"g");this.regexp=e(this.regexp,"".concat(this.prefix,"(.+?)").concat(this.suffix)),this.regexpUnescape=e(this.regexpUnescape,"".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix)),this.nestingRegexp=e(this.nestingRegexp,"".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix))}interpolate(e,t,n,r){let i,s,a;const o=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},l=e=>{if(e.indexOf(this.formatSeparator)<0){const i=sr(t,o,e,this.options.keySeparator,this.options.ignoreJSONStructure);return this.alwaysFormat?this.format(i,void 0,n,(0,Ne.A)((0,Ne.A)((0,Ne.A)({},r),t),{},{interpolationkey:e})):i}const i=e.split(this.formatSeparator),s=i.shift().trim(),a=i.join(this.formatSeparator).trim();return this.format(sr(t,o,s,this.options.keySeparator,this.options.ignoreJSONStructure),a,n,(0,Ne.A)((0,Ne.A)((0,Ne.A)({},r),t),{},{interpolationkey:s}))};this.resetRegExp();const c=r&&r.missingInterpolationHandler||this.options.missingInterpolationHandler,d=r&&r.interpolation&&void 0!==r.interpolation.skipOnVariables?r.interpolation.skipOnVariables:this.options.interpolation.skipOnVariables;return[{regex:this.regexpUnescape,safeValue:e=>ar(e)},{regex:this.regexp,safeValue:e=>this.escapeValue?ar(this.escape(e)):ar(e)}].forEach(t=>{for(a=0;i=t.regex.exec(e);){const n=i[1].trim();if(s=l(n),void 0===s)if("function"===typeof c){const t=c(e,i,r);s=Sn(t)?t:""}else if(r&&Object.prototype.hasOwnProperty.call(r,n))s="";else{if(d){s=i[0];continue}this.logger.warn("missed to pass in variable ".concat(n," for interpolating ").concat(e)),s=""}else Sn(s)||this.useRawValueToEscape||(s=Cn(s));const o=t.safeValue(s);if(e=e.replace(i[0],o),d?(t.regex.lastIndex+=s.length,t.regex.lastIndex-=i[0].length):t.regex.lastIndex=0,a++,a>=this.maxReplaces)break}}),e}nest(e,t){let n,r,i,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=(e,t)=>{const n=this.nestingOptionsSeparator;if(e.indexOf(n)<0)return e;const r=e.split(new RegExp("".concat(n,"[ ]*{")));let s="{".concat(r[1]);e=r[0],s=this.interpolate(s,i);const a=s.match(/'/g),o=s.match(/"/g);(a&&a.length%2===0&&!o||o.length%2!==0)&&(s=s.replace(/'/g,'"'));try{i=JSON.parse(s),t&&(i=(0,Ne.A)((0,Ne.A)({},t),i))}catch(Ae){return this.logger.warn("failed parsing options string in nesting for key ".concat(e),Ae),"".concat(e).concat(n).concat(s)}return i.defaultValue&&i.defaultValue.indexOf(this.prefix)>-1&&delete i.defaultValue,e};for(;n=this.nestingRegexp.exec(e);){let o=[];i=(0,Ne.A)({},s),i=i.replace&&!Sn(i.replace)?i.replace:i,i.applyPostProcessor=!1,delete i.defaultValue;let l=!1;if(-1!==n[0].indexOf(this.formatSeparator)&&!/{.*}/.test(n[1])){const e=n[1].split(this.formatSeparator).map(e=>e.trim());n[1]=e.shift(),o=e,l=!0}if(r=t(a.call(this,n[1].trim(),i),i),r&&n[0]===e&&!Sn(r))return r;Sn(r)||(r=Cn(r)),r||(this.logger.warn("missed to resolve ".concat(n[1]," for nesting ").concat(e)),r=""),l&&(r=o.reduce((e,t)=>this.format(e,t,s.lng,(0,Ne.A)((0,Ne.A)({},s),{},{interpolationkey:n[1].trim()})),r.trim())),e=e.replace(n[0],r),this.regexp.lastIndex=0}return e}}const lr=e=>{const t={};return(n,r,i)=>{let s=i;i&&i.interpolationkey&&i.formatParams&&i.formatParams[i.interpolationkey]&&i[i.interpolationkey]&&(s=(0,Ne.A)((0,Ne.A)({},s),{},{[i.interpolationkey]:void 0}));const a=r+JSON.stringify(s);let o=t[a];return o||(o=e(Un(r),i),t[a]=o),o(n)}};class cr{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.logger=qn.create("formatter"),this.options=e,this.formats={number:lr((e,t)=>{const n=new Intl.NumberFormat(e,(0,Ne.A)({},t));return e=>n.format(e)}),currency:lr((e,t)=>{const n=new Intl.NumberFormat(e,(0,Ne.A)((0,Ne.A)({},t),{},{style:"currency"}));return e=>n.format(e)}),datetime:lr((e,t)=>{const n=new Intl.DateTimeFormat(e,(0,Ne.A)({},t));return e=>n.format(e)}),relativetime:lr((e,t)=>{const n=new Intl.RelativeTimeFormat(e,(0,Ne.A)({},t));return e=>n.format(e,t.range||"day")}),list:lr((e,t)=>{const n=new Intl.ListFormat(e,(0,Ne.A)({},t));return e=>n.format(e)})},this.init(e)}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{interpolation:{}};this.formatSeparator=t.interpolation.formatSeparator||","}add(e,t){this.formats[e.toLowerCase().trim()]=t}addCached(e,t){this.formats[e.toLowerCase().trim()]=lr(t)}format(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=t.split(this.formatSeparator);if(i.length>1&&i[0].indexOf("(")>1&&i[0].indexOf(")")<0&&i.find(e=>e.indexOf(")")>-1)){const e=i.findIndex(e=>e.indexOf(")")>-1);i[0]=[i[0],...i.splice(1,e)].join(this.formatSeparator)}const s=i.reduce((e,t)=>{const{formatName:i,formatOptions:s}=(e=>{let t=e.toLowerCase().trim();const n={};if(e.indexOf("(")>-1){const r=e.split("(");t=r[0].toLowerCase().trim();const i=r[1].substring(0,r[1].length-1);"currency"===t&&i.indexOf(":")<0?n.currency||(n.currency=i.trim()):"relativetime"===t&&i.indexOf(":")<0?n.range||(n.range=i.trim()):i.split(";").forEach(e=>{if(e){const[t,...r]=e.split(":"),i=r.join(":").trim().replace(/^'+|'+$/g,""),s=t.trim();n[s]||(n[s]=i),"false"===i&&(n[s]=!1),"true"===i&&(n[s]=!0),isNaN(i)||(n[s]=parseInt(i,10))}})}return{formatName:t,formatOptions:n}})(t);if(this.formats[i]){let t=e;try{const a=r&&r.formatParams&&r.formatParams[r.interpolationkey]||{},o=a.locale||a.lng||r.locale||r.lng||n;t=this.formats[i](e,o,(0,Ne.A)((0,Ne.A)((0,Ne.A)({},s),r),a))}catch(a){this.logger.warn(a)}return t}return this.logger.warn("there was no format function for ".concat(i)),e},e);return s}}class dr extends Gn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};super(),this.backend=e,this.store=t,this.services=n,this.languageUtils=n.languageUtils,this.options=r,this.logger=qn.create("backendConnector"),this.waitingReads=[],this.maxParallelReads=r.maxParallelReads||10,this.readingCalls=0,this.maxRetries=r.maxRetries>=0?r.maxRetries:5,this.retryTimeout=r.retryTimeout>=1?r.retryTimeout:350,this.state={},this.queue=[],this.backend&&this.backend.init&&this.backend.init(n,r.backend,r)}queueLoad(e,t,n,r){const i={},s={},a={},o={};return e.forEach(e=>{let r=!0;t.forEach(t=>{const a="".concat(e,"|").concat(t);!n.reload&&this.store.hasResourceBundle(e,t)?this.state[a]=2:this.state[a]<0||(1===this.state[a]?void 0===s[a]&&(s[a]=!0):(this.state[a]=1,r=!1,void 0===s[a]&&(s[a]=!0),void 0===i[a]&&(i[a]=!0),void 0===o[t]&&(o[t]=!0)))}),r||(a[e]=!0)}),(Object.keys(i).length||Object.keys(s).length)&&this.queue.push({pending:s,pendingCount:Object.keys(s).length,loaded:{},errors:[],callback:r}),{toLoad:Object.keys(i),pending:Object.keys(s),toLoadLanguages:Object.keys(a),toLoadNamespaces:Object.keys(o)}}loaded(e,t,n){const r=e.split("|"),i=r[0],s=r[1];t&&this.emit("failedLoading",i,s,t),!t&&n&&this.store.addResourceBundle(i,s,n,void 0,void 0,{skipCopy:!0}),this.state[e]=t?-1:2,t&&n&&(this.state[e]=0);const a={};this.queue.forEach(n=>{((e,t,n)=>{const{obj:r,k:i}=Mn(e,t,Object);r[i]=r[i]||[],r[i].push(n)})(n.loaded,[i],s),((e,t)=>{void 0!==e.pending[t]&&(delete e.pending[t],e.pendingCount--)})(n,e),t&&n.errors.push(t),0!==n.pendingCount||n.done||(Object.keys(n.loaded).forEach(e=>{a[e]||(a[e]={});const t=n.loaded[e];t.length&&t.forEach(t=>{void 0===a[e][t]&&(a[e][t]=!0)})}),n.done=!0,n.errors.length?n.callback(n.errors):n.callback())}),this.emit("loaded",a),this.queue=this.queue.filter(e=>!e.done)}read(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:this.retryTimeout,s=arguments.length>5?arguments[5]:void 0;if(!e.length)return s(null,{});if(this.readingCalls>=this.maxParallelReads)return void this.waitingReads.push({lng:e,ns:t,fcName:n,tried:r,wait:i,callback:s});this.readingCalls++;const a=(a,o)=>{if(this.readingCalls--,this.waitingReads.length>0){const e=this.waitingReads.shift();this.read(e.lng,e.ns,e.fcName,e.tried,e.wait,e.callback)}a&&o&&r<this.maxRetries?setTimeout(()=>{this.read.call(this,e,t,n,r+1,2*i,s)},i):s(a,o)},o=this.backend[n].bind(this.backend);if(2!==o.length)return o(e,t,a);try{const n=o(e,t);n&&"function"===typeof n.then?n.then(e=>a(null,e)).catch(a):a(null,n)}catch(l){a(l)}}prepareLoading(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3?arguments[3]:void 0;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),r&&r();Sn(e)&&(e=this.languageUtils.toResolveHierarchy(e)),Sn(t)&&(t=[t]);const i=this.queueLoad(e,t,n,r);if(!i.toLoad.length)return i.pending.length||r(),null;i.toLoad.forEach(e=>{this.loadOne(e)})}load(e,t,n){this.prepareLoading(e,t,{},n)}reload(e,t,n){this.prepareLoading(e,t,{reload:!0},n)}loadOne(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split("|"),r=n[0],i=n[1];this.read(r,i,"read",void 0,void 0,(n,s)=>{n&&this.logger.warn("".concat(t,"loading namespace ").concat(i," for language ").concat(r," failed"),n),!n&&s&&this.logger.log("".concat(t,"loaded namespace ").concat(i," for language ").concat(r),s),this.loaded(e,n,s)})}saveMissing(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{},a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:()=>{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(t))this.logger.warn('did not save key "'.concat(n,'" as the namespace "').concat(t,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");else if(void 0!==n&&null!==n&&""!==n){if(this.backend&&this.backend.create){const l=(0,Ne.A)((0,Ne.A)({},s),{},{isUpdate:i}),c=this.backend.create.bind(this.backend);if(c.length<6)try{let i;i=5===c.length?c(e,t,n,r,l):c(e,t,n,r),i&&"function"===typeof i.then?i.then(e=>a(null,e)).catch(a):a(null,i)}catch(o){a(o)}else c(e,t,n,r,a,l)}e&&e[0]&&this.store.addResource(e[0],t,n,r)}}}const ur=()=>({debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!1,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:e=>{let t={};if("object"===typeof e[1]&&(t=e[1]),Sn(e[1])&&(t.defaultValue=e[1]),Sn(e[2])&&(t.tDescription=e[2]),"object"===typeof e[2]||"object"===typeof e[3]){const n=e[3]||e[2];Object.keys(n).forEach(e=>{t[e]=n[e]})}return t},interpolation:{escapeValue:!0,format:e=>e,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!0}}),hr=e=>(Sn(e.ns)&&(e.ns=[e.ns]),Sn(e.fallbackLng)&&(e.fallbackLng=[e.fallbackLng]),Sn(e.fallbackNS)&&(e.fallbackNS=[e.fallbackNS]),e.supportedLngs&&e.supportedLngs.indexOf("cimode")<0&&(e.supportedLngs=e.supportedLngs.concat(["cimode"])),e),pr=()=>{};class mr extends Gn{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;var n;if(super(),this.options=hr(e),this.services={},this.logger=qn,this.modules={external:[]},n=this,Object.getOwnPropertyNames(Object.getPrototypeOf(n)).forEach(e=>{"function"===typeof n[e]&&(n[e]=n[e].bind(n))}),t&&!this.isInitialized&&!e.isClone){if(!this.options.initImmediate)return this.init(e,t),this;setTimeout(()=>{this.init(e,t)},0)}}init(){var e=this;let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0;this.isInitializing=!0,"function"===typeof t&&(n=t,t={}),!t.defaultNS&&!1!==t.defaultNS&&t.ns&&(Sn(t.ns)?t.defaultNS=t.ns:t.ns.indexOf("translation")<0&&(t.defaultNS=t.ns[0]));const r=ur();this.options=(0,Ne.A)((0,Ne.A)((0,Ne.A)({},r),this.options),hr(t)),"v1"!==this.options.compatibilityAPI&&(this.options.interpolation=(0,Ne.A)((0,Ne.A)({},r.interpolation),this.options.interpolation)),void 0!==t.keySeparator&&(this.options.userDefinedKeySeparator=t.keySeparator),void 0!==t.nsSeparator&&(this.options.userDefinedNsSeparator=t.nsSeparator);const i=e=>e?"function"===typeof e?new e:e:null;if(!this.options.isClone){let t;this.modules.logger?qn.init(i(this.modules.logger),this.options):qn.init(null,this.options),this.modules.formatter?t=this.modules.formatter:"undefined"!==typeof Intl&&(t=cr);const n=new Qn(this.options);this.store=new Kn(this.options.resources,this.options);const s=this.services;s.logger=qn,s.resourceStore=this.store,s.languageUtils=n,s.pluralResolver=new ir(n,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix}),!t||this.options.interpolation.format&&this.options.interpolation.format!==r.interpolation.format||(s.formatter=i(t),s.formatter.init(s,this.options),this.options.interpolation.format=s.formatter.format.bind(s.formatter)),s.interpolator=new or(this.options),s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)},s.backendConnector=new dr(i(this.modules.backend),s.resourceStore,s,this.options),s.backendConnector.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)}),this.modules.languageDetector&&(s.languageDetector=i(this.modules.languageDetector),s.languageDetector.init&&s.languageDetector.init(s,this.options.detection,this.options)),this.modules.i18nFormat&&(s.i18nFormat=i(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this)),this.translator=new Jn(this.services,this.options),this.translator.on("*",function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];e.emit(t,...r)}),this.modules.external.forEach(e=>{e.init&&e.init(this)})}if(this.format=this.options.interpolation.format,n||(n=pr),this.options.fallbackLng&&!this.services.languageDetector&&!this.options.lng){const e=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng);e.length>0&&"dev"!==e[0]&&(this.options.lng=e[0])}this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined");["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"].forEach(t=>{this[t]=function(){return e.store[t](...arguments)}});["addResource","addResources","addResourceBundle","removeResourceBundle"].forEach(t=>{this[t]=function(){return e.store[t](...arguments),e}});const s=_n(),a=()=>{const e=(e,t)=>{this.isInitializing=!1,this.isInitialized&&!this.initializedStoreOnce&&this.logger.warn("init: i18next is already initialized. You should call init just once!"),this.isInitialized=!0,this.options.isClone||this.logger.log("initialized",this.options),this.emit("initialized",this.options),s.resolve(t),n(e,t)};if(this.languages&&"v1"!==this.options.compatibilityAPI&&!this.isInitialized)return e(null,this.t.bind(this));this.changeLanguage(this.options.lng,e)};return this.options.resources||!this.options.initImmediate?a():setTimeout(a,0),s}loadResources(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pr;const n=Sn(e)?e:this.language;if("function"===typeof e&&(t=e),!this.options.resources||this.options.partialBundledLanguages){if(n&&"cimode"===n.toLowerCase()&&(!this.options.preload||0===this.options.preload.length))return t();const e=[],r=t=>{if(!t)return;if("cimode"===t)return;this.services.languageUtils.toResolveHierarchy(t).forEach(t=>{"cimode"!==t&&e.indexOf(t)<0&&e.push(t)})};if(n)r(n);else{this.services.languageUtils.getFallbackCodes(this.options.fallbackLng).forEach(e=>r(e))}this.options.preload&&this.options.preload.forEach(e=>r(e)),this.services.backendConnector.load(e,this.options.ns,e=>{e||this.resolvedLanguage||!this.language||this.setResolvedLanguage(this.language),t(e)})}else t(null)}reloadResources(e,t,n){const r=_n();return"function"===typeof e&&(n=e,e=void 0),"function"===typeof t&&(n=t,t=void 0),e||(e=this.languages),t||(t=this.options.ns),n||(n=pr),this.services.backendConnector.reload(e,t,e=>{r.resolve(),n(e)}),r}use(e){if(!e)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!e.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return"backend"===e.type&&(this.modules.backend=e),("logger"===e.type||e.log&&e.warn&&e.error)&&(this.modules.logger=e),"languageDetector"===e.type&&(this.modules.languageDetector=e),"i18nFormat"===e.type&&(this.modules.i18nFormat=e),"postProcessor"===e.type&&Yn.addPostProcessor(e),"formatter"===e.type&&(this.modules.formatter=e),"3rdParty"===e.type&&this.modules.external.push(e),this}setResolvedLanguage(e){if(e&&this.languages&&!(["cimode","dev"].indexOf(e)>-1))for(let t=0;t<this.languages.length;t++){const e=this.languages[t];if(!(["cimode","dev"].indexOf(e)>-1)&&this.store.hasLanguageSomeTranslations(e)){this.resolvedLanguage=e;break}}}changeLanguage(e,t){var n=this;this.isLanguageChangingTo=e;const r=_n();this.emit("languageChanging",e);const i=e=>{this.language=e,this.languages=this.services.languageUtils.toResolveHierarchy(e),this.resolvedLanguage=void 0,this.setResolvedLanguage(e)},s=(e,s)=>{s?(i(s),this.translator.changeLanguage(s),this.isLanguageChangingTo=void 0,this.emit("languageChanged",s),this.logger.log("languageChanged",s)):this.isLanguageChangingTo=void 0,r.resolve(function(){return n.t(...arguments)}),t&&t(e,function(){return n.t(...arguments)})},a=t=>{e||t||!this.services.languageDetector||(t=[]);const n=Sn(t)?t:this.services.languageUtils.getBestMatchFromCodes(t);n&&(this.language||i(n),this.translator.language||this.translator.changeLanguage(n),this.services.languageDetector&&this.services.languageDetector.cacheUserLanguage&&this.services.languageDetector.cacheUserLanguage(n)),this.loadResources(n,e=>{s(e,n)})};return e||!this.services.languageDetector||this.services.languageDetector.async?!e&&this.services.languageDetector&&this.services.languageDetector.async?0===this.services.languageDetector.detect.length?this.services.languageDetector.detect().then(a):this.services.languageDetector.detect(a):a(e):a(this.services.languageDetector.detect()),r}getFixedT(e,t,n){var r=this;const i=function(e,t){let s;if("object"!==typeof t){for(var a=arguments.length,o=new Array(a>2?a-2:0),l=2;l<a;l++)o[l-2]=arguments[l];s=r.options.overloadTranslationOptionHandler([e,t].concat(o))}else s=(0,Ne.A)({},t);s.lng=s.lng||i.lng,s.lngs=s.lngs||i.lngs,s.ns=s.ns||i.ns,""!==s.keyPrefix&&(s.keyPrefix=s.keyPrefix||n||i.keyPrefix);const c=r.options.keySeparator||".";let d;return d=s.keyPrefix&&Array.isArray(e)?e.map(e=>"".concat(s.keyPrefix).concat(c).concat(e)):s.keyPrefix?"".concat(s.keyPrefix).concat(c).concat(e):e,r.t(d,s)};return Sn(e)?i.lng=e:i.lngs=e,i.ns=t,i.keyPrefix=n,i}t(){return this.translator&&this.translator.translate(...arguments)}exists(){return this.translator&&this.translator.exists(...arguments)}setDefaultNamespace(e){this.options.defaultNS=e}hasLoadedNamespace(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;const n=t.lng||this.resolvedLanguage||this.languages[0],r=!!this.options&&this.options.fallbackLng,i=this.languages[this.languages.length-1];if("cimode"===n.toLowerCase())return!0;const s=(e,t)=>{const n=this.services.backendConnector.state["".concat(e,"|").concat(t)];return-1===n||0===n||2===n};if(t.precheck){const e=t.precheck(this,s);if(void 0!==e)return e}return!!this.hasResourceBundle(n,e)||(!(this.services.backendConnector.backend&&(!this.options.resources||this.options.partialBundledLanguages))||!(!s(n,e)||r&&!s(i,e)))}loadNamespaces(e,t){const n=_n();return this.options.ns?(Sn(e)&&(e=[e]),e.forEach(e=>{this.options.ns.indexOf(e)<0&&this.options.ns.push(e)}),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}loadLanguages(e,t){const n=_n();Sn(e)&&(e=[e]);const r=this.options.preload||[],i=e.filter(e=>r.indexOf(e)<0&&this.services.languageUtils.isSupportedCode(e));return i.length?(this.options.preload=r.concat(i),this.loadResources(e=>{n.resolve(),t&&t(e)}),n):(t&&t(),Promise.resolve())}dir(e){if(e||(e=this.resolvedLanguage||(this.languages&&this.languages.length>0?this.languages[0]:this.language)),!e)return"rtl";const t=this.services&&this.services.languageUtils||new Qn(ur());return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam","ckb"].indexOf(t.getLanguagePartFromCode(e))>-1||e.toLowerCase().indexOf("-arab")>1?"rtl":"ltr"}static createInstance(){return new mr(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},arguments.length>1?arguments[1]:void 0)}cloneInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:pr;const n=e.forkResourceStore;n&&delete e.forkResourceStore;const r=(0,Ne.A)((0,Ne.A)((0,Ne.A)({},this.options),e),{isClone:!0}),i=new mr(r);void 0===e.debug&&void 0===e.prefix||(i.logger=i.logger.clone(e));return["store","services","language"].forEach(e=>{i[e]=this[e]}),i.services=(0,Ne.A)({},this.services),i.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},n&&(i.store=new Kn(this.store.data,r),i.services.resourceStore=i.store),i.translator=new Jn(i.services,r),i.translator.on("*",function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];i.emit(e,...n)}),i.init(r,t),i.translator.options=r,i.translator.backendConnector.services.utils={hasLoadedNamespace:i.hasLoadedNamespace.bind(i)},i}toJSON(){return{options:this.options,store:this.store,language:this.language,languages:this.languages,resolvedLanguage:this.resolvedLanguage}}}const fr=mr.createInstance();fr.createInstance=mr.createInstance;fr.createInstance,fr.dir,fr.init,fr.loadResources,fr.reloadResources,fr.use,fr.changeLanguage,fr.getFixedT,fr.t,fr.exists,fr.setDefaultNamespace,fr.hasLoadedNamespace,fr.loadNamespaces,fr.loadLanguages;const gr=JSON.parse('{"app":{"name":"invomate"},"dashboard":"Dashboard","invoicesSection":"Invoices","clients":"Clients","reports":"Reports","settings":"Settings","sandboxSettings":"Sandbox Settings","pricing":"Pricing","legal":"Legal","terms":"Terms of Service","privacy":"Privacy Policy","refund":"Refund Policy","all":"All","create":"Create","templates":"Templates","logout":"Logout","profile":"Profile","loading":"Loading...","error":"Error","success":"Success","cancel":"Cancel","save":"Save","delete":"Delete","edit":"Edit","back":"Back","next":"Next","previous":"Previous","close":"Close","search":"Search","filter":"Filter","export":"Export","print":"Print","download":"Download","send":"Send","refresh":"Refresh","required":"Required","optional":"Optional","title":"Dashboard","welcome":"Welcome back","todayreceived":"Today\'s Received","todaydue":"Today\'s Due","todaytotal":"Today\'s Total","todayinvoicecount":"Today\'s Invoices","overdueinvoicecount":"Overdue Invoices","totaldueamount":"Total Due Amount","recentinvoices":"Recent Invoices","viewall":"View All","unknownclient":"Unknown Client","noinvoices":"No invoices","createfirstinvoice":"Create your first invoice","createinvoice":"Create Invoice","top5overdue":"Top 5 Overdue","nooverdueinvoices":"No overdue invoices","allinvoicespaidontime":"All invoices paid on time","overduebydays":"{{days}} days overdue","quickactions":"Quick Actions","createnewinvoice":"Create New Invoice","manageclients":"Manage Clients","viewallinvoices":"View All Invoices","accountsettings":"Account Settings","dashboardApiResponseIncorrect":"Dashboard API response format is incorrect","dashboardDataFetchError":"Failed to fetch dashboard data","faileddataload":"Failed to load data","createaccount":"Create your account","or":"Or","signintoexistingaccount":"Sign in to your existing account","firstname":"First Name","firstnamerequired":"First name is required","lastname":"Last Name","lastnamerequired":"Last name is required","emailaddress":"Email address","emailrequired":"Email is required","invalidemail":"Invalid email address","companynameoptional":"Company Name (Optional)","companyname":"Company Name","phoneoptional":"Phone (Optional)","phone":"Phone","password":"Password","passwordrequired":"Password is required","passwordminlength":"Password must be at least 6 characters","confirmpassword":"Confirm Password","confirmpasswordrequired":"Please confirm your password","passwordsdontmatch":"Passwords do not match","defaultcurrency":"Default Currency","usdollar":"US Dollar (USD)","euro":"Euro (EUR)","britishpound":"British Pound (GBP)","language":"Language","english":"English","spanish":"Spanish","german":"German","french":"French","invoices":{"draft":"Draft","sent":"Sent","paid":"Paid","overdue":"Overdue","cancelled":"Cancelled"},"fieldname":"Field Name","fieldtype":"Field Type","fieldoptions":"Field Options","isrequired":"Is Required","yes":"Yes","no":"No","text":"Text","number":"Number","date":"Date","select":"Select","checkbox":"Checkbox","textarea":"Textarea","selectoption":"Select an option","more":"more","actions":"Actions","moveup":"Move Up","movedown":"Move Down","saving":"Saving","errors":{"validation":{"requiredfields":"Required fields are missing","selectoptions":"Please add at least one option for the select field"},"targets":{"showing":"Showing","to":"to","of":"of","results":"results","invoice":"Invoice","client":"Client","item":"Invoice Item"}},"item":"Item","comingSoon":"Coming soon...","fillForm":"Please fill out the form on the left"}'),vr=JSON.parse('{"createAccount":"Create your account","signInToExistingAccount":"Sign in to your existing account","firstName":"First Name","firstNameRequired":"First name is required","lastName":"Last Name","lastNameRequired":"Last name is required","emailAddress":"Email Address","emailRequired":"Email is required","invalidEmail":"Invalid email address","companyNameOptional":"Company Name (Optional)","companyNamePlaceholder":"Enter your company name","phoneOptional":"Phone (Optional)","phonePlaceholder":"Enter your phone number","password":"Password","passwordRequired":"Password is required","passwordMinLength":"Password must be at least 6 characters","confirmPassword":"Confirm Password","confirmPasswordRequired":"Please confirm your password","passwordsDontMatch":"Passwords do not match","defaultCurrency":"Default Currency","usDollar":"US Dollar (USD)","euro":"Euro (EUR)","britishPound":"British Pound (GBP)","language":"Language","english":"English","spanish":"Spanish","german":"German","french":"French","nationality":"Nationality","nationalityRequired":"Nationality is required","unitedStates":"United States","france":"France","china":"China","germany":"Germany","spain":"Spain","unitedKingdom":"United Kingdom","japan":"Japan","other":"Other","termsRequired":"You must agree to the terms","agreeToTerms":"I agree to the","termsOfService":"Terms of Service","and":"and","privacyPolicy":"Privacy Policy","creatingAccount":"Creating account...","taxIntegration":"Integrated tax solutions for multiple markets","selectInvoiceMode":"Select your invoice mode","invoiceModeRequired":"Please select your invoice mode","countries":{"fr":"France","us":"United States","uk":"United Kingdom","de":"Germany","es":"Spain","it":"Italy"},"vatNumber":"VAT Number","sirenNumber":"SIREN Number","vatNumberFormat":"Format: FR + 11 digits (e.g., FR12345678901)","sirenNumberFormat":"Format: 9 digits (e.g., 123456789)","vatNumberRequired":"VAT number is required for French companies","sirenNumberRequired":"SIREN number is required for French companies","vatNumberInvalid":"Invalid VAT number format","sirenNumberInvalid":"Invalid SIREN number format","siret":"SIRET Number","siretRequired":"SIRET number is required for French companies","siretInvalid":"Invalid SIRET number format (14 digits required)","siretFormat":"Format: 14 digits (e.g., 12345678901234)","siretDescription":"14-digit company identification number","rcsNumber":{"label":"RCS Number","required":"RCS number is required","invalid":"Please enter a valid RCS number format","description":"Trade and Companies Register number"},"rcsNumberRequired":"RCS number is required for French companies","rcsNumberInvalid":"Invalid RCS number format (e.g., RCS PARIS 123 456 789)","rcsNumberFormat":"Format: RCS + City + Number (e.g., RCS PARIS 123 456 789)","rcsNumberDescription":"Trade and Companies Register number","nafCode":{"label":"NAF Code","required":"NAF code is required","invalid":"Please enter a valid 5-digit NAF code","description":"Business activity classification code"},"nafCodeRequired":"NAF code is required for French companies","nafCodeInvalid":"Invalid NAF code format (e.g., 62.02A)","nafCodeFormat":"Format: XX.XXA (e.g., 62.02A)","nafCodeDescription":"French business activity code","legalForm":"Legal Form","legalFormRequired":"Legal form is required for French companies","selectLegalForm":"Select legal form","registeredCapital":{"label":"Registered Capital (EUR)","required":"Registered capital is required","invalid":"Please enter a valid capital amount","description":"Company\'s registered capital in euros"},"optionalDetails":"Optional business details","optionalDetailsDescription":"Fill in now or anytime in Settings. Optional.","bankInformation":"Bank Information (Optional)","iban":"IBAN","bic":"BIC/SWIFT","bankName":"Bank Name","accountHolder":"Account Holder","bankPrivacyNote":"Optional. Stored securely and never shared. Used only for invoices and payments.","ibanInvalid":"Invalid IBAN format","bicInvalid":"Invalid BIC/SWIFT format"}'),yr=JSON.parse('{"dashboard":"Dashboard","welcome":"Welcome back!","kpiCards":"KPI Cards","incomeTrendChart":"Income Trend Chart","overdueCustomersList":"Overdue Customers List","actionButtons":"Action Buttons","title":"Dashboard","overview":"Overview","statistics":"Statistics","recentInvoices":"Recent Invoices","totalInvoices":"Total Invoices","totalRevenue":"Total Revenue","pendingInvoices":"Pending Invoices","paidInvoices":"Paid Invoices","thisMonth":"This Month","thisYear":"This Year","createInvoice":"Create Invoice","viewAllInvoices":"View All Invoices","manageClients":"Manage Clients","settings":"Settings","profile":"Profile","logout":"Logout","complianceStatus":"Compliance Status","frenchCompliance":"French e-Invoice Compliance","complianceActive":"Active","complianceInactive":"Inactive","sandboxMode":"Sandbox Mode","productionMode":"Production Mode","switchToProduction":"Switch to Production","switchToSandbox":"Switch to Sandbox","notifications":"Notifications","noNotifications":"No new notifications","upgradePrompt":"Upgrade to Pro for unlimited invoices","currentPlan":"Current Plan","freePlan":"Free Plan","proPlan":"Pro Plan","invoiceLimit":"Invoice Limit","unlimited":"Unlimited","upgrade":"Upgrade","todayOverview":"Today\'s Overview","todayInvoices":"Today\'s Invoices","todayPayments":"Today\'s Payments","todayDue":"Due Today","todayDueAlert":"{{count}} invoice(s) are due today","periodOverview":"Period Overview","thisWeek":"This Week","reminderSent":"Reminder sent to {{count}} customer(s)","reminderFailed":"Failed to send reminder","revenueTrend":"Revenue Trend","dailyRevenue":"Daily Revenue","date":"Date","revenue":"Revenue","loading":"Loading...","noData":"No data available","retry":"Retry","totalRevenueThisMonth":"Total Revenue This Month","paidInvoicesCount":"Paid Invoices","invoicesUnit":"invoices","noRevenueData":"No revenue data for this month","chartDescription":"Chart shows daily revenue trend for the current month"}'),xr=JSON.parse('{"title":"Invoices","subtitle":"Manage your invoices and payments","showing":"Showing","of":"of","invoice":"invoice","invoices":"invoices","createTitle":"Create Invoice","actions":{"create":"Create Invoice","cancel":"Cancel","clear":"Clear Form","addItem":"Add Item","removeItem":"Remove Item","generatePDF":"Generate PDF","title":"Invoice Actions","saveAndDownload":"Save & Download","saveAndPrint":"Save & Print","saveAndSend":"Save & Send","send":"Send","print":"Print"},"markAsPaid":"Mark as Paid","confirmMarkAsPaid":"Confirm marking invoice {{invoiceNumber}} ({{amount}}) as paid?","paidDate":"Payment Date","paymentMethod":"Payment Method","paymentMethods":{"bankTransfer":"Bank Transfer","creditCard":"Credit Card","cash":"Cash","check":"Check","onlinePayment":"Online Payment","other":"Other"},"confirmPayment":"Confirm Payment","notesPlaceholder":"Additional notes or payment terms...","status":{"draft":"Draft","sent":"Sent","paid":"Paid","overdue":"Overdue"},"template":"Template","selectTemplate":"Select a template","client":"Client","selectClient":"Select a client","issueDate":"Issue Date","dueDate":"Due Date","invoiceNumber":"Invoice Number","defaultTaxRate":"Default Tax Rate (%)","items":"Items","description":"Description","quantity":"Quantity","unitPrice":"Unit Price","taxRate":"Tax Rate (%)","subtotal":"Subtotal (excl. tax)","subtotalWithTax":"Subtotal (incl. tax)","totalExclTax":"Total (excl. tax)","totalTax":"Total Tax","totalInclTax":"Total (incl. tax)","total":"Total","grandTotal":"Grand Total","notes":"Notes","cancel":"Cancel","creating":"Creating...","save":"Save","addItem":"Add Item","removeItem":"Remove Item","useDefaultInvoice":"Use Default Invoice","clearForm":"Clear Form","deliveryDate":"Delivery/Service Date","billingAddress":"Billing Address","deliveryAddress":"Delivery Address","defaultDeliveryAddress":"Default delivery address from client","orderReferenceRemoved":"Order reference removed to simplify interface","contractReferenceRemoved":"Contract reference removed to simplify interface","french":{"templateName":"French Invoice Template","vatCalculation":"French VAT Rates","invoiceNumber":"Invoice Number (FR format)","deliveryDate":"Delivery/Service Date","sellerInfo":"Seller Information","sellerCompany":"Company Name","sellerAddress":"Registered Address","sellerVAT":"VAT Number (FR)","sellerSIREN":"SIREN Number","buyerInfo":"Buyer Information","buyerCompany":"Company Name","buyerAddress":"Address","buyerVAT":"VAT Number","legalStatements":"Mandatory Legal Statements","statement1":"In case of late payment, a penalty equal to three times the legal interest rate will be applied, as well as a fixed compensation of \u20ac40 for collection costs.","statement2":"The goods remain the property of the seller until full payment of the price.","statement3":"Any dispute relating to this invoice will be subject to the jurisdiction of the Commercial Court of Paris.","validation":{"vatFormat":"VAT number must be in format FR + 11 digits","sirenFormat":"SIREN must be 9 digits","deliveryDateRequired":"Delivery/Service date is required for French invoices"},"legalMention":"Legal mention: This invoice complies with French tax regulations.","vatNumber":"VAT Number:","siretNumber":"SIRET Number:","paymentTerms":"Payment terms: Net 30 days","legalGuaranteeStatement":"This product benefits from a legal guarantee of conformity from the seller for a minimum period of two years from its delivery to the consumer.","hiddenDefectsStatement":"The consumer has a period of two years from the discovery of the defect to take action under the guarantee for hidden defects.","complianceNote":"Simplified invoice format"},"validation":{"required":"This field is required","positiveNumber":"Must be a positive number","validTaxRate":"Tax rate must be between 0 and 100"},"messages":{"createSuccess":"Invoice created successfully","createError":"Error creating invoice","validationError":"Please fill in all required fields","clientRequired":"Please select a client","itemsRequired":"Please add at least one item","itemDescriptionRequired":"Item description is required","itemQuantityRequired":"Item quantity must be greater than 0","itemPriceRequired":"Item unit price must be greater than 0","itemTaxRateRequired":"Item tax rate must be between 0 and 100","pdfGenerating":"Generating PDF...","pdfError":"Error generating PDF","pdfSuccess":"PDF downloaded successfully","saveBeforePDF":"Please save the invoice before generating PDF","sendFeatureComingSoon":"Send feature coming soon","sendError":"Error sending invoice","sendSuccess":"Invoice sent successfully","sendingInvoice":"Sending invoice..."},"preview":{"title":"Invoice Preview","invoiceNumber":"Invoice #","from":"From:","to":"To:","companyInfo":"Company Information","clientInfo":"Client Information","itemsTable":"Items","totals":"Totals","notes":"Notes","invoice":"Invoice","date":"Date","dueDate":"Due Date","vatNumber":"VAT Number"}}'),br=JSON.parse('{"title":"Reports","description":"Generate and view various business reports to track your financial performance.","totalInvoices":"Total Invoices","totalRevenue":"Total Revenue","pendingPayments":"Pending Payments","overdueInvoices":"Overdue Invoices","generateReport":"Generate Report","salesReport":"Sales Report","taxReport":"Tax Report","customerReport":"Customer Report","exportData":"Export Data","viewDetails":"View Details","noDataAvailable":"No data available for the selected filters","errorLoadingData":"Error loading report data. Please try again.","errorGeneratingReport":"Error generating report. Please try again.","reportGenerated":"Report generated successfully.","revenueForecast":"Revenue Forecast","forecastError":"Error loading forecast data","historicalRevenue":"Historical Revenue","forecastRevenue":"Forecast Revenue","period":{"month":"Month","quarter":"Quarter","year":"Year"},"revenue":"Revenue","months":"{{count}} Months","avgMonthlyRevenue":"Avg Monthly Revenue","totalForecastRevenue":"Total Forecast Revenue","avgMonthlyInvoices":"Avg Monthly Invoices","multidimensionalAnalysis":"Multidimensional Analysis","analyticsError":"Error loading analytics data","analyticsByDimension":{"customer":"Analysis by Customer","status":"Analysis by Status","time":"Analysis by Time"},"dimension":{"customer":"Customer","status":"Status","time":"Time"},"barChart":"Bar Chart","pieChart":"Pie Chart","table":"Table","invoiceCount":"Invoice Count","paidAmount":"Paid Amount","pendingAmount":"Pending Amount","avgAmount":"Average Amount","paidCount":"Paid Count","pendingCount":"Pending Count","totalItems":"Total Items"}'),wr=JSON.parse('{"appearance":"Appearance","lightMode":"Light","darkMode":"Dark","autoMode":"Auto","autoModeDescription":"Automatically switch theme based on system settings","themeSettings":"Theme Settings","chooseTheme":"Choose your preferred theme mode","language":"Language","selectLanguage":"Select Language","languageDescription":"Choose your preferred language for the application interface.","comingSoon":"Coming Soon","moreLanguagesComingSoon":"More languages will be available in future updates."}'),jr=JSON.parse('{"title":"Integration Management","subtitle":"Connect your business tools and automate data synchronization","noIntegrations":"No Integrations","noIntegrationsDesc":"You haven\'t configured any integrations yet. Click the button below to add your first integration.","addIntegration":"Add Integration","createIntegration":"Create Integration","editIntegration":"Edit Integration","deleteIntegration":"Delete Integration","testConnection":"Test Connection","manualSync":"Manual Sync","viewLogs":"View Logs","configure":"Configure","pause":"Pause","resume":"Resume","delete":"Delete","edit":"Edit","status":"Status","lastSync":"Last Sync","nextSync":"Next Sync","syncFrequency":"Sync Frequency","dataTypes":"Data Types","errors":"Errors","warnings":"Warnings","synced":"Synced","failed":"Failed","pending":"Pending","active":"Active","inactive":"Inactive","connected":"Connected","disconnected":"Disconnected","error":"Error","success":"Success","loading":"Loading...","saving":"Saving...","testing":"Testing...","syncing":"Syncing...","platform":"Platform","name":"Name","description":"Description","configuration":"Configuration","credentials":"Credentials","settings":"Settings","mapping":"Mapping","schedule":"Schedule","logs":"Logs","statistics":"Statistics","overview":"Overview","details":"Details","history":"History","refresh":"Refresh","cancel":"Cancel","save":"Save","close":"Close","confirm":"Confirm","back":"Back","next":"Next","previous":"Previous","finish":"Finish","skip":"Skip","retry":"Retry","enable":"Enable","disable":"Disable","reset":"Reset","platforms":{"salesforce":"Salesforce","hubspot":"HubSpot","trello":"Trello","slack":"Slack","zapier":"Zapier","webhook":"Webhook","api":"API","database":"Database","file":"File","email":"Email","sms":"SMS","custom":"Custom"},"platformDescriptions":{"salesforce":"Sync customer and sales data with Salesforce CRM","hubspot":"Connect HubSpot for marketing and sales automation","trello":"Convert invoices to Trello cards for project management","slack":"Receive invoice notifications and updates in Slack","zapier":"Connect thousands of apps through Zapier","webhook":"Use webhooks for real-time data pushing","api":"Custom integration through REST API","database":"Direct connection to external databases","file":"Import/export CSV, Excel and other file formats","email":"Send invoices and notifications via email","sms":"Send SMS notifications and reminders","custom":"Create custom integration solutions"},"statusLabels":{"active":"Active","inactive":"Inactive","connected":"Connected","disconnected":"Disconnected","error":"Error","warning":"Warning","success":"Success","pending":"Pending","running":"Running","stopped":"Stopped","paused":"Paused","completed":"Completed","failed":"Failed","cancelled":"Cancelled","timeout":"Timeout","retry":"Retrying","queued":"Queued","processing":"Processing","syncing":"Syncing","synced":"Synced","conflict":"Conflict","partial":"Partial"},"frequencyOptions":{"realtime":"Real-time","every5min":"Every 5 minutes","every15min":"Every 15 minutes","every30min":"Every 30 minutes","hourly":"Hourly","every2hours":"Every 2 hours","every6hours":"Every 6 hours","every12hours":"Every 12 hours","daily":"Daily","weekly":"Weekly","monthly":"Monthly","manual":"Manual","custom":"Custom"},"dataTypeOptions":{"clients":"Clients","invoices":"Invoices","products":"Products","payments":"Payments","contacts":"Contacts","companies":"Companies","deals":"Deals","tasks":"Tasks","projects":"Projects","users":"Users","reports":"Reports","analytics":"Analytics","logs":"Logs","settings":"Settings","custom":"Custom"},"modal":{"title":"Integration Configuration","subtitle":"Configure your integration settings","step1":"Select Platform","step2":"Configure Connection","step3":"Test Connection","step4":"Complete Setup","selectPlatform":"Select the platform to integrate with","platformSelected":"Platform selected","configureConnection":"Configure connection parameters","testConnection":"Test connection","connectionTested":"Connection tested","finishSetup":"Complete integration setup","setupComplete":"Setup complete","integrationName":"Integration Name","integrationDescription":"Integration Description","connectionSettings":"Connection Settings","authSettings":"Authentication Settings","syncSettings":"Sync Settings","mappingSettings":"Mapping Settings","advancedSettings":"Advanced Settings","testingConnection":"Testing connection...","connectionSuccessful":"Connection successful","connectionFailed":"Connection failed","savingIntegration":"Saving integration...","integrationSaved":"Integration saved successfully","integrationSaveFailed":"Failed to save integration"},"form":{"name":"Name","description":"Description","platform":"Platform","status":"Status","frequency":"Sync Frequency","dataTypes":"Data Types","apiKey":"API Key","apiSecret":"API Secret","accessToken":"Access Token","refreshToken":"Refresh Token","clientId":"Client ID","clientSecret":"Client Secret","username":"Username","password":"Password","serverUrl":"Server URL","database":"Database","table":"Table","query":"Query","webhook":"Webhook URL","headers":"Headers","parameters":"Parameters","timeout":"Timeout","retries":"Retries","batchSize":"Batch Size","enabled":"Enabled","autoSync":"Auto Sync","bidirectional":"Bidirectional Sync","conflictResolution":"Conflict Resolution","errorHandling":"Error Handling","logging":"Logging","notifications":"Notifications","validation":{"required":"This field is required","minLength":"Minimum {min} characters required","maxLength":"Maximum {max} characters allowed","email":"Please enter a valid email address","url":"Please enter a valid URL","number":"Please enter a valid number","integer":"Please enter a valid integer","positive":"Please enter a positive number","range":"Value must be between {min} and {max}","pattern":"Invalid format","unique":"This value already exists","custom":"Validation failed"}},"messages":{"integrationCreated":"Integration created successfully","integrationUpdated":"Integration updated successfully","integrationDeleted":"Integration deleted successfully","integrationEnabled":"Integration enabled successfully","integrationDisabled":"Integration disabled successfully","integrationPaused":"Integration paused successfully","integrationResumed":"Integration resumed successfully","connectionTested":"Connection tested successfully","connectionFailed":"Connection test failed","syncStarted":"Sync started","syncCompleted":"Sync completed","syncFailed":"Sync failed","syncCancelled":"Sync cancelled","syncPaused":"Sync paused","syncResumed":"Sync resumed","mappingUpdated":"Mapping updated successfully","configExported":"Configuration exported successfully","configImported":"Configuration imported successfully","backupCreated":"Backup created successfully","backupRestored":"Backup restored successfully"},"confirmations":{"deleteIntegration":"Are you sure you want to delete this integration? This action cannot be undone.","disableIntegration":"Are you sure you want to disable this integration?","enableIntegration":"Are you sure you want to enable this integration?","resetIntegration":"Are you sure you want to reset this integration? All configurations will be cleared.","syncNow":"Are you sure you want to sync now?","stopSync":"Are you sure you want to stop the sync?","clearLogs":"Are you sure you want to clear all logs?","resetMapping":"Are you sure you want to reset the mapping configuration?","overwriteData":"Are you sure you want to overwrite existing data?","deleteData":"Are you sure you want to delete the data? This action cannot be undone."},"tooltips":{"testConnection":"Test if the connection to the platform is working","manualSync":"Execute a data sync immediately","viewLogs":"View sync logs and error information","editIntegration":"Modify integration configuration","deleteIntegration":"Delete this integration","pauseIntegration":"Pause automatic synchronization","resumeIntegration":"Resume automatic synchronization","syncStatus":"View detailed sync status","lastSync":"Time of the last synchronization","nextSync":"Time of the next scheduled sync","errorCount":"Number of errors during sync","warningCount":"Number of warnings during sync","syncedCount":"Number of successfully synced records"}}'),Nr=JSON.parse('{"dashboard":"Dashboard","invoicesSection":"Invoices","clients":"Clients","reports":"Reports","settings":"Settings","sandboxSettings":"Sandbox Settings","pricing":"Pricing","legal":"Legal","terms":"Terms of Service","privacy":"Privacy Policy","refund":"Refund Policy","all":"All","create":"Create","templates":"Templates","sidebar":{"quickActions":"Quick Actions","createInvoice":"Create Invoice","createClient":"Create Client"}}'),kr=JSON.parse('{"title":"Invomate","subtitle":"Don\'t have an account?","register":"Sign up","email":"Email","password":"Password","submit":"Sign in","success":"Login successful","error":"Login failed","taxIntegration":"Integrated tax solutions for France"}'),Ar=JSON.parse('{"title":"Privacy Policy","lastUpdated":"Last updated: January 2024","effectiveDate":"This Privacy Policy is effective as of January 1, 2024.","introduction":"Introduction","introductionText":"invomate (\'we\', \'our\', or \'us\') is committed to protecting your privacy. This Privacy Policy explains how we collect, use, disclose, and safeguard your information when you use our invoice management service.","infoWeCollect":"1. Information We Collect","infoWeCollectText":"We collect information you provide directly to us, such as when you create an account, use our services, or contact us for support. This includes your name, email address, company information, billing details, and any content you create or upload through our service.","personalInfo":"Personal Information","personalInfoText":"\u2022 Account information (name, email, password)\\n\u2022 Company details (business name, address, tax ID)\\n\u2022 Billing information (payment method, billing address)\\n\u2022 Profile information (phone number, preferences)","businessData":"Business Data","businessDataText":"\u2022 Invoice data (client information, amounts, dates)\\n\u2022 Client contact information\\n\u2022 Payment records and transaction history\\n\u2022 Reports and analytics data","technicalInfo":"Technical Information","technicalInfoText":"\u2022 IP address and device information\\n\u2022 Browser type and version\\n\u2022 Usage patterns and feature interactions\\n\u2022 Log files and error reports","howWeUseInfo":"2. How We Use Your Information","howWeUseInfoText":"We use the information we collect to provide, maintain, and improve our services, process transactions, send you technical notices and support messages, and communicate with you about products, services, and promotional offers.","serviceProvision":"Service Provision","serviceProvisionText":"\u2022 Creating and managing your account\\n\u2022 Processing invoices and payments\\n\u2022 Providing customer support\\n\u2022 Generating reports and analytics","communication":"Communication","communicationText":"\u2022 Sending service-related notifications\\n\u2022 Responding to your inquiries\\n\u2022 Providing product updates and announcements\\n\u2022 Marketing communications (with your consent)","improvement":"Service Improvement","improvementText":"\u2022 Analyzing usage patterns to improve features\\n\u2022 Developing new functionality\\n\u2022 Ensuring security and preventing fraud\\n\u2022 Complying with legal obligations","infoSharing":"3. Information Sharing and Disclosure","infoSharingText":"We do not sell, trade, or otherwise transfer your personal information to third parties without your consent, except as described in this policy. We may share your information with service providers, business partners, and in certain legal circumstances.","serviceProviders":"Service Providers","serviceProvidersText":"We may share your information with third-party service providers who assist us in operating our service, such as payment processors, email service providers, and hosting services. These providers are bound by confidentiality agreements.","legalRequirements":"Legal Requirements","legalRequirementsText":"We may disclose your information if required by law, court order, or government request, or to protect our rights, property, or safety, or that of our users or the public.","dataSecurity":"4. Data Security","dataSecurityText":"We implement appropriate technical and organizational measures to protect your personal information against unauthorized access, alteration, disclosure, or destruction. However, no method of transmission over the internet is 100% secure.","securityMeasures":"Security Measures","securityMeasuresText":"\u2022 SSL/TLS encryption for data transmission\\n\u2022 Encrypted data storage\\n\u2022 Regular security audits and updates\\n\u2022 Access controls and authentication\\n\u2022 Employee training on data protection","dataRetention":"5. Data Retention","dataRetentionText":"We retain your personal information for as long as necessary to provide our services, comply with legal obligations, resolve disputes, and enforce our agreements. You may request deletion of your account and associated data at any time.","cookies":"6. Cookies and Tracking Technologies","cookiesText":"We use cookies and similar tracking technologies to enhance your experience, analyze usage patterns, and provide personalized content. You can control cookie settings through your browser preferences.","cookieTypes":"Types of Cookies","cookieTypesText":"\u2022 Essential cookies for service functionality\\n\u2022 Analytics cookies for usage insights\\n\u2022 Preference cookies for personalization\\n\u2022 Marketing cookies for relevant advertising","thirdPartyServices":"7. Third-Party Services","thirdPartyServicesText":"Our service may integrate with third-party services such as payment processors, email providers, and analytics tools. These services have their own privacy policies, and we encourage you to review them.","internationalTransfers":"8. International Data Transfers","internationalTransfersText":"Your information may be transferred to and processed in countries other than your own. We ensure appropriate safeguards are in place to protect your data in accordance with applicable privacy laws.","yourRights":"9. Your Privacy Rights","yourRightsText":"Depending on your location, you may have certain rights regarding your personal information, including the right to access, update, delete, or restrict processing of your data.","rightsDetails":"Your Rights Include","rightsDetailsText":"\u2022 Right to access your personal data\\n\u2022 Right to correct inaccurate information\\n\u2022 Right to delete your data\\n\u2022 Right to data portability\\n\u2022 Right to restrict processing\\n\u2022 Right to object to processing","childrenPrivacy":"10. Children\'s Privacy","childrenPrivacyText":"Our service is not intended for children under 13 years of age. We do not knowingly collect personal information from children under 13. If we become aware that we have collected such information, we will take steps to delete it.","changes":"11. Changes to This Privacy Policy","changesText":"We may update this Privacy Policy from time to time. We will notify you of any material changes by posting the new policy on our website and sending you an email notification. Your continued use of our service constitutes acceptance of the updated policy.","contact":"12. Contact Us","contactText":"If you have any questions about this Privacy Policy or our privacy practices, please contact us at privacy@invomate.app or through our website contact form. We will respond to your inquiry within 30 days."}'),Sr=JSON.parse('{"title":"Terms of Service","lastUpdated":"Last updated: January 2024","acceptance":"1. Acceptance of Terms","acceptanceText":"By accessing and using invomate (the \'Service\'), you accept and agree to be bound by the terms and provision of this agreement. If you do not agree to abide by the above, please do not use this service.","useLicense":"2. Use License","useLicenseText":"Permission is granted to temporarily download one copy of invomate per device for personal, non-commercial transitory viewing only. This is the grant of a license, not a transfer of title, and under this license you may not: modify or copy the materials; use the materials for any commercial purpose or for any public display; attempt to reverse engineer any software contained on the website; remove any copyright or other proprietary notations from the materials.","serviceDescription":"3. Service Description","serviceDescriptionText":"invomate is an online invoice management platform that allows users to create, send, track, and manage invoices. The service includes features such as client management, payment tracking, reporting, and integration with payment processors.","userAccounts":"4. User Accounts","userAccountsText":"To access certain features of the Service, you must register for an account. You are responsible for maintaining the confidentiality of your account credentials and for all activities that occur under your account. You agree to notify us immediately of any unauthorized use of your account.","userResponsibilities":"5. User Responsibilities","userResponsibilitiesText":"You are responsible for all content you upload, create, or share through the Service. You must ensure that your use of the Service complies with all applicable laws and regulations. You agree not to use the Service for any unlawful purpose or in any way that could damage, disable, or impair the Service.","paymentTerms":"6. Payment Terms","paymentTermsText":"Subscription fees are billed in advance on a monthly or annual basis. All fees are non-refundable except as expressly stated in our Refund Policy. We reserve the right to change our pricing with 30 days\' notice to existing subscribers.","dataOwnership":"7. Data Ownership","dataOwnershipText":"You retain ownership of all data you input into the Service. We do not claim ownership of your invoices, client information, or other business data. However, you grant us a limited license to use your data solely for the purpose of providing the Service to you.","disclaimer":"8. Disclaimer","disclaimerText":"The information on this website is provided on an \'as is\' basis. To the fullest extent permitted by law, this Company excludes all representations, warranties, conditions and terms whether express or implied, statutory or otherwise.","limitations":"9. Limitations of Liability","limitationsText":"In no event shall invomate or its suppliers be liable for any damages (including, without limitation, damages for loss of data or profit, or due to business interruption) arising out of the use or inability to use the materials on invomate\'s website, even if invomate or an authorized representative has been notified orally or in writing of the possibility of such damage.","termination":"10. Termination","terminationText":"We may terminate or suspend your account and access to the Service immediately, without prior notice or liability, for any reason whatsoever, including without limitation if you breach the Terms. Upon termination, your right to use the Service will cease immediately.","refundPolicy":"11. Refund Policy","refundPolicyText":"Please refer to our detailed Refund Policy for information about refunds and cancellations. We offer a 14-day money-back guarantee for new subscriptions.","refundPolicyLink":"Refund Policy","privacyPolicy":"12. Privacy Policy","privacyPolicyText":"Your privacy is important to us. Please review our Privacy Policy, which also governs your use of the Service, to understand our practices: ","privacyPolicyLink":"Privacy Policy","governingLaw":"13. Governing Law","governingLawText":"These terms and conditions are governed by and construed in accordance with the laws of the jurisdiction in which our company is incorporated, and you irrevocably submit to the exclusive jurisdiction of the courts in that state or location.","changes":"14. Changes to Terms","changesText":"We reserve the right to modify these terms at any time. We will notify users of any material changes via email or through the Service. Your continued use of the Service after such modifications constitutes acceptance of the updated terms.","severability":"15. Severability","severabilityText":"If any provision of these Terms is found to be unenforceable or invalid, that provision will be limited or eliminated to the minimum extent necessary so that the Terms will otherwise remain in full force and effect.","contactInfo":"16. Contact Information","contactInfoText":"If you have any questions about these Terms of Service, please contact us at support@invomate.app or through our website contact form."}'),_r=JSON.parse('{"title":"Refund Policy","lastUpdated":"Last updated: January 2024","overview":"1. Refund Policy Overview","overviewText":"We offer refunds within 14 days from the date of purchase for eligible purchases. To request a refund, contact refunds@invomate.app with your order ID. We follow Paddle\'s standard refund policy, which includes a 14-day money-back guarantee for all subscription plans.","eligibility":"2. Refund Eligibility","eligibilityText":"You are eligible for a full refund if you request it within 14 days of your initial purchase. This applies to all subscription plans and one-time purchases made through our platform.","eligiblePurchases":"Eligible Purchases","eligiblePurchasesText":"\u2022 New subscription plans (monthly or annual)\\n\u2022 Upgrade purchases within 14 days\\n\u2022 One-time feature purchases\\n\u2022 Add-on services purchased separately","ineligiblePurchases":"Ineligible Purchases","ineligiblePurchasesText":"\u2022 Requests made after the 14-day period\\n\u2022 Accounts with suspected fraudulent activity\\n\u2022 Violations of our Terms of Service\\n\u2022 Excessive usage before refund request","howToRequest":"3. How to Request a Refund","howToRequestText":"To request a refund, please follow these steps: Locate your payment receipt from Paddle, click on the refund link provided in the receipt, follow the instructions to complete your refund request. Alternatively, you can contact Paddle support directly for assistance.","requestSteps":"Step-by-Step Process","requestStepsText":"1. Log into your invomate account\\n2. Go to Billing & Subscriptions section\\n3. Find your recent purchase\\n4. Click \'Request Refund\' button\\n5. Fill out the refund form with reason\\n6. Submit your request for review","alternativeMethod":"Alternative Method","alternativeMethodText":"You can also email us directly at refunds@invomate.app with the following information:\\n\u2022 Your account email address\\n\u2022 Order ID or transaction reference\\n\u2022 Reason for refund request\\n\u2022 Date of purchase","processingTime":"4. Processing Time","processingTimeText":"Refund requests are typically processed within 5-7 business days. The time it takes for the refund to appear in your account may vary depending on your payment method and financial institution.","processingSteps":"Processing Timeline","processingStepsText":"\u2022 Request review: 1-2 business days\\n\u2022 Approval and processing: 2-3 business days\\n\u2022 Bank processing: 2-5 business days\\n\u2022 Total time: 5-10 business days maximum","paymentMethods":"Refund by Payment Method","paymentMethodsText":"\u2022 Credit/Debit Cards: 3-5 business days\\n\u2022 PayPal: 1-2 business days\\n\u2022 Bank Transfer: 5-7 business days\\n\u2022 Digital Wallets: 1-3 business days","partialRefunds":"5. Partial Refunds","partialRefundsText":"In some cases, we may offer partial refunds for services that have been partially used. This is evaluated on a case-by-case basis and depends on the extent of service usage.","cancellation":"6. Subscription Cancellation","cancellationText":"You can cancel your subscription at any time through your account settings. Cancellation will prevent future charges but does not automatically trigger a refund for the current billing period unless requested within the 14-day window.","exceptions":"7. Refund Exceptions","exceptionsText":"We reserve the right to refuse refund requests in cases of suspected abuse, fraud, or violation of our Terms of Service. This includes but is not limited to: multiple refund requests for the same subscription period, requests made after the 14-day eligibility period, accounts found to be in violation of our Terms of Service.","fraudPrevention":"Fraud Prevention","fraudPreventionText":"\u2022 Multiple refund requests from same user\\n\u2022 Suspicious account activity patterns\\n\u2022 Violation of usage policies\\n\u2022 Chargebacks or payment disputes\\n\u2022 Accounts created solely for refund abuse","disputeResolution":"8. Dispute Resolution","disputeResolutionText":"If your refund request is denied and you disagree with our decision, you may appeal by contacting our customer support team at support@invomate.app. We will review your case and provide a final decision within 7 business days.","contact":"9. Contact Information","contactText":"If you have any questions about our refund policy, please contact our support team at refunds@invomate.app. Our customer service team is available Monday through Friday, 9 AM to 6 PM EST.","supportChannels":"Support Channels","supportChannelsText":"\u2022 Email: refunds@invomate.app\\n\u2022 Support Portal: Available in your account\\n\u2022 Live Chat: Monday-Friday, 9 AM-6 PM EST\\n\u2022 Phone Support: Available for premium subscribers","policyChanges":"10. Policy Changes","policyChangesText":"We may update this refund policy from time to time. Any changes will be posted on our website and will take effect immediately. Continued use of our service after changes constitutes acceptance of the updated policy."}'),Cr=JSON.parse('{"dashboard":"dashboard","invoices":"invoices","new":"new","edit":"edit","clients":"clients","settings":"settings","sandboxSettings":"sandbox-settings","profile":"profile","reports":"reports","integrations":"integrations","pricing":"pricing","legal":"legal","terms":"terms","privacy":"privacy","refund":"refund","all":"all","create":"create","templates":"templates","login":"login","register":"register"}'),Er=JSON.parse('{"title":"Choose Your Plan","subtitle":"Professional invoice management solutions to grow your business","loading":"Loading pricing plans...","retry":"Retry","error":{"title":"Failed to load pricing plans"},"no_plans_title":"No Plans Available","no_plans_description":"No pricing plans are currently available. Please try again later.","current_plan":"Current Plan","status":{"active":"Active","inactive":"Inactive","trial":"Trial","expired":"Expired","cancelled":"Cancelled"},"billing":{"monthly":"Monthly","annual":"Annual","save_percent":"Save 20%","per_month":"/month"},"plans":{"free_trial":{"name":"Basic","description":"Perfect for freelancers and small businesses","features":["Unlimited invoices","Customer management","Professional templates","Email support","Basic reporting","PDF export"]},"basic":{"name":"Professional","description":"Advanced features for growing businesses","features":["Everything in Basic","Advanced reporting & analytics","Multi-currency support","Custom branding","Priority support","API access","Automated reminders"]},"professional":{"name":"Enterprise Edition","description":"Complete solution for large enterprises","features":["Everything in Professional","Advanced integrations","Custom workflows","Dedicated account manager","24/7 priority support","Custom SLA","Advanced security features"]}},"buttons":{"processing":"Processing...","select_basic":"Choose Basic","select_premium":"Choose Premium","select_enterprise":"Choose Enterprise","recommended":"Recommended","upgrade_zero":"Upgrade for \u20ac0 Now","start_using":"Start Using"},"features":{"title":"Features included:","trial":{"first_upgrade_offer":"Start your free trial!","free_trial_days":"Enjoy 14 days free trial","trial_used_message":"You have already used the free trial"}},"security":{"title":"Security Guarantee","description":"We use bank-level security standards to ensure your data safety. 30-day money-back guarantee for peace of mind.","features":["SSL Encryption","Data Backup","30-day Refund"]},"messages":{"trial_already_used":"You have already used the free trial","trial_success":"Congratulations! You have successfully activated the 14-day free trial, enjoy all professional features!","activation_failed":"Activation failed, please try again later","payment_success":"Payment successful! Activating your subscription...","payment_failed":"Payment processing failed, please try again later","paddle_not_loaded":"Paddle not loaded"},"faq":{"title":"Frequently Asked Questions","trial":{"question":"Do you offer a free trial?","answer":"Yes, we offer a 14-day free trial for all our premium plans. No credit card required."},"cancel":{"question":"Can I cancel anytime?","answer":"Yes, you can cancel your subscription at any time. Your access will continue until the end of your billing period."},"upgrade":{"question":"Can I upgrade or downgrade my plan?","answer":"Yes, you can change your plan at any time. Changes will be prorated and reflected in your next billing cycle."},"support":{"question":"What kind of support do you provide?","answer":"We provide email support for all plans, with priority support for premium subscribers."}},"support":{"title":"Need Help?","description":"Our support team is here to help you choose the right plan for your business.","contact":"Contact Support"}}');(0,Ne.A)((0,Ne.A)((0,Ne.A)((0,Ne.A)((0,Ne.A)((0,Ne.A)((0,Ne.A)((0,Ne.A)((0,Ne.A)((0,Ne.A)({},gr),vr),yr),xr),Nr),Cr),kr),br),wr),jr);const Pr={en:{name:"English",flag:"\ud83c\uddfa\ud83c\uddf8",resources:{common:gr,auth:vr,dashboard:yr,invoices:xr,reports:br,settings:wr,integrations:jr,navigation:Nr,login:kr,privacy:Ar,terms:Sr,refund:_r,routes:Cr,pricing:Er}}};fr.use(Zt).init({resources:{en:Pr.en.resources},lng:"en",fallbackLng:"en",debug:!1,interpolation:{escapeValue:!1},defaultNS:"common",ns:["common","auth","dashboard","invoices","navigation","routes","login","reports","settings","integrations","terms","privacy","refund","pricing"]});const Tr=fr;var Mr=n(7950),Dr=n.t(Mr,2);function Or(){return Or=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Or.apply(this,arguments)}function Rr(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}function Ir(e){return void 0===e&&(e=""),new URLSearchParams("string"===typeof e||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(e=>[n,e]):[[n,r]])},[]))}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const Lr=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"];try{window.__reactRouterVersion="6"}catch(Ae){}new Map;const Fr=s.startTransition;Dr.flushSync,s.useId;function Br(e){let{basename:t,children:n,future:r,window:s}=e,a=i.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),f(function(e,t){let{pathname:n="/",search:r="",hash:i=""}=m(e.location.hash.substr(1));return n.startsWith("/")||n.startsWith(".")||(n="/"+n),h("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){let n=e.document.querySelector("base"),r="";if(n&&n.getAttribute("href")){let t=e.location.href,n=t.indexOf("#");r=-1===n?t:t.slice(0,n)}return r+"#"+("string"===typeof t?t:p(t))},function(e,t){d("/"===e.pathname.charAt(0),"relative pathnames are not supported in hash history.push("+JSON.stringify(t)+")")},o)));let l=a.current,[c,u]=i.useState({action:l.action,location:l.location}),{v7_startTransition:g}=r||{},v=i.useCallback(e=>{g&&Fr?Fr(()=>u(e)):u(e)},[u,g]);return i.useLayoutEffect(()=>l.listen(v),[l,v]),i.useEffect(()=>ge(r),[r]),i.createElement(be,{basename:t,children:n,location:c.location,navigationType:c.action,navigator:l,future:r})}const zr="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Wr=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ur=i.forwardRef(function(e,t){let n,{onClick:r,relative:s,reloadDocument:a,replace:o,state:l,target:d,to:u,preventScrollReset:h,viewTransition:m}=e,f=Rr(e,Lr),{basename:g}=i.useContext(K),v=!1;if("string"===typeof u&&Wr.test(u)&&(n=u,zr))try{let e=new URL(window.location.href),t=u.startsWith("//")?new URL(e.protocol+u):new URL(u),n=M(t.pathname,g);t.origin===e.origin&&null!=n?u=n+t.search+t.hash:v=!0}catch(Ae){}let y=function(e,t){let{relative:n}=void 0===t?{}:t;$()||c(!1);let{basename:r,navigator:s}=i.useContext(K),{hash:a,pathname:o,search:l}=re(e,{relative:n}),d=o;return"/"!==r&&(d="/"===o?r:L([r,o])),s.createHref({pathname:d,search:l,hash:a})}(u,{relative:s}),x=function(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:o,viewTransition:l}=void 0===t?{}:t,c=ee(),d=Q(),u=re(e,{relative:o});return i.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,n)){t.preventDefault();let n=void 0!==r?r:p(d)===p(u);c(e,{replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[d,c,u,r,s,n,e,a,o,l])}(u,{replace:o,state:l,target:d,preventScrollReset:h,relative:s,viewTransition:m});return i.createElement("a",Or({},f,{href:n||y,onClick:v||a?r:function(e){r&&r(e),e.defaultPrevented||x(e)},ref:t,target:d}))});var Vr,Hr;function qr(e){let t=i.useRef(Ir(e)),n=i.useRef(!1),r=Q(),s=i.useMemo(()=>function(e,t){let n=Ir(e);return t&&t.forEach((e,r)=>{n.has(r)||t.getAll(r).forEach(e=>{n.append(r,e)})}),n}(r.search,n.current?null:t.current),[r.search]),a=ee(),o=i.useCallback((e,t)=>{const r=Ir("function"===typeof e?e(s):e);n.current=!0,a("?"+r,t)},[a,s]);return[s,o]}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Vr||(Vr={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Hr||(Hr={}));var Gr={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Kr=i.createContext&&i.createContext(Gr),Yr=function(){return Yr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Yr.apply(this,arguments)},Xr=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};function Jr(e){return e&&e.map(function(e,t){return i.createElement(e.tag,Yr({key:t},e.attr),Jr(e.child))})}function $r(e){return function(t){return i.createElement(Qr,Yr({attr:Yr({},e.attr)},t),Jr(e.child))}}function Qr(e){var t=function(t){var n,r=e.attr,s=e.size,a=e.title,o=Xr(e,["attr","size","title"]),l=s||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),i.createElement("svg",Yr({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,r,o,{className:n,style:Yr(Yr({color:e.color||t.color},t.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),a&&i.createElement("title",null,a),e.children)};return void 0!==Kr?i.createElement(Kr.Consumer,null,function(e){return t(e)}):t(Gr)}function Zr(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12.01",y2:"16"}}]})(e)}function ei(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10.29 3.86L1.82 18a2 2 0 0 0 1.71 3h16.94a2 2 0 0 0 1.71-3L13.71 3.86a2 2 0 0 0-3.42 0z"}},{tag:"line",attr:{x1:"12",y1:"9",x2:"12",y2:"13"}},{tag:"line",attr:{x1:"12",y1:"17",x2:"12.01",y2:"17"}}]})(e)}function ti(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"19",y1:"12",x2:"5",y2:"12"}},{tag:"polyline",attr:{points:"12 19 5 12 12 5"}}]})(e)}function ni(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}},{tag:"polyline",attr:{points:"12 5 19 12 12 19"}}]})(e)}function ri(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"8",r:"7"}},{tag:"polyline",attr:{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"}}]})(e)}function ii(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"20",x2:"12",y2:"10"}},{tag:"line",attr:{x1:"18",y1:"20",x2:"18",y2:"4"}},{tag:"line",attr:{x1:"6",y1:"20",x2:"6",y2:"16"}}]})(e)}function si(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"}},{tag:"path",attr:{d:"M13.73 21a2 2 0 0 1-3.46 0"}}]})(e)}function ai(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"2",y:"7",width:"20",height:"14",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M16 21V5a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16"}}]})(e)}function oi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"4",width:"18",height:"18",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"16",y1:"2",x2:"16",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"2",x2:"8",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"10",x2:"21",y2:"10"}}]})(e)}function li(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14"}},{tag:"polyline",attr:{points:"22 4 12 14.01 9 11.01"}}]})(e)}function ci(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"20 6 9 17 4 12"}}]})(e)}function di(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 12 15 18 9"}}]})(e)}function ui(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 18 9 12 15 6"}}]})(e)}function hi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"9 18 15 12 9 6"}}]})(e)}function pi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"polyline",attr:{points:"12 6 12 12 16 14"}}]})(e)}function mi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}}]})(e)}function fi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"1",y:"4",width:"22",height:"16",rx:"2",ry:"2"}},{tag:"line",attr:{x1:"1",y1:"10",x2:"23",y2:"10"}}]})(e)}function gi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"23"}},{tag:"path",attr:{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}}]})(e)}function vi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"7 10 12 15 17 10"}},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"}}]})(e)}function yi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}},{tag:"path",attr:{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}}]})(e)}function xi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}},{tag:"line",attr:{x1:"1",y1:"1",x2:"23",y2:"23"}}]})(e)}function bi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}}]})(e)}function wi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}},{tag:"polyline",attr:{points:"14 2 14 8 20 8"}},{tag:"line",attr:{x1:"16",y1:"13",x2:"8",y2:"13"}},{tag:"line",attr:{x1:"16",y1:"17",x2:"8",y2:"17"}},{tag:"polyline",attr:{points:"10 9 9 9 8 9"}}]})(e)}function ji(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M13 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V9z"}},{tag:"polyline",attr:{points:"13 2 13 9 20 9"}}]})(e)}function Ni(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3"}}]})(e)}function ki(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"22",y2:"12"}},{tag:"path",attr:{d:"M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"}}]})(e)}function Ai(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"3",width:"7",height:"7"}},{tag:"rect",attr:{x:"14",y:"14",width:"7",height:"7"}},{tag:"rect",attr:{x:"3",y:"14",width:"7",height:"7"}}]})(e)}function Si(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"4",y1:"9",x2:"20",y2:"9"}},{tag:"line",attr:{x1:"4",y1:"15",x2:"20",y2:"15"}},{tag:"line",attr:{x1:"10",y1:"3",x2:"8",y2:"21"}},{tag:"line",attr:{x1:"16",y1:"3",x2:"14",y2:"21"}}]})(e)}function _i(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M3 9l9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"}},{tag:"polyline",attr:{points:"9 22 9 12 15 12 15 22"}}]})(e)}function Ci(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"22 12 16 12 14 15 10 15 8 12 2 12"}},{tag:"path",attr:{d:"M5.45 5.11L2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z"}}]})(e)}function Ei(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"10"}},{tag:"line",attr:{x1:"12",y1:"16",x2:"12",y2:"12"}},{tag:"line",attr:{x1:"12",y1:"8",x2:"12.01",y2:"8"}}]})(e)}function Pi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}},{tag:"path",attr:{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}}]})(e)}function Ti(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"8",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"8",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"8",y1:"18",x2:"21",y2:"18"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"3.01",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"12",x2:"3.01",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"3.01",y2:"18"}}]})(e)}function Mi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"2",x2:"12",y2:"6"}},{tag:"line",attr:{x1:"12",y1:"18",x2:"12",y2:"22"}},{tag:"line",attr:{x1:"4.93",y1:"4.93",x2:"7.76",y2:"7.76"}},{tag:"line",attr:{x1:"16.24",y1:"16.24",x2:"19.07",y2:"19.07"}},{tag:"line",attr:{x1:"2",y1:"12",x2:"6",y2:"12"}},{tag:"line",attr:{x1:"18",y1:"12",x2:"22",y2:"12"}},{tag:"line",attr:{x1:"4.93",y1:"19.07",x2:"7.76",y2:"16.24"}},{tag:"line",attr:{x1:"16.24",y1:"7.76",x2:"19.07",y2:"4.93"}}]})(e)}function Di(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"}},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 10 0v4"}}]})(e)}function Oi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"}},{tag:"polyline",attr:{points:"16 17 21 12 16 7"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"9",y2:"12"}}]})(e)}function Ri(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z"}},{tag:"polyline",attr:{points:"22,6 12,13 2,6"}}]})(e)}function Ii(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"}},{tag:"circle",attr:{cx:"12",cy:"10",r:"3"}}]})(e)}function Li(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"15 3 21 3 21 9"}},{tag:"polyline",attr:{points:"9 21 3 21 3 15"}},{tag:"line",attr:{x1:"21",y1:"3",x2:"14",y2:"10"}},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"}}]})(e)}function Fi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"3",y1:"12",x2:"21",y2:"12"}},{tag:"line",attr:{x1:"3",y1:"6",x2:"21",y2:"6"}},{tag:"line",attr:{x1:"3",y1:"18",x2:"21",y2:"18"}}]})(e)}function Bi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"4 14 10 14 10 20"}},{tag:"polyline",attr:{points:"20 10 14 10 14 4"}},{tag:"line",attr:{x1:"14",y1:"10",x2:"21",y2:"3"}},{tag:"line",attr:{x1:"3",y1:"21",x2:"10",y2:"14"}}]})(e)}function zi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}}]})(e)}function Wi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"1"}},{tag:"circle",attr:{cx:"12",cy:"5",r:"1"}},{tag:"circle",attr:{cx:"12",cy:"19",r:"1"}}]})(e)}function Ui(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z"}}]})(e)}function Vi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21.21 15.89A10 10 0 1 1 8 2.83"}},{tag:"path",attr:{d:"M22 12A10 10 0 0 0 12 2v10z"}}]})(e)}function Hi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"5 3 19 12 5 21 5 3"}}]})(e)}function qi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"12",y1:"5",x2:"12",y2:"19"}},{tag:"line",attr:{x1:"5",y1:"12",x2:"19",y2:"12"}}]})(e)}function Gi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"6 9 6 2 18 2 18 9"}},{tag:"path",attr:{d:"M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"}},{tag:"rect",attr:{x:"6",y:"14",width:"12",height:"8"}}]})(e)}function Ki(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 4 23 10 17 10"}},{tag:"polyline",attr:{points:"1 20 1 14 7 14"}},{tag:"path",attr:{d:"M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"}}]})(e)}function Yi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}},{tag:"polyline",attr:{points:"17 21 17 13 7 13 7 21"}},{tag:"polyline",attr:{points:"7 3 7 8 15 8"}}]})(e)}function Xi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}}]})(e)}function Ji(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"22",y1:"2",x2:"11",y2:"13"}},{tag:"polygon",attr:{points:"22 2 15 22 11 13 2 9 22 2"}}]})(e)}function $i(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"3"}},{tag:"path",attr:{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}}]})(e)}function Qi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"18",cy:"5",r:"3"}},{tag:"circle",attr:{cx:"6",cy:"12",r:"3"}},{tag:"circle",attr:{cx:"18",cy:"19",r:"3"}},{tag:"line",attr:{x1:"8.59",y1:"13.51",x2:"15.42",y2:"17.49"}},{tag:"line",attr:{x1:"15.41",y1:"6.51",x2:"8.59",y2:"10.49"}}]})(e)}function Zi(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"}}]})(e)}function es(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}}]})(e)}function ts(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"}},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"}},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"}},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"}},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"}},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}}]})(e)}function ns(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"3 6 5 6 21 6"}},{tag:"path",attr:{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}},{tag:"line",attr:{x1:"10",y1:"11",x2:"10",y2:"17"}},{tag:"line",attr:{x1:"14",y1:"11",x2:"14",y2:"17"}}]})(e)}function rs(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 18 13.5 8.5 8.5 13.5 1 6"}},{tag:"polyline",attr:{points:"17 18 23 18 23 12"}}]})(e)}function is(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polyline",attr:{points:"23 6 13.5 15.5 8.5 10.5 1 18"}},{tag:"polyline",attr:{points:"17 6 23 6 23 12"}}]})(e)}function ss(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}},{tag:"polyline",attr:{points:"17 8 12 3 7 8"}},{tag:"line",attr:{x1:"12",y1:"3",x2:"12",y2:"15"}}]})(e)}function as(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"12",cy:"7",r:"4"}}]})(e)}function os(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}},{tag:"circle",attr:{cx:"9",cy:"7",r:"4"}},{tag:"path",attr:{d:"M23 21v-2a4 4 0 0 0-3-3.87"}},{tag:"path",attr:{d:"M16 3.13a4 4 0 0 1 0 7.75"}}]})(e)}function ls(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"}},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"}}]})(e)}function cs(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"polygon",attr:{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2"}}]})(e)}function ds(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}},{tag:"line",attr:{x1:"11",y1:"8",x2:"11",y2:"14"}},{tag:"line",attr:{x1:"8",y1:"11",x2:"14",y2:"11"}}]})(e)}function us(e){return $r({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"11",cy:"11",r:"8"}},{tag:"line",attr:{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}},{tag:"line",attr:{x1:"8",y1:"11",x2:"14",y2:"11"}}]})(e)}var hs=n(7834);const ps=()=>{const{user:e,updateUser:t}=mn(),[n,r]=(0,i.useState)(null),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null),u=e=>({free:"Free Plan",basic:"Basic Plan",professional:"Professional Plan",enterprise:"Enterprise Plan"}[e]||"Free Plan"),h=e=>({free:0,basic:9.99,professional:29.99,enterprise:99.99}[e]||0),p=(0,i.useCallback)(e=>{if(!e)return 0;const t=new Date,n=new Date(e),r=n-t,i=Math.ceil(r/864e5);return console.log("=== calculateDaysRemaining ==="),console.log("endDate:",e),console.log("now:",t),console.log("end:",n),console.log("diffTime:",r),console.log("diffDays:",i),console.log("result:",Math.max(0,i)),Math.max(0,i)},[]),m=(0,i.useCallback)(e=>{if(!e)return!1;const t=new Date,n=new Date(e),r=t>n;return console.log("=== checkIsExpired ==="),console.log("endDate:",e),console.log("now:",t),console.log("end:",n),console.log("isExpired:",r),r},[]),f=(0,i.useCallback)(async()=>{try{if(console.log("\ud83d\ude80 fetchSubscriptionStatus: \u5f00\u59cb\u83b7\u53d6\u8ba2\u9605\u72b6\u6001"),console.log("\u5f53\u524d\u7528\u6237\u6570\u636e:",e),l(!0),d(null),e&&e.subscriptionEndDate){console.log("\u2705 \u4f7f\u7528AuthContext\u4e2d\u7684\u7528\u6237\u8ba2\u9605\u6570\u636e");const t={subscription:e.subscription||"professional",status:e.subscriptionStatus||"expired",endDate:e.subscriptionEndDate,startDate:e.subscriptionStartDate||(new Date).toISOString(),planName:u(e.subscription||"professional"),price:h(e.subscription||"professional"),currency:"EUR"};console.log("\ud83d\udcca \u4f7f\u7528\u7528\u6237\u6570\u636e:",t),r(t);const n=new Date,i=new Date(t.endDate),s=n>i;return a(s),console.log("\ud83d\udcc5 \u8fc7\u671f\u68c0\u67e5:",{now:n,endDate:i,expired:s}),void l(!1)}if(!e){console.log("\u274c fetchSubscriptionStatus: \u7528\u6237\u672a\u767b\u5f55");const e=(()=>{const e={subscription:"professional",status:"expired",endDate:new Date(Date.now()-864e5).toISOString(),startDate:new Date(Date.now()-26784e5).toISOString(),planName:"Professional Plan",price:29.99,currency:"EUR"};return console.log("\ud83d\udcca getMockSubscriptionData: \u751f\u6210\u5df2\u8fc7\u671f\u4e13\u4e1a\u7248\u6a21\u62df\u6570\u636e",e),e})();return r(e),a(!1),void l(!1)}console.log("\u5f53\u524d\u7528\u6237\u6570\u636e:",{id:e.id,subscription:e.subscription,subscriptionStatus:e.subscriptionStatus,subscriptionEndDate:e.subscriptionEndDate}),l(!0),d(null),console.log("=== \u83b7\u53d6\u8ba2\u9605\u72b6\u6001 ==="),console.log("\u7528\u6237\u6570\u636e:",e);try{const e=await hs.default.getSubscriptionStatus();console.log("\u4eceAPI\u83b7\u53d6\u7684\u8ba2\u9605\u72b6\u6001:",e);const t={subscription:e.subscription||e.subscriptionType||"free",status:e.status||e.subscriptionStatus||"inactive",endDate:e.endDate||e.subscriptionEndDate,startDate:e.startDate||e.subscriptionStartDate||(new Date).toISOString(),planName:u(e.subscription||e.subscriptionType),price:h(e.subscription||e.subscriptionType),currency:e.currency||"EUR",daysRemaining:e.daysRemaining||null,hasUsedTrial:e.hasUsedTrial||!1};if(r(t),t.endDate){const e=new Date,n=e>=new Date(t.endDate);a(n),n&&"free"!==t.subscription&&await g("free","inactive")}else a(!1)}catch(t){console.warn("Failed to fetch from API, using user data:",t);const n=e.subscription||e.subscriptionStatus||"free",i={subscription:n,status:e.subscriptionEndDate&&new Date(e.subscriptionEndDate)>new Date?"active":"inactive",endDate:e.subscriptionEndDate,startDate:e.subscriptionStartDate||(new Date).toISOString(),planName:u(n),price:h(n),currency:e.currency||"EUR",daysRemaining:e.subscriptionEndDate?p(e.subscriptionEndDate):null,hasUsedTrial:e.hasUsedTrial||!1};if(r(i),i.endDate){const e=new Date,t=e>=new Date(i.endDate);a(t),t&&"free"!==i.subscription&&await g("free","inactive")}}}catch(n){console.error("Failed to fetch subscription status:",n),d(n.message)}finally{l(!1)}},[e,t]),g=(0,i.useCallback)(async(r,i)=>{try{const i=(0,Ne.A)((0,Ne.A)({},e),{},{subscriptionStatus:r,subscriptionEndDate:"free"===r?null:null===n||void 0===n?void 0:n.endDate});t(i),setTimeout(()=>{f()},100)}catch(s){console.error("Failed to update user subscription:",s)}},[e,n,t,f]),v=((0,i.useCallback)(e=>{if(console.log("=== updateSubscriptionState ==="),console.log("\u8f93\u5165\u7684subscriptionData:",e),!e)return console.log("\u6ca1\u6709\u8ba2\u9605\u6570\u636e\uff0c\u8bbe\u7f6e\u9ed8\u8ba4\u72b6\u6001"),r(null),void a(!1);const t=e.endDate||e.subscriptionEndDate,n=e.status||e.subscriptionStatus,i=e.subscription||e.subscriptionType||e.planType;console.log("\u89e3\u6790\u7684\u6570\u636e:"),console.log("endDate:",t),console.log("status:",n),console.log("type:",i);const s=p(t),o=m(t);console.log("\u8ba1\u7b97\u7ed3\u679c:"),console.log("daysLeft:",s),console.log("expired:",o),r(e),a(o),console.log("\u72b6\u6001\u66f4\u65b0\u5b8c\u6210")},[p,m]),(0,i.useCallback)(async()=>{a(!0),"free"!==(null===n||void 0===n?void 0:n.subscription)&&await g("free","inactive")},[null===n||void 0===n?void 0:n.subscription,g])),y=()=>{if(!n)return!1;const{subscription:e,status:t,endDate:r}=n;if("free"===e)return!0;if("professional"===e||"enterprise"===e){if("active"!==t&&"trial"!==t)return!1;if(r){return new Date<new Date(r)}return"active"===t}if("active"!==t&&"trial"!==t)return!1;if(r){return new Date<new Date(r)}return"active"===t},x=()=>{if(null===n||void 0===n||!n.endDate)return null;const e=new Date,t=new Date(n.endDate)-e,r=Math.ceil(t/864e5);return Math.max(0,r)},b=()=>null!==n&&void 0!==n&&n.endDate?new Date(n.endDate):null,w=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;const t=x();return null!==t&&t<=e&&t>0};return(0,i.useEffect)(()=>{console.log("\ud83d\udd04 useSubscriptionTimer: \u7528\u6237\u6570\u636e\u53d8\u5316\u68c0\u6d4b"),console.log("\u7528\u6237\u6570\u636e:",e),e?(console.log("\u2705 \u89e6\u53d1\u8ba2\u9605\u72b6\u6001\u83b7\u53d6"),f()):console.log("\u274c \u8df3\u8fc7\u8ba2\u9605\u72b6\u6001\u83b7\u53d6 - \u7528\u6237\u672a\u767b\u5f55")},[e,f]),(0,i.useEffect)(()=>{const t=setInterval(()=>{e&&f()},3e5);return()=>clearInterval(t)},[e,f]),{subscription:n,subscriptionStatus:(null===n||void 0===n?void 0:n.status)||"inactive",subscriptionType:(null===n||void 0===n?void 0:n.subscription)||"free",isTrialActive:"trial"===(null===n||void 0===n?void 0:n.status),isProfessional:"professional"===(null===n||void 0===n?void 0:n.subscription)&&"active"===(null===n||void 0===n?void 0:n.status),isBasic:"basic"===(null===n||void 0===n?void 0:n.subscription),isExpired:s,daysRemaining:x(),expiryDate:b(),showWarning:w(),loading:o,error:c,hasActiveSubscription:y(),remainingDays:x(),shouldShowWarning:w(),hasFeature:e=>{if(!n)return!1;const{subscription:t}=n,r={create_invoice:["free","basic","professional","enterprise"],unlimited_invoices:["professional","enterprise"],advanced_templates:["professional","enterprise"],integrations:["professional","enterprise"],analytics:["professional","enterprise"],priority_support:["enterprise"],custom_branding:["enterprise"]}[e]||[],i=y();return r.includes(t)&&i},getInvoiceLimit:()=>{if(!n)return 0;const{subscription:e}=n;return{free:5,basic:50,professional:-1,enterprise:-1}[e]||0},getRemainingDays:x,getExpirationDate:b,handleExpiration:v,refreshSubscription:f}},ms=e=>{let{size:t="normal"}=e;const{t:n}=nn(),{subscription:r,subscriptionType:i,subscriptionStatus:s,isExpired:a,daysRemaining:o,expiryDate:l,showWarning:c,hasActiveSubscription:d,loading:u}=ps();if(console.log("\ud83c\udfaf TrialCountdown \u7ec4\u4ef6\u6570\u636e:",{subscription:r,subscriptionType:i,subscriptionStatus:s,isExpired:a,daysRemaining:o,expiryDate:l,hasActiveSubscription:d,loading:u}),console.log("\ud83d\udd0d TrialCountdown \u8be6\u7ec6\u5206\u6790:",{"subscription\u5b58\u5728":!!r,"subscriptionType\u503c":i,"isExpired\u503c":a,"daysRemaining\u503c":o,"daysRemaining\u7c7b\u578b":typeof o,"hasActiveSubscription\u503c":d,"hasActiveSubscription\u7c7b\u578b":typeof d,expiryDate:l?l.toString():"null"}),u)return(0,sn.jsxs)("div",{className:"flex items-center text-gray-400 ".concat("small"===t?"text-xs":"text-sm"),children:[(0,sn.jsx)(pi,{className:"mr-1 animate-spin ".concat("small"===t?"h-3 w-3":"h-4 w-4")}),(0,sn.jsx)("span",{className:"font-medium",children:"Loading..."})]});if(!r)return(0,sn.jsxs)("div",{className:"flex items-center text-gray-500 ".concat("small"===t?"text-xs":"text-sm"),children:[(0,sn.jsx)(Ci,{className:"mr-1 ".concat("small"===t?"h-3 w-3":"h-4 w-4")}),(0,sn.jsx)("span",{className:"font-medium",children:"Free"})]});const h=(()=>{if(console.log("\ud83d\udd27 getDisplayInfo \u5224\u65ad\u903b\u8f91:",{subscriptionType:i,daysRemaining:o,"daysRemaining\u7c7b\u578b":typeof o,"daysRemaining\u662f\u5426\u4e3anull":null===o,isExpired:a,hasActiveSubscription:d}),"free"===i)return console.log("\u2705 \u5224\u65ad\u7ed3\u679c: \u514d\u8d39\u7248"),{text:"Free",icon:Ci,className:"text-gray-500",showDays:!1};if("number"===typeof o&&o>0){const e={trial:"Trial",basic:"Basic",professional:"Professional",enterprise:"Enterprise"}[i]||"\u8ba2\u9605";let t="text-green-600";return o<=3?t="text-red-600":o<=7&&(t="text-orange-600"),console.log("\u2705 \u5224\u65ad\u7ed3\u679c: \u6709\u5269\u4f59\u5929\u6570",{planName:e,daysRemaining:o,className:t}),{text:e,icon:pi,className:t,showDays:!0,daysText:"".concat(o," days remaining")}}if(a||"number"===typeof o&&o<=0)return console.log("\u2705 \u5224\u65ad\u7ed3\u679c: \u8ba2\u9605\u5df2\u8fc7\u671f"),{text:"Subscription expired",icon:ei,className:"text-red-600",showDays:!1};if(null===o&&d){console.log("\u2705 \u5224\u65ad\u7ed3\u679c: \u8ba2\u9605\u6fc0\u6d3b\u4f46\u5929\u6570\u672a\u77e5");return{text:{trial:"Trial",basic:"Basic",professional:"Professional",enterprise:"Enterprise"}[i]||"\u8ba2\u9605",icon:ci,className:"text-green-600",showDays:!1}}return console.log("\u2705 \u5224\u65ad\u7ed3\u679c: \u8ba2\u9605\u672a\u6fc0\u6d3b"),{text:"Subscription inactive",icon:ei,className:"text-gray-400",showDays:!1}})(),p=h.icon;return(0,sn.jsxs)("div",{className:"flex items-center ".concat(h.className," ").concat("small"===t?"text-xs":"text-sm"),children:[(0,sn.jsx)(p,{className:"mr-1 ".concat("small"===t?"h-3 w-3":"h-4 w-4")}),(0,sn.jsxs)("span",{className:"font-medium",children:[h.text,h.showDays&&(0,sn.jsx)("span",{className:"ml-1 font-normal",children:h.daysText})]})]})},fs=e=>{let{sidebarOpen:t,setSidebarOpen:n}=e;const{user:r,logout:s}=mn(),{theme:a,toggleTheme:o}=vn(),l=ee(),[c,d]=(0,i.useState)(!1),{t:u}=nn(["navigation","common","routes"]);return(0,sn.jsx)("header",{className:"bg-white dark:bg-gray-800 shadow-sm fixed top-0 left-0 right-0 z-40 lg:left-64",children:(0,sn.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,sn.jsxs)("div",{className:"flex justify-between h-16",children:[(0,sn.jsxs)("div",{className:"flex",children:[(0,sn.jsxs)("button",{type:"button",className:"-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-primary-500 lg:hidden",onClick:()=>n(!t),children:[(0,sn.jsx)("span",{className:"sr-only",children:"Open sidebar"}),t?(0,sn.jsx)(ls,{className:"h-6 w-6"}):(0,sn.jsx)(Fi,{className:"h-6 w-6"})]}),(0,sn.jsxs)("div",{className:"flex-shrink-0 flex items-center lg:hidden",children:[(0,sn.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-600 flex items-center justify-center",children:(0,sn.jsx)(wi,{className:"h-5 w-5 text-white"})}),(0,sn.jsx)("span",{className:"ml-2 text-lg font-bold text-gray-900",children:u("app:name")})]})]}),(0,sn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sn.jsx)("div",{className:"flex items-center justify-center flex-1 px-2 md:px-4",children:(0,sn.jsx)(ms,{size:"small"})}),(0,sn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sn.jsx)("div",{children:(0,sn.jsxs)("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 shadow-sm hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",onClick:()=>l("/".concat(u("routes:invoices"),"/").concat(u("routes:new"))),title:"Create new invoice",children:[(0,sn.jsx)(qi,{className:"h-4 w-4 mr-1"}),(0,sn.jsx)("span",{className:"hidden sm:inline",children:u("navigation:create")})]})}),(0,sn.jsx)("div",{children:(0,sn.jsxs)("button",{type:"button",className:"inline-flex items-center px-3 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-green-600 shadow-sm hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500 transition-colors",onClick:()=>{const e="".concat(window.location.origin,"/register?ref=").concat((null===r||void 0===r?void 0:r.id)||"demo");navigator.clipboard.writeText(e).then(()=>{Bt.success("Invitation link copied to clipboard!")}).catch(()=>{const t=document.createElement("div");t.innerHTML='\n                         <div class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">\n                           <div class="bg-white dark:bg-gray-800 rounded-lg p-6 max-w-md w-full mx-4">\n                             <h3 class="text-lg font-semibold mb-4">Share Invitation Link</h3>\n                             <div class="bg-gray-100 dark:bg-gray-700 p-3 rounded border">\n                               <code class="text-sm break-all">'.concat(e,'</code>\n                             </div>\n                             <div class="mt-4 flex justify-end">\n                               <button onclick="this.closest(\'.fixed\').remove()" class="px-4 py-2 bg-primary-600 text-white rounded hover:bg-primary-700">\n                                 Close\n                               </button>\n                             </div>\n                           </div>\n                         </div>\n                       '),document.body.appendChild(t)})},title:"Share invitation link",children:[(0,sn.jsx)(Qi,{className:"h-4 w-4 mr-1"}),(0,sn.jsx)("span",{className:"hidden sm:inline",children:"Share"})]})})]}),(0,sn.jsx)("div",{className:"ml-3",children:(0,sn.jsx)("button",{type:"button",className:"p-2 rounded-md text-gray-400 hover:text-gray-500 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 transition-colors",onClick:o,title:"dark"===a?u("common:switchToLight","Switch to light mode"):u("common:switchToDark","Switch to dark mode"),children:"dark"===a?(0,sn.jsx)(ts,{className:"h-5 w-5"}):(0,sn.jsx)(zi,{className:"h-5 w-5"})})}),(0,sn.jsxs)("div",{className:"ml-3 relative",children:[(0,sn.jsx)("div",{children:(0,sn.jsxs)("button",{type:"button",className:"flex items-center text-sm rounded-full focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:()=>d(!c),children:[(0,sn.jsx)("span",{className:"sr-only",children:"Open user menu"}),(0,sn.jsx)("div",{className:"h-8 w-8 rounded-full bg-primary-100 flex items-center justify-center",children:(0,sn.jsx)("span",{className:"text-primary-800 font-medium",children:(()=>{if(!r)return"";const e=r.firstName||"",t=r.lastName||"";return e&&t?"".concat(e.charAt(0)).concat(t.charAt(0)).toUpperCase():e?e.charAt(0).toUpperCase():r.email?r.email.charAt(0).toUpperCase():"U"})()})}),(0,sn.jsx)(di,{className:"ml-1 h-4 w-4 text-gray-500"})]})}),c&&(0,sn.jsxs)("div",{className:"origin-top-right absolute right-0 mt-2 w-64 rounded-md shadow-lg py-1 bg-white ring-1 ring-black ring-opacity-5 focus:outline-none z-10",children:[(0,sn.jsxs)("div",{className:"px-4 py-3 border-b border-gray-100",children:[(0,sn.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[null===r||void 0===r?void 0:r.firstName," ",null===r||void 0===r?void 0:r.lastName]}),(0,sn.jsx)("p",{className:"text-sm text-gray-500 truncate",children:null===r||void 0===r?void 0:r.email})]}),(0,sn.jsx)("div",{className:"px-4 py-3 border-b border-gray-100",children:(0,sn.jsx)(ms,{})}),(0,sn.jsx)(Ur,{to:"/".concat(u("routes:settings")),className:"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>d(!1),children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)($i,{className:"mr-3 h-4 w-4 text-gray-400"}),u("navigation:settings")]})}),(0,sn.jsx)("div",{className:"border-t border-gray-100"}),(0,sn.jsx)("button",{type:"button",className:"block w-full text-left px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",onClick:()=>{s(),Bt.success(u("common:logoutSuccess")),l("/".concat(u("routes:login")))},children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)(Oi,{className:"mr-3 h-4 w-4 text-gray-400"}),u("common:logout")]})})]})]})]})]})})})},gs=()=>{const{t:e}=nn(["subscription","common"]),{subscriptionStatus:t,subscriptionType:n,isTrialActive:r,isProfessional:i,isBasic:s,getRemainingDays:a}=ps();if("free"===n&&!r)return null;const o=(()=>{if(i)return{icon:ri,text:e("subscription:professional_plan"),bgColor:"bg-blue-900",textColor:"text-orange-400",iconColor:"text-orange-400",borderColor:"border-orange-500"};if(s)return{icon:es,text:e("subscription:basic_plan"),subText:e("subscription:basic_features"),bgColor:"bg-gradient-to-r from-blue-500 to-blue-600",textColor:"text-white",iconColor:"text-blue-200"};if(r){const t=a();return{icon:cs,text:e("subscription:trial_active"),subText:e("subscription:trial_remaining",{days:t}),bgColor:"bg-gradient-to-r from-green-500 to-emerald-600",textColor:"text-white",iconColor:"text-green-200"}}return null})();if(!o)return null;const l=o.icon;return(0,sn.jsx)("div",{className:"px-4 pb-4",children:(0,sn.jsx)("div",{className:"\n        ".concat(o.bgColor," \n        ").concat(o.textColor,"\n        ").concat(o.borderColor?"border-2 ".concat(o.borderColor):"","\n        rounded-lg p-3 shadow-sm\n      "),children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"flex-shrink-0",children:(0,sn.jsx)(l,{className:"h-5 w-5 ".concat(o.iconColor)})}),(0,sn.jsxs)("div",{className:"ml-3 flex-1 min-w-0",children:[(0,sn.jsx)("div",{className:"text-sm font-medium truncate",children:o.text}),(0,sn.jsx)("div",{className:"text-xs opacity-90 truncate",children:o.subText})]}),r&&(0,sn.jsx)("div",{className:"flex-shrink-0 ml-2",children:(0,sn.jsx)(pi,{className:"h-4 w-4 opacity-75"})})]})})})},vs=e=>{let{sidebarOpen:t,setSidebarOpen:n}=e;const r=Q(),[s,a]=(0,i.useState)(!1),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),{t:u}=nn(["navigation","common","routes"]),h=[{name:u("navigation:dashboard"),href:"/".concat(u("routes:dashboard")),icon:is},{name:u("navigation:invoicesSection"),icon:wi,children:[{name:u("common:all"),href:"/".concat(u("routes:invoices"))},{name:u("common:create"),href:"/".concat(u("routes:invoices"),"/").concat(u("routes:new"))}]},{name:u("navigation:clients"),href:"/".concat(u("routes:clients")),icon:os},{name:u("navigation:reports"),href:"/".concat(u("routes:reports")),icon:Vi},{name:u("navigation:pricing"),icon:gi,href:"/".concat(u("routes:pricing"))},{name:u("navigation:settings"),icon:$i,children:[{name:"Subscription",href:"/subscription"},{name:u("navigation:settings"),href:"/".concat(u("routes:settings"))}]},{name:u("navigation:legal"),icon:ji,children:[{name:u("navigation:terms"),href:"/".concat(u("routes:terms"))},{name:u("navigation:privacy"),href:"/".concat(u("routes:privacy"))}]}],p=e=>r.pathname===e;return(0,sn.jsx)("div",{className:"fixed inset-y-0 left-0 z-50 w-64 bg-white dark:bg-gray-800 shadow-lg transform transition-transform duration-300 ease-in-out ".concat(t?"translate-x-0":"-translate-x-full lg:translate-x-0"),children:(0,sn.jsxs)("div",{className:"flex flex-col h-full pt-5 pb-4 overflow-y-auto",children:[(0,sn.jsx)("div",{className:"flex flex-col items-start flex-shrink-0 px-4",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-600 flex items-center justify-center",children:(0,sn.jsx)(wi,{className:"h-6 w-6 text-white"})}),(0,sn.jsx)("span",{className:"ml-3 text-xl font-bold text-gray-900",children:u("common:app.name")})]})}),(0,sn.jsx)("nav",{className:"mt-8 flex-1 px-2 space-y-1",children:h.map(e=>{return(0,sn.jsx)("div",{children:e.children?(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("button",{onClick:()=>{e.name===u("navigation:invoicesSection")?a(!s):e.name===u("navigation:legal")?l(!o):e.name===u("navigation:settings")&&d(!c)},className:"w-full group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat((t=e.children,t.some(e=>r.pathname.startsWith(e.href))?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900")),children:[(0,sn.jsx)(e.icon,{className:"mr-3 h-5 w-5 flex-shrink-0 text-gray-400 group-hover:text-gray-500"}),e.name,e.name===u("navigation:invoicesSection")&&s||e.name===u("navigation:legal")&&o||e.name===u("navigation:settings")&&c?(0,sn.jsx)(di,{className:"ml-auto h-4 w-4 text-gray-400"}):(0,sn.jsx)(hi,{className:"ml-auto h-4 w-4 text-gray-400"})]}),e.name===u("navigation:invoicesSection")&&s&&(0,sn.jsx)("div",{className:"pl-10 mt-1 space-y-1",children:e.children.map(e=>(0,sn.jsx)(Ur,{to:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(p(e.href)?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>n(!1),children:e.name},e.name))}),e.name===u("navigation:settings")&&c&&(0,sn.jsx)("div",{className:"pl-10 mt-1 space-y-1",children:e.children.map(e=>(0,sn.jsx)(Ur,{to:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(p(e.href)?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>n(!1),children:e.name},e.name))}),e.name===u("navigation:legal")&&o&&(0,sn.jsx)("div",{className:"pl-10 mt-1 space-y-1",children:e.children.map(e=>(0,sn.jsx)(Ur,{to:e.href,className:"group flex items-center px-2 py-2 text-sm font-medium rounded-md ".concat(p(e.href)?"bg-primary-50 text-primary-700":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>n(!1),children:e.name},e.name))})]}):(0,sn.jsxs)(Ur,{to:e.href,className:"group flex flex-col px-2 py-2 text-sm font-medium rounded-md ".concat(p(e.href)?"bg-primary-50 text-primary-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"),onClick:()=>n(!1),children:[(0,sn.jsxs)("div",{className:"flex items-center w-full",children:[(0,sn.jsx)(e.icon,{className:"mr-3 h-5 w-5 flex-shrink-0 text-gray-400 group-hover:text-gray-500"}),e.name]}),e.description&&(0,sn.jsx)("div",{className:"text-xs text-gray-500 mt-1 ml-8",children:e.description})]})},e.name);var t})}),(0,sn.jsxs)("div",{className:"px-4 mt-auto pt-4 border-t border-gray-200",children:[(0,sn.jsx)("div",{className:"text-xs font-semibold text-gray-500 uppercase tracking-wider mb-2",children:u("navigation:sidebar.quickActions")}),(0,sn.jsxs)("div",{className:"space-y-2",children:[(0,sn.jsxs)(Ur,{to:"/".concat(u("routes:invoices"),"/").concat(u("routes:new")),className:"flex items-center px-3 py-2 text-sm font-medium rounded-md bg-primary-50 text-primary-700 hover:bg-primary-100",onClick:()=>n(!1),children:[(0,sn.jsx)(qi,{className:"mr-2 h-4 w-4"}),u("navigation:sidebar.createInvoice")]}),(0,sn.jsxs)(Ur,{to:"/".concat(u("routes:clients")),className:"flex items-center px-3 py-2 text-sm font-medium rounded-md bg-gray-50 text-gray-700 hover:bg-gray-100",onClick:()=>n(!1),children:[(0,sn.jsx)(os,{className:"mr-2 h-4 w-4"}),u("navigation:sidebar.createClient")]})]})]}),(0,sn.jsx)(gs,{})]})})},ys=()=>{const{t:e}=nn(["common","navigation"]);return(0,sn.jsx)("footer",{className:"bg-white border-t border-gray-200",children:(0,sn.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,sn.jsxs)("div",{className:"md:flex md:items-center md:justify-between",children:[(0,sn.jsx)("div",{className:"text-center md:text-left",children:(0,sn.jsxs)("p",{className:"text-sm text-gray-500",children:["\xa9 ",(new Date).getFullYear()," ",e("common:app.name"),". All rights reserved."]})}),(0,sn.jsxs)("div",{className:"mt-4 flex justify-center space-x-6 md:mt-0",children:[(0,sn.jsx)(Ur,{to:"/pricing",className:"text-sm text-gray-500 hover:text-gray-700",children:e("navigation:pricing")}),(0,sn.jsx)(Ur,{to:"/terms",className:"text-sm text-gray-500 hover:text-gray-700",children:e("navigation:terms")}),(0,sn.jsx)(Ur,{to:"/privacy",className:"text-sm text-gray-500 hover:text-gray-700",children:e("navigation:privacy")}),(0,sn.jsx)(Ur,{to:"/legal",className:"text-sm text-gray-500 hover:text-gray-700",children:e("navigation:legal")})]})]})})})},xs=()=>{const e=Q(),{t:t}=nn(["navigation","routes"]),n=[{name:t("navigation:dashboard"),href:"/".concat(t("routes:dashboard")),icon:_i},{name:t("navigation:invoices"),href:"/".concat(t("routes:invoices")),icon:wi},{name:t("navigation:create"),href:"/".concat(t("routes:invoices"),"/").concat(t("routes:new")),icon:qi,isCreate:!0},{name:t("navigation:clients"),href:"/".concat(t("routes:clients")),icon:os},{name:t("navigation:settings"),href:"/".concat(t("routes:settings")),icon:$i}];return(0,sn.jsx)("nav",{className:"mobile-nav safe-area-inset-bottom md:hidden",children:(0,sn.jsx)("div",{className:"flex justify-around",children:n.map(n=>{const r=n.icon,i=(s=n.href)==="/".concat(t("routes:dashboard"))?e.pathname===s||"/"===e.pathname:e.pathname.startsWith(s);var s;return(0,sn.jsxs)(Ur,{to:n.href,className:"mobile-nav-item ".concat(i?"active":""," ").concat(n.isCreate?"relative":""),children:[n.isCreate?(0,sn.jsx)("div",{className:"bg-primary-600 text-white rounded-full p-2 -mt-2 shadow-lg",children:(0,sn.jsx)(r,{className:"mobile-nav-icon"})}):(0,sn.jsx)(r,{className:"mobile-nav-icon"}),(0,sn.jsx)("span",{className:"text-xs font-medium",children:n.name})]},n.name)})})})},bs=()=>{const[e,t]=(0,i.useState)(!1);return(0,sn.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[e&&(0,sn.jsx)("div",{className:"fixed inset-0 z-40 bg-gray-600 bg-opacity-75 lg:hidden",onClick:()=>t(!1)}),(0,sn.jsx)(vs,{sidebarOpen:e,setSidebarOpen:t}),(0,sn.jsxs)("div",{className:"lg:pl-64 flex flex-col min-h-screen",children:[(0,sn.jsx)(fs,{sidebarOpen:e,setSidebarOpen:t}),(0,sn.jsx)("main",{className:"flex-1 pb-20 md:pb-8",children:(0,sn.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:(0,sn.jsx)(ye,{})})}),(0,sn.jsx)(ys,{})]}),(0,sn.jsx)(xs,{})]})};function ws(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const js=["children","variant","size","disabled","loading","leftIcon","rightIcon","className"],Ns=["children","className","hover"],ks=["children","className"],As=["error","className"],Ss=e=>{let{children:t,variant:n="primary",size:r="md",disabled:i=!1,loading:s=!1,leftIcon:a,rightIcon:o,className:l=""}=e,c=ws(e,js);return(0,sn.jsxs)("button",(0,Ne.A)((0,Ne.A)({className:"".concat("inline-flex items-center justify-center font-medium rounded-md transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed"," ").concat({primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500 shadow-sm hover:shadow-md",secondary:"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 focus:ring-primary-500 shadow-sm hover:shadow-md",ghost:"bg-transparent text-gray-600 hover:bg-gray-100 hover:text-gray-900 focus:ring-primary-500",danger:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm hover:shadow-md"}[n]," ").concat({sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"}[r]," ").concat(l),disabled:i||s},c),{},{children:[s&&(0,sn.jsx)(Mi,{className:"animate-spin mr-2 h-4 w-4"}),a&&!s&&(0,sn.jsx)("span",{className:"mr-2",children:a}),t,o&&(0,sn.jsx)("span",{className:"ml-2",children:o})]}))},_s=e=>{let{children:t,className:n="",hover:r=!1}=e,i=ws(e,Ns);return(0,sn.jsx)("div",(0,Ne.A)((0,Ne.A)({className:"bg-white rounded-lg shadow-sm border border-gray-200 ".concat(r?"hover:shadow-md transition-shadow duration-200":""," ").concat(n)},i),{},{children:t}))},Cs=e=>{let{children:t,className:n=""}=e,r=ws(e,ks);return(0,sn.jsx)("div",(0,Ne.A)((0,Ne.A)({className:"px-6 py-4 ".concat(n)},r),{},{children:t}))},Es=e=>{let{title:t,subtitle:n,actions:r,breadcrumbs:i}=e;return(0,sn.jsxs)("div",{className:"mb-8",children:[i&&(0,sn.jsx)("nav",{className:"mb-4",children:(0,sn.jsx)("ol",{className:"flex items-center space-x-2 text-sm",children:i.map((e,t)=>(0,sn.jsx)("li",{children:t<i.length-1?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("a",{href:e.href,className:"text-gray-500 hover:text-gray-700",children:e.label}),(0,sn.jsx)("span",{className:"text-gray-400 mx-2",children:"/"})]}):(0,sn.jsx)("span",{className:"text-gray-900 font-medium",children:e.label})},t))})}),(0,sn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:t}),n&&(0,sn.jsx)("p",{className:"text-gray-600 mt-1",children:n})]}),r&&(0,sn.jsx)("div",{className:"flex space-x-3",children:r})]})]})},Ps=e=>{let{label:t,children:n,error:r,required:i=!1,className:s=""}=e;return(0,sn.jsxs)("div",{className:s,children:[t&&(0,sn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t,i&&(0,sn.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),n,r&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:r})]})},Ts=e=>{let{error:t,className:n=""}=e,r=ws(e,As);return(0,sn.jsx)("input",(0,Ne.A)({className:"block w-full px-3 py-2 border rounded-md text-sm shadow-sm placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-primary-500 ".concat(t?"border-red-300":"border-gray-300"," ").concat(n)},r))},Ms=()=>{const[e,t]=(0,i.useState)(""),[n,r]=(0,i.useState)(""),[s,a]=(0,i.useState)(!1),{login:o}=mn(),l=ee(),{t:c}=nn(["common","login","routes"]);return(0,sn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,sn.jsx)("div",{className:"max-w-md w-full",children:(0,sn.jsx)(_s,{className:"shadow-xl",children:(0,sn.jsxs)(Cs,{className:"p-8",children:[(0,sn.jsxs)("div",{className:"text-center mb-8",children:[(0,sn.jsx)("h2",{className:"text-3xl font-bold text-gray-900",children:c("login:title")}),(0,sn.jsxs)("p",{className:"mt-2 text-sm text-gray-600",children:[c("login:subtitle")," ",(0,sn.jsx)(Ur,{to:"/".concat(c("routes:register")),className:"font-medium text-primary-600 hover:text-primary-500",children:c("login:register")})]}),(0,sn.jsx)("p",{className:"mt-4 text-lg font-semibold text-primary-600",children:c("login:taxIntegration")})]}),(0,sn.jsxs)("form",{className:"space-y-6",onSubmit:async t=>{t.preventDefault(),a(!0);try{const t=await o(e,n);t.success?(Bt.success(c("common:success")),l("/".concat(c("routes:dashboard")),{replace:!0})):Bt.error(t.message||c("common:error"))}catch(r){Bt.error(r.message||c("common:error"))}finally{a(!1)}},children:[(0,sn.jsx)(Ps,{label:c("login:email"),children:(0,sn.jsx)(Ts,{type:"email",placeholder:c("login:emailPlaceholder"),value:e,onChange:e=>t(e.target.value),required:!0})}),(0,sn.jsx)(Ps,{label:c("login:password"),children:(0,sn.jsx)(Ts,{type:"password",placeholder:c("login:passwordPlaceholder"),value:n,onChange:e=>r(e.target.value),required:!0})}),(0,sn.jsx)(Ss,{type:"submit",loading:s,className:"w-full",children:c("login:submit")})]})]})})})})},Ds=["_f"],Os=["name"],Rs=["_f"],Is=["ref","message","type"],Ls=["formControl"];var Fs=e=>"checkbox"===e.type,Bs=e=>e instanceof Date,zs=e=>null==e;const Ws=e=>"object"===typeof e;var Us=e=>!zs(e)&&!Array.isArray(e)&&Ws(e)&&!Bs(e),Vs=e=>Us(e)&&e.target?Fs(e.target)?e.target.checked:e.target.value:e,Hs=(e,t)=>e.has((e=>e.substring(0,e.search(/\.\d+(\.|$)/))||e)(t)),qs="undefined"!==typeof window&&"undefined"!==typeof window.HTMLElement&&"undefined"!==typeof document;function Gs(e){let t;const n=Array.isArray(e),r="undefined"!==typeof FileList&&e instanceof FileList;if(e instanceof Date)t=new Date(e);else{if(qs&&(e instanceof Blob||r)||!n&&!Us(e))return e;if(t=n?[]:Object.create(Object.getPrototypeOf(e)),n||(e=>{const t=e.constructor&&e.constructor.prototype;return Us(t)&&t.hasOwnProperty("isPrototypeOf")})(e))for(const n in e)e.hasOwnProperty(n)&&(t[n]=Gs(e[n]));else t=e}return t}var Ks=e=>/^\w*$/.test(e),Ys=e=>void 0===e,Xs=e=>Array.isArray(e)?e.filter(Boolean):[],Js=e=>Xs(e.replace(/["|']|\]/g,"").split(/\.|\[/)),$s=(e,t,n)=>{if(!t||!Us(e))return n;const r=(Ks(t)?[t]:Js(t)).reduce((e,t)=>zs(e)?e:e[t],e);return Ys(r)||r===e?Ys(e[t])?n:e[t]:r},Qs=e=>"boolean"===typeof e,Zs=(e,t,n)=>{let r=-1;const i=Ks(t)?[t]:Js(t),s=i.length,a=s-1;for(;++r<s;){const t=i[r];let s=n;if(r!==a){const n=e[t];s=Us(n)||Array.isArray(n)?n:isNaN(+i[r+1])?{}:[]}if("__proto__"===t||"constructor"===t||"prototype"===t)return;e[t]=s,e=e[t]}};const ea="blur",ta="focusout",na="onBlur",ra="onChange",ia="onSubmit",sa="onTouched",aa="all",oa="max",la="min",ca="maxLength",da="minLength",ua="pattern",ha="required",pa="validate",ma=i.createContext(null);ma.displayName="HookFormContext";var fa=function(e,t,n){let r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];const i={defaultValues:t._defaultValues};for(const s in e)Object.defineProperty(i,s,{get:()=>{const i=s;return t._proxyFormState[i]!==aa&&(t._proxyFormState[i]=!r||aa),n&&(n[i]=!0),e[i]}});return i};const ga="undefined"!==typeof window?i.useLayoutEffect:i.useEffect;var va=e=>"string"===typeof e,ya=(e,t,n,r,i)=>va(e)?(r&&t.watch.add(e),$s(n,e,i)):Array.isArray(e)?e.map(e=>(r&&t.watch.add(e),$s(n,e))):(r&&(t.watchAll=!0),n),xa=e=>zs(e)||!Ws(e);function ba(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new WeakSet;if(xa(e)||xa(t))return e===t;if(Bs(e)&&Bs(t))return e.getTime()===t.getTime();const r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;if(n.has(e)||n.has(t))return!0;n.add(e),n.add(t);for(const s of r){const r=e[s];if(!i.includes(s))return!1;if("ref"!==s){const e=t[s];if(Bs(r)&&Bs(e)||Us(r)&&Us(e)||Array.isArray(r)&&Array.isArray(e)?!ba(r,e,n):r!==e)return!1}}return!0}var wa=(e,t,n,r,i)=>t?(0,Ne.A)((0,Ne.A)({},n[e]),{},{types:(0,Ne.A)((0,Ne.A)({},n[e]&&n[e].types?n[e].types:{}),{},{[r]:i||!0})}):{},ja=e=>Array.isArray(e)?e:[e],Na=()=>{let e=[];return{get observers(){return e},next:t=>{for(const n of e)n.next&&n.next(t)},subscribe:t=>(e.push(t),{unsubscribe:()=>{e=e.filter(e=>e!==t)}}),unsubscribe:()=>{e=[]}}},ka=e=>Us(e)&&!Object.keys(e).length,Aa=e=>"file"===e.type,Sa=e=>"function"===typeof e,_a=e=>{if(!qs)return!1;const t=e?e.ownerDocument:0;return e instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},Ca=e=>"select-multiple"===e.type,Ea=e=>"radio"===e.type,Pa=e=>_a(e)&&e.isConnected;function Ta(e,t){const n=Array.isArray(t)?t:Ks(t)?[t]:Js(t),r=1===n.length?e:function(e,t){const n=t.slice(0,-1).length;let r=0;for(;r<n;)e=Ys(e)?r++:e[t[r++]];return e}(e,n),i=n.length-1,s=n[i];return r&&delete r[s],0!==i&&(Us(r)&&ka(r)||Array.isArray(r)&&function(e){for(const t in e)if(e.hasOwnProperty(t)&&!Ys(e[t]))return!1;return!0}(r))&&Ta(e,n.slice(0,-1)),e}var Ma=e=>{for(const t in e)if(Sa(e[t]))return!0;return!1};function Da(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=Array.isArray(e);if(Us(e)||n)for(const r in e)Array.isArray(e[r])||Us(e[r])&&!Ma(e[r])?(t[r]=Array.isArray(e[r])?[]:{},Da(e[r],t[r])):zs(e[r])||(t[r]=!0);return t}function Oa(e,t,n){const r=Array.isArray(e);if(Us(e)||r)for(const i in e)Array.isArray(e[i])||Us(e[i])&&!Ma(e[i])?Ys(t)||xa(n[i])?n[i]=Array.isArray(e[i])?Da(e[i],[]):(0,Ne.A)({},Da(e[i])):Oa(e[i],zs(t)?{}:t[i],n[i]):n[i]=!ba(e[i],t[i]);return n}var Ra=(e,t)=>Oa(e,t,Da(t));const Ia={value:!1,isValid:!1},La={value:!0,isValid:!0};var Fa=e=>{if(Array.isArray(e)){if(e.length>1){const t=e.filter(e=>e&&e.checked&&!e.disabled).map(e=>e.value);return{value:t,isValid:!!t.length}}return e[0].checked&&!e[0].disabled?e[0].attributes&&!Ys(e[0].attributes.value)?Ys(e[0].value)||""===e[0].value?La:{value:e[0].value,isValid:!0}:La:Ia}return Ia},Ba=(e,t)=>{let{valueAsNumber:n,valueAsDate:r,setValueAs:i}=t;return Ys(e)?e:n?""===e?NaN:e?+e:e:r&&va(e)?new Date(e):i?i(e):e};const za={isValid:!1,value:null};var Wa=e=>Array.isArray(e)?e.reduce((e,t)=>t&&t.checked&&!t.disabled?{isValid:!0,value:t.value}:e,za):za;function Ua(e){const t=e.ref;return Aa(t)?t.files:Ea(t)?Wa(e.refs).value:Ca(t)?[...t.selectedOptions].map(e=>{let{value:t}=e;return t}):Fs(t)?Fa(e.refs).value:Ba(Ys(t.value)?e.ref.value:t.value,e)}var Va=e=>e instanceof RegExp,Ha=e=>Ys(e)?e:Va(e)?e.source:Us(e)?Va(e.value)?e.value.source:e.value:e,qa=e=>({isOnSubmit:!e||e===ia,isOnBlur:e===na,isOnChange:e===ra,isOnAll:e===aa,isOnTouch:e===sa});const Ga="AsyncFunction";var Ka=e=>!!e&&!!e.validate&&!!(Sa(e.validate)&&e.validate.constructor.name===Ga||Us(e.validate)&&Object.values(e.validate).find(e=>e.constructor.name===Ga)),Ya=(e,t,n)=>!n&&(t.watchAll||t.watch.has(e)||[...t.watch].some(t=>e.startsWith(t)&&/^\.\w+/.test(e.slice(t.length))));const Xa=(e,t,n,r)=>{for(const i of n||Object.keys(e)){const n=$s(e,i);if(n){const{_f:e}=n,s=ws(n,Ds);if(e){if(e.refs&&e.refs[0]&&t(e.refs[0],i)&&!r)return!0;if(e.ref&&t(e.ref,e.name)&&!r)return!0;if(Xa(s,t))break}else if(Us(s)&&Xa(s,t))break}}};function Ja(e,t,n){const r=$s(e,n);if(r||Ks(n))return{error:r,name:n};const i=n.split(".");for(;i.length;){const r=i.join("."),s=$s(t,r),a=$s(e,r);if(s&&!Array.isArray(s)&&n!==r)return{name:n};if(a&&a.type)return{name:r,error:a};if(a&&a.root&&a.root.type)return{name:"".concat(r,".root"),error:a.root};i.pop()}return{name:n}}var $a=(e,t,n)=>{const r=ja($s(e,n));return Zs(r,"root",t[n]),Zs(e,n,r),e},Qa=e=>va(e);function Za(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"validate";if(Qa(e)||Array.isArray(e)&&e.every(Qa)||Qs(e)&&!e)return{type:n,message:Qa(e)?e:"",ref:t}}var eo=e=>Us(e)&&!Va(e)?e:{value:e,message:""},to=async(e,t,n,r,i,s)=>{const{ref:a,refs:o,required:l,maxLength:c,minLength:d,min:u,max:h,pattern:p,validate:m,name:f,valueAsNumber:g,mount:v}=e._f,y=$s(n,f);if(!v||t.has(f))return{};const x=o?o[0]:a,b=e=>{i&&x.reportValidity&&(x.setCustomValidity(Qs(e)?"":e||""),x.reportValidity())},w={},j=Ea(a),N=Fs(a),k=j||N,A=(g||Aa(a))&&Ys(a.value)&&Ys(y)||_a(a)&&""===a.value||""===y||Array.isArray(y)&&!y.length,S=wa.bind(null,f,r,w),_=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ca,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:da;const s=e?t:n;w[f]=(0,Ne.A)({type:e?r:i,message:s,ref:a},S(e?r:i,s))};if(s?!Array.isArray(y)||!y.length:l&&(!k&&(A||zs(y))||Qs(y)&&!y||N&&!Fa(o).isValid||j&&!Wa(o).isValid)){const{value:e,message:t}=Qa(l)?{value:!!l,message:l}:eo(l);if(e&&(w[f]=(0,Ne.A)({type:ha,message:t,ref:x},S(ha,t)),!r))return b(t),w}if(!A&&(!zs(u)||!zs(h))){let e,t;const n=eo(h),i=eo(u);if(zs(y)||isNaN(y)){const r=a.valueAsDate||new Date(y),s=e=>new Date((new Date).toDateString()+" "+e),o="time"==a.type,l="week"==a.type;va(n.value)&&y&&(e=o?s(y)>s(n.value):l?y>n.value:r>new Date(n.value)),va(i.value)&&y&&(t=o?s(y)<s(i.value):l?y<i.value:r<new Date(i.value))}else{const r=a.valueAsNumber||(y?+y:y);zs(n.value)||(e=r>n.value),zs(i.value)||(t=r<i.value)}if((e||t)&&(_(!!e,n.message,i.message,oa,la),!r))return b(w[f].message),w}if((c||d)&&!A&&(va(y)||s&&Array.isArray(y))){const e=eo(c),t=eo(d),n=!zs(e.value)&&y.length>+e.value,i=!zs(t.value)&&y.length<+t.value;if((n||i)&&(_(n,e.message,t.message),!r))return b(w[f].message),w}if(p&&!A&&va(y)){const{value:e,message:t}=eo(p);if(Va(e)&&!y.match(e)&&(w[f]=(0,Ne.A)({type:ua,message:t,ref:a},S(ua,t)),!r))return b(t),w}if(m)if(Sa(m)){const e=Za(await m(y,n),x);if(e&&(w[f]=(0,Ne.A)((0,Ne.A)({},e),S(pa,e.message)),!r))return b(e.message),w}else if(Us(m)){let e={};for(const t in m){if(!ka(e)&&!r)break;const i=Za(await m[t](y,n),x,t);i&&(e=(0,Ne.A)((0,Ne.A)({},i),S(t,i.message)),b(i.message),r&&(w[f]=e))}if(!ka(e)&&(w[f]=(0,Ne.A)({ref:x},e),!r))return w}return b(!0),w};const no={mode:ia,reValidateMode:ra,shouldFocusError:!0};function ro(){let e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=(0,Ne.A)((0,Ne.A)({},no),t),r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Sa(n.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1},i={},s=(Us(n.defaultValues)||Us(n.values))&&Gs(n.defaultValues||n.values)||{},a=n.shouldUnregister?{}:Gs(s),o={action:!1,mount:!1,watch:!1},l={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},c=0;const d={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let u=(0,Ne.A)({},d);const h={array:Na(),state:Na()},p=n.criteriaMode===aa,m=async e=>{if(!n.disabled&&(d.isValid||u.isValid||e)){const e=n.resolver?ka((await x()).errors):await b(i,!0);e!==r.isValid&&h.state.next({isValid:e})}},f=(e,t)=>{!n.disabled&&(d.isValidating||d.validatingFields||u.isValidating||u.validatingFields)&&((e||Array.from(l.mount)).forEach(e=>{e&&(t?Zs(r.validatingFields,e,t):Ta(r.validatingFields,e))}),h.state.next({validatingFields:r.validatingFields,isValidating:!ka(r.validatingFields)}))},g=(e,t,n,r)=>{const l=$s(i,e);if(l){const i=$s(a,e,Ys(n)?$s(s,e):n);Ys(i)||r&&r.defaultChecked||t?Zs(a,e,t?i:Ua(l._f)):N(e,i),o.mount&&m()}},v=(e,t,i,a,o)=>{let l=!1,c=!1;const p={name:e};if(!n.disabled){if(!i||a){(d.isDirty||u.isDirty)&&(c=r.isDirty,r.isDirty=p.isDirty=w(),l=c!==p.isDirty);const n=ba($s(s,e),t);c=!!$s(r.dirtyFields,e),n?Ta(r.dirtyFields,e):Zs(r.dirtyFields,e,!0),p.dirtyFields=r.dirtyFields,l=l||(d.dirtyFields||u.dirtyFields)&&c!==!n}if(i){const t=$s(r.touchedFields,e);t||(Zs(r.touchedFields,e,i),p.touchedFields=r.touchedFields,l=l||(d.touchedFields||u.touchedFields)&&t!==i)}l&&o&&h.state.next(p)}return l?p:{}},y=(t,i,s,a)=>{const o=$s(r.errors,t),l=(d.isValid||u.isValid)&&Qs(i)&&r.isValid!==i;if(n.delayError&&s?(e=(e=>t=>{clearTimeout(c),c=setTimeout(e,t)})(()=>((e,t)=>{Zs(r.errors,e,t),h.state.next({errors:r.errors})})(t,s)),e(n.delayError)):(clearTimeout(c),e=null,s?Zs(r.errors,t,s):Ta(r.errors,t)),(s?!ba(o,s):o)||!ka(a)||l){const e=(0,Ne.A)((0,Ne.A)((0,Ne.A)({},a),l&&Qs(i)?{isValid:i}:{}),{},{errors:r.errors,name:t});r=(0,Ne.A)((0,Ne.A)({},r),e),h.state.next(e)}},x=async e=>{f(e,!0);const t=await n.resolver(a,n.context,((e,t,n,r)=>{const i={};for(const s of e){const e=$s(t,s);e&&Zs(i,s,e._f)}return{criteriaMode:n,names:[...e],fields:i,shouldUseNativeValidation:r}})(e||l.mount,i,n.criteriaMode,n.shouldUseNativeValidation));return f(e),t},b=async function(e,t){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{valid:!0};for(const s in e){const o=e[s];if(o){const{_f:e}=o,c=ws(o,Rs);if(e){const c=l.array.has(e.name),u=o._f&&Ka(o._f);u&&d.validatingFields&&f([s],!0);const h=await to(o,l.disabled,a,p,n.shouldUseNativeValidation&&!t,c);if(u&&d.validatingFields&&f([s]),h[e.name]&&(i.valid=!1,t))break;!t&&($s(h,e.name)?c?$a(r.errors,h,e.name):Zs(r.errors,e.name,h[e.name]):Ta(r.errors,e.name))}!ka(c)&&await b(c,t,i)}}return i.valid},w=(e,t)=>!n.disabled&&(e&&t&&Zs(a,e,t),!ba(E(),s)),j=(e,t,n)=>ya(e,l,(0,Ne.A)({},o.mount?a:Ys(t)?s:va(e)?{[e]:t}:t),n,t),N=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=$s(i,e);let s=t;if(r){const n=r._f;n&&(!n.disabled&&Zs(a,e,Ba(t,n)),s=_a(n.ref)&&zs(t)?"":t,Ca(n.ref)?[...n.ref.options].forEach(e=>e.selected=s.includes(e.value)):n.refs?Fs(n.ref)?n.refs.forEach(e=>{e.defaultChecked&&e.disabled||(Array.isArray(s)?e.checked=!!s.find(t=>t===e.value):e.checked=s===e.value||!!s)}):n.refs.forEach(e=>e.checked=e.value===s):Aa(n.ref)?n.ref.value="":(n.ref.value=s,n.ref.type||h.state.next({name:e,values:Gs(a)})))}(n.shouldDirty||n.shouldTouch)&&v(e,s,n.shouldTouch,n.shouldDirty,!0),n.shouldValidate&&C(e)},k=(e,t,n)=>{for(const r in t){if(!t.hasOwnProperty(r))return;const s=t[r],a=e+"."+r,o=$s(i,a);(l.array.has(e)||Us(s)||o&&!o._f)&&!Bs(s)?k(a,s,n):N(a,s,n)}},A=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const c=$s(i,e),p=l.array.has(e),m=Gs(t);Zs(a,e,m),p?(h.array.next({name:e,values:Gs(a)}),(d.isDirty||d.dirtyFields||u.isDirty||u.dirtyFields)&&n.shouldDirty&&h.state.next({name:e,dirtyFields:Ra(s,a),isDirty:w(e,m)})):!c||c._f||zs(m)?N(e,m,n):k(e,m,n),Ya(e,l)&&h.state.next((0,Ne.A)((0,Ne.A)({},r),{},{name:e})),h.state.next({name:o.mount?e:void 0,values:Gs(a)})},S=async t=>{o.mount=!0;const s=t.target;let c=s.name,g=!0;const w=$s(i,c),j=e=>{g=Number.isNaN(e)||Bs(e)&&isNaN(e.getTime())||ba(e,$s(a,c,e))},N=qa(n.mode),k=qa(n.reValidateMode);if(w){let o,S;const _=s.type?Ua(w._f):Vs(t),E=t.type===ea||t.type===ta,P=!((A=w._f).mount&&(A.required||A.min||A.max||A.maxLength||A.minLength||A.pattern||A.validate))&&!n.resolver&&!$s(r.errors,c)&&!w._f.deps||((e,t,n,r,i)=>!i.isOnAll&&(!n&&i.isOnTouch?!(t||e):(n?r.isOnBlur:i.isOnBlur)?!e:!(n?r.isOnChange:i.isOnChange)||e))(E,$s(r.touchedFields,c),r.isSubmitted,k,N),T=Ya(c,l,E);Zs(a,c,_),E?s&&s.readOnly||(w._f.onBlur&&w._f.onBlur(t),e&&e(0)):w._f.onChange&&w._f.onChange(t);const M=v(c,_,E),D=!ka(M)||T;if(!E&&h.state.next({name:c,type:t.type,values:Gs(a)}),P)return(d.isValid||u.isValid)&&("onBlur"===n.mode?E&&m():E||m()),D&&h.state.next((0,Ne.A)({name:c},T?{}:M));if(!E&&T&&h.state.next((0,Ne.A)({},r)),n.resolver){const{errors:e}=await x([c]);if(j(_),g){const t=Ja(r.errors,i,c),n=Ja(e,i,t.name||c);o=n.error,c=n.name,S=ka(e)}}else f([c],!0),o=(await to(w,l.disabled,a,p,n.shouldUseNativeValidation))[c],f([c]),j(_),g&&(o?S=!1:(d.isValid||u.isValid)&&(S=await b(i,!0)));g&&(w._f.deps&&C(w._f.deps),y(c,S,o,M))}var A},_=(e,t)=>{if($s(r.errors,t)&&e.focus)return e.focus(),1},C=async function(e){let t,s,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const o=ja(e);if(n.resolver){const n=await(async e=>{const{errors:t}=await x(e);if(e)for(const n of e){const e=$s(t,n);e?Zs(r.errors,n,e):Ta(r.errors,n)}else r.errors=t;return t})(Ys(e)?e:o);t=ka(n),s=e?!o.some(e=>$s(n,e)):t}else e?(s=(await Promise.all(o.map(async e=>{const t=$s(i,e);return await b(t&&t._f?{[e]:t}:t)}))).every(Boolean),(s||r.isValid)&&m()):s=t=await b(i);return h.state.next((0,Ne.A)((0,Ne.A)((0,Ne.A)({},!va(e)||(d.isValid||u.isValid)&&t!==r.isValid?{}:{name:e}),n.resolver||!e?{isValid:t}:{}),{},{errors:r.errors})),a.shouldFocus&&!s&&Xa(i,_,e?o:l.mount),s},E=e=>{const t=(0,Ne.A)({},o.mount?a:s);return Ys(e)?t:va(e)?$s(t,e):e.map(e=>$s(t,e))},P=(e,t)=>({invalid:!!$s((t||r).errors,e),isDirty:!!$s((t||r).dirtyFields,e),error:$s((t||r).errors,e),isValidating:!!$s(r.validatingFields,e),isTouched:!!$s((t||r).touchedFields,e)}),T=(e,t,n)=>{const s=($s(i,e,{_f:{}})._f||{}).ref,a=$s(r.errors,e)||{},{ref:o,message:l,type:c}=a,d=ws(a,Is);Zs(r.errors,e,(0,Ne.A)((0,Ne.A)((0,Ne.A)({},d),t),{},{ref:s})),h.state.next({name:e,errors:r.errors,isValid:!1}),n&&n.shouldFocus&&s&&s.focus&&s.focus()},M=e=>h.state.subscribe({next:t=>{var n,i,o;n=e.name,i=t.name,o=e.exact,n&&i&&n!==i&&!ja(n).some(e=>e&&(o?e===i:e.startsWith(i)||i.startsWith(e)))||!((e,t,n,r)=>{n(e);const{name:i}=e,s=ws(e,Os);return ka(s)||Object.keys(s).length>=Object.keys(t).length||Object.keys(s).find(e=>t[e]===(!r||aa))})(t,e.formState||d,z,e.reRenderRoot)||e.callback((0,Ne.A)((0,Ne.A)((0,Ne.A)({values:(0,Ne.A)({},a)},r),t),{},{defaultValues:s}))}}).unsubscribe,D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};for(const o of e?ja(e):l.mount)l.mount.delete(o),l.array.delete(o),t.keepValue||(Ta(i,o),Ta(a,o)),!t.keepError&&Ta(r.errors,o),!t.keepDirty&&Ta(r.dirtyFields,o),!t.keepTouched&&Ta(r.touchedFields,o),!t.keepIsValidating&&Ta(r.validatingFields,o),!n.shouldUnregister&&!t.keepDefaultValue&&Ta(s,o);h.state.next({values:Gs(a)}),h.state.next((0,Ne.A)((0,Ne.A)({},r),t.keepDirty?{isDirty:w()}:{})),!t.keepIsValid&&m()},O=e=>{let{disabled:t,name:n}=e;(Qs(t)&&o.mount||t||l.disabled.has(n))&&(t?l.disabled.add(n):l.disabled.delete(n))},R=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=$s(i,e);const a=Qs(t.disabled)||Qs(n.disabled);return Zs(i,e,(0,Ne.A)((0,Ne.A)({},r||{}),{},{_f:(0,Ne.A)((0,Ne.A)({},r&&r._f?r._f:{ref:{name:e}}),{},{name:e,mount:!0},t)})),l.mount.add(e),r?O({disabled:Qs(t.disabled)?t.disabled:n.disabled,name:e}):g(e,!0,t.value),(0,Ne.A)((0,Ne.A)((0,Ne.A)({},a?{disabled:t.disabled||n.disabled}:{}),n.progressive?{required:!!t.required,min:Ha(t.min),max:Ha(t.max),minLength:Ha(t.minLength),maxLength:Ha(t.maxLength),pattern:Ha(t.pattern)}:{}),{},{name:e,onChange:S,onBlur:S,ref:a=>{if(a){R(e,t),r=$s(i,e);const n=Ys(a.value)&&a.querySelectorAll&&a.querySelectorAll("input,select,textarea")[0]||a,o=(e=>Ea(e)||Fs(e))(n),l=r._f.refs||[];if(o?l.find(e=>e===n):n===r._f.ref)return;Zs(i,e,{_f:(0,Ne.A)((0,Ne.A)({},r._f),o?{refs:[...l.filter(Pa),n,...Array.isArray($s(s,e))?[{}]:[]],ref:{type:n.type,name:e}}:{ref:n})}),g(e,!1,void 0,n)}else r=$s(i,e,{}),r._f&&(r._f.mount=!1),(n.shouldUnregister||t.shouldUnregister)&&(!Hs(l.array,e)||!o.action)&&l.unMount.add(e)}})},I=()=>n.shouldFocusError&&Xa(i,_,l.mount),L=(e,t)=>async s=>{let o;s&&(s.preventDefault&&s.preventDefault(),s.persist&&s.persist());let c=Gs(a);if(h.state.next({isSubmitting:!0}),n.resolver){const{errors:e,values:t}=await x();r.errors=e,c=Gs(t)}else await b(i);if(l.disabled.size)for(const e of l.disabled)Ta(c,e);if(Ta(r.errors,"root"),ka(r.errors)){h.state.next({errors:{}});try{await e(c,s)}catch(d){o=d}}else t&&await t((0,Ne.A)({},r.errors),s),I(),setTimeout(I);if(h.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:ka(r.errors)&&!o,submitCount:r.submitCount+1,errors:r.errors}),o)throw o},F=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const c=e?Gs(e):s,u=Gs(c),p=ka(e),m=p?s:u;if(t.keepDefaultValues||(s=c),!t.keepValues){if(t.keepDirtyValues){const e=new Set([...l.mount,...Object.keys(Ra(s,a))]);for(const t of Array.from(e))$s(r.dirtyFields,t)?Zs(m,t,$s(a,t)):A(t,$s(m,t))}else{if(qs&&Ys(e))for(const e of l.mount){const t=$s(i,e);if(t&&t._f){const e=Array.isArray(t._f.refs)?t._f.refs[0]:t._f.ref;if(_a(e)){const t=e.closest("form");if(t){t.reset();break}}}}if(t.keepFieldsRef)for(const e of l.mount)A(e,$s(m,e));else i={}}a=n.shouldUnregister?t.keepDefaultValues?Gs(s):{}:Gs(m),h.array.next({values:(0,Ne.A)({},m)}),h.state.next({values:(0,Ne.A)({},m)})}l={mount:t.keepDirtyValues?l.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},o.mount=!d.isValid||!!t.keepIsValid||!!t.keepDirtyValues,o.watch=!!n.shouldUnregister,h.state.next({submitCount:t.keepSubmitCount?r.submitCount:0,isDirty:!p&&(t.keepDirty?r.isDirty:!(!t.keepDefaultValues||ba(e,s))),isSubmitted:!!t.keepIsSubmitted&&r.isSubmitted,dirtyFields:p?{}:t.keepDirtyValues?t.keepDefaultValues&&a?Ra(s,a):r.dirtyFields:t.keepDefaultValues&&e?Ra(s,e):t.keepDirty?r.dirtyFields:{},touchedFields:t.keepTouched?r.touchedFields:{},errors:t.keepErrors?r.errors:{},isSubmitSuccessful:!!t.keepIsSubmitSuccessful&&r.isSubmitSuccessful,isSubmitting:!1,defaultValues:s})},B=(e,t)=>F(Sa(e)?e(a):e,t),z=e=>{r=(0,Ne.A)((0,Ne.A)({},r),e)},W={control:{register:R,unregister:D,getFieldState:P,handleSubmit:L,setError:T,_subscribe:M,_runSchema:x,_focusError:I,_getWatch:j,_getDirty:w,_setValid:m,_setFieldArray:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=arguments.length>2?arguments[2]:void 0,c=arguments.length>3?arguments[3]:void 0,p=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],m=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];if(c&&l&&!n.disabled){if(o.action=!0,m&&Array.isArray($s(i,e))){const t=l($s(i,e),c.argA,c.argB);p&&Zs(i,e,t)}if(m&&Array.isArray($s(r.errors,e))){const t=l($s(r.errors,e),c.argA,c.argB);p&&Zs(r.errors,e,t),((e,t)=>{!Xs($s(e,t)).length&&Ta(e,t)})(r.errors,e)}if((d.touchedFields||u.touchedFields)&&m&&Array.isArray($s(r.touchedFields,e))){const t=l($s(r.touchedFields,e),c.argA,c.argB);p&&Zs(r.touchedFields,e,t)}(d.dirtyFields||u.dirtyFields)&&(r.dirtyFields=Ra(s,a)),h.state.next({name:e,isDirty:w(e,t),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Zs(a,e,t)},_setDisabledField:O,_setErrors:e=>{r.errors=e,h.state.next({errors:r.errors,isValid:!1})},_getFieldArray:e=>Xs($s(o.mount?a:s,e,n.shouldUnregister?$s(s,e,[]):[])),_reset:F,_resetDefaultValues:()=>Sa(n.defaultValues)&&n.defaultValues().then(e=>{B(e,n.resetOptions),h.state.next({isLoading:!1})}),_removeUnmounted:()=>{for(const e of l.unMount){const t=$s(i,e);t&&(t._f.refs?t._f.refs.every(e=>!Pa(e)):!Pa(t._f.ref))&&D(e)}l.unMount=new Set},_disableForm:e=>{Qs(e)&&(h.state.next({disabled:e}),Xa(i,(t,n)=>{const r=$s(i,n);r&&(t.disabled=r._f.disabled||e,Array.isArray(r._f.refs)&&r._f.refs.forEach(t=>{t.disabled=r._f.disabled||e}))},0,!1))},_subjects:h,_proxyFormState:d,get _fields(){return i},get _formValues(){return a},get _state(){return o},set _state(e){o=e},get _defaultValues(){return s},get _names(){return l},set _names(e){l=e},get _formState(){return r},get _options(){return n},set _options(e){n=(0,Ne.A)((0,Ne.A)({},n),e)}},subscribe:e=>(o.mount=!0,u=(0,Ne.A)((0,Ne.A)({},u),e.formState),M((0,Ne.A)((0,Ne.A)({},e),{},{formState:u}))),trigger:C,register:R,handleSubmit:L,watch:(e,t)=>Sa(e)?h.state.subscribe({next:n=>"values"in n&&e(j(void 0,t),n)}):j(e,t,!0),setValue:A,getValues:E,reset:B,resetField:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$s(i,e)&&(Ys(t.defaultValue)?A(e,Gs($s(s,e))):(A(e,t.defaultValue),Zs(s,e,Gs(t.defaultValue))),t.keepTouched||Ta(r.touchedFields,e),t.keepDirty||(Ta(r.dirtyFields,e),r.isDirty=t.defaultValue?w(e,Gs($s(s,e))):w()),t.keepError||(Ta(r.errors,e),d.isValid&&m()),h.state.next((0,Ne.A)({},r)))},clearErrors:e=>{e&&ja(e).forEach(e=>Ta(r.errors,e)),h.state.next({errors:e?r.errors:{}})},unregister:D,setError:T,setFocus:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=$s(i,e),r=n&&n._f;if(r){const e=r.refs?r.refs[0]:r.ref;e.focus&&(e.focus(),t.shouldSelect&&Sa(e.select)&&e.select())}},getFieldState:P};return(0,Ne.A)((0,Ne.A)({},W),{},{formControl:W})}const io=new class{async login(e,t){try{const n=(await zt.default.post("/auth/login",{email:e,password:t})).data;return n.token&&(localStorage.setItem("token",n.token),localStorage.setItem("user",JSON.stringify(n.user))),n}catch(n){throw console.error("Error logging in:",n),n}}async register(e){try{const t=(await zt.default.post("/auth/register",e)).data;return t.token&&(localStorage.setItem("token",t.token),localStorage.setItem("user",JSON.stringify(t.user))),t}catch(t){throw console.error("Error registering:",t),t}}logout(){localStorage.removeItem("token"),localStorage.removeItem("user")}getCurrentUser(){const e=localStorage.getItem("user");return e?JSON.parse(e):null}getToken(){return localStorage.getItem("token")}isAuthenticated(){return!!this.getToken()}};!function(e){if(!e||"undefined"==typeof document)return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}(':root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}\n');var so=e=>"number"==typeof e&&!isNaN(e),ao=e=>"string"==typeof e,oo=e=>"function"==typeof e,lo=e=>(0,i.isValidElement)(e)||ao(e)||oo(e)||so(e);function co(e){let{enter:t,exit:n,appendPosition:r=!1,collapse:s=!0,collapseDuration:a=300}=e;return function(e){let{children:o,position:l,preventExitTransition:c,done:d,nodeRef:u,isIn:h,playToast:p}=e,m=r?"".concat(t,"--").concat(l):t,f=r?"".concat(n,"--").concat(l):n,g=(0,i.useRef)(0);return(0,i.useLayoutEffect)(()=>{let e=u.current,t=m.split(" "),n=r=>{r.target===u.current&&(p(),e.removeEventListener("animationend",n),e.removeEventListener("animationcancel",n),0===g.current&&"animationcancel"!==r.type&&e.classList.remove(...t))};e.classList.add(...t),e.addEventListener("animationend",n),e.addEventListener("animationcancel",n)},[]),(0,i.useEffect)(()=>{let e=u.current,t=()=>{e.removeEventListener("animationend",t),s?function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:300,{scrollHeight:r,style:i}=e;requestAnimationFrame(()=>{i.minHeight="initial",i.height=r+"px",i.transition="all ".concat(n,"ms"),requestAnimationFrame(()=>{i.height="0",i.padding="0",i.margin="0",setTimeout(t,n)})})}(e,d,a):d()};h||(c?t():(g.current=1,e.className+=" ".concat(f),e.addEventListener("animationend",t)))},[h]),i.createElement(i.Fragment,null,o)}}var uo=1,ho=()=>"".concat(uo++);var po=new Map,mo=[],fo=new Set,go=()=>po.size>0;function vo(e,t){var n;if(t)return!(null==(n=po.get(t))||!n.isToastActive(e));let r=!1;return po.forEach(t=>{t.isToastActive(e)&&(r=!0)}),r}function yo(e){if(go()){if(null==e||(e=>ao(e)||so(e))(e))po.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=po.get(e.containerId);t?t.removeToast(e.id):po.forEach(t=>{t.removeToast(e.id)})}}else mo=mo.filter(t=>null!=e&&t.options.toastId!==e)}function xo(e,t){lo(e)&&(go()||mo.push({content:e,options:t}),po.forEach(n=>{n.buildToast(e,t)}))}function bo(e,t){po.forEach(n=>{(null==t||null==t||!t.containerId||(null==t?void 0:t.containerId)===n.id)&&n.toggle(e,null==t?void 0:t.id)})}function wo(e){return e&&(ao(e.toastId)||so(e.toastId))?e.toastId:ho()}function jo(e,t){return xo(e,t),t.toastId}function No(e,t){return(0,Ne.A)((0,Ne.A)({},t),{},{type:t&&t.type||e,toastId:wo(t)})}function ko(e){return(t,n)=>jo(t,No(e,n))}function Ao(e,t){return jo(e,No("default",t))}Ao.loading=(e,t)=>jo(e,No("default",(0,Ne.A)({isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1},t))),Ao.promise=function(e,t,n){let r,{pending:i,error:s,success:a}=t;i&&(r=ao(i)?Ao.loading(i,n):Ao.loading(i.render,(0,Ne.A)((0,Ne.A)({},n),i)));let o={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},l=(e,t,i)=>{if(null==t)return void Ao.dismiss(r);let s=(0,Ne.A)((0,Ne.A)((0,Ne.A)({type:e},o),n),{},{data:i}),a=ao(t)?{render:t}:t;return r?Ao.update(r,(0,Ne.A)((0,Ne.A)({},s),a)):Ao(a.render,(0,Ne.A)((0,Ne.A)({},s),a)),i},c=oo(e)?e():e;return c.then(e=>l("success",a,e)).catch(e=>l("error",s,e)),c},Ao.success=ko("success"),Ao.info=ko("info"),Ao.error=ko("error"),Ao.warning=ko("warning"),Ao.warn=Ao.warning,Ao.dark=(e,t)=>jo(e,No("default",(0,Ne.A)({theme:"dark"},t))),Ao.dismiss=function(e){yo(e)},Ao.clearWaitingQueue=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};po.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})},Ao.isActive=vo,Ao.update=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=((e,t)=>{let{containerId:n}=t;var r;return null==(r=po.get(n||1))?void 0:r.toasts.get(e)})(e,t);if(n){let{props:r,content:i}=n,s=(0,Ne.A)((0,Ne.A)((0,Ne.A)({delay:100},r),t),{},{toastId:t.toastId||e,updateId:ho()});s.toastId!==e&&(s.staleId=e);let a=s.render||i;delete s.render,jo(a,s)}},Ao.done=e=>{Ao.update(e,{progress:1})},Ao.onChange=function(e){return fo.add(e),()=>{fo.delete(e)}},Ao.play=e=>bo(!0,e),Ao.pause=e=>bo(!1,e);"undefined"!=typeof window?i.useLayoutEffect:i.useEffect;var So=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return{enter:"Toastify--animate Toastify__".concat(e,"-enter"),exit:"Toastify--animate Toastify__".concat(e,"-exit"),appendPosition:t}};co(So("bounce",!0)),co(So("slide",!0)),co(So("zoom")),co(So("flip"));const _o=()=>{const[e,t]=(0,i.useState)(!1),[n,r]=(0,i.useState)(!1),[s,a]=(0,i.useState)(!1),{user:o,register:l}=mn(),c=ee(),{t:d}=nn(["common","routes","auth"]),{register:u,handleSubmit:h,watch:p,setValue:m,formState:{errors:f,isSubmitting:g}}=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=i.useRef(void 0),n=i.useRef(void 0),[r,s]=i.useState({isDirty:!1,isValidating:!1,isLoading:Sa(e.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:e.errors||{},disabled:e.disabled||!1,isReady:!1,defaultValues:Sa(e.defaultValues)?void 0:e.defaultValues});if(!t.current)if(e.formControl)t.current=(0,Ne.A)((0,Ne.A)({},e.formControl),{},{formState:r}),e.defaultValues&&!Sa(e.defaultValues)&&e.formControl.reset(e.defaultValues,e.resetOptions);else{const n=ro(e),{formControl:i}=n,s=ws(n,Ls);t.current=(0,Ne.A)((0,Ne.A)({},s),{},{formState:r})}const a=t.current.control;return a._options=e,ga(()=>{const e=a._subscribe({formState:a._proxyFormState,callback:()=>s((0,Ne.A)({},a._formState)),reRenderRoot:!0});return s(e=>(0,Ne.A)((0,Ne.A)({},e),{},{isReady:!0})),a._formState.isReady=!0,e},[a]),i.useEffect(()=>a._disableForm(e.disabled),[a,e.disabled]),i.useEffect(()=>{e.mode&&(a._options.mode=e.mode),e.reValidateMode&&(a._options.reValidateMode=e.reValidateMode)},[a,e.mode,e.reValidateMode]),i.useEffect(()=>{e.errors&&(a._setErrors(e.errors),a._focusError())},[a,e.errors]),i.useEffect(()=>{e.shouldUnregister&&a._subjects.state.next({values:a._getWatch()})},[a,e.shouldUnregister]),i.useEffect(()=>{if(a._proxyFormState.isDirty){const e=a._getDirty();e!==r.isDirty&&a._subjects.state.next({isDirty:e})}},[a,r.isDirty]),i.useEffect(()=>{e.values&&!ba(e.values,n.current)?(a._reset(e.values,(0,Ne.A)({keepFieldsRef:!0},a._options.resetOptions)),n.current=e.values,s(e=>(0,Ne.A)({},e))):a._resetDefaultValues()},[a,e.values]),i.useEffect(()=>{a._state.mount||(a._setValid(),a._state.mount=!0),a._state.watch&&(a._state.watch=!1,a._subjects.state.next((0,Ne.A)({},a._formState))),a._removeUnmounted()}),t.current.formState=fa(r,a),t.current}(),v=p("password");return(0,sn.jsx)("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8",children:(0,sn.jsxs)("div",{className:"max-w-md w-full space-y-8",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("div",{className:"mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-primary-100",children:(0,sn.jsx)("svg",{className:"h-8 w-8 text-primary-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,sn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),(0,sn.jsx)("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:d("auth:createAccount")}),(0,sn.jsxs)("p",{className:"mt-2 text-center text-sm text-gray-600",children:[d("common:or")," ",(0,sn.jsx)(Ur,{to:"/".concat(d("routes:login")),className:"font-medium text-primary-600 hover:text-primary-500",children:d("auth:signInToExistingAccount")})]}),(0,sn.jsx)("p",{className:"mt-4 text-center text-lg font-semibold text-primary-600",children:d("auth:taxIntegration")})]}),(0,sn.jsxs)("form",{className:"mt-8 space-y-6",onSubmit:h(async e=>{try{const t=(0,Ne.A)((0,Ne.A)({},e),{},{siren:e.siren||e.sirenNumber||"",siret:e.siret||e.siretNumber||""}),n=await l(t);if(null!==n&&void 0!==n&&n.success){if("fr"===(t.invoiceMode||"fr")){const e={sellerCompanyName:t.companyName||"",sellerVATNumber:t.vatNumber||"",sellerSIREN:t.siren||"",sellerSIRET:t.siret||"",sellerLegalForm:t.legalForm||"",sellerRegisteredCapital:t.registeredCapital||"",sellerRcsNumber:t.rcsNumber||"",sellerNafCode:t.nafCode||"",bankIBAN:t.bankIBAN||"",bankBIC:t.bankBIC||"",bankName:t.bankName||"",accountHolder:t.accountHolder||""};try{localStorage.setItem("frenchCompanySettings",JSON.stringify(e))}catch(Ae){console.warn("Failed to persist frenchCompanySettings:",Ae)}}c("/dashboard")}else c("/".concat(d("routes:dashboard")))}catch(t){console.error("Registration error:",t),Ao.error("Registration failed, please try again")}}),children:[(0,sn.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-200 mb-6",children:[(0,sn.jsxs)("div",{className:"flex items-center mb-2",children:[(0,sn.jsx)(ki,{className:"h-5 w-5 text-blue-600 mr-2"}),(0,sn.jsx)("span",{className:"text-sm font-medium text-blue-800",children:d("auth:selectInvoiceMode")})]}),(0,sn.jsxs)("div",{className:"p-4 rounded-lg border-2 border-primary-500 bg-primary-50",children:[(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center mr-2",children:(0,sn.jsx)("span",{className:"text-xs font-bold text-blue-800",children:"FR"})}),(0,sn.jsx)("span",{className:"font-medium text-gray-900",children:d("auth:france")})]}),(0,sn.jsx)("p",{className:"mt-2 text-xs text-gray-600",children:d("auth:franceTaxInfo")})]}),(0,sn.jsx)("input",(0,Ne.A)({type:"hidden",value:"fr"},u("invoiceMode")))]}),(0,sn.jsxs)("div",{className:"space-y-4",children:[(0,sn.jsxs)("div",{className:"flex space-x-4",children:[(0,sn.jsxs)("div",{className:"w-1/2",children:[(0,sn.jsx)("label",{htmlFor:"firstName",className:"block text-sm font-medium text-gray-700",children:d("auth:firstName")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(as,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"firstName",type:"text",className:"form-input-with-icon",placeholder:d("auth:firstNamePlaceholder")},u("firstName",{required:d("auth:firstNameRequired")})))]}),f.firstName&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.firstName.message})]}),(0,sn.jsxs)("div",{className:"w-1/2",children:[(0,sn.jsx)("label",{htmlFor:"lastName",className:"block text-sm font-medium text-gray-700",children:d("auth:lastName")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(as,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"lastName",type:"text",className:"form-input-with-icon",placeholder:d("auth:lastNamePlaceholder")},u("lastName",{required:d("auth:lastNameRequired")})))]}),f.lastName&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.lastName.message})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:d("auth:emailAddress")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(Ri,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"email",type:"email",autoComplete:"email",className:"form-input-with-icon",placeholder:d("auth:emailAddressPlaceholder")},u("email",{required:d("auth:emailRequired"),pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:d("auth:invalidEmail")}})))]}),f.email&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.email.message})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"companyName",className:"block text-sm font-medium text-gray-700",children:d("auth:companyNameOptional")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(ai,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"companyName",type:"text",className:"form-input-with-icon",placeholder:d("auth:companyNamePlaceholder")},u("companyName")))]})]}),"fr"===p("invoiceMode")&&(0,sn.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sn.jsxs)("button",{type:"button",onClick:()=>a(!s),className:"flex items-center text-sm font-medium text-gray-900 hover:text-primary-600 transition-colors",children:[(0,sn.jsx)("span",{children:d("auth:optionalDetails")}),(0,sn.jsx)("svg",{className:"ml-2 h-4 w-4 transition-transform ".concat(s?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,sn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,sn.jsx)("span",{className:"text-xs text-gray-500",children:d("auth:optionalDetailsDescription")})]}),s&&(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"vatNumber",className:"block text-sm font-medium text-gray-700",children:d("auth:vatNumber")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(ai,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"vatNumber",type:"text",className:"form-input-with-icon",placeholder:"FR12345678901"},u("vatNumber",{pattern:{value:/^FR\d{11}$/,message:d("auth:invalidVatNumber")}})))]}),f.vatNumber&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.vatNumber.message}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Format: FR + 11 chiffres (ex: FR12345678901)"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"sirenNumber",className:"block text-sm font-medium text-gray-700",children:d("auth:sirenNumber")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(ai,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"sirenNumber",type:"text",className:"form-input-with-icon",placeholder:d("auth:sirenNumberPlaceholder")},u("sirenNumber",{pattern:{value:/^\d{9}$/,message:d("auth:invalidSiren")}})))]}),f.sirenNumber&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.sirenNumber.message}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"9 chiffres (ex: 123456789)"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"siretNumber",className:"block text-sm font-medium text-gray-700",children:d("auth:siret")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(ai,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"siretNumber",type:"text",className:"form-input-with-icon",placeholder:d("auth:siretFormat")},u("siretNumber",{pattern:{value:/^\d{14}$/,message:d("auth:siretInvalid")}})))]}),f.siretNumber&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.siretNumber.message}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:d("auth:siretDescription")})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"legalForm",className:"block text-sm font-medium text-gray-700",children:d("auth:legalForm")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(wi,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"legalForm",type:"text",className:"form-input-with-icon",placeholder:d("auth:selectLegalForm")},u("legalForm")))]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"registeredCapital",className:"block text-sm font-medium text-gray-700",children:d("auth:registeredCapital.label")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(Si,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"registeredCapital",type:"text",className:"form-input-with-icon",placeholder:"10 000 \u20ac"},u("registeredCapital",{pattern:{value:/^[0-9\s,.]+$/,message:d("auth:registeredCapital.invalid")}})))]}),f.registeredCapital&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.registeredCapital.message}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:d("auth:registeredCapital.description")})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"rcsNumber",className:"block text-sm font-medium text-gray-700",children:d("auth:rcsNumber.label")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(wi,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"rcsNumber",type:"text",className:"form-input-with-icon",placeholder:"RCS PARIS 123 456 789"},u("rcsNumber",{pattern:{value:/^RCS\s+[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\xff\s-]+\s+\d{3}\s?\d{3}\s?\d{3}$/,message:d("auth:rcsNumber.invalid")}})))]}),f.rcsNumber&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.rcsNumber.message}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:d("auth:rcsNumberFormat")})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"nafCode",className:"block text-sm font-medium text-gray-700",children:d("auth:nafCode.label")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(wi,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"nafCode",type:"text",className:"form-input-with-icon",placeholder:"62.02A"},u("nafCode",{pattern:{value:/^(\d{4}[A-Za-z]|\d{2}\.\d{2}[A-Za-z])$/,message:d("auth:nafCode.invalid")}})))]}),f.nafCode&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.nafCode.message}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:d("auth:nafCodeFormat")})]}),(0,sn.jsxs)("div",{className:"mt-4",children:[(0,sn.jsx)("h3",{className:"text-sm font-medium text-gray-700",children:d("auth:bankInformation")}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:d("auth:bankPrivacyNote")})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"bankIBAN",className:"block text-sm font-medium text-gray-700",children:d("auth:iban")}),(0,sn.jsx)("input",(0,Ne.A)({id:"bankIBAN",type:"text",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"FR76 1234 5678 9012 3456 7890 123"},u("bankIBAN",{pattern:{value:/^FR\d{2}(\s?\d{4}){5}\s?\d{3}$/,message:d("auth:ibanInvalid")}}))),f.bankIBAN&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:f.bankIBAN.message})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"bankBIC",className:"block text-sm font-medium text-gray-700",children:d("auth:bic")}),(0,sn.jsx)("input",(0,Ne.A)({id:"bankBIC",type:"text",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"BNPAFRPPXXX"},u("bankBIC",{pattern:{value:/^[A-Z]{6}[A-Z0-9]{2}([A-Z0-9]{3})?$/i,message:d("auth:bicInvalid")}}))),f.bankBIC&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:f.bankBIC.message})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"bankName",className:"block text-sm font-medium text-gray-700",children:d("auth:bankName")}),(0,sn.jsx)("input",(0,Ne.A)({id:"bankName",type:"text",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:"La Banque Postale"},u("bankName")))]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"accountHolder",className:"block text-sm font-medium text-gray-700",children:d("auth:accountHolder")}),(0,sn.jsx)("input",(0,Ne.A)({id:"accountHolder",type:"text",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-primary-500 focus:border-transparent",placeholder:d("auth:companyNamePlaceholder")},u("accountHolder")))]})]})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700",children:d("auth:phoneOptional")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(Ui,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"phone",type:"tel",className:"form-input-with-icon",placeholder:d("auth:phonePlaceholder")},u("phone")))]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:d("auth:password")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(Di,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"password",type:e?"text":"password",autoComplete:"new-password",className:"form-input-with-icon",placeholder:d("auth:passwordPlaceholder")},u("password",{required:d("auth:passwordRequired"),minLength:{value:8,message:d("auth:passwordMinLength")}}))),(0,sn.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>t(!e),children:e?(0,sn.jsx)(xi,{className:"h-5 w-5 text-gray-400"}):(0,sn.jsx)(bi,{className:"h-5 w-5 text-gray-400"})})]}),f.password&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.password.message})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"confirmPassword",className:"block text-sm font-medium text-gray-700",children:d("auth:confirmPassword")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(Di,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",(0,Ne.A)({id:"confirmPassword",type:n?"text":"password",autoComplete:"new-password",className:"form-input-with-icon",placeholder:d("auth:confirmPasswordPlaceholder")},u("confirmPassword",{required:d("auth:confirmPasswordRequired"),validate:e=>e===v||d("auth:passwordsDontMatch")}))),(0,sn.jsx)("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center",onClick:()=>r(!n),children:n?(0,sn.jsx)(xi,{className:"h-5 w-5 text-gray-400"}):(0,sn.jsx)(bi,{className:"h-5 w-5 text-gray-400"})})]}),f.confirmPassword&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.confirmPassword.message})]})]}),(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("input",(0,Ne.A)({id:"terms",type:"checkbox",className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded"},u("terms",{required:d("auth:termsRequired")}))),(0,sn.jsxs)("label",{htmlFor:"terms",className:"ml-2 block text-sm text-gray-700",children:[d("auth:agreeToTerms")," ",(0,sn.jsx)("button",{type:"button",className:"text-indigo-600 hover:text-indigo-500 underline bg-transparent border-none cursor-pointer",children:d("auth:termsOfService")})," ",d("auth:and")," ",(0,sn.jsx)("button",{type:"button",className:"text-indigo-600 hover:text-indigo-500 underline bg-transparent border-none cursor-pointer",children:d("auth:privacyPolicy")})]})]}),f.terms&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:f.terms.message}),(0,sn.jsx)("div",{children:(0,sn.jsxs)("button",{type:"submit",disabled:g,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50",children:[g?(0,sn.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[(0,sn.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,sn.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):null,d(g?"auth:creatingAccount":"auth:createAccount")]})})]})]})})};let Co=0;const Eo=()=>{const[e,t]=(0,i.useState)([]),n=(0,i.useCallback)(e=>{t(t=>t.filter(t=>t.id!==e))},[]),r=(0,i.useCallback)(function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const s=++Co,a=(0,Ne.A)({id:s,message:e,type:r,duration:i.duration||5e3,position:i.position||"top-right",showProgress:!1!==i.showProgress},i);return t(e=>[...e,a]),a.duration>0&&setTimeout(()=>{n(s)},a.duration),s},[n]),s=(0,i.useCallback)(()=>{t([])},[]),a=(0,i.useCallback)((e,t)=>r(e,"success",t),[r]),o=(0,i.useCallback)((e,t)=>r(e,"error",(0,Ne.A)({duration:7e3},t)),[r]),l=(0,i.useCallback)((e,t)=>r(e,"warning",t),[r]),c=(0,i.useCallback)((e,t)=>r(e,"info",t),[r]);return{toasts:e,addToast:r,removeToast:n,clearAllToasts:s,success:a,error:o,warning:l,info:c}};class Po{static getCurrentMonth(){if(!(arguments.length>0&&void 0!==arguments[0])||arguments[0]){const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0");return"".concat(t,"-").concat(n)}return"2025-11"}static getNextMonth(e){const[t,n]=e.split("-").map(Number),r=new Date(t,n-1);return r.setMonth(r.getMonth()+1),r.toISOString().slice(0,7)}static getPreviousMonth(e){const[t,n]=e.split("-").map(Number),r=new Date(t,n-1);return r.setMonth(r.getMonth()-1),r.toISOString().slice(0,7)}static formatMonthDisplay(e){const[t,n]=e.split("-");return"".concat(t,"\u5e74").concat(n,"\u6708")}static isCurrentMonth(e){return e===(new Date).toISOString().slice(0,7)}}const To=!1,Mo="2025-11",Do=()=>To?Po.getCurrentMonth(!0):Mo;const Oo=new class{async getStats(){try{const e=Do();return(await zt.default.get("/dashboard/stats?month=".concat(e))).data}catch(n){var e,t;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"\u83b7\u53d6\u7edf\u8ba1\u6570\u636e\u5931\u8d25")}}async getDashboardStats(){try{return(await zt.default.get("/invoices/stats/dashboard")).data}catch(e){throw console.error("Error fetching dashboard stats:",e),e}}async getInvoiceStatusDistribution(){try{var e,t;const n=Do();console.log("\u83b7\u53d6\u53d1\u7968\u72b6\u6001\u5206\u5e03\uff0c\u6708\u4efd:",n);const r=await zt.default.get("/dashboard/unified-chart-data?month=".concat(n));console.log("\u53d1\u7968\u72b6\u6001\u5206\u5e03API\u54cd\u5e94:",r.data);const i=(null===(e=r.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.statusDistribution)||{};return console.log("\u63d0\u53d6\u7684\u72b6\u6001\u5206\u5e03\u6570\u636e:",i),i}catch(n){return console.error("Error fetching invoice status distribution:",n),{distribution:[],totalInvoices:0}}}async getMonthlyRevenueTrend(){try{var e,t;const n=Do();console.log("\u83b7\u53d6\u6708\u5ea6\u6536\u5165\u8d8b\u52bf\uff0c\u6708\u4efd:",n);const r=await zt.default.get("/dashboard/unified-chart-data?month=".concat(n));console.log("\u6536\u5165\u8d8b\u52bfAPI\u54cd\u5e94:",r.data);const i=(null===(e=r.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.revenueTrend)||{};return console.log("\u63d0\u53d6\u7684\u6536\u5165\u8d8b\u52bf\u6570\u636e:",i),i}catch(n){return console.error("Error fetching monthly revenue trend:",n),{totalRevenue:0,totalCount:0,timePoints:[]}}}async getNotifications(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{console.log("=== \u524d\u7aef\u5f00\u59cb\u8c03\u7528\u901a\u77e5\u63a5\u53e3 ==="),console.log("\u8bf7\u6c42URL:","/notifications"),console.log("\u8bf7\u6c42\u53c2\u6570:",{limit:e});const t=await zt.default.get("/notifications",{params:{limit:e}});return console.log("\u901a\u77e5\u63a5\u53e3\u54cd\u5e94:",t.data),t.data}catch(t){return console.error("\u83b7\u53d6\u901a\u77e5\u5931\u8d25:",t),{success:!0,data:{notifications:[],total:0,unreadCount:0}}}}async getDashboardData(){try{return(await zt.default.get("/dashboard")).data}catch(n){var e,t;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"\u83b7\u53d6\u4eea\u8868\u76d8\u6570\u636e\u5931\u8d25")}}async sendInvoice(e){try{return(await zt.default.post("/dashboard/send-invoice/".concat(e))).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u53d1\u9001\u53d1\u7968\u5931\u8d25")}}async markInvoiceAsPaid(e){try{return(await zt.default.post("/dashboard/mark-paid/".concat(e))).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u6807\u8bb0\u53d1\u7968\u4e3a\u5df2\u652f\u4ed8\u5931\u8d25")}}async getMonthlyGoalProgress(){try{return(await zt.default.get("/dashboard/monthly-goal-progress")).data}catch(e){throw console.error("Error fetching monthly goal progress:",e),e}}async getClientActivity(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:10;try{return(await zt.default.get("/dashboard/client-activity",{params:{limit:e}})).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u83b7\u53d6\u5ba2\u6237\u6d3b\u52a8\u5931\u8d25")}}async getCashFlowForecast(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;try{return(await zt.default.get("/dashboard/cash-flow-forecast",{params:{months:e}})).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u83b7\u53d6\u73b0\u91d1\u6d41\u9884\u6d4b\u5931\u8d25")}}async getCustomerAnalytics(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"6months";try{return(await zt.default.get("/dashboard/customer-analytics?period=".concat(e))).data}catch(t){throw console.error("Error fetching customer analytics:",t),t}}async createPaddlePaymentLink(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EUR";try{return(await zt.default.post("/dashboard/paddle/create-payment-link",{invoiceId:e,amount:t,currency:n})).data}catch(r){throw console.error("Error creating Paddle payment link:",r),r}}async getPaddlePaymentStatus(e){try{return(await zt.default.get("/dashboard/paddle/payment-status/".concat(e))).data}catch(t){throw console.error("Error fetching Paddle payment status:",t),t}}async syncPaddlePayment(e){try{return(await zt.default.post("/dashboard/paddle/sync-payment/".concat(e))).data}catch(t){throw console.error("Error syncing Paddle payment:",t),t}}},Ro=e=>{let{size:t="medium",color:n="blue",text:r="",fullScreen:i=!1,overlay:s=!1}=e;const a=(0,sn.jsxs)("div",{className:"flex flex-col items-center justify-center",children:[(0,sn.jsx)("div",{className:"animate-spin ".concat((()=>{switch(t){case"small":return"w-4 h-4";case"large":return"w-12 h-12";case"xl":return"w-16 h-16";default:return"w-8 h-8"}})()," ").concat((()=>{switch(n){case"white":return"text-white";case"gray":return"text-gray-500";case"green":return"text-green-500";case"red":return"text-red-500";default:return"text-blue-500"}})()),children:(0,sn.jsxs)("svg",{className:"w-full h-full",fill:"none",viewBox:"0 0 24 24",children:[(0,sn.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,sn.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),r&&(0,sn.jsx)("p",{className:"mt-2 text-gray-600 ".concat((()=>{switch(t){case"small":return"text-sm";case"large":return"text-lg";case"xl":return"text-xl";default:return"text-base"}})()),children:r})]});return i?(0,sn.jsx)("div",{className:"fixed inset-0 bg-white bg-opacity-90 flex items-center justify-center z-50",children:a}):s?(0,sn.jsx)("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10",children:a}):a},Io=Ro;function Lo(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=Lo(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Fo(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=Lo(e))&&(r&&(r+=" "),r+=t);return r}const Bo=Fo;var zo=n(7820),Wo=n.n(zo),Uo=n(7770),Vo=n.n(Uo),Ho=e=>0===e?0:e>0?1:-1,qo=e=>"number"==typeof e&&e!=+e,Go=e=>"string"===typeof e&&e.indexOf("%")===e.length-1,Ko=e=>("number"===typeof e||e instanceof Number)&&!qo(e),Yo=e=>Ko(e)||"string"===typeof e,Xo=0,Jo=e=>{var t=++Xo;return"".concat(e||"").concat(t)},$o=function(e,t){var n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(!Ko(e)&&"string"!==typeof e)return r;if(Go(e)){if(null==t)return r;var s=e.indexOf("%");n=t*parseFloat(e.slice(0,s))/100}else n=+e;return qo(n)&&(n=r),i&&null!=t&&n>t&&(n=t),n},Qo=e=>{if(!Array.isArray(e))return!1;for(var t=e.length,n={},r=0;r<t;r++){if(n[e[r]])return!0;n[e[r]]=!0}return!1};function Zo(e,t,n){return Ko(e)&&Ko(t)?e+n*(t-e):t}var el=e=>null===e||"undefined"===typeof e,tl=e=>el(e)?e:"".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),nl=function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i]};function rl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rl(Object(n),!0).forEach(function(t){sl(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rl(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function sl(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var al=(0,i.forwardRef)((e,t)=>{var{aspect:n,initialDimension:r={width:-1,height:-1},width:s="100%",height:a="100%",minWidth:o=0,minHeight:l,maxHeight:c,children:d,debounce:u=0,id:h,className:p,onResize:m,style:f={}}=e,g=(0,i.useRef)(null),v=(0,i.useRef)();v.current=m,(0,i.useImperativeHandle)(t,()=>g.current);var[y,x]=(0,i.useState)({containerWidth:r.width,containerHeight:r.height}),b=(0,i.useCallback)((e,t)=>{x(n=>{var r=Math.round(e),i=Math.round(t);return n.containerWidth===r&&n.containerHeight===i?n:{containerWidth:r,containerHeight:i}})},[]);(0,i.useEffect)(()=>{var e=e=>{var t,{width:n,height:r}=e[0].contentRect;b(n,r),null===(t=v.current)||void 0===t||t.call(v,n,r)};u>0&&(e=Wo()(e,u,{trailing:!0,leading:!1}));var t=new ResizeObserver(e),{width:n,height:r}=g.current.getBoundingClientRect();return b(n,r),t.observe(g.current),()=>{t.disconnect()}},[b,u]);var w=(0,i.useMemo)(()=>{var{containerWidth:e,containerHeight:t}=y;if(e<0||t<0)return null;nl(Go(s)||Go(a),"The width(%s) and height(%s) are both fixed numbers,\n       maybe you don't need to use a ResponsiveContainer.",s,a),nl(!n||n>0,"The aspect(%s) must be greater than zero.",n);var r=Go(s)?e:s,u=Go(a)?t:a;return n&&n>0&&(r?u=r/n:u&&(r=u*n),c&&u>c&&(u=c)),nl(r>0||u>0,"The width(%s) and height(%s) of chart should be greater than 0,\n       please check the style of container, or the props width(%s) and height(%s),\n       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the\n       height and width.",r,u,s,a,o,l,n),i.Children.map(d,e=>(0,i.cloneElement)(e,{width:r,height:u,style:il({width:r,height:u},e.props.style)}))},[n,d,a,c,l,o,y,s]);return i.createElement("div",{id:h?"".concat(h):void 0,className:Fo("recharts-responsive-container",p),style:il(il({},f),{},{width:s,height:a,minWidth:o,minHeight:l,maxHeight:c}),ref:g},i.createElement("div",{style:{width:0,height:0,overflow:"visible"}},w))}),ol=n(4705);function ll(e){return"Minified Redux error #".concat(e,"; visit https://redux.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}var cl=(()=>"function"===typeof Symbol&&Symbol.observable||"@@observable")(),dl=()=>Math.random().toString(36).substring(7).split("").join("."),ul={INIT:"@@redux/INIT".concat(dl()),REPLACE:"@@redux/REPLACE".concat(dl()),PROBE_UNKNOWN_ACTION:()=>"@@redux/PROBE_UNKNOWN_ACTION".concat(dl())};function hl(e){if("object"!==typeof e||null===e)return!1;let t=e;for(;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||null===Object.getPrototypeOf(e)}function pl(e,t,n){if("function"!==typeof e)throw new Error(ll(2));if("function"===typeof t&&"function"===typeof n||"function"===typeof n&&"function"===typeof arguments[3])throw new Error(ll(0));if("function"===typeof t&&"undefined"===typeof n&&(n=t,t=void 0),"undefined"!==typeof n){if("function"!==typeof n)throw new Error(ll(1));return n(pl)(e,t)}let r=e,i=t,s=new Map,a=s,o=0,l=!1;function c(){a===s&&(a=new Map,s.forEach((e,t)=>{a.set(t,e)}))}function d(){if(l)throw new Error(ll(3));return i}function u(e){if("function"!==typeof e)throw new Error(ll(4));if(l)throw new Error(ll(5));let t=!0;c();const n=o++;return a.set(n,e),function(){if(t){if(l)throw new Error(ll(6));t=!1,c(),a.delete(n),s=null}}}function h(e){if(!hl(e))throw new Error(ll(7));if("undefined"===typeof e.type)throw new Error(ll(8));if("string"!==typeof e.type)throw new Error(ll(17));if(l)throw new Error(ll(9));try{l=!0,i=r(i,e)}finally{l=!1}return(s=a).forEach(e=>{e()}),e}h({type:ul.INIT});return{dispatch:h,subscribe:u,getState:d,replaceReducer:function(e){if("function"!==typeof e)throw new Error(ll(10));r=e,h({type:ul.REPLACE})},[cl]:function(){const e=u;return{subscribe(t){if("object"!==typeof t||null===t)throw new Error(ll(11));function n(){const e=t;e.next&&e.next(d())}n();return{unsubscribe:e(n)}},[cl](){return this}}}}}function ml(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const r=t[s];0,"function"===typeof e[r]&&(n[r]=e[r])}const r=Object.keys(n);let i;try{!function(e){Object.keys(e).forEach(t=>{const n=e[t];if("undefined"===typeof n(void 0,{type:ul.INIT}))throw new Error(ll(12));if("undefined"===typeof n(void 0,{type:ul.PROBE_UNKNOWN_ACTION()}))throw new Error(ll(13))})}(n)}catch(Ae){i=Ae}return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;if(i)throw i;let s=!1;const a={};for(let i=0;i<r.length;i++){const o=r[i],l=n[o],c=e[o],d=l(c,t);if("undefined"===typeof d){t&&t.type;throw new Error(ll(14))}a[o]=d,s=s||d!==c}return s=s||r.length!==Object.keys(e).length,s?a:e}}function fl(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?e=>e:1===t.length?t[0]:t.reduce((e,t)=>function(){return e(t(...arguments))})}function gl(e){return hl(e)&&"type"in e&&"string"===typeof e.type}function vl(e){return t=>{let{dispatch:n,getState:r}=t;return t=>i=>"function"===typeof i?i(n,r,e):t(i)}}var yl=vl(),xl=vl,bl=Symbol.for("immer-nothing"),wl=Symbol.for("immer-draftable"),jl=Symbol.for("immer-state");function Nl(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var kl=Object.getPrototypeOf;function Al(e){return!!e&&!!e[jl]}function Sl(e){var t;return!!e&&(Cl(e)||Array.isArray(e)||!!e[wl]||!(null===(t=e.constructor)||void 0===t||!t[wl])||Dl(e)||Ol(e))}var _l=Object.prototype.constructor.toString();function Cl(e){if(!e||"object"!==typeof e)return!1;const t=kl(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===_l}function El(e,t){0===Pl(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Pl(e){const t=e[jl];return t?t.type_:Array.isArray(e)?1:Dl(e)?2:Ol(e)?3:0}function Tl(e,t){return 2===Pl(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Ml(e,t,n){const r=Pl(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Dl(e){return e instanceof Map}function Ol(e){return e instanceof Set}function Rl(e){return e.copy_||e.base_}function Il(e,t){if(Dl(e))return new Map(e);if(Ol(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Cl(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[jl];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(kl(e),t)}{const t=kl(e);if(null!==t&&n)return(0,Ne.A)({},e);const r=Object.create(t);return Object.assign(r,e)}}function Ll(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Bl(e)||Al(e)||!Sl(e)||(Pl(e)>1&&Object.defineProperties(e,{set:{value:Fl},add:{value:Fl},clear:{value:Fl},delete:{value:Fl}}),Object.freeze(e),t&&Object.values(e).forEach(e=>Ll(e,!0))),e}function Fl(){Nl(2)}function Bl(e){return Object.isFrozen(e)}var zl,Wl={};function Ul(e){const t=Wl[e];return t||Nl(0),t}function Vl(){return zl}function Hl(e,t){t&&(Ul("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function ql(e){Gl(e),e.drafts_.forEach(Yl),e.drafts_=null}function Gl(e){e===zl&&(zl=e.parent_)}function Kl(e){return zl={drafts_:[],parent_:zl,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Yl(e){const t=e[jl];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function Xl(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[jl].modified_&&(ql(t),Nl(4)),Sl(e)&&(e=Jl(t,e),t.parent_||Ql(t,e)),t.patches_&&Ul("Patches").generateReplacementPatches_(n[jl].base_,e,t.patches_,t.inversePatches_)):e=Jl(t,n,[]),ql(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==bl?e:void 0}function Jl(e,t,n){if(Bl(t))return t;const r=t[jl];if(!r)return El(t,(i,s)=>$l(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return Ql(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),El(i,(i,a)=>$l(e,r,t,i,a,n,s)),Ql(e,t,!1),n&&e.patches_&&Ul("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function $l(e,t,n,r,i,s,a){if(Al(i)){const a=Jl(e,i,s&&t&&3!==t.type_&&!Tl(t.assigned_,r)?s.concat(r):void 0);if(Ml(n,r,a),!Al(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(Sl(i)&&!Bl(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Jl(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!(Dl(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))||Ql(e,i)}}function Ql(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Ll(t,n)}var Zl={get(e,t){if(t===jl)return e;const n=Rl(e);if(!Tl(n,t))return function(e,t,n){var r;const i=nc(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Sl(r)?r:r===tc(e.base_,t)?(ic(e),e.copy_[t]=sc(r,e)):r},has:(e,t)=>t in Rl(e),ownKeys:e=>Reflect.ownKeys(Rl(e)),set(e,t,n){const r=nc(Rl(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=tc(Rl(e),t),i=null===r||void 0===r?void 0:r[jl];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||Tl(e.base_,t)))return!0;ic(e),rc(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==tc(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,ic(e),rc(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Rl(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Nl(11)},getPrototypeOf:e=>kl(e.base_),setPrototypeOf(){Nl(12)}},ec={};function tc(e,t){const n=e[jl];return(n?Rl(n):e)[t]}function nc(e,t){if(!(t in e))return;let n=kl(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=kl(n)}}function rc(e){e.modified_||(e.modified_=!0,e.parent_&&rc(e.parent_))}function ic(e){e.copy_||(e.copy_=Il(e.base_,e.scope_.immer_.useStrictShallowCopy_))}El(Zl,(e,t)=>{ec[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),ec.deleteProperty=function(e,t){return ec.set.call(this,e,t,void 0)},ec.set=function(e,t,n){return Zl.set.call(this,e[0],t,n,e[0])};function sc(e,t){const n=Dl(e)?Ul("MapSet").proxyMap_(e,t):Ol(e)?Ul("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:Vl(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=Zl;n&&(i=[r],s=ec);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}(e,t);return(t?t.scope_:Vl()).drafts_.push(n),n}function ac(e){return Al(e)||Nl(10),oc(e)}function oc(e){if(!Sl(e)||Bl(e))return e;const t=e[jl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Il(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Il(e,!0);return El(n,(e,t)=>{Ml(n,e,oc(t))}),t&&(t.finalized_=!1),n}var lc=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return r.produce(e,e=>t.call(this,e,...s))}}let r;if("function"!==typeof t&&Nl(6),void 0!==n&&"function"!==typeof n&&Nl(7),Sl(e)){const i=Kl(this),s=sc(e,void 0);let a=!0;try{r=t(s),a=!1}finally{a?ql(i):Gl(i)}return Hl(i,n),Xl(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===bl&&(r=void 0),this.autoFreeze_&&Ll(r,!0),n){const t=[],i=[];Ul("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}Nl(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,t=>e(t,...i))};let r,i;const s=this.produce(e,n,(e,t)=>{r=e,i=t});return[s,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Sl(e)||Nl(8),Al(e)&&(e=ac(e));const t=Kl(this),n=sc(e,void 0);return n[jl].isManual_=!0,Gl(t),n}finishDraft(e,t){const n=e&&e[jl];n&&n.isManual_||Nl(9);const{scope_:r}=n;return Hl(r,t),Xl(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Ul("Patches").applyPatches_;return Al(e)?r(e,t):this.produce(e,e=>r(e,t))}},cc=lc.produce;const dc=["reducerPath"];var uc="undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(0!==arguments.length)return"object"===typeof arguments[0]?fl:fl.apply(null,arguments)};"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__;function hc(e,t){function n(){if(t){let n=t(...arguments);if(!n)throw new Error(ad(0));return(0,Ne.A)((0,Ne.A)({type:e,payload:n.payload},"meta"in n&&{meta:n.meta}),"error"in n&&{error:n.error})}return{type:e,payload:arguments.length<=0?void 0:arguments[0]}}return n.toString=()=>"".concat(e),n.type=e,n.match=t=>gl(t)&&t.type===e,n}var pc=class e extends Array{constructor(){super(...arguments),Object.setPrototypeOf(this,e.prototype)}static get[Symbol.species](){return e}concat(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return super.concat.apply(this,t)}prepend(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return 1===n.length&&Array.isArray(n[0])?new e(...n[0].concat(this)):new e(...n.concat(this))}};function mc(e){return Sl(e)?cc(e,()=>{}):e}function fc(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}var gc="RTK_autoBatch",vc=e=>t=>{setTimeout(t,e)},yc=e=>function(t){const{autoBatch:n=!0}=null!==t&&void 0!==t?t:{};let r=new pc(e);return n&&r.push(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"raf"};return t=>function(){const n=t(...arguments);let r=!0,i=!1,s=!1;const a=new Set,o="tick"===e.type?queueMicrotask:"raf"===e.type?"undefined"!==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame:vc(10):"callback"===e.type?e.queueNotification:vc(e.timeout),l=()=>{s=!1,i&&(i=!1,a.forEach(e=>e()))};return Object.assign({},n,{subscribe(e){const t=n.subscribe(()=>r&&e());return a.add(e),()=>{t(),a.delete(e)}},dispatch(e){try{var t;return r=!(null!==e&&void 0!==e&&null!==(t=e.meta)&&void 0!==t&&t[gc]),i=!r,i&&(s||(s=!0,o(l))),n.dispatch(e)}finally{r=!0}}})}}("object"===typeof n?n:void 0)),r};function xc(e){const t=function(e){const{thunk:t=!0,immutableCheck:n=!0,serializableCheck:r=!0,actionCreatorCheck:i=!0}=null!==e&&void 0!==e?e:{};let s=new pc;return t&&("boolean"===typeof t?s.push(yl):s.push(xl(t.extraArgument))),s},{reducer:n,middleware:r,devTools:i=!0,duplicateMiddlewareCheck:s=!0,preloadedState:a,enhancers:o}=e||{};let l,c;if("function"===typeof n)l=n;else{if(!hl(n))throw new Error(ad(1));l=ml(n)}c="function"===typeof r?r(t):t();let d=fl;i&&(d=uc((0,Ne.A)({trace:!1},"object"===typeof i&&i)));const u=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>(n,r)=>{const i=e(n,r);let s=()=>{throw new Error(ll(15))};const a={getState:i.getState,dispatch:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return s(e,...n)}},o=t.map(e=>e(a));return s=fl(...o)(i.dispatch),(0,Ne.A)((0,Ne.A)({},i),{},{dispatch:s})}}(...c),h=yc(u);return pl(l,a,d(..."function"===typeof o?o(h):h()))}function bc(e){const t={},n=[];let r;const i={addCase(e,n){const r="string"===typeof e?e:e.type;if(!r)throw new Error(ad(28));if(r in t)throw new Error(ad(29));return t[r]=n,i},addAsyncThunk:(e,r)=>(r.pending&&(t[e.pending.type]=r.pending),r.rejected&&(t[e.rejected.type]=r.rejected),r.fulfilled&&(t[e.fulfilled.type]=r.fulfilled),r.settled&&n.push({matcher:e.settled,reducer:r.settled}),i),addMatcher:(e,t)=>(n.push({matcher:e,reducer:t}),i),addDefaultCase:e=>(r=e,i)};return e(i),[t,n,r]}var wc=function(){let e="",t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:21;for(;t--;)e+="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW"[64*Math.random()|0];return e};var jc=Symbol.for("rtk-slice-createasyncthunk");function Nc(e,t){return"".concat(e,"/").concat(t)}function kc(){var e;let{creators:t}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const n=null===t||void 0===t||null===(e=t.asyncThunk)||void 0===e?void 0:e[jc];return function(e){const{name:t,reducerPath:r=t}=e;if(!t)throw new Error(ad(11));const i=("function"===typeof e.reducers?e.reducers(function(){function e(e,t){return(0,Ne.A)({_reducerDefinitionType:"asyncThunk",payloadCreator:e},t)}return e.withTypes=()=>e,{reducer:e=>Object.assign({[e.name](){return e(...arguments)}}[e.name],{_reducerDefinitionType:"reducer"}),preparedReducer:(e,t)=>({_reducerDefinitionType:"reducerWithPrepare",prepare:e,reducer:t}),asyncThunk:e}}()):e.reducers)||{},s=Object.keys(i),a={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},o={addCase(e,t){const n="string"===typeof e?e:e.type;if(!n)throw new Error(ad(12));if(n in a.sliceCaseReducersByType)throw new Error(ad(13));return a.sliceCaseReducersByType[n]=t,o},addMatcher:(e,t)=>(a.sliceMatchers.push({matcher:e,reducer:t}),o),exposeAction:(e,t)=>(a.actionCreators[e]=t,o),exposeCaseReducer:(e,t)=>(a.sliceCaseReducersByName[e]=t,o)};function l(){const[t={},n=[],r]="function"===typeof e.extraReducers?bc(e.extraReducers):[e.extraReducers],i=(0,Ne.A)((0,Ne.A)({},t),a.sliceCaseReducersByType);return function(e,t){let n,[r,i,s]=bc(t);if("function"===typeof e)n=()=>mc(e());else{const t=mc(e);n=()=>t}function a(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n(),t=arguments.length>1?arguments[1]:void 0,a=[r[t.type],...i.filter(e=>{let{matcher:n}=e;return n(t)}).map(e=>{let{reducer:t}=e;return t})];return 0===a.filter(e=>!!e).length&&(a=[s]),a.reduce((e,n)=>{if(n){if(Al(e)){const r=n(e,t);return void 0===r?e:r}if(Sl(e))return cc(e,e=>n(e,t));{const r=n(e,t);if(void 0===r){if(null===e)return e;throw Error("A case reducer on a non-draftable value must not return undefined")}return r}}return e},e)}return a.getInitialState=n,a}(e.initialState,e=>{for(let t in i)e.addCase(t,i[t]);for(let t of a.sliceMatchers)e.addMatcher(t.matcher,t.reducer);for(let t of n)e.addMatcher(t.matcher,t.reducer);r&&e.addDefaultCase(r)})}s.forEach(r=>{const s=i[r],a={reducerName:r,type:Nc(t,r),createNotation:"function"===typeof e.reducers};!function(e){return"asyncThunk"===e._reducerDefinitionType}(s)?function(e,t,n){let r,i,{type:s,reducerName:a,createNotation:o}=e;if("reducer"in t){if(o&&!function(e){return"reducerWithPrepare"===e._reducerDefinitionType}(t))throw new Error(ad(17));r=t.reducer,i=t.prepare}else r=t;n.addCase(s,r).exposeCaseReducer(a,r).exposeAction(a,i?hc(s,i):hc(s))}(a,s,o):function(e,t,n,r){let{type:i,reducerName:s}=e;if(!r)throw new Error(ad(18));const{payloadCreator:a,fulfilled:o,pending:l,rejected:c,settled:d,options:u}=t,h=r(i,a,u);n.exposeAction(s,h),o&&n.addCase(h.fulfilled,o);l&&n.addCase(h.pending,l);c&&n.addCase(h.rejected,c);d&&n.addMatcher(h.settled,d);n.exposeCaseReducer(s,{fulfilled:o||_c,pending:l||_c,rejected:c||_c,settled:d||_c})}(a,s,o,n)});const c=e=>e,d=new Map,u=new WeakMap;let h;function p(e,t){return h||(h=l()),h(e,t)}function m(){return h||(h=l()),h.getInitialState()}function f(t){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function r(e){let i=e[t];return"undefined"===typeof i&&n&&(i=fc(u,r,m)),i}function i(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c;const r=fc(d,n,()=>new WeakMap);return fc(r,t,()=>{const r={};for(const[s,a]of Object.entries(null!==(i=e.selectors)&&void 0!==i?i:{})){var i;r[s]=Ac(a,t,()=>fc(u,t,m),n)}return r})}return{reducerPath:t,getSelectors:i,get selectors(){return i(r)},selectSlice:r}}const g=(0,Ne.A)((0,Ne.A)({name:t,reducer:p,actions:a.actionCreators,caseReducers:a.sliceCaseReducersByName,getInitialState:m},f(r)),{},{injectInto(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{reducerPath:n}=t,i=ws(t,dc);const s=null!==n&&void 0!==n?n:r;return e.inject({reducerPath:s,reducer:p},i),(0,Ne.A)((0,Ne.A)({},g),f(s,!0))}});return g}}function Ac(e,t,n,r){function i(i){let s=t(i);"undefined"===typeof s&&r&&(s=n());for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return e(s,...o)}return i.unwrapped=e,i}var Sc=kc();function _c(){}var Cc="listener",Ec="completed",Pc="cancelled",Tc="task-".concat(Pc),Mc="task-".concat(Ec),Dc="".concat(Cc,"-").concat(Pc),Oc="".concat(Cc,"-").concat(Ec),Rc=class{constructor(e){(0,ol.A)(this,"name","TaskAbortError"),(0,ol.A)(this,"message",void 0),this.code=e,this.message="".concat("task"," ").concat(Pc," (reason: ").concat(e,")")}},Ic=(e,t)=>{if("function"!==typeof e)throw new TypeError(ad(32))},Lc=()=>{},Fc=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Lc;return e.catch(t),e},Bc=(e,t)=>(e.addEventListener("abort",t,{once:!0}),()=>e.removeEventListener("abort",t)),zc=(e,t)=>{const n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},Wc=e=>{if(e.aborted){const{reason:t}=e;throw new Rc(t)}};function Uc(e,t){let n=Lc;return new Promise((r,i)=>{const s=()=>i(new Rc(e.reason));e.aborted?s():(n=Bc(e,s),t.finally(()=>n()).then(r,i))}).finally(()=>{n=Lc})}var Vc=e=>t=>Fc(Uc(e,t).then(t=>(Wc(e),t))),Hc=e=>{const t=Vc(e);return e=>t(new Promise(t=>setTimeout(t,e)))},{assign:qc}=Object,Gc={},Kc="listenerMiddleware",Yc=(e,t)=>(n,r)=>{Ic(n);const i=new AbortController;var s;s=i,Bc(e,()=>zc(s,e.reason));const a=(async(e,t)=>{try{return await Promise.resolve(),{status:"ok",value:await e()}}catch(n){return{status:n instanceof Rc?"cancelled":"rejected",error:n}}finally{null===t||void 0===t||t()}})(async()=>{Wc(e),Wc(i.signal);const t=await n({pause:Vc(i.signal),delay:Hc(i.signal),signal:i.signal});return Wc(i.signal),t},()=>zc(i,Mc));return null!==r&&void 0!==r&&r.autoJoin&&t.push(a.catch(Lc)),{result:Vc(e)(a),cancel(){zc(i,Tc)}}},Xc=(e,t)=>(n,r)=>Fc((async(n,r)=>{Wc(t);let i=()=>{};const s=new Promise((t,r)=>{let s=e({predicate:n,effect:(e,n)=>{n.unsubscribe(),t([e,n.getState(),n.getOriginalState()])}});i=()=>{s(),r()}}),a=[s];null!=r&&a.push(new Promise(e=>setTimeout(e,r,null)));try{const e=await Uc(t,Promise.race(a));return Wc(t),e}finally{i()}})(n,r)),Jc=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=hc(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(ad(21));return Ic(s),{predicate:i,type:t,effect:s}},$c=qc(e=>{const{type:t,predicate:n,effect:r}=Jc(e);return{id:wc(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(ad(22))}}},{withTypes:()=>$c}),Qc=(e,t)=>{const{type:n,effect:r,predicate:i}=Jc(t);return Array.from(e.values()).find(e=>("string"===typeof n?e.type===n:e.predicate===i)&&e.effect===r)},Zc=e=>{e.pending.forEach(e=>{zc(e,Dc)})},ed=(e,t,n)=>{try{e(t,n)}catch(r){setTimeout(()=>{throw r},0)}},td=qc(hc("".concat(Kc,"/add")),{withTypes:()=>td}),nd=hc("".concat(Kc,"/removeAll")),rd=qc(hc("".concat(Kc,"/remove")),{withTypes:()=>rd}),id=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];console.error("".concat(Kc,"/error"),...t)},sd=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=new Map,{extra:n,onError:r=id}=e;Ic(r);const i=e=>{var n;return(e=>(e.unsubscribe=()=>t.delete(e.id),t.set(e.id,e),t=>{e.unsubscribe(),null!==t&&void 0!==t&&t.cancelActive&&Zc(e)}))(null!==(n=Qc(t,e))&&void 0!==n?n:$c(e))};qc(i,{withTypes:()=>i});const s=e=>{const n=Qc(t,e);return n&&(n.unsubscribe(),e.cancelActive&&Zc(n)),!!n};qc(s,{withTypes:()=>s});const a=async(e,s,a,o)=>{const l=new AbortController,c=Xc(i,l.signal),d=[];try{e.pending.add(l),await Promise.resolve(e.effect(s,qc({},a,{getOriginalState:o,condition:(e,t)=>c(e,t).then(Boolean),take:c,delay:Hc(l.signal),pause:Vc(l.signal),extra:n,signal:l.signal,fork:Yc(l.signal,d),unsubscribe:e.unsubscribe,subscribe:()=>{t.set(e.id,e)},cancelActiveListeners:()=>{e.pending.forEach((e,t,n)=>{e!==l&&(zc(e,Dc),n.delete(e))})},cancel:()=>{zc(l,Dc),e.pending.delete(l)},throwIfCancelled:()=>{Wc(l.signal)}})))}catch(u){u instanceof Rc||ed(r,u,{raisedBy:"effect"})}finally{await Promise.all(d),zc(l,Oc),e.pending.delete(l)}},o=(e=>()=>{e.forEach(Zc),e.clear()})(t);return{middleware:e=>n=>l=>{if(!gl(l))return n(l);if(td.match(l))return i(l.payload);if(nd.match(l))return void o();if(rd.match(l))return s(l.payload);let c=e.getState();const d=()=>{if(c===Gc)throw new Error(ad(23));return c};let u;try{if(u=n(l),t.size>0){const n=e.getState(),i=Array.from(t.values());for(const t of i){let i=!1;try{i=t.predicate(l,n,c)}catch(h){i=!1,ed(r,h,{raisedBy:"predicate"})}i&&a(t,l,e,d)}}}finally{c=Gc}return u},startListening:i,stopListening:s,clearListeners:o}};Symbol.for("rtk-state-proxy-original");function ad(e){return"Minified Redux Toolkit error #".concat(e,"; visit https://redux-toolkit.js.org/Errors?code=").concat(e," for the full message or use the non-minified dev environment for full errors. ")}function od(e,t){if(t){var n=Number.parseInt(t,10);if(!qo(n))return null===e||void 0===e?void 0:e[n]}}var ld=Sc({name:"options",initialState:{chartName:"",tooltipPayloadSearcher:void 0,eventEmitter:void 0,defaultTooltipEventType:"axis"},reducers:{createEventEmitter:e=>{null==e.eventEmitter&&(e.eventEmitter=Symbol("rechartsEventEmitter"))}}}),cd=ld.reducer,{createEventEmitter:dd}=ld.actions;n(7237);function ud(e){e()}var hd={notify(){},get:()=>[]};function pd(e,t){let n,r=hd,i=0,s=!1;function a(){c.onStateChange&&c.onStateChange()}function o(){i++,n||(n=t?t.addNestedSub(a):e.subscribe(a),r=function(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ud(()=>{let t=e;for(;t;)t.callback(),t=t.next})},get(){const t=[];let n=e;for(;n;)t.push(n),n=n.next;return t},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){r&&null!==e&&(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}())}function l(){i--,n&&0===i&&(n(),n=void 0,r.clear(),r=hd)}const c={addNestedSub:function(e){o();const t=r.subscribe(e);let n=!1;return()=>{n||(n=!0,t(),l())}},notifyNestedSubs:function(){r.notify()},handleChangeWrapper:a,isSubscribed:function(){return s},trySubscribe:function(){s||(s=!0,o())},tryUnsubscribe:function(){s&&(s=!1,l())},getListeners:()=>r};return c}var md=(()=>!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement))(),fd=(()=>"undefined"!==typeof navigator&&"ReactNative"===navigator.product)(),gd=(()=>md||fd?i.useLayoutEffect:i.useEffect)();Object.defineProperty,Object.getOwnPropertyNames,Object.getOwnPropertySymbols,Object.getOwnPropertyDescriptor,Object.getPrototypeOf,Object.prototype;var vd=Symbol.for("react-redux-context"),yd="undefined"!==typeof globalThis?globalThis:{};function xd(){var e;if(!i.createContext)return{};const t=null!==(e=yd[vd])&&void 0!==e?e:yd[vd]=new Map;let n=t.get(i.createContext);return n||(n=i.createContext(null),t.set(i.createContext,n)),n}var bd=xd();var wd=function(e){const{children:t,context:n,serverState:r,store:s}=e,a=i.useMemo(()=>{const e=pd(s);return{store:s,subscription:e,getServerState:r?()=>r:void 0}},[s,r]),o=i.useMemo(()=>s.getState(),[s]);gd(()=>{const{subscription:e}=a;return e.onStateChange=e.notifyNestedSubs,e.trySubscribe(),o!==s.getState()&&e.notifyNestedSubs(),()=>{e.tryUnsubscribe(),e.onStateChange=void 0}},[a,o]);const l=n||bd;return i.createElement(l.Provider,{value:a},t)};var jd=Symbol.for("immer-nothing"),Nd=Symbol.for("immer-draftable"),kd=Symbol.for("immer-state");function Ad(e){throw new Error("[Immer] minified error nr: ".concat(e,". Full error at: https://bit.ly/3cXEKWf"))}var Sd=Object.getPrototypeOf;function _d(e){return!!e&&!!e[kd]}function Cd(e){var t;return!!e&&(Pd(e)||Array.isArray(e)||!!e[Nd]||!(null===(t=e.constructor)||void 0===t||!t[Nd])||Rd(e)||Id(e))}var Ed=Object.prototype.constructor.toString();function Pd(e){if(!e||"object"!==typeof e)return!1;const t=Sd(e);if(null===t)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object||"function"==typeof n&&Function.toString.call(n)===Ed}function Td(e,t){0===Md(e)?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function Md(e){const t=e[kd];return t?t.type_:Array.isArray(e)?1:Rd(e)?2:Id(e)?3:0}function Dd(e,t){return 2===Md(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Od(e,t,n){const r=Md(e);2===r?e.set(t,n):3===r?e.add(n):e[t]=n}function Rd(e){return e instanceof Map}function Id(e){return e instanceof Set}function Ld(e){return e.copy_||e.base_}function Fd(e,t){if(Rd(e))return new Map(e);if(Id(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Pd(e);if(!0===t||"class_only"===t&&!n){const t=Object.getOwnPropertyDescriptors(e);delete t[kd];let n=Reflect.ownKeys(t);for(let r=0;r<n.length;r++){const i=n[r],s=t[i];!1===s.writable&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Sd(e),t)}{const t=Sd(e);if(null!==t&&n)return(0,Ne.A)({},e);const r=Object.create(t);return Object.assign(r,e)}}function Bd(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Wd(e)||_d(e)||!Cd(e)||(Md(e)>1&&Object.defineProperties(e,{set:{value:zd},add:{value:zd},clear:{value:zd},delete:{value:zd}}),Object.freeze(e),t&&Object.values(e).forEach(e=>Bd(e,!0))),e}function zd(){Ad(2)}function Wd(e){return Object.isFrozen(e)}var Ud,Vd={};function Hd(e){const t=Vd[e];return t||Ad(0),t}function qd(){return Ud}function Gd(e,t){t&&(Hd("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function Kd(e){Yd(e),e.drafts_.forEach(Jd),e.drafts_=null}function Yd(e){e===Ud&&(Ud=e.parent_)}function Xd(e){return Ud={drafts_:[],parent_:Ud,immer_:e,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Jd(e){const t=e[kd];0===t.type_||1===t.type_?t.revoke_():t.revoked_=!0}function $d(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return void 0!==e&&e!==n?(n[kd].modified_&&(Kd(t),Ad(4)),Cd(e)&&(e=Qd(t,e),t.parent_||eu(t,e)),t.patches_&&Hd("Patches").generateReplacementPatches_(n[kd].base_,e,t.patches_,t.inversePatches_)):e=Qd(t,n,[]),Kd(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==jd?e:void 0}function Qd(e,t,n){if(Wd(t))return t;const r=t[kd];if(!r)return Td(t,(i,s)=>Zd(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return eu(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const t=r.copy_;let i=t,s=!1;3===r.type_&&(i=new Set(t),t.clear(),s=!0),Td(i,(i,a)=>Zd(e,r,t,i,a,n,s)),eu(e,t,!1),n&&e.patches_&&Hd("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Zd(e,t,n,r,i,s,a){if(_d(i)){const a=Qd(e,i,s&&t&&3!==t.type_&&!Dd(t.assigned_,r)?s.concat(r):void 0);if(Od(n,r,a),!_d(a))return;e.canAutoFreeze_=!1}else a&&n.add(i);if(Cd(i)&&!Wd(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;Qd(e,i),t&&t.scope_.parent_||"symbol"===typeof r||!(Rd(n)?n.has(r):Object.prototype.propertyIsEnumerable.call(n,r))||eu(e,i)}}function eu(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Bd(t,n)}var tu={get(e,t){if(t===kd)return e;const n=Ld(e);if(!Dd(n,t))return function(e,t,n){var r;const i=iu(t,n);return i?"value"in i?i.value:null===(r=i.get)||void 0===r?void 0:r.call(e.draft_):void 0}(e,n,t);const r=n[t];return e.finalized_||!Cd(r)?r:r===ru(e.base_,t)?(au(e),e.copy_[t]=ou(r,e)):r},has:(e,t)=>t in Ld(e),ownKeys:e=>Reflect.ownKeys(Ld(e)),set(e,t,n){const r=iu(Ld(e),t);if(null!==r&&void 0!==r&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const r=ru(Ld(e),t),i=null===r||void 0===r?void 0:r[kd];if(i&&i.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(function(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}(n,r)&&(void 0!==n||Dd(e.base_,t)))return!0;au(e),su(e)}return e.copy_[t]===n&&(void 0!==n||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty:(e,t)=>(void 0!==ru(e.base_,t)||t in e.base_?(e.assigned_[t]=!1,au(e),su(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0),getOwnPropertyDescriptor(e,t){const n=Ld(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r?{writable:!0,configurable:1!==e.type_||"length"!==t,enumerable:r.enumerable,value:n[t]}:r},defineProperty(){Ad(11)},getPrototypeOf:e=>Sd(e.base_),setPrototypeOf(){Ad(12)}},nu={};function ru(e,t){const n=e[kd];return(n?Ld(n):e)[t]}function iu(e,t){if(!(t in e))return;let n=Sd(e);for(;n;){const e=Object.getOwnPropertyDescriptor(n,t);if(e)return e;n=Sd(n)}}function su(e){e.modified_||(e.modified_=!0,e.parent_&&su(e.parent_))}function au(e){e.copy_||(e.copy_=Fd(e.base_,e.scope_.immer_.useStrictShallowCopy_))}Td(tu,(e,t)=>{nu[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),nu.deleteProperty=function(e,t){return nu.set.call(this,e,t,void 0)},nu.set=function(e,t,n){return tu.set.call(this,e[0],t,n,e[0])};function ou(e,t){const n=Rd(e)?Hd("MapSet").proxyMap_(e,t):Id(e)?Hd("MapSet").proxySet_(e,t):function(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:qd(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=tu;n&&(i=[r],s=nu);const{revoke:a,proxy:o}=Proxy.revocable(i,s);return r.draft_=o,r.revoke_=a,o}(e,t);return(t?t.scope_:qd()).drafts_.push(n),n}function lu(e){if(!Cd(e)||Wd(e))return e;const t=e[kd];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=Fd(e,t.scope_.immer_.useStrictShallowCopy_)}else n=Fd(e,!0);return Td(n,(e,t)=>{Od(n,e,lu(t))}),t&&(t.finalized_=!1),n}var cu=new class{constructor(e){var t=this;this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(e,t,n)=>{if("function"===typeof e&&"function"!==typeof t){const n=t;t=e;const r=this;return function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;for(var i=arguments.length,s=new Array(i>1?i-1:0),a=1;a<i;a++)s[a-1]=arguments[a];return r.produce(e,e=>t.call(this,e,...s))}}let r;if("function"!==typeof t&&Ad(6),void 0!==n&&"function"!==typeof n&&Ad(7),Cd(e)){const i=Xd(this),s=ou(e,void 0);let a=!0;try{r=t(s),a=!1}finally{a?Kd(i):Yd(i)}return Gd(i,n),$d(r,i)}if(!e||"object"!==typeof e){if(r=t(e),void 0===r&&(r=e),r===jd&&(r=void 0),this.autoFreeze_&&Bd(r,!0),n){const t=[],i=[];Hd("Patches").generateReplacementPatches_(e,r,t,i),n(t,i)}return r}Ad(1)},this.produceWithPatches=(e,n)=>{if("function"===typeof e)return function(n){for(var r=arguments.length,i=new Array(r>1?r-1:0),s=1;s<r;s++)i[s-1]=arguments[s];return t.produceWithPatches(n,t=>e(t,...i))};let r,i;const s=this.produce(e,n,(e,t)=>{r=e,i=t});return[s,r,i]},"boolean"===typeof(null===e||void 0===e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze),"boolean"===typeof(null===e||void 0===e?void 0:e.useStrictShallowCopy)&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Cd(e)||Ad(8),_d(e)&&(e=function(e){_d(e)||Ad(10);return lu(e)}(e));const t=Xd(this),n=ou(e,void 0);return n[kd].isManual_=!0,Yd(t),n}finishDraft(e,t){const n=e&&e[kd];n&&n.isManual_||Ad(9);const{scope_:r}=n;return Gd(r,t),$d(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(0===r.path.length&&"replace"===r.op){e=r.value;break}}n>-1&&(t=t.slice(n+1));const r=Hd("Patches").applyPatches_;return _d(e)?r(e,t):this.produce(e,e=>r(e,t))}};cu.produce;var du={active:!1,index:null,dataKey:void 0,coordinate:void 0},uu=Sc({name:"tooltip",initialState:{itemInteraction:{click:du,hover:du},axisInteraction:{click:du,hover:du},keyboardInteraction:du,syncInteraction:{active:!1,index:null,dataKey:void 0,label:void 0,coordinate:void 0},tooltipItemPayloads:[],settings:{shared:void 0,trigger:"hover",axisId:0,active:!1,defaultIndex:void 0}},reducers:{addTooltipEntrySettings(e,t){e.tooltipItemPayloads.push(t.payload)},removeTooltipEntrySettings(e,t){var n=ac(e).tooltipItemPayloads.indexOf(t.payload);n>-1&&e.tooltipItemPayloads.splice(n,1)},setTooltipSettingsState(e,t){e.settings=t.payload},setActiveMouseOverItemIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.itemInteraction.hover.active=!0,e.itemInteraction.hover.index=t.payload.activeIndex,e.itemInteraction.hover.dataKey=t.payload.activeDataKey,e.itemInteraction.hover.coordinate=t.payload.activeCoordinate},mouseLeaveChart(e){e.itemInteraction.hover.active=!1,e.axisInteraction.hover.active=!1},mouseLeaveItem(e){e.itemInteraction.hover.active=!1},setActiveClickItemIndex(e,t){e.syncInteraction.active=!1,e.itemInteraction.click.active=!0,e.keyboardInteraction.active=!1,e.itemInteraction.click.index=t.payload.activeIndex,e.itemInteraction.click.dataKey=t.payload.activeDataKey,e.itemInteraction.click.coordinate=t.payload.activeCoordinate},setMouseOverAxisIndex(e,t){e.syncInteraction.active=!1,e.axisInteraction.hover.active=!0,e.keyboardInteraction.active=!1,e.axisInteraction.hover.index=t.payload.activeIndex,e.axisInteraction.hover.dataKey=t.payload.activeDataKey,e.axisInteraction.hover.coordinate=t.payload.activeCoordinate},setMouseClickAxisIndex(e,t){e.syncInteraction.active=!1,e.keyboardInteraction.active=!1,e.axisInteraction.click.active=!0,e.axisInteraction.click.index=t.payload.activeIndex,e.axisInteraction.click.dataKey=t.payload.activeDataKey,e.axisInteraction.click.coordinate=t.payload.activeCoordinate},setSyncInteraction(e,t){e.syncInteraction=t.payload},setKeyboardInteraction(e,t){e.keyboardInteraction.active=t.payload.active,e.keyboardInteraction.index=t.payload.activeIndex,e.keyboardInteraction.coordinate=t.payload.activeCoordinate,e.keyboardInteraction.dataKey=t.payload.activeDataKey}}}),{addTooltipEntrySettings:hu,removeTooltipEntrySettings:pu,setTooltipSettingsState:mu,setActiveMouseOverItemIndex:fu,mouseLeaveItem:gu,mouseLeaveChart:vu,setActiveClickItemIndex:yu,setMouseOverAxisIndex:xu,setMouseClickAxisIndex:bu,setSyncInteraction:wu,setKeyboardInteraction:ju}=uu.actions,Nu=uu.reducer,ku=Sc({name:"chartData",initialState:{chartData:void 0,computedData:void 0,dataStartIndex:0,dataEndIndex:0},reducers:{setChartData(e,t){if(e.chartData=t.payload,null==t.payload)return e.dataStartIndex=0,void(e.dataEndIndex=0);t.payload.length>0&&e.dataEndIndex!==t.payload.length-1&&(e.dataEndIndex=t.payload.length-1)},setComputedData(e,t){e.computedData=t.payload},setDataStartEndIndexes(e,t){var{startIndex:n,endIndex:r}=t.payload;null!=n&&(e.dataStartIndex=n),null!=r&&(e.dataEndIndex=r)}}}),{setChartData:Au,setDataStartEndIndexes:Su,setComputedData:_u}=ku.actions,Cu=ku.reducer,Eu=Sc({name:"chartLayout",initialState:{layoutType:"horizontal",width:0,height:0,margin:{top:5,right:5,bottom:5,left:5},scale:1},reducers:{setLayout(e,t){e.layoutType=t.payload},setChartSize(e,t){e.width=t.payload.width,e.height=t.payload.height},setMargin(e,t){var n,r,i,s;e.margin.top=null!==(n=t.payload.top)&&void 0!==n?n:0,e.margin.right=null!==(r=t.payload.right)&&void 0!==r?r:0,e.margin.bottom=null!==(i=t.payload.bottom)&&void 0!==i?i:0,e.margin.left=null!==(s=t.payload.left)&&void 0!==s?s:0},setScale(e,t){e.scale=t.payload}}}),{setMargin:Pu,setLayout:Tu,setChartSize:Mu,setScale:Du}=Eu.actions,Ou=Eu.reducer;function Ru(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected a function, instead received ".concat(typeof e);if("function"!==typeof e)throw new TypeError(t)}var Iu=e=>Array.isArray(e)?e:[e];function Lu(e){const t=Array.isArray(e[0])?e[0]:e;return function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected all items to be functions, instead received the following types: ";if(!e.every(e=>"function"===typeof e)){const n=e.map(e=>"function"===typeof e?"function ".concat(e.name||"unnamed","()"):typeof e).join(", ");throw new TypeError("".concat(t,"[").concat(n,"]"))}}(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}Symbol(),Object.getPrototypeOf({});var Fu="undefined"!==typeof WeakRef?WeakRef:class{constructor(e){this.value=e}deref(){return this.value}};function Bu(){return{s:0,v:void 0,o:null,p:null}}function zu(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={s:0,v:void 0,o:null,p:null};const{resultEqualityCheck:r}=t;let i,s=0;function a(){let t=n;const{length:a}=arguments;for(let e=0,n=a;e<n;e++){const n=arguments[e];if("function"===typeof n||"object"===typeof n&&null!==n){let e=t.o;null===e&&(t.o=e=new WeakMap);const r=e.get(n);void 0===r?(t=Bu(),e.set(n,t)):t=r}else{let e=t.p;null===e&&(t.p=e=new Map);const r=e.get(n);void 0===r?(t=Bu(),e.set(n,t)):t=r}}const o=t;let l;if(1===t.s)l=t.v;else if(l=e.apply(null,arguments),s++,r){var c,d,u;const e=null!==(c=null===(d=i)||void 0===d||null===(u=d.deref)||void 0===u?void 0:u.call(d))&&void 0!==c?c:i;null!=e&&r(e,l)&&(l=e,0!==s&&s--);i="object"===typeof l&&null!==l||"function"===typeof l?new Fu(l):l}return o.s=1,o.v=l,l}return a.clearCache=()=>{n={s:0,v:void 0,o:null,p:null},a.resetResultsCount()},a.resultsCount=()=>s,a.resetResultsCount=()=>{s=0},a}function Wu(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i="function"===typeof e?{memoize:e,memoizeOptions:n}:e,s=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];let r,s=0,a=0,o={},l=t.pop();"object"===typeof l&&(o=l,l=t.pop()),Ru(l,"createSelector expects an output function after the inputs, but received: [".concat(typeof l,"]"));const c=(0,Ne.A)((0,Ne.A)({},i),o),{memoize:d,memoizeOptions:u=[],argsMemoize:h=zu,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,f=Iu(u),g=Iu(p),v=Lu(t),y=d(function(){return s++,l.apply(null,arguments)},...f);const x=h(function(){a++;const e=function(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}(v,arguments);return r=y.apply(null,e),r},...g);return Object.assign(x,{resultFunc:l,memoizedResultFunc:y,dependencies:v,dependencyRecomputations:()=>a,resetDependencyRecomputations:()=>{a=0},lastResult:()=>r,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:d,argsMemoize:h})};return Object.assign(s,{withTypes:()=>s}),s}var Uu=Wu(zu),Vu=Object.assign(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Uu;!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"expected an object, instead received ".concat(typeof e);if("object"!==typeof e)throw new TypeError(t)}(e,"createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ".concat(typeof e));const n=Object.keys(e),r=t(n.map(t=>e[t]),function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce((e,t,r)=>(e[n[r]]=t,e),{})});return r},{withTypes:()=>Vu}),Hu=n(8443),qu=(0,i.createContext)(null),Gu=e=>e,Ku=()=>{var e=(0,i.useContext)(qu);return e?e.store.dispatch:Gu},Yu=()=>{},Xu=()=>Yu,Ju=(e,t)=>e===t;function $u(e){var t=(0,i.useContext)(qu);return(0,Hu.useSyncExternalStoreWithSelector)(t?t.subscription.addNestedSub:Xu,t?t.store.getState:Yu,t?t.store.getState:Yu,t?e:Yu,Ju)}var Qu=n(3821),Zu=n.n(Qu),eh=e=>e.legend.settings,th=Uu([e=>e.legend.payload,eh],(e,t)=>{var{itemSorter:n}=t,r=e.flat(1);return n?Zu()(r,n):r});function nh(e,t){if((i=e.length)>1)for(var n,r,i,s=1,a=e[t[0]],o=a.length;s<i;++s)for(r=a,a=e[t[s]],n=0;n<o;++n)a[n][1]+=a[n][0]=isNaN(r[n][1])?r[n][0]:r[n][1]}Array.prototype.slice;function rh(e){return"object"===typeof e&&"length"in e?e:Array.from(e)}function ih(e){return function(){return e}}function sh(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function ah(e,t){return e[t]}function oh(e){const t=[];return t.key=e,t}function lh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ch(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lh(Object(n),!0).forEach(function(t){dh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function dh(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uh=Math.PI/180,hh=e=>180*e/Math.PI,ph=(e,t,n,r)=>({x:e+Math.cos(-uh*r)*n,y:t+Math.sin(-uh*r)*n}),mh=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{top:0,right:0,bottom:0,left:0,width:0,height:0,brushBottom:0};return Math.min(Math.abs(e-(n.left||0)-(n.right||0)),Math.abs(t-(n.top||0)-(n.bottom||0)))/2},fh=(e,t)=>{var{x:n,y:r}=e,{cx:i,cy:s}=t,a=((e,t)=>{var{x:n,y:r}=e,{x:i,y:s}=t;return Math.sqrt((n-i)**2+(r-s)**2)})({x:n,y:r},{x:i,y:s});if(a<=0)return{radius:a,angle:0};var o=(n-i)/a,l=Math.acos(o);return r>s&&(l=2*Math.PI-l),{radius:a,angle:hh(l),angleInRadian:l}},gh=(e,t)=>{var{startAngle:n,endAngle:r}=t,i=Math.floor(n/360),s=Math.floor(r/360);return e+360*Math.min(i,s)},vh=(e,t)=>{var{x:n,y:r}=e,{radius:i,angle:s}=fh({x:n,y:r},t),{innerRadius:a,outerRadius:o}=t;if(i<a||i>o)return null;if(0===i)return null;var l,{startAngle:c,endAngle:d}=(e=>{var{startAngle:t,endAngle:n}=e,r=Math.floor(t/360),i=Math.floor(n/360),s=Math.min(r,i);return{startAngle:t-360*s,endAngle:n-360*s}})(t),u=s;if(c<=d){for(;u>d;)u-=360;for(;u<c;)u+=360;l=u>=c&&u<=d}else{for(;u>c;)u-=360;for(;u<d;)u+=360;l=u>=d&&u<=c}return l?ch(ch({},t),{},{radius:i,angle:gh(u,t)}):null};function yh(e,t,n){return Array.isArray(e)&&e&&t+n!==0?e.slice(t,n+1):e}function xh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xh(Object(n),!0).forEach(function(t){wh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wh(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jh(e,t,n){return el(e)||el(t)?n:Yo(t)?Vo()(e,t,n):"function"===typeof t?t(e):n}var Nh=(e,t)=>"horizontal"===e&&"xAxis"===t||"vertical"===e&&"yAxis"===t||"centric"===e&&"angleAxis"===t||"radial"===e&&"radiusAxis"===t,kh=1e-4,Ah={sign:e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0,a=0;a<t;++a){var o=qo(e[a][n][1])?e[a][n][0]:e[a][n][1];o>=0?(e[a][n][0]=i,e[a][n][1]=i+o,i=e[a][n][1]):(e[a][n][0]=s,e[a][n][1]=s+o,s=e[a][n][1])}},expand:function(e,t){if((r=e.length)>0){for(var n,r,i,s=0,a=e[0].length;s<a;++s){for(i=n=0;n<r;++n)i+=e[n][s][1]||0;if(i)for(n=0;n<r;++n)e[n][s][1]/=i}nh(e,t)}},none:nh,silhouette:function(e,t){if((n=e.length)>0){for(var n,r=0,i=e[t[0]],s=i.length;r<s;++r){for(var a=0,o=0;a<n;++a)o+=e[a][r][1]||0;i[r][1]+=i[r][0]=-o/2}nh(e,t)}},wiggle:function(e,t){if((i=e.length)>0&&(r=(n=e[t[0]]).length)>0){for(var n,r,i,s=0,a=1;a<r;++a){for(var o=0,l=0,c=0;o<i;++o){for(var d=e[t[o]],u=d[a][1]||0,h=(u-(d[a-1][1]||0))/2,p=0;p<o;++p){var m=e[t[p]];h+=(m[a][1]||0)-(m[a-1][1]||0)}l+=u,c+=h*u}n[a-1][1]+=n[a-1][0]=s,l&&(s-=c/l)}n[a-1][1]+=n[a-1][0]=s,nh(e,t)}},positive:e=>{var t=e.length;if(!(t<=0))for(var n=0,r=e[0].length;n<r;++n)for(var i=0,s=0;s<t;++s){var a=qo(e[s][n][1])?e[s][n][0]:e[s][n][1];a>=0?(e[s][n][0]=i,e[s][n][1]=i+a,i=e[s][n][1]):(e[s][n][0]=0,e[s][n][1]=0)}}},Sh=(e,t,n)=>{var r=Ah[n],i=function(){var e=ih([]),t=sh,n=nh,r=ah;function i(i){var s,a,o=Array.from(e.apply(this,arguments),oh),l=o.length,c=-1;for(const e of i)for(s=0,++c;s<l;++s)(o[s][c]=[0,+r(e,o[s].key,c,i)]).data=e;for(s=0,a=rh(t(o));s<l;++s)o[a[s]].index=s;return n(o,a),o}return i.keys=function(t){return arguments.length?(e="function"===typeof t?t:ih(Array.from(t)),i):e},i.value=function(e){return arguments.length?(r="function"===typeof e?e:ih(+e),i):r},i.order=function(e){return arguments.length?(t=null==e?sh:"function"===typeof e?e:ih(Array.from(e)),i):t},i.offset=function(e){return arguments.length?(n=null==e?nh:e,i):n},i}().keys(t).value((e,t)=>+jh(e,t,0)).order(sh).offset(r);return i(e)};var _h=(e,t,n)=>{var r;if(null!=e)return r=Object.keys(e).reduce((r,i)=>{var s=e[i],{stackedData:a}=s,o=a.reduce((e,r)=>{var i=(e=>{var t=e.flat(2).filter(Ko);return[Math.min(...t),Math.max(...t)]})(yh(r,t,n));return[Math.min(e[0],i[0]),Math.max(e[1],i[1])]},[1/0,-1/0]);return[Math.min(o[0],r[0]),Math.max(o[1],r[1])]},[1/0,-1/0]),[r[0]===1/0?0:r[0],r[1]===-1/0?0:r[1]]},Ch=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Eh=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/;function Ph(e){var{tooltipEntrySettings:t,dataKey:n,payload:r,value:i,name:s}=e;return bh(bh({},t),{},{dataKey:n,payload:r,value:i,name:s})}function Th(e,t){return e?String(e):"string"===typeof t?t:void 0}var Mh=e=>e.layout.width,Dh=e=>e.layout.height,Oh=e=>e.layout.scale,Rh=e=>e.layout.margin,Ih=Uu(e=>e.cartesianAxis.xAxis,e=>Object.values(e)),Lh=Uu(e=>e.cartesianAxis.yAxis,e=>Object.values(e)),Fh="data-recharts-item-index",Bh="data-recharts-item-data-key";function zh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Wh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zh(Object(n),!0).forEach(function(t){Uh(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zh(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Uh(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vh=Uu([Mh,Dh,Rh,e=>e.brush.height,function(e){return Lh(e).reduce((e,t)=>"left"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return Lh(e).reduce((e,t)=>"right"!==t.orientation||t.mirror||t.hide?e:e+("number"===typeof t.width?t.width:60),0)},function(e){return Ih(e).reduce((e,t)=>"top"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},function(e){return Ih(e).reduce((e,t)=>"bottom"!==t.orientation||t.mirror||t.hide?e:e+t.height,0)},eh,e=>e.legend.size],(e,t,n,r,i,s,a,o,l,c)=>{var d={left:(n.left||0)+i,right:(n.right||0)+s},u=Wh(Wh({},{top:(n.top||0)+a,bottom:(n.bottom||0)+o}),d),h=u.bottom;u.bottom+=r,u=((e,t,n)=>{if(t&&n){var{width:r,height:i}=n,{align:s,verticalAlign:a,layout:o}=t;if(("vertical"===o||"horizontal"===o&&"middle"===a)&&"center"!==s&&Ko(e[s]))return bh(bh({},e),{},{[s]:e[s]+(r||0)});if(("horizontal"===o||"vertical"===o&&"center"===s)&&"middle"!==a&&Ko(e[a]))return bh(bh({},e),{},{[a]:e[a]+(i||0)})}return e})(u,l,c);var p=e-u.left-u.right,m=t-u.top-u.bottom;return Wh(Wh({brushBottom:h},u),{},{width:Math.max(p,0),height:Math.max(m,0)})}),Hh=Uu(Vh,e=>({x:e.left,y:e.top,width:e.width,height:e.height})),qh=(Uu(Mh,Dh,(e,t)=>({x:0,y:0,width:e,height:t})),(0,i.createContext)(null)),Gh=()=>null!=(0,i.useContext)(qh),Kh=e=>e.brush,Yh=Uu([Kh,Vh,Rh],(e,t,n)=>({height:e.height,x:Ko(e.x)?e.x:t.left,y:Ko(e.y)?e.y:t.top+t.height+t.brushBottom-((null===n||void 0===n?void 0:n.bottom)||0),width:Ko(e.width)?e.width:t.width})),Xh=()=>{var e,t=Gh(),n=$u(Hh),r=$u(Yh),i=null===(e=$u(Kh))||void 0===e?void 0:e.padding;return t&&r&&i?{width:r.width-i.left-i.right,height:r.height-i.top-i.bottom,x:i.left,y:i.top}:n},Jh={top:0,bottom:0,left:0,right:0,width:0,height:0,brushBottom:0},$h=()=>$u(Mh),Qh=()=>$u(Dh),Zh=e=>e.layout.layoutType,ep=()=>$u(Zh),tp=n(9859),np=n.n(tp);function rp(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e)}return this}function ip(e,t){switch(arguments.length){case 0:break;case 1:"function"===typeof e?this.interpolator(e):this.range(e);break;default:this.domain(e),"function"===typeof t?this.interpolator(t):this.range(t)}return this}class sp extends Map{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:cp;if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:t}}),null!=e)for(const[n,r]of e)this.set(n,r)}get(e){return super.get(ap(this,e))}has(e){return super.has(ap(this,e))}set(e,t){return super.set(op(this,e),t)}delete(e){return super.delete(lp(this,e))}}Set;function ap(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):t}function op(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)?n.get(i):(n.set(i,t),t)}function lp(e,t){let{_intern:n,_key:r}=e;const i=r(t);return n.has(i)&&(t=n.get(i),n.delete(i)),t}function cp(e){return null!==e&&"object"===typeof e?e.valueOf():e}const dp=Symbol("implicit");function up(){var e=new sp,t=[],n=[],r=dp;function i(i){let s=e.get(i);if(void 0===s){if(r!==dp)return r;e.set(i,s=t.push(i)-1)}return n[s%n.length]}return i.domain=function(n){if(!arguments.length)return t.slice();t=[],e=new sp;for(const r of n)e.has(r)||e.set(r,t.push(r)-1);return i},i.range=function(e){return arguments.length?(n=Array.from(e),i):n.slice()},i.unknown=function(e){return arguments.length?(r=e,i):r},i.copy=function(){return up(t,n).unknown(r)},rp.apply(i,arguments),i}function hp(){var e,t,n=up().unknown(void 0),r=n.domain,i=n.range,s=0,a=1,o=!1,l=0,c=0,d=.5;function u(){var n=r().length,u=a<s,h=u?a:s,p=u?s:a;e=(p-h)/Math.max(1,n-l+2*c),o&&(e=Math.floor(e)),h+=(p-h-e*(n-l))*d,t=e*(1-l),o&&(h=Math.round(h),t=Math.round(t));var m=function(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((t-e)/n)),s=new Array(i);++r<i;)s[r]=e+r*n;return s}(n).map(function(t){return h+e*t});return i(u?m.reverse():m)}return delete n.unknown,n.domain=function(e){return arguments.length?(r(e),u()):r()},n.range=function(e){return arguments.length?([s,a]=e,s=+s,a=+a,u()):[s,a]},n.rangeRound=function(e){return[s,a]=e,s=+s,a=+a,o=!0,u()},n.bandwidth=function(){return t},n.step=function(){return e},n.round=function(e){return arguments.length?(o=!!e,u()):o},n.padding=function(e){return arguments.length?(l=Math.min(1,c=+e),u()):l},n.paddingInner=function(e){return arguments.length?(l=Math.min(1,e),u()):l},n.paddingOuter=function(e){return arguments.length?(c=+e,u()):c},n.align=function(e){return arguments.length?(d=Math.max(0,Math.min(1,e)),u()):d},n.copy=function(){return hp(r(),[s,a]).round(o).paddingInner(l).paddingOuter(c).align(d)},rp.apply(u(),arguments)}function pp(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return pp(t())},e}function mp(){return pp(hp.apply(null,arguments).paddingInner(1))}const fp=Math.sqrt(50),gp=Math.sqrt(10),vp=Math.sqrt(2);function yp(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=fp?10:s>=gp?5:s>=vp?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(e*c),l=Math.round(t*c),o/c<e&&++o,l/c>t&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(e/c),l=Math.round(t/c),o*c<e&&++o,l*c>t&&--l),l<o&&.5<=n&&n<2?yp(e,t,2*n):[o,l,c]}function xp(e,t,n){if(!((n=+n)>0))return[];if((e=+e)===(t=+t))return[e];const r=t<e,[i,s,a]=r?yp(t,e,n):yp(e,t,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function bp(e,t,n){return yp(e=+e,t=+t,n=+n)[2]}function wp(e,t,n){n=+n;const r=(t=+t)<(e=+e),i=r?bp(t,e,n):bp(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function jp(e,t){return null==e||null==t?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Np(e,t){return null==e||null==t?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function kp(e){let t,n,r;function i(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<s){if(0!==t(r,r))return s;do{const t=i+s>>>1;n(e[t],r)<0?i=t+1:s=t}while(i<s)}return i}return 2!==e.length?(t=jp,n=(t,n)=>jp(e(t),n),r=(t,n)=>e(t)-n):(t=e===jp||e===Np?e:Ap,n=e,r=e),{left:i,center:function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const s=i(e,t,n,(arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length)-1);return s>n&&r(e[s-1],t)>-r(e[s],t)?s-1:s},right:function(e,r){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.length;if(i<s){if(0!==t(r,r))return s;do{const t=i+s>>>1;n(e[t],r)<=0?i=t+1:s=t}while(i<s)}return i}}}function Ap(){return 0}function Sp(e){return null===e?NaN:+e}const _p=kp(jp),Cp=_p.right,Ep=(_p.left,kp(Sp).center,Cp);function Pp(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Tp(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Mp(){}var Dp=.7,Op=1/Dp,Rp="\\s*([+-]?\\d+)\\s*",Ip="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Lp="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Fp=/^#([0-9a-f]{3,8})$/,Bp=new RegExp("^rgb\\(".concat(Rp,",").concat(Rp,",").concat(Rp,"\\)$")),zp=new RegExp("^rgb\\(".concat(Lp,",").concat(Lp,",").concat(Lp,"\\)$")),Wp=new RegExp("^rgba\\(".concat(Rp,",").concat(Rp,",").concat(Rp,",").concat(Ip,"\\)$")),Up=new RegExp("^rgba\\(".concat(Lp,",").concat(Lp,",").concat(Lp,",").concat(Ip,"\\)$")),Vp=new RegExp("^hsl\\(".concat(Ip,",").concat(Lp,",").concat(Lp,"\\)$")),Hp=new RegExp("^hsla\\(".concat(Ip,",").concat(Lp,",").concat(Lp,",").concat(Ip,"\\)$")),qp={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};function Gp(){return this.rgb().formatHex()}function Kp(){return this.rgb().formatRgb()}function Yp(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Fp.exec(e))?(n=t[1].length,t=parseInt(t[1],16),6===n?Xp(t):3===n?new Qp(t>>8&15|t>>4&240,t>>4&15|240&t,(15&t)<<4|15&t,1):8===n?Jp(t>>24&255,t>>16&255,t>>8&255,(255&t)/255):4===n?Jp(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|240&t,((15&t)<<4|15&t)/255):null):(t=Bp.exec(e))?new Qp(t[1],t[2],t[3],1):(t=zp.exec(e))?new Qp(255*t[1]/100,255*t[2]/100,255*t[3]/100,1):(t=Wp.exec(e))?Jp(t[1],t[2],t[3],t[4]):(t=Up.exec(e))?Jp(255*t[1]/100,255*t[2]/100,255*t[3]/100,t[4]):(t=Vp.exec(e))?im(t[1],t[2]/100,t[3]/100,1):(t=Hp.exec(e))?im(t[1],t[2]/100,t[3]/100,t[4]):qp.hasOwnProperty(e)?Xp(qp[e]):"transparent"===e?new Qp(NaN,NaN,NaN,0):null}function Xp(e){return new Qp(e>>16&255,e>>8&255,255&e,1)}function Jp(e,t,n,r){return r<=0&&(e=t=n=NaN),new Qp(e,t,n,r)}function $p(e,t,n,r){return 1===arguments.length?function(e){return e instanceof Mp||(e=Yp(e)),e?new Qp((e=e.rgb()).r,e.g,e.b,e.opacity):new Qp}(e):new Qp(e,t,n,null==r?1:r)}function Qp(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}function Zp(){return"#".concat(rm(this.r)).concat(rm(this.g)).concat(rm(this.b))}function em(){const e=tm(this.opacity);return"".concat(1===e?"rgb(":"rgba(").concat(nm(this.r),", ").concat(nm(this.g),", ").concat(nm(this.b)).concat(1===e?")":", ".concat(e,")"))}function tm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function nm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function rm(e){return((e=nm(e))<16?"0":"")+e.toString(16)}function im(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new am(e,t,n,r)}function sm(e){if(e instanceof am)return new am(e.h,e.s,e.l,e.opacity);if(e instanceof Mp||(e=Yp(e)),!e)return new am;if(e instanceof am)return e;var t=(e=e.rgb()).r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(a=t===s?(n-r)/o+6*(n<r):n===s?(r-t)/o+2:(t-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new am(a,o,l,e.opacity)}function am(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}function om(e){return(e=(e||0)%360)<0?e+360:e}function lm(e){return Math.max(0,Math.min(1,e||0))}function cm(e,t,n){return 255*(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)}function dm(e,t,n,r,i){var s=e*e,a=s*e;return((1-3*e+3*s-a)*t+(4-6*s+3*a)*n+(1+3*e+3*s-3*a)*r+a*i)/6}Pp(Mp,Yp,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Gp,formatHex:Gp,formatHex8:function(){return this.rgb().formatHex8()},formatHsl:function(){return sm(this).formatHsl()},formatRgb:Kp,toString:Kp}),Pp(Qp,$p,Tp(Mp,{brighter(e){return e=null==e?Op:Math.pow(Op,e),new Qp(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=null==e?Dp:Math.pow(Dp,e),new Qp(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Qp(nm(this.r),nm(this.g),nm(this.b),tm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Zp,formatHex:Zp,formatHex8:function(){return"#".concat(rm(this.r)).concat(rm(this.g)).concat(rm(this.b)).concat(rm(255*(isNaN(this.opacity)?1:this.opacity)))},formatRgb:em,toString:em})),Pp(am,function(e,t,n,r){return 1===arguments.length?sm(e):new am(e,t,n,null==r?1:r)},Tp(Mp,{brighter(e){return e=null==e?Op:Math.pow(Op,e),new am(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=null==e?Dp:Math.pow(Dp,e),new am(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+360*(this.h<0),t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Qp(cm(e>=240?e-240:e+120,i,r),cm(e,i,r),cm(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new am(om(this.h),lm(this.s),lm(this.l),tm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=tm(this.opacity);return"".concat(1===e?"hsl(":"hsla(").concat(om(this.h),", ").concat(100*lm(this.s),"%, ").concat(100*lm(this.l),"%").concat(1===e?")":", ".concat(e,")"))}}));const um=e=>()=>e;function hm(e,t){return function(n){return e+n*t}}function pm(e){return 1===(e=+e)?mm:function(t,n){return n-t?function(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}(t,n,e):um(isNaN(t)?n:t)}}function mm(e,t){var n=t-e;return n?hm(e,n):um(isNaN(e)?t:e)}const fm=function e(t){var n=pm(t);function r(e,t){var r=n((e=$p(e)).r,(t=$p(t)).r),i=n(e.g,t.g),s=n(e.b,t.b),a=mm(e.opacity,t.opacity);return function(t){return e.r=r(t),e.g=i(t),e.b=s(t),e.opacity=a(t),e+""}}return r.gamma=e,r}(1);function gm(e){return function(t){var n,r,i=t.length,s=new Array(i),a=new Array(i),o=new Array(i);for(n=0;n<i;++n)r=$p(t[n]),s[n]=r.r||0,a[n]=r.g||0,o[n]=r.b||0;return s=e(s),a=e(a),o=e(o),r.opacity=1,function(e){return r.r=s(e),r.g=a(e),r.b=o(e),r+""}}}gm(function(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],a=r>0?e[r-1]:2*i-s,o=r<t-1?e[r+2]:2*s-i;return dm((n-r/t)*t,a,i,s,o)}}),gm(function(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],a=e[(r+1)%t],o=e[(r+2)%t];return dm((n-r/t)*t,i,s,a,o)}});function vm(e,t){var n,r=t?t.length:0,i=e?Math.min(r,e.length):0,s=new Array(i),a=new Array(r);for(n=0;n<i;++n)s[n]=Am(e[n],t[n]);for(;n<r;++n)a[n]=t[n];return function(e){for(n=0;n<i;++n)a[n]=s[n](e);return a}}function ym(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function xm(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function bm(e,t){var n,r={},i={};for(n in null!==e&&"object"===typeof e||(e={}),null!==t&&"object"===typeof t||(t={}),t)n in e?r[n]=Am(e[n],t[n]):i[n]=t[n];return function(e){for(n in r)i[n]=r[n](e);return i}}var wm=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,jm=new RegExp(wm.source,"g");function Nm(e,t){var n,r,i,s=wm.lastIndex=jm.lastIndex=0,a=-1,o=[],l=[];for(e+="",t+="";(n=wm.exec(e))&&(r=jm.exec(t));)(i=r.index)>s&&(i=t.slice(s,i),o[a]?o[a]+=i:o[++a]=i),(n=n[0])===(r=r[0])?o[a]?o[a]+=r:o[++a]=r:(o[++a]=null,l.push({i:a,x:xm(n,r)})),s=jm.lastIndex;return s<t.length&&(i=t.slice(s),o[a]?o[a]+=i:o[++a]=i),o.length<2?l[0]?function(e){return function(t){return e(t)+""}}(l[0].x):function(e){return function(){return e}}(t):(t=l.length,function(e){for(var n,r=0;r<t;++r)o[(n=l[r]).i]=n.x(e);return o.join("")})}function km(e,t){t||(t=[]);var n,r=e?Math.min(t.length,e.length):0,i=t.slice();return function(s){for(n=0;n<r;++n)i[n]=e[n]*(1-s)+t[n]*s;return i}}function Am(e,t){var n,r,i=typeof t;return null==t||"boolean"===i?um(t):("number"===i?xm:"string"===i?(n=Yp(t))?(t=n,fm):Nm:t instanceof Yp?fm:t instanceof Date?ym:(r=t,!ArrayBuffer.isView(r)||r instanceof DataView?Array.isArray(t)?vm:"function"!==typeof t.valueOf&&"function"!==typeof t.toString||isNaN(t)?bm:xm:km))(e,t)}function Sm(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function _m(e){return+e}var Cm=[0,1];function Em(e){return e}function Pm(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:(n=isNaN(t)?NaN:.5,function(){return n});var n}function Tm(e,t,n){var r=e[0],i=e[1],s=t[0],a=t[1];return i<r?(r=Pm(i,r),s=n(a,s)):(r=Pm(r,i),s=n(s,a)),function(e){return s(r(e))}}function Mm(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),a=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<r;)i[a]=Pm(e[a],e[a+1]),s[a]=n(t[a],t[a+1]);return function(t){var n=Ep(e,t,1,r)-1;return s[n](i[n](t))}}function Dm(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Om(){var e,t,n,r,i,s,a=Cm,o=Cm,l=Am,c=Em;function d(){var e=Math.min(a.length,o.length);return c!==Em&&(c=function(e,t){var n;return e>t&&(n=e,e=t,t=n),function(n){return Math.max(e,Math.min(t,n))}}(a[0],a[e-1])),r=e>2?Mm:Tm,i=s=null,u}function u(t){return null==t||isNaN(t=+t)?n:(i||(i=r(a.map(e),o,l)))(e(c(t)))}return u.invert=function(n){return c(t((s||(s=r(o,a.map(e),xm)))(n)))},u.domain=function(e){return arguments.length?(a=Array.from(e,_m),d()):a.slice()},u.range=function(e){return arguments.length?(o=Array.from(e),d()):o.slice()},u.rangeRound=function(e){return o=Array.from(e),l=Sm,d()},u.clamp=function(e){return arguments.length?(c=!!e||Em,d()):c!==Em},u.interpolate=function(e){return arguments.length?(l=e,d()):l},u.unknown=function(e){return arguments.length?(n=e,u):n},function(n,r){return e=n,t=r,d()}}function Rm(){return Om()(Em,Em)}var Im,Lm=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Fm(e){if(!(t=Lm.exec(e)))throw new Error("invalid format: "+e);var t;return new Bm({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}function Bm(e){this.fill=void 0===e.fill?" ":e.fill+"",this.align=void 0===e.align?">":e.align+"",this.sign=void 0===e.sign?"-":e.sign+"",this.symbol=void 0===e.symbol?"":e.symbol+"",this.zero=!!e.zero,this.width=void 0===e.width?void 0:+e.width,this.comma=!!e.comma,this.precision=void 0===e.precision?void 0:+e.precision,this.trim=!!e.trim,this.type=void 0===e.type?"":e.type+""}function zm(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function Wm(e){return(e=zm(Math.abs(e)))?e[1]:NaN}function Um(e,t){var n=zm(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}Fm.prototype=Bm.prototype,Bm.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};const Vm={"%":(e,t)=>(100*e).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:function(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)},e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Um(100*e,t),r:Um,s:function(e,t){var n=zm(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(Im=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+zm(e,Math.max(0,t+s-1))[0]},X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Hm(e){return e}var qm,Gm,Km,Ym=Array.prototype.map,Xm=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];function Jm(e){var t,n,r=void 0===e.grouping||void 0===e.thousands?Hm:(t=Ym.call(e.grouping,Number),n=e.thousands+"",function(e,r){for(var i=e.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(e.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(n)}),i=void 0===e.currency?"":e.currency[0]+"",s=void 0===e.currency?"":e.currency[1]+"",a=void 0===e.decimal?".":e.decimal+"",o=void 0===e.numerals?Hm:function(e){return function(t){return t.replace(/[0-9]/g,function(t){return e[+t]})}}(Ym.call(e.numerals,String)),l=void 0===e.percent?"%":e.percent+"",c=void 0===e.minus?"\u2212":e.minus+"",d=void 0===e.nan?"NaN":e.nan+"";function u(e){var t=(e=Fm(e)).fill,n=e.align,u=e.sign,h=e.symbol,p=e.zero,m=e.width,f=e.comma,g=e.precision,v=e.trim,y=e.type;"n"===y?(f=!0,y="g"):Vm[y]||(void 0===g&&(g=12),v=!0,y="g"),(p||"0"===t&&"="===n)&&(p=!0,t="0",n="=");var x="$"===h?i:"#"===h&&/[boxX]/.test(y)?"0"+y.toLowerCase():"",b="$"===h?s:/[%p]/.test(y)?l:"",w=Vm[y],j=/[defgprs%]/.test(y);function N(e){var i,s,l,h=x,N=b;if("c"===y)N=w(e)+N,e="";else{var k=(e=+e)<0||1/e<0;if(e=isNaN(e)?d:w(Math.abs(e),g),v&&(e=function(e){e:for(var t,n=e.length,r=1,i=-1;r<n;++r)switch(e[r]){case".":i=t=r;break;case"0":0===i&&(i=r),t=r;break;default:if(!+e[r])break e;i>0&&(i=0)}return i>0?e.slice(0,i)+e.slice(t+1):e}(e)),k&&0===+e&&"+"!==u&&(k=!1),h=(k?"("===u?u:c:"-"===u||"("===u?"":u)+h,N=("s"===y?Xm[8+Im/3]:"")+N+(k&&"("===u?")":""),j)for(i=-1,s=e.length;++i<s;)if(48>(l=e.charCodeAt(i))||l>57){N=(46===l?a+e.slice(i+1):e.slice(i))+N,e=e.slice(0,i);break}}f&&!p&&(e=r(e,1/0));var A=h.length+e.length+N.length,S=A<m?new Array(m-A+1).join(t):"";switch(f&&p&&(e=r(S+e,S.length?m-N.length:1/0),S=""),n){case"<":e=h+e+N+S;break;case"=":e=h+S+e+N;break;case"^":e=S.slice(0,A=S.length>>1)+h+e+N+S.slice(A);break;default:e=S+h+e+N}return o(e)}return g=void 0===g?6:/[gprs]/.test(y)?Math.max(1,Math.min(21,g)):Math.max(0,Math.min(20,g)),N.toString=function(){return e+""},N}return{format:u,formatPrefix:function(e,t){var n=u(((e=Fm(e)).type="f",e)),r=3*Math.max(-8,Math.min(8,Math.floor(Wm(t)/3))),i=Math.pow(10,-r),s=Xm[8+r/3];return function(e){return n(i*e)+s}}}}function $m(e,t,n,r){var i,s=wp(e,t,n);switch((r=Fm(null==r?",f":r)).type){case"s":var a=Math.max(Math.abs(e),Math.abs(t));return null!=r.precision||isNaN(i=function(e,t){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(Wm(t)/3)))-Wm(Math.abs(e)))}(s,a))||(r.precision=i),Km(r,a);case"":case"e":case"g":case"p":case"r":null!=r.precision||isNaN(i=function(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Wm(t)-Wm(e))+1}(s,Math.max(Math.abs(e),Math.abs(t))))||(r.precision=i-("e"===r.type));break;case"f":case"%":null!=r.precision||isNaN(i=function(e){return Math.max(0,-Wm(Math.abs(e)))}(s))||(r.precision=i-2*("%"===r.type))}return Gm(r)}function Qm(e){var t=e.domain;return e.ticks=function(e){var n=t();return xp(n[0],n[n.length-1],null==e?10:e)},e.tickFormat=function(e,n){var r=t();return $m(r[0],r[r.length-1],null==e?10:e,n)},e.nice=function(n){null==n&&(n=10);var r,i,s=t(),a=0,o=s.length-1,l=s[a],c=s[o],d=10;for(c<l&&(i=l,l=c,c=i,i=a,a=o,o=i);d-- >0;){if((i=bp(l,c,n))===r)return s[a]=l,s[o]=c,t(s);if(i>0)l=Math.floor(l/i)*i,c=Math.ceil(c/i)*i;else{if(!(i<0))break;l=Math.ceil(l*i)/i,c=Math.floor(c*i)/i}r=i}return e},e}function Zm(){var e=Rm();return e.copy=function(){return Dm(e,Zm())},rp.apply(e,arguments),Qm(e)}function ef(e){var t;function n(e){return null==e||isNaN(e=+e)?t:e}return n.invert=n,n.domain=n.range=function(t){return arguments.length?(e=Array.from(t,_m),n):e.slice()},n.unknown=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return ef(e).unknown(t)},e=arguments.length?Array.from(e,_m):[0,1],Qm(n)}function tf(e,t){var n,r=0,i=(e=e.slice()).length-1,s=e[r],a=e[i];return a<s&&(n=r,r=i,i=n,n=s,s=a,a=n),e[r]=t.floor(s),e[i]=t.ceil(a),e}function nf(e){return Math.log(e)}function rf(e){return Math.exp(e)}function sf(e){return-Math.log(-e)}function af(e){return-Math.exp(-e)}function of(e){return isFinite(e)?+("1e"+e):e<0?0:e}function lf(e){return(t,n)=>-e(-t,n)}function cf(e){const t=e(nf,rf),n=t.domain;let r,i,s=10;function a(){return r=function(e){return e===Math.E?Math.log:10===e&&Math.log10||2===e&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}(s),i=function(e){return 10===e?of:e===Math.E?Math.exp:t=>Math.pow(e,t)}(s),n()[0]<0?(r=lf(r),i=lf(i),e(sf,af)):e(nf,rf),t}return t.base=function(e){return arguments.length?(s=+e,a()):s},t.domain=function(e){return arguments.length?(n(e),a()):n()},t.ticks=e=>{const t=n();let a=t[0],o=t[t.length-1];const l=o<a;l&&([a,o]=[o,a]);let c,d,u=r(a),h=r(o);const p=null==e?10:+e;let m=[];if(!(s%1)&&h-u<p){if(u=Math.floor(u),h=Math.ceil(h),a>0){for(;u<=h;++u)for(c=1;c<s;++c)if(d=u<0?c/i(-u):c*i(u),!(d<a)){if(d>o)break;m.push(d)}}else for(;u<=h;++u)for(c=s-1;c>=1;--c)if(d=u>0?c/i(-u):c*i(u),!(d<a)){if(d>o)break;m.push(d)}2*m.length<p&&(m=xp(a,o,p))}else m=xp(u,h,Math.min(h-u,p)).map(i);return l?m.reverse():m},t.tickFormat=(e,n)=>{if(null==e&&(e=10),null==n&&(n=10===s?"s":","),"function"!==typeof n&&(s%1||null!=(n=Fm(n)).precision||(n.trim=!0),n=Gm(n)),e===1/0)return n;const a=Math.max(1,s*e/t.ticks().length);return e=>{let t=e/i(Math.round(r(e)));return t*s<s-.5&&(t*=s),t<=a?n(e):""}},t.nice=()=>n(tf(n(),{floor:e=>i(Math.floor(r(e))),ceil:e=>i(Math.ceil(r(e)))})),t}function df(){const e=cf(Om()).domain([1,10]);return e.copy=()=>Dm(e,df()).base(e.base()),rp.apply(e,arguments),e}function uf(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function hf(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function pf(e){var t=1,n=e(uf(t),hf(t));return n.constant=function(n){return arguments.length?e(uf(t=+n),hf(t)):t},Qm(n)}function mf(){var e=pf(Om());return e.copy=function(){return Dm(e,mf()).constant(e.constant())},rp.apply(e,arguments)}function ff(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function gf(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function vf(e){return e<0?-e*e:e*e}function yf(e){var t=e(Em,Em),n=1;return t.exponent=function(t){return arguments.length?1===(n=+t)?e(Em,Em):.5===n?e(gf,vf):e(ff(n),ff(1/n)):n},Qm(t)}function xf(){var e=yf(Om());return e.copy=function(){return Dm(e,xf()).exponent(e.exponent())},rp.apply(e,arguments),e}function bf(){return xf.apply(null,arguments).exponent(.5)}function wf(e){return Math.sign(e)*e*e}function jf(){var e,t=Rm(),n=[0,1],r=!1;function i(n){var i=function(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}(t(n));return isNaN(i)?e:r?Math.round(i):i}return i.invert=function(e){return t.invert(wf(e))},i.domain=function(e){return arguments.length?(t.domain(e),i):t.domain()},i.range=function(e){return arguments.length?(t.range((n=Array.from(e,_m)).map(wf)),i):n.slice()},i.rangeRound=function(e){return i.range(e).round(!0)},i.round=function(e){return arguments.length?(r=!!e,i):r},i.clamp=function(e){return arguments.length?(t.clamp(e),i):t.clamp()},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return jf(t.domain(),n).round(r).clamp(t.clamp()).unknown(e)},rp.apply(i,arguments),Qm(i)}function Nf(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n<r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n<i||void 0===n&&i>=i)&&(n=i)}return n}function kf(e,t){let n;if(void 0===t)for(const r of e)null!=r&&(n>r||void 0===n&&r>=r)&&(n=r);else{let r=-1;for(let i of e)null!=(i=t(i,++r,e))&&(n>i||void 0===n&&i>=i)&&(n=i)}return n}function Af(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:jp;if(e===jp)return Sf;if("function"!==typeof e)throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||0===r?r:(0===e(n,n))-(0===e(t,t))}}function Sf(e,t){return(null==e||!(e>=e))-(null==t||!(t>=t))||(e<t?-1:e>t?1:0)}function _f(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1/0,i=arguments.length>4?arguments[4]:void 0;if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=void 0===i?Sf:Af(i);r>n;){if(r-n>600){const s=r-n+1,a=t-n+1,o=Math.log(s),l=.5*Math.exp(2*o/3),c=.5*Math.sqrt(o*l*(s-l)/s)*(a-s/2<0?-1:1);_f(e,t,Math.max(n,Math.floor(t-a*l/s+c)),Math.min(r,Math.floor(t+(s-a)*l/s+c)),i)}const s=e[t];let a=n,o=r;for(Cf(e,n,t),i(e[r],s)>0&&Cf(e,n,r);a<o;){for(Cf(e,a,o),++a,--o;i(e[a],s)<0;)++a;for(;i(e[o],s)>0;)--o}0===i(e[n],s)?Cf(e,n,o):(++o,Cf(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function Cf(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Ef(e,t,n){if(e=Float64Array.from(function*(e,t){if(void 0===t)for(let n of e)null!=n&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)null!=(r=t(r,++n,e))&&(r=+r)>=r&&(yield r)}}(e,n)),(r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return kf(e);if(t>=1)return Nf(e);var r,i=(r-1)*t,s=Math.floor(i),a=Nf(_f(e,s).subarray(0,s+1));return a+(kf(e.subarray(s+1))-a)*(i-s)}}function Pf(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Sp;if((r=e.length)&&!isNaN(t=+t)){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),a=+n(e[s],s,e);return a+(+n(e[s+1],s+1,e)-a)*(i-s)}}function Tf(){var e,t=[],n=[],r=[];function i(){var e=0,i=Math.max(1,n.length);for(r=new Array(i-1);++e<i;)r[e-1]=Pf(t,e/i);return s}function s(t){return null==t||isNaN(t=+t)?e:n[Ep(r,t)]}return s.invertExtent=function(e){var i=n.indexOf(e);return i<0?[NaN,NaN]:[i>0?r[i-1]:t[0],i<r.length?r[i]:t[t.length-1]]},s.domain=function(e){if(!arguments.length)return t.slice();t=[];for(let n of e)null==n||isNaN(n=+n)||t.push(n);return t.sort(jp),i()},s.range=function(e){return arguments.length?(n=Array.from(e),i()):n.slice()},s.unknown=function(t){return arguments.length?(e=t,s):e},s.quantiles=function(){return r.slice()},s.copy=function(){return Tf().domain(t).range(n).unknown(e)},rp.apply(s,arguments)}function Mf(){var e,t=0,n=1,r=1,i=[.5],s=[0,1];function a(t){return null!=t&&t<=t?s[Ep(i,t,0,r)]:e}function o(){var e=-1;for(i=new Array(r);++e<r;)i[e]=((e+1)*n-(e-r)*t)/(r+1);return a}return a.domain=function(e){return arguments.length?([t,n]=e,t=+t,n=+n,o()):[t,n]},a.range=function(e){return arguments.length?(r=(s=Array.from(e)).length-1,o()):s.slice()},a.invertExtent=function(e){var a=s.indexOf(e);return a<0?[NaN,NaN]:a<1?[t,i[0]]:a>=r?[i[r-1],n]:[i[a-1],i[a]]},a.unknown=function(t){return arguments.length?(e=t,a):a},a.thresholds=function(){return i.slice()},a.copy=function(){return Mf().domain([t,n]).range(s).unknown(e)},rp.apply(Qm(a),arguments)}function Df(){var e,t=[.5],n=[0,1],r=1;function i(i){return null!=i&&i<=i?n[Ep(t,i,0,r)]:e}return i.domain=function(e){return arguments.length?(t=Array.from(e),r=Math.min(t.length,n.length-1),i):t.slice()},i.range=function(e){return arguments.length?(n=Array.from(e),r=Math.min(t.length,n.length-1),i):n.slice()},i.invertExtent=function(e){var r=n.indexOf(e);return[t[r-1],t[r]]},i.unknown=function(t){return arguments.length?(e=t,i):e},i.copy=function(){return Df().domain(t).range(n).unknown(e)},rp.apply(i,arguments)}qm=Jm({thousands:",",grouping:[3],currency:["$",""]}),Gm=qm.format,Km=qm.formatPrefix;const Of=1e3,Rf=6e4,If=36e5,Lf=864e5,Ff=6048e5,Bf=2592e6,zf=31536e6,Wf=new Date,Uf=new Date;function Vf(e,t,n,r){function i(t){return e(t=0===arguments.length?new Date:new Date(+t)),t}return i.floor=t=>(e(t=new Date(+t)),t),i.ceil=n=>(e(n=new Date(n-1)),t(n,1),e(n),n),i.round=e=>{const t=i(e),n=i.ceil(e);return e-t<n-e?t:n},i.offset=(e,n)=>(t(e=new Date(+e),null==n?1:Math.floor(n)),e),i.range=(n,r,s)=>{const a=[];if(n=i.ceil(n),s=null==s?1:Math.floor(s),!(n<r)||!(s>0))return a;let o;do{a.push(o=new Date(+n)),t(n,s),e(n)}while(o<n&&n<r);return a},i.filter=n=>Vf(t=>{if(t>=t)for(;e(t),!n(t);)t.setTime(t-1)},(e,r)=>{if(e>=e)if(r<0)for(;++r<=0;)for(;t(e,-1),!n(e););else for(;--r>=0;)for(;t(e,1),!n(e););}),n&&(i.count=(t,r)=>(Wf.setTime(+t),Uf.setTime(+r),e(Wf),e(Uf),Math.floor(n(Wf,Uf))),i.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?i.filter(r?t=>r(t)%e===0:t=>i.count(0,t)%e===0):i:null)),i}const Hf=Vf(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Hf.every=e=>(e=Math.floor(e),isFinite(e)&&e>0?e>1?Vf(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Hf:null);Hf.range;const qf=Vf(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Of)},(e,t)=>(t-e)/Of,e=>e.getUTCSeconds()),Gf=(qf.range,Vf(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Of)},(e,t)=>{e.setTime(+e+t*Rf)},(e,t)=>(t-e)/Rf,e=>e.getMinutes())),Kf=(Gf.range,Vf(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Rf)},(e,t)=>(t-e)/Rf,e=>e.getUTCMinutes())),Yf=(Kf.range,Vf(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Of-e.getMinutes()*Rf)},(e,t)=>{e.setTime(+e+t*If)},(e,t)=>(t-e)/If,e=>e.getHours())),Xf=(Yf.range,Vf(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*If)},(e,t)=>(t-e)/If,e=>e.getUTCHours())),Jf=(Xf.range,Vf(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Rf)/Lf,e=>e.getDate()-1)),$f=(Jf.range,Vf(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lf,e=>e.getUTCDate()-1)),Qf=($f.range,Vf(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Lf,e=>Math.floor(e/Lf)));Qf.range;function Zf(e){return Vf(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(e,t)=>{e.setDate(e.getDate()+7*t)},(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Rf)/Ff)}const eg=Zf(0),tg=Zf(1),ng=Zf(2),rg=Zf(3),ig=Zf(4),sg=Zf(5),ag=Zf(6);eg.range,tg.range,ng.range,rg.range,ig.range,sg.range,ag.range;function og(e){return Vf(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+7*t)},(e,t)=>(t-e)/Ff)}const lg=og(0),cg=og(1),dg=og(2),ug=og(3),hg=og(4),pg=og(5),mg=og(6),fg=(lg.range,cg.range,dg.range,ug.range,hg.range,pg.range,mg.range,Vf(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+12*(t.getFullYear()-e.getFullYear()),e=>e.getMonth())),gg=(fg.range,Vf(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+12*(t.getUTCFullYear()-e.getUTCFullYear()),e=>e.getUTCMonth())),vg=(gg.range,Vf(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear()));vg.every=e=>isFinite(e=Math.floor(e))&&e>0?Vf(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)}):null;vg.range;const yg=Vf(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());yg.every=e=>isFinite(e=Math.floor(e))&&e>0?Vf(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)}):null;yg.range;function xg(e,t,n,r,i,s){const a=[[qf,1,Of],[qf,5,5e3],[qf,15,15e3],[qf,30,3e4],[s,1,Rf],[s,5,3e5],[s,15,9e5],[s,30,18e5],[i,1,If],[i,3,108e5],[i,6,216e5],[i,12,432e5],[r,1,Lf],[r,2,1728e5],[n,1,Ff],[t,1,Bf],[t,3,7776e6],[e,1,zf]];function o(t,n,r){const i=Math.abs(n-t)/r,s=kp(e=>{let[,,t]=e;return t}).right(a,i);if(s===a.length)return e.every(wp(t/zf,n/zf,r));if(0===s)return Hf.every(Math.max(wp(t,n,r),1));const[o,l]=a[i/a[s-1][2]<a[s][2]/i?s-1:s];return o.every(l)}return[function(e,t,n){const r=t<e;r&&([e,t]=[t,e]);const i=n&&"function"===typeof n.range?n:o(e,t,n),s=i?i.range(e,+t+1):[];return r?s.reverse():s},o]}const[bg,wg]=xg(yg,gg,lg,Qf,Xf,Kf),[jg,Ng]=xg(vg,fg,eg,Jf,Yf,Gf);function kg(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Ag(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Sg(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}var _g,Cg,Eg,Pg={"-":"",_:" ",0:"0"},Tg=/^\s*\d+/,Mg=/^%/,Dg=/[\\^$*+?|[\]().{}]/g;function Og(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function Rg(e){return e.replace(Dg,"\\$&")}function Ig(e){return new RegExp("^(?:"+e.map(Rg).join("|")+")","i")}function Lg(e){return new Map(e.map((e,t)=>[e.toLowerCase(),t]))}function Fg(e,t,n){var r=Tg.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Bg(e,t,n){var r=Tg.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function zg(e,t,n){var r=Tg.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Wg(e,t,n){var r=Tg.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ug(e,t,n){var r=Tg.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Vg(e,t,n){var r=Tg.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Hg(e,t,n){var r=Tg.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function qg(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Gg(e,t,n){var r=Tg.exec(t.slice(n,n+1));return r?(e.q=3*r[0]-3,n+r[0].length):-1}function Kg(e,t,n){var r=Tg.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Yg(e,t,n){var r=Tg.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Xg(e,t,n){var r=Tg.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Jg(e,t,n){var r=Tg.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function $g(e,t,n){var r=Tg.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Qg(e,t,n){var r=Tg.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Zg(e,t,n){var r=Tg.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function ev(e,t,n){var r=Tg.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function tv(e,t,n){var r=Mg.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function nv(e,t,n){var r=Tg.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function rv(e,t,n){var r=Tg.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function iv(e,t){return Og(e.getDate(),t,2)}function sv(e,t){return Og(e.getHours(),t,2)}function av(e,t){return Og(e.getHours()%12||12,t,2)}function ov(e,t){return Og(1+Jf.count(vg(e),e),t,3)}function lv(e,t){return Og(e.getMilliseconds(),t,3)}function cv(e,t){return lv(e,t)+"000"}function dv(e,t){return Og(e.getMonth()+1,t,2)}function uv(e,t){return Og(e.getMinutes(),t,2)}function hv(e,t){return Og(e.getSeconds(),t,2)}function pv(e){var t=e.getDay();return 0===t?7:t}function mv(e,t){return Og(eg.count(vg(e)-1,e),t,2)}function fv(e){var t=e.getDay();return t>=4||0===t?ig(e):ig.ceil(e)}function gv(e,t){return e=fv(e),Og(ig.count(vg(e),e)+(4===vg(e).getDay()),t,2)}function vv(e){return e.getDay()}function yv(e,t){return Og(tg.count(vg(e)-1,e),t,2)}function xv(e,t){return Og(e.getFullYear()%100,t,2)}function bv(e,t){return Og((e=fv(e)).getFullYear()%100,t,2)}function wv(e,t){return Og(e.getFullYear()%1e4,t,4)}function jv(e,t){var n=e.getDay();return Og((e=n>=4||0===n?ig(e):ig.ceil(e)).getFullYear()%1e4,t,4)}function Nv(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Og(t/60|0,"0",2)+Og(t%60,"0",2)}function kv(e,t){return Og(e.getUTCDate(),t,2)}function Av(e,t){return Og(e.getUTCHours(),t,2)}function Sv(e,t){return Og(e.getUTCHours()%12||12,t,2)}function _v(e,t){return Og(1+$f.count(yg(e),e),t,3)}function Cv(e,t){return Og(e.getUTCMilliseconds(),t,3)}function Ev(e,t){return Cv(e,t)+"000"}function Pv(e,t){return Og(e.getUTCMonth()+1,t,2)}function Tv(e,t){return Og(e.getUTCMinutes(),t,2)}function Mv(e,t){return Og(e.getUTCSeconds(),t,2)}function Dv(e){var t=e.getUTCDay();return 0===t?7:t}function Ov(e,t){return Og(lg.count(yg(e)-1,e),t,2)}function Rv(e){var t=e.getUTCDay();return t>=4||0===t?hg(e):hg.ceil(e)}function Iv(e,t){return e=Rv(e),Og(hg.count(yg(e),e)+(4===yg(e).getUTCDay()),t,2)}function Lv(e){return e.getUTCDay()}function Fv(e,t){return Og(cg.count(yg(e)-1,e),t,2)}function Bv(e,t){return Og(e.getUTCFullYear()%100,t,2)}function zv(e,t){return Og((e=Rv(e)).getUTCFullYear()%100,t,2)}function Wv(e,t){return Og(e.getUTCFullYear()%1e4,t,4)}function Uv(e,t){var n=e.getUTCDay();return Og((e=n>=4||0===n?hg(e):hg.ceil(e)).getUTCFullYear()%1e4,t,4)}function Vv(){return"+0000"}function Hv(){return"%"}function qv(e){return+e}function Gv(e){return Math.floor(+e/1e3)}function Kv(e){return new Date(e)}function Yv(e){return e instanceof Date?+e:+new Date(+e)}function Xv(e,t,n,r,i,s,a,o,l,c){var d=Rm(),u=d.invert,h=d.domain,p=c(".%L"),m=c(":%S"),f=c("%I:%M"),g=c("%I %p"),v=c("%a %d"),y=c("%b %d"),x=c("%B"),b=c("%Y");function w(e){return(l(e)<e?p:o(e)<e?m:a(e)<e?f:s(e)<e?g:r(e)<e?i(e)<e?v:y:n(e)<e?x:b)(e)}return d.invert=function(e){return new Date(u(e))},d.domain=function(e){return arguments.length?h(Array.from(e,Yv)):h().map(Kv)},d.ticks=function(t){var n=h();return e(n[0],n[n.length-1],null==t?10:t)},d.tickFormat=function(e,t){return null==t?w:c(t)},d.nice=function(e){var n=h();return e&&"function"===typeof e.range||(e=t(n[0],n[n.length-1],null==e?10:e)),e?h(tf(n,e)):d},d.copy=function(){return Dm(d,Xv(e,t,n,r,i,s,a,o,l,c))},d}function Jv(){return rp.apply(Xv(jg,Ng,vg,fg,eg,Jf,Yf,Gf,qf,Cg).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function $v(){return rp.apply(Xv(bg,wg,yg,gg,lg,$f,Xf,Kf,qf,Eg).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Qv(){var e,t,n,r,i,s=0,a=1,o=Em,l=!1;function c(t){return null==t||isNaN(t=+t)?i:o(0===n?.5:(t=(r(t)-e)*n,l?Math.max(0,Math.min(1,t)):t))}function d(e){return function(t){var n,r;return arguments.length?([n,r]=t,o=e(n,r),c):[o(0),o(1)]}}return c.domain=function(i){return arguments.length?([s,a]=i,e=r(s=+s),t=r(a=+a),n=e===t?0:1/(t-e),c):[s,a]},c.clamp=function(e){return arguments.length?(l=!!e,c):l},c.interpolator=function(e){return arguments.length?(o=e,c):o},c.range=d(Am),c.rangeRound=d(Sm),c.unknown=function(e){return arguments.length?(i=e,c):i},function(i){return r=i,e=i(s),t=i(a),n=e===t?0:1/(t-e),c}}function Zv(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function ey(){var e=Qm(Qv()(Em));return e.copy=function(){return Zv(e,ey())},ip.apply(e,arguments)}function ty(){var e=cf(Qv()).domain([1,10]);return e.copy=function(){return Zv(e,ty()).base(e.base())},ip.apply(e,arguments)}function ny(){var e=pf(Qv());return e.copy=function(){return Zv(e,ny()).constant(e.constant())},ip.apply(e,arguments)}function ry(){var e=yf(Qv());return e.copy=function(){return Zv(e,ry()).exponent(e.exponent())},ip.apply(e,arguments)}function iy(){return ry.apply(null,arguments).exponent(.5)}function sy(){var e=[],t=Em;function n(n){if(null!=n&&!isNaN(n=+n))return t((Ep(e,n,1)-1)/(e.length-1))}return n.domain=function(t){if(!arguments.length)return e.slice();e=[];for(let n of t)null==n||isNaN(n=+n)||e.push(n);return e.sort(jp),n},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.range=function(){return e.map((n,r)=>t(r/(e.length-1)))},n.quantiles=function(t){return Array.from({length:t+1},(n,r)=>Ef(e,r/t))},n.copy=function(){return sy(t).domain(e)},ip.apply(n,arguments)}function ay(){var e,t,n,r,i,s,a,o=0,l=.5,c=1,d=1,u=Em,h=!1;function p(e){return isNaN(e=+e)?a:(e=.5+((e=+s(e))-t)*(d*e<d*t?r:i),u(h?Math.max(0,Math.min(1,e)):e))}function m(e){return function(t){var n,r,i;return arguments.length?([n,r,i]=t,u=function(e,t){void 0===t&&(t=e,e=Am);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(e){var t=Math.max(0,Math.min(r-1,Math.floor(e*=r)));return s[t](e-t)}}(e,[n,r,i]),p):[u(0),u(.5),u(1)]}}return p.domain=function(a){return arguments.length?([o,l,c]=a,e=s(o=+o),t=s(l=+l),n=s(c=+c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d=t<e?-1:1,p):[o,l,c]},p.clamp=function(e){return arguments.length?(h=!!e,p):h},p.interpolator=function(e){return arguments.length?(u=e,p):u},p.range=m(Am),p.rangeRound=m(Sm),p.unknown=function(e){return arguments.length?(a=e,p):a},function(a){return s=a,e=a(o),t=a(l),n=a(c),r=e===t?0:.5/(t-e),i=t===n?0:.5/(n-t),d=t<e?-1:1,p}}function oy(){var e=Qm(ay()(Em));return e.copy=function(){return Zv(e,oy())},ip.apply(e,arguments)}function ly(){var e=cf(ay()).domain([.1,1,10]);return e.copy=function(){return Zv(e,ly()).base(e.base())},ip.apply(e,arguments)}function cy(){var e=pf(ay());return e.copy=function(){return Zv(e,cy()).constant(e.constant())},ip.apply(e,arguments)}function dy(){var e=yf(ay());return e.copy=function(){return Zv(e,dy()).exponent(e.exponent())},ip.apply(e,arguments)}function uy(){return dy.apply(null,arguments).exponent(.5)}!function(e){_g=function(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,a=e.shortDays,o=e.months,l=e.shortMonths,c=Ig(i),d=Lg(i),u=Ig(s),h=Lg(s),p=Ig(a),m=Lg(a),f=Ig(o),g=Lg(o),v=Ig(l),y=Lg(l),x={a:function(e){return a[e.getDay()]},A:function(e){return s[e.getDay()]},b:function(e){return l[e.getMonth()]},B:function(e){return o[e.getMonth()]},c:null,d:iv,e:iv,f:cv,g:bv,G:jv,H:sv,I:av,j:ov,L:lv,m:dv,M:uv,p:function(e){return i[+(e.getHours()>=12)]},q:function(e){return 1+~~(e.getMonth()/3)},Q:qv,s:Gv,S:hv,u:pv,U:mv,V:gv,w:vv,W:yv,x:null,X:null,y:xv,Y:wv,Z:Nv,"%":Hv},b={a:function(e){return a[e.getUTCDay()]},A:function(e){return s[e.getUTCDay()]},b:function(e){return l[e.getUTCMonth()]},B:function(e){return o[e.getUTCMonth()]},c:null,d:kv,e:kv,f:Ev,g:zv,G:Uv,H:Av,I:Sv,j:_v,L:Cv,m:Pv,M:Tv,p:function(e){return i[+(e.getUTCHours()>=12)]},q:function(e){return 1+~~(e.getUTCMonth()/3)},Q:qv,s:Gv,S:Mv,u:Dv,U:Ov,V:Iv,w:Lv,W:Fv,x:null,X:null,y:Bv,Y:Wv,Z:Vv,"%":Hv},w={a:function(e,t,n){var r=p.exec(t.slice(n));return r?(e.w=m.get(r[0].toLowerCase()),n+r[0].length):-1},A:function(e,t,n){var r=u.exec(t.slice(n));return r?(e.w=h.get(r[0].toLowerCase()),n+r[0].length):-1},b:function(e,t,n){var r=v.exec(t.slice(n));return r?(e.m=y.get(r[0].toLowerCase()),n+r[0].length):-1},B:function(e,t,n){var r=f.exec(t.slice(n));return r?(e.m=g.get(r[0].toLowerCase()),n+r[0].length):-1},c:function(e,n,r){return k(e,t,n,r)},d:Yg,e:Yg,f:ev,g:Hg,G:Vg,H:Jg,I:Jg,j:Xg,L:Zg,m:Kg,M:$g,p:function(e,t,n){var r=c.exec(t.slice(n));return r?(e.p=d.get(r[0].toLowerCase()),n+r[0].length):-1},q:Gg,Q:nv,s:rv,S:Qg,u:Bg,U:zg,V:Wg,w:Fg,W:Ug,x:function(e,t,r){return k(e,n,t,r)},X:function(e,t,n){return k(e,r,t,n)},y:Hg,Y:Vg,Z:qg,"%":tv};function j(e,t){return function(n){var r,i,s,a=[],o=-1,l=0,c=e.length;for(n instanceof Date||(n=new Date(+n));++o<c;)37===e.charCodeAt(o)&&(a.push(e.slice(l,o)),null!=(i=Pg[r=e.charAt(++o)])?r=e.charAt(++o):i="e"===r?" ":"0",(s=t[r])&&(r=s(n,i)),a.push(r),l=o+1);return a.push(e.slice(l,o)),a.join("")}}function N(e,t){return function(n){var r,i,s=Sg(1900,void 0,1);if(k(s,e,n+="",0)!=n.length)return null;if("Q"in s)return new Date(s.Q);if("s"in s)return new Date(1e3*s.s+("L"in s?s.L:0));if(t&&!("Z"in s)&&(s.Z=0),"p"in s&&(s.H=s.H%12+12*s.p),void 0===s.m&&(s.m="q"in s?s.q:0),"V"in s){if(s.V<1||s.V>53)return null;"w"in s||(s.w=1),"Z"in s?(i=(r=Ag(Sg(s.y,0,1))).getUTCDay(),r=i>4||0===i?cg.ceil(r):cg(r),r=$f.offset(r,7*(s.V-1)),s.y=r.getUTCFullYear(),s.m=r.getUTCMonth(),s.d=r.getUTCDate()+(s.w+6)%7):(i=(r=kg(Sg(s.y,0,1))).getDay(),r=i>4||0===i?tg.ceil(r):tg(r),r=Jf.offset(r,7*(s.V-1)),s.y=r.getFullYear(),s.m=r.getMonth(),s.d=r.getDate()+(s.w+6)%7)}else("W"in s||"U"in s)&&("w"in s||(s.w="u"in s?s.u%7:"W"in s?1:0),i="Z"in s?Ag(Sg(s.y,0,1)).getUTCDay():kg(Sg(s.y,0,1)).getDay(),s.m=0,s.d="W"in s?(s.w+6)%7+7*s.W-(i+5)%7:s.w+7*s.U-(i+6)%7);return"Z"in s?(s.H+=s.Z/100|0,s.M+=s.Z%100,Ag(s)):kg(s)}}function k(e,t,n,r){for(var i,s,a=0,o=t.length,l=n.length;a<o;){if(r>=l)return-1;if(37===(i=t.charCodeAt(a++))){if(i=t.charAt(a++),!(s=w[i in Pg?t.charAt(a++):i])||(r=s(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}return x.x=j(n,x),x.X=j(r,x),x.c=j(t,x),b.x=j(n,b),b.X=j(r,b),b.c=j(t,b),{format:function(e){var t=j(e+="",x);return t.toString=function(){return e},t},parse:function(e){var t=N(e+="",!1);return t.toString=function(){return e},t},utcFormat:function(e){var t=j(e+="",b);return t.toString=function(){return e},t},utcParse:function(e){var t=N(e+="",!0);return t.toString=function(){return e},t}}}(e),Cg=_g.format,_g.parse,Eg=_g.utcFormat,_g.utcParse}({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var hy=e=>e.chartData,py=Uu([hy],e=>{var t=null!=e.chartData?e.chartData.length-1:0;return{chartData:e.chartData,computedData:e.computedData,dataEndIndex:t,dataStartIndex:0}}),my=(e,t,n,r)=>r?py(e):hy(e);function fy(e){return Number.isFinite(e)}function gy(e){return"number"===typeof e&&e>0&&Number.isFinite(e)}function vy(e){if(Array.isArray(e)&&2===e.length){var[t,n]=e;if(fy(t)&&fy(n))return!0}return!1}function yy(e,t,n){return n?e:[Math.min(e[0],t[0]),Math.max(e[1],t[1])]}var xy=n(8210),by=n.n(xy),wy=e=>e,jy={"@@functional/placeholder":!0},Ny=e=>e===jy,ky=e=>function t(){return 0===arguments.length||1===arguments.length&&Ny(arguments.length<=0?void 0:arguments[0])?t:e(...arguments)},Ay=(e,t)=>1===e?t:ky(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];var s=r.filter(e=>e!==jy).length;return s>=e?t(...r):Ay(e-s,ky(function(){for(var e=arguments.length,n=new Array(e),i=0;i<e;i++)n[i]=arguments[i];var s=r.map(e=>Ny(e)?n.shift():e);return t(...s,...n)}))}),Sy=e=>Ay(e.length,e),_y=(e,t)=>{for(var n=[],r=e;r<t;++r)n[r-e]=r;return n},Cy=Sy((e,t)=>Array.isArray(t)?t.map(e):Object.keys(t).map(e=>t[e]).map(e)),Ey=e=>Array.isArray(e)?e.reverse():e.split("").reverse().join(""),Py=e=>{var t=null,n=null;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t&&i.every((e,n)=>{var r;return e===(null===(r=t)||void 0===r?void 0:r[n])})?n:(t=i,n=e(...i))}};function Ty(e){return 0===e?1:Math.floor(new(by())(e).abs().log(10).toNumber())+1}function My(e,t,n){for(var r=new(by())(e),i=0,s=[];r.lt(t)&&i<1e5;)s.push(r.toNumber()),r=r.add(n),i++;return s}Sy((e,t,n)=>{var r=+e;return r+n*(+t-r)}),Sy((e,t,n)=>{var r=t-+e;return(n-e)/(r=r||1/0)}),Sy((e,t,n)=>{var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});var Dy=e=>{var[t,n]=e,[r,i]=[t,n];return t>n&&([r,i]=[n,t]),[r,i]},Oy=(e,t,n)=>{if(e.lte(0))return new(by())(0);var r=Ty(e.toNumber()),i=new(by())(10).pow(r),s=e.div(i),a=1!==r?.05:.1,o=new(by())(Math.ceil(s.div(a).toNumber())).add(n).mul(a).mul(i);return t?new(by())(o.toNumber()):new(by())(Math.ceil(o.toNumber()))},Ry=(e,t,n)=>{var r=new(by())(1),i=new(by())(e);if(!i.isint()&&n){var s=Math.abs(e);s<1?(r=new(by())(10).pow(Ty(e)-1),i=new(by())(Math.floor(i.div(r).toNumber())).mul(r)):s>1&&(i=new(by())(Math.floor(e)))}else 0===e?i=new(by())(Math.floor((t-1)/2)):n||(i=new(by())(Math.floor(e)));var a=Math.floor((t-1)/2),o=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];if(!t.length)return wy;var r=t.reverse(),i=r[0],s=r.slice(1);return function(){return s.reduce((e,t)=>t(e),i(...arguments))}}(Cy(e=>i.add(new(by())(e-a).mul(r)).toNumber()),_y);return o(0,t)},Iy=function(e,t,n,r){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new(by())(0),tickMin:new(by())(0),tickMax:new(by())(0)};var s,a=Oy(new(by())(t).sub(e).div(n-1),r,i);s=e<=0&&t>=0?new(by())(0):(s=new(by())(e).add(t).div(2)).sub(new(by())(s).mod(a));var o=Math.ceil(s.sub(e).div(a).toNumber()),l=Math.ceil(new(by())(t).sub(s).div(a).toNumber()),c=o+l+1;return c>n?Iy(e,t,n,r,i+1):(c<n&&(l=t>0?l+(n-c):l,o=t>0?o:o+(n-c)),{step:a,tickMin:s.sub(new(by())(o).mul(a)),tickMax:s.add(new(by())(l).mul(a))})};var Ly=Py(function(e){var[t,n]=e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=Math.max(r,2),[a,o]=Dy([t,n]);if(a===-1/0||o===1/0){var l=o===1/0?[a,..._y(0,r-1).map(()=>1/0)]:[..._y(0,r-1).map(()=>-1/0),o];return t>n?Ey(l):l}if(a===o)return Ry(a,r,i);var{step:c,tickMin:d,tickMax:u}=Iy(a,o,s,i,0),h=My(d,u.add(new(by())(.1).mul(c)),c);return t>n?Ey(h):h}),Fy=Py(function(e,t){var[n,r]=e,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],[s,a]=Dy([n,r]);if(s===-1/0||a===1/0)return[n,r];if(s===a)return[s];var o=Math.max(t,2),l=Oy(new(by())(a).sub(s).div(o-1),i,0),c=[...My(new(by())(s),new(by())(a),l),a];return!1===i&&(c=c.map(e=>Math.round(e))),n>r?Ey(c):c}),By=e=>e.rootProps.stackOffset,zy=e=>e.options.chartName,Wy=e=>e.rootProps.syncId,Uy=e=>e.rootProps.syncMethod,Vy=e=>e.options.eventEmitter,Hy=0,qy="auto",Gy=!0,Ky=!1,Yy=!0,Xy=0,Jy="auto",$y=!0,Qy=5,Zy=(e,t)=>{if(e&&t)return null!==e&&void 0!==e&&e.reversed?[t[1],t[0]]:t},ex={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!1,dataKey:void 0,domain:void 0,id:Hy,includeHidden:!1,name:void 0,reversed:!1,scale:qy,tick:Gy,tickCount:void 0,ticks:void 0,type:"category",unit:void 0},tx={allowDataOverflow:Ky,allowDecimals:!1,allowDuplicatedCategory:Yy,dataKey:void 0,domain:void 0,id:Xy,includeHidden:!1,name:void 0,reversed:!1,scale:Jy,tick:$y,tickCount:Qy,ticks:void 0,type:"number",unit:void 0},nx={allowDataOverflow:!1,allowDecimals:!1,allowDuplicatedCategory:!0,dataKey:void 0,domain:void 0,id:Hy,includeHidden:!1,name:void 0,reversed:!1,scale:qy,tick:Gy,tickCount:void 0,ticks:void 0,type:"number",unit:void 0},rx={allowDataOverflow:Ky,allowDecimals:!1,allowDuplicatedCategory:Yy,dataKey:void 0,domain:void 0,id:Xy,includeHidden:!1,name:void 0,reversed:!1,scale:Jy,tick:$y,tickCount:Qy,ticks:void 0,type:"category",unit:void 0},ix=(e,t)=>null!=e.polarAxis.angleAxis[t]?e.polarAxis.angleAxis[t]:"radial"===e.layout.layoutType?nx:ex,sx=(e,t)=>null!=e.polarAxis.radiusAxis[t]?e.polarAxis.radiusAxis[t]:"radial"===e.layout.layoutType?rx:tx,ax=e=>e.polarOptions,ox=Uu([Mh,Dh,Vh],mh),lx=Uu([ax,ox],(e,t)=>{if(null!=e)return $o(e.innerRadius,t,0)}),cx=Uu([ax,ox],(e,t)=>{if(null!=e)return $o(e.outerRadius,t,.8*t)}),dx=Uu([ax],e=>{if(null==e)return[0,0];var{startAngle:t,endAngle:n}=e;return[t,n]}),ux=(Uu([ix,dx],Zy),Uu([ox,lx,cx],(e,t,n)=>{if(null!=e&&null!=t&&null!=n)return[t,n]})),hx=(Uu([sx,ux],Zy),Uu([Zh,ax,lx,cx,Mh,Dh],(e,t,n,r,i,s)=>{if(("centric"===e||"radial"===e)&&null!=t&&null!=n&&null!=r){var{cx:a,cy:o,startAngle:l,endAngle:c}=t;return{cx:$o(a,i,i/2),cy:$o(o,s,s/2),innerRadius:n,outerRadius:r,startAngle:l,endAngle:c,clockWise:!1}}})),px=(e,t)=>t,mx=(e,t,n)=>n;function fx(e){return null===e||void 0===e?void 0:e.id}var gx=e=>{var t=Zh(e);return"horizontal"===t?"xAxis":"vertical"===t?"yAxis":"centric"===t?"angleAxis":"radiusAxis"},vx=e=>e.tooltip.settings.axisId,yx=e=>{var t=gx(e),n=vx(e);return Dx(e,t,n)},xx=Uu([yx],e=>null===e||void 0===e?void 0:e.dataKey);function bx(e,t,n){var{chartData:r=[]}=t,{allowDuplicatedCategory:i,dataKey:s}=n,a=new Map;return e.forEach(e=>{var t,n=null!==(t=e.data)&&void 0!==t?t:r;if(null!=n&&0!==n.length){var o=fx(e);n.forEach((t,n)=>{var r,l=null==s||i?n:String(jh(t,s,null)),c=jh(t,e.dataKey,0);r=a.has(l)?a.get(l):{},Object.assign(r,{[o]:c}),a.set(l,r)})}}),Array.from(a.values())}function wx(e){return null!=e.stackId&&null!=e.dataKey}function jx(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nx(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jx(Object(n),!0).forEach(function(t){kx(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jx(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kx(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ax=[0,"auto"],Sx={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:void 0,height:30,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"bottom",padding:{left:0,right:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"category",unit:void 0},_x=(e,t)=>{var n=((e,t)=>e.cartesianAxis.xAxis[t])(e,t);return null==n?Sx:n},Cx={allowDataOverflow:!1,allowDecimals:!0,allowDuplicatedCategory:!0,angle:0,dataKey:void 0,domain:Ax,hide:!0,id:0,includeHidden:!1,interval:"preserveEnd",minTickGap:5,mirror:!1,name:void 0,orientation:"left",padding:{top:0,bottom:0},reversed:!1,scale:"auto",tick:!0,tickCount:5,tickFormatter:void 0,ticks:void 0,type:"number",unit:void 0,width:60},Ex=(e,t)=>{var n=((e,t)=>e.cartesianAxis.yAxis[t])(e,t);return null==n?Cx:n},Px={domain:[0,"auto"],includeHidden:!1,reversed:!1,allowDataOverflow:!1,allowDuplicatedCategory:!1,dataKey:void 0,id:0,name:"",range:[64,64],scale:"auto",type:"number",unit:""},Tx=(e,t)=>{var n=e.cartesianAxis.zAxis[t];return null==n?Px:n},Mx=(e,t,n)=>{switch(t){case"xAxis":return _x(e,n);case"yAxis":return Ex(e,n);case"zAxis":return Tx(e,n);case"angleAxis":return ix(e,n);case"radiusAxis":return sx(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Dx=(e,t,n)=>{switch(t){case"xAxis":return _x(e,n);case"yAxis":return Ex(e,n);case"angleAxis":return ix(e,n);case"radiusAxis":return sx(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Ox=e=>e.graphicalItems.cartesianItems.some(e=>"bar"===e.type)||e.graphicalItems.polarItems.some(e=>"radialBar"===e.type);function Rx(e,t){return n=>{switch(e){case"xAxis":return"xAxisId"in n&&n.xAxisId===t;case"yAxis":return"yAxisId"in n&&n.yAxisId===t;case"zAxis":return"zAxisId"in n&&n.zAxisId===t;case"angleAxis":return"angleAxisId"in n&&n.angleAxisId===t;case"radiusAxis":return"radiusAxisId"in n&&n.radiusAxisId===t;default:return!1}}}var Ix=Uu([px,mx],Rx),Lx=(e,t,n)=>e.filter(n).filter(e=>!0===(null===t||void 0===t?void 0:t.includeHidden)||!e.hide),Fx=Uu([e=>e.graphicalItems.cartesianItems,Mx,Ix],Lx),Bx=Uu([Fx],e=>e.filter(e=>"area"===e.type||"bar"===e.type).filter(wx)),zx=e=>e.filter(e=>!("stackId"in e)||void 0===e.stackId),Wx=Uu([Fx],zx),Ux=e=>e.map(e=>e.data).filter(Boolean).flat(1),Vx=Uu([Fx],Ux),Hx=(e,t)=>{var{chartData:n=[],dataStartIndex:r,dataEndIndex:i}=t;return e.length>0?e:n.slice(r,i+1)},qx=Uu([Vx,my],Hx),Gx=(e,t,n)=>null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:jh(e,t.dataKey)})):n.length>0?n.map(e=>e.dataKey).flatMap(t=>e.map(e=>({value:jh(e,t)}))):e.map(e=>({value:e})),Kx=Uu([qx,Mx,Fx],Gx);function Yx(e,t){switch(e){case"xAxis":return"x"===t.direction;case"yAxis":return"y"===t.direction;default:return!1}}function Xx(e){return e.filter(e=>Yo(e)||e instanceof Date).map(Number).filter(e=>!1===qo(e))}function Jx(e,t,n){return!n||"number"!==typeof t||qo(t)?[]:n.length?Xx(n.flatMap(n=>{var r,i,s=jh(e,n.dataKey);if(Array.isArray(s)?[r,i]=s:r=i=s,fy(r)&&fy(i))return[t-r,t+i]})):[]}var $x=Uu([Bx,my,yx],bx),Qx=(e,t,n)=>{var r=t.reduce((e,t)=>(null==t.stackId||(null==e[t.stackId]&&(e[t.stackId]=[]),e[t.stackId].push(t)),e),{});return Object.fromEntries(Object.entries(r).map(t=>{var[r,i]=t,s=i.map(fx);return[r,{stackedData:Sh(e,s,n),graphicalItems:i}]}))},Zx=Uu([$x,Bx,By],Qx),eb=(e,t,n)=>{var{dataStartIndex:r,dataEndIndex:i}=t;if("zAxis"!==n){var s=_h(e,r,i);if(null==s||0!==s[0]||0!==s[1])return s}},tb=Uu([Zx,hy,px],eb),nb=(e,t,n,r,i)=>n.length>0?e.flatMap(e=>n.flatMap(n=>{var s,a,o=null===(s=r[n.id])||void 0===s?void 0:s.filter(e=>Yx(i,e)),l=jh(e,null!==(a=t.dataKey)&&void 0!==a?a:n.dataKey);return{value:l,errorDomain:Jx(e,l,o)}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:jh(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]})),rb=e=>e.errorBars,ib=(e,t,n)=>e.flatMap(e=>t[e.id]).filter(Boolean).filter(e=>Yx(n,e)),sb=(Uu([Wx,rb,px],ib),Uu([qx,Mx,Wx,rb,px],nb));function ab(e){var{value:t}=e;if(Yo(t)||t instanceof Date)return t}var ob=e=>{var t=e.flatMap(e=>[e.value,e.errorDomain]).flat(1),n=Xx(t);if(0!==n.length)return[Math.min(...n),Math.max(...n)]},lb=e=>{var t;if(null==e||!("domain"in e))return Ax;if(null!=e.domain)return e.domain;if(null!=e.ticks){if("number"===e.type){var n=Xx(e.ticks);return[Math.min(...n),Math.max(...n)]}if("category"===e.type)return e.ticks.map(String)}return null!==(t=null===e||void 0===e?void 0:e.domain)&&void 0!==t?t:Ax},cb=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=t.filter(Boolean);if(0!==r.length){var i=r.flat();return[Math.min(...i),Math.max(...i)]}},db=e=>e.referenceElements.dots,ub=(e,t,n)=>e.filter(e=>"extendDomain"===e.ifOverflow).filter(e=>"xAxis"===t?e.xAxisId===n:e.yAxisId===n),hb=Uu([db,px,mx],ub),pb=e=>e.referenceElements.areas,mb=Uu([pb,px,mx],ub),fb=e=>e.referenceElements.lines,gb=Uu([fb,px,mx],ub),vb=(e,t)=>{var n=Xx(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},yb=Uu(hb,px,vb),xb=(e,t)=>{var n=Xx(e.flatMap(e=>["xAxis"===t?e.x1:e.y1,"xAxis"===t?e.x2:e.y2]));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},bb=Uu([mb,px],xb),wb=(e,t)=>{var n=Xx(e.map(e=>"xAxis"===t?e.x:e.y));if(0!==n.length)return[Math.min(...n),Math.max(...n)]},jb=Uu(gb,px,wb),Nb=Uu(yb,jb,bb,(e,t,n)=>cb(e,n,t)),kb=Uu([Mx],lb),Ab=(e,t,n,r,i,s,a)=>{var o=function(e,t){if(t&&"function"!==typeof e&&Array.isArray(e)&&2===e.length){var n,r,[i,s]=e;if(fy(i))n=i;else if("function"===typeof i)return;if(fy(s))r=s;else if("function"===typeof s)return;var a=[n,r];if(vy(a))return a}}(t,e.allowDataOverflow);return null!=o?o:function(e,t,n){if(n||null!=t){if("function"===typeof e&&null!=t)try{var r=e(t,n);if(vy(r))return yy(r,t,n)}catch(p){}if(Array.isArray(e)&&2===e.length){var i,s,[a,o]=e;if("auto"===a)null!=t&&(i=Math.min(...t));else if(Ko(a))i=a;else if("function"===typeof a)try{null!=t&&(i=a(null===t||void 0===t?void 0:t[0]))}catch(m){}else if("string"===typeof a&&Ch.test(a)){var l=Ch.exec(a);if(null==l||null==t)i=void 0;else{var c=+l[1];i=t[0]-c}}else i=null===t||void 0===t?void 0:t[0];if("auto"===o)null!=t&&(s=Math.max(...t));else if(Ko(o))s=o;else if("function"===typeof o)try{null!=t&&(s=o(null===t||void 0===t?void 0:t[1]))}catch(f){}else if("string"===typeof o&&Eh.test(o)){var d=Eh.exec(o);if(null==d||null==t)s=void 0;else{var u=+d[1];s=t[1]+u}}else s=null===t||void 0===t?void 0:t[1];var h=[i,s];if(vy(h))return null==t?h:yy(h,t,n)}}}(t,"vertical"===s&&"xAxis"===a||"horizontal"===s&&"yAxis"===a?cb(n,i,ob(r)):cb(i,ob(r)),e.allowDataOverflow)},Sb=Uu([Mx,kb,tb,sb,Nb,Zh,px],Ab),_b=[0,1],Cb=(e,t,n,r,i,s,a)=>{if(null!=e&&null!=n&&0!==n.length||void 0!==a){var{dataKey:o,type:l}=e,c=Nh(t,s);return c&&null==o?np()(0,n.length):"category"===l?((e,t,n)=>{var r=e.map(ab).filter(e=>null!=e);return n&&(null==t.dataKey||t.allowDuplicatedCategory&&Qo(r))?np()(0,e.length):t.allowDuplicatedCategory?r:Array.from(new Set(r))})(r,e,c):"expand"===i?_b:a}},Eb=Uu([Mx,Zh,qx,Kx,By,px,Sb],Cb),Pb=(t,n,r,i,s)=>{if(null!=t){var{scale:a,type:o}=t;if("auto"===a)return"radial"===n&&"radiusAxis"===s?"band":"radial"===n&&"angleAxis"===s?"linear":"category"===o&&i&&(i.indexOf("LineChart")>=0||i.indexOf("AreaChart")>=0||i.indexOf("ComposedChart")>=0&&!r)?"point":"category"===o?"band":"linear";if("string"===typeof a){var l="scale".concat(tl(a));return l in e?l:"point"}}},Tb=Uu([Mx,Zh,Ox,zy,px],Pb);function Mb(t,n,r,i){if(null!=r&&null!=i){if("function"===typeof t.scale)return t.scale.copy().domain(r).range(i);var s=function(t){if(null!=t){if(t in e)return e[t]();var n="scale".concat(tl(t));return n in e?e[n]():void 0}}(n);if(null!=s){var a=s.domain(r).range(i);return(e=>{var t=e.domain();if(t&&!(t.length<=2)){var n=t.length,r=e.range(),i=Math.min(r[0],r[1])-kh,s=Math.max(r[0],r[1])+kh,a=e(t[0]),o=e(t[n-1]);(a<i||a>s||o<i||o>s)&&e.domain([t[0],t[n-1]])}})(a),a}}}var Db=(e,t,n)=>{var r=lb(t);if("auto"===n||"linear"===n)return null!=t&&t.tickCount&&Array.isArray(r)&&("auto"===r[0]||"auto"===r[1])&&vy(e)?Ly(e,t.tickCount,t.allowDecimals):null!=t&&t.tickCount&&"number"===t.type&&vy(e)?Fy(e,t.tickCount,t.allowDecimals):void 0},Ob=Uu([Eb,Dx,Tb],Db),Rb=(e,t,n,r)=>{if("angleAxis"!==r&&"number"===(null===e||void 0===e?void 0:e.type)&&vy(t)&&Array.isArray(n)&&n.length>0){var i=t[0],s=n[0],a=t[1],o=n[n.length-1];return[Math.min(i,s),Math.max(a,o)]}return t},Ib=Uu([Mx,Eb,Ob,px],Rb),Lb=Uu(Kx,Mx,(e,t)=>{if(t&&"number"===t.type){var n=1/0,r=Array.from(Xx(e.map(e=>e.value))).sort((e,t)=>e-t);if(r.length<2)return 1/0;var i=r[r.length-1]-r[0];if(0===i)return 1/0;for(var s=0;s<r.length-1;s++){var a=r[s+1]-r[s];n=Math.min(n,a)}return n/i}}),Fb=Uu(Lb,Zh,e=>e.rootProps.barCategoryGap,Vh,(e,t,n,r)=>r,(e,t,n,r,i)=>{if(!fy(e))return 0;var s="vertical"===t?r.height:r.width;if("gap"===i)return e*s/2;if("no-gap"===i){var a=$o(n,e*s),o=e*s/2;return o-a-(o-a)/s*a}return 0}),Bb=Uu(_x,(e,t)=>{var n=_x(e,t);return null==n||"string"!==typeof n.padding?0:Fb(e,"xAxis",t,n.padding)},(e,t)=>{var n,r;if(null==e)return{left:0,right:0};var{padding:i}=e;return"string"===typeof i?{left:t,right:t}:{left:(null!==(n=i.left)&&void 0!==n?n:0)+t,right:(null!==(r=i.right)&&void 0!==r?r:0)+t}}),zb=Uu(Ex,(e,t)=>{var n=Ex(e,t);return null==n||"string"!==typeof n.padding?0:Fb(e,"yAxis",t,n.padding)},(e,t)=>{var n,r;if(null==e)return{top:0,bottom:0};var{padding:i}=e;return"string"===typeof i?{top:t,bottom:t}:{top:(null!==(n=i.top)&&void 0!==n?n:0)+t,bottom:(null!==(r=i.bottom)&&void 0!==r?r:0)+t}}),Wb=Uu([Vh,Bb,Yh,Kh,(e,t,n)=>n],(e,t,n,r,i)=>{var{padding:s}=r;return i?[s.left,n.width-s.right]:[e.left+t.left,e.left+e.width-t.right]}),Ub=Uu([Vh,Zh,zb,Yh,Kh,(e,t,n)=>n],(e,t,n,r,i,s)=>{var{padding:a}=i;return s?[r.height-a.bottom,a.top]:"horizontal"===t?[e.top+e.height-n.bottom,e.top+n.top]:[e.top+n.top,e.top+e.height-n.bottom]}),Vb=(e,t,n,r)=>{var i;switch(t){case"xAxis":return Wb(e,n,r);case"yAxis":return Ub(e,n,r);case"zAxis":return null===(i=Tx(e,n))||void 0===i?void 0:i.range;case"angleAxis":return dx(e);case"radiusAxis":return ux(e,n);default:return}},Hb=Uu([Mx,Vb],Zy),qb=Uu([Mx,Tb,Ib,Hb],Mb);Uu([Fx,rb,px],ib);function Gb(e,t){return e.id<t.id?-1:e.id>t.id?1:0}var Kb=(e,t)=>t,Yb=(e,t,n)=>n,Xb=Uu(Ih,Kb,Yb,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(Gb)),Jb=Uu(Lh,Kb,Yb,(e,t,n)=>e.filter(e=>e.orientation===t).filter(e=>e.mirror===n).sort(Gb)),$b=(e,t)=>({width:e.width,height:t.height}),Qb=(Uu(Vh,_x,$b),Uu(Dh,Vh,Xb,Kb,Yb,(e,t,n,r,i)=>{var s,a={};return n.forEach(n=>{var o=$b(t,n);null==s&&(s=((e,t,n)=>{switch(t){case"top":return e.top;case"bottom":return n-e.bottom;default:return 0}})(t,r,e));var l="top"===r&&!i||"bottom"===r&&i;a[n.id]=s-Number(l)*o.height,s+=(l?-1:1)*o.height}),a}),Uu(Mh,Vh,Jb,Kb,Yb,(e,t,n,r,i)=>{var s,a={};return n.forEach(n=>{var o=((e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height}))(t,n);null==s&&(s=((e,t,n)=>{switch(t){case"left":return e.left;case"right":return n-e.right;default:return 0}})(t,r,e));var l="left"===r&&!i||"right"===r&&i;a[n.id]=s-Number(l)*o.width,s+=(l?-1:1)*o.width}),a}),Uu(Vh,Ex,(e,t)=>({width:"number"===typeof t.width?t.width:60,height:e.height})),(e,t,n,r)=>{if(null!=n){var{allowDuplicatedCategory:i,type:s,dataKey:a}=n,o=Nh(e,r),l=t.map(e=>e.value);return a&&o&&"category"===s&&i&&Qo(l)?l:void 0}}),Zb=Uu([Zh,Kx,Mx,px],Qb),ew=(e,t,n,r)=>{if(null!=n&&null!=n.dataKey){var{type:i,scale:s}=n;return!Nh(e,r)||"number"!==i&&"auto"===s?void 0:t.map(e=>e.value)}},tw=Uu([Zh,Kx,Dx,px],ew),nw=(Uu([Zh,(e,t,n)=>{switch(t){case"xAxis":return _x(e,n);case"yAxis":return Ex(e,n);default:throw new Error("Unexpected axis type: ".concat(t))}},Tb,qb,Zb,tw,Vb,Ob,px],(e,t,n,r,i,s,a,o,l)=>{if(null==t)return null;var c=Nh(e,l);return{angle:t.angle,interval:t.interval,minTickGap:t.minTickGap,orientation:t.orientation,tick:t.tick,tickCount:t.tickCount,tickFormatter:t.tickFormatter,ticks:t.ticks,type:t.type,unit:t.unit,axisType:l,categoricalDomain:s,duplicateDomain:i,isCategorical:c,niceTicks:o,range:a,realScaleType:n,scale:r}}),Uu([Zh,Dx,Tb,qb,Ob,Vb,Zb,tw,px],(e,t,n,r,i,s,a,o,l)=>{if(null!=t&&null!=r){var c=Nh(e,l),{type:d,ticks:u,tickCount:h}=t,p="scaleBand"===n&&"function"===typeof r.bandwidth?r.bandwidth()/2:2,m="category"===d&&r.bandwidth?r.bandwidth()/p:0;m="angleAxis"===l&&null!=s&&s.length>=2?2*Ho(s[0]-s[1])*m:m;var f=u||i;if(f){var g=f.map((e,t)=>{var n=a?a.indexOf(e):e;return{index:t,coordinate:r(n)+m,value:e,offset:m}});return g.filter(e=>!qo(e.coordinate))}return c&&o?o.map((e,t)=>({coordinate:r(e)+m,value:e,index:t,offset:m})):r.ticks?r.ticks(h).map(e=>({coordinate:r(e)+m,value:e,offset:m})):r.domain().map((e,t)=>({coordinate:r(e)+m,value:a?a[e]:e,index:t,offset:m}))}}),Uu([Zh,Dx,qb,Vb,Zb,tw,px],(e,t,n,r,i,s,a)=>{if(null!=t&&null!=n&&null!=r&&r[0]!==r[1]){var o=Nh(e,a),{tickCount:l}=t,c=0;return c="angleAxis"===a&&(null===r||void 0===r?void 0:r.length)>=2?2*Ho(r[0]-r[1])*c:c,o&&s?s.map((e,t)=>({coordinate:n(e)+c,value:e,index:t,offset:c})):n.ticks?n.ticks(l).map(e=>({coordinate:n(e)+c,value:e,offset:c})):n.domain().map((e,t)=>({coordinate:n(e)+c,value:i?i[e]:e,index:t,offset:c}))}}),Uu(Mx,qb,(e,t)=>{if(null!=e&&null!=t)return Nx(Nx({},e),{},{scale:t})}),Uu([Mx,Tb,Eb,Hb],Mb)),rw=(Uu((e,t,n)=>Tx(e,n),nw,(e,t)=>{if(null!=e&&null!=t)return Nx(Nx({},e),{},{scale:t})}),Uu([Zh,Ih,Lh],(e,t,n)=>{switch(e){case"horizontal":return t.some(e=>e.reversed)?"right-to-left":"left-to-right";case"vertical":return n.some(e=>e.reversed)?"bottom-to-top":"top-to-bottom";case"centric":case"radial":return"left-to-right";default:return}})),iw=e=>e.options.defaultTooltipEventType,sw=e=>e.options.validateTooltipEventTypes;function aw(e,t,n){if(null==e)return t;var r=e?"axis":"item";return null==n?t:n.includes(r)?r:t}function ow(e,t){return aw(t,iw(e),sw(e))}var lw=(e,t)=>{var n,r=Number(t);if(!qo(r)&&null!=t)return r>=0?null===e||void 0===e||null===(n=e[r])||void 0===n?void 0:n.value:void 0};function cw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cw(Object(n),!0).forEach(function(t){uw(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uw(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hw=(e,t,n,r)=>{if(null==t)return du;var i=function(e,t,n){return"axis"===t?"click"===n?e.axisInteraction.click:e.axisInteraction.hover:"click"===n?e.itemInteraction.click:e.itemInteraction.hover}(e,t,n);if(null==i)return du;if(i.active)return i;if(e.keyboardInteraction.active)return e.keyboardInteraction;if(e.syncInteraction.active&&null!=e.syncInteraction.index)return e.syncInteraction;var s=!0===e.settings.active;if(null!=i.index){if(s)return dw(dw({},i),{},{active:!0})}else if(null!=r)return{active:!0,coordinate:void 0,dataKey:void 0,index:r};return dw(dw({},du),{},{coordinate:i.coordinate})},pw=(e,t)=>{var n=null===e||void 0===e?void 0:e.index;if(null==n)return null;var r=Number(n);if(!fy(r))return n;var i=1/0;return t.length>0&&(i=t.length-1),String(Math.max(0,Math.min(r,i)))},mw=(e,t,n,r,i,s,a,o)=>{if(null!=s&&null!=o){var l=a[0],c=null==l?void 0:o(l.positions,s);if(null!=c)return c;var d=null===i||void 0===i?void 0:i[Number(s)];if(d)return"horizontal"===n?{x:d.coordinate,y:(r.top+t)/2}:{x:(r.left+e)/2,y:d.coordinate}}},fw=(e,t,n,r)=>{return"axis"===t?e.tooltipItemPayloads:0===e.tooltipItemPayloads.length?[]:null==(i="hover"===n?e.itemInteraction.hover.dataKey:e.itemInteraction.click.dataKey)&&null!=r?[e.tooltipItemPayloads[0]]:e.tooltipItemPayloads.filter(e=>{var t;return(null===(t=e.settings)||void 0===t?void 0:t.dataKey)===i});var i},gw=e=>e.options.tooltipPayloadSearcher,vw=e=>e.tooltip;function yw(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function xw(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?yw(Object(n),!0).forEach(function(t){bw(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yw(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function bw(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ww=(e,t,n,r,i,s,a)=>{if(null!=t&&null!=s){var{chartData:o,computedData:l,dataStartIndex:c,dataEndIndex:d}=n;return e.reduce((e,n)=>{var u,h,p,{dataDefinedOnItem:m,settings:f}=n,g=function(e,t){return null!=e?e:t}(m,o),v=Array.isArray(g)?yh(g,c,d):g,y=null!==(u=null===f||void 0===f?void 0:f.dataKey)&&void 0!==u?u:r,x=null===f||void 0===f?void 0:f.nameKey;(h=r&&Array.isArray(v)&&!Array.isArray(v[0])&&"axis"===a?function(e,t,n){if(e&&e.length)return e.find(e=>e&&("function"===typeof t?t(e):Vo()(e,t))===n)}(v,r,i):s(v,t,l,x),Array.isArray(h))?h.forEach(t=>{var n=xw(xw({},f),{},{name:t.name,unit:t.unit,color:void 0,fill:void 0});e.push(Ph({tooltipEntrySettings:n,dataKey:t.dataKey,payload:t.payload,value:jh(t.payload,t.dataKey),name:t.name}))}):e.push(Ph({tooltipEntrySettings:f,dataKey:y,payload:h,value:jh(h,y),name:null!==(p=jh(h,x))&&void 0!==p?p:null===f||void 0===f?void 0:f.name}));return e},[])}},jw=Uu([yx,Zh,Ox,zy,gx],Pb),Nw=Uu([e=>e.graphicalItems.cartesianItems,e=>e.graphicalItems.polarItems],(e,t)=>[...e,...t]),kw=Uu([gx,vx],Rx),Aw=Uu([Nw,yx,kw],Lx),Sw=Uu([Aw],e=>e.filter(wx)),_w=Uu([Aw],Ux),Cw=Uu([_w,hy],Hx),Ew=Uu([Sw,hy,yx],bx),Pw=Uu([Cw,yx,Aw],Gx),Tw=Uu([yx],lb),Mw=Uu([Aw],e=>e.filter(wx)),Dw=Uu([Ew,Mw,By],Qx),Ow=Uu([Dw,hy,gx],eb),Rw=Uu([Aw],zx),Iw=Uu([Cw,yx,Rw,rb,gx],nb),Lw=Uu([db,gx,vx],ub),Fw=Uu([Lw,gx],vb),Bw=Uu([pb,gx,vx],ub),zw=Uu([Bw,gx],xb),Ww=Uu([fb,gx,vx],ub),Uw=Uu([Ww,gx],wb),Vw=Uu([Fw,Uw,zw],cb),Hw=Uu([yx,Tw,Ow,Iw,Vw,Zh,gx],Ab),qw=Uu([yx,Zh,Cw,Pw,By,gx,Hw],Cb),Gw=Uu([qw,yx,jw],Db),Kw=Uu([yx,qw,Gw,gx],Rb),Yw=e=>{var t=gx(e),n=vx(e);return Vb(e,t,n,!1)},Xw=Uu([yx,Yw],Zy),Jw=Uu([yx,jw,Kw,Xw],Mb),$w=Uu([Zh,Pw,yx,gx],Qb),Qw=Uu([Zh,Pw,yx,gx],ew),Zw=Uu([Zh,yx,jw,Jw,Yw,$w,Qw,gx],(e,t,n,r,i,s,a,o)=>{if(t){var{type:l}=t,c=Nh(e,o);if(r){var d="scaleBand"===n&&r.bandwidth?r.bandwidth()/2:2,u="category"===l&&r.bandwidth?r.bandwidth()/d:0;return u="angleAxis"===o&&null!=i&&(null===i||void 0===i?void 0:i.length)>=2?2*Ho(i[0]-i[1])*u:u,c&&a?a.map((e,t)=>({coordinate:r(e)+u,value:e,index:t,offset:u})):r.domain().map((e,t)=>({coordinate:r(e)+u,value:s?s[e]:e,index:t,offset:u}))}}}),ej=Uu([iw,sw,e=>e.tooltip.settings],(e,t,n)=>aw(n.shared,e,t)),tj=e=>e.tooltip.settings.trigger,nj=e=>e.tooltip.settings.defaultIndex,rj=Uu([vw,ej,tj,nj],hw),ij=Uu([rj,Cw],pw),sj=Uu([Zw,ij],lw),aj=Uu([rj],e=>{if(e)return e.dataKey}),oj=Uu([vw,ej,tj,nj],fw),lj=Uu([Mh,Dh,Zh,Vh,Zw,nj,oj,gw],mw),cj=Uu([rj,lj],(e,t)=>null!==e&&void 0!==e&&e.coordinate?e.coordinate:t),dj=Uu([rj],e=>e.active),uj=Uu([oj,ij,hy,xx,sj,gw,ej],ww),hj=(Uu([uj],e=>{if(null!=e){var t=e.map(e=>e.payload).filter(e=>null!=e);return Array.from(new Set(t))}}),(e,t)=>t),pj=(e,t,n)=>n,mj=(e,t,n,r)=>r,fj=Uu(Zw,e=>Zu()(e,e=>e.coordinate)),gj=Uu([vw,hj,pj,mj],hw),vj=Uu([gj,Cw],pw),yj=Uu([vw,hj,pj,mj],fw),xj=Uu([Mh,Dh,Zh,Vh,Zw,mj,yj,gw],mw),bj=Uu([gj,xj],(e,t)=>{var n;return null!==(n=e.coordinate)&&void 0!==n?n:t}),wj=Uu(Zw,vj,lw),jj=Uu([yj,vj,hy,xx,wj,gw,hj],ww),Nj=Uu([gj],e=>({isActive:e.active,activeIndex:e.index})),kj=Uu([(e,t)=>t,Zh,hx,gx,Xw,Zw,fj,Vh],(e,t,n,r,i,s,a,o)=>{if(e&&t&&r&&i&&s){var l=function(e,t,n,r,i){return"horizontal"===n||"vertical"===n?e>=i.left&&e<=i.left+i.width&&t>=i.top&&t<=i.top+i.height?{x:e,y:t}:null:r?vh({x:e,y:t},r):null}(e.chartX,e.chartY,t,n,o);if(l){var c=((e,t)=>"horizontal"===t?e.x:"vertical"===t?e.y:"centric"===t?e.angle:e.radius)(l,t),d=((e,t,n,r,i)=>{var s,a=-1,o=null!==(s=null===t||void 0===t?void 0:t.length)&&void 0!==s?s:0;if(o<=1||null==e)return 0;if("angleAxis"===r&&null!=i&&Math.abs(Math.abs(i[1]-i[0])-360)<=1e-6)for(var l=0;l<o;l++){var c=l>0?n[l-1].coordinate:n[o-1].coordinate,d=n[l].coordinate,u=l>=o-1?n[0].coordinate:n[l+1].coordinate,h=void 0;if(Ho(d-c)!==Ho(u-d)){var p=[];if(Ho(u-d)===Ho(i[1]-i[0])){h=u;var m=d+i[1]-i[0];p[0]=Math.min(m,(m+c)/2),p[1]=Math.max(m,(m+c)/2)}else{h=c;var f=u+i[1]-i[0];p[0]=Math.min(d,(f+d)/2),p[1]=Math.max(d,(f+d)/2)}var g=[Math.min(d,(h+d)/2),Math.max(d,(h+d)/2)];if(e>g[0]&&e<=g[1]||e>=p[0]&&e<=p[1]){({index:a}=n[l]);break}}else{var v=Math.min(c,u),y=Math.max(c,u);if(e>(v+d)/2&&e<=(y+d)/2){({index:a}=n[l]);break}}}else if(t)for(var x=0;x<o;x++)if(0===x&&e<=(t[x].coordinate+t[x+1].coordinate)/2||x>0&&x<o-1&&e>(t[x].coordinate+t[x-1].coordinate)/2&&e<=(t[x].coordinate+t[x+1].coordinate)/2||x===o-1&&e>(t[x].coordinate+t[x-1].coordinate)/2){({index:a}=t[x]);break}return a})(c,a,s,r,i),u=((e,t,n,r)=>{var i=t.find(e=>e&&e.index===n);if(i){if("horizontal"===e)return{x:i.coordinate,y:r.y};if("vertical"===e)return{x:r.x,y:i.coordinate};if("centric"===e){var s=i.coordinate,{radius:a}=r;return bh(bh(bh({},r),ph(r.cx,r.cy,a,s)),{},{angle:s,radius:a})}var o=i.coordinate,{angle:l}=r;return bh(bh(bh({},r),ph(r.cx,r.cy,o,l)),{},{angle:l,radius:o})}return{x:0,y:0}})(t,s,d,l);return{activeIndex:String(d),activeCoordinate:u}}}}),Aj=e=>{var t=e.currentTarget.getBoundingClientRect(),n=t.width/e.currentTarget.offsetWidth,r=t.height/e.currentTarget.offsetHeight;return{chartX:Math.round((e.clientX-t.left)/n),chartY:Math.round((e.clientY-t.top)/r)}},Sj=hc("mouseClick"),_j=sd();_j.startListening({actionCreator:Sj,effect:(e,t)=>{var n=e.payload,r=kj(t.getState(),Aj(n));null!=(null===r||void 0===r?void 0:r.activeIndex)&&t.dispatch(bu({activeIndex:r.activeIndex,activeDataKey:void 0,activeCoordinate:r.activeCoordinate}))}});var Cj=hc("mouseMove"),Ej=sd();function Pj(e,t){return t instanceof HTMLElement?"HTMLElement <".concat(t.tagName,' class="').concat(t.className,'">'):t===window?"global.window":t}function Tj(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Mj(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tj(Object(n),!0).forEach(function(t){Dj(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tj(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Dj(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Ej.startListening({actionCreator:Cj,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=ow(r,r.tooltip.settings.shared),s=kj(r,Aj(n));"axis"===i&&(null!=(null===s||void 0===s?void 0:s.activeIndex)?t.dispatch(xu({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate})):t.dispatch(vu()))}});var Oj=Sc({name:"cartesianAxis",initialState:{xAxis:{},yAxis:{},zAxis:{}},reducers:{addXAxis(e,t){e.xAxis[t.payload.id]=t.payload},removeXAxis(e,t){delete e.xAxis[t.payload.id]},addYAxis(e,t){e.yAxis[t.payload.id]=t.payload},removeYAxis(e,t){delete e.yAxis[t.payload.id]},addZAxis(e,t){e.zAxis[t.payload.id]=t.payload},removeZAxis(e,t){delete e.zAxis[t.payload.id]},updateYAxisWidth(e,t){var{id:n,width:r}=t.payload;e.yAxis[n]&&(e.yAxis[n]=Mj(Mj({},e.yAxis[n]),{},{width:r}))}}}),{addXAxis:Rj,removeXAxis:Ij,addYAxis:Lj,removeYAxis:Fj,addZAxis:Bj,removeZAxis:zj,updateYAxisWidth:Wj}=Oj.actions,Uj=Oj.reducer,Vj=Sc({name:"graphicalItems",initialState:{cartesianItems:[],polarItems:[]},reducers:{addCartesianGraphicalItem(e,t){e.cartesianItems.push(t.payload)},replaceCartesianGraphicalItem(e,t){var{prev:n,next:r}=t.payload,i=ac(e).cartesianItems.indexOf(n);i>-1&&(e.cartesianItems[i]=r)},removeCartesianGraphicalItem(e,t){var n=ac(e).cartesianItems.indexOf(t.payload);n>-1&&e.cartesianItems.splice(n,1)},addPolarGraphicalItem(e,t){e.polarItems.push(t.payload)},removePolarGraphicalItem(e,t){var n=ac(e).polarItems.indexOf(t.payload);n>-1&&e.polarItems.splice(n,1)}}}),{addCartesianGraphicalItem:Hj,replaceCartesianGraphicalItem:qj,removeCartesianGraphicalItem:Gj,addPolarGraphicalItem:Kj,removePolarGraphicalItem:Yj}=Vj.actions,Xj=Vj.reducer,Jj=Sc({name:"referenceElements",initialState:{dots:[],areas:[],lines:[]},reducers:{addDot:(e,t)=>{e.dots.push(t.payload)},removeDot:(e,t)=>{var n=ac(e).dots.findIndex(e=>e===t.payload);-1!==n&&e.dots.splice(n,1)},addArea:(e,t)=>{e.areas.push(t.payload)},removeArea:(e,t)=>{var n=ac(e).areas.findIndex(e=>e===t.payload);-1!==n&&e.areas.splice(n,1)},addLine:(e,t)=>{e.lines.push(t.payload)},removeLine:(e,t)=>{var n=ac(e).lines.findIndex(e=>e===t.payload);-1!==n&&e.lines.splice(n,1)}}}),{addDot:$j,removeDot:Qj,addArea:Zj,removeArea:eN,addLine:tN,removeLine:nN}=Jj.actions,rN=Jj.reducer,iN={x:0,y:0,width:0,height:0,padding:{top:0,right:0,bottom:0,left:0}},sN=Sc({name:"brush",initialState:iN,reducers:{setBrushSettings:(e,t)=>null==t.payload?iN:t.payload}}),{setBrushSettings:aN}=sN.actions,oN=sN.reducer,lN=Sc({name:"legend",initialState:{settings:{layout:"horizontal",align:"center",verticalAlign:"middle",itemSorter:"value"},size:{width:0,height:0},payload:[]},reducers:{setLegendSize(e,t){e.size.width=t.payload.width,e.size.height=t.payload.height},setLegendSettings(e,t){e.settings.align=t.payload.align,e.settings.layout=t.payload.layout,e.settings.verticalAlign=t.payload.verticalAlign,e.settings.itemSorter=t.payload.itemSorter},addLegendPayload(e,t){e.payload.push(t.payload)},removeLegendPayload(e,t){var n=ac(e).payload.indexOf(t.payload);n>-1&&e.payload.splice(n,1)}}}),{setLegendSize:cN,setLegendSettings:dN,addLegendPayload:uN,removeLegendPayload:hN}=lN.actions,pN=lN.reducer,mN={accessibilityLayer:!0,barCategoryGap:"10%",barGap:4,barSize:void 0,className:void 0,maxBarSize:void 0,stackOffset:"none",syncId:void 0,syncMethod:"index"},fN=Sc({name:"rootProps",initialState:mN,reducers:{updateOptions:(e,t)=>{var n;e.accessibilityLayer=t.payload.accessibilityLayer,e.barCategoryGap=t.payload.barCategoryGap,e.barGap=null!==(n=t.payload.barGap)&&void 0!==n?n:mN.barGap,e.barSize=t.payload.barSize,e.maxBarSize=t.payload.maxBarSize,e.stackOffset=t.payload.stackOffset,e.syncId=t.payload.syncId,e.syncMethod=t.payload.syncMethod,e.className=t.payload.className}}}),gN=fN.reducer,{updateOptions:vN}=fN.actions,yN=Sc({name:"polarAxis",initialState:{radiusAxis:{},angleAxis:{}},reducers:{addRadiusAxis(e,t){e.radiusAxis[t.payload.id]=t.payload},removeRadiusAxis(e,t){delete e.radiusAxis[t.payload.id]},addAngleAxis(e,t){e.angleAxis[t.payload.id]=t.payload},removeAngleAxis(e,t){delete e.angleAxis[t.payload.id]}}}),{addRadiusAxis:xN,removeRadiusAxis:bN,addAngleAxis:wN,removeAngleAxis:jN}=yN.actions,NN=yN.reducer,kN=Sc({name:"polarOptions",initialState:null,reducers:{updatePolarOptions:(e,t)=>t.payload}}),{updatePolarOptions:AN}=kN.actions,SN=kN.reducer,_N=hc("keyDown"),CN=hc("focus"),EN=sd();EN.startListening({actionCreator:_N,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip,i=e.payload;if("ArrowRight"===i||"ArrowLeft"===i||"Enter"===i){var s=Number(pw(r,Cw(n))),a=Zw(n);if("Enter"!==i){var o=s+("ArrowRight"===i?1:-1)*("left-to-right"===rw(n)?1:-1);if(!(null==a||o>=a.length||o<0)){var l=xj(n,"axis","hover",String(o));t.dispatch(ju({active:!0,activeIndex:o.toString(),activeDataKey:void 0,activeCoordinate:l}))}}else{var c=xj(n,"axis","hover",String(r.index));t.dispatch(ju({active:!r.active,activeIndex:r.index,activeDataKey:r.dataKey,activeCoordinate:c}))}}}}}),EN.startListening({actionCreator:CN,effect:(e,t)=>{var n=t.getState();if(!1!==n.rootProps.accessibilityLayer){var{keyboardInteraction:r}=n.tooltip;if(!r.active&&null==r.index){var i=xj(n,"axis","hover",String("0"));t.dispatch(ju({activeDataKey:void 0,active:!0,activeIndex:"0",activeCoordinate:i}))}}}});var PN=hc("externalEvent"),TN=sd();TN.startListening({actionCreator:PN,effect:(e,t)=>{if(null!=e.payload.handler){var n=t.getState(),r={activeCoordinate:cj(n),activeDataKey:aj(n),activeIndex:ij(n),activeLabel:sj(n),activeTooltipIndex:ij(n),isTooltipActive:dj(n)};e.payload.handler(r,e.payload.reactEvent)}}});var MN=Uu([vw],e=>e.tooltipItemPayloads),DN=Uu([MN,gw,(e,t,n)=>t,(e,t,n)=>n],(e,t,n,r)=>{var i=e.find(e=>e.settings.dataKey===r);if(null!=i){var{positions:s}=i;if(null!=s)return t(s,n)}}),ON=hc("touchMove"),RN=sd();RN.startListening({actionCreator:ON,effect:(e,t)=>{var n=e.payload,r=t.getState(),i=ow(r,r.tooltip.settings.shared);if("axis"===i){var s=kj(r,Aj({clientX:n.touches[0].clientX,clientY:n.touches[0].clientY,currentTarget:n.currentTarget}));null!=(null===s||void 0===s?void 0:s.activeIndex)&&t.dispatch(xu({activeIndex:s.activeIndex,activeDataKey:void 0,activeCoordinate:s.activeCoordinate}))}else if("item"===i){var a,o=n.touches[0],l=document.elementFromPoint(o.clientX,o.clientY);if(!l||!l.getAttribute)return;var c=l.getAttribute(Fh),d=null!==(a=l.getAttribute(Bh))&&void 0!==a?a:void 0,u=DN(t.getState(),c,d);t.dispatch(fu({activeDataKey:d,activeIndex:c,activeCoordinate:u}))}}});var IN=Sc({name:"errorBars",initialState:{},reducers:{addErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]||(e[n]=[]),e[n].push(r)},replaceErrorBar:(e,t)=>{var{itemId:n,prev:r,next:i}=t.payload;e[n]&&(e[n]=e[n].map(e=>e.dataKey===r.dataKey&&e.direction===r.direction?i:e))},removeErrorBar:(e,t)=>{var{itemId:n,errorBar:r}=t.payload;e[n]&&(e[n]=e[n].filter(e=>e.dataKey!==r.dataKey||e.direction!==r.direction))}}}),{addErrorBar:LN,replaceErrorBar:FN,removeErrorBar:BN}=IN.actions,zN=ml({brush:oN,cartesianAxis:Uj,chartData:Cu,errorBars:IN.reducer,graphicalItems:Xj,layout:Ou,legend:pN,options:cd,polarAxis:NN,polarOptions:SN,referenceElements:rN,rootProps:gN,tooltip:Nu});function WN(e){var{preloadedState:t,children:n,reduxStoreName:r}=e,s=Gh(),a=(0,i.useRef)(null);if(s)return n;null==a.current&&(a.current=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Chart";return xc({reducer:zN,preloadedState:e,middleware:e=>e({serializableCheck:!1}).concat([_j.middleware,Ej.middleware,EN.middleware,TN.middleware,RN.middleware]),devTools:!!window.RECHARTS_DEV_TOOLS_ENABLED&&{serialize:{replacer:Pj},name:"recharts-".concat(t)}})}(t,r));var o=qu;return i.createElement(wd,{context:o,store:a.current},n)}var UN=e=>{var{chartData:t}=e,n=Ku(),r=Gh();return(0,i.useEffect)(()=>r?()=>{}:(n(Au(t)),()=>{n(Au(void 0))}),[t,n,r]),null};function VN(e){var{layout:t,width:n,height:r,margin:s}=e,a=Ku(),o=Gh();return(0,i.useEffect)(()=>{o||(a(Tu(t)),a(Mu({width:n,height:r})),a(Pu(s)))},[a,o,t,n,r,s]),null}function HN(e){var t=Ku();return(0,i.useEffect)(()=>{t(vN(e))},[t,e]),null}function qN(e){var t=Ku();return(0,i.useEffect)(()=>{t(AN(e))},[t,e]),null}var GN=()=>$u(e=>e.rootProps.accessibilityLayer),KN=n(528),YN=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"];function XN(e){return"string"===typeof e&&YN.includes(e)}var JN=["points","pathLength"],$N={svg:["viewBox","children"],polygon:JN,polyline:JN},QN=(e,t,n)=>{if(null===e||"object"!==typeof e&&"function"!==typeof e)return null;var r=null;return Object.keys(e).forEach(i=>{var s=e[i];XN(i)&&"function"===typeof s&&(r||(r={}),r[i]=((e,t,n)=>r=>(e(t,n,r),null))(s,t,n))}),r},ZN=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"];function ek(e){return"string"===typeof e&&ZN.includes(e)}function tk(e){var t=Object.entries(e).filter(e=>{var[t]=e;return ek(t)});return Object.fromEntries(t)}var nk=e=>"string"===typeof e?e:e?e.displayName||e.name||"Component":"",rk=null,ik=null,sk=e=>{if(e===rk&&Array.isArray(ik))return ik;var t=[];return i.Children.forEach(e,e=>{el(e)||((0,KN.zv)(e)?t=t.concat(sk(e.props.children)):t.push(e))}),ik=t,rk=e,t};function ak(e,t){var n=[],r=[];return r=Array.isArray(t)?t.map(e=>nk(e)):[nk(t)],sk(e).forEach(e=>{var t=Vo()(e,"type.displayName")||Vo()(e,"type.name");-1!==r.indexOf(t)&&n.push(e)}),n}var ok=(e,t,n)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var r=e;if((0,i.isValidElement)(e)&&(r=e.props),"object"!==typeof r&&"function"!==typeof r)return null;var s={};return Object.keys(r).forEach(e=>{var i;((e,t,n,r)=>{var i;if("symbol"===typeof t||"number"===typeof t)return!0;var s=null!==(i=r&&(null===$N||void 0===$N?void 0:$N[r]))&&void 0!==i?i:[],a=t.startsWith("data-"),o="function"!==typeof e&&(Boolean(r)&&s.includes(t)||ek(t)),l=Boolean(n)&&XN(t);return a||o||l})(null===(i=r)||void 0===i?void 0:i[e],e,t,n)&&(s[e]=r[e])}),s},lk=["children","width","height","viewBox","className","style","title","desc"];function ck(){return ck=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ck.apply(null,arguments)}var dk=(0,i.forwardRef)((e,t)=>{var{children:n,width:r,height:s,viewBox:a,className:o,style:l,title:c,desc:d}=e,u=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,lk),h=a||{width:r,height:s,x:0,y:0},p=Fo("recharts-surface",o);return i.createElement("svg",ck({},ok(u,!0,"svg"),{className:p,width:r,height:s,style:l,viewBox:"".concat(h.x," ").concat(h.y," ").concat(h.width," ").concat(h.height),ref:t}),i.createElement("title",null,c),i.createElement("desc",null,d),n)}),uk=["children"];function hk(){return hk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hk.apply(null,arguments)}var pk={width:"100%",height:"100%"},mk=(0,i.forwardRef)((e,t)=>{var n=$h(),r=Qh(),s=GN();if(!gy(n)||!gy(r))return null;var a,o,{children:l,otherAttributes:c,title:d,desc:u}=e;return a="number"===typeof c.tabIndex?c.tabIndex:s?0:void 0,o="string"===typeof c.role?c.role:s?"application":void 0,i.createElement(dk,hk({},c,{title:d,desc:u,role:o,tabIndex:a,width:n,height:r,style:pk,ref:t}),l)}),fk=e=>{var{children:t}=e,n=$u(Yh);if(!n)return null;var{width:r,height:s,y:a,x:o}=n;return i.createElement(dk,{width:r,height:s,x:o,y:a},t)},gk=(0,i.forwardRef)((e,t)=>{var{children:n}=e,r=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,uk);return Gh()?i.createElement(fk,null,n):i.createElement(mk,hk({ref:t},r),n)});var vk=new(n(8499)),yk="recharts.syncEvent.tooltip",xk="recharts.syncEvent.brush";function bk(e){return e.tooltip.syncInteraction}var wk=["x","y"];function jk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Nk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jk(Object(n),!0).forEach(function(t){kk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ak=()=>{};function Sk(){var e=$u(Wy),t=$u(Vy),n=Ku(),r=$u(Uy),s=$u(Zw),a=ep(),o=Xh(),l=$u(e=>e.rootProps.className);(0,i.useEffect)(()=>{if(null==e)return Ak;var i=(i,l,c)=>{var d;if(t!==c&&e===i)if("index"!==r){if(null!=s){var u;if("function"===typeof r){var h={activeTooltipIndex:null==l.payload.index?void 0:Number(l.payload.index),isTooltipActive:l.payload.active,activeIndex:null==l.payload.index?void 0:Number(l.payload.index),activeLabel:l.payload.label,activeDataKey:l.payload.dataKey,activeCoordinate:l.payload.coordinate},p=r(s,h);u=s[p]}else"value"===r&&(u=s.find(e=>String(e.value)===l.payload.label));var{coordinate:m}=l.payload;if(null!=u&&!1!==l.payload.active&&null!=m&&null!=o){var{x:f,y:g}=m,v=Math.min(f,o.x+o.width),y=Math.min(g,o.y+o.height),x={x:"horizontal"===a?u.coordinate:v,y:"horizontal"===a?y:u.coordinate},b=wu({active:l.payload.active,coordinate:x,dataKey:l.payload.dataKey,index:String(u.index),label:l.payload.label});n(b)}else n(wu({active:!1,coordinate:void 0,dataKey:void 0,index:null,label:void 0}))}}else if(o&&null!==l&&void 0!==l&&null!==(d=l.payload)&&void 0!==d&&d.coordinate){var w=l.payload.coordinate,{x:j,y:N}=w,k=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(w,wk),A=Nk(Nk(Nk({},k),"number"===typeof j&&{x:Math.max(o.x,Math.min(j,o.x+o.width))}),"number"===typeof N&&{y:Math.max(o.y,Math.min(N,o.y+o.height))}),S=Nk(Nk({},l),{},{payload:Nk(Nk({},l.payload),{},{coordinate:A})});n(S)}else n(l)};return vk.on(yk,i),()=>{vk.off(yk,i)}},[l,n,t,e,r,s,a,o])}function _k(){var e=Ku();(0,i.useEffect)(()=>{e(dd())},[e]),Sk(),function(){var e=$u(Wy),t=$u(Vy),n=Ku();(0,i.useEffect)(()=>{if(null==e)return Ak;var r=(r,i,s)=>{t!==s&&e===r&&n(Su(i))};return vk.on(xk,r),()=>{vk.off(xk,r)}},[n,t,e])}()}function Ck(e,t,n,r,s,a){var o=$u(n=>((e,t,n)=>{if(null!=t){var r=vw(e);return"axis"===t?"hover"===n?r.axisInteraction.hover.dataKey:r.axisInteraction.click.dataKey:"hover"===n?r.itemInteraction.hover.dataKey:r.itemInteraction.click.dataKey}})(n,e,t)),l=$u(Vy),c=$u(Wy),d=$u(Uy),u=$u(bk),h=null===u||void 0===u?void 0:u.active;(0,i.useEffect)(()=>{if(!h&&null!=c&&null!=l){var e=wu({active:a,coordinate:n,dataKey:o,index:s,label:"number"===typeof r?String(r):r});vk.emit(yk,c,e,l)}},[h,n,o,s,r,l,c,d,a])}var Ek=(0,i.createContext)(null),Pk=(0,i.createContext)(null);function Tk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Mk(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Tk(Object(n),!0).forEach(function(t){Dk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Dk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ok=(0,i.forwardRef)((e,t)=>{var{children:n,className:r,height:s,onClick:a,onContextMenu:o,onDoubleClick:l,onMouseDown:c,onMouseEnter:d,onMouseLeave:u,onMouseMove:h,onMouseUp:p,onTouchEnd:m,onTouchMove:f,onTouchStart:g,style:v,width:y}=e,x=Ku(),[b,w]=(0,i.useState)(null),[j,N]=(0,i.useState)(null);_k();var k=function(){var e=Ku(),[t,n]=(0,i.useState)(null),r=$u(Oh);return(0,i.useEffect)(()=>{if(null!=t){var n=t.getBoundingClientRect().width/t.offsetWidth;fy(n)&&n!==r&&e(Du(n))}},[t,e,r]),n}(),A=(0,i.useCallback)(e=>{k(e),"function"===typeof t&&t(e),w(e),N(e)},[k,t,w,N]),S=(0,i.useCallback)(e=>{x(Sj(e)),x(PN({handler:a,reactEvent:e}))},[x,a]),_=(0,i.useCallback)(e=>{x(Cj(e)),x(PN({handler:d,reactEvent:e}))},[x,d]),C=(0,i.useCallback)(e=>{x(vu()),x(PN({handler:u,reactEvent:e}))},[x,u]),E=(0,i.useCallback)(e=>{x(Cj(e)),x(PN({handler:h,reactEvent:e}))},[x,h]),P=(0,i.useCallback)(()=>{x(CN())},[x]),T=(0,i.useCallback)(e=>{x(_N(e.key))},[x]),M=(0,i.useCallback)(e=>{x(PN({handler:o,reactEvent:e}))},[x,o]),D=(0,i.useCallback)(e=>{x(PN({handler:l,reactEvent:e}))},[x,l]),O=(0,i.useCallback)(e=>{x(PN({handler:c,reactEvent:e}))},[x,c]),R=(0,i.useCallback)(e=>{x(PN({handler:p,reactEvent:e}))},[x,p]),I=(0,i.useCallback)(e=>{x(PN({handler:g,reactEvent:e}))},[x,g]),L=(0,i.useCallback)(e=>{x(ON(e)),x(PN({handler:f,reactEvent:e}))},[x,f]),F=(0,i.useCallback)(e=>{x(PN({handler:m,reactEvent:e}))},[x,m]);return i.createElement(Ek.Provider,{value:b},i.createElement(Pk.Provider,{value:j},i.createElement("div",{className:Fo("recharts-wrapper",r),style:Mk({position:"relative",cursor:"default",width:y,height:s},v),onClick:S,onContextMenu:M,onDoubleClick:D,onFocus:P,onKeyDown:T,onMouseDown:O,onMouseEnter:_,onMouseLeave:C,onMouseMove:E,onMouseUp:R,onTouchEnd:F,onTouchMove:L,onTouchStart:I,ref:A},n)))}),Rk=Uu([Vh],e=>{if(e)return{top:e.top,bottom:e.bottom,left:e.left,right:e.right}}),Ik=Uu([Rk,Mh,Dh],(e,t,n)=>{if(e&&null!=t&&null!=n)return{x:e.left,y:e.top,width:Math.max(0,t-e.left-e.right),height:Math.max(0,n-e.top-e.bottom)}}),Lk=(0,i.createContext)(void 0),Fk=e=>{var{children:t}=e,[n]=(0,i.useState)("".concat(Jo("recharts"),"-clip")),r=$u(Ik);if(null==r)return null;var{x:s,y:a,width:o,height:l}=r;return i.createElement(Lk.Provider,{value:n},i.createElement("defs",null,i.createElement("clipPath",{id:n},i.createElement("rect",{x:s,y:a,height:l,width:o}))),t)},Bk=["children","className","width","height","style","compact","title","desc"];var zk=(0,i.forwardRef)((e,t)=>{var{children:n,className:r,width:s,height:a,style:o,compact:l,title:c,desc:d}=e,u=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,Bk),h=tk(u);return l?i.createElement(gk,{otherAttributes:h,title:c,desc:d},n):i.createElement(Ok,{className:r,style:o,width:s,height:a,onClick:e.onClick,onMouseLeave:e.onMouseLeave,onMouseEnter:e.onMouseEnter,onMouseMove:e.onMouseMove,onMouseDown:e.onMouseDown,onMouseUp:e.onMouseUp,onContextMenu:e.onContextMenu,onDoubleClick:e.onDoubleClick,onTouchStart:e.onTouchStart,onTouchMove:e.onTouchMove,onTouchEnd:e.onTouchEnd},i.createElement(gk,{otherAttributes:h,title:c,desc:d,ref:t},i.createElement(Fk,null,n)))});function Wk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Uk(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vk(e,t){var n=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wk(Object(n),!0).forEach(function(t){Uk(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wk(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e),r=t;return Object.keys(t).reduce((e,t)=>(void 0===e[t]&&void 0!==r[t]&&(e[t]=r[t]),e),n)}var Hk=["width","height","layout"];function qk(){return qk=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qk.apply(null,arguments)}var Gk={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index",layout:"radial"},Kk=(0,i.forwardRef)(function(e,t){var n,r=Vk(e.categoricalChartProps,Gk),{width:s,height:a,layout:o}=r,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(r,Hk);if(!gy(s)||!gy(a))return null;var{chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h}=e,p={chartName:c,defaultTooltipEventType:d,validateTooltipEventTypes:u,tooltipPayloadSearcher:h,eventEmitter:void 0};return i.createElement(WN,{preloadedState:{options:p},reduxStoreName:null!==(n=r.id)&&void 0!==n?n:c},i.createElement(UN,{chartData:r.data}),i.createElement(VN,{width:s,height:a,layout:o,margin:r.margin}),i.createElement(HN,{accessibilityLayer:r.accessibilityLayer,barCategoryGap:r.barCategoryGap,maxBarSize:r.maxBarSize,stackOffset:r.stackOffset,barGap:r.barGap,barSize:r.barSize,syncId:r.syncId,syncMethod:r.syncMethod,className:r.className}),i.createElement(qN,{cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius}),i.createElement(zk,qk({width:s,height:a},l,{ref:t})))}),Yk=["item"],Xk={layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},Jk=(0,i.forwardRef)((e,t)=>{var n=Vk(e,Xk);return i.createElement(Kk,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Yk,tooltipPayloadSearcher:od,categoricalChartProps:n,ref:t})}),$k=e=>e.graphicalItems.polarItems,Qk=Uu([px,mx],Rx),Zk=Uu([$k,Mx,Qk],Lx),eA=Uu([Zk],Ux),tA=Uu([eA,py],Hx),nA=Uu([tA,Mx,Zk],Gx),rA=Uu([tA,Mx,Zk],(e,t,n)=>n.length>0?e.flatMap(e=>n.flatMap(n=>{var r;return{value:jh(e,null!==(r=t.dataKey)&&void 0!==r?r:n.dataKey),errorDomain:[]}})).filter(Boolean):null!=(null===t||void 0===t?void 0:t.dataKey)?e.map(e=>({value:jh(e,t.dataKey),errorDomain:[]})):e.map(e=>({value:e,errorDomain:[]}))),iA=()=>{},sA=Uu([Mx,kb,iA,rA,iA,Zh,px],Ab),aA=Uu([Mx,Zh,tA,nA,By,px,sA],Cb),oA=Uu([aA,Mx,Tb],Db);Uu([Mx,aA,oA,px],Rb);function lA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function cA(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lA(Object(n),!0).forEach(function(t){dA(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lA(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function dA(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var uA=Uu([$k,(e,t)=>t],(e,t)=>e.filter(e=>"pie"===e.type).find(e=>e.id===t)),hA=[],pA=(e,t,n)=>0===(null===n||void 0===n?void 0:n.length)?hA:n,mA=Uu([py,uA,pA],(e,t,n)=>{var r,{chartData:i}=e;if(null!=t&&((r=null!=(null===t||void 0===t?void 0:t.data)&&t.data.length>0?t.data:i)&&r.length||null==n||(r=n.map(e=>cA(cA({},t.presentationProps),e.props))),null!=r))return r}),fA=Uu([mA,uA,pA],(e,t,n)=>{if(null!=e&&null!=t)return e.map((e,r)=>{var i,s,a=jh(e,t.nameKey,t.name);return s=null!==n&&void 0!==n&&null!==(i=n[r])&&void 0!==i&&null!==(i=i.props)&&void 0!==i&&i.fill?n[r].props.fill:"object"===typeof e&&null!=e&&"fill"in e?e.fill:t.fill,{value:Th(a,t.dataKey),color:s,payload:e,type:t.legendType}})}),gA=Uu([mA,uA,pA,Vh],(e,t,n,r)=>{if(null!=t&&null!=e)return function(e){var t,n,r,{pieSettings:i,displayedData:s,cells:a,offset:o}=e,{cornerRadius:l,startAngle:c,endAngle:d,dataKey:u,nameKey:h,tooltipType:p}=i,m=Math.abs(i.minAngle),f=NE(c,d),g=Math.abs(f),v=s.length<=1?0:null!==(t=i.paddingAngle)&&void 0!==t?t:0,y=s.filter(e=>0!==jh(e,u,0)).length,x=g-y*m-(g>=360?y:y-1)*v,b=s.reduce((e,t)=>{var n=jh(t,u,0);return e+(Ko(n)?n:0)},0);b>0&&(n=s.map((e,t)=>{var n,s=jh(e,u,0),d=jh(e,h,t),g=jE(i,o,e),y=(Ko(s)?s:0)/b,w=vE(vE({},e),a&&a[t]&&a[t].props),j=(n=t?r.endAngle+Ho(f)*v*(0!==s?1:0):c)+Ho(f)*((0!==s?m:0)+y*x),N=(n+j)/2,k=(g.innerRadius+g.outerRadius)/2,A=[{name:d,value:s,payload:w,dataKey:u,type:p}],S=ph(g.cx,g.cy,k,N);return r=vE(vE(vE(vE({},i.presentationProps),{},{percent:y,cornerRadius:l,name:d,tooltipPayload:A,midAngle:N,middleRadius:k,tooltipPosition:S},w),g),{},{value:jh(e,u),startAngle:n,endAngle:j,payload:w,paddingAngle:Ho(f)*v})}));return n}({offset:r,pieSettings:t,displayedData:e,cells:n})}),vA=["children","className"];function yA(){return yA=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yA.apply(null,arguments)}var xA,bA,wA,jA,NA,kA,AA,SA,_A,CA,EA,PA,TA,MA,DA=i.forwardRef((e,t)=>{var{children:n,className:r}=e,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,vA),a=Fo("recharts-layer",r);return i.createElement("g",yA({className:a},ok(s,!0),{ref:t}),n)});function OA(){}function RA(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function IA(e){this._context=e}function LA(e){this._context=e}function FA(e){this._context=e}IA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:RA(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:RA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},LA.prototype={areaStart:OA,areaEnd:OA,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:RA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}},FA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:RA(this,e,t)}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};class BA{constructor(e,t){this._context=e,this._x=t}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+e)/2,this._y0,this._x0,t,e,t):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+t)/2,e,this._y0,e,t)}this._x0=e,this._y0=t}}function zA(e){this._context=e}function WA(e){this._context=e}function UA(e){return new WA(e)}function VA(e){return e<0?-1:1}function HA(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),a=(n-e._y1)/(i||r<0&&-0),o=(s*i+a*r)/(r+i);return(VA(s)+VA(a))*Math.min(Math.abs(s),Math.abs(a),.5*Math.abs(o))||0}function qA(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function GA(e,t,n){var r=e._x0,i=e._y0,s=e._x1,a=e._y1,o=(s-r)/3;e._context.bezierCurveTo(r+o,i+o*t,s-o,a-o*n,s,a)}function KA(e){this._context=e}function YA(e){this._context=new XA(e)}function XA(e){this._context=e}function JA(e){this._context=e}function $A(e){var t,n,r=e.length-1,i=new Array(r),s=new Array(r),a=new Array(r);for(i[0]=0,s[0]=2,a[0]=e[0]+2*e[1],t=1;t<r-1;++t)i[t]=1,s[t]=4,a[t]=4*e[t]+2*e[t+1];for(i[r-1]=2,s[r-1]=7,a[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)n=i[t]/s[t-1],s[t]-=n,a[t]-=n*a[t-1];for(i[r-1]=a[r-1]/s[r-1],t=r-2;t>=0;--t)i[t]=(a[t]-i[t+1])/s[t];for(s[r-1]=(e[r]+i[r-1])/2,t=0;t<r-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function QA(e,t){this._context=e,this._t=t}zA.prototype={areaStart:OA,areaEnd:OA,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}},WA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t)}}},KA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:GA(this,this._t0,qA(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(t=+t,(e=+e)!==this._x1||t!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,GA(this,qA(this,n=HA(this,e,t)),n);break;default:GA(this,this._t0,n=HA(this,e,t))}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}},(YA.prototype=Object.create(KA.prototype)).point=function(e,t){KA.prototype.point.call(this,t,e)},XA.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}},JA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),2===n)this._context.lineTo(e[1],t[1]);else for(var r=$A(e),i=$A(t),s=0,a=1;a<n;++s,++a)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[a],t[a]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}},QA.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}}this._x=e,this._y=t}};const ZA=Math.PI,eS=2*ZA,tS=1e-6,nS=eS-tS;function rS(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}class iS{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=null==e?rS:function(e){let t=Math.floor(e);if(!(t>=0))throw new Error("invalid digits: ".concat(e));if(t>15)return rS;const n=10**t;return function(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=Math.round(arguments[t]*n)/n+e[t]}}(e)}moveTo(e,t){this._append(xA||(xA=ke(["M",",",""])),this._x0=this._x1=+e,this._y0=this._y1=+t)}closePath(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._append(bA||(bA=ke(["Z"]))))}lineTo(e,t){this._append(wA||(wA=ke(["L",",",""])),this._x1=+e,this._y1=+t)}quadraticCurveTo(e,t,n,r){this._append(jA||(jA=ke(["Q",",",",",",",""])),+e,+t,this._x1=+n,this._y1=+r)}bezierCurveTo(e,t,n,r,i,s){this._append(NA||(NA=ke(["C",",",",",",",",",",",""])),+e,+t,+n,+r,this._x1=+i,this._y1=+s)}arcTo(e,t,n,r,i){if(e=+e,t=+t,n=+n,r=+r,(i=+i)<0)throw new Error("negative radius: ".concat(i));let s=this._x1,a=this._y1,o=n-e,l=r-t,c=s-e,d=a-t,u=c*c+d*d;if(null===this._x1)this._append(kA||(kA=ke(["M",",",""])),this._x1=e,this._y1=t);else if(u>tS)if(Math.abs(d*o-l*c)>tS&&i){let h=n-s,p=r-a,m=o*o+l*l,f=h*h+p*p,g=Math.sqrt(m),v=Math.sqrt(u),y=i*Math.tan((ZA-Math.acos((m+u-f)/(2*g*v)))/2),x=y/v,b=y/g;Math.abs(x-1)>tS&&this._append(SA||(SA=ke(["L",",",""])),e+x*c,t+x*d),this._append(_A||(_A=ke(["A",",",",0,0,",",",",",""])),i,i,+(d*h>c*p),this._x1=e+b*o,this._y1=t+b*l)}else this._append(AA||(AA=ke(["L",",",""])),this._x1=e,this._y1=t);else;}arc(e,t,n,r,i,s){if(e=+e,t=+t,s=!!s,(n=+n)<0)throw new Error("negative radius: ".concat(n));let a=n*Math.cos(r),o=n*Math.sin(r),l=e+a,c=t+o,d=1^s,u=s?r-i:i-r;null===this._x1?this._append(CA||(CA=ke(["M",",",""])),l,c):(Math.abs(this._x1-l)>tS||Math.abs(this._y1-c)>tS)&&this._append(EA||(EA=ke(["L",",",""])),l,c),n&&(u<0&&(u=u%eS+eS),u>nS?this._append(PA||(PA=ke(["A",",",",0,1,",",",",","A",",",",0,1,",",",",",""])),n,n,d,e-a,t-o,n,n,d,this._x1=l,this._y1=c):u>tS&&this._append(TA||(TA=ke(["A",",",",0,",",",",",",",""])),n,n,+(u>=ZA),d,this._x1=e+n*Math.cos(i),this._y1=t+n*Math.sin(i)))}rect(e,t,n,r){this._append(MA||(MA=ke(["M",",","h","v","h","Z"])),this._x0=this._x1=+e,this._y0=this._y1=+t,n=+n,+r,-n)}toString(){return this._}}function sS(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(null==n)t=null;else{const e=Math.floor(n);if(!(e>=0))throw new RangeError("invalid digits: ".concat(n));t=e}return e},()=>new iS(t)}function aS(e){return e[0]}function oS(e){return e[1]}function lS(e,t){var n=ih(!0),r=null,i=UA,s=null,a=sS(o);function o(o){var l,c,d,u=(o=rh(o)).length,h=!1;for(null==r&&(s=i(d=a())),l=0;l<=u;++l)!(l<u&&n(c=o[l],l,o))===h&&((h=!h)?s.lineStart():s.lineEnd()),h&&s.point(+e(c,l,o),+t(c,l,o));if(d)return s=null,d+""||null}return e="function"===typeof e?e:void 0===e?aS:ih(e),t="function"===typeof t?t:void 0===t?oS:ih(t),o.x=function(t){return arguments.length?(e="function"===typeof t?t:ih(+t),o):e},o.y=function(e){return arguments.length?(t="function"===typeof e?e:ih(+e),o):t},o.defined=function(e){return arguments.length?(n="function"===typeof e?e:ih(!!e),o):n},o.curve=function(e){return arguments.length?(i=e,null!=r&&(s=i(r)),o):i},o.context=function(e){return arguments.length?(null==e?r=s=null:s=i(r=e),o):r},o}function cS(e,t,n){var r=null,i=ih(!0),s=null,a=UA,o=null,l=sS(c);function c(c){var d,u,h,p,m,f=(c=rh(c)).length,g=!1,v=new Array(f),y=new Array(f);for(null==s&&(o=a(m=l())),d=0;d<=f;++d){if(!(d<f&&i(p=c[d],d,c))===g)if(g=!g)u=d,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),h=d-1;h>=u;--h)o.point(v[h],y[h]);o.lineEnd(),o.areaEnd()}g&&(v[d]=+e(p,d,c),y[d]=+t(p,d,c),o.point(r?+r(p,d,c):v[d],n?+n(p,d,c):y[d]))}if(m)return o=null,m+""||null}function d(){return lS().defined(i).curve(a).context(s)}return e="function"===typeof e?e:void 0===e?aS:ih(+e),t="function"===typeof t?t:ih(void 0===t?0:+t),n="function"===typeof n?n:void 0===n?oS:ih(+n),c.x=function(t){return arguments.length?(e="function"===typeof t?t:ih(+t),r=null,c):e},c.x0=function(t){return arguments.length?(e="function"===typeof t?t:ih(+t),c):e},c.x1=function(e){return arguments.length?(r=null==e?null:"function"===typeof e?e:ih(+e),c):r},c.y=function(e){return arguments.length?(t="function"===typeof e?e:ih(+e),n=null,c):t},c.y0=function(e){return arguments.length?(t="function"===typeof e?e:ih(+e),c):t},c.y1=function(e){return arguments.length?(n=null==e?null:"function"===typeof e?e:ih(+e),c):n},c.lineX0=c.lineY0=function(){return d().x(e).y(t)},c.lineY1=function(){return d().x(e).y(n)},c.lineX1=function(){return d().x(r).y(t)},c.defined=function(e){return arguments.length?(i="function"===typeof e?e:ih(!!e),c):i},c.curve=function(e){return arguments.length?(a=e,null!=s&&(o=a(s)),c):a},c.context=function(e){return arguments.length?(null==e?s=o=null:o=a(s=e),c):s},c}function dS(){return dS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dS.apply(null,arguments)}function uS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function hS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?uS(Object(n),!0).forEach(function(t){pS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function pS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var mS={curveBasisClosed:function(e){return new LA(e)},curveBasisOpen:function(e){return new FA(e)},curveBasis:function(e){return new IA(e)},curveBumpX:function(e){return new BA(e,!0)},curveBumpY:function(e){return new BA(e,!1)},curveLinearClosed:function(e){return new zA(e)},curveLinear:UA,curveMonotoneX:function(e){return new KA(e)},curveMonotoneY:function(e){return new YA(e)},curveNatural:function(e){return new JA(e)},curveStep:function(e){return new QA(e,.5)},curveStepAfter:function(e){return new QA(e,1)},curveStepBefore:function(e){return new QA(e,0)}},fS=e=>fy(e.x)&&fy(e.y),gS=e=>e.x,vS=e=>e.y,yS=e=>{var t,{type:n="linear",points:r=[],baseLine:i,layout:s,connectNulls:a=!1}=e,o=((e,t)=>{if("function"===typeof e)return e;var n="curve".concat(tl(e));return"curveMonotone"!==n&&"curveBump"!==n||!t?mS[n]||UA:mS["".concat(n).concat("vertical"===t?"Y":"X")]})(n,s),l=a?r.filter(fS):r;if(Array.isArray(i)){var c=a?i.filter(e=>fS(e)):i,d=l.map((e,t)=>hS(hS({},e),{},{base:c[t]}));return t="vertical"===s?cS().y(vS).x1(gS).x0(e=>e.base.x):cS().x(gS).y1(vS).y0(e=>e.base.y),t.defined(fS).curve(o),t(d)}return(t="vertical"===s&&Ko(i)?cS().y(vS).x1(gS).x0(i):Ko(i)?cS().x(gS).y1(vS).y0(i):lS().x(gS).y(vS)).defined(fS).curve(o),t(l)},xS=e=>{var{className:t,points:n,path:r,pathRef:s}=e;if((!n||!n.length)&&!r)return null;var a=n&&n.length?yS(e):r;return i.createElement("path",dS({},tk(e),((e,t)=>{if(!e||"function"===typeof e||"boolean"===typeof e)return null;var n=e;if((0,i.isValidElement)(e)&&(n=e.props),"object"!==typeof n&&"function"!==typeof n)return null;var r={};return Object.keys(n).forEach(e=>{XN(e)&&(r[e]=t||(t=>n[e](n,t)))}),r})(e),{className:Fo("recharts-curve",t),d:null===a?void 0:a,ref:s}))},bS=!("undefined"!==typeof window&&window.document&&Boolean(window.document.createElement)&&window.setTimeout);function wS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jS(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function NS(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jS(Object(n),!0).forEach(function(t){kS(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jS(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function kS(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var AS=NS({},{cacheSize:2e3,enableCache:!0}),SS=new class{constructor(e){wS(this,"cache",new Map),this.maxSize=e}get(e){var t=this.cache.get(e);return void 0!==t&&(this.cache.delete(e),this.cache.set(e,t)),t}set(e,t){if(this.cache.has(e))this.cache.delete(e);else if(this.cache.size>=this.maxSize){var n=this.cache.keys().next().value;this.cache.delete(n)}this.cache.set(e,t)}clear(){this.cache.clear()}size(){return this.cache.size}}(AS.cacheSize),_S={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},CS="recharts_measurement_span";var ES=(e,t)=>{try{var n=document.getElementById(CS);n||((n=document.createElement("span")).setAttribute("id",CS),n.setAttribute("aria-hidden","true"),document.body.appendChild(n)),Object.assign(n.style,_S,t),n.textContent="".concat(e);var r=n.getBoundingClientRect();return{width:r.width,height:r.height}}catch(i){return{width:0,height:0}}},PS=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(void 0===e||null===e||bS)return{width:0,height:0};if(!AS.enableCache)return ES(e,t);var n=function(e,t){var n=t.fontSize||"",r=t.fontFamily||"",i=t.fontWeight||"",s=t.fontStyle||"",a=t.letterSpacing||"",o=t.textTransform||"";return"".concat(e,"|").concat(n,"|").concat(r,"|").concat(i,"|").concat(s,"|").concat(a,"|").concat(o)}(e,t),r=SS.get(n);if(r)return r;var i=ES(e,t);return SS.set(n,i),i},TS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,MS=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,DS=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,OS=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,RS={cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,in:96,Q:96/101.6,px:1},IS=Object.keys(RS),LS="NaN";class FS{static parse(e){var t,[,n,r]=null!==(t=OS.exec(e))&&void 0!==t?t:[];return new FS(parseFloat(n),null!==r&&void 0!==r?r:"")}constructor(e,t){this.num=e,this.unit=t,this.num=e,this.unit=t,qo(e)&&(this.unit=""),""===t||DS.test(t)||(this.num=NaN,this.unit=""),IS.includes(t)&&(this.num=function(e,t){return e*RS[t]}(e,t),this.unit="px")}add(e){return this.unit!==e.unit?new FS(NaN,""):new FS(this.num+e.num,this.unit)}subtract(e){return this.unit!==e.unit?new FS(NaN,""):new FS(this.num-e.num,this.unit)}multiply(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new FS(NaN,""):new FS(this.num*e.num,this.unit||e.unit)}divide(e){return""!==this.unit&&""!==e.unit&&this.unit!==e.unit?new FS(NaN,""):new FS(this.num/e.num,this.unit||e.unit)}toString(){return"".concat(this.num).concat(this.unit)}isNaN(){return qo(this.num)}}function BS(e){if(e.includes(LS))return LS;for(var t=e;t.includes("*")||t.includes("/");){var n,[,r,i,s]=null!==(n=TS.exec(t))&&void 0!==n?n:[],a=FS.parse(null!==r&&void 0!==r?r:""),o=FS.parse(null!==s&&void 0!==s?s:""),l="*"===i?a.multiply(o):a.divide(o);if(l.isNaN())return LS;t=t.replace(TS,l.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var c,[,d,u,h]=null!==(c=MS.exec(t))&&void 0!==c?c:[],p=FS.parse(null!==d&&void 0!==d?d:""),m=FS.parse(null!==h&&void 0!==h?h:""),f="+"===u?p.add(m):p.subtract(m);if(f.isNaN())return LS;t=t.replace(MS,f.toString())}return t}var zS=/\(([^()]*)\)/;function WS(e){var t=e.replace(/\s+/g,"");return t=function(e){for(var t,n=e;null!=(t=zS.exec(n));){var[,r]=t;n=n.replace(zS,BS(r))}return n}(t),t=BS(t)}function US(e){var t=function(e){try{return WS(e)}catch(t){return LS}}(e.slice(5,-1));return t===LS?"":t}var VS=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],HS=["dx","dy","angle","className","breakAll"];function qS(){return qS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qS.apply(null,arguments)}function GS(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var KS=/[ \f\n\r\t\v\u2028\u2029]+/,YS=e=>{var{children:t,breakAll:n,style:r}=e;try{var i=[];return el(t)||(i=n?t.toString().split(""):t.toString().split(KS)),{wordsWithComputedWidth:i.map(e=>({word:e,width:PS(e,r).width})),spaceWidth:n?0:PS("\xa0",r).width}}catch(s){return null}},XS=e=>[{words:el(e)?[]:e.toString().split(KS)}],JS=e=>{var{width:t,scaleToFit:n,children:r,style:i,breakAll:s,maxLines:a}=e;if((t||n)&&!bS){var o=YS({breakAll:s,children:r,style:i});if(!o)return XS(r);var{wordsWithComputedWidth:l,spaceWidth:c}=o;return((e,t,n,r,i)=>{var{maxLines:s,children:a,style:o,breakAll:l}=e,c=Ko(s),d=a,u=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).reduce((e,t)=>{var{word:s,width:a}=t,o=e[e.length-1];if(o&&(null==r||i||o.width+a+n<Number(r)))o.words.push(s),o.width+=a+n;else{var l={words:[s],width:a};e.push(l)}return e},[])},h=u(t),p=e=>e.reduce((e,t)=>e.width>t.width?e:t);if(!c||i)return h;if(!(h.length>s||p(h).width>Number(r)))return h;for(var m,f=e=>{var t=d.slice(0,e),n=YS({breakAll:l,style:o,children:t+"\u2026"}).wordsWithComputedWidth,i=u(n);return[i.length>s||p(i).width>Number(r),i]},g=0,v=d.length-1,y=0;g<=v&&y<=d.length-1;){var x=Math.floor((g+v)/2),b=x-1,[w,j]=f(b),[N]=f(x);if(w||N||(g=x+1),w&&N&&(v=x-1),!w&&N){m=j;break}y++}return m||h})({breakAll:s,children:r,maxLines:a,style:i},l,c,t,n)}return XS(r)},$S="#808080",QS=(0,i.forwardRef)((e,t)=>{var{x:n=0,y:r=0,lineHeight:s="1em",capHeight:a="0.71em",scaleToFit:o=!1,textAnchor:l="start",verticalAnchor:c="end",fill:d=$S}=e,u=GS(e,VS),h=(0,i.useMemo)(()=>JS({breakAll:u.breakAll,children:u.children,maxLines:u.maxLines,scaleToFit:o,style:u.style,width:u.width}),[u.breakAll,u.children,u.maxLines,o,u.style,u.width]),{dx:p,dy:m,angle:f,className:g,breakAll:v}=u,y=GS(u,HS);if(!Yo(n)||!Yo(r)||0===h.length)return null;var x,b=n+(Ko(p)?p:0),w=r+(Ko(m)?m:0);switch(c){case"start":x=US("calc(".concat(a,")"));break;case"middle":x=US("calc(".concat((h.length-1)/2," * -").concat(s," + (").concat(a," / 2))"));break;default:x=US("calc(".concat(h.length-1," * -").concat(s,")"))}var j=[];if(o){var N=h[0].width,{width:k}=u;j.push("scale(".concat(Ko(k)?k/N:1,")"))}return f&&j.push("rotate(".concat(f,", ").concat(b,", ").concat(w,")")),j.length&&(y.transform=j.join(" ")),i.createElement("text",qS({},ok(y,!0),{ref:t,x:b,y:w,className:Fo("recharts-text",g),textAnchor:l,fill:d.includes("url")?$S:d}),h.map((e,t)=>{var n=e.words.join(v?"":" ");return i.createElement("tspan",{x:b,dy:0===t?x:s,key:"".concat(n,"-").concat(t)},n)}))});QS.displayName="Text";var ZS=e=>null;ZS.displayName="Cell";var e_=n(9397),t_=n.n(e_);function n_(){}function r_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function i_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r_(Object(n),!0).forEach(function(t){s_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function s_(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var a_=(e,t,n)=>e.map(e=>{return"".concat((r=e,r.replace(/([A-Z])/g,e=>"-".concat(e.toLowerCase())))," ").concat(t,"ms ").concat(n);var r}).join(","),o_=(e,t)=>Object.keys(t).reduce((n,r)=>i_(i_({},n),{},{[r]:e(r,t[r])}),{});function l_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l_(Object(n),!0).forEach(function(t){d_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function d_(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u_=(e,t,n)=>e+(t-e)*n,h_=e=>{var{from:t,to:n}=e;return t!==n},p_=(e,t,n)=>{var r=o_((t,n)=>{if(h_(n)){var[r,i]=e(n.from,n.to,n.velocity);return c_(c_({},n),{},{from:r,velocity:i})}return n},t);return n<1?o_((e,t)=>h_(t)?c_(c_({},t),{},{velocity:u_(t.velocity,r[e].velocity,n),from:u_(t.from,r[e].from,n)}):t,t):p_(e,r,n-1)};function m_(e,t,n,r,i,s){var a,o=r.reduce((n,r)=>c_(c_({},n),{},{[r]:{from:e[r],velocity:0,to:t[r]}}),{}),l=null,c=r=>{a||(a=r);var d=(r-a)/n.dt;o=p_(n,o,d),i(c_(c_(c_({},e),t),o_((e,t)=>t.from,o))),a=r,Object.values(o).filter(h_).length&&(l=s.setTimeout(c))};return()=>(l=s.setTimeout(c),()=>{l()})}const f_=(e,t,n,r,i,s)=>{var a,o,l=(a=e,o=t,[Object.keys(a),Object.keys(o)].reduce((e,t)=>e.filter(e=>t.includes(e))));return!0===n.isStepper?m_(e,t,n,l,i,s):function(e,t,n,r,i,s,a){var o,l=null,c=i.reduce((n,r)=>c_(c_({},n),{},{[r]:[e[r],t[r]]}),{}),d=i=>{o||(o=i);var u=(i-o)/r,h=o_((e,t)=>u_(...t,n(u)),c);if(s(c_(c_(c_({},e),t),h)),u<1)l=a.setTimeout(d);else{var p=o_((e,t)=>u_(...t,n(1)),c);s(c_(c_(c_({},e),t),p))}};return()=>(l=a.setTimeout(d),()=>{l()})}(e,t,n,r,l,i,s)};var g_=1e-4,v_=(e,t)=>[0,3*e,3*t-6*e,3*e-3*t+1],y_=(e,t)=>e.map((e,n)=>e*t**n).reduce((e,t)=>e+t),x_=(e,t)=>n=>{var r=v_(e,t);return y_(r,n)},b_=function(){for(var e,t,n,r,i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];if(1===s.length)switch(s[0]){case"linear":[e,n,t,r]=[0,0,1,1];break;case"ease":[e,n,t,r]=[.25,.1,.25,1];break;case"ease-in":[e,n,t,r]=[.42,0,1,1];break;case"ease-out":[e,n,t,r]=[.42,0,.58,1];break;case"ease-in-out":[e,n,t,r]=[0,0,.58,1];break;default:var o=s[0].split("(");"cubic-bezier"===o[0]&&4===o[1].split(")")[0].split(",").length&&([e,n,t,r]=o[1].split(")")[0].split(",").map(e=>parseFloat(e)))}else 4===s.length&&([e,n,t,r]=s);var l,c,d=x_(e,t),u=x_(n,r),h=(l=e,c=t,e=>{var t=[...v_(l,c).map((e,t)=>e*t).slice(1),0];return y_(t,e)}),p=e=>e>1?1:e<0?0:e,m=e=>{for(var t=e>1?1:e,n=t,r=0;r<8;++r){var i=d(n)-t,s=h(n);if(Math.abs(i-t)<g_||s<g_)return u(n);n=p(n-i/s)}return u(n)};return m.isStepper=!1,m},w_=e=>{if("string"===typeof e)switch(e){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return b_(e);case"spring":return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{stiff:t=100,damping:n=8,dt:r=17}=e,i=(e,i,s)=>{var a=s+(-(e-i)*t-s*n)*r/1e3,o=s*r/1e3+e;return Math.abs(o-i)<g_&&Math.abs(a)<g_?[i,0]:[o,a]};return i.isStepper=!0,i.dt=r,i}();default:if("cubic-bezier"===e.split("(")[0])return b_(e)}return"function"===typeof e?e:null};class j_{setTimeout(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=performance.now(),r=null,i=s=>{s-n>=t?e(s):"function"===typeof requestAnimationFrame&&(r=requestAnimationFrame(i))};return r=requestAnimationFrame(i),()=>{cancelAnimationFrame(r)}}}function N_(){return function(e){var t=()=>null,n=!1,r=null,i=s=>{if(!n){if(Array.isArray(s)){if(!s.length)return;var a=s,[o,...l]=a;return"number"===typeof o?void(r=e.setTimeout(i.bind(null,l),o)):(i(o),void(r=e.setTimeout(i.bind(null,l))))}"string"===typeof s&&t(s),"object"===typeof s&&t(s),"function"===typeof s&&s()}};return{stop:()=>{n=!0},start:e=>{n=!1,r&&(r(),r=null),i(e)},subscribe:e=>(t=e,()=>{t=()=>null}),getTimeoutController:()=>e}}(new j_)}var k_=(0,i.createContext)(N_);var A_={begin:0,duration:1e3,easing:"ease",isActive:!0,canBegin:!0,onAnimationEnd:()=>{},onAnimationStart:()=>{}},S_={t:0},__={t:1};function C_(e){var t=Vk(e,A_),{isActive:n,canBegin:r,duration:s,easing:a,begin:o,onAnimationEnd:l,onAnimationStart:c,children:d}=t,u=function(e,t){var n=(0,i.useContext)(k_);return(0,i.useMemo)(()=>null!==t&&void 0!==t?t:n(e),[e,t,n])}(t.animationId,t.animationManager),[h,p]=(0,i.useState)(n?S_:__),m=(0,i.useRef)(null);return(0,i.useEffect)(()=>{n||p(__)},[n]),(0,i.useEffect)(()=>{if(!n||!r)return n_;var e=f_(S_,__,w_(a),s,p,u.getTimeoutController());return u.start([c,o,()=>{m.current=e()},s,l]),()=>{u.stop(),m.current&&m.current(),l()}},[n,r,s,a,o,c,l,u]),d(h.t)}function E_(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"animation-",n=(0,i.useRef)(Jo(t)),r=(0,i.useRef)(e);return r.current!==e&&(n.current=Jo(t),r.current=e),n.current}function P_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function T_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P_(Object(n),!0).forEach(function(t){M_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function M_(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D_(){return D_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},D_.apply(null,arguments)}var O_=(e,t,n,r,i)=>{var s,a=Math.min(Math.abs(n)/2,Math.abs(r)/2),o=r>=0?1:-1,l=n>=0?1:-1,c=r>=0&&n>=0||r<0&&n<0?1:0;if(a>0&&i instanceof Array){for(var d=[0,0,0,0],u=0;u<4;u++)d[u]=i[u]>a?a:i[u];s="M".concat(e,",").concat(t+o*d[0]),d[0]>0&&(s+="A ".concat(d[0],",").concat(d[0],",0,0,").concat(c,",").concat(e+l*d[0],",").concat(t)),s+="L ".concat(e+n-l*d[1],",").concat(t),d[1]>0&&(s+="A ".concat(d[1],",").concat(d[1],",0,0,").concat(c,",\n        ").concat(e+n,",").concat(t+o*d[1])),s+="L ".concat(e+n,",").concat(t+r-o*d[2]),d[2]>0&&(s+="A ".concat(d[2],",").concat(d[2],",0,0,").concat(c,",\n        ").concat(e+n-l*d[2],",").concat(t+r)),s+="L ".concat(e+l*d[3],",").concat(t+r),d[3]>0&&(s+="A ".concat(d[3],",").concat(d[3],",0,0,").concat(c,",\n        ").concat(e,",").concat(t+r-o*d[3])),s+="Z"}else if(a>0&&i===+i&&i>0){var h=Math.min(a,i);s="M ".concat(e,",").concat(t+o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+l*h,",").concat(t,"\n            L ").concat(e+n-l*h,",").concat(t,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n,",").concat(t+o*h,"\n            L ").concat(e+n,",").concat(t+r-o*h,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e+n-l*h,",").concat(t+r,"\n            L ").concat(e+l*h,",").concat(t+r,"\n            A ").concat(h,",").concat(h,",0,0,").concat(c,",").concat(e,",").concat(t+r-o*h," Z")}else s="M ".concat(e,",").concat(t," h ").concat(n," v ").concat(r," h ").concat(-n," Z");return s},R_={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},I_=e=>{var t=Vk(e,R_),n=(0,i.useRef)(null),[r,s]=(0,i.useState)(-1);(0,i.useEffect)(()=>{if(n.current&&n.current.getTotalLength)try{var e=n.current.getTotalLength();e&&s(e)}catch(t){}},[]);var{x:a,y:o,width:l,height:c,radius:d,className:u}=t,{animationEasing:h,animationDuration:p,animationBegin:m,isAnimationActive:f,isUpdateAnimationActive:g}=t,v=(0,i.useRef)(l),y=(0,i.useRef)(c),x=(0,i.useRef)(a),b=(0,i.useRef)(o),w=E_((0,i.useMemo)(()=>({x:a,y:o,width:l,height:c,radius:d}),[a,o,l,c,d]),"rectangle-");if(a!==+a||o!==+o||l!==+l||c!==+c||0===l||0===c)return null;var j=Fo("recharts-rectangle",u);if(!g)return i.createElement("path",D_({},ok(t,!0),{className:j,d:O_(a,o,l,c,d)}));var N=v.current,k=y.current,A=x.current,S=b.current,_="0px ".concat(-1===r?1:r,"px"),C="".concat(r,"px 0px"),E=a_(["strokeDasharray"],p,"string"===typeof h?h:void 0);return i.createElement(C_,{animationId:w,key:w,canBegin:r>0,duration:p,easing:h,isActive:g,begin:m},e=>{var r,s=Zo(N,l,e),u=Zo(k,c,e),h=Zo(A,a,e),p=Zo(S,o,e);return n.current&&(v.current=s,y.current=u,x.current=h,b.current=p),r=f?e>0?{transition:E,strokeDasharray:C}:{strokeDasharray:_}:{strokeDasharray:C},i.createElement("path",D_({},ok(t,!0),{className:j,d:O_(h,p,s,u,d),ref:n,style:T_(T_({},r),t.style)}))})};function L_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function F_(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?L_(Object(n),!0).forEach(function(t){B_(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L_(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function B_(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z_(){return z_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},z_.apply(null,arguments)}var W_=(e,t,n,r,i)=>{var s,a=n-r;return s="M ".concat(e,",").concat(t),s+="L ".concat(e+n,",").concat(t),s+="L ".concat(e+n-a/2,",").concat(t+i),s+="L ".concat(e+n-a/2-r,",").concat(t+i),s+="L ".concat(e,",").concat(t," Z")},U_={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},V_=e=>{var t=Vk(e,U_),{x:n,y:r,upperWidth:s,lowerWidth:a,height:o,className:l}=t,{animationEasing:c,animationDuration:d,animationBegin:u,isUpdateAnimationActive:h}=t,p=(0,i.useRef)(),[m,f]=(0,i.useState)(-1),g=(0,i.useRef)(s),v=(0,i.useRef)(a),y=(0,i.useRef)(o),x=(0,i.useRef)(n),b=(0,i.useRef)(r),w=E_(e,"trapezoid-");if((0,i.useEffect)(()=>{if(p.current&&p.current.getTotalLength)try{var e=p.current.getTotalLength();e&&f(e)}catch(t){}},[]),n!==+n||r!==+r||s!==+s||a!==+a||o!==+o||0===s&&0===a||0===o)return null;var j=Fo("recharts-trapezoid",l);if(!h)return i.createElement("g",null,i.createElement("path",z_({},ok(t,!0),{className:j,d:W_(n,r,s,a,o)})));var N=g.current,k=v.current,A=y.current,S=x.current,_=b.current,C="0px ".concat(-1===m?1:m,"px"),E="".concat(m,"px 0px"),P=a_(["strokeDasharray"],d,c);return i.createElement(C_,{animationId:w,key:w,canBegin:m>0,duration:d,easing:c,isActive:h,begin:u},e=>{var l=Zo(N,s,e),c=Zo(k,a,e),d=Zo(A,o,e),u=Zo(S,n,e),h=Zo(_,r,e);p.current&&(g.current=l,v.current=c,y.current=d,x.current=u,b.current=h);var m=e>0?{transition:P,strokeDasharray:E}:{strokeDasharray:C};return i.createElement("path",z_({},ok(t,!0),{className:j,d:W_(u,h,l,c,d),ref:p,style:F_(F_({},m),t.style)}))})};function H_(){return H_=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},H_.apply(null,arguments)}var q_=e=>{var{cx:t,cy:n,radius:r,angle:i,sign:s,isExternal:a,cornerRadius:o,cornerIsExternal:l}=e,c=o*(a?1:-1)+r,d=Math.asin(o/c)/uh,u=l?i:i+s*d,h=l?i-s*d:i;return{center:ph(t,n,c,u),circleTangency:ph(t,n,r,u),lineTangency:ph(t,n,c*Math.cos(d*uh),h),theta:d}},G_=e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:s,endAngle:a}=e,o=((e,t)=>Ho(t-e)*Math.min(Math.abs(t-e),359.999))(s,a),l=s+o,c=ph(t,n,i,s),d=ph(t,n,i,l),u="M ".concat(c.x,",").concat(c.y,"\n    A ").concat(i,",").concat(i,",0,\n    ").concat(+(Math.abs(o)>180),",").concat(+(s>l),",\n    ").concat(d.x,",").concat(d.y,"\n  ");if(r>0){var h=ph(t,n,r,s),p=ph(t,n,r,l);u+="L ".concat(p.x,",").concat(p.y,"\n            A ").concat(r,",").concat(r,",0,\n            ").concat(+(Math.abs(o)>180),",").concat(+(s<=l),",\n            ").concat(h.x,",").concat(h.y," Z")}else u+="L ".concat(t,",").concat(n," Z");return u},K_={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Y_=e=>{var t=Vk(e,K_),{cx:n,cy:r,innerRadius:s,outerRadius:a,cornerRadius:o,forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u,className:h}=t;if(a<s||d===u)return null;var p,m=Fo("recharts-sector",h),f=a-s,g=$o(o,f,0,!0);return p=g>0&&Math.abs(d-u)<360?(e=>{var{cx:t,cy:n,innerRadius:r,outerRadius:i,cornerRadius:s,forceCornerRadius:a,cornerIsExternal:o,startAngle:l,endAngle:c}=e,d=Ho(c-l),{circleTangency:u,lineTangency:h,theta:p}=q_({cx:t,cy:n,radius:i,angle:l,sign:d,cornerRadius:s,cornerIsExternal:o}),{circleTangency:m,lineTangency:f,theta:g}=q_({cx:t,cy:n,radius:i,angle:c,sign:-d,cornerRadius:s,cornerIsExternal:o}),v=o?Math.abs(l-c):Math.abs(l-c)-p-g;if(v<0)return a?"M ".concat(h.x,",").concat(h.y,"\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*s,",0\n        a").concat(s,",").concat(s,",0,0,1,").concat(2*-s,",0\n      "):G_({cx:t,cy:n,innerRadius:r,outerRadius:i,startAngle:l,endAngle:c});var y="M ".concat(h.x,",").concat(h.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(u.x,",").concat(u.y,"\n    A").concat(i,",").concat(i,",0,").concat(+(v>180),",").concat(+(d<0),",").concat(m.x,",").concat(m.y,"\n    A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(f.x,",").concat(f.y,"\n  ");if(r>0){var{circleTangency:x,lineTangency:b,theta:w}=q_({cx:t,cy:n,radius:r,angle:l,sign:d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),{circleTangency:j,lineTangency:N,theta:k}=q_({cx:t,cy:n,radius:r,angle:c,sign:-d,isExternal:!0,cornerRadius:s,cornerIsExternal:o}),A=o?Math.abs(l-c):Math.abs(l-c)-w-k;if(A<0&&0===s)return"".concat(y,"L").concat(t,",").concat(n,"Z");y+="L".concat(N.x,",").concat(N.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(j.x,",").concat(j.y,"\n      A").concat(r,",").concat(r,",0,").concat(+(A>180),",").concat(+(d>0),",").concat(x.x,",").concat(x.y,"\n      A").concat(s,",").concat(s,",0,0,").concat(+(d<0),",").concat(b.x,",").concat(b.y,"Z")}else y+="L".concat(t,",").concat(n,"Z");return y})({cx:n,cy:r,innerRadius:s,outerRadius:a,cornerRadius:Math.min(g,f/2),forceCornerRadius:l,cornerIsExternal:c,startAngle:d,endAngle:u}):G_({cx:n,cy:r,innerRadius:s,outerRadius:a,startAngle:d,endAngle:u}),i.createElement("path",H_({},ok(t,!0),{className:m,d:p}))};Math.abs,Math.atan2;const X_=Math.cos,J_=(Math.max,Math.min,Math.sin),$_=Math.sqrt,Q_=Math.PI,Z_=2*Q_;const eC={draw(e,t){const n=$_(t/Q_);e.moveTo(n,0),e.arc(0,0,n,0,Z_)}},tC={draw(e,t){const n=$_(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},nC=$_(1/3),rC=2*nC,iC={draw(e,t){const n=$_(t/rC),r=n*nC;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},sC={draw(e,t){const n=$_(t),r=-n/2;e.rect(r,r,n,n)}},aC=J_(Q_/10)/J_(7*Q_/10),oC=J_(Z_/10)*aC,lC=-X_(Z_/10)*aC,cC={draw(e,t){const n=$_(.8908130915292852*t),r=oC*n,i=lC*n;e.moveTo(0,-n),e.lineTo(r,i);for(let s=1;s<5;++s){const t=Z_*s/5,a=X_(t),o=J_(t);e.lineTo(o*n,-a*n),e.lineTo(a*r-o*i,o*r+a*i)}e.closePath()}},dC=$_(3),uC={draw(e,t){const n=-$_(t/(3*dC));e.moveTo(0,2*n),e.lineTo(-dC*n,-n),e.lineTo(dC*n,-n),e.closePath()}},hC=-.5,pC=$_(3)/2,mC=1/$_(12),fC=3*(mC/2+1),gC={draw(e,t){const n=$_(t/fC),r=n/2,i=n*mC,s=r,a=n*mC+n,o=-s,l=a;e.moveTo(r,i),e.lineTo(s,a),e.lineTo(o,l),e.lineTo(hC*r-pC*i,pC*r+hC*i),e.lineTo(hC*s-pC*a,pC*s+hC*a),e.lineTo(hC*o-pC*l,pC*o+hC*l),e.lineTo(hC*r+pC*i,hC*i-pC*r),e.lineTo(hC*s+pC*a,hC*a-pC*s),e.lineTo(hC*o+pC*l,hC*l-pC*o),e.closePath()}};$_(3),$_(3);var vC=["type","size","sizeType"];function yC(){return yC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yC.apply(null,arguments)}function xC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function bC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xC(Object(n),!0).forEach(function(t){wC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function wC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jC={symbolCircle:eC,symbolCross:tC,symbolDiamond:iC,symbolSquare:sC,symbolStar:cC,symbolTriangle:uC,symbolWye:gC},NC=Math.PI/180,kC=e=>{var{type:t="circle",size:n=64,sizeType:r="area"}=e,s=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,vC),a=bC(bC({},s),{},{type:t,size:n,sizeType:r}),o="circle";"string"===typeof t&&(o=t);var{className:l,cx:c,cy:d}=a,u=ok(a,!0);return c===+c&&d===+d&&n===+n?i.createElement("path",yC({},u,{className:Fo("recharts-symbols",l),transform:"translate(".concat(c,", ").concat(d,")"),d:(()=>{var e=(e=>{var t="symbol".concat(tl(e));return jC[t]||eC})(o),t=function(e,t){let n=null,r=sS(i);function i(){let i;if(n||(n=i=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return e="function"===typeof e?e:ih(e||eC),t="function"===typeof t?t:ih(void 0===t?64:+t),i.type=function(t){return arguments.length?(e="function"===typeof t?t:ih(t),i):e},i.size=function(e){return arguments.length?(t="function"===typeof e?e:ih(+e),i):t},i.context=function(e){return arguments.length?(n=null==e?null:e,i):n},i}().type(e).size(((e,t,n)=>{if("area"===t)return e;switch(n){case"cross":return 5*e*e/9;case"diamond":return.5*e*e/Math.sqrt(3);case"square":return e*e;case"star":var r=18*NC;return 1.25*e*e*(Math.tan(r)-Math.tan(2*r)*Math.tan(r)**2);case"triangle":return Math.sqrt(3)*e*e/4;case"wye":return(21-10*Math.sqrt(3))*e*e/8;default:return Math.PI*e*e/4}})(n,r,o));return t()})()})):null};kC.registerSymbol=(e,t)=>{jC["symbol".concat(tl(e))]=t};var AC=["option","shapeType","propTransformer","activeClassName","isActive"];function SC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function _C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?SC(Object(n),!0).forEach(function(t){CC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function CC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EC(e,t){return _C(_C({},t),e)}function PC(e){var{shapeType:t,elementProps:n}=e;switch(t){case"rectangle":return i.createElement(I_,n);case"trapezoid":return i.createElement(V_,n);case"sector":return i.createElement(Y_,n);case"symbols":if(function(e){return"symbols"===e}(t))return i.createElement(kC,n);break;default:return null}}function TC(e){var t,{option:n,shapeType:r,propTransformer:s=EC,activeClassName:a="recharts-active-shape",isActive:o}=e,l=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,AC);if((0,i.isValidElement)(n))t=(0,i.cloneElement)(n,_C(_C({},l),function(e){return(0,i.isValidElement)(e)?e.props:e}(n)));else if("function"===typeof n)t=n(l);else if(t_()(n)&&"boolean"!==typeof n){var c=s(n,l);t=i.createElement(PC,{shapeType:r,elementProps:c})}else{var d=l;t=i.createElement(PC,{shapeType:r,elementProps:d})}return o?i.createElement(DA,{className:a},t):t}function MC(e){var{fn:t,args:n}=e,r=Ku(),s=Gh();return(0,i.useEffect)(()=>{if(!s){var e=t(n);return r(hu(e)),()=>{r(pu(e))}}},[t,n,r,s]),null}var DC,OC=()=>{};function RC(e){var{legendPayload:t}=e,n=Ku(),r=$u(Zh);return(0,i.useEffect)(()=>"centric"!==r&&"radial"!==r?OC:(n(uN(t)),()=>{n(hN(t))}),[n,r,t]),null}var IC=null!==(DC=s["useId".toString()])&&void 0!==DC?DC:()=>{var[e]=i.useState(()=>Jo("uid-"));return e};var LC=(0,i.createContext)(void 0),FC=e=>{var{id:t,type:n,children:r}=e,s=function(e,t){var n=IC();return t||(e?"".concat(e,"-").concat(n):n)}("recharts-".concat(n),t);return i.createElement(LC.Provider,{value:s},r(s))};function BC(e){var t=Ku();return(0,i.useEffect)(()=>(t(Kj(e)),()=>{t(Yj(e))}),[t,e]),null}var zC=n(356),WC=n.n(zC),UC=["labelRef"];function VC(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function HC(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?VC(Object(n),!0).forEach(function(t){qC(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):VC(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function qC(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function GC(){return GC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GC.apply(null,arguments)}var KC=(0,i.createContext)(null),YC=()=>{var e=(0,i.useContext)(KC),t=Xh();return e||t},XC=(0,i.createContext)(null),JC=()=>{var e=(0,i.useContext)(XC),t=$u(hx);return e||t},$C=e=>null!=e&&"function"===typeof e,QC=(e,t,n,r,s)=>{var a,o,{offset:l,className:c}=e,{cx:d,cy:u,innerRadius:h,outerRadius:p,startAngle:m,endAngle:f,clockWise:g}=s,v=(h+p)/2,y=((e,t)=>Ho(t-e)*Math.min(Math.abs(t-e),360))(m,f),x=y>=0?1:-1;switch(t){case"insideStart":a=m+x*l,o=g;break;case"insideEnd":a=f-x*l,o=!g;break;case"end":a=f+x*l,o=g;break;default:throw new Error("Unsupported position ".concat(t))}o=y<=0?o:!o;var b=ph(d,u,v,a),w=ph(d,u,v,a+359*(o?1:-1)),j="M".concat(b.x,",").concat(b.y,"\n    A").concat(v,",").concat(v,",0,1,").concat(o?0:1,",\n    ").concat(w.x,",").concat(w.y),N=el(e.id)?Jo("recharts-radial-line-"):e.id;return i.createElement("text",GC({},r,{dominantBaseline:"central",className:Fo("recharts-radial-bar-label",c)}),i.createElement("defs",null,i.createElement("path",{id:N,d:j})),i.createElement("textPath",{xlinkHref:"#".concat(N)},n))},ZC=e=>"cx"in e&&Ko(e.cx),eE={offset:5};function tE(e){var t=Vk(e,eE),{viewBox:n,position:r,value:s,children:a,content:o,className:l="",textBreakAll:c,labelRef:d}=t,u=JC(),h=YC(),p=n||("center"===r?h:null!==u&&void 0!==u?u:h);if(!p||el(s)&&el(a)&&!(0,i.isValidElement)(o)&&"function"!==typeof o)return null;var m,f=HC(HC({},t),{},{viewBox:p});if((0,i.isValidElement)(o)){var{labelRef:g}=f,v=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(f,UC);return(0,i.cloneElement)(o,v)}if("function"===typeof o){if(m=(0,i.createElement)(o,f),(0,i.isValidElement)(m))return m}else m=(e=>{var{value:t,formatter:n}=e,r=el(e.children)?t:e.children;return"function"===typeof n?n(r):r})(t);var y=ZC(p),x=ok(t,!0);if(y&&("insideStart"===r||"insideEnd"===r||"end"===r))return QC(t,r,m,x,p);var b=y?((e,t,n)=>{var{cx:r,cy:i,innerRadius:s,outerRadius:a,startAngle:o,endAngle:l}=e,c=(o+l)/2;if("outside"===n){var{x:d,y:u}=ph(r,i,a+t,c);return{x:d,y:u,textAnchor:d>=r?"start":"end",verticalAnchor:"middle"}}if("center"===n)return{x:r,y:i,textAnchor:"middle",verticalAnchor:"middle"};if("centerTop"===n)return{x:r,y:i,textAnchor:"middle",verticalAnchor:"start"};if("centerBottom"===n)return{x:r,y:i,textAnchor:"middle",verticalAnchor:"end"};var h=(s+a)/2,{x:p,y:m}=ph(r,i,h,c);return{x:p,y:m,textAnchor:"middle",verticalAnchor:"middle"}})(p,t.offset,t.position):((e,t)=>{var n,{parentViewBox:r,offset:i,position:s}=e;null==r||ZC(r)||(n=r);var{x:a,y:o,width:l,height:c}=t,d=c>=0?1:-1,u=d*i,h=d>0?"end":"start",p=d>0?"start":"end",m=l>=0?1:-1,f=m*i,g=m>0?"end":"start",v=m>0?"start":"end";if("top"===s)return HC(HC({},{x:a+l/2,y:o-d*i,textAnchor:"middle",verticalAnchor:h}),n?{height:Math.max(o-n.y,0),width:l}:{});if("bottom"===s)return HC(HC({},{x:a+l/2,y:o+c+u,textAnchor:"middle",verticalAnchor:p}),n?{height:Math.max(n.y+n.height-(o+c),0),width:l}:{});if("left"===s){var y={x:a-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"};return HC(HC({},y),n?{width:Math.max(y.x-n.x,0),height:c}:{})}if("right"===s){var x={x:a+l+f,y:o+c/2,textAnchor:v,verticalAnchor:"middle"};return HC(HC({},x),n?{width:Math.max(n.x+n.width-x.x,0),height:c}:{})}var b=n?{width:l,height:c}:{};return"insideLeft"===s?HC({x:a+f,y:o+c/2,textAnchor:v,verticalAnchor:"middle"},b):"insideRight"===s?HC({x:a+l-f,y:o+c/2,textAnchor:g,verticalAnchor:"middle"},b):"insideTop"===s?HC({x:a+l/2,y:o+u,textAnchor:"middle",verticalAnchor:p},b):"insideBottom"===s?HC({x:a+l/2,y:o+c-u,textAnchor:"middle",verticalAnchor:h},b):"insideTopLeft"===s?HC({x:a+f,y:o+u,textAnchor:v,verticalAnchor:p},b):"insideTopRight"===s?HC({x:a+l-f,y:o+u,textAnchor:g,verticalAnchor:p},b):"insideBottomLeft"===s?HC({x:a+f,y:o+c-u,textAnchor:v,verticalAnchor:h},b):"insideBottomRight"===s?HC({x:a+l-f,y:o+c-u,textAnchor:g,verticalAnchor:h},b):s&&"object"===typeof s&&(Ko(s.x)||Go(s.x))&&(Ko(s.y)||Go(s.y))?HC({x:a+$o(s.x,l),y:o+$o(s.y,c),textAnchor:"end",verticalAnchor:"end"},b):HC({x:a+l/2,y:o+c/2,textAnchor:"middle",verticalAnchor:"middle"},b)})(t,p);return i.createElement(QS,GC({ref:d,className:Fo("recharts-label",l)},x,b,{breakAll:c}),m)}tE.displayName="Label";var nE=["valueAccessor"],rE=["dataKey","clockWise","id","textBreakAll"];function iE(){return iE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},iE.apply(null,arguments)}function sE(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}var aE=e=>Array.isArray(e.value)?WC()(e.value):e.value,oE=(0,i.createContext)(void 0),lE=(oE.Provider,(0,i.createContext)(void 0)),cE=lE.Provider;function dE(e){var{valueAccessor:t=aE}=e,n=sE(e,nE),{dataKey:r,clockWise:s,id:a,textBreakAll:o}=n,l=sE(n,rE),c=(0,i.useContext)(oE),d=(0,i.useContext)(lE),u=c||d;return u&&u.length?i.createElement(DA,{className:"recharts-label-list"},u.map((e,s)=>{var c,d=el(r)?t(e,s):jh(e&&e.payload,r),u=el(a)?{}:{id:"".concat(a,"-").concat(s)};return i.createElement(tE,iE({},ok(e,!0),l,u,{fill:null!==(c=n.fill)&&void 0!==c?c:e.fill,parentViewBox:e.parentViewBox,value:d,textBreakAll:o,viewBox:e.viewBox,key:"label-".concat(s),index:s}))})):null}function uE(e){var{label:t}=e;return t?!0===t?i.createElement(dE,{key:"labelList-implicit"}):i.isValidElement(t)||$C(t)?i.createElement(dE,{key:"labelList-implicit",content:t}):"object"===typeof t?i.createElement(dE,iE({key:"labelList-implicit"},t,{type:String(t.type)})):null:null}dE.displayName="LabelList";var hE=["onMouseEnter","onClick","onMouseLeave"],pE=["id"],mE=["id"];function fE(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function gE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function vE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gE(Object(n),!0).forEach(function(t){yE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function yE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xE(){return xE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xE.apply(null,arguments)}function bE(e){var t=(0,i.useMemo)(()=>ak(e.children,ZS),[e.children]),n=$u(n=>fA(n,e.id,t));return null==n?null:i.createElement(RC,{legendPayload:n})}function wE(e){var{dataKey:t,nameKey:n,sectors:r,stroke:i,strokeWidth:s,fill:a,name:o,hide:l,tooltipType:c}=e;return{dataDefinedOnItem:r.map(e=>e.tooltipPayload),positions:r.map(e=>e.tooltipPosition),settings:{stroke:i,strokeWidth:s,fill:a,dataKey:t,nameKey:n,name:Th(o,t),hide:l,type:c,color:a,unit:""}}}var jE=(e,t,n)=>{var{top:r,left:i,width:s,height:a}=t,o=mh(s,a),l=i+$o(e.cx,s,s/2),c=r+$o(e.cy,a,a/2),d=$o(e.innerRadius,o,0),u=((e,t,n)=>$o("function"===typeof t?t(e):t,n,.8*n))(n,e.outerRadius,o);return{cx:l,cy:c,innerRadius:d,outerRadius:u,maxRadius:e.maxRadius||Math.sqrt(s*s+a*a)/2}},NE=(e,t)=>Ho(t-e)*Math.min(Math.abs(t-e),360);function kE(e){var{sectors:t,props:n,showLabels:r}=e,{label:s,labelLine:a,dataKey:o}=n;if(!r||!s||!t)return null;var l=tk(n),c=ok(s,!1),d=ok(a,!1),u="object"===typeof s&&"offsetRadius"in s&&"number"===typeof s.offsetRadius&&s.offsetRadius||20,h=t.map((e,t)=>{var n,r,h=(e.startAngle+e.endAngle)/2,p=ph(e.cx,e.cy,e.outerRadius+u,h),m=vE(vE(vE(vE({},l),e),{},{stroke:"none"},c),{},{index:t,textAnchor:(n=p.x,r=e.cx,n>r?"start":n<r?"end":"middle")},p),f=vE(vE(vE(vE({},l),e),{},{fill:"none",stroke:e.fill},d),{},{index:t,points:[ph(e.cx,e.cy,e.outerRadius,h),p],key:"line"});return i.createElement(DA,{key:"label-".concat(e.startAngle,"-").concat(e.endAngle,"-").concat(e.midAngle,"-").concat(t)},a&&((e,t)=>{if(i.isValidElement(e))return i.cloneElement(e,t);if("function"===typeof e)return e(t);var n=Fo("recharts-pie-label-line","boolean"!==typeof e?e.className:"");return i.createElement(xS,xE({},t,{type:"linear",className:n}))})(a,f),((e,t,n)=>{if(i.isValidElement(e))return i.cloneElement(e,t);var r=n;if("function"===typeof e&&(r=e(t),i.isValidElement(r)))return r;var s=Fo("recharts-pie-label-text",function(e){return e&&"object"===typeof e&&"className"in e&&"string"===typeof e.className?e.className:""}(e));return i.createElement(QS,xE({},t,{alignmentBaseline:"middle",className:s}),r)})(s,m,jh(e,o)))});return i.createElement(DA,{className:"recharts-pie-labels"},h)}function AE(e){var{sectors:t,props:n,showLabels:r}=e,{label:s}=n;return"object"===typeof s&&null!=s&&"position"in s?i.createElement(uE,{label:n.label}):i.createElement(kE,{sectors:t,props:n,showLabels:r})}function SE(e){var{sectors:t,activeShape:n,inactiveShape:r,allOtherPieProps:s}=e,a=$u(ij),{onMouseEnter:o,onClick:l,onMouseLeave:c}=s,d=fE(s,hE),u=((e,t)=>{var n=Ku();return(r,i)=>s=>{null===e||void 0===e||e(r,i,s),n(fu({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}})(o,s.dataKey),h=(e=>{var t=Ku();return(n,r)=>i=>{null===e||void 0===e||e(n,r,i),t(gu())}})(c),p=((e,t)=>{var n=Ku();return(r,i)=>s=>{null===e||void 0===e||e(r,i,s),n(yu({activeIndex:String(i),activeDataKey:t,activeCoordinate:r.tooltipPosition}))}})(l,s.dataKey);return null==t||0===t.length?null:i.createElement(i.Fragment,null,t.map((e,o)=>{if(0===(null===e||void 0===e?void 0:e.startAngle)&&0===(null===e||void 0===e?void 0:e.endAngle)&&1!==t.length)return null;var l=n&&String(o)===a,c=l?n:a?r:null,m=vE(vE({},e),{},{stroke:e.stroke,tabIndex:-1,[Fh]:o,[Bh]:s.dataKey});return i.createElement(DA,xE({tabIndex:-1,className:"recharts-pie-sector"},QN(d,e,o),{onMouseEnter:u(e,o),onMouseLeave:h(e,o),onClick:p(e,o),key:"sector-".concat(null===e||void 0===e?void 0:e.startAngle,"-").concat(null===e||void 0===e?void 0:e.endAngle,"-").concat(e.midAngle,"-").concat(o)}),i.createElement(TC,xE({option:c,isActive:l,shapeType:"sector"},m)))}))}function _E(e){var{showLabels:t,sectors:n,children:r}=e,s=(0,i.useMemo)(()=>t&&n?n.map(e=>({value:e.value,payload:e.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:e.cx,cy:e.cy,innerRadius:e.innerRadius,outerRadius:e.outerRadius,startAngle:e.startAngle,endAngle:e.endAngle,clockWise:!1},fill:e.fill})):[],[n,t]);return i.createElement(cE,{value:t?s:void 0},r)}function CE(e){var{props:t,previousSectorsRef:n}=e,{sectors:r,isAnimationActive:s,animationBegin:a,animationDuration:o,animationEasing:l,activeShape:c,inactiveShape:d,onAnimationStart:u,onAnimationEnd:h}=t,p=E_(t,"recharts-pie-"),m=n.current,[f,g]=(0,i.useState)(!1),v=(0,i.useCallback)(()=>{"function"===typeof h&&h(),g(!1)},[h]),y=(0,i.useCallback)(()=>{"function"===typeof u&&u(),g(!0)},[u]);return i.createElement(_E,{showLabels:!f,sectors:r},i.createElement(C_,{animationId:p,begin:a,duration:o,isActive:s,easing:l,onAnimationStart:y,onAnimationEnd:v,key:p},e=>{var s=[],a=r&&r[0],o=null===a||void 0===a?void 0:a.startAngle;return null===r||void 0===r||r.forEach((t,n)=>{var r=m&&m[n],i=n>0?Vo()(t,"paddingAngle",0):0;if(r){var a=Zo(r.endAngle-r.startAngle,t.endAngle-t.startAngle,e),l=vE(vE({},t),{},{startAngle:o+i,endAngle:o+a+i});s.push(l),o=l.endAngle}else{var{endAngle:c,startAngle:d}=t,u=Zo(0,c-d,e),h=vE(vE({},t),{},{startAngle:o+i,endAngle:o+u+i});s.push(h),o=h.endAngle}}),n.current=s,i.createElement(DA,null,i.createElement(SE,{sectors:s,activeShape:c,inactiveShape:d,allOtherPieProps:t}))}),i.createElement(AE,{showLabels:!f,sectors:r,props:t}),t.children)}var EE={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:!bS,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff"};function PE(e){var{id:t}=e,n=fE(e,pE),{hide:r,className:s,rootTabIndex:a}=e,o=(0,i.useMemo)(()=>ak(e.children,ZS),[e.children]),l=$u(e=>gA(e,t,o)),c=(0,i.useRef)(null),d=Fo("recharts-pie",s);return r||null==l?(c.current=null,i.createElement(DA,{tabIndex:a,className:d})):i.createElement(i.Fragment,null,i.createElement(MC,{fn:wE,args:vE(vE({},e),{},{sectors:l})}),i.createElement(DA,{tabIndex:a,className:d},i.createElement(CE,{props:vE(vE({},n),{},{sectors:l}),previousSectorsRef:c})))}function TE(e){var t=Vk(e,EE),{id:n}=t,r=fE(t,mE),s=tk(r);return i.createElement(FC,{id:n,type:"pie"},e=>i.createElement(i.Fragment,null,i.createElement(BC,{type:"pie",id:e,data:r.data,dataKey:r.dataKey,hide:r.hide,angleAxisId:0,radiusAxisId:0,name:r.name,nameKey:r.nameKey,tooltipType:r.tooltipType,legendType:r.legendType,fill:r.fill,cx:r.cx,cy:r.cy,startAngle:r.startAngle,endAngle:r.endAngle,paddingAngle:r.paddingAngle,minAngle:r.minAngle,innerRadius:r.innerRadius,outerRadius:r.outerRadius,cornerRadius:r.cornerRadius,presentationProps:s}),i.createElement(bE,xE({},r,{id:e})),i.createElement(PE,xE({},r,{id:e}))))}function ME(){return ME=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ME.apply(null,arguments)}function DE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function OE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DE(Object(n),!0).forEach(function(t){RE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function RE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function IE(e){return Array.isArray(e)&&Yo(e[0])&&Yo(e[1])?e.join(" ~ "):e}TE.displayName="Pie";var LE=e=>{var{separator:t=" : ",contentStyle:n={},itemStyle:r={},labelStyle:s={},payload:a,formatter:o,itemSorter:l,wrapperClassName:c,labelClassName:d,label:u,labelFormatter:h,accessibilityLayer:p=!1}=e,m=OE({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},n),f=OE({margin:0},s),g=!el(u),v=g?u:"",y=Fo("recharts-default-tooltip",c),x=Fo("recharts-tooltip-label",d);g&&h&&void 0!==a&&null!==a&&(v=h(u,a));var b=p?{role:"status","aria-live":"assertive"}:{};return i.createElement("div",ME({className:y,style:m},b),i.createElement("p",{className:x,style:f},i.isValidElement(v)?v:"".concat(v)),(()=>{if(a&&a.length){var e=(l?Zu()(a,l):a).map((e,n)=>{if("none"===e.type)return null;var s=e.formatter||o||IE,{value:l,name:c}=e,d=l,u=c;if(s){var h=s(l,c,e,n,a);if(Array.isArray(h))[d,u]=h;else{if(null==h)return null;d=h}}var p=OE({display:"block",paddingTop:4,paddingBottom:4,color:e.color||"#000"},r);return i.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(n),style:p},Yo(u)?i.createElement("span",{className:"recharts-tooltip-item-name"},u):null,Yo(u)?i.createElement("span",{className:"recharts-tooltip-item-separator"},t):null,i.createElement("span",{className:"recharts-tooltip-item-value"},d),i.createElement("span",{className:"recharts-tooltip-item-unit"},e.unit||""))});return i.createElement("ul",{className:"recharts-tooltip-item-list",style:{padding:0,margin:0}},e)}return null})())},FE="recharts-tooltip-wrapper",BE={visibility:"hidden"};function zE(e){var{coordinate:t,translateX:n,translateY:r}=e;return Fo(FE,{["".concat(FE,"-right")]:Ko(n)&&t&&Ko(t.x)&&n>=t.x,["".concat(FE,"-left")]:Ko(n)&&t&&Ko(t.x)&&n<t.x,["".concat(FE,"-bottom")]:Ko(r)&&t&&Ko(t.y)&&r>=t.y,["".concat(FE,"-top")]:Ko(r)&&t&&Ko(t.y)&&r<t.y})}function WE(e){var{allowEscapeViewBox:t,coordinate:n,key:r,offsetTopLeft:i,position:s,reverseDirection:a,tooltipDimension:o,viewBox:l,viewBoxDimension:c}=e;if(s&&Ko(s[r]))return s[r];var d=n[r]-o-(i>0?i:0),u=n[r]+i;if(t[r])return a[r]?d:u;var h=l[r];return null==h?0:a[r]?d<h?Math.max(u,h):Math.max(d,h):null==c?0:u+o>h+c?Math.max(d,h):Math.max(u,h)}function UE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function VE(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?UE(Object(n),!0).forEach(function(t){HE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):UE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function HE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class qE extends i.PureComponent{constructor(){super(...arguments),HE(this,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0}}),HE(this,"handleKeyDown",e=>{var t,n,r,i;"Escape"===e.key&&this.setState({dismissed:!0,dismissedAtCoordinate:{x:null!==(t=null===(n=this.props.coordinate)||void 0===n?void 0:n.x)&&void 0!==t?t:0,y:null!==(r=null===(i=this.props.coordinate)||void 0===i?void 0:i.y)&&void 0!==r?r:0}})})}componentDidMount(){document.addEventListener("keydown",this.handleKeyDown)}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeyDown)}componentDidUpdate(){var e,t;this.state.dismissed&&((null===(e=this.props.coordinate)||void 0===e?void 0:e.x)===this.state.dismissedAtCoordinate.x&&(null===(t=this.props.coordinate)||void 0===t?void 0:t.y)===this.state.dismissedAtCoordinate.y||(this.state.dismissed=!1))}render(){var{active:e,allowEscapeViewBox:t,animationDuration:n,animationEasing:r,children:s,coordinate:a,hasPayload:o,isAnimationActive:l,offset:c,position:d,reverseDirection:u,useTranslate3d:h,viewBox:p,wrapperStyle:m,lastBoundingBox:f,innerRef:g,hasPortalFromProps:v}=this.props,{cssClasses:y,cssProperties:x}=function(e){var t,n,r,{allowEscapeViewBox:i,coordinate:s,offsetTopLeft:a,position:o,reverseDirection:l,tooltipBox:c,useTranslate3d:d,viewBox:u}=e;return t=c.height>0&&c.width>0&&s?function(e){var{translateX:t,translateY:n,useTranslate3d:r}=e;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}({translateX:n=WE({allowEscapeViewBox:i,coordinate:s,key:"x",offsetTopLeft:a,position:o,reverseDirection:l,tooltipDimension:c.width,viewBox:u,viewBoxDimension:u.width}),translateY:r=WE({allowEscapeViewBox:i,coordinate:s,key:"y",offsetTopLeft:a,position:o,reverseDirection:l,tooltipDimension:c.height,viewBox:u,viewBoxDimension:u.height}),useTranslate3d:d}):BE,{cssProperties:t,cssClasses:zE({translateX:n,translateY:r,coordinate:s})}}({allowEscapeViewBox:t,coordinate:a,offsetTopLeft:c,position:d,reverseDirection:u,tooltipBox:{height:f.height,width:f.width},useTranslate3d:h,viewBox:p}),b=v?{}:VE(VE({transition:l&&e?"transform ".concat(n,"ms ").concat(r):void 0},x),{},{pointerEvents:"none",visibility:!this.state.dismissed&&e&&o?"visible":"hidden",position:"absolute",top:0,left:0}),w=VE(VE({},b),{},{visibility:!this.state.dismissed&&e&&o?"visible":"hidden"},m);return i.createElement("div",{xmlns:"http://www.w3.org/1999/xhtml",tabIndex:-1,className:y,style:w,ref:g},s)}}var GE=n(4332),KE=n.n(GE);function YE(e,t,n){return!0===t?KE()(e,n):"function"===typeof t?KE()(e,t):e}function XE(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],[t,n]=(0,i.useState)({height:0,left:0,top:0,width:0}),r=(0,i.useCallback)(e=>{if(null!=e){var r=e.getBoundingClientRect(),i={height:r.height,left:r.left,top:r.top,width:r.width};(Math.abs(i.height-t.height)>1||Math.abs(i.left-t.left)>1||Math.abs(i.top-t.top)>1||Math.abs(i.width-t.width)>1)&&n({height:i.height,left:i.left,top:i.top,width:i.width})}},[t.width,t.height,t.top,t.left,...e]);return[t,r]}var JE=["x","y","top","left","width","height","className"];function $E(){return $E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$E.apply(null,arguments)}function QE(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function ZE(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eP=(e,t,n,r,i,s)=>"M".concat(e,",").concat(i,"v").concat(r,"M").concat(s,",").concat(t,"h").concat(n),tP=e=>{var{x:t=0,y:n=0,top:r=0,left:s=0,width:a=0,height:o=0,className:l}=e,c=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,JE),d=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?QE(Object(n),!0).forEach(function(t){ZE(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):QE(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({x:t,y:n,top:r,left:s,width:a,height:o},c);return Ko(t)&&Ko(n)&&Ko(a)&&Ko(o)&&Ko(r)&&Ko(s)?i.createElement("path",$E({},ok(d,!0),{className:Fo("recharts-cross",l),d:eP(t,n,a,o,r,s)})):null};function nP(e){var{cx:t,cy:n,radius:r,startAngle:i,endAngle:s}=e;return{points:[ph(t,n,r,i),ph(t,n,r,s)],cx:t,cy:n,radius:r,startAngle:i,endAngle:s}}function rP(e,t,n){var r,i,s,a;if("horizontal"===e)s=r=t.x,i=n.top,a=n.top+n.height;else if("vertical"===e)a=i=t.y,r=n.left,s=n.left+n.width;else if(null!=t.cx&&null!=t.cy){if("centric"!==e)return nP(t);var{cx:o,cy:l,innerRadius:c,outerRadius:d,angle:u}=t,h=ph(o,l,c,u),p=ph(o,l,d,u);r=h.x,i=h.y,s=p.x,a=p.y}return[{x:r,y:i},{x:s,y:a}]}function iP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function sP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?iP(Object(n),!0).forEach(function(t){aP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):iP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function aP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oP=()=>{var e=$u(yx),t=$u(Zw),n=$u(Jw);return((e,t,n)=>{if(e&&e.scale&&e.scale.bandwidth){var r=e.scale.bandwidth();if(!n||r>0)return r}if(e&&t&&t.length>=2){for(var i=Zu()(t,e=>e.coordinate),s=1/0,a=1,o=i.length;a<o;a++){var l=i[a],c=i[a-1];s=Math.min((l.coordinate||0)-(c.coordinate||0),s)}return s===1/0?0:s}return n?void 0:0})(sP(sP({},e),{},{scale:n}),t)};function lP(){return lP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lP.apply(null,arguments)}function cP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function dP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?cP(Object(n),!0).forEach(function(t){uP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function uP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hP(e){var t,n,{coordinate:r,payload:s,index:a,offset:o,tooltipAxisBandSize:l,layout:c,cursor:d,tooltipEventType:u,chartName:h}=e,p=r,m=s,f=a;if(!d||!p||"ScatterChart"!==h&&"axis"!==u)return null;if("ScatterChart"===h)t=p,n=tP;else if("BarChart"===h)t=function(e,t,n,r){var i=r/2;return{stroke:"none",fill:"#ccc",x:"horizontal"===e?t.x-i:n.left+.5,y:"horizontal"===e?n.top+.5:t.y-i,width:"horizontal"===e?r:n.width-1,height:"horizontal"===e?n.height-1:r}}(c,p,o,l),n=I_;else if("radial"===c){var{cx:g,cy:v,radius:y,startAngle:x,endAngle:b}=nP(p);t={cx:g,cy:v,startAngle:x,endAngle:b,innerRadius:y,outerRadius:y},n=Y_}else t={points:rP(c,p,o)},n=xS;var w="object"===typeof d&&"className"in d?d.className:void 0,j=dP(dP(dP(dP({stroke:"#ccc",pointerEvents:"none"},o),t),ok(d,!1)),{},{payload:m,payloadIndex:f,className:Fo("recharts-tooltip-cursor",w)});return(0,i.isValidElement)(d)?(0,i.cloneElement)(d,j):(0,i.createElement)(n,j)}function pP(e){var t=oP(),n=(()=>{var e;return null!==(e=$u(Vh))&&void 0!==e?e:Jh})(),r=ep(),s=$u(zy);return i.createElement(hP,lP({},e,{coordinate:e.coordinate,index:e.index,payload:e.payload,offset:n,layout:r,tooltipAxisBandSize:t,chartName:s}))}function mP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function fP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?mP(Object(n),!0).forEach(function(t){gP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function gP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vP(e){return e.dataKey}var yP=[],xP={allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",axisId:0,contentStyle:{},cursor:!0,filterNull:!0,isAnimationActive:!bS,itemSorter:"name",itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,wrapperStyle:{}};function bP(e){var t=Vk(e,xP),{active:n,allowEscapeViewBox:r,animationDuration:s,animationEasing:a,content:o,filterNull:l,isAnimationActive:c,offset:d,payloadUniqBy:u,position:h,reverseDirection:p,useTranslate3d:m,wrapperStyle:f,cursor:g,shared:v,trigger:y,defaultIndex:x,portal:b,axisId:w}=t,j=Ku(),N="number"===typeof x?String(x):x;(0,i.useEffect)(()=>{j(mu({shared:v,trigger:y,axisId:w,active:n,defaultIndex:N}))},[j,v,y,w,n,N]);var k=Xh(),A=GN(),S=function(e){return $u(t=>ow(t,e))}(v),{activeIndex:_,isActive:C}=$u(e=>Nj(e,S,y,N)),E=$u(e=>jj(e,S,y,N)),P=$u(e=>wj(e,S,y,N)),T=$u(e=>bj(e,S,y,N)),M=E,D=(0,i.useContext)(Ek),O=null!==n&&void 0!==n?n:C,[R,I]=XE([M,O]),L="axis"===S?P:void 0;Ck(S,y,T,L,_,O);var F=null!==b&&void 0!==b?b:D;if(null==F)return null;var B=null!==M&&void 0!==M?M:yP;O||(B=yP),l&&B.length&&(B=YE(M.filter(e=>null!=e.value&&(!0!==e.hide||t.includeHidden)),u,vP));var z=B.length>0,W=i.createElement(qE,{allowEscapeViewBox:r,animationDuration:s,animationEasing:a,isAnimationActive:c,active:O,coordinate:T,hasPayload:z,offset:d,position:h,reverseDirection:p,useTranslate3d:m,viewBox:k,wrapperStyle:f,lastBoundingBox:R,innerRef:I,hasPortalFromProps:Boolean(b)},function(e,t){return i.isValidElement(e)?i.cloneElement(e,t):"function"===typeof e?i.createElement(e,t):i.createElement(LE,t)}(o,fP(fP({},t),{},{payload:B,label:L,active:O,coordinate:T,accessibilityLayer:A})));return i.createElement(i.Fragment,null,(0,Mr.createPortal)(W,F),O&&i.createElement(pP,{cursor:g,tooltipEventType:S,coordinate:T,payload:M,index:_}))}function wP(){return wP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wP.apply(null,arguments)}function jP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function NP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var kP=32;class AP extends i.PureComponent{renderIcon(e,t){var{inactiveColor:n}=this.props,r=16,s=kP/6,a=kP/3,o=e.inactive?n:e.color,l=null!==t&&void 0!==t?t:e.type;if("none"===l)return null;if("plainline"===l)return i.createElement("line",{strokeWidth:4,fill:"none",stroke:o,strokeDasharray:e.payload.strokeDasharray,x1:0,y1:r,x2:kP,y2:r,className:"recharts-legend-icon"});if("line"===l)return i.createElement("path",{strokeWidth:4,fill:"none",stroke:o,d:"M0,".concat(r,"h").concat(a,"\n            A").concat(s,",").concat(s,",0,1,1,").concat(2*a,",").concat(r,"\n            H").concat(kP,"M").concat(2*a,",").concat(r,"\n            A").concat(s,",").concat(s,",0,1,1,").concat(a,",").concat(r),className:"recharts-legend-icon"});if("rect"===l)return i.createElement("path",{stroke:"none",fill:o,d:"M0,".concat(4,"h").concat(kP,"v").concat(24,"h").concat(-32,"z"),className:"recharts-legend-icon"});if(i.isValidElement(e.legendIcon)){var c=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jP(Object(n),!0).forEach(function(t){NP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e);return delete c.legendIcon,i.cloneElement(e.legendIcon,c)}return i.createElement(kC,{fill:o,cx:r,cy:r,size:kP,sizeType:"diameter",type:l})}renderItems(){var{payload:e,iconSize:t,layout:n,formatter:r,inactiveColor:s,iconType:a}=this.props,o={x:0,y:0,width:kP,height:kP},l={display:"horizontal"===n?"inline-block":"block",marginRight:10},c={display:"inline-block",verticalAlign:"middle",marginRight:4};return e.map((e,n)=>{var d=e.formatter||r,u=Fo({"recharts-legend-item":!0,["legend-item-".concat(n)]:!0,inactive:e.inactive});if("none"===e.type)return null;var h=e.inactive?s:e.color,p=d?d(e.value,e,n):e.value;return i.createElement("li",wP({className:u,style:l,key:"legend-item-".concat(n)},QN(this.props,e,n)),i.createElement(dk,{width:t,height:t,viewBox:o,style:c,"aria-label":"".concat(p," legend icon")},this.renderIcon(e,a)),i.createElement("span",{className:"recharts-legend-item-text",style:{color:h}},p))})}render(){var{payload:e,layout:t,align:n}=this.props;if(!e||!e.length)return null;var r={padding:0,margin:0,textAlign:"horizontal"===t?n:"left"};return i.createElement("ul",{className:"recharts-default-legend",style:r},this.renderItems())}}NP(AP,"displayName","Legend"),NP(AP,"defaultProps",{align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"});var SP=["contextPayload"];function _P(){return _P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_P.apply(null,arguments)}function CP(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function EP(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CP(Object(n),!0).forEach(function(t){PP(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CP(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function PP(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TP(e){return e.value}function MP(e){var{contextPayload:t}=e,n=function(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}(e,SP),r=YE(t,e.payloadUniqBy,TP),s=EP(EP({},n),{},{payload:r});return i.isValidElement(e.content)?i.cloneElement(e.content,s):"function"===typeof e.content?i.createElement(e.content,s):i.createElement(AP,s)}function DP(e){var t=Ku();return(0,i.useEffect)(()=>{t(dN(e))},[t,e]),null}function OP(e){var t=Ku();return(0,i.useEffect)(()=>(t(cN(e)),()=>{t(cN({width:0,height:0}))}),[t,e]),null}function RP(e){var t=$u(th),n=(0,i.useContext)(Pk),r=$u(e=>e.layout.margin),{width:s,height:a,wrapperStyle:o,portal:l}=e,[c,d]=XE([t]),u=$h(),h=Qh();if(null==u||null==h)return null;var p=u-(r.left||0)-(r.right||0),m=IP.getWidthOrHeight(e.layout,a,s,p),f=l?o:EP(EP({position:"absolute",width:(null===m||void 0===m?void 0:m.width)||s||"auto",height:(null===m||void 0===m?void 0:m.height)||a||"auto"},function(e,t,n,r,i,s){var a,o,{layout:l,align:c,verticalAlign:d}=t;return e&&(void 0!==e.left&&null!==e.left||void 0!==e.right&&null!==e.right)||(a="center"===c&&"vertical"===l?{left:((r||0)-s.width)/2}:"right"===c?{right:n&&n.right||0}:{left:n&&n.left||0}),e&&(void 0!==e.top&&null!==e.top||void 0!==e.bottom&&null!==e.bottom)||(o="middle"===d?{top:((i||0)-s.height)/2}:"bottom"===d?{bottom:n&&n.bottom||0}:{top:n&&n.top||0}),EP(EP({},a),o)}(o,e,r,u,h,c)),o),g=null!==l&&void 0!==l?l:n;if(null==g)return null;var v=i.createElement("div",{className:"recharts-legend-wrapper",style:f,ref:d},i.createElement(DP,{layout:e.layout,align:e.align,verticalAlign:e.verticalAlign,itemSorter:e.itemSorter}),i.createElement(OP,{width:c.width,height:c.height}),i.createElement(MP,_P({},e,m,{margin:r,chartWidth:u,chartHeight:h,contextPayload:t})));return(0,Mr.createPortal)(v,g)}class IP extends i.PureComponent{static getWidthOrHeight(e,t,n,r){return"vertical"===e&&Ko(t)?{height:t}:"horizontal"===e?{width:n||r}:null}render(){return i.createElement(RP,this.props)}}PP(IP,"displayName","Legend"),PP(IP,"defaultProps",{align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"});const LP=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),FP=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},BP=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var zP={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const WP=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],UP=(0,i.forwardRef)((e,t)=>{let{color:n="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:a,className:o="",children:l,iconNode:c}=e,d=ws(e,WP);return(0,i.createElement)("svg",(0,Ne.A)((0,Ne.A)((0,Ne.A)({ref:t},zP),{},{width:r,height:r,stroke:n,strokeWidth:a?24*Number(s)/Number(r):s,className:BP("lucide",o)},!l&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(d)&&{"aria-hidden":"true"}),d),[...c.map(e=>{let[t,n]=e;return(0,i.createElement)(t,n)}),...Array.isArray(l)?l:[l]])}),VP=["className"],HP=(e,t)=>{const n=(0,i.forwardRef)((n,r)=>{let{className:s}=n,a=ws(n,VP);return(0,i.createElement)(UP,(0,Ne.A)({ref:r,iconNode:t,className:BP("lucide-".concat(LP(FP(e))),"lucide-".concat(e),s)},a))});return n.displayName=FP(e),n},qP=HP("chart-pie",[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]]),GP=HP("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),KP=HP("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),YP=()=>{const[e,t]=(0,i.useState)([]),[r,s]=(0,i.useState)(!0),[a,o]=(0,i.useState)(null),l={paid:"#10b981",pending:"#f59e0b",overdue:"#ef4444",draft:"#6b7280",sent:"#3b82f6",cancelled:"#9ca3af"},c={paid:"Paid",pending:"Pending",overdue:"Overdue",draft:"Draft",sent:"Sent",cancelled:"Cancelled"},d=(0,i.useMemo)(()=>c,[]),u=(0,i.useCallback)(()=>Object.keys(d).map(e=>({name:d[e],value:0,status:e})),[d]),h=(0,i.useCallback)(async()=>{console.log("\ud83d\udd0d SimpleStatusDistributionChart: Starting to get status distribution data");try{s(!0),o(null);const e=localStorage.getItem("token")||"dev-mock-token";console.log("\ud83d\udd11 SimpleStatusDistributionChart: Using token:",e);const r=Do(),i=(await Promise.resolve().then(n.bind(n,9064))).default,a=(await i.get("/dashboard/unified-chart-data?month=".concat(r))).data;if(a.success&&a.data&&a.data.statusDistribution){const e=a.data.statusDistribution;let n=[];if(e.distribution&&Array.isArray(e.distribution))n=e.distribution.map(e=>({name:d[e.status]||e.status,value:e.count||0,status:e.status,percentage:e.percentage||"0.0"}));else if(Array.isArray(e))n=e.map(e=>({name:d[e.status]||e.status,value:e.count||0,status:e.status,percentage:e.percentage||"0.0"}));else if(e.statusCounts){const t=Object.values(e.statusCounts).reduce((e,t)=>e+t,0);n=Object.entries(e.statusCounts).map(e=>{let[n,r]=e;return{name:d[n]||n,value:r||0,status:n,percentage:t>0?(r/t*100).toFixed(1):"0.0"}})}else if(void 0!==e.paid||void 0!==e.pending){const t=Object.entries(e).filter(e=>{let[t]=e;return["paid","pending","overdue","draft","sent"].includes(t)}),r=t.reduce((e,t)=>{let[,n]=t;return e+(n||0)},0);n=t.map(e=>{let[t,n]=e;return{name:d[t]||t,value:n||0,status:t,percentage:r>0?(n/r*100).toFixed(1):"0.0"}})}0===n.length&&(n=u()),t(n)}else t(u())}catch(a){console.error("SimpleStatusDistributionChart: Failed to get data:",a),t(u()),o(null)}finally{s(!1)}},[d,u]);(0,i.useEffect)(()=>{h()},[]);const p=e=>{let{active:t,payload:n}=e;if(t&&n&&n.length){const e=n[0].payload;return(0,sn.jsxs)("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,sn.jsxs)("p",{className:"text-blue-600",children:["Quantity: ",e.value]}),(0,sn.jsxs)("p",{className:"text-green-600",children:["Percentage: ",e.percentage,"%"]})]})}return null},m=e=>{let{payload:t}=e;return(0,sn.jsx)("div",{className:"flex flex-wrap justify-center gap-4 mt-4",children:t.map((e,t)=>(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"w-3 h-3 rounded-full mr-2",style:{backgroundColor:e.color}}),(0,sn.jsxs)("span",{className:"text-sm text-gray-600",children:[e.value," (",e.payload.value,")"]})]},t))})};return r?(0,sn.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,sn.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,sn.jsx)(qP,{className:"w-5 h-5 mr-2 text-purple-500"}),"Invoice Status Distribution"]})}),(0,sn.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,sn.jsx)(GP,{className:"w-8 h-8 animate-spin text-purple-500"}),(0,sn.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading..."})]})]}):a?(0,sn.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,sn.jsx)(qP,{className:"w-5 h-5 mr-2 text-purple-500"}),"Invoice Status Distribution"]}),(0,sn.jsxs)("button",{onClick:h,className:"text-purple-600 hover:text-purple-800 text-sm flex items-center",children:[(0,sn.jsx)(GP,{className:"w-4 h-4 mr-1"}),"Retry"]})]}),(0,sn.jsxs)("div",{className:"flex items-center justify-center h-64 text-red-500",children:[(0,sn.jsx)(KP,{className:"w-8 h-8 mr-2"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"font-medium",children:"Data loading failed"}),(0,sn.jsx)("p",{className:"text-sm text-gray-600",children:a})]})]})]}):(0,sn.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,sn.jsx)(qP,{className:"w-5 h-5 mr-2 text-purple-500"}),"Invoice Status Distribution"]}),(0,sn.jsxs)("button",{onClick:h,className:"text-purple-600 hover:text-purple-800 text-sm flex items-center",children:[(0,sn.jsx)(GP,{className:"w-4 h-4 mr-1"}),"Refresh"]})]}),(0,sn.jsxs)("div",{className:"text-center mb-4",children:[(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.reduce((e,t)=>e+t.value,0)}),(0,sn.jsx)("p",{className:"text-sm text-gray-600",children:"Total Invoices"})]}),(0,sn.jsx)("div",{className:"h-64",children:(0,sn.jsx)(al,{width:"100%",height:"100%",children:(0,sn.jsxs)(Jk,{children:[(0,sn.jsx)(TE,{data:e,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:2,dataKey:"value",children:e.map((e,t)=>(0,sn.jsx)(ZS,{fill:l[e.status]||"#6b7280"},"cell-".concat(t)))}),(0,sn.jsx)(bP,{content:(0,sn.jsx)(p,{})}),(0,sn.jsx)(IP,{content:(0,sn.jsx)(m,{})})]})})}),(0,sn.jsx)("div",{className:"mt-4 text-sm text-gray-600",children:(0,sn.jsx)("p",{children:"Shows the quantity distribution of invoices in various statuses"})})]})};function XP(e){return e+.5|0}const JP=(e,t,n)=>Math.max(Math.min(e,n),t);function $P(e){return JP(XP(2.55*e),0,255)}function QP(e){return JP(XP(255*e),0,255)}function ZP(e){return JP(XP(e/2.55)/100,0,1)}function eT(e){return JP(XP(100*e),0,100)}const tT={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},nT=[..."0123456789ABCDEF"],rT=e=>nT[15&e],iT=e=>nT[(240&e)>>4]+nT[15&e],sT=e=>(240&e)>>4===(15&e);function aT(e){var t=(e=>sT(e.r)&&sT(e.g)&&sT(e.b)&&sT(e.a))(e)?rT:iT;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const oT=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function lT(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function cT(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function dT(e,t,n){const r=lT(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function uT(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),a=(i+s)/2;let o,l,c;return i!==s&&(c=i-s,l=a>.5?c/(2-i-s):c/(i+s),o=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),o=60*o+.5),[0|o,l||0,a]}function hT(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(QP)}function pT(e,t,n){return hT(lT,e,t,n)}function mT(e){return(e%360+360)%360}function fT(e){const t=oT.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?$P(+t[5]):QP(+t[5]));const i=mT(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return hT(dT,e,t,n)}(i,s,a):"hsv"===t[1]?function(e,t,n){return hT(cT,e,t,n)}(i,s,a):pT(i,s,a),{r:n[0],g:n[1],b:n[2],a:r}}const gT={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},vT={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let yT;function xT(e){yT||(yT=function(){const e={},t=Object.keys(vT),n=Object.keys(gT);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<n.length;i++)s=n[i],o=o.replace(s,gT[s]);s=parseInt(vT[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),yT.transparent=[0,0,0,0]);const t=yT[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const bT=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const wT=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,jT=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function NT(e,t,n){if(e){let r=uT(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=pT(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function kT(e,t){return e?Object.assign(t||{},e):e}function AT(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=QP(e[3]))):(t=kT(e,{r:0,g:0,b:0,a:1})).a=QP(t.a),t}function ST(e){return"r"===e.charAt(0)?function(e){const t=bT.exec(e);let n,r,i,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?$P(e):JP(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?$P(n):JP(n,0,255)),r=255&(t[4]?$P(r):JP(r,0,255)),i=255&(t[6]?$P(i):JP(i,0,255)),{r:n,g:r,b:i,a:s}}}(e):fT(e)}class _T{constructor(e){if(e instanceof _T)return e;const t=typeof e;let n;"object"===t?n=AT(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*tT[e[1]],g:255&17*tT[e[2]],b:255&17*tT[e[3]],a:5===n?17*tT[e[4]]:255}:7!==n&&9!==n||(t={r:tT[e[1]]<<4|tT[e[2]],g:tT[e[3]]<<4|tT[e[4]],b:tT[e[5]]<<4|tT[e[6]],a:9===n?tT[e[7]]<<4|tT[e[8]]:255})),t}(e)||xT(e)||ST(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=kT(this._rgb);return e&&(e.a=ZP(e.a)),e}set rgb(e){this._rgb=AT(e)}rgbString(){return this._valid?function(e){return e&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(ZP(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"))}(this._rgb):void 0}hexString(){return this._valid?aT(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=uT(e),n=t[0],r=eT(t[1]),i=eT(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(ZP(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const s=t===i?.5:t,a=2*s-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=jT(ZP(e.r)),i=jT(ZP(e.g)),s=jT(ZP(e.b));return{r:QP(wT(r+n*(jT(ZP(t.r))-r))),g:QP(wT(i+n*(jT(ZP(t.g))-i))),b:QP(wT(s+n*(jT(ZP(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new _T(this.rgb)}alpha(e){return this._rgb.a=QP(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=XP(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return NT(this._rgb,2,e),this}darken(e){return NT(this._rgb,2,-e),this}saturate(e){return NT(this._rgb,1,e),this}desaturate(e){return NT(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=uT(e);n[0]=mT(n[0]+t),n=pT(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function CT(){}const ET=(()=>{let e=0;return()=>e++})();function PT(e){return null===e||void 0===e}function TT(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function MT(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function DT(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function OT(e,t){return DT(e)?e:t}function RT(e,t){return"undefined"===typeof e?t:e}const IT=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function LT(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function FT(e,t,n,r){let i,s,a;if(TT(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(MT(e))for(a=Object.keys(e),s=a.length,i=0;i<s;i++)t.call(n,e[a[i]],a[i])}function BT(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function zT(e){if(TT(e))return e.map(zT);if(MT(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=zT(e[n[i]]);return t}return e}function WT(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function UT(e,t,n,r){if(!WT(e))return;const i=t[e],s=n[e];MT(i)&&MT(s)?VT(i,s,r):t[e]=zT(s)}function VT(e,t,n){const r=TT(t)?t:[t],i=r.length;if(!MT(e))return e;const s=(n=n||{}).merger||UT;let a;for(let o=0;o<i;++o){if(a=r[o],!MT(a))continue;const t=Object.keys(a);for(let r=0,i=t.length;r<i;++r)s(t[r],e,a,n)}return e}function HT(e,t){return VT(e,t,{merger:qT})}function qT(e,t,n){if(!WT(e))return;const r=t[e],i=n[e];MT(r)&&MT(i)?HT(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=zT(i))}const GT={"":e=>e,x:e=>e.x,y:e=>e.y};function KT(e,t){const n=GT[t]||(GT[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function YT(e){return e.charAt(0).toUpperCase()+e.slice(1)}const XT=e=>"undefined"!==typeof e,JT=e=>"function"===typeof e,$T=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const QT=Math.PI,ZT=2*QT,eM=ZT+QT,tM=Number.POSITIVE_INFINITY,nM=QT/180,rM=QT/2,iM=QT/4,sM=2*QT/3,aM=Math.log10,oM=Math.sign;function lM(e,t,n){return Math.abs(e-t)<n}function cM(e){const t=Math.round(e);e=lM(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(aM(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function dM(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function uM(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function hM(e){return e*(QT/180)}function pM(e){return e*(180/QT)}function mM(e){if(!DT(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function fM(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*QT&&(s+=ZT),{angle:s,distance:i}}function gM(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function vM(e,t){return(e-t+eM)%ZT-QT}function yM(e){return(e%ZT+ZT)%ZT}function xM(e,t,n,r){const i=yM(e),s=yM(t),a=yM(n),o=yM(s-i),l=yM(a-i),c=yM(i-s),d=yM(i-a);return i===s||i===a||r&&s===a||o>l&&c<d}function bM(e,t,n){return Math.max(t,Math.min(n,e))}function wM(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function jM(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const NM=(e,t,n,r)=>jM(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),kM=(e,t,n)=>jM(e,n,r=>e[r][t]>=n);const AM=["push","pop","shift","splice","unshift"];function SM(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(AM.forEach(t=>{delete e[t]}),delete e._chartjs)}function _M(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const CM="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function EM(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];n=s,r||(r=!0,CM.call(window,()=>{r=!1,e.apply(t,n)}))}}const PM=e=>"start"===e?"left":"end"===e?"right":"center",TM=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function MM(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,d=a.axis,{min:u,max:h,minDefined:p,maxDefined:m}=a.getUserBounds();if(p){if(i=Math.min(NM(l,d,u).lo,n?r:NM(t,d,a.getPixelForValue(u)).lo),c){const e=l.slice(0,i+1).reverse().findIndex(e=>!PT(e[o.axis]));i-=Math.max(0,e)}i=bM(i,0,r-1)}if(m){let e=Math.max(NM(l,a.axis,h,!0).hi+1,n?0:NM(t,d,a.getPixelForValue(h),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!PT(e[o.axis]));e+=Math.max(0,t)}s=bM(e,i,r)-i}else s=r-i}return{start:i,count:s}}function DM(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const OM=e=>0===e||1===e,RM=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*ZT/n),IM=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*ZT/n)+1,LM={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*rM),easeOutSine:e=>Math.sin(e*rM),easeInOutSine:e=>-.5*(Math.cos(QT*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>OM(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>OM(e)?e:RM(e,.075,.3),easeOutElastic:e=>OM(e)?e:IM(e,.075,.3),easeInOutElastic(e){const t=.1125;return OM(e)?e:e<.5?.5*RM(2*e,t,.45):.5+.5*IM(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-LM.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*LM.easeInBounce(2*e):.5*LM.easeOutBounce(2*e-1)+.5};function FM(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function BM(e){return FM(e)?e:new _T(e)}function zM(e){return FM(e)?e:new _T(e).saturate(.5).darken(.1).hexString()}const WM=["x","y","borderWidth","radius","tension"],UM=["color","borderColor","backgroundColor"];const VM=new Map;function HM(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=VM.get(n);return r||(r=new Intl.NumberFormat(e,t),VM.set(n,r)),r}(t,n).format(e)}const qM={values:e=>TT(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=aM(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),HM(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(aM(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?qM.numeric.call(this,e,t,n):""}};var GM={formatters:qM};const KM=Object.create(null),YM=Object.create(null);function XM(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function JM(e,t,n){return"string"===typeof t?VT(XM(e,t),n):VT(XM(e,""),t)}class $M{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>zM(t.backgroundColor),this.hoverBorderColor=(e,t)=>zM(t.borderColor),this.hoverColor=(e,t)=>zM(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return JM(this,e,t)}get(e){return XM(this,e)}describe(e,t){return JM(YM,e,t)}override(e,t){return JM(KM,e,t)}route(e,t,n,r){const i=XM(this,e),s=XM(this,n),a="_"+t;Object.defineProperties(i,{[a]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[r];return MT(e)?Object.assign({},t,e):RT(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var QM=new $M({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:UM},numbers:{type:"number",properties:WM}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:GM.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function ZM(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function eD(e,t,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,d,u,h;for(l=0;l<o;l++)if(u=n[l],void 0===u||null===u||TT(u)){if(TT(u))for(c=0,d=u.length;c<d;c++)h=u[c],void 0===h||null===h||TT(h)||(a=ZM(e,i,s,a,h))}else a=ZM(e,i,s,a,u);e.restore();const p=s.length/2;if(p>n.length){for(l=0;l<p;l++)delete i[s[l]];s.splice(0,p)}return a}function tD(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function nD(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function rD(e,t,n,r){iD(e,t,n,r,null)}function iD(e,t,n,r,i){let s,a,o,l,c,d,u,h;const p=t.pointStyle,m=t.rotation,f=t.radius;let g=(m||0)*nM;if(p&&"object"===typeof p&&(s=p.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(g),e.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void e.restore();if(!(isNaN(f)||f<=0)){switch(e.beginPath(),p){default:i?e.ellipse(n,r,i/2,f,0,0,ZT):e.arc(n,r,f,0,ZT),e.closePath();break;case"triangle":d=i?i/2:f,e.moveTo(n+Math.sin(g)*d,r-Math.cos(g)*f),g+=sM,e.lineTo(n+Math.sin(g)*d,r-Math.cos(g)*f),g+=sM,e.lineTo(n+Math.sin(g)*d,r-Math.cos(g)*f),e.closePath();break;case"rectRounded":c=.516*f,l=f-c,a=Math.cos(g+iM)*l,u=Math.cos(g+iM)*(i?i/2-c:l),o=Math.sin(g+iM)*l,h=Math.sin(g+iM)*(i?i/2-c:l),e.arc(n-u,r-o,c,g-QT,g-rM),e.arc(n+h,r-a,c,g-rM,g),e.arc(n+u,r+o,c,g,g+rM),e.arc(n-h,r+a,c,g+rM,g+QT),e.closePath();break;case"rect":if(!m){l=Math.SQRT1_2*f,d=i?i/2:l,e.rect(n-d,r-l,2*d,2*l);break}g+=iM;case"rectRot":u=Math.cos(g)*(i?i/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(i?i/2:f),e.moveTo(n-u,r-o),e.lineTo(n+h,r-a),e.lineTo(n+u,r+o),e.lineTo(n-h,r+a),e.closePath();break;case"crossRot":g+=iM;case"cross":u=Math.cos(g)*(i?i/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(i?i/2:f),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"star":u=Math.cos(g)*(i?i/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(i?i/2:f),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a),g+=iM,u=Math.cos(g)*(i?i/2:f),a=Math.cos(g)*f,o=Math.sin(g)*f,h=Math.sin(g)*(i?i/2:f),e.moveTo(n-u,r-o),e.lineTo(n+u,r+o),e.moveTo(n+h,r-a),e.lineTo(n-h,r+a);break;case"line":a=i?i/2:Math.cos(g)*f,o=Math.sin(g)*f,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(g)*(i?i/2:f),r+Math.sin(g)*f);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function sD(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function aD(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function oD(e){e.restore()}function lD(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function cD(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function dD(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,d=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(a,d),e.lineTo(o,d),e.stroke()}}function uD(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function hD(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=TT(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),PT(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&uD(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),PT(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),dD(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function pD(e,t){const{x:n,y:r,w:i,h:s,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*QT,QT,!0),e.lineTo(n,r+s-a.bottomLeft),e.arc(n+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,QT,rM,!0),e.lineTo(n+i-a.bottomRight,r+s),e.arc(n+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,rM,0,!0),e.lineTo(n+i,r+a.topRight),e.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-rM,!0),e.lineTo(n+a.topLeft,r)}const mD=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,fD=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gD(e,t){const n=(""+e).match(mD);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const vD=e=>+e||0;function yD(e,t){const n={},r=MT(t),i=r?Object.keys(t):t,s=MT(e)?r?n=>RT(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of i)n[a]=vD(s(a));return n}function xD(e){return yD(e,{top:"y",right:"x",bottom:"y",left:"x"})}function bD(e){return yD(e,["topLeft","topRight","bottomLeft","bottomRight"])}function wD(e){const t=xD(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function jD(e,t){e=e||{},t=t||QM.font;let n=RT(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=RT(e.style,t.style);r&&!(""+r).match(fD)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:RT(e.family,t.family),lineHeight:gD(RT(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:RT(e.weight,t.weight),string:""};return i.string=function(e){return!e||PT(e.size)||PT(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function ND(e,t,n,r){let i,s,a,o=!0;for(i=0,s=e.length;i<s;++i)if(a=e[i],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&TT(a)&&(a=a[n%a.length],o=!1),void 0!==a))return r&&!o&&(r.cacheable=!1),a}function kD(e,t){return Object.assign(Object.create(e),t)}function AD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=ID("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>AD([r,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>PD(n,r,()=>function(e,t,n,r){let i;for(const s of t)if(i=ID(CD(s,e),n),"undefined"!==typeof i)return ED(e,i)?OD(n,r,e,i):i}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>LD(e).includes(t),ownKeys:e=>LD(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function SD(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:_D(e,r),setContext:t=>SD(e,t,n,r),override:i=>SD(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>PD(e,t,()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=e;let o=r[t];JT(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||r);o.delete(e),ED(e,l)&&(l=OD(i._scopes,i,e,l));return l}(t,o,e,n));TT(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&r(e))return t[s.index%t.length];if(MT(t[0])){const n=t,r=i._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=OD(r,i,e,l);t.push(SD(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));ED(t,o)&&(o=SD(o,i,s&&s[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function _D(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:JT(n)?n:()=>n,isIndexable:JT(r)?r:()=>r}}const CD=(e,t)=>e?e+YT(t):t,ED=(e,t)=>MT(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function PD(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function TD(e,t,n){return JT(e)?e(t,n):e}const MD=(e,t)=>!0===e?t:"string"===typeof e?KT(t,e):void 0;function DD(e,t,n,r,i){for(const s of t){const t=MD(n,s);if(t){e.add(t);const s=TD(t._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function OD(e,t,n,r){const i=t._rootScopes,s=TD(t._fallback,n,r),a=[...e,...i],o=new Set;o.add(r);let l=RD(o,a,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=RD(o,a,s,l,r),null!==l))&&AD(Array.from(o),[""],i,s,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(TT(i)&&MT(n))return n;return i||{}}(t,n,r)))}function RD(e,t,n,r,i){for(;n;)n=DD(e,t,n,r,i);return n}function ID(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function LD(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function FD(e,t,n,r){const{iScale:i}=e,{key:s="r"}=this._parsing,a=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],a[o]={r:i.parse(KT(d,s),c)};return a}const BD=Number.EPSILON||1e-14,zD=(e,t)=>t<e.length&&!e[t].skip&&e[t],WD=e=>"x"===e?"y":"x";function UD(e,t,n,r){const i=e.skip?t:e,s=t,a=n.skip?t:n,o=gM(s,i),l=gM(a,s);let c=o/(o+l),d=l/(o+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;const u=r*c,h=r*d;return{previous:{x:s.x-u*(a.x-i.x),y:s.y-u*(a.y-i.y)},next:{x:s.x+h*(a.x-i.x),y:s.y+h*(a.y-i.y)}}}function VD(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=WD(t),r=e.length,i=Array(r).fill(0),s=Array(r);let a,o,l,c=zD(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=zD(e,a+1),l){if(c){const e=c[t]-l[t];i[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?oM(i[a-1])!==oM(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}!function(e,t,n){const r=e.length;let i,s,a,o,l,c=zD(e,0);for(let d=0;d<r-1;++d)l=c,c=zD(e,d+1),l&&c&&(lM(t[d],0,BD)?n[d]=n[d+1]=0:(i=n[d]/t[d],s=n[d+1]/t[d],o=Math.pow(i,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[d]=i*a*t[d],n[d+1]=s*a*t[d])))}(e,i,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=WD(n),i=e.length;let s,a,o,l=zD(e,0);for(let c=0;c<i;++c){if(a=o,o=l,l=zD(e,c+1),!o)continue;const i=o[n],d=o[r];a&&(s=(i-a[n])/3,o["cp1".concat(n)]=i-s,o["cp1".concat(r)]=d-s*t[c]),l&&(s=(l[n]-i)/3,o["cp2".concat(n)]=i+s,o["cp2".concat(r)]=d+s*t[c])}}(e,s,t)}function HD(e,t,n){return Math.max(Math.min(e,n),t)}function qD(e,t,n,r,i){let s,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)VD(e,i);else{let n=r?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=UD(n,o,e[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,i,s,a,o=sD(e[0],t);for(n=0,r=e.length;n<r;++n)a=s,s=o,o=n<r-1&&sD(e[n+1],t),s&&(i=e[n],a&&(i.cp1x=HD(i.cp1x,t.left,t.right),i.cp1y=HD(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=HD(i.cp2x,t.left,t.right),i.cp2y=HD(i.cp2y,t.top,t.bottom)))}(e,n)}function GD(){return"undefined"!==typeof window&&"undefined"!==typeof document}function KD(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function YD(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const XD=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const JD=["top","right","bottom","left"];function $D(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=JD[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function QD(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=XD(n),s="border-box"===i.boxSizing,a=$D(i,"padding"),o=$D(i,"border","width"),{x:l,y:c,box:d}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,s,e.target))a=i,o=s;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),u=a.left+(d&&o.left),h=a.top+(d&&o.top);let{width:p,height:m}=t;return s&&(p-=a.width+o.width,m-=a.height+o.height),{x:Math.round((l-u)/p*n.width/r),y:Math.round((c-h)/m*n.height/r)}}const ZD=e=>Math.round(10*e)/10;function eO(e,t,n,r){const i=XD(e),s=$D(i,"margin"),a=YD(i.maxWidth,e,"clientWidth")||tM,o=YD(i.maxHeight,e,"clientHeight")||tM,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const s=e&&KD(e);if(s){const e=s.getBoundingClientRect(),a=XD(s),o=$D(a,"border","width"),l=$D(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=YD(a.maxWidth,s,"clientWidth"),i=YD(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||tM,maxHeight:i||tM}}(e,t,n);let{width:c,height:d}=l;if("content-box"===i.boxSizing){const e=$D(i,"border","width"),t=$D(i,"padding");c-=t.width+e.width,d-=t.height+e.height}c=Math.max(0,c-s.width),d=Math.max(0,r?c/r:d-s.height),c=ZD(Math.min(c,a,l.maxWidth)),d=ZD(Math.min(d,o,l.maxHeight)),c&&!d&&(d=ZD(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&d>l.height&&(d=l.height,c=ZD(Math.floor(d*r))),{width:c,height:d}}function tO(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||a.height!==i||a.width!==s)&&(e.currentDevicePixelRatio=r,a.height=i,a.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const nO=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};GD()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Ae){}return e}();function rO(e,t){const n=function(e,t){return XD(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function iO(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function sO(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function aO(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=iO(e,i,n),o=iO(i,s,n),l=iO(s,t,n),c=iO(a,o,n),d=iO(o,l,n);return iO(c,d,n)}function oO(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function lO(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function cO(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function dO(e){return"angle"===e?{between:xM,compare:vM,normalize:yM}:{between:wM,compare:(e,t)=>e-t,normalize:e=>e}}function uO(e){let{start:t,end:n,count:r,loop:i,style:s}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:s}}function hO(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=dO(r),{start:d,end:u,loop:h,style:p}=function(e,t,n){const{property:r,start:i,end:s}=n,{between:a,normalize:o}=dO(r),l=t.length;let c,d,{start:u,end:h,loop:p}=e;if(p){for(u+=l,h+=l,c=0,d=l;c<d&&a(o(t[u%l][r]),i,s);++c)u--,h--;u%=l,h%=l}return h<u&&(h+=l),{start:u,end:h,loop:p,style:e.style}}(e,t,n),m=[];let f,g,v,y=!1,x=null;const b=()=>y||l(i,v,f)&&0!==o(i,v),w=()=>!y||0===o(s,f)||l(s,v,f);for(let j=d,N=d;j<=u;++j)g=t[j%a],g.skip||(f=c(g[r]),f!==v&&(y=l(f,i,s),null===x&&b()&&(x=0===o(f,i)?j:N),null!==x&&w()&&(m.push(uO({start:x,end:j,loop:h,count:a,style:p})),x=null),N=j,v=f));return null!==x&&m.push(uO({start:x,end:u,loop:h,count:a,style:p})),m}function pO(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=hO(r[i],e.points,t);s.length&&n.push(...s)}return n}function mO(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),s=fO(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let d=s,u=t[0].start,h=u;function p(e,t,r,i){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),d=i,u=t%l)}}for(const m of t){u=o?u:m.start;let e,t=n[u%l];for(h=u+1;h<=m.end;h++){const s=n[h%l];e=fO(r.setContext(kD(i,{type:"segment",p0:t,p1:s,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:a}))),gO(e,d)&&p(u,h-1,m.loop,d),t=s,d=e}u<h-1&&p(u,h-1,m.loop,d)}return c}(e,t,n,r):t}function fO(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function gO(e,t){if(!t)return!1;const n=[],r=function(e,t){return FM(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function vO(e,t,n){return e.options.clip?e[n]:t[n]}function yO(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:vO(n,t,"left"),right:vO(n,t,"right"),top:vO(r,t,"top"),bottom:vO(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class xO{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],s=t.duration;i.forEach(r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=CM.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,a=i.length-1,o=!1;for(;a>=0;--a)s=i[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var bO=new xO;const wO="transparent",jO={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=BM(e||wO),i=r.valid&&BM(t||wO);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class NO{constructor(e,t,n,r){const i=t[n];r=ND([e.to,r,i,e.from]);const s=ND([e.from,i,r]);this._active=!0,this._fn=e.fn||jO[e.type||typeof s],this._easing=LM[e.easing]||LM.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=ND([e.to,t,r,e.from]),this._from=ND([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,a=this._to;let o;if(this._active=i!==a&&(s||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=i:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(i,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class kO{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!MT(e))return;const t=Object.keys(QM.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!MT(i))return;const s={};for(const e of t)s[e]=i[e];(TT(i.properties)&&i.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,s)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let d=i[l];const u=n.get(l);if(d){if(u&&d.active()){d.update(u,c,a);continue}d.cancel()}u&&u.duration?(i[l]=d=new NO(u,e,l,c),r.push(d)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(bO.add(this._chart,n),!0):void 0}}function AO(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:r?s:i,end:r?i:s}}function SO(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function _O(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,s="single"===r.mode;let a,o,l,c;if(null===t)return;let d=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===n){if(d=!0,r.all)continue;break}c=e.values[l],DT(c)&&(s||0===t||oM(t)===oM(c))&&(t+=c)}return d||r.all?t:0}function CO(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function EO(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function PO(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function TO(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,c=a.axis,d=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,a,r),u=t.length;let h;for(let p=0;p<u;++p){const e=t[p],{[l]:n,[c]:s}=e;h=(e._stacks||(e._stacks={}))[c]=EO(i,d,n),h[o]=s,h._top=PO(h,a,!0,r.type),h._bottom=PO(h,a,!1,r.type);(h._visualValues||(h._visualValues={}))[o]=s}}function MO(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function DO(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const OO=e=>"reset"===e||"none"===e,RO=(e,t)=>t?e:Object.assign({},e);class IO{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=CO(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&DO(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=RT(n.xAxisID,MO(e,"x")),s=t.yAxisID=RT(n.yAxisID,MO(e,"y")),a=t.rAxisID=RT(n.rAxisID,MO(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,i,s,a),c=t.vAxisID=r(o,s,i,a);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&SM(this._data,this),e._stacked&&DO(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(MT(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,d;for(l=0,c=a.length;l<c;++l)d=a[l],o[l]={[i]:d,[s]:e[d]};return o}(t,e)}else if(n!==t){if(n){SM(n,this);const e=this._cachedMeta;DO(e),e._parsed=[]}t&&Object.isExtensible(t)&&function(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),AM.forEach(t=>{const n="_onData"+YT(t),r=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value(){for(var t=arguments.length,i=new Array(t),s=0;s<t;s++)i[s]=arguments[s];const a=r.apply(this,i);return e._chartjs.listeners.forEach(e=>{"function"===typeof e[n]&&e[n](...i)}),a}})}))}(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=CO(t.vScale,t),t.stack!==n.stack&&(r=!0,DO(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(TO(this,t._parsed),t._stacked=CO(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,a=i.axis;let o,l,c,d=0===e&&t===r.length||n._sorted,u=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=TT(r[e])?this.parseArrayData(n,r,e,t):MT(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[a]||u&&l[a]<u[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],d&&(i()&&(d=!1),u=l);n._sorted=d}s&&TO(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:s}=e,a=i.axis,o=s.axis,l=i.getLabels(),c=i===s,d=new Array(r);let u,h,p;for(u=0,h=r;u<h;++u)p=u+n,d[u]={[a]:c||i.parse(l[p],p),[o]:s.parse(t[p],p)};return d}parseArrayData(e,t,n,r){const{xScale:i,yScale:s}=e,a=new Array(r);let o,l,c,d;for(o=0,l=r;o<l;++o)c=o+n,d=t[c],a[o]={x:i.parse(d[0],c),y:s.parse(d[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:i,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=t[u],l[c]={x:i.parse(KT(h,a),u),y:s.parse(KT(h,o),u)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,s=t[e.axis];return _O({keys:SO(r,!0),values:t._stacks[e.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let s=null===i?NaN:i;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,s=_O(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,s=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:SO(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:d}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(a);let u,h;function p(){h=r[u];const t=h[a.axis];return!DT(h[e.axis])||c>t||d<t}for(u=0;u<s&&(p()||(this.updateRangeFromParsed(l,e,h,o),!i));++u);if(i)for(u=s-1;u>=0;--u)if(!p()){this.updateRangeFromParsed(l,e,h,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r][e.axis],DT(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return MT(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(RT(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=AO(e,n),i=AO(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return kD(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return kD(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,s=e+"-"+t,a=i[s],o=this.enableOptionSharing&&XT(n);if(a)return RO(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),d=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],u=l.getOptionScopes(this.getDataset(),c),h=Object.keys(QM.elements[e]),p=l.resolveNamedOptions(u,h,()=>this.getContext(n,r,t),d);return p.$shared&&(p.$shared=o,i[s]=Object.freeze(RO(p,o))),p}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,s="animation-".concat(t),a=i[s];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),i);o=r.createResolver(s,this.getContext(e,n,t))}const l=new kO(r,o&&o.animations);return o&&o._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||OO(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:s}}updateElement(e,t,n,r){OO(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!OO(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,i=t.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(i),a=e;a<s;++a)i[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&DO(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function LO(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=_M(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,i,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(XT(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(r=0,i=n.length;r<i;++r)s=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=t.ticks.length;r<i;++r)s=t.getPixelForTick(r),l();return o}function FO(e,t,n,r){return TT(e)?function(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:a,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function BO(e,t,n,r){const i=e.iScale,s=e.vScale,a=i.getLabels(),o=i===s,l=[];let c,d,u,h;for(c=n,d=n+r;c<d;++c)h=t[c],u={},u[i.axis]=o||i.parse(a[c],c),l.push(FO(h,u,s,c));return l}function zO(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function WO(e,t,n,r){let i=t.borderSkipped;const s={};if(!i)return void(e.borderSkipped=s);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:d}=function(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=d:(s[UO(d,a,o,l)]=!0,i=c)),s[UO(i,a,o,l)]=!0,e.borderSkipped=s}function UO(e,t,n,r){var i,s,a;return r?(a=n,e=VO(e=(i=e)===(s=t)?a:i===a?s:i,n,t)):e=VO(e,t,n),e}function VO(e,t,n){return"start"===e?t:"end"===e?n:e}function HO(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}(0,ol.A)(IO,"defaults",{}),(0,ol.A)(IO,"datasetElementType",null),(0,ol.A)(IO,"dataElementType",null);class qO extends IO{parsePrimitiveData(e,t,n,r){return BO(e,t,n,r)}parseArrayData(e,t,n,r){return BO(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===i.axis?a:o,c="x"===s.axis?a:o,d=[];let u,h,p,m;for(u=n,h=n+r;u<h;++u)m=t[u],p={},p[i.axis]=i.parse(KT(m,l),u),d.push(FO(KT(m,c),p,s,u));return d}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),s=i._custom,a=zO(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:d,includeOptions:u}=this._getSharedOptions(t,r);for(let h=t;h<t+n;h++){const t=this.getParsed(h),n=i||PT(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(h),p=this._calculateBarIndexPixels(h,c),m=(t._stacks||{})[a.axis],f={horizontal:l,base:n.base,enableBorderRadius:!m||zO(t._custom)||s===m._top||s===m._bottom,x:l?n.head:p.center,y:l?p.center:n.head,height:l?p.size:Math.abs(n.size),width:l?Math.abs(n.size):p.size};u&&(f.options=d||this.resolveDataElementOptions(h,e[h].active?"active":r));const g=f.options||e[h].options;WO(f,g,m,s),HO(f,g,c.ratio),this.updateElement(e[h],h,f,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),i=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),r=t&&t[e.vScale.axis];if(PT(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===i||-1===s.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[RT("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,s;for(i=0,s=t.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const a=e.barThickness;return{min:a||LO(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,a=i||0,o=this.getParsed(e),l=o._custom,c=zO(l);let d,u,h=o[t.axis],p=0,m=n?this.applyStack(t,o,n):h;m!==h&&(p=m-h,m=h),c&&(h=l.barStart,m=l.barEnd-l.barStart,0!==h&&oM(h)!==oM(l.barEnd)&&(p=0),p+=h);const f=PT(i)||c?p:i;let g=t.getPixelForValue(f);if(d=this.chart.getDataVisibility(e)?t.getPixelForValue(p+m):g,u=d-g,Math.abs(u)<s){u=function(e,t,n){return 0!==e?oM(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(u,t,a)*s,h===a&&(g-=u/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),p=Math.max(e,i);g=Math.max(Math.min(g,p),l),d=g+u,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(d)-t.getValueForPixel(g))}if(g===t.getPixelForValue(a)){const e=oM(u)*t.getLineWidthForValue(a)/2;g+=e,u-=e}return{size:u,base:g,head:d,center:d+u/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,s=RT(r.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,s=i[e];let a=e>0?i[e-1]:null,o=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const i=n.barThickness;let s,a;return PT(i)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[e]-s/2}}(e,t,r,n*l),d="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,u=this._getAxis().indexOf(RT(d,this.getFirstScaleIdForIndexAxis())),h=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+u;a=c.start+c.chunk*h+c.chunk/2,o=Math.min(s,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}(0,ol.A)(qO,"id","bar"),(0,ol.A)(qO,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,ol.A)(qO,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class GO extends IO{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=RT(e[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=RT(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=s.axis,d=a.axis;for(let u=t;u<t+n;u++){const t=e[u],n=!i&&this.getParsed(u),h={},p=h[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),m=h[d]=i?a.getBasePixel():a.getPixelForValue(n[d]);h.skip=isNaN(p)||isNaN(m),l&&(h.options=o||this.resolveDataElementOptions(u,t.active?"active":r),i&&(h.options.radius=0)),this.updateElement(t,u,h,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=RT(n&&n._custom,i),r}}(0,ol.A)(GO,"id","bubble"),(0,ol.A)(GO,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,ol.A)(GO,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class KO extends IO{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,a=e=>+n[e];if(MT(n[e])){const{key:e="value"}=this._parsing;a=t=>+KT(n[t],e)}for(i=e,s=e+t;i<s;++i)r._parsed[i]=a(i)}}_getRotation(){return hM(this.options.rotation-90)}_getCircumference(){return hM(this.options.circumference)}_getRotationExtents(){let e=ZT,t=-ZT;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min(((e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100:+e/t)(this.options.cutout,a),1),l=this._getRingWeight(this.index),{circumference:c,rotation:d}=this._getRotationExtents(),{ratioX:u,ratioY:h,offsetX:p,offsetY:m}=function(e,t,n){let r=1,i=1,s=0,a=0;if(t<ZT){const o=e,l=o+t,c=Math.cos(o),d=Math.sin(o),u=Math.cos(l),h=Math.sin(l),p=(e,t,r)=>xM(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),m=(e,t,r)=>xM(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),f=p(0,c,u),g=p(rM,d,h),v=m(QT,c,u),y=m(QT+rM,d,h);r=(f-v)/2,i=(g-y)/2,s=-(f+v)/2,a=-(g+y)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}(d,c,o),f=(n.width-s)/u,g=(n.height-s)/h,v=Math.max(Math.min(f,g)/2,0),y=IT(this.options.radius,v),x=(y-Math.max(y*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=p*y,this.offsetY=m*y,r.total=this.calculateTotal(),this.outerRadius=y-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*l,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/ZT)}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,d=i&&o.animateScale,u=d?0:this.innerRadius,h=d?0:this.outerRadius,{sharedOptions:p,includeOptions:m}=this._getSharedOptions(t,r);let f,g=this._getRotation();for(f=0;f<t;++f)g+=this._circumference(f,i);for(f=t;f<t+n;++f){const t=this._circumference(f,i),n=e[f],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:g,endAngle:g+t,circumference:t,outerRadius:h,innerRadius:u};m&&(s.options=p||this.resolveDataElementOptions(f,n.active?"active":r)),g+=t,this.updateElement(n,f,s,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?ZT*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=HM(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,s,a,o;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),e=s.data,a=s.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)o=a.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(RT(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,ol.A)(KO,"id","doughnut"),(0,ol.A)(KO,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,ol.A)(KO,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,ol.A)(KO,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class YO extends IO{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=MM(t,r,s);this._drawStart=a,this._drawCount=o,DM(t)&&(a=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(r,a,o,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(t,r),u=s.axis,h=a.axis,{spanGaps:p,segment:m}=this.options,f=dM(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||"none"===r,v=t+n,y=e.length;let x=t>0&&this.getParsed(t-1);for(let b=0;b<y;++b){const n=e[b],p=g?n:{};if(b<t||b>=v){p.skip=!0;continue}const y=this.getParsed(b),w=PT(y[h]),j=p[u]=s.getPixelForValue(y[u],b),N=p[h]=i||w?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,y,o):y[h],b);p.skip=isNaN(j)||isNaN(N)||w,p.stop=b>0&&Math.abs(y[u]-x[u])>f,m&&(p.parsed=y,p.raw=l.data[b]),d&&(p.options=c||this.resolveDataElementOptions(b,n.active?"active":r)),g||this.updateElement(n,b,p,r),x=y}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,ol.A)(YO,"id","line"),(0,ol.A)(YO,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,ol.A)(YO,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class XO extends IO{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=HM(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return FD.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,d=o.getIndexAngle(0)-.5*QT;let u,h=d;const p=360/this.countVisibleElements();for(u=0;u<t;++u)h+=this._computeAngle(u,r,p);for(u=t;u<t+n;u++){const t=e[u];let n=h,m=h+this._computeAngle(u,r,p),f=s.getDataVisibility(u)?o.getDistanceFromCenterForValue(this.getParsed(u).r):0;h=m,i&&(a.animateScale&&(f=0),a.animateRotate&&(n=m=d));const g={x:l,y:c,innerRadius:0,outerRadius:f,startAngle:n,endAngle:m,options:this.resolveDataElementOptions(u,t.active?"active":r)};this.updateElement(t,u,g,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?hM(this.resolveDataElementOptions(e,t).angle||n):0}}(0,ol.A)(XO,"id","polarArea"),(0,ol.A)(XO,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,ol.A)(XO,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class JO extends KO{}(0,ol.A)(JO,"id","pie"),(0,ol.A)(JO,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class $O extends IO{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return FD.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),o=i.getPointPositionForValue(a,this.getParsed(a).r),l=s?i.xCenter:o.x,c=s?i.yCenter:o.y,d={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,d,r)}}}(0,ol.A)($O,"id","radar"),(0,ol.A)($O,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,ol.A)($O,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class QO extends IO{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:s}=MM(t,n,r);if(this._drawStart=i,this._drawCount=s,DM(t)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),d=this.getSharedOptions(c),u=this.includeOptions(r,d),h=s.axis,p=a.axis,{spanGaps:m,segment:f}=this.options,g=dM(m)?m:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||i||"none"===r;let y=t>0&&this.getParsed(t-1);for(let x=t;x<t+n;++x){const t=e[x],n=this.getParsed(x),c=v?t:{},m=PT(n[p]),b=c[h]=s.getPixelForValue(n[h],x),w=c[p]=i||m?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[p],x);c.skip=isNaN(b)||isNaN(w)||m,c.stop=x>0&&Math.abs(n[h]-y[h])>g,f&&(c.parsed=n,c.raw=l.data[x]),u&&(c.options=d||this.resolveDataElementOptions(x,t.active?"active":r)),v||this.updateElement(t,x,c,r),y=n}this.updateSharedOptions(d,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,s)/2}}(0,ol.A)(QO,"id","scatter"),(0,ol.A)(QO,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,ol.A)(QO,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});var ZO=Object.freeze({__proto__:null,BarController:qO,BubbleController:GO,DoughnutController:KO,LineController:YO,PieController:JO,PolarAreaController:XO,RadarController:$O,ScatterController:QO});function eR(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class tR{static override(e){Object.assign(tR.prototype,e)}constructor(e){(0,ol.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return eR()}parse(){return eR()}format(){return eR()}add(){return eR()}diff(){return eR()}startOf(){return eR()}endOf(){return eR()}}var nR=tR;function rR(e,t,n,r){const{controller:i,data:s,_sorted:a}=e,o=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const a=o._reversePixels?kM:NM;if(!r){const r=a(s,t,n);if(l){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,s=n.slice(0,r.lo+1).reverse().findIndex(e=>!PT(e[t.axis]));r.lo-=Math.max(0,s);const a=n.slice(r.hi).findIndex(e=>!PT(e[t.axis]));r.hi+=Math.max(0,a)}return r}if(i._sharedOptions){const e=s[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=a(s,t,n-r),i=a(s,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function iR(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=rR(s[o],t,a,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function sR(e,t,n,r,i){const s=[];if(!i&&!e.isPointInArea(t))return s;return iR(e,n,t,function(n,a,o){(i||sD(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&s.push({element:n,datasetIndex:a,index:o})},!0),s}function aR(e,t,n,r,i,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,s=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return iR(e,n,t,function(n,c,d){const u=n.inRange(t.x,t.y,i);if(r&&!u)return;const h=n.getCenterPoint(i);if(!(!!s||e.isPointInArea(h))&&!u)return;const p=o(t,h);p<l?(a=[{element:n,datasetIndex:c,index:d}],l=p):p===l&&a.push({element:n,datasetIndex:c,index:d})}),a}function oR(e,t,n,r,i,s){return s||e.isPointInArea(t)?"r"!==n||r?aR(e,t,n,r,i,s):function(e,t,n,r){let i=[];return iR(e,n,t,function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=fM(e,{x:t.x,y:t.y});xM(l,a,o)&&i.push({element:e,datasetIndex:n,index:s})}),i}(e,t,n,i):[]}function lR(e,t,n,r,i){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return iR(e,n,t,(e,r,l)=>{e[a]&&e[a](t[n],i)&&(s.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,i))}),r&&!o?[]:s}var cR={evaluateInteractionItems:iR,modes:{index(e,t,n,r){const i=QD(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?sR(e,i,s,r,a):oR(e,i,s,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const i=QD(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?sR(e,i,s,r,a):oR(e,i,s,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>sR(e,QD(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=QD(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return oR(e,i,s,n.intersect,r,a)},x:(e,t,n,r)=>lR(e,QD(t,e),"x",n.intersect,r),y:(e,t,n,r)=>lR(e,QD(t,e),"y",n.intersect,r)}};const dR=["left","top","right","bottom"];function uR(e,t){return e.filter(e=>e.pos===t)}function hR(e,t){return e.filter(e=>-1===dR.indexOf(e.pos)&&e.box.axis===t)}function pR(e,t){return e.sort((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function mR(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!dR.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=i):(o.width=r,o.height=c?c*i:a&&t.availableHeight)}return n}function fR(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function gR(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function vR(e,t,n,r){const{pos:i,box:s}=n,a=e.maxPadding;if(!MT(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[i]+=n.size}s.getPadding&&gR(a,s.getPadding());const o=Math.max(0,t.outerWidth-fR(a,e,"left","right")),l=Math.max(0,t.outerHeight-fR(a,e,"top","bottom")),c=o!==e.w,d=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:d}:{same:d,other:c}}function yR(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function xR(e,t,n,r){const i=[];let s,a,o,l,c,d;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,yR(o.horizontal,t));const{same:a,other:u}=vR(t,n,o,r);c|=a&&i.length,d=d||u,l.fullSize||i.push(o)}return c&&xR(i,t,n,r)||d}function bR(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function wR(e,t,n,r){const i=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,s=l.size||e.height;XT(l.start)&&(a=l.start),e.fullSize?bR(e,i.left,a,n.outerWidth-i.right-i.left,s):bR(e,t.left+l.placed,a,r,s),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;XT(l.start)&&(s=l.start),e.fullSize?bR(e,s,i.top,a,n.outerHeight-i.bottom-i.top):bR(e,s,t.top+l.placed,a,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=a}var jR={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=wD(e.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(n-i.height,0),o=function(e){const t=function(e){const t=[];let n,r,i,s,a,o;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=i),t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=pR(t.filter(e=>e.box.fullSize),!0),r=pR(uR(t,"left"),!0),i=pR(uR(t,"right")),s=pR(uR(t,"top"),!0),a=pR(uR(t,"bottom")),o=hR(t,"x"),l=hR(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:uR(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;FT(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const d=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/d,hBoxMaxHeight:a/2}),h=Object.assign({},i);gR(h,wD(r));const p=Object.assign({maxPadding:h,w:s,h:a,x:i.left,y:i.top},i),m=mR(l.concat(c),u);xR(o.fullSize,p,u,m),xR(l,p,u,m),xR(c,p,u,m)&&xR(l,p,u,m),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(p),wR(o.leftAndTop,p,u,m),p.x+=p.w,p.y+=p.h,wR(o.rightAndBottom,p,u,m),e.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},FT(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class NR{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class kR extends NR{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const AR="$chartjs",SR={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},_R=e=>null===e||""===e;const CR=!!nO&&{passive:!0};function ER(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,CR)}function PR(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function TR(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||PR(n.addedNodes,r),t=t&&!PR(n.removedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function MR(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||PR(n.removedNodes,r),t=t&&!PR(n.addedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const DR=new Map;let OR=0;function RR(){const e=window.devicePixelRatio;e!==OR&&(OR=e,DR.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function IR(e,t,n){const r=e.canvas,i=r&&KD(r);if(!i)return;const s=EM((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||s(n,r)});return a.observe(i),function(e,t){DR.size||window.addEventListener("resize",RR),DR.set(e,t)}(e,s),a}function LR(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){DR.delete(e),DR.size||window.removeEventListener("resize",RR)}(e)}function FR(e,t,n){const r=e.canvas,i=EM(t=>{null!==e.ctx&&n(function(e,t){const n=SR[e.type]||e.type,{x:r,y:i}=QD(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,CR)}(r,t,i),i}class BR extends NR{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[AR]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",_R(i)){const t=rO(e,"width");void 0!==t&&(e.width=t)}if(_R(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=rO(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[AR])return!1;const n=t[AR].initial;["height","width"].forEach(e=>{const r=n[e];PT(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[AR],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:TR,detach:MR,resize:IR}[t]||FR;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:LR,detach:LR,resize:LR}[t]||ER)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return eO(e,t,n,r)}isAttached(e){const t=e&&KD(e);return!(!t||!t.isConnected)}}class zR{constructor(){(0,ol.A)(this,"x",void 0),(0,ol.A)(this,"y",void 0),(0,ol.A)(this,"active",!1),(0,ol.A)(this,"options",void 0),(0,ol.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return dM(this.x)&&dM(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function WR(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>i)return function(e,t,n,r){let i,s=0,a=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===a&&(t.push(e[i]),s++,a=n[s*r])}(t,c,s,a/i),c;const d=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const s=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>i)return e}return Math.max(i,1)}(s,t,i);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(UR(t,c,d,PT(r)?0:o-r,o),e=0,n=a-1;e<n;e++)UR(t,c,d,s[e],s[e+1]);return UR(t,c,d,l,PT(r)?t.length:l+r),c}return UR(t,c,d),c}function UR(e,t,n,r,i){const s=RT(r,0),a=Math.min(RT(i,e.length),e.length);let o,l,c,d=0;for(n=Math.ceil(n),i&&(o=i-r,n=o/Math.floor(o/n)),c=s;c<0;)d++,c=Math.round(s+d*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),d++,c=Math.round(s+d*n))}(0,ol.A)(zR,"defaults",{}),(0,ol.A)(zR,"defaultRoutes",void 0);const VR=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,HR=(e,t)=>Math.min(t||e,e);function qR(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function GR(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<s-o||c>a+o)))return c}function KR(e){return e.drawTicks?e.tickLength:0}function YR(e,t){if(!e.display)return 0;const n=jD(e.font,t),r=wD(e.padding);return(TT(e.text)?e.text.length:1)*n.lineHeight+r.height}function XR(e,t,n){let r=PM(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class JR extends zR{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=OT(e,Number.POSITIVE_INFINITY),t=OT(t,Number.NEGATIVE_INFINITY),n=OT(n,Number.POSITIVE_INFINITY),r=OT(r,Number.NEGATIVE_INFINITY),{min:OT(e,n),max:OT(t,r),minDefined:DT(e),maxDefined:DT(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),s||(r=Math.max(r,t.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:OT(n,OT(r,n)),max:OT(r,OT(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){LT(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,s=IT(t,(i-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(s)),max:a(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?qR(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=WR(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){LT(this.options.afterUpdate,[this])}beforeSetDimensions(){LT(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){LT(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),LT(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){LT(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=LT(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){LT(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){LT(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=HR(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let s,a,o,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),d=c.widest.width,u=c.highest.height,h=bM(this.chart.width-d,0,this.maxWidth);s=e.offset?this.maxWidth/n:h/(n-1),d+6>s&&(s=h/(n-(e.offset?.5:1)),a=this.maxHeight-KR(e.grid)-t.padding-YR(e.title,this.chart.options.font),o=Math.sqrt(d*d+u*u),l=pM(Math.min(Math.asin(bM((c.highest.height+6)/s,-1,1)),Math.asin(bM(a/o,-1,1))-Math.asin(bM(u/o,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){LT(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){LT(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=YR(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=KR(i)+s):(e.height=this.maxHeight,e.width=KR(i)+s),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:s}=this._getLabelSizes(),o=2*n.padding,l=hM(this.labelRotation),c=Math.cos(l),d=Math.sin(l);if(a){const t=n.mirror?0:d*i.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*i.width+d*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,d,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let d=0,u=0;o?l?(d=r*e.width,u=n*t.height):(d=n*e.height,u=r*t.width):"start"===i?u=t.width:"end"===i?d=e.width:"inner"!==i&&(d=e.width/2,u=t.width/2),this.paddingLeft=Math.max((d-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((u-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){LT(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)PT(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=qR(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,s=[],a=[],o=Math.floor(t/HR(t,n));let l,c,d,u,h,p,m,f,g,v,y,x=0,b=0;for(l=0;l<t;l+=o){if(u=e[l].label,h=this._resolveTickFontOptions(l),r.font=p=h.string,m=i[p]=i[p]||{data:{},gc:[]},f=h.lineHeight,g=v=0,PT(u)||TT(u)){if(TT(u))for(c=0,d=u.length;c<d;++c)y=u[c],PT(y)||TT(y)||(g=ZM(r,m.data,m.gc,g,y),v+=f)}else g=ZM(r,m.data,m.gc,g,u),v=f;s.push(g),a.push(v),x=Math.max(g,x),b=Math.max(v,b)}!function(e,t){FT(e,e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}})}(i,t);const w=s.indexOf(x),j=a.indexOf(b),N=e=>({width:s[e]||0,height:a[e]||0});return{first:N(0),last:N(t-1),widest:N(w),highest:N(j),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return function(e){return bM(e,-32768,32767)}(this._alignToPixels?tD(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return kD(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=kD(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=hM(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,a=i?i.widest.width+s:0,o=i?i.highest.height+s:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:a}=r,o=i.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),d=KR(i),u=[],h=a.setContext(this.getContext()),p=h.display?h.width:0,m=p/2,f=function(e){return tD(n,e,p)};let g,v,y,x,b,w,j,N,k,A,S,_;if("top"===s)g=f(this.bottom),w=this.bottom-d,N=g-m,A=f(e.top)+m,_=e.bottom;else if("bottom"===s)g=f(this.top),A=e.top,_=f(e.bottom)-m,w=g+m,N=this.top+d;else if("left"===s)g=f(this.right),b=this.right-d,j=g-m,k=f(e.left)+m,S=e.right;else if("right"===s)g=f(this.left),k=e.left,S=f(e.right)-m,b=g+m,j=this.left+d;else if("x"===t){if("center"===s)g=f((e.top+e.bottom)/2+.5);else if(MT(s)){const e=Object.keys(s)[0],t=s[e];g=f(this.chart.scales[e].getPixelForValue(t))}A=e.top,_=e.bottom,w=g+m,N=w+d}else if("y"===t){if("center"===s)g=f((e.left+e.right)/2);else if(MT(s)){const e=Object.keys(s)[0],t=s[e];g=f(this.chart.scales[e].getPixelForValue(t))}b=g-m,j=b-d,k=e.left,S=e.right}const C=RT(r.ticks.maxTicksLimit,c),E=Math.max(1,Math.ceil(c/C));for(v=0;v<c;v+=E){const e=this.getContext(v),t=i.setContext(e),r=a.setContext(e),s=t.lineWidth,c=t.color,d=r.dash||[],h=r.dashOffset,p=t.tickWidth,m=t.tickColor,f=t.tickBorderDash||[],g=t.tickBorderDashOffset;y=GR(this,v,o),void 0!==y&&(x=tD(n,y,s),l?b=j=k=S=x:w=N=A=_=x,u.push({tx1:b,ty1:w,tx2:j,ty2:N,x1:k,y1:A,x2:S,y2:_,width:s,color:c,borderDash:d,borderDashOffset:h,tickWidth:p,tickColor:m,tickBorderDash:f,tickBorderDashOffset:g}))}return this._ticksLength=c,this._borderValue=g,u}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:d}=i,u=KR(n.grid),h=u+c,p=d?-c:h,m=-hM(this.labelRotation),f=[];let g,v,y,x,b,w,j,N,k,A,S,_,C="middle";if("top"===r)w=this.bottom-p,j=this._getXAxisLabelAlignment();else if("bottom"===r)w=this.top+p,j=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,b=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(u);j=e.textAlign,b=e.x}else if("x"===t){if("center"===r)w=(e.top+e.bottom)/2+h;else if(MT(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)+h}j=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)b=(e.left+e.right)/2-h;else if(MT(r)){const e=Object.keys(r)[0],t=r[e];b=this.chart.scales[e].getPixelForValue(t)}j=this._getYAxisLabelAlignment(u).textAlign}"y"===t&&("start"===o?C="top":"end"===o&&(C="bottom"));const E=this._getLabelSizes();for(g=0,v=a.length;g<v;++g){y=a[g],x=y.label;const e=i.setContext(this.getContext(g));N=this.getPixelForTick(g)+i.labelOffset,k=this._resolveTickFontOptions(g),A=k.lineHeight,S=TT(x)?x.length:1;const t=S/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let u,h=j;if(s?(b=N,"inner"===j&&(h=g===v-1?this.options.reverse?"left":"right":0===g?this.options.reverse?"right":"left":"center"),_="top"===r?"near"===l||0!==m?-S*A+A/2:"center"===l?-E.highest.height/2-t*A+A:-E.highest.height+A/2:"near"===l||0!==m?A/2:"center"===l?E.highest.height/2-t*A:E.highest.height-S*A,d&&(_*=-1),0===m||e.showLabelBackdrop||(b+=A/2*Math.sin(m))):(w=N,_=(1-S)*A/2),e.showLabelBackdrop){const t=wD(e.backdropPadding),n=E.heights[g],r=E.widths[g];let i=_-t.top,s=0-t.left;switch(C){case"middle":i-=n/2;break;case"bottom":i-=n}switch(j){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":g===v-1?s-=r:g>0&&(s-=r/2)}u={left:s,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}f.push({label:x,font:k,textOffset:_,options:{rotation:m,color:n,strokeColor:o,strokeWidth:c,textAlign:h,textBaseline:C,translation:[b,w],backdrop:u}})}return f}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-hM(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=e+i,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,s=r.length;i<s;++i){const e=r[i];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,d,u;this.isHorizontal()?(l=tD(e,this.left,s)-s/2,c=tD(e,this.right,a)+a/2,d=u=o):(d=tD(e,this.top,s)-s/2,u=tD(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,d),t.lineTo(c,u),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&aD(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;hD(t,i.label,0,i.textOffset,n,e)}n&&oD(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=jD(n.font),s=wD(n.padding),a=n.align;let o=i.lineHeight/2;"bottom"===t||"center"===t||MT(t)?(o+=s.bottom,TT(n.text)&&(o+=i.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:d,rotation:u}=function(e,t,n,r){const{top:i,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:d}=l;let u,h,p,m=0;const f=a-i,g=o-s;if(e.isHorizontal()){if(h=TM(r,s,o),MT(n)){const e=Object.keys(n)[0],r=n[e];p=d[e].getPixelForValue(r)+f-t}else p="center"===n?(c.bottom+c.top)/2+f-t:VR(e,n,t);u=o-s}else{if(MT(n)){const e=Object.keys(n)[0],r=n[e];h=d[e].getPixelForValue(r)-g+t}else h="center"===n?(c.left+c.right)/2-g+t:VR(e,n,t);p=TM(r,a,i),m="left"===n?-rM:rM}return{titleX:h,titleY:p,maxWidth:u,rotation:m}}(this,o,t,a);hD(e,n.text,0,0,i,{color:n.color,maxWidth:d,rotation:u,textAlign:XR(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=RT(e.grid&&e.grid.z,-1),r=RT(e.border&&e.border.z,0);return this._isVisible()&&this.draw===JR.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];s[n]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return jD(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class $R{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=VT(Object.create(null),[n?QM.get(n):{},QM.get(t),e.defaults]);QM.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");QM.route(s,i,l,o)})}(t,e.defaultRoutes);e.descriptors&&QM.describe(t,e.descriptors)}(e,s,n),this.override&&QM.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in QM[r]&&(delete QM[r][n],this.override&&delete KM[n])}}class QR{constructor(){this.controllers=new $R(IO,"datasets",!0),this.elements=new $R(zR,"elements"),this.plugins=new $R(Object,"plugins"),this.scales=new $R(JR,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):FT(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=YT(e);LT(n["before"+r],[],n),t[e](n),LT(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var ZR=new QR;class eI{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===LT(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){PT(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=RT(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(ZR.plugins.items);for(let s=0;s<r.length;s++)n.push(ZR.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const e=i[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:s}=t;const a=[],o=e.getContext();for(const l of i){const t=l.id,i=tI(n[t],r);null!==i&&a.push({plugin:l,options:nI(e.config,{plugin:l,local:s[t]},i,o)})}return a}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function tI(e,t){return t||!1!==e?!0===e?{}:e:null}function nI(e,t,n,r){let{plugin:i,local:s}=t;const a=e.pluginScopeKeys(i),o=e.getOptionScopes(n,a);return s&&i.defaults&&o.push(i.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function rI(e,t){const n=QM.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function iI(e){if("x"===e||"y"===e||"r"===e)return e}function sI(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function aI(e){if(iI(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){const t=i.axis||sI(i.position)||e.length>1&&iI(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function oI(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function lI(e,t){const n=KM[e.type]||{scales:{}},r=t.scales||{},i=rI(e.type,t),s=Object.create(null);return Object.keys(r).forEach(t=>{const a=r[t];if(!MT(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=aI(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return oI(e,"x",n[0])||oI(e,"y",n[0])}return{}}(t,e),QM.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,i),c=n.scales||{};s[t]=HT(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const i=n.type||e.type,a=n.indexAxis||rI(i,t),o=(KM[i]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),i=n[t+"AxisID"]||t;s[i]=s[i]||Object.create(null),HT(s[i],[{axis:t},r[i],o[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];HT(t,[QM.scales[t.type],QM.scale])}),s}function cI(e){const t=e.options||(e.options={});t.plugins=RT(t.plugins,{}),t.scales=lI(e,t)}function dI(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const uI=new Map,hI=new Set;function pI(e,t){let n=uI.get(e);return n||(n=t(),uI.set(e,n),hI.add(n)),n}const mI=(e,t,n)=>{const r=KT(t,n);void 0!==r&&e.add(r)};class fI{constructor(e){this._config=function(e){return(e=e||{}).data=dI(e.data),cI(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=dI(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),cI(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return pI(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return pI("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return pI("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return pI("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>mI(o,e,t))),t.forEach(e=>mI(o,r,e)),t.forEach(e=>mI(o,KM[i]||{},e)),t.forEach(e=>mI(o,QM,e)),t.forEach(e=>mI(o,YM,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),hI.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,KM[t]||{},QM.datasets[t]||{},{type:t},QM,YM]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:a}=gI(this._resolverCache,e,r);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:r}=_D(e);for(const i of t){const t=n(i),s=r(i),a=(s||t)&&e[i];if(t&&(JT(a)||vI(a))||s&&TT(a))return!0}return!1}(s,t)){i.$shared=!1;o=SD(s,n=JT(n)?n():n,this.createResolver(e,n,a))}for(const l of t)i[l]=o[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=gI(this._resolverCache,e,n);return MT(t)?SD(i,t,void 0,r):i}}function gI(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:AD(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(i,s)}return s}const vI=e=>MT(e)&&Object.getOwnPropertyNames(e).some(t=>JT(e[t]));const yI=["top","bottom","left","right","chartArea"];function xI(e,t){return"top"===e||"bottom"===e||-1===yI.indexOf(e)&&"x"===t}function bI(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function wI(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),LT(n&&n.onComplete,[e],t)}function jI(e){const t=e.chart,n=t.options.animation;LT(n&&n.onProgress,[e],t)}function NI(e){return GD()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const kI={},AI=e=>{const t=NI(e);return Object.values(kI).filter(e=>e.canvas===t).pop()};function SI(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const s=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=s)}}}class _I{static register(){ZR.add(...arguments),CI()}static unregister(){ZR.remove(...arguments),CI()}constructor(e,t){const n=this.config=new fI(t),r=NI(e),i=AI(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!GD()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?kR:BR}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=ET(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new eI,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],kI[this.id]=this,a&&o?(bO.listen(this,"complete",wI),bO.listen(this,"progress",jI),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return PT(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ZR}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():tO(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return nD(this.canvas,this.ctx),this}stop(){return bO.stop(this),this}resize(e,t){bO.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,tO(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),LT(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){FT(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let i=[];t&&(i=i.concat(Object.keys(t).map(e=>{const n=t[e],r=aI(e,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}}))),FT(i,t=>{const i=t.options,s=i.id,a=aI(s,i),o=RT(i.type,t.dtype);void 0!==i.position&&xI(i.position,a)===xI(t.dposition)||(i.position=t.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(ZR.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)}),FT(r,(e,t)=>{e||delete n[t]}),FT(n,e=>{jR.configure(this,e,e.options),jR.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(bI("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||rI(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=ZR.getController(s),{datasetElementType:r,dataElementType:a}=QM.datasets[s];Object.assign(t,{dataElementType:ZR.getElement(a),datasetElementType:r&&ZR.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){FT(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||FT(i,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(bI("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){FT(this.scales,e=>{jR.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);$T(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){SI(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let i=1;i<t;i++)if(!$T(r,n(i)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;jR.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],FT(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,JT(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(bO.has(this)?this.attached&&!bO.running(this)&&bO.start(this):(this.draw(),wI({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=yO(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&aD(t,r),e.controller.draw(),r&&oD(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return sD(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=cR.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=kD(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,r);XT(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),bO.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),nD(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete kI[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};FT(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){FT(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},FT(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,s,a,o;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!BT(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=i(t,e),a=n?e:i(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,s=t,a=this._getActiveElements(e,r,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,LT(i.onHover,[e,a,this],this),o&&LT(i.onClick,[e,a,this],this));const c=!BT(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function CI(){return FT(_I.instances,e=>e._plugins.invalidate())}function EI(e,t,n,r){const i=function(e){return yD(e,["outerStart","outerEnd","innerStart","innerEnd"])}(e.options.borderRadius),s=(n-t)/2,a=Math.min(s,r*t/2),o=e=>{const t=(n-Math.min(s,e))*r/2;return bM(e,0,Math.min(s,t))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:bM(i.innerStart,0,a),innerEnd:bM(i.innerEnd,0,a)}}function PI(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function TI(e,t,n,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+r+n-c,0),h=d>0?d+r+n+c:0;let p=0;const m=i-l;if(r){const e=((d>0?d-r:0)+(u>0?u-r:0))/2;p=(m-(0!==e?m*e/(e+r):m))/2}const f=(m-Math.max(.001,m*u-n/QT)/u)/2,g=l+f+p,v=i-f-p,{outerStart:y,outerEnd:x,innerStart:b,innerEnd:w}=EI(t,h,u,v-g),j=u-y,N=u-x,k=g+y/j,A=v-x/N,S=h+b,_=h+w,C=g+b/S,E=v-w/_;if(e.beginPath(),s){const t=(k+A)/2;if(e.arc(a,o,u,k,t),e.arc(a,o,u,t,A),x>0){const t=PI(N,A,a,o);e.arc(t.x,t.y,x,A,v+rM)}const n=PI(_,v,a,o);if(e.lineTo(n.x,n.y),w>0){const t=PI(_,E,a,o);e.arc(t.x,t.y,w,v+rM,E+Math.PI)}const r=(v-w/h+(g+b/h))/2;if(e.arc(a,o,h,v-w/h,r,!0),e.arc(a,o,h,r,g+b/h,!0),b>0){const t=PI(S,C,a,o);e.arc(t.x,t.y,b,C+Math.PI,g-rM)}const i=PI(j,g,a,o);if(e.lineTo(i.x,i.y),y>0){const t=PI(j,k,a,o);e.arc(t.x,t.y,y,g-rM,k)}}else{e.moveTo(a,o);const t=Math.cos(k)*u+a,n=Math.sin(k)*u+o;e.lineTo(t,n);const r=Math.cos(A)*u+a,i=Math.sin(A)*u+o;e.lineTo(r,i)}e.closePath()}function MI(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h,borderRadius:p}=l,m="inner"===l.borderAlign;if(!c)return;e.setLineDash(u||[]),e.lineDashOffset=h,m?(e.lineWidth=2*c,e.lineJoin=d||"round"):(e.lineWidth=c,e.lineJoin=d||"bevel");let f=t.endAngle;if(s){TI(e,t,n,r,f,i);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(f=a+(o%ZT||ZT))}m&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=i/o;e.beginPath(),e.arc(s,a,o,r-c,n+c),l>i?(c=i/l,e.arc(s,a,l,n+c,r-c,!0)):e.arc(s,a,i,n+rM,r-rM),e.closePath(),e.clip()}(e,t,f),l.selfJoin&&f-a>=QT&&0===p&&"miter"!==d&&function(e,t,n){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:d}=l,u=Math.min(c/a,yM(r-n));if(e.beginPath(),e.arc(i,s,a-c/2,r+u/2,n-u/2),o>0){const t=Math.min(c/o,yM(r-n));e.arc(i,s,o+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,a*yM(r-n));if("round"===d)e.arc(i,s,t,n-QT/2,r+QT/2,!0);else if("bevel"===d){const a=2*t*t,o=-a*Math.cos(n+QT/2)+i,l=-a*Math.sin(n+QT/2)+s,c=a*Math.cos(r+QT/2)+i,d=a*Math.sin(r+QT/2)+s;e.lineTo(o,l),e.lineTo(c,d)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,f),s||(TI(e,t,n,r,f,i),e.stroke())}(0,ol.A)(_I,"defaults",QM),(0,ol.A)(_I,"instances",kI),(0,ol.A)(_I,"overrides",KM),(0,ol.A)(_I,"registry",ZR),(0,ol.A)(_I,"version","4.5.0"),(0,ol.A)(_I,"getChart",AI);class DI extends zR{constructor(e){super(),(0,ol.A)(this,"circumference",void 0),(0,ol.A)(this,"endAngle",void 0),(0,ol.A)(this,"fullCircles",void 0),(0,ol.A)(this,"innerRadius",void 0),(0,ol.A)(this,"outerRadius",void 0),(0,ol.A)(this,"pixelMargin",void 0),(0,ol.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=fM(r,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:d}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),u=(this.options.spacing+this.options.borderWidth)/2,h=RT(d,o-a),p=xM(i,a,o)&&a!==o,m=h>=ZT||p,f=wM(s,l+u,c+u);return m&&f}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+i)/2,d=(s+a+l+o)/2;return{x:t+Math.cos(c)*d,y:n+Math.sin(c)*d}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>ZT?Math.floor(n/ZT):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const o=r*(1-Math.sin(Math.min(QT,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){TI(e,t,n,r,l,i);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+(o%ZT||ZT))}TI(e,t,n,r,l,i),e.fill()}(e,this,o,i,s),MI(e,this,o,i,s),e.restore()}}function OI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=RT(n.borderCapStyle,t.borderCapStyle),e.setLineDash(RT(n.borderDash,t.borderDash)),e.lineDashOffset=RT(n.borderDashOffset,t.borderDashOffset),e.lineJoin=RT(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=RT(n.borderWidth,t.borderWidth),e.strokeStyle=RT(n.borderColor,t.borderColor)}function RI(e,t,n){e.lineTo(n.x,n.y)}function II(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:s=r-1}=n,{start:a,end:o}=t,l=Math.max(i,a),c=Math.min(s,o),d=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!d?r+c-l:c-l}}function LI(e,t,n,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:c}=II(i,n,r),d=function(e){return e.stepped?lD:e.tension||"monotone"===e.cubicInterpolationMode?cD:RI}(s);let u,h,p,{move:m=!0,reverse:f}=r||{};for(u=0;u<=c;++u)h=i[(o+(f?c-u:u))%a],h.skip||(m?(e.moveTo(h.x,h.y),m=!1):d(e,p,h,f,s.stepped),p=h);return l&&(h=i[(o+(f?c:0))%a],d(e,p,h,f,s.stepped)),!!l}function FI(e,t,n,r){const i=t.points,{count:s,start:a,ilen:o}=II(i,n,r),{move:l=!0,reverse:c}=r||{};let d,u,h,p,m,f,g=0,v=0;const y=e=>(a+(c?o-e:e))%s,x=()=>{p!==m&&(e.lineTo(g,m),e.lineTo(g,p),e.lineTo(g,f))};for(l&&(u=i[y(0)],e.moveTo(u.x,u.y)),d=0;d<=o;++d){if(u=i[y(d)],u.skip)continue;const t=u.x,n=u.y,r=0|t;r===h?(n<p?p=n:n>m&&(m=n),g=(v*g+t)/++v):(x(),e.lineTo(t,n),h=r,v=0,p=m=n),f=n}x()}function BI(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?FI:LI}(0,ol.A)(DI,"id","arc"),(0,ol.A)(DI,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,ol.A)(DI,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,ol.A)(DI,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const zI="function"===typeof Path2D;function WI(e,t,n,r){zI&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),OI(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:s}=t,a=BI(t);for(const o of i)OI(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class UI extends zR{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;qD(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}(n,i,s,r);return mO(e,!0===r?[{start:a,end:o,loop:s}]:function(e,t,n,r){const i=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:t%i,end:(a-1)%i,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%i,end:o%i,loop:r}),s}(n,a,o<a?o+i:o,!!e._fullLoop&&0===a&&o===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,s=pO(this,{property:t,start:r,end:r});if(!s.length)return;const a=[],o=function(e){return e.stepped?sO:e.tension||"monotone"===e.cubicInterpolationMode?aO:iO}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:d}=s[l],u=i[c],h=i[d];if(u===h){a.push(u);continue}const p=o(u,h,Math.abs((r-u[t])/(h[t]-u[t])),n.stepped);p[t]=e[t],a.push(p)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return BI(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=BI(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)s&=i(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),WI(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function VI(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}(0,ol.A)(UI,"id","line"),(0,ol.A)(UI,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,ol.A)(UI,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,ol.A)(UI,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class HI extends zR{constructor(e){super(),(0,ol.A)(this,"parsed",void 0),(0,ol.A)(this,"skip",void 0),(0,ol.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return VI(this,e,"x",t)}inYRange(e,t){return VI(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!sD(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,rD(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function qI(e,t){const{x:n,y:r,base:i,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,d,u;return e.horizontal?(u=a/2,o=Math.min(n,i),l=Math.max(n,i),c=r-u,d=r+u):(u=s/2,o=n-u,l=n+u,c=Math.min(r,i),d=Math.max(r,i)),{left:o,top:c,right:l,bottom:d}}function GI(e,t,n,r){return e?0:bM(t,n,r)}function KI(e){const t=qI(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=xD(r);return{t:GI(i.top,s.top,0,n),r:GI(i.right,s.right,0,t),b:GI(i.bottom,s.bottom,0,n),l:GI(i.left,s.left,0,t)}}(e,n/2,r/2),s=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=bD(i),a=Math.min(t,n),o=e.borderSkipped,l=r||MT(i);return{topLeft:GI(!l||o.top||o.left,s.topLeft,0,a),topRight:GI(!l||o.top||o.right,s.topRight,0,a),bottomLeft:GI(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:GI(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function YI(e,t,n,r){const i=null===t,s=null===n,a=e&&!(i&&s)&&qI(e,r);return a&&(i||wM(t,a.left,a.right))&&(s||wM(n,a.top,a.bottom))}function XI(e,t){e.rect(t.x,t.y,t.w,t.h)}function JI(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+a,radius:e.radius}}(0,ol.A)(HI,"id","point"),(0,ol.A)(HI,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,ol.A)(HI,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class $I extends zR{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=KI(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?pD:XI;var o;e.save(),s.w===i.w&&s.h===i.h||(e.beginPath(),a(e,JI(s,t,i)),e.clip(),a(e,JI(i,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,JI(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return YI(this,e,t,n)}inXRange(e,t){return YI(this,e,null,t)}inYRange(e,t){return YI(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,ol.A)($I,"id","bar"),(0,ol.A)($I,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,ol.A)($I,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});var QI=Object.freeze({__proto__:null,ArcElement:DI,BarElement:$I,LineElement:UI,PointElement:HI});const ZI=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],eL=ZI.map(e=>e.replace("rgb(","rgba(").replace(")",", 0.5)"));function tL(e){return ZI[e%ZI.length]}function nL(e){return eL[e%eL.length]}function rL(e){let t=0;return(n,r)=>{const i=e.getDatasetMeta(r).controller;i instanceof KO?t=function(e,t){return e.backgroundColor=e.data.map(()=>tL(t++)),t}(n,t):i instanceof XO?t=function(e,t){return e.backgroundColor=e.data.map(()=>nL(t++)),t}(n,t):i&&(t=function(e,t){return e.borderColor=tL(t),e.backgroundColor=nL(t),++t}(n,t))}}function iL(e){let t;for(t in e)if(e[t].borderColor||e[t].backgroundColor)return!0;return!1}var sL={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(e,t,n){if(!n.enabled)return;const{data:{datasets:r},options:i}=e.config,{elements:s}=i,a=iL(r)||(o=i)&&(o.borderColor||o.backgroundColor)||s&&iL(s)||"rgba(0,0,0,0.1)"!==QM.borderColor||"rgba(0,0,0,0.1)"!==QM.backgroundColor;var o;if(!n.forceOverride&&a)return;const l=rL(e);r.forEach(l)}};function aL(e){if(e._decimated){const t=e._data;delete e._decimated,delete e._data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function oL(e){e.data.datasets.forEach(e=>{aL(e)})}var lL={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(e,t,n)=>{if(!n.enabled)return void oL(e);const r=e.width;e.data.datasets.forEach((t,i)=>{const{_data:s,indexAxis:a}=t,o=e.getDatasetMeta(i),l=s||t.data;if("y"===ND([a,e.options.indexAxis]))return;if(!o.controller.supportsDecimation)return;const c=e.scales[o.xAxisID];if("linear"!==c.type&&"time"!==c.type)return;if(e.options.parsing)return;let{start:d,count:u}=function(e,t){const n=t.length;let r,i=0;const{iScale:s}=e,{min:a,max:o,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(i=bM(NM(t,s.axis,a).lo,0,n-1)),r=c?bM(NM(t,s.axis,o).hi+1,i,n)-i:n-i,{start:i,count:r}}(o,l);if(u<=(n.threshold||4*r))return void aL(t);let h;switch(PT(s)&&(t._data=l,delete t.data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(e){this._data=e}})),n.algorithm){case"lttb":h=function(e,t,n,r,i){const s=i.samples||r;if(s>=n)return e.slice(t,t+n);const a=[],o=(n-2)/(s-2);let l=0;const c=t+n-1;let d,u,h,p,m,f=t;for(a[l++]=e[f],d=0;d<s-2;d++){let r,i=0,s=0;const c=Math.floor((d+1)*o)+1+t,g=Math.min(Math.floor((d+2)*o)+1,n)+t,v=g-c;for(r=c;r<g;r++)i+=e[r].x,s+=e[r].y;i/=v,s/=v;const y=Math.floor(d*o)+1+t,x=Math.min(Math.floor((d+1)*o)+1,n)+t,{x:b,y:w}=e[f];for(h=p=-1,r=y;r<x;r++)p=.5*Math.abs((b-i)*(e[r].y-w)-(b-e[r].x)*(s-w)),p>h&&(h=p,u=e[r],m=r);a[l++]=u,f=m}return a[l++]=e[c],a}(l,d,u,r,n);break;case"min-max":h=function(e,t,n,r){let i,s,a,o,l,c,d,u,h,p,m=0,f=0;const g=[],v=t+n-1,y=e[t].x,x=e[v].x-y;for(i=t;i<t+n;++i){s=e[i],a=(s.x-y)/x*r,o=s.y;const t=0|a;if(t===l)o<h?(h=o,c=i):o>p&&(p=o,d=i),m=(f*m+s.x)/++f;else{const n=i-1;if(!PT(c)&&!PT(d)){const t=Math.min(c,d),r=Math.max(c,d);t!==u&&t!==n&&g.push((0,Ne.A)((0,Ne.A)({},e[t]),{},{x:m})),r!==u&&r!==n&&g.push((0,Ne.A)((0,Ne.A)({},e[r]),{},{x:m}))}i>0&&n!==u&&g.push(e[n]),g.push(s),l=t,f=0,h=p=o,c=d=u=i}}return g}(l,d,u,r);break;default:throw new Error("Unsupported decimation algorithm '".concat(n.algorithm,"'"))}t._decimated=h})},destroy(e){oL(e)}};function cL(e,t,n,r){if(r)return;let i=t[e],s=n[e];return"angle"===e&&(i=yM(i),s=yM(s)),{property:e,start:i,end:s}}function dL(e,t,n){for(;t>e;t--){const e=n[t];if(!isNaN(e.x)&&!isNaN(e.y))break}return t}function uL(e,t,n,r){return e&&t?r(e[n],t[n]):e?e[n]:t?t[n]:0}function hL(e,t){let n=[],r=!1;return TT(e)?(r=!0,n=e):n=function(e,t){const{x:n=null,y:r=null}=e||{},i=t.points,s=[];return t.segments.forEach(e=>{let{start:t,end:a}=e;a=dL(t,a,i);const o=i[t],l=i[a];null!==r?(s.push({x:o.x,y:r}),s.push({x:l.x,y:r})):null!==n&&(s.push({x:n,y:o.y}),s.push({x:n,y:l.y}))}),s}(e,t),n.length?new UI({points:n,options:{tension:0},_loop:r,_fullLoop:r}):null}function pL(e){return e&&!1!==e.fill}function mL(e,t,n){let r=e[t].fill;const i=[t];let s;if(!n)return r;for(;!1!==r&&-1===i.indexOf(r);){if(!DT(r))return r;if(s=e[r],!s)return!1;if(s.visible)return r;i.push(r),r=s.fill}return!1}function fL(e,t,n){const r=function(e){const t=e.options,n=t.fill;let r=RT(n&&n.target,n);void 0===r&&(r=!!t.backgroundColor);if(!1===r||null===r)return!1;if(!0===r)return"origin";return r}(e);if(MT(r))return!isNaN(r.value)&&r;let i=parseFloat(r);return DT(i)&&Math.floor(i)===i?function(e,t,n,r){"-"!==e&&"+"!==e||(n=t+n);if(n===t||n<0||n>=r)return!1;return n}(r[0],t,i,n):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function gL(e,t,n){const r=[];for(let i=0;i<n.length;i++){const s=n[i],{first:a,last:o,point:l}=vL(s,t,"x");if(!(!l||a&&o))if(a)r.unshift(l);else if(e.push(l),!o)break}e.push(...r)}function vL(e,t,n){const r=e.interpolate(t,n);if(!r)return{};const i=r[n],s=e.segments,a=e.points;let o=!1,l=!1;for(let c=0;c<s.length;c++){const e=s[c],t=a[e.start][n],r=a[e.end][n];if(wM(i,t,r)){o=i===t,l=i===r;break}}return{first:o,last:l,point:r}}class yL{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:i,radius:s}=this;return t=t||{start:0,end:ZT},e.arc(r,i,s,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,i=e.angle;return{x:t+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function xL(e){const{chart:t,fill:n,line:r}=e;if(DT(n))return function(e,t){const n=e.getDatasetMeta(t),r=n&&e.isDatasetVisible(t);return r?n.dataset:null}(t,n);if("stack"===n)return function(e){const{scale:t,index:n,line:r}=e,i=[],s=r.segments,a=r.points,o=function(e,t){const n=[],r=e.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const e=r[i];if(e.index===t)break;e.hidden||n.unshift(e.dataset)}return n}(t,n);o.push(hL({x:null,y:t.bottom},r));for(let l=0;l<s.length;l++){const e=s[l];for(let t=e.start;t<=e.end;t++)gL(i,a[t],o)}return new UI({points:i,options:{}})}(e);if("shape"===n)return!0;const i=function(e){const t=e.scale||{};if(t.getPointPositionForValue)return function(e){const{scale:t,fill:n}=e,r=t.options,i=t.getLabels().length,s=r.reverse?t.max:t.min,a=function(e,t,n){let r;return r="start"===e?n:"end"===e?t.options.reverse?t.min:t.max:MT(e)?e.value:t.getBaseValue(),r}(n,t,s),o=[];if(r.grid.circular){const e=t.getPointPositionForValue(0,s);return new yL({x:e.x,y:e.y,radius:t.getDistanceFromCenterForValue(a)})}for(let l=0;l<i;++l)o.push(t.getPointPositionForValue(l,a));return o}(e);return function(e){const{scale:t={},fill:n}=e,r=function(e,t){let n=null;return"start"===e?n=t.bottom:"end"===e?n=t.top:MT(e)?n=t.getPixelForValue(e.value):t.getBasePixel&&(n=t.getBasePixel()),n}(n,t);if(DT(r)){const e=t.isHorizontal();return{x:e?r:null,y:e?null:r}}return null}(e)}(e);return i instanceof yL?i:hL(i,r)}function bL(e,t,n){const r=xL(t),{chart:i,index:s,line:a,scale:o,axis:l}=t,c=a.options,d=c.fill,u=c.backgroundColor,{above:h=u,below:p=u}=d||{},m=i.getDatasetMeta(s),f=yO(i,m);r&&a.points.length&&(aD(e,n),function(e,t){const{line:n,target:r,above:i,below:s,area:a,scale:o,clip:l}=t,c=n._loop?"angle":t.axis;e.save();let d=s;s!==i&&("x"===c?(wL(e,r,a.top),NL(e,{line:n,target:r,color:i,scale:o,property:c,clip:l}),e.restore(),e.save(),wL(e,r,a.bottom)):"y"===c&&(jL(e,r,a.left),NL(e,{line:n,target:r,color:s,scale:o,property:c,clip:l}),e.restore(),e.save(),jL(e,r,a.right),d=i));NL(e,{line:n,target:r,color:d,scale:o,property:c,clip:l}),e.restore()}(e,{line:a,target:r,above:h,below:p,area:n,scale:o,axis:l,clip:f}),oD(e))}function wL(e,t,n){const{segments:r,points:i}=t;let s=!0,a=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=i[r],d=i[dL(r,l,i)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(c.x,n),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(d.x,n)}e.lineTo(t.first().x,n),e.closePath(),e.clip()}function jL(e,t,n){const{segments:r,points:i}=t;let s=!0,a=!1;e.beginPath();for(const o of r){const{start:r,end:l}=o,c=i[r],d=i[dL(r,l,i)];s?(e.moveTo(c.x,c.y),s=!1):(e.lineTo(n,c.y),e.lineTo(c.x,c.y)),a=!!t.pathSegment(e,o,{move:a}),a?e.closePath():e.lineTo(n,d.y)}e.lineTo(n,t.first().y),e.closePath(),e.clip()}function NL(e,t){const{line:n,target:r,property:i,color:s,scale:a,clip:o}=t,l=function(e,t,n){const r=e.segments,i=e.points,s=t.points,a=[];for(const o of r){let{start:e,end:r}=o;r=dL(e,r,i);const l=cL(n,i[e],i[r],o.loop);if(!t.segments){a.push({source:o,target:l,start:i[e],end:i[r]});continue}const c=pO(t,l);for(const t of c){const e=cL(n,s[t.start],s[t.end],t.loop),r=hO(o,i,e);for(const i of r)a.push({source:i,target:t,start:{[n]:uL(l,e,"start",Math.max)},end:{[n]:uL(l,e,"end",Math.min)}})}}return a}(n,r,i);for(const{source:c,target:d,start:u,end:h}of l){const{style:{backgroundColor:t=s}={}}=c,l=!0!==r;e.save(),e.fillStyle=t,kL(e,a,o,l&&cL(i,u,h)),e.beginPath();const p=!!n.pathSegment(e,c);let m;if(l){p?e.closePath():AL(e,r,h,i);const t=!!r.pathSegment(e,d,{move:p,reverse:!0});m=p&&t,m||AL(e,r,u,i)}e.closePath(),e.fill(m?"evenodd":"nonzero"),e.restore()}}function kL(e,t,n,r){const i=t.chart.chartArea,{property:s,start:a,end:o}=r||{};if("x"===s||"y"===s){let t,r,l,c;"x"===s?(t=a,r=i.top,l=o,c=i.bottom):(t=i.left,r=a,l=i.right,c=o),e.beginPath(),n&&(t=Math.max(t,n.left),l=Math.min(l,n.right),r=Math.max(r,n.top),c=Math.min(c,n.bottom)),e.rect(t,r,l-t,c-r),e.clip()}}function AL(e,t,n,r){const i=t.interpolate(n,r);i&&e.lineTo(i.x,i.y)}var SL={id:"filler",afterDatasetsUpdate(e,t,n){const r=(e.data.datasets||[]).length,i=[];let s,a,o,l;for(a=0;a<r;++a)s=e.getDatasetMeta(a),o=s.dataset,l=null,o&&o.options&&o instanceof UI&&(l={visible:e.isDatasetVisible(a),index:a,fill:fL(o,a,r),chart:e,axis:s.controller.options.indexAxis,scale:s.vScale,line:o}),s.$filler=l,i.push(l);for(a=0;a<r;++a)l=i[a],l&&!1!==l.fill&&(l.fill=mL(i,a,n.propagate))},beforeDraw(e,t,n){const r="beforeDraw"===n.drawTime,i=e.getSortedVisibleDatasetMetas(),s=e.chartArea;for(let a=i.length-1;a>=0;--a){const t=i[a].$filler;t&&(t.line.updateControlPoints(s,t.axis),r&&t.fill&&bL(e.ctx,t,s))}},beforeDatasetsDraw(e,t,n){if("beforeDatasetsDraw"!==n.drawTime)return;const r=e.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const t=r[i].$filler;pL(t)&&bL(e.ctx,t,e.chartArea)}},beforeDatasetDraw(e,t,n){const r=t.meta.$filler;pL(r)&&"beforeDatasetDraw"===n.drawTime&&bL(e.ctx,r,e.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const _L=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class CL extends zR{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=LT(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=jD(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=_L(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let d=e;i.textAlign="left",i.textBaseline="middle";let u=-1,h=-c;return this.legendItems.forEach((e,p)=>{const m=n+t/2+i.measureText(e.text).width;(0===p||l[l.length-1]+m+2*a>s)&&(d+=c,l[l.length-(p>0?0:1)]=0,h+=c,u++),o[p]={left:0,top:h,row:u,width:m,height:r},l[l.length-1]+=m+a}),d}_fitCols(e,t,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let d=a,u=0,h=0,p=0,m=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:f,itemHeight:g}=function(e,t,n,r,i){const s=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+r.measureText(i).width}(r,e,t,n),a=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=EL(t,n));return r}(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}(n,t,i,e,r);s>0&&h+g+2*a>c&&(d+=u+a,l.push({width:u,height:h}),p+=u+a,m++,u=h=0),o[s]={left:p,top:h,col:m,width:f,height:g},u=Math.max(u,f),h+=g+a}),d+=u,l.push({width:u,height:h}),d}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,s=oO(i,this.left,this.width);if(this.isHorizontal()){let i=0,a=TM(n,this.left+r,this.right-this.lineWidths[i]);for(const o of t)i!==o.row&&(i=o.row,a=TM(n,this.left+r,this.right-this.lineWidths[i])),o.top+=this.top+e+r,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+r}else{let i=0,a=TM(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const o of t)o.col!==i&&(i=o.col,a=TM(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),o.top=a,o.left+=this.left+r,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;aD(e,this),this._draw(),oD(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:s}=e,a=QM.color,o=oO(e.rtl,this.left,this.width),l=jD(s.font),{padding:c}=s,d=l.size,u=d/2;let h;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:p,boxHeight:m,itemHeight:f}=_L(s,d),g=this.isHorizontal(),v=this._computeTitleHeight();h=g?{x:TM(i,this.left+c,this.right-n[0]),y:this.top+c+v,line:0}:{x:this.left+c,y:TM(i,this.top+v+c,this.bottom-t[0].height),line:0},lO(this.ctx,e.textDirection);const y=f+c;this.legendItems.forEach((x,b)=>{r.strokeStyle=x.fontColor,r.fillStyle=x.fontColor;const w=r.measureText(x.text).width,j=o.textAlign(x.textAlign||(x.textAlign=s.textAlign)),N=p+u+w;let k=h.x,A=h.y;o.setWidth(this.width),g?b>0&&k+N+c>this.right&&(A=h.y+=y,h.line++,k=h.x=TM(i,this.left+c,this.right-n[h.line])):b>0&&A+y>this.bottom&&(k=h.x=k+t[h.line].width+c,h.line++,A=h.y=TM(i,this.top+v+c,this.bottom-t[h.line].height));if(function(e,t,n){if(isNaN(p)||p<=0||isNaN(m)||m<0)return;r.save();const i=RT(n.lineWidth,1);if(r.fillStyle=RT(n.fillStyle,a),r.lineCap=RT(n.lineCap,"butt"),r.lineDashOffset=RT(n.lineDashOffset,0),r.lineJoin=RT(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=RT(n.strokeStyle,a),r.setLineDash(RT(n.lineDash,[])),s.usePointStyle){const a={radius:m*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=o.xPlus(e,p/2);iD(r,a,l,t+u,s.pointStyleWidth&&p)}else{const s=t+Math.max((d-m)/2,0),a=o.leftForLtr(e,p),l=bD(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?pD(r,{x:a,y:s,w:p,h:m,radius:l}):r.rect(a,s,p,m),r.fill(),0!==i&&r.stroke()}r.restore()}(o.x(k),A,x),k=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(j,k+p+u,g?k+N:this.right,e.rtl),function(e,t,n){hD(r,n.text,e,t+f/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(k),A,x),g)h.x+=N+c;else if("string"!==typeof x.text){const e=l.lineHeight;h.y+=EL(x,e)+c}else h.y+=y}),cO(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=jD(t.font),r=wD(t.padding);if(!t.display)return;const i=oO(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,d=this.left,u=this.width;if(this.isHorizontal())u=Math.max(...this.lineWidths),c=this.top+l,d=TM(e.align,d,this.right-u);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+TM(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const h=TM(a,d,d+u);s.textAlign=i.textAlign(PM(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,hD(s,t.text,h,c,n)}_computeTitleHeight(){const e=this.options.title,t=jD(e.font),n=wD(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(wM(e,this.left,this.right)&&wM(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],wM(e,r.left,r.left+r.width)&&wM(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const r=this._hoveredItem,i=((e,t)=>null!==e&&null!==t&&e.datasetIndex===t.datasetIndex&&e.index===t.index)(r,n);r&&!i&&LT(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&LT(t.onHover,[e,n,this],this)}else n&&LT(t.onClick,[e,n,this],this)}}function EL(e,t){return t*(e.text?e.text.length:0)}var PL={id:"legend",_element:CL,start(e,t,n){const r=e.legend=new CL({ctx:e.ctx,options:n,chart:e});jR.configure(e,r,n),jR.addBox(e,r)},stop(e){jR.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;jR.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=wD(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class TL extends zR{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=TT(n.text)?n.text.length:1;this._padding=wD(n.padding);const i=r*jD(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:s}=this,a=s.align;let o,l,c,d=0;return this.isHorizontal()?(l=TM(a,n,i),c=t+e,o=i-n):("left"===s.position?(l=n+e,c=TM(a,r,t),d=-.5*QT):(l=i-e,c=TM(a,t,r),d=.5*QT),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:d}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=jD(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(r);hD(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:PM(t.align),textBaseline:"middle",translation:[i,s]})}}var ML={id:"title",_element:TL,start(e,t,n){!function(e,t){const n=new TL({ctx:e.ctx,options:t,chart:e});jR.configure(e,n,t),jR.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;jR.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;jR.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const DL=new WeakMap;var OL={id:"subtitle",start(e,t,n){const r=new TL({ctx:e.ctx,options:n,chart:e});jR.configure(e,r,n),jR.addBox(e,r),DL.set(e,r)},stop(e){jR.removeBox(e,DL.get(e)),DL.delete(e)},beforeUpdate(e,t,n){const r=DL.get(e);jR.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const RL={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++s}}if(0===s||0===r.size)return!1;const a=[...r].reduce((e,t)=>e+t)/r.size;return{x:a,y:i/s}},nearest(e,t){if(!e.length)return!1;let n,r,i,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=gM(t,r.getCenterPoint());e<o&&(o=e,i=r)}}if(i){const e=i.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function IL(e,t){return t&&(TT(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function LL(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function FL(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:e,label:a,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function BL(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=jD(t.bodyFont),c=jD(t.titleFont),d=jD(t.footerFont),u=s.length,h=i.length,p=r.length,m=wD(t.padding);let f=m.height,g=0,v=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(v+=e.beforeBody.length+e.afterBody.length,u&&(f+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),v){f+=p*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(v-p)*l.lineHeight+(v-1)*t.bodySpacing}h&&(f+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let y=0;const x=function(e){g=Math.max(g,n.measureText(e).width+y)};return n.save(),n.font=c.string,FT(e.title,x),n.font=l.string,FT(e.beforeBody.concat(e.afterBody),x),y=t.displayColors?a+2+t.boxPadding:0,FT(r,e=>{FT(e.before,x),FT(e.lines,x),FT(e.after,x)}),y=0,n.font=d.string,FT(e.footer,x),n.restore(),g+=m.width,{width:g,height:f}}function zL(e,t,n,r){const{x:i,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=i<=(o+l)/2?"left":"right":i<=s/2?c="left":i>=a-s/2&&(c="right"),function(e,t,n,r){const{x:i,width:s}=r,a=n.caretSize+n.caretPadding;return"left"===e&&i+s+a>t.width||"right"===e&&i-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function WL(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||zL(e,t,n,r),yAlign:r}}function UL(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=i+s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=bD(a);let m=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const f=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===o?m+=c:"right"===o&&(m-=c):"left"===o?m-=Math.max(d,h)+i:"right"===o&&(m+=Math.max(u,p)+i),{x:bM(m,0,r.width-t.width),y:bM(f,0,r.height-t.height)}}function VL(e,t,n){const r=wD(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function HL(e){return IL([],LL(e))}function qL(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const GL={beforeTitle:CT,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:CT,beforeBody:CT,beforeLabel:CT,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return PT(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:CT,afterBody:CT,beforeFooter:CT,footer:CT,afterFooter:CT};function KL(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?GL[t].call(n,r):i}class YL extends zR{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new kO(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,kD(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=KL(n,"beforeTitle",this,e),i=KL(n,"title",this,e),s=KL(n,"afterTitle",this,e);let a=[];return a=IL(a,LL(r)),a=IL(a,LL(i)),a=IL(a,LL(s)),a}getBeforeBody(e,t){return HL(KL(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return FT(e,e=>{const t={before:[],lines:[],after:[]},i=qL(n,e);IL(t.before,LL(KL(i,"beforeLabel",this,e))),IL(t.lines,KL(i,"label",this,e)),IL(t.after,LL(KL(i,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return HL(KL(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=KL(n,"beforeFooter",this,e),i=KL(n,"footer",this,e),s=KL(n,"afterFooter",this,e);let a=[];return a=IL(a,LL(r)),a=IL(a,LL(i)),a=IL(a,LL(s)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(FL(this.chart,t[a]));return e.filter&&(l=l.filter((t,r,i)=>e.filter(t,r,i,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),FT(l,t=>{const n=qL(e.callbacks,t);r.push(KL(n,"labelColor",this,t)),i.push(KL(n,"labelPointStyle",this,t)),s.push(KL(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const e=RL[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=BL(this,n),a=Object.assign({},e,t),o=WL(this.chart,n,a),l=UL(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:d}=bD(a),{x:u,y:h}=e,{width:p,height:m}=t;let f,g,v,y,x,b;return"center"===i?(x=h+m/2,"left"===r?(f=u,g=f-s,y=x+s,b=x-s):(f=u+p,g=f+s,y=x-s,b=x+s),v=f):(g="left"===r?u+Math.max(o,c)+s:"right"===r?u+p-Math.max(l,d)-s:this.caretX,"top"===i?(y=h,x=y-s,f=g-s,v=g+s):(y=h+m,x=y+s,f=g+s,v=g-s),b=y),{x1:f,x2:g,x3:v,y1:y,y2:x,y3:b}}drawTitle(e,t,n){const r=this.title,i=r.length;let s,a,o;if(i){const l=oO(n.rtl,this.x,this.width);for(e.x=VL(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=jD(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<i;++o)t.fillText(r[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===i&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,i){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=i,c=jD(i.bodyFont),d=VL(this,"left",i),u=r.x(d),h=o<c.lineHeight?(c.lineHeight-o)/2:0,p=t.y+h;if(i.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(u,l)+l/2,c=p+o/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,rD(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,rD(e,t,n,c)}else{e.lineWidth=MT(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(u,l),n=r.leftForLtr(r.xPlus(u,1),l-2),a=bD(s.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,pD(e,{x:t,y:p,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),pD(e,{x:n,y:p+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,p,l,o),e.strokeRect(t,p,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,p+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,d=jD(n.bodyFont);let u=d.lineHeight,h=0;const p=oO(n.rtl,this.x,this.width),m=function(n){t.fillText(n,p.x(e.x+h),e.y+u/2),e.y+=u+i},f=p.textAlign(s);let g,v,y,x,b,w,j;for(t.textAlign=s,t.textBaseline="middle",t.font=d.string,e.x=VL(this,f,n),t.fillStyle=n.bodyColor,FT(this.beforeBody,m),h=a&&"right"!==f?"center"===s?l/2+c:l+2+c:0,x=0,w=r.length;x<w;++x){for(g=r[x],v=this.labelTextColors[x],t.fillStyle=v,FT(g.before,m),y=g.lines,a&&y.length&&(this._drawColorBox(t,e,x,p,n),u=Math.max(d.lineHeight,o)),b=0,j=y.length;b<j;++b)m(y[b]),u=d.lineHeight;FT(g.after,m)}h=0,u=d.lineHeight,FT(this.afterBody,m),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let s,a;if(i){const o=oO(n.rtl,this.x,this.width);for(e.x=VL(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=jD(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<i;++a)t.fillText(r[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:p}=bD(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+d,o),"top"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l-u,o),t.quadraticCurveTo(a+l,o,a+l,o+u),"center"===s&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-p),t.quadraticCurveTo(a+l,o+c,a+l-p,o+c),"bottom"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+h,o+c),t.quadraticCurveTo(a,o+c,a,o+c-h),"center"===s&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(a,o+d),t.quadraticCurveTo(a,o,a+d,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=RL[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=BL(this,e),a=Object.assign({},n,this._size),o=WL(t,e,a),l=UL(e,a,o,t);r._to===l.x&&i._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=wD(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),lO(e,t.textDirection),i.y+=s.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),cO(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),i=!BT(n,r),s=this._positionChanged(r,t);(i||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(e,i,t,n),a=this._positionChanged(s,e),o=t||!BT(s,i)||a;return o&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,s=RL[i.position].call(this,e,t);return!1!==s&&(n!==s.x||r!==s.y)}}(0,ol.A)(YL,"positioners",RL);var XL={id:"tooltip",_element:YL,positioners:RL,afterInit(e,t,n){n&&(e.tooltip=new YL({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,Ne.A)((0,Ne.A)({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:GL},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},JL=Object.freeze({__proto__:null,Colors:sL,Decimation:lL,Filler:SL,Legend:PL,SubTitle:OL,Title:ML,Tooltip:XL});function $L(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function QL(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class ZL extends JR{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(PT(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:bM(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:$L(n,e,RT(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){return QL.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function eF(e,t){const n=[],{bounds:r,step:i,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:d,includeBounds:u}=e,h=i||1,p=c-1,{min:m,max:f}=t,g=!PT(s),v=!PT(a),y=!PT(l),x=(f-m)/(d+1);let b,w,j,N,k=cM((f-m)/p/h)*h;if(k<1e-14&&!g&&!v)return[{value:m},{value:f}];N=Math.ceil(f/k)-Math.floor(m/k),N>p&&(k=cM(N*k/p/h)*h),PT(o)||(b=Math.pow(10,o),k=Math.ceil(k*b)/b),"ticks"===r?(w=Math.floor(m/k)*k,j=Math.ceil(f/k)*k):(w=m,j=f),g&&v&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/i,k/1e3)?(N=Math.round(Math.min((a-s)/k,c)),k=(a-s)/N,w=s,j=a):y?(w=g?s:w,j=v?a:j,N=l-1,k=(j-w)/N):(N=(j-w)/k,N=lM(N,Math.round(N),k/1e3)?Math.round(N):Math.ceil(N));const A=Math.max(mM(k),mM(w));b=Math.pow(10,PT(o)?A:o),w=Math.round(w*b)/b,j=Math.round(j*b)/b;let S=0;for(g&&(u&&w!==s?(n.push({value:s}),w<s&&S++,lM(Math.round((w+S*k)*b)/b,s,tF(s,x,e))&&S++):w<s&&S++);S<N;++S){const e=Math.round((w+S*k)*b)/b;if(v&&e>a)break;n.push({value:e})}return v&&u&&j!==a?n.length&&lM(n[n.length-1].value,a,tF(a,x,e))?n[n.length-1].value=a:n.push({value:a}):v&&j!==a||n.push({value:j}),n}function tF(e,t,n){let{horizontal:r,minRotation:i}=n;const s=hM(i),a=(r?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}(0,ol.A)(ZL,"id","category"),(0,ol.A)(ZL,"defaults",{ticks:{callback:QL}});class nF extends JR{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return PT(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=e=>r=t?r:e,a=e=>i=n?i:e;if(e){const e=oM(r),t=oM(i);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);a(i+t),e||s(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=eF({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&uM(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return HM(e,this.chart.options.locale,this.options.ticks.format)}}class rF extends nF{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=DT(e)?e:0,this.max=DT(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=hM(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,ol.A)(rF,"id","linear"),(0,ol.A)(rF,"defaults",{ticks:{callback:GM.formatters.numeric}});const iF=e=>Math.floor(aM(e)),sF=(e,t)=>Math.pow(10,iF(e)+t);function aF(e){return 1===e/Math.pow(10,iF(e))}function oF(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function lF(e,t){let{min:n,max:r}=t;n=OT(e.min,n);const i=[],s=iF(n);let a=function(e,t){let n=iF(t-e);for(;oF(e,t,n)>10;)n++;for(;oF(e,t,n)<10;)n--;return Math.min(n,iF(e))}(n,r),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,d=Math.round((n-c)*o)/o,u=Math.floor((n-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,a)),p=OT(e.min,Math.round((c+u+h*Math.pow(10,a))*o)/o);for(;p<r;)i.push({value:p,major:aF(p),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,o=a>=0?1:o),p=Math.round((c+u+h*Math.pow(10,a))*o)/o;const m=OT(e.max,p);return i.push({value:m,major:aF(m),significand:h}),i}class cF extends JR{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=nF.prototype.parse.apply(this,[e,t]);if(0!==n)return DT(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=DT(e)?Math.max(0,e):null,this.max=DT(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!DT(this._userMin)&&(this.min=e===sF(this.min,0)?sF(this.min,-1):sF(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,s=e=>r=t?r:e;n===r&&(n<=0?(i(1),s(10)):(i(sF(n,-1)),s(sF(r,1)))),n<=0&&i(sF(r,-1)),r<=0&&s(sF(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=lF({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&uM(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":HM(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=aM(e),this._valueRange=aM(this.max)-aM(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(aM(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function dF(e){const t=e.ticks;if(t.display&&e.display){const e=wD(t.backdropPadding);return RT(t.font&&t.font.size,QM.font.size)+e.height}return 0}function uF(e,t,n){return n=TT(n)?n:[n],{w:eD(e,t.string,n),h:n.length*t.lineHeight}}function hF(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function pF(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?QT/s:0;for(let l=0;l<s;l++){const s=a.setContext(e.getPointLabelContext(l));i[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+i[l],o),d=jD(s.font),u=uF(e.ctx,d,e._pointLabels[l]);r[l]=u;const h=yM(e.getIndexAngle(l)+o),p=Math.round(pM(h));mF(n,t,h,hF(p,c.x,u.w,0,180),hF(p,c.y,u.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:dF(s)/2,additionalAngle:a?QT/i:0};let c;for(let d=0;d<i;d++){l.padding=n[d],l.size=t[d];const i=fF(e,d,l);r.push(i),"auto"===o&&(i.visible=gF(i,c),i.visible&&(c=i))}return r}(e,r,i)}function mF(e,t,n,r,i){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/s,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),i.start<t.t?(l=(t.t-i.start)/a,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function fF(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:s,padding:a,size:o}=n,l=e.getPointPosition(t,r+i+a,s),c=Math.round(pM(yM(l.angle+rM))),d=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),u=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),h=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+o.w,bottom:d+o.h}}function gF(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:s}=e;return!(sD({x:n,y:r},t)||sD({x:n,y:s},t)||sD({x:i,y:r},t)||sD({x:i,y:s},t))}function vF(e,t,n){const{left:r,top:i,right:s,bottom:a}=n,{backdropColor:o}=t;if(!PT(o)){const n=bD(t.borderRadius),l=wD(t.backdropPadding);e.fillStyle=o;const c=r-l.left,d=i-l.top,u=s-r+l.width,h=a-i+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),pD(e,{x:c,y:d,w:u,h:h,radius:n}),e.fill()):e.fillRect(c,d,u,h)}}function yF(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,ZT);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=e.getPointPosition(s,t),i.lineTo(n.x,n.y)}}(0,ol.A)(cF,"id","logarithmic"),(0,ol.A)(cF,"defaults",{ticks:{callback:GM.formatters.logarithmic,major:{enabled:!0}}});class xF extends nF{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=wD(dF(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=DT(e)&&!isNaN(e)?e:0,this.max=DT(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/dF(this.options))}generateTickLabels(e){nF.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=LT(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?pF(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return yM(e*(ZT/(this._pointLabels.length||1))+hM(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(PT(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(PT(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return kD(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-rM+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),yF(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,s=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const s=r.setContext(e.getPointLabelContext(i));vF(n,s,t);const a=jD(s.font),{x:o,y:l,textAlign:c}=t;hD(n,e._pointLabels[i],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const s=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!r||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),yF(e,n,a,r),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}}),n.display){for(e.save(),a=s-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:i,lineWidth:s}=r;s&&i&&(e.lineWidth=s,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=jD(o.font);if(i=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=wD(o.backdropPadding);e.fillRect(-s/2-t.left,-i-l.size/2-t.top,s+t.width,l.size+t.height)}hD(e,r.label,0,-i,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,ol.A)(xF,"id","radialLinear"),(0,ol.A)(xF,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:GM.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,ol.A)(xF,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,ol.A)(xF,"descriptors",{angleLines:{_fallback:"grid"}});const bF={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},wF=Object.keys(bF);function jF(e,t){return e-t}function NF(e,t){if(PT(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof r&&(a=r(a)),DT(a)||(a="string"===typeof r?n.parse(a,r):n.parse(a)),null===a?null:(i&&(a="week"!==i||!dM(s)&&!0!==s?n.startOf(a,i):n.startOf(a,"isoWeek",s)),+a)}function kF(e,t,n,r){const i=wF.length;for(let s=wF.indexOf(e);s<i-1;++s){const e=bF[wF[s]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return wF[s]}return wF[i-1]}function AF(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=jM(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function SF(e,t,n){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class _F extends JR{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new nR(e.adapters.date);r.init(t),HT(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:NF(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(i=Math.max(i,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=DT(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=DT(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?kF(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let s=wF.length-1;s>=wF.indexOf(n);s--){const n=wF[s];if(bF[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return wF[n?wF.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=wF.indexOf(e)+1,n=wF.length;t<n;++t)if(bF[wF[t]].common)return wF[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&s.reverse(),SF(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;r=bM(r,0,s),i=bM(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||kF(i.minUnit,t,n,this._getLabelCapacity(t)),a=RT(r.ticks.stepSize,1),o="week"===s&&i.isoWeekday,l=dM(o)||!0===o,c={};let d,u,h=t;if(l&&(h=+e.startOf(h,"isoWeek",o)),h=+e.startOf(h,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const p="data"===r.ticks.source&&this.getDataTimestamps();for(d=h,u=0;d<n;d=+e.add(d,a,s),u++)AF(c,d,p);return d!==n&&"ticks"!==r.bounds&&1!==u||AF(c,d,p),Object.keys(c).sort(jF).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,s=i.ticks.callback;if(s)return LT(s,[e,t,n],this);const a=i.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],d=l&&a[l],u=n[t],h=l&&d&&u&&u.major;return this._adapter.format(e,r||(h?d:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=hM(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),s=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*s,h:n*s+a*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,SF(this,[e],this._majorUnit),r),s=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(NF(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _M(e.sort(jF))}}function CF(e,t,n){let r,i,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=NM(e,"pos",t)),({pos:r,time:s}=e[o]),({pos:i,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=NM(e,"time",t)),({time:r,pos:s}=e[o]),({time:i,pos:a}=e[l]));const c=i-r;return c?s+(a-s)*(t-r)/c:s}(0,ol.A)(_F,"id","time"),(0,ol.A)(_F,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class EF extends _F{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=CF(t,this.min),this._tableRange=CF(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=r.length;s<a;++s)c=r[s+1],o=r[s-1],l=r[s],Math.round((c+o)/2)!==l&&i.push({time:l,pos:s/(a-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(CF(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return CF(this._table,n*this._tableRange+this._minPos,!0)}}(0,ol.A)(EF,"id","timeseries"),(0,ol.A)(EF,"defaults",_F.defaults);const PF=[ZO,QI,JL,Object.freeze({__proto__:null,CategoryScale:ZL,LinearScale:rF,LogarithmicScale:cF,RadialLinearScale:xF,TimeScale:_F,TimeSeriesScale:EF})];_I.register(...PF);const TF=_I,MF=HP("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),DF=e=>{let{refreshTrigger:t=0}=e;const[r,s]=(0,i.useState)(!0),[a,o]=(0,i.useState)(null),l=(0,i.useRef)(null),c=(0,i.useRef)(null),[d,u]=(0,i.useState)(null),h=async()=>{try{s(!0),o(null),u(null);localStorage.getItem("token");const e=Do();console.log("\ud83d\udd0d NewRevenueTrendChart: Fetching revenue trend data for month:",e);const t=(await Promise.resolve().then(n.bind(n,9064))).default,r=(await t.get("/dashboard/unified-chart-data?month=".concat(e))).data;if(console.log("\ud83d\udcca NewRevenueTrendChart: API response:",r),r.success&&r.data&&r.data.revenueTrend){const e=r.data.revenueTrend;if(console.log("\ud83d\udcb0 Revenue trend data:",e),e.trendData&&Array.isArray(e.trendData)&&e.trendData.length>0){const t=e.trendData.map((e,t)=>{if(e.date){const t=new Date(e.date),n=t.getMonth()+1,r=t.getDate();return"".concat(n,"/").concat(r)}return e.time||"Point ".concat(t+1)}),n=e.trendData.map(e=>e.revenue||0);console.log("\ud83d\udcc8 Chart labels:",t),console.log("\ud83d\udcc8 Chart data:",n),u({labels:t,data:n})}else{console.log("\u26a0\ufe0f No trend data available, creating default data point");const t=e.totalRevenue||0,n=new Date,r="".concat(n.getMonth()+1,"/").concat(n.getDate());u({labels:[r],data:[t]})}}else console.log("\u274c Invalid API response format"),o("Unable to get revenue trend data")}catch(e){console.error("\u274c NewRevenueTrendChart error:",e),o(e.message)}finally{s(!1)}};return(0,i.useEffect)(()=>(h(),()=>{c.current&&c.current.destroy()}),[t]),(0,i.useEffect)(()=>{if(d&&l.current){c.current&&c.current.destroy();const e=Math.max(...d.data,0),t=0,n=e-t,r=7;let i=Math.ceil(n/(r-1))||20,s=i*(r-1);e>s&&(i=Math.ceil(e/(r-1)),s=i*(r-1));const a=l.current.getContext("2d");a?(console.log("\ud83c\udfa8 Creating chart with data:",d),c.current=new TF(a,{type:"line",data:{labels:d.labels,datasets:[{label:"Monthly Revenue",data:d.data,borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.2)",tension:.3,fill:!0,pointBackgroundColor:"#3b82f6",pointBorderColor:"#ffffff",pointBorderWidth:2,pointRadius:4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",display:!0},tooltip:{mode:"index",intersect:!1,callbacks:{label:function(e){return"Revenue: \u20ac".concat(e.parsed.y.toFixed(2))}}}},scales:{y:{beginAtZero:!0,min:t,max:s,ticks:{stepSize:i,callback:function(e){return"\u20ac"+e.toFixed(0)}}},x:{display:!0,title:{display:!0,text:"Date"}}}}})):o("Unable to get chart context")}},[d]),r?(0,sn.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,sn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center mb-4",children:[(0,sn.jsx)(MF,{className:"w-5 h-5 mr-2 text-blue-500"}),"Revenue Trend"]}),(0,sn.jsxs)("div",{className:"flex items-center justify-center h-64",children:[(0,sn.jsx)(GP,{className:"w-8 h-8 animate-spin text-blue-500"}),(0,sn.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading..."})]})]}):a?(0,sn.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,sn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center mb-4",children:[(0,sn.jsx)(MF,{className:"w-5 h-5 mr-2 text-blue-500"}),"Revenue Trend"]}),(0,sn.jsxs)("div",{className:"flex items-center justify-center h-64 text-red-500",children:[(0,sn.jsx)(KP,{className:"w-8 h-8 mr-2"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"font-medium",children:"Data loading failed"}),(0,sn.jsx)("p",{className:"text-sm text-gray-600",children:a}),(0,sn.jsx)("button",{onClick:h,className:"mt-2 text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Try Again"})]})]})]}):(0,sn.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,sn.jsx)(MF,{className:"w-5 h-5 mr-2 text-blue-500"}),"Revenue Trend"]}),(0,sn.jsx)("button",{onClick:h,className:"text-blue-600 hover:text-blue-800 text-sm font-medium",children:"Refresh"})]}),(0,sn.jsx)("div",{className:"h-64 relative",children:(0,sn.jsx)("canvas",{ref:l})})]})},OF=e=>{let{notifications:t=[],onDismiss:n,onDelete:r,onViewAll:s}=e;const[a,o]=(0,i.useState)(!1),[l,c]=(0,i.useState)(null),d=ee(),u=e=>{switch(e){case"warning":return(0,sn.jsx)(Zr,{className:"w-5 h-5 text-orange-500"});case"error":return(0,sn.jsx)(Zr,{className:"w-5 h-5 text-red-500"});case"success":return(0,sn.jsx)(li,{className:"w-5 h-5 text-green-500"});default:return(0,sn.jsx)(Ei,{className:"w-5 h-5 text-blue-500"})}},h=e=>{switch(e){case"warning":return"bg-orange-50 border-orange-200";case"error":return"bg-red-50 border-red-200";case"success":return"bg-green-50 border-green-200";default:return"bg-blue-50 border-blue-200"}},p=e=>{if(!e)return"";const t=new Date(e),n=new Date,r=Math.floor((n-t)/6e4);return r<1?"Just now":r<60?"".concat(r,"m ago"):r<1440?"".concat(Math.floor(r/60),"h ago"):"".concat(Math.floor(r/1440),"d ago")};if(!t.length)return(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-6",children:[(0,sn.jsx)("div",{className:"flex items-center justify-between mb-4",children:(0,sn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,sn.jsx)(si,{className:"w-5 h-5"}),"Notifications"]})}),(0,sn.jsxs)("div",{className:"text-center py-8",children:[(0,sn.jsx)(si,{className:"w-12 h-12 text-gray-300 mx-auto mb-4"}),(0,sn.jsx)("p",{className:"text-gray-500",children:"No notifications at the moment"}),(0,sn.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"You're all caught up!"})]})]});const m=a?t:t.slice(0,3);return(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-100 p-6",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[(0,sn.jsx)(si,{className:"w-5 h-5"}),"Notifications",t.length>0&&(0,sn.jsx)("span",{className:"bg-red-500 text-white text-xs rounded-full px-2 py-1 ml-2",children:t.length})]}),(0,sn.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sn.jsxs)("button",{onClick:()=>{d("/invoices?status=overdue")},className:"inline-flex items-center px-3 py-1.5 text-sm font-medium text-white bg-orange-600 hover:bg-orange-700 rounded-md transition-colors",title:"View Overdue Invoices",children:[(0,sn.jsx)(wi,{className:"w-4 h-4 mr-1"}),"Overdue Invoices"]}),s&&(0,sn.jsx)("button",{onClick:s,className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:"View All"})]})]}),(0,sn.jsx)("div",{className:"space-y-3",children:m.map((e,t)=>(0,sn.jsx)("div",{className:"p-4 rounded-lg border transition-all duration-200 hover:shadow-sm ".concat(h(e.type)),children:(0,sn.jsxs)("div",{className:"flex items-start gap-3",children:[(0,sn.jsx)("div",{className:"flex-shrink-0 mt-0.5",children:u(e.type)}),(0,sn.jsx)("div",{className:"flex-1 min-w-0",children:(0,sn.jsxs)("div",{className:"flex items-start justify-between",children:[(0,sn.jsxs)("div",{className:"flex-1",children:[e.title&&(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-1",children:e.title}),(0,sn.jsx)("p",{className:"text-sm text-gray-700",children:e.message}),e.count&&(0,sn.jsx)("div",{className:"mt-2",children:(0,sn.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:[e.count," items"]})})]}),(0,sn.jsxs)("div",{className:"flex items-center gap-2 ml-3",children:[e.timestamp&&(0,sn.jsxs)("div",{className:"flex items-center text-xs text-gray-500",children:[(0,sn.jsx)(pi,{className:"w-3 h-3 mr-1"}),p(e.timestamp)]}),r&&(0,sn.jsx)("button",{onClick:()=>{return n=e.id||t,void c(n);var n},className:"text-gray-400 hover:text-red-600 p-1",title:"Delete",children:(0,sn.jsx)(ns,{className:"w-4 h-4"})})]})]})})]})},e.id||t))}),t.length>3&&(0,sn.jsx)("div",{className:"mt-4 text-center",children:(0,sn.jsx)("button",{onClick:()=>o(!a),className:"text-sm text-blue-600 hover:text-blue-800 font-medium",children:a?"Show Less":"Show ".concat(t.length-3," More")})}),l&&(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sn.jsxs)("div",{className:"bg-white rounded-lg p-6 max-w-sm mx-4",children:[(0,sn.jsxs)("div",{className:"flex items-center mb-4",children:[(0,sn.jsx)(Zr,{className:"w-6 h-6 text-red-500 mr-3"}),(0,sn.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Confirm Delete"})]}),(0,sn.jsx)("p",{className:"text-gray-600 mb-6",children:"Are you sure you want to delete this notification? This action cannot be undone."}),(0,sn.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,sn.jsx)("button",{onClick:()=>{c(null)},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md transition-colors",children:"Cancel"}),(0,sn.jsx)("button",{onClick:()=>{l&&r&&r(l),c(null)},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 hover:bg-red-700 rounded-md transition-colors",children:"Delete"})]})]})})]})},RF=e=>{let{message:t,type:n="info",duration:r=5e3,onClose:s,position:a="top-right",showProgress:o=!0}=e;const[l,c]=(0,i.useState)(!0),[d,u]=(0,i.useState)(100),h=(0,i.useCallback)(()=>{c(!1),setTimeout(()=>{s&&s()},300)},[s]);(0,i.useEffect)(()=>{if(r>0){const e=setInterval(()=>{u(t=>{const n=t-100/(r/100);return n<=0?(clearInterval(e),h(),0):n})},100);return()=>clearInterval(e)}},[r,h]);return l?(0,sn.jsx)("div",{className:"fixed z-50 ".concat((()=>{switch(a){case"top-left":return"top-4 left-4";case"top-center":return"top-4 left-1/2 transform -translate-x-1/2";case"top-right":default:return"top-4 right-4";case"bottom-left":return"bottom-4 left-4";case"bottom-center":return"bottom-4 left-1/2 transform -translate-x-1/2";case"bottom-right":return"bottom-4 right-4"}})()," transition-all duration-300 ").concat(l?"opacity-100 translate-y-0":"opacity-0 -translate-y-2"),children:(0,sn.jsxs)("div",{className:"\n        max-w-sm w-full shadow-lg rounded-lg border overflow-hidden\n        ".concat((()=>{switch(n){case"success":return"bg-green-50 border-green-200";case"error":return"bg-red-50 border-red-200";case"warning":return"bg-yellow-50 border-yellow-200";default:return"bg-blue-50 border-blue-200"}})(),"\n        transform transition-all duration-300 ease-in-out\n        ").concat(l?"scale-100":"scale-95","\n      "),children:[(0,sn.jsx)("div",{className:"p-4",children:(0,sn.jsxs)("div",{className:"flex items-start",children:[(0,sn.jsx)("div",{className:"flex-shrink-0",children:(()=>{switch(n){case"success":return(0,sn.jsx)(li,{className:"w-5 h-5 text-green-500"});case"error":return(0,sn.jsx)(Zr,{className:"w-5 h-5 text-red-500"});case"warning":return(0,sn.jsx)(Zr,{className:"w-5 h-5 text-yellow-500"});default:return(0,sn.jsx)(Ei,{className:"w-5 h-5 text-blue-500"})}})()}),(0,sn.jsx)("div",{className:"ml-3 w-0 flex-1",children:(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-900",children:t})}),(0,sn.jsx)("div",{className:"ml-4 flex-shrink-0 flex",children:(0,sn.jsx)("button",{onClick:h,className:"inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600 transition ease-in-out duration-150",children:(0,sn.jsx)(ls,{className:"w-5 h-5"})})})]})}),o&&r>0&&(0,sn.jsx)("div",{className:"h-1 bg-gray-200",children:(0,sn.jsx)("div",{className:"h-full transition-all duration-100 ease-linear ".concat((()=>{switch(n){case"success":return"bg-green-500";case"error":return"bg-red-500";case"warning":return"bg-yellow-500";default:return"bg-blue-500"}})()),style:{width:"".concat(d,"%")}})})]})}):null},IF=e=>{let{toasts:t,removeToast:n}=e;return(0,sn.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50",children:t.map((e,t)=>(0,sn.jsx)("div",{className:"pointer-events-auto",style:{transform:"translateY(".concat(80*t,"px)")},children:(0,sn.jsx)(RF,(0,Ne.A)((0,Ne.A)({},e),{},{onClose:()=>n(e.id)}))},e.id))})};class LF extends i.Component{constructor(e){super(e),this.handleRetry=()=>{this.setState({isRetrying:!0}),setTimeout(()=>{this.setState({hasError:!1,error:null,errorInfo:null,isRetrying:!1})},1e3)},this.handleGoHome=()=>{window.location.href="/"},this.state={hasError:!1,error:null,errorInfo:null,isRetrying:!1}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState({error:e,errorInfo:t}),console.error("ErrorBoundary caught an error:",e,t)}render(){if(this.state.hasError){const{fallback:e}=this.props;return e?(0,sn.jsx)(e,{error:this.state.error,errorInfo:this.state.errorInfo,onRetry:this.handleRetry,isRetrying:this.state.isRetrying}):(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:(0,sn.jsx)("div",{className:"sm:mx-auto sm:w-full sm:max-w-md",children:(0,sn.jsx)("div",{className:"bg-white py-8 px-4 shadow sm:rounded-lg sm:px-10",children:(0,sn.jsxs)("div",{className:"text-center",children:[(0,sn.jsx)(ei,{className:"mx-auto h-12 w-12 text-red-500 mb-4"}),(0,sn.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-2",children:"\u51fa\u73b0\u4e86\u4e00\u4e9b\u95ee\u9898"}),(0,sn.jsx)("p",{className:"text-sm text-gray-600 mb-6",children:"\u62b1\u6b49\uff0c\u5e94\u7528\u7a0b\u5e8f\u9047\u5230\u4e86\u610f\u5916\u9519\u8bef\u3002\u8bf7\u5c1d\u8bd5\u5237\u65b0\u9875\u9762\u6216\u8fd4\u56de\u9996\u9875\u3002"}),!1,(0,sn.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3",children:[(0,sn.jsx)("button",{onClick:this.handleRetry,disabled:this.state.isRetrying,className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:this.state.isRetrying?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(Ki,{className:"animate-spin -ml-1 mr-2 h-4 w-4"}),"\u91cd\u8bd5\u4e2d..."]}):(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(Ki,{className:"-ml-1 mr-2 h-4 w-4"}),"\u91cd\u8bd5"]})}),(0,sn.jsxs)("button",{onClick:this.handleGoHome,className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,sn.jsx)(_i,{className:"-ml-1 mr-2 h-4 w-4"}),"\u8fd4\u56de\u9996\u9875"]})]})]})})})})}return this.props.children}}const FF=LF,BF=e=>{let{children:t,currentPage:n="dashboard",onNavigate:r,notifications:s=[],showBackButton:a=!1,onBack:o,title:l,actions:c=[]}=e;const[d,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1);(0,i.useEffect)(()=>{const e=()=>{p(window.scrollY>10)};return window.addEventListener("scroll",e),()=>window.removeEventListener("scroll",e)},[]);const m=[{id:"dashboard",label:"\u4eea\u8868\u677f",icon:_i,path:"/dashboard"},{id:"invoices",label:"\u53d1\u7968\u7ba1\u7406",icon:wi,path:"/invoices"},{id:"clients",label:"\u5ba2\u6237\u7ba1\u7406",icon:os,path:"/clients"},{id:"settings",label:"\u8bbe\u7f6e",icon:$i,path:"/settings"}],f=e=>{r(e.id,e.path),u(!1)},g=()=>{u(!1)},v=()=>(0,sn.jsx)("header",{className:"\n      fixed top-0 left-0 right-0 z-40 bg-white transition-all duration-200\n      ".concat(h?"shadow-md border-b border-gray-200":"border-b border-gray-100","\n    "),children:(0,sn.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[(0,sn.jsxs)("div",{className:"flex items-center",children:[a?(0,sn.jsx)("button",{onClick:o,className:"p-2 -ml-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:(0,sn.jsx)(ui,{className:"w-6 h-6"})}):(0,sn.jsx)("button",{onClick:()=>u(!0),className:"p-2 -ml-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:(0,sn.jsx)(Fi,{className:"w-6 h-6"})}),l&&(0,sn.jsx)("h1",{className:"ml-2 text-lg font-semibold text-gray-900 truncate",children:l})]}),(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[c.map((e,t)=>(0,sn.jsx)("button",{onClick:e.onClick,className:"p-2 rounded-lg ".concat(e.primary?"bg-blue-600 text-white hover:bg-blue-700":"text-gray-600 hover:text-gray-900 hover:bg-gray-100"),title:e.label,children:(0,sn.jsx)(e.icon,{className:"w-5 h-5"})},t)),(0,sn.jsxs)("button",{className:"relative p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:[(0,sn.jsx)(si,{className:"w-5 h-5"}),s.length>0&&(0,sn.jsx)("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center",children:s.length>9?"9+":s.length})]})]})]})}),y=()=>(0,sn.jsxs)(sn.Fragment,{children:[d&&(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:g}),(0,sn.jsxs)("div",{className:"\n        fixed top-0 left-0 h-full w-80 bg-white shadow-xl z-50 transform transition-transform duration-300 ease-in-out\n        ".concat(d?"translate-x-0":"-translate-x-full","\n      "),children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"w-8 h-8 bg-blue-600 rounded-lg flex items-center justify-center",children:(0,sn.jsx)(wi,{className:"w-5 h-5 text-white"})}),(0,sn.jsx)("span",{className:"ml-3 text-lg font-semibold text-gray-900",children:"\u53d1\u7968\u7cfb\u7edf"})]}),(0,sn.jsx)("button",{onClick:g,className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,sn.jsx)(ls,{className:"w-5 h-5"})})]}),(0,sn.jsx)("nav",{className:"flex-1 px-4 py-6",children:(0,sn.jsx)("ul",{className:"space-y-2",children:m.map(e=>(0,sn.jsx)("li",{children:(0,sn.jsxs)("button",{onClick:()=>f(e),className:"\n                    w-full flex items-center px-4 py-3 text-left rounded-lg transition-colors duration-200\n                    ".concat(n===e.id?"bg-blue-50 text-blue-700 border-r-2 border-blue-600":"text-gray-700 hover:bg-gray-100","\n                  "),children:[(0,sn.jsx)(e.icon,{className:"w-5 h-5 mr-3 ".concat(n===e.id?"text-blue-600":"text-gray-400")}),(0,sn.jsx)("span",{className:"font-medium",children:e.label})]})},e.id))})}),(0,sn.jsx)("div",{className:"p-4 border-t border-gray-200",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"w-10 h-10 bg-gray-300 rounded-full flex items-center justify-center",children:(0,sn.jsx)("span",{className:"text-sm font-medium text-gray-600",children:"U"})}),(0,sn.jsxs)("div",{className:"ml-3",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-900",children:"\u7528\u6237\u540d"}),(0,sn.jsx)("p",{className:"text-xs text-gray-500",children:"user@example.com"})]})]})})]})]}),x=()=>(0,sn.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-30",children:(0,sn.jsx)("div",{className:"flex",children:m.slice(0,4).map(e=>(0,sn.jsxs)("button",{onClick:()=>f(e),className:"\n              flex-1 flex flex-col items-center py-2 px-1 transition-colors duration-200\n              ".concat(n===e.id?"text-blue-600":"text-gray-400 hover:text-gray-600","\n            "),children:[(0,sn.jsx)(e.icon,{className:"w-6 h-6 mb-1"}),(0,sn.jsx)("span",{className:"text-xs font-medium",children:e.label})]},e.id))})}),b=()=>(0,sn.jsx)("button",{onClick:()=>r("create-invoice"),className:"fixed bottom-20 right-4 w-14 h-14 bg-blue-600 text-white rounded-full shadow-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-300 z-30 flex items-center justify-center",children:(0,sn.jsx)(qi,{className:"w-6 h-6"})});return(0,sn.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,sn.jsx)(v,{}),(0,sn.jsx)(y,{}),(0,sn.jsx)("main",{className:"pt-16 pb-20 px-4",children:(0,sn.jsx)("div",{className:"max-w-lg mx-auto",children:t})}),(0,sn.jsx)(x,{}),(0,sn.jsx)(b,{})]})},zF=e=>{let{onNavigate:t}=e;const[n,r]=(0,i.useState)(null),[s,a]=(0,i.useState)(!0),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)("month"),{success:u,error:h}=Eo(),p=async function(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];try{e?l(!0):a(!0),await new Promise(e=>setTimeout(e,1e3));r({summary:{totalRevenue:125680.5,totalInvoices:156,pendingInvoices:23,overdueInvoices:8},recentInvoices:[{id:"INV-2024-001",clientName:"ABC\u516c\u53f8",amount:5680,status:"paid",dueDate:"2024-01-15",createdAt:"2024-01-01"},{id:"INV-2024-002",clientName:"XYZ\u4f01\u4e1a",amount:3200,status:"pending",dueDate:"2024-01-20",createdAt:"2024-01-05"},{id:"INV-2024-003",clientName:"123\u6709\u9650\u516c\u53f8",amount:8900,status:"overdue",dueDate:"2024-01-10",createdAt:"2023-12-28"}],chartData:{revenue:[12e3,15e3,18e3,22e3,25e3,28e3],invoices:[45,52,48,61,55,67]}})}catch(t){h("\u52a0\u8f7d\u4eea\u8868\u677f\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}finally{a(!1),l(!1)}};(0,i.useEffect)(()=>{p()},[c]);const m=e=>{switch(e){case"paid":return"text-green-600 bg-green-50";case"pending":return"text-yellow-600 bg-yellow-50";case"overdue":return"text-red-600 bg-red-50";default:return"text-gray-600 bg-gray-50"}},f=e=>{switch(e){case"paid":return"\u5df2\u652f\u4ed8";case"pending":return"\u5f85\u652f\u4ed8";case"overdue":return"\u5df2\u903e\u671f";default:return"\u672a\u77e5"}},g=e=>{const t=void 0===e||null===e||isNaN(e)?0:e;return new Intl.NumberFormat("zh-CN",{style:"currency",currency:"CNY"}).format(t)},v=e=>{let{icon:t,title:n,value:r,change:i,color:s="blue"}=e;return(0,sn.jsx)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:(0,sn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"p-2 rounded-lg bg-".concat(s,"-50"),children:(0,sn.jsx)(t,{className:"w-5 h-5 text-".concat(s,"-600")})}),(0,sn.jsxs)("div",{className:"ml-3",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:n}),(0,sn.jsx)("p",{className:"text-lg font-semibold text-gray-900",children:r})]})]}),i&&(0,sn.jsxs)("div",{className:"flex items-center text-sm ".concat(i>0?"text-green-600":"text-red-600"),children:[(0,sn.jsx)(is,{className:"w-4 h-4 mr-1"}),(0,sn.jsxs)("span",{children:[Math.abs(i),"%"]})]})]})})},y=e=>{let{invoice:t}=e;return(0,sn.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200 mb-3",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h3",{className:"font-semibold text-gray-900",children:t.id}),(0,sn.jsx)("p",{className:"text-sm text-gray-600",children:t.clientName})]}),(0,sn.jsxs)("div",{className:"text-right",children:[(0,sn.jsx)("p",{className:"font-semibold text-gray-900",children:g(t.amount)}),(0,sn.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full ".concat(m(t.status)),children:f(t.status)})]})]}),(0,sn.jsxs)("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[(0,sn.jsxs)("span",{children:["\u5230\u671f\u65e5: ",t.dueDate]}),(0,sn.jsxs)("div",{className:"flex space-x-2",children:[(0,sn.jsx)("button",{className:"p-1 text-gray-400 hover:text-blue-600",children:(0,sn.jsx)(bi,{className:"w-4 h-4"})}),(0,sn.jsx)("button",{className:"p-1 text-gray-400 hover:text-green-600",children:(0,sn.jsx)(Ji,{className:"w-4 h-4"})}),(0,sn.jsx)("button",{className:"p-1 text-gray-400 hover:text-purple-600",children:(0,sn.jsx)(vi,{className:"w-4 h-4"})}),(0,sn.jsx)("button",{className:"p-1 text-gray-400 hover:text-gray-600",children:(0,sn.jsx)(Wi,{className:"w-4 h-4"})})]})]})]})},x=()=>(0,sn.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200 mb-6",children:[(0,sn.jsx)("h3",{className:"font-semibold text-gray-900 mb-3",children:"\u5feb\u6377\u64cd\u4f5c"}),(0,sn.jsxs)("div",{className:"grid grid-cols-2 gap-3",children:[(0,sn.jsxs)("button",{onClick:()=>t("create-invoice"),className:"flex items-center justify-center p-3 bg-blue-50 text-blue-600 rounded-lg hover:bg-blue-100 transition-colors",children:[(0,sn.jsx)(qi,{className:"w-5 h-5 mr-2"}),(0,sn.jsx)("span",{className:"font-medium",children:"\u521b\u5efa\u53d1\u7968"})]}),(0,sn.jsxs)("button",{onClick:()=>t("invoices"),className:"flex items-center justify-center p-3 bg-gray-50 text-gray-600 rounded-lg hover:bg-gray-100 transition-colors",children:[(0,sn.jsx)(wi,{className:"w-5 h-5 mr-2"}),(0,sn.jsx)("span",{className:"font-medium",children:"\u67e5\u770b\u5168\u90e8"})]})]})]});if(s)return(0,sn.jsx)(BF,{currentPage:"dashboard",onNavigate:t,children:(0,sn.jsx)(Io,{fullScreen:!0,text:"\u6b63\u5728\u52a0\u8f7d\u4eea\u8868\u677f\u6570\u636e..."})});const b=[{icon:Ki,label:"\u5237\u65b0",onClick:()=>{p(!0)},primary:!1},{icon:Ni,label:"\u7b5b\u9009",onClick:()=>{},primary:!1}];return(0,sn.jsx)(BF,{currentPage:"dashboard",onNavigate:t,title:"\u4eea\u8868\u677f",actions:b,children:(0,sn.jsxs)("div",{className:"space-y-6",children:[o&&(0,sn.jsxs)("div",{className:"flex items-center justify-center py-2",children:[(0,sn.jsx)(Ki,{className:"w-4 h-4 animate-spin text-blue-600 mr-2"}),(0,sn.jsx)("span",{className:"text-sm text-blue-600",children:"\u6b63\u5728\u5237\u65b0..."})]}),(0,sn.jsx)("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[{key:"week",label:"\u672c\u5468"},{key:"month",label:"\u672c\u6708"},{key:"quarter",label:"\u672c\u5b63\u5ea6"},{key:"year",label:"\u672c\u5e74"}].map(e=>(0,sn.jsx)("button",{onClick:()=>d(e.key),className:"px-4 py-2 rounded-lg text-sm font-medium whitespace-nowrap transition-colors ".concat(c===e.key?"bg-blue-600 text-white":"bg-white text-gray-600 border border-gray-200 hover:bg-gray-50"),children:e.label},e.key))}),(0,sn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sn.jsx)(v,{icon:gi,title:"\u603b\u6536\u5165",value:g(n.summary.totalRevenue),change:12.5,color:"green"}),(0,sn.jsx)(v,{icon:wi,title:"\u53d1\u7968\u603b\u6570",value:n.summary.totalInvoices,change:8.2,color:"blue"}),(0,sn.jsx)(v,{icon:pi,title:"\u5f85\u652f\u4ed8",value:n.summary.pendingInvoices,change:-2.1,color:"yellow"}),(0,sn.jsx)(v,{icon:is,title:"\u5df2\u903e\u671f",value:n.summary.overdueInvoices,change:-15.3,color:"red"})]}),(0,sn.jsx)(x,{}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sn.jsx)("h3",{className:"font-semibold text-gray-900",children:"\u6700\u8fd1\u53d1\u7968"}),(0,sn.jsx)("button",{onClick:()=>t("invoices"),className:"text-sm text-blue-600 hover:text-blue-700",children:"\u67e5\u770b\u5168\u90e8"})]}),(0,sn.jsx)("div",{className:"space-y-3",children:n.recentInvoices.map(e=>(0,sn.jsx)(y,{invoice:e},e.id))})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg p-4 shadow-sm border border-gray-200",children:[(0,sn.jsx)("h3",{className:"font-semibold text-gray-900 mb-4",children:"\u6536\u5165\u8d8b\u52bf"}),(0,sn.jsx)("div",{className:"h-32 bg-gradient-to-r from-blue-50 to-blue-100 rounded-lg flex items-end justify-between p-4",children:n.chartData.revenue.map((e,t)=>(0,sn.jsx)("div",{className:"bg-blue-600 rounded-t",style:{height:"".concat(e/Math.max(...n.chartData.revenue)*80,"%"),width:"12%"}},t))}),(0,sn.jsxs)("div",{className:"flex justify-between text-xs text-gray-500 mt-2",children:[(0,sn.jsx)("span",{children:"6\u4e2a\u6708\u524d"}),(0,sn.jsx)("span",{children:"\u73b0\u5728"})]})]})]})})},WF=e=>{let{onNavigate:t}=e;const{t:n}=nn(),{user:r}=mn(),{success:s,error:a,toasts:o,removeToast:l}=Eo(),[c,d]=(0,i.useState)(!0),[u,h]=(0,i.useState)(null),[p,m]=(0,i.useState)(!1),[f,g]=(0,i.useState)(!1);(0,i.useEffect)(()=>{const e=()=>{const e=window.innerWidth<=768||/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);g(e)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]);const[v,y]=(0,i.useState)({totalRevenue:0,totalInvoices:0,totalClients:0,pendingAmount:0,overdueAmount:0,paidAmount:0}),[x,b]=(0,i.useState)([]),[w,j]=(0,i.useState)(0),[N,k]=(0,i.useState)({});(0,i.useEffect)(()=>{io.isAuthenticated()||(localStorage.setItem("token","dev-mock-token"),localStorage.setItem("user",JSON.stringify({id:1,email:"test@example.com",name:"Test User"}))),A()},[]);const A=async()=>{try{d(!0),h(null);const[e,t,n,r,i]=await Promise.all([Oo.getStats(),Oo.getDashboardStats(),Oo.getInvoiceStatusDistribution(),Oo.getMonthlyRevenueTrend(),Oo.getNotifications()]);y(e),b((null===i||void 0===i?void 0:i.notifications)||[])}catch(e){console.error("Failed to load dashboard data:",e),h("Failed to load dashboard data: "+e.message),a("\u52a0\u8f7d\u4eea\u8868\u677f\u6570\u636e\u5931\u8d25\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}finally{d(!1)}},S=e=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e);return f?(0,sn.jsx)(zF,{onNavigate:t}):c?(0,sn.jsx)(Io,{fullScreen:!0,text:"\u6b63\u5728\u52a0\u8f7d\u4eea\u8868\u677f\u6570\u636e..."}):(0,sn.jsxs)(FF,{children:[(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,sn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,sn.jsx)("div",{className:"mb-8",children:(0,sn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sn.jsx)("div",{className:"flex items-center gap-4",children:(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",(null===r||void 0===r?void 0:r.firstName)||"User"]}),(0,sn.jsx)("p",{className:"mt-2 text-gray-600",children:"Here's your monthly business overview"})]})}),(0,sn.jsx)("div",{className:"flex items-center gap-3",children:(0,sn.jsxs)("button",{onClick:async()=>{m(!0),await A(),j(e=>e+1),m(!1)},disabled:p,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[(0,sn.jsx)(Ki,{className:"w-4 h-4 ".concat(p?"animate-spin":"")}),"Refresh"]})})]})}),u&&(0,sn.jsxs)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md flex items-center",children:[(0,sn.jsx)(ei,{className:"w-5 h-5 mr-3 flex-shrink-0"}),(0,sn.jsxs)("div",{className:"flex-1",children:[(0,sn.jsx)("p",{className:"font-medium",children:"Error"}),(0,sn.jsx)("p",{className:"text-sm",children:u})]}),(0,sn.jsx)("button",{onClick:()=>h(null),className:"ml-3 text-red-400 hover:text-red-600",children:"\xd7"})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-6 mb-8",children:[(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 min-h-[120px] border border-gray-100",children:(0,sn.jsxs)("div",{className:"flex items-start",children:[(0,sn.jsx)("div",{className:"p-3 bg-gradient-to-br from-green-100 to-green-200 rounded-xl flex-shrink-0",children:(0,sn.jsx)(gi,{className:"w-6 h-6 text-green-600"})}),(0,sn.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Total Revenue"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900 break-words leading-tight",children:S(v.totalRevenue)})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 min-h-[120px] border border-gray-100",children:(0,sn.jsxs)("div",{className:"flex items-start",children:[(0,sn.jsx)("div",{className:"p-3 bg-gradient-to-br from-blue-100 to-blue-200 rounded-xl flex-shrink-0",children:(0,sn.jsx)(wi,{className:"w-6 h-6 text-blue-600"})}),(0,sn.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Total Invoices"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900 break-words leading-tight",children:v.totalInvoices})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 min-h-[120px] border border-gray-100",children:(0,sn.jsxs)("div",{className:"flex items-start",children:[(0,sn.jsx)("div",{className:"p-3 bg-gradient-to-br from-purple-100 to-purple-200 rounded-xl flex-shrink-0",children:(0,sn.jsx)(os,{className:"w-6 h-6 text-purple-600"})}),(0,sn.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Total Clients"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900 break-words leading-tight",children:v.totalClients})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 min-h-[120px] border border-gray-100",children:(0,sn.jsxs)("div",{className:"flex items-start",children:[(0,sn.jsx)("div",{className:"p-3 bg-gradient-to-br from-yellow-100 to-yellow-200 rounded-xl flex-shrink-0",children:(0,sn.jsx)(is,{className:"w-6 h-6 text-yellow-600"})}),(0,sn.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Pending Amount"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900 break-words leading-tight",children:S(v.pendingAmount)})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow-sm hover:shadow-md transition-shadow p-6 min-h-[120px] border border-gray-100",children:(0,sn.jsxs)("div",{className:"flex items-start",children:[(0,sn.jsx)("div",{className:"p-3 bg-gradient-to-br from-red-100 to-red-200 rounded-xl flex-shrink-0",children:(0,sn.jsx)(Zr,{className:"w-6 h-6 text-red-600"})}),(0,sn.jsxs)("div",{className:"ml-4 flex-1 min-w-0",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Overdue Amount"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900 break-words leading-tight",children:S(v.overdueAmount)})]})]})})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[(0,sn.jsx)(YP,{}),(0,sn.jsx)(DF,{refreshTrigger:w})]}),(0,sn.jsx)("div",{className:"mb-8",children:(0,sn.jsx)(OF,{notifications:x.map(e=>(0,Ne.A)((0,Ne.A)({},e),{},{timestamp:e.createdAt})),onDismiss:e=>{console.log("Dismiss notification:",e)},onDelete:async e=>{console.log("Delete notification:",e);try{(await fetch("/api/notifications/".concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token")),"Content-Type":"application/json"}})).ok?(b(t=>t.filter(t=>t.id!==e)),s("\u901a\u77e5\u5df2\u5220\u9664")):a("\u5220\u9664\u901a\u77e5\u5931\u8d25")}catch(u){console.error("\u5220\u9664\u901a\u77e5\u5931\u8d25:",u),a("\u5220\u9664\u901a\u77e5\u5931\u8d25")}}})})]})}),(0,sn.jsx)(IF,{toasts:o,removeToast:l})]})},UF=()=>{const e=ee();return(0,sn.jsx)(WF,{onNavigate:t=>{switch(t){case"create-invoice":e("/invoices/new");break;case"invoices":e("/invoices");break;case"clients":e("/clients");break;case"reports":e("/reports");break;default:e("/".concat(t))}}})};const VF=new class{async generatePaymentLink(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"stripe";try{return(await zt.default.post("/invoices/".concat(e,"/payment-link"),{paymentMethod:t})).data}catch(n){throw console.error("Generate payment link error:",n),n}}async getInvoiceByToken(e){try{return(await zt.default.get("/invoices/payment/".concat(e))).data}catch(t){throw console.error("Get invoice by token error:",t),t}}async createPaymentIntentByToken(e){try{return(await zt.default.post("/invoices/payment/".concat(e,"/payment-intent"))).data}catch(t){throw console.error("Create payment intent by token error:",t),t}}async createPaymentIntent(e){try{return(await zt.default.post("/invoices/".concat(e.invoiceId,"/payment-intent"),e)).data}catch(t){throw console.error("Create payment intent error:",t),t}}async confirmPayment(e){try{return(await zt.default.post("/invoices/payment/confirm",e)).data}catch(t){throw console.error("Confirm payment error:",t),t}}async copyPaymentLink(e){try{if(navigator.clipboard&&window.isSecureContext)return await navigator.clipboard.writeText(e),!0;{const t=document.createElement("textarea");t.value=e,t.style.position="fixed",t.style.left="-999999px",t.style.top="-999999px",document.body.appendChild(t),t.focus(),t.select();const n=document.execCommand("copy");return t.remove(),n}}catch(t){return console.error("Copy to clipboard error:",t),!1}}async sharePaymentLink(e,t){try{const n={title:"Facture ".concat(t.invoiceNumber),text:"Paiement de la facture ".concat(t.invoiceNumber," - ").concat(t.total,"\u20ac"),url:e};return navigator.share&&navigator.canShare&&navigator.canShare(n)?(await navigator.share(n),!0):await this.copyPaymentLink(e)}catch(n){return console.error("Share payment link error:",n),await this.copyPaymentLink(e)}}async sendPaymentLinkByEmail(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";try{return(await zt.default.post("/ai/send-invoice-email",{invoiceId:e,recipientEmail:n,customMessage:r,includePaymentLink:!0,paymentUrl:t})).data}catch(i){throw console.error("Send payment link by email error:",i),i}}},HF=e=>{var t,n;let{invoice:r,onClose:s,onSuccess:a}=e;const{t:o}=nn(),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null),[h,p]=(0,i.useState)("stripe"),[m,f]=(0,i.useState)(!1),[g,v]=(0,i.useState)((null===r||void 0===r||null===(t=r.Client)||void 0===t?void 0:t.email)||""),[y,x]=(0,i.useState)(""),[b,w]=(0,i.useState)(!1),j=[{value:"stripe",label:"Stripe",icon:fi},{value:"paypal",label:"PayPal",icon:gi}];return(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sn.jsx)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",children:(0,sn.jsxs)("div",{className:"p-6",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,sn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:o("payment.generateLink")}),(0,sn.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 dark:hover:text-gray-300",children:"\u2715"})]}),(0,sn.jsxs)("div",{className:"mb-6 p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[(0,sn.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,sn.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o("invoice.number"),":"]}),(0,sn.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:r.invoiceNumber})]}),(0,sn.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,sn.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o("invoice.client"),":"]}),(0,sn.jsx)("span",{className:"font-medium text-gray-900 dark:text-white",children:null===(n=r.Client)||void 0===n?void 0:n.name})]}),(0,sn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sn.jsxs)("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:[o("invoice.total"),":"]}),(0,sn.jsxs)("span",{className:"font-bold text-lg text-green-600 dark:text-green-400",children:[r.total,"\u20ac"]})]})]}),d?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)("div",{className:"mb-6",children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("payment.linkGenerated")}),(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsx)("input",{type:"text",value:d.paymentUrl,readOnly:!0,className:"flex-1 p-2 border border-gray-300 dark:border-gray-600 rounded-lg bg-gray-50 dark:bg-gray-700 text-sm"}),(0,sn.jsx)("button",{onClick:async()=>{if(!d)return;await VF.copyPaymentLink(d.paymentUrl)&&(f(!0),setTimeout(()=>f(!1),2e3))},className:"p-2 bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 rounded-lg",title:o("payment.copyLink"),children:m?(0,sn.jsx)(ci,{className:"text-green-600"}):(0,sn.jsx)(mi,{className:"text-gray-600 dark:text-gray-400"})})]}),(0,sn.jsxs)("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:[o("payment.linkExpires"),": ",new Date(d.expiresAt).toLocaleDateString()]})]}),(0,sn.jsx)("div",{className:"space-y-3 mb-6",children:(0,sn.jsxs)("button",{onClick:async()=>{d&&await VF.sharePaymentLink(d.paymentUrl,{invoiceNumber:r.invoiceNumber,total:r.total})},className:"w-full bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-lg flex items-center justify-center",children:[(0,sn.jsx)(Qi,{className:"mr-2"}),o("payment.shareLink")]})}),(0,sn.jsxs)("div",{className:"border-t dark:border-gray-600 pt-4",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:o("payment.sendByEmail")}),(0,sn.jsxs)("div",{className:"space-y-3",children:[(0,sn.jsx)("input",{type:"email",placeholder:o("payment.recipientEmail"),value:g,onChange:e=>v(e.target.value),className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"}),(0,sn.jsx)("textarea",{placeholder:o("payment.customMessage"),value:y,onChange:e=>x(e.target.value),rows:3,className:"w-full p-2 border border-gray-300 dark:border-gray-600 rounded-lg dark:bg-gray-700 dark:text-white"}),(0,sn.jsx)("button",{onClick:async()=>{if(d&&g){w(!0);try{await VF.sendPaymentLinkByEmail(r.id,d.paymentUrl,g,y)}catch(e){console.error("Error sending email:",e)}finally{w(!1)}}},disabled:!g||b,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-lg flex items-center justify-center",children:b?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(Mi,{className:"animate-spin mr-2"}),o("payment.sendingEmail")]}):(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(Ri,{className:"mr-2"}),o("payment.sendEmail")]})})]})]})]}):(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)("div",{className:"mb-6",children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("payment.method")}),(0,sn.jsx)("div",{className:"space-y-2",children:j.map(e=>{const t=e.icon;return(0,sn.jsxs)("label",{className:"flex items-center p-3 border rounded-lg cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-700 dark:border-gray-600",children:[(0,sn.jsx)("input",{type:"radio",name:"paymentMethod",value:e.value,checked:h===e.value,onChange:e=>p(e.target.value),className:"mr-3"}),(0,sn.jsx)(t,{className:"mr-2 text-gray-500"}),(0,sn.jsx)("span",{className:"text-gray-900 dark:text-white",children:e.label})]},e.value)})})]}),(0,sn.jsx)("button",{onClick:async()=>{c(!0);try{const e=await VF.generatePaymentLink(r.id,h);e.success&&(u(e.data),a&&a(e.data))}catch(e){console.error("Error generating payment link:",e)}finally{c(!1)}},disabled:l,className:"w-full bg-blue-600 hover:bg-blue-700 disabled:bg-blue-400 text-white font-medium py-2 px-4 rounded-lg flex items-center justify-center",children:l?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(Mi,{className:"animate-spin mr-2"}),o("payment.generating")]}):(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(Pi,{className:"mr-2"}),o("payment.generateLink")]})})]})]})})})},qF=e=>{var t,n;let{invoice:r,onDelete:s,onExport:a,onStatusChange:o,formatters:l}=e;const{t:c}=nn(["invoices","common"]),[d,u]=(0,i.useState)(!1),h=()=>{if("paid"===r.status||"cancelled"===r.status)return!1;return new Date(r.dueDate)<new Date};return(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 hover:shadow-lg transition-shadow duration-200",children:[(0,sn.jsxs)("div",{className:"p-6 border-b border-gray-100",children:[(0,sn.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:r.invoiceNumber}),(0,sn.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,sn.jsx)(as,{className:"mr-1 h-4 w-4"}),(0,sn.jsx)("span",{children:(null===(t=r.Client)||void 0===t?void 0:t.name)||"N/A"}),(null===(n=r.Client)||void 0===n?void 0:n.company)&&(0,sn.jsxs)("span",{className:"ml-2 text-gray-400",children:["(",r.Client.company,")"]})]})]}),(0,sn.jsxs)("div",{className:"text-right",children:[(e=>{const t={draft:{className:"bg-gray-100 text-gray-800 border-gray-200 dark:bg-blue-900 dark:text-blue-200 dark:border-blue-600",label:c("invoices:draft"),icon:"\ud83d\udcdd"},sent:{className:"bg-blue-600 text-white border-blue-700 dark:bg-blue-500 dark:text-white dark:border-blue-400",label:c("invoices:sent"),icon:"\ud83d\udce4"},paid:{className:"bg-green-100 text-green-800 border-green-200 dark:bg-green-800 dark:text-green-200 dark:border-green-600",label:c("invoices:paid"),icon:"\u2705"},overdue:{className:"bg-red-100 text-red-800 border-red-200 dark:bg-red-800 dark:text-red-200 dark:border-red-600",label:c("invoices:overdue"),icon:"\u26a0\ufe0f"},cancelled:{className:"bg-gray-100 text-gray-800 border-gray-200 dark:bg-gray-700 dark:text-gray-200 dark:border-gray-600",label:c("invoices:cancelled"),icon:"\u274c"}},n=t[e]||t.draft;return(0,sn.jsxs)("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium border ".concat(n.className),children:[(0,sn.jsx)("span",{className:"mr-1",children:n.icon}),n.label]})})(r.status),h()&&(0,sn.jsx)("div",{className:"mt-2 text-xs text-red-600 font-medium",children:c("invoices:overdue")})]})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-4",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)(gi,{className:"h-5 w-5 text-green-600 mr-2"}),(0,sn.jsx)("span",{className:"text-sm text-gray-600",children:c("invoices:total")})]}),(0,sn.jsx)("span",{className:"text-xl font-bold text-gray-900",children:l.formatCurrency(r.total)})]}),r.taxAmount>0&&(0,sn.jsxs)("div",{className:"mt-2 text-xs text-gray-500",children:[c("invoices:totalTax"),": ",l.formatCurrency(r.taxAmount)]})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)(oi,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("div",{className:"text-gray-600",children:c("invoices:issueDate")}),(0,sn.jsx)("div",{className:"font-medium",children:l.formatDate(r.issueDate)})]})]}),(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)(oi,{className:"h-4 w-4 text-gray-400 mr-2"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("div",{className:"text-gray-600",children:c("invoices:dueDate")}),(0,sn.jsx)("div",{className:"font-medium ".concat(h()?"text-red-600":""),children:l.formatDate(r.dueDate)})]})]})]})]}),(0,sn.jsx)("div",{className:"p-4 bg-gray-50",children:(0,sn.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,sn.jsxs)("button",{onClick:()=>a(r),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-blue-700 bg-blue-50 border border-blue-200 rounded-md hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[(0,sn.jsx)(vi,{className:"mr-1 h-4 w-4"}),c("common:export")]}),"paid"!==r.status&&(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)("button",{onClick:()=>o(r.id,"paid"),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-green-700 bg-green-50 border border-green-200 rounded-md hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",children:["\u2705 ",c("invoices:markAsPaid")]}),(0,sn.jsxs)("button",{onClick:()=>u(!0),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-purple-700 bg-purple-50 border border-purple-200 rounded-md hover:bg-purple-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500",children:[(0,sn.jsx)(Pi,{className:"mr-1 h-4 w-4"}),"Payment Link"]})]}),(0,sn.jsxs)("button",{onClick:()=>s(r.id),className:"inline-flex items-center px-3 py-2 text-sm font-medium text-red-700 bg-red-50 border border-red-200 rounded-md hover:bg-red-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[(0,sn.jsx)(ns,{className:"mr-1 h-4 w-4"}),c("common:delete")]})]})}),r.notes&&(0,sn.jsx)("div",{className:"px-6 py-3 border-t border-gray-100",children:(0,sn.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,sn.jsxs)("span",{className:"font-medium",children:[c("invoices:notes"),": "]}),r.notes]})}),d&&(0,sn.jsx)(HF,{invoice:r,onClose:()=>u(!1),onSuccess:e=>{console.log("Payment link generated:",e)}})]})},GF=e=>{let{invoices:t,loading:n,onDelete:r,onExport:i,onStatusChange:s,formatters:a}=e;const{t:o}=nn(["invoices","common"]);return n?(0,sn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[...Array(6)].map((e,t)=>(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 animate-pulse",children:[(0,sn.jsxs)("div",{className:"p-6",children:[(0,sn.jsx)("div",{className:"h-6 bg-gray-200 rounded mb-4"}),(0,sn.jsx)("div",{className:"h-4 bg-gray-200 rounded mb-2"}),(0,sn.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-4"}),(0,sn.jsx)("div",{className:"h-16 bg-gray-100 rounded mb-4"}),(0,sn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sn.jsx)("div",{className:"h-12 bg-gray-200 rounded"}),(0,sn.jsx)("div",{className:"h-12 bg-gray-200 rounded"})]})]}),(0,sn.jsx)("div",{className:"p-4 bg-gray-50",children:(0,sn.jsxs)("div",{className:"flex gap-2",children:[(0,sn.jsx)("div",{className:"h-8 bg-gray-200 rounded w-16"}),(0,sn.jsx)("div",{className:"h-8 bg-gray-200 rounded w-20"}),(0,sn.jsx)("div",{className:"h-8 bg-gray-200 rounded w-18"})]})})]},t))}):0===t.length?(0,sn.jsxs)("div",{className:"text-center py-12",children:[(0,sn.jsx)("div",{className:"mx-auto h-24 w-24 flex items-center justify-center rounded-full bg-gray-100 mb-6",children:(0,sn.jsx)(gi,{className:"h-12 w-12 text-gray-400"})}),(0,sn.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:o("invoices:noInvoicesYet")}),(0,sn.jsx)("p",{className:"text-gray-500 mb-6",children:o("invoices:getStartedByCreating")}),(0,sn.jsx)("a",{href:"/invoices/new",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:o("common:createfirstinvoice")})]}):(0,sn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>(0,sn.jsx)(qF,{invoice:e,onDelete:r,onExport:i,onStatusChange:s,formatters:a},e.id))})},KF=e=>{let{invoices:t,onDelete:n,onExport:r,formatters:i}=e;const{t:s}=nn(["common","invoices","routes"]),a=e=>{const t={draft:{color:"bg-gray-100 text-gray-800 dark:bg-blue-900 dark:text-blue-200",icon:yi,text:s("invoices:status.draft")},sent:{color:"bg-blue-100 text-blue-800 dark:bg-blue-800 dark:text-blue-200",icon:pi,text:s("invoices:status.sent")},paid:{color:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-200",icon:ci,text:s("invoices:status.paid")},overdue:{color:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-200",icon:ls,text:s("invoices:status.overdue")}},n=t[e]||t.draft,r=n.icon;return(0,sn.jsxs)("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ".concat(n.color),children:[(0,sn.jsx)(r,{className:"w-3 h-3 mr-1"}),n.text]})};return(0,sn.jsx)("div",{className:"space-y-4",children:t.map(e=>{var t;return(0,sn.jsxs)("div",{className:"mobile-card touch-feedback",children:[(0,sn.jsxs)("div",{className:"mobile-card-header",children:[(0,sn.jsx)("div",{className:"mobile-card-title",children:e.invoiceNumber}),a(e.status)]}),(0,sn.jsxs)("div",{className:"mobile-card-content",children:[(0,sn.jsxs)("div",{className:"mobile-card-item",children:[(0,sn.jsx)("div",{className:"mobile-card-label",children:s("invoices:client")}),(0,sn.jsx)("div",{className:"mobile-card-value",children:(null===(t=e.Client)||void 0===t?void 0:t.name)||"N/A"})]}),(0,sn.jsxs)("div",{className:"mobile-card-item",children:[(0,sn.jsx)("div",{className:"mobile-card-label",children:s("invoices:amount")}),(0,sn.jsx)("div",{className:"mobile-card-value",children:i.formatCurrency(e.total)})]}),(0,sn.jsxs)("div",{className:"mobile-card-item",children:[(0,sn.jsx)("div",{className:"mobile-card-label",children:s("invoices:issueDate")}),(0,sn.jsx)("div",{className:"mobile-card-value",children:i.formatDate(e.issueDate)})]}),(0,sn.jsxs)("div",{className:"mobile-card-item",children:[(0,sn.jsx)("div",{className:"mobile-card-label",children:s("invoices:dueDate")}),(0,sn.jsx)("div",{className:"mobile-card-value",children:i.formatDate(e.dueDate)})]})]}),(0,sn.jsxs)("div",{className:"mobile-card-actions",children:[(0,sn.jsxs)("button",{onClick:()=>r&&r(e.id,e.invoiceNumber),className:"btn btn-primary flex items-center justify-center",children:[(0,sn.jsx)(vi,{className:"w-4 h-4 mr-2"}),s("common:export")]}),(0,sn.jsx)("button",{onClick:()=>(e=>{window.confirm(s("invoices:confirmDelete"))&&n(e.id)})(e),className:"btn btn-outline text-red-600 hover:bg-red-50 flex items-center justify-center",children:(0,sn.jsx)(ns,{className:"w-4 h-4"})})]})]},e.id)})})},YF=e=>{let{isOpen:t,onClose:n,onConfirm:r,invoice:s}=e;const{t:a}=nn(["invoices","common"]),[o,l]=(0,i.useState)({paidDate:(new Date).toISOString().split("T")[0],paymentMethod:"bank_transfer",notes:""}),c=e=>{const{name:t,value:n}=e.target;l(e=>(0,Ne.A)((0,Ne.A)({},e),{},{[t]:n}))};return t?(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full mx-4",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,sn.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:a("invoices:markAsPaid")}),(0,sn.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,sn.jsx)(ls,{className:"h-6 w-6"})})]}),(0,sn.jsxs)("form",{onSubmit:e=>{e.preventDefault(),r(o),n()},className:"p-6",children:[(0,sn.jsx)("div",{className:"mb-4",children:(0,sn.jsx)("p",{className:"text-sm text-gray-600 mb-4",children:a("invoices:confirmMarkAsPaid",{invoiceNumber:null===s||void 0===s?void 0:s.invoiceNumber,amount:null===s||void 0===s?void 0:s.amount})})}),(0,sn.jsxs)("div",{className:"mb-4",children:[(0,sn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,sn.jsx)(oi,{className:"inline mr-2"}),a("invoices:paidDate")]}),(0,sn.jsx)("input",{type:"date",name:"paidDate",value:o.paidDate,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,sn.jsxs)("div",{className:"mb-4",children:[(0,sn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[(0,sn.jsx)(fi,{className:"inline mr-2"}),a("invoices:paymentMethod")]}),(0,sn.jsxs)("select",{name:"paymentMethod",value:o.paymentMethod,onChange:c,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,sn.jsx)("option",{value:"bank_transfer",children:a("invoices:paymentMethods.bankTransfer")}),(0,sn.jsx)("option",{value:"credit_card",children:a("invoices:paymentMethods.creditCard")}),(0,sn.jsx)("option",{value:"cash",children:a("invoices:paymentMethods.cash")}),(0,sn.jsx)("option",{value:"check",children:a("invoices:paymentMethods.check")}),(0,sn.jsx)("option",{value:"online_payment",children:a("invoices:paymentMethods.onlinePayment")}),(0,sn.jsx)("option",{value:"other",children:a("invoices:paymentMethods.other")})]})]}),(0,sn.jsxs)("div",{className:"mb-6",children:[(0,sn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[a("invoices:notes")," (",a("common:optional"),")"]}),(0,sn.jsx)("textarea",{name:"notes",value:o.notes,onChange:c,rows:"3",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:a("invoices:notesPlaceholder")})]}),(0,sn.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,sn.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500",children:a("common:cancel")}),(0,sn.jsxs)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-green-600 hover:bg-green-700 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500 flex items-center",children:[(0,sn.jsx)(ci,{className:"mr-2 h-4 w-4"}),a("invoices:confirmPayment")]})]})]})]})}):null};function XF(e,t,n){t||(t=[]);var r=t.length++;return Object.defineProperty({},"_",{set:function(i){t[r]=i,e.apply(n,t)}})}function JF(e,t){if(t.has(e))throw new TypeError("Cannot initialize the same private elements twice on an object")}function $F(e,t){JF(e,t),t.add(e)}function QF(e,t,n){JF(e,t),t.set(e,n)}function ZF(e,t,n){if("function"==typeof e?e===t:e.has(t))return arguments.length<3?t:n;throw new TypeError("Private element is not present on this object")}function eB(e,t,n){return n(ZF(e,t))}function tB(e,t){return e.get(ZF(e,t))}function nB(e,t,n){return e.set(ZF(e,t),n),n}var rB,iB,sB,aB,oB,lB,cB,dB,uB,hB,pB,mB,fB,gB,vB,yB,xB,bB,wB=n(9495);const jB="object"===typeof process&&process+""==="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&"browser"!==process.type),NB=[.001,0,0,.001,0,0],kB=1.35,AB=1,SB=2,_B=4,CB=16,EB=32,PB=64,TB=128,MB=256,DB={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},OB="pdfjs_internal_editor_",RB={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,POPUP:16,SIGNATURE:101,COMMENT:102},IB={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_THICKNESS:32,HIGHLIGHT_FREE:33,HIGHLIGHT_SHOW_ALL:34,DRAW_STEP:41},LB=0,FB=1,BB=2,zB=3,WB=3,UB=4,VB={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},HB={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},qB=1,GB=2,KB=3,YB=4,XB=5,JB={ERRORS:0,WARNINGS:1,INFOS:5},$B={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},QB=0,ZB=1,ez=2,tz=3;let nz=JB.WARNINGS;function rz(e){Number.isInteger(e)&&(nz=e)}function iz(){return nz}function sz(e){nz>=JB.INFOS&&console.info("Info: ".concat(e))}function az(e){nz>=JB.WARNINGS&&console.warn("Warning: ".concat(e))}function oz(e){throw new Error(e)}function lz(e,t){e||oz(t)}function cz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(!e)return null;if(n&&"string"===typeof e){if(n.addDefaultProtocol&&e.startsWith("www.")){const t=e.match(/\./g);(null===t||void 0===t?void 0:t.length)>=2&&(e="http://".concat(e))}if(n.tryConvertEncoding)try{e=decodeURIComponent(escape(e))}catch(i){}}const r=t?URL.parse(e,t):URL.parse(e);return function(e){switch(null===e||void 0===e?void 0:e.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}(r)?r:null}function dz(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=URL.parse(e);return r?(r.hash=t,r.href):n&&cz(e,"http://example.com")?e.split("#",1)[0]+"".concat(t?"#".concat(t):""):""}function uz(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return Object.defineProperty(e,t,{value:n,enumerable:!r,configurable:!0,writable:!1}),n}const hz=function(){function e(e,t){this.message=e,this.name=t}return e.prototype=new Error,e.constructor=e,e}();class pz extends hz{constructor(e,t){super(e,"PasswordException"),this.code=t}}class mz extends hz{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class fz extends hz{constructor(e){super(e,"InvalidPDFException")}}class gz extends hz{constructor(e,t,n){super(e,"ResponseException"),this.status=t,this.missing=n}}class vz extends hz{constructor(e){super(e,"FormatError")}}class yz extends hz{constructor(e){super(e,"AbortException")}}function xz(e){"object"===typeof e&&void 0!==(null===e||void 0===e?void 0:e.length)||oz("Invalid argument for bytesToString");const t=e.length,n=8192;if(t<n)return String.fromCharCode.apply(null,e);const r=[];for(let i=0;i<t;i+=n){const s=Math.min(i+n,t),a=e.subarray(i,s);r.push(String.fromCharCode.apply(null,a))}return r.join("")}function bz(e){"string"!==typeof e&&oz("Invalid argument for stringToBytes");const t=e.length,n=new Uint8Array(t);for(let r=0;r<t;++r)n[r]=255&e.charCodeAt(r);return n}class wz{static get isLittleEndian(){return uz(this,"isLittleEndian",function(){const e=new Uint8Array(4);return e[0]=1,1===new Uint32Array(e.buffer,0,1)[0]}())}static get isEvalSupported(){return uz(this,"isEvalSupported",function(){try{return new Function(""),!0}catch(e){return!1}}())}static get isOffscreenCanvasSupported(){return uz(this,"isOffscreenCanvasSupported","undefined"!==typeof OffscreenCanvas)}static get isImageDecoderSupported(){return uz(this,"isImageDecoderSupported","undefined"!==typeof ImageDecoder)}static get platform(){const{platform:e,userAgent:t}=navigator;return uz(this,"platform",{isAndroid:t.includes("Android"),isLinux:e.includes("Linux"),isMac:e.includes("Mac"),isWindows:e.includes("Win"),isFirefox:t.includes("Firefox")})}static get isCSSRoundSupported(){var e,t;return uz(this,"isCSSRoundSupported",null===(e=globalThis.CSS)||void 0===e||null===(t=e.supports)||void 0===t?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const jz=Array.from(Array(256).keys(),e=>e.toString(16).padStart(2,"0"));class Nz{static makeHexColor(e,t,n){return"#".concat(jz[e]).concat(jz[t]).concat(jz[n])}static domMatrixToTransform(e){return[e.a,e.b,e.c,e.d,e.e,e.f]}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static multiplyByDOMMatrix(e,t){return[e[0]*t.a+e[2]*t.b,e[1]*t.a+e[3]*t.b,e[0]*t.c+e[2]*t.d,e[1]*t.c+e[3]*t.d,e[0]*t.e+e[2]*t.f+e[4],e[1]*t.e+e[3]*t.f+e[5]]}static applyTransform(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=e[n],i=e[n+1];e[n]=r*t[0]+i*t[2]+t[4],e[n+1]=r*t[1]+i*t[3]+t[5]}static applyTransformToBezier(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5];for(let c=0;c<6;c+=2){const t=e[n+c],d=e[n+c+1];e[n+c]=t*r+d*s+o,e[n+c+1]=t*i+d*a+l}}static applyInverseTransform(e,t){const n=e[0],r=e[1],i=t[0]*t[3]-t[1]*t[2];e[0]=(n*t[3]-r*t[2]+t[2]*t[5]-t[4]*t[3])/i,e[1]=(-n*t[1]+r*t[0]+t[4]*t[1]-t[5]*t[0])/i}static axialAlignedBoundingBox(e,t,n){const r=t[0],i=t[1],s=t[2],a=t[3],o=t[4],l=t[5],c=e[0],d=e[1],u=e[2],h=e[3];let p=r*c+o,m=p,f=r*u+o,g=f,v=a*d+l,y=v,x=a*h+l,b=x;if(0!==i||0!==s){const e=i*c,t=i*u,n=s*d,r=s*h;p+=n,g+=n,f+=r,m+=r,v+=e,b+=e,x+=t,y+=t}n[0]=Math.min(n[0],p,f,m,g),n[1]=Math.min(n[1],v,x,y,b),n[2]=Math.max(n[2],p,f,m,g),n[3]=Math.max(n[3],v,x,y,b)}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e,t){const n=e[0],r=e[1],i=e[2],s=e[3],a=n**2+r**2,o=n*i+r*s,l=i**2+s**2,c=(a+l)/2,d=Math.sqrt(c**2-(a*l-o**2));t[0]=Math.sqrt(c+d||1),t[1]=Math.sqrt(c-d||1)}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const i=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),s=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return i>s?null:[n,i,r,s]}static pointBoundingBox(e,t,n){n[0]=Math.min(n[0],e),n[1]=Math.min(n[1],t),n[2]=Math.max(n[2],e),n[3]=Math.max(n[3],t)}static rectBoundingBox(e,t,n,r,i){i[0]=Math.min(i[0],e,n),i[1]=Math.min(i[1],t,r),i[2]=Math.max(i[2],e,n),i[3]=Math.max(i[3],t,r)}static bezierBoundingBox(e,t,n,r,i,s,a,o,l){l[0]=Math.min(l[0],e,a),l[1]=Math.min(l[1],t,o),l[2]=Math.max(l[2],e,a),l[3]=Math.max(l[3],t,o),ZF(Nz,this,Az).call(this,e,n,i,a,t,r,s,o,3*(3*(n-i)-e+a),6*(e-2*n+i),3*(n-e),l),ZF(Nz,this,Az).call(this,e,n,i,a,t,r,s,o,3*(3*(r-s)-t+o),6*(t-2*r+s),3*(r-t),l)}}function kz(e,t,n,r,i,s,a,o,l,c){if(l<=0||l>=1)return;const d=1-l,u=l*l,h=u*l,p=d*(d*(d*e+3*l*t)+3*u*n)+h*r,m=d*(d*(d*i+3*l*s)+3*u*a)+h*o;c[0]=Math.min(c[0],p),c[1]=Math.min(c[1],m),c[2]=Math.max(c[2],p),c[3]=Math.max(c[3],m)}function Az(e,t,n,r,i,s,a,o,l,c,d,u){if(Math.abs(l)<1e-12)return void(Math.abs(c)>=1e-12&&ZF(rB,this,kz).call(this,e,t,n,r,i,s,a,o,-d/c,u));const h=c**2-4*d*l;if(h<0)return;const p=Math.sqrt(h),m=2*l;ZF(rB,this,kz).call(this,e,t,n,r,i,s,a,o,(-c+p)/m,u),ZF(rB,this,kz).call(this,e,t,n,r,i,s,a,o,(-c-p)/m,u)}rB=Nz;let Sz=null,_z=null;function Cz(){if("function"===typeof crypto.randomUUID)return crypto.randomUUID();const e=new Uint8Array(32);return crypto.getRandomValues(e),xz(e)}const Ez="pdfjs_internal_id_";function Pz(e,t,n){return Math.min(Math.max(e,t),n)}function Tz(e){return Uint8Array.prototype.toBase64?e.toBase64():btoa(xz(e))}"function"!==typeof Promise.try&&(Promise.try=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return new Promise(t=>{t(e(...n))})}),"function"!==typeof Math.sumPrecise&&(Math.sumPrecise=function(e){return e.reduce((e,t)=>e+t,0)});class Mz{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};return function e(n){var r;if(!n)return;let i=null;const s=n.name;if("#text"===s)i=n.value;else{if(!Mz.shouldBuildText(s))return;null!==n&&void 0!==n&&null!==(r=n.attributes)&&void 0!==r&&r.textContent?i=n.attributes.textContent:n.value&&(i=n.value)}if(null!==i&&t.push({str:i}),n.children)for(const t of n.children)e(t)}(e),n}static shouldBuildText(e){return!("textarea"===e||"input"===e||"option"===e||"select"===e)}}class Dz{static setupStorage(e,t,n,r,i){const s=r.getValue(t,{value:null});switch(n.name){case"textarea":if(null!==s.value&&(e.textContent=s.value),"print"===i)break;e.addEventListener("input",e=>{r.setValue(t,{value:e.target.value})});break;case"input":if("radio"===n.attributes.type||"checkbox"===n.attributes.type){if(s.value===n.attributes.xfaOn?e.setAttribute("checked",!0):s.value===n.attributes.xfaOff&&e.removeAttribute("checked"),"print"===i)break;e.addEventListener("change",e=>{r.setValue(t,{value:e.target.checked?e.target.getAttribute("xfaOn"):e.target.getAttribute("xfaOff")})})}else{if(null!==s.value&&e.setAttribute("value",s.value),"print"===i)break;e.addEventListener("input",e=>{r.setValue(t,{value:e.target.value})})}break;case"select":if(null!==s.value){e.setAttribute("value",s.value);for(const e of n.children)e.attributes.value===s.value?e.attributes.selected=!0:e.attributes.hasOwnProperty("selected")&&delete e.attributes.selected}e.addEventListener("input",e=>{const n=e.target.options,i=-1===n.selectedIndex?"":n[n.selectedIndex].value;r.setValue(t,{value:i})})}}static setAttributes(e){let{html:t,element:n,storage:r=null,intent:i,linkService:s}=e;const{attributes:a}=n,o=t instanceof HTMLAnchorElement;"radio"===a.type&&(a.name="".concat(a.name,"-").concat(i));for(const[l,c]of Object.entries(a))if(null!==c&&void 0!==c)switch(l){case"class":c.length&&t.setAttribute(l,c.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",c);break;case"style":Object.assign(t.style,c);break;case"textContent":t.textContent=c;break;default:(!o||"href"!==l&&"newWindow"!==l)&&t.setAttribute(l,c)}o&&s.addLinkAttributes(t,a.href,a.newWindow),r&&a.dataId&&this.setupStorage(t,a.dataId,n,r)}static render(e){const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,i=e.intent||"display",s=document.createElement(r.name);r.attributes&&this.setAttributes({html:s,element:r,intent:i,linkService:n});const a="richText"!==i,o=e.div;if(o.append(s),e.viewport){const t="matrix(".concat(e.viewport.transform.join(","),")");o.style.transform=t}a&&o.setAttribute("class","xfaLayer xfaFont");const l=[];if(0===r.children.length){if(r.value){const e=document.createTextNode(r.value);s.append(e),a&&Mz.shouldBuildText(r.name)&&l.push(e)}return{textDivs:l}}const c=[[r,-1,s]];for(;c.length>0;){var d,u;const[e,r,s]=c.at(-1);if(r+1===e.children.length){c.pop();continue}const o=e.children[++c.at(-1)[1]];if(null===o)continue;const{name:h}=o;if("#text"===h){const e=document.createTextNode(o.value);l.push(e),s.append(e);continue}const p=null!==o&&void 0!==o&&null!==(d=o.attributes)&&void 0!==d&&d.xmlns?document.createElementNS(o.attributes.xmlns,h):document.createElement(h);if(s.append(p),o.attributes&&this.setAttributes({html:p,element:o,storage:t,intent:i,linkService:n}),(null===(u=o.children)||void 0===u?void 0:u.length)>0)c.push([o,-1,p]);else if(o.value){const e=document.createTextNode(o.value);a&&Mz.shouldBuildText(h)&&l.push(e),p.append(e)}}for(const h of o.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))h.setAttribute("readOnly",!0);return{textDivs:l}}static update(e){const t="matrix(".concat(e.viewport.transform.join(","),")");e.div.style.transform=t,e.div.hidden=!1}}const Oz="http://www.w3.org/2000/svg";class Rz{}async function Iz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text";if(Uz(e,document.baseURI)){const n=await fetch(e);if(!n.ok)throw new Error(n.statusText);switch(t){case"arraybuffer":return n.arrayBuffer();case"blob":return n.blob();case"json":return n.json()}return n.text()}return new Promise((n,r)=>{const i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE)if(200!==i.status&&0!==i.status)r(new Error(i.statusText));else{switch(t){case"arraybuffer":case"blob":case"json":return void n(i.response)}n(i.responseText)}},i.send(null)})}iB=Rz,(0,ol.A)(Rz,"CSS",96),(0,ol.A)(Rz,"PDF",72),(0,ol.A)(Rz,"PDF_TO_CSS_UNITS",iB.CSS/iB.PDF);class Lz{constructor(e){let{viewBox:t,userUnit:n,scale:r,rotation:i,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}=e;this.viewBox=t,this.userUnit=n,this.scale=r,this.rotation=i,this.offsetX=s,this.offsetY=a,r*=n;const l=(t[2]+t[0])/2,c=(t[3]+t[1])/2;let d,u,h,p,m,f,g,v;switch(i%=360,i<0&&(i+=360),i){case 180:d=-1,u=0,h=0,p=1;break;case 90:d=0,u=1,h=1,p=0;break;case 270:d=0,u=-1,h=-1,p=0;break;case 0:d=1,u=0,h=0,p=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(h=-h,p=-p),0===d?(m=Math.abs(c-t[1])*r+s,f=Math.abs(l-t[0])*r+a,g=(t[3]-t[1])*r,v=(t[2]-t[0])*r):(m=Math.abs(l-t[0])*r+s,f=Math.abs(c-t[1])*r+a,g=(t[2]-t[0])*r,v=(t[3]-t[1])*r),this.transform=[d*r,u*r,h*r,p*r,m-d*r*l-h*r*c,f-u*r*l-p*r*c],this.width=g,this.height=v}get rawDims(){const e=this.viewBox;return uz(this,"rawDims",{pageWidth:e[2]-e[0],pageHeight:e[3]-e[1],pageX:e[0],pageY:e[1]})}clone(){let{scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Lz({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}convertToViewportPoint(e,t){const n=[e,t];return Nz.applyTransform(n,this.transform),n}convertToViewportRectangle(e){const t=[e[0],e[1]];Nz.applyTransform(t,this.transform);const n=[e[2],e[3]];return Nz.applyTransform(n,this.transform),[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){const n=[e,t];return Nz.applyInverseTransform(n,this.transform),n}}class Fz extends hz{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;super(e,"RenderingCancelledException"),this.extraDelay=t}}function Bz(e){const t=e.length;let n=0;for(;n<t&&""===e[n].trim();)n++;return"data:"===e.substring(n,n+5).toLowerCase()}function zz(e){return"string"===typeof e&&/\.pdf$/i.test(e)}class Wz{constructor(){(0,ol.A)(this,"started",Object.create(null)),(0,ol.A)(this,"times",[])}time(e){e in this.started&&az("Timer is already running for ".concat(e)),this.started[e]=Date.now()}timeEnd(e){e in this.started||az("Timer has not been started for ".concat(e)),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:i}of this.times)e.push("".concat(n.padEnd(t)," ").concat(i-r,"ms\n"));return e.join("")}}function Uz(e,t){const n=t?URL.parse(e,t):URL.parse(e);return"http:"===(null===n||void 0===n?void 0:n.protocol)||"https:"===(null===n||void 0===n?void 0:n.protocol)}function Vz(e){e.preventDefault()}function Hz(e){e.preventDefault(),e.stopPropagation()}class qz{static toDateObject(e){if(e instanceof Date)return e;if(!e||"string"!==typeof e)return null;ZF(qz,this,Gz)._||(Gz._=ZF(qz,this,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?")));const t=ZF(qz,this,Gz)._.exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let i=parseInt(t[3],10);i=i>=1&&i<=31?i:1;let s=parseInt(t[4],10);s=s>=0&&s<=23?s:0;let a=parseInt(t[5],10);a=a>=0&&a<=59?a:0;let o=parseInt(t[6],10);o=o>=0&&o<=59?o:0;const l=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let d=parseInt(t[9],10)||0;return d=d>=0&&d<=59?d:0,"-"===l?(s+=c,a+=d):"+"===l&&(s-=c,a-=d),new Date(Date.UTC(n,r,i,s,a,o))}}var Gz={_:void 0};function Kz(e){if(e.startsWith("#")){const t=parseInt(e.slice(1),16);return[(16711680&t)>>16,(65280&t)>>8,255&t]}return e.startsWith("rgb(")?e.slice(4,-1).split(",").map(e=>parseInt(e)):e.startsWith("rgba(")?e.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(az('Not a valid color format: "'.concat(e,'"')),[0,0,0])}function Yz(e){const{a:t,b:n,c:r,d:i,e:s,f:a}=e.getTransform();return[t,n,r,i,s,a]}function Xz(e){const{a:t,b:n,c:r,d:i,e:s,f:a}=e.getTransform().invertSelf();return[t,n,r,i,s,a]}function Jz(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(t instanceof Lz){const{pageWidth:r,pageHeight:i}=t.rawDims,{style:s}=e,a=wz.isCSSRoundSupported,o="var(--total-scale-factor) * ".concat(r,"px"),l="var(--total-scale-factor) * ".concat(i,"px"),c=a?"round(down, ".concat(o,", var(--scale-round-x))"):"calc(".concat(o,")"),d=a?"round(down, ".concat(l,", var(--scale-round-y))"):"calc(".concat(l,")");n&&t.rotation%180!==0?(s.width=d,s.height=c):(s.width=c,s.height=d)}r&&e.setAttribute("data-main-rotation",t.rotation)}class $z{constructor(){const{pixelRatio:e}=$z;this.sx=e,this.sy=e}get scaled(){return 1!==this.sx||1!==this.sy}get symmetric(){return this.sx===this.sy}limitCanvas(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,s=1/0,a=1/0,o=1/0;(n=$z.capPixels(n,i))>0&&(s=Math.sqrt(n/(e*t))),-1!==r&&(a=r/e,o=r/t);const l=Math.min(s,a,o);return(this.sx>l||this.sy>l)&&(this.sx=l,this.sy=l,!0)}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(e,t){if(t>=0){const n=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+t/100));return e>0?Math.min(e,n):n}return e}}const Qz=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];class Zz{static get isDarkMode(){var e,t;return uz(this,"isDarkMode",!(null===(e=window)||void 0===e||null===(t=e.matchMedia)||void 0===t||!t.call(e,"(prefers-color-scheme: dark)").matches))}}function eW(e,t){const n=e[0]/255,r=e[1]/255,i=e[2]/255,s=Math.max(n,r,i),a=Math.min(n,r,i),o=(s+a)/2;if(s===a)t[0]=t[1]=0;else{const e=s-a;switch(t[1]=o<.5?e/(s+a):e/(2-s-a),s){case n:t[0]=60*((r-i)/e+(r<i?6:0));break;case r:t[0]=60*((i-n)/e+2);break;case i:t[0]=60*((n-r)/e+4)}}t[2]=o}function tW(e,t){const n=e[0],r=e[1],i=e[2],s=(1-Math.abs(2*i-1))*r,a=s*(1-Math.abs(n/60%2-1)),o=i-s/2;switch(Math.floor(n/60)){case 0:t[0]=s+o,t[1]=a+o,t[2]=o;break;case 1:t[0]=a+o,t[1]=s+o,t[2]=o;break;case 2:t[0]=o,t[1]=s+o,t[2]=a+o;break;case 3:t[0]=o,t[1]=a+o,t[2]=s+o;break;case 4:t[0]=a+o,t[1]=o,t[2]=s+o;break;case 5:case 6:t[0]=s+o,t[1]=o,t[2]=a+o}}function nW(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function rW(e,t,n){tW(e,n),n.map(nW);const r=.2126*n[0]+.7152*n[1]+.0722*n[2];tW(t,n),n.map(nW);const i=.2126*n[0]+.7152*n[1]+.0722*n[2];return r>i?(r+.05)/(i+.05):(i+.05)/(r+.05)}const iW=new Map;function sW(e,t){let{html:n,dir:r,className:i}=e;const s=document.createDocumentFragment();if("string"===typeof n){const e=document.createElement("p");e.dir=r||"auto";const t=n.split(/(?:\r\n?|\n)/);for(let n=0,r=t.length;n<r;++n){const i=t[n];e.append(document.createTextNode(i)),n<r-1&&e.append(document.createElement("br"))}s.append(e)}else Dz.render({xfaHtml:n,div:s,intent:"richText"});s.firstChild.classList.add("richText",i),t.append(s)}var aW=new WeakMap,oW=new WeakMap,lW=new WeakMap,cW=new WeakMap,dW=new WeakMap,uW=new WeakMap,hW=new WeakMap,pW=new WeakMap,mW=new WeakSet;class fW{constructor(e){$F(this,mW),QF(this,aW,null),QF(this,oW,null),QF(this,lW,void 0),QF(this,cW,null),QF(this,dW,null),QF(this,uW,null),QF(this,hW,null),QF(this,pW,null),nB(lW,this,e),wW._||(wW._=Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const e=nB(aW,this,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=tB(lW,this)._uiManager._signal;t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("contextmenu",Vz,{signal:t}),e.addEventListener("pointerdown",gW,{signal:t}));const n=nB(cW,this,document.createElement("div"));n.className="buttons",e.append(n);const r=tB(lW,this).toolbarPosition;if(r){const{style:t}=e,n="ltr"===tB(lW,this)._uiManager.direction?1-r[0]:r[0];t.insetInlineEnd="".concat(100*n,"%"),t.top="calc(".concat(100*r[1],"% + var(--editor-toolbar-vert-offset))")}return e}get div(){return tB(aW,this)}hide(){var e;tB(aW,this).classList.add("hidden"),null===(e=tB(oW,this))||void 0===e||e.hideDropdown()}show(){var e,t;tB(aW,this).classList.remove("hidden"),null===(e=tB(dW,this))||void 0===e||e.shown(),null===(t=tB(uW,this))||void 0===t||t.shown()}addDeleteButton(){const{editorType:e,_uiManager:t}=tB(lW,this),n=document.createElement("button");n.classList.add("basic","deleteButton"),n.tabIndex=0,n.setAttribute("data-l10n-id",wW._[e]),ZF(mW,this,xW).call(this,n)&&n.addEventListener("click",e=>{t.delete()},{signal:t._signal}),tB(cW,this).append(n)}async addAltText(e){const t=await e.render();ZF(mW,this,xW).call(this,t),tB(cW,this).append(t,eB(mW,this,bW)),nB(dW,this,e)}addComment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(tB(uW,this))return;const n=e.renderForToolbar();if(!n)return;ZF(mW,this,xW).call(this,n);const r=nB(hW,this,eB(mW,this,bW));t?(tB(cW,this).insertBefore(n,t),tB(cW,this).insertBefore(r,t)):tB(cW,this).append(n,r),nB(uW,this,e),e.toolbar=this}addColorPicker(e){if(tB(oW,this))return;nB(oW,this,e);const t=e.renderButton();ZF(mW,this,xW).call(this,t),tB(cW,this).append(t,eB(mW,this,bW))}async addEditSignatureButton(e){const t=nB(pW,this,await e.renderEditButton(tB(lW,this)));ZF(mW,this,xW).call(this,t),tB(cW,this).append(t,eB(mW,this,bW))}removeButton(e){var t,n;if("comment"===e)null===(t=tB(uW,this))||void 0===t||t.removeToolbarCommentButton(),nB(uW,this,null),null===(n=tB(hW,this))||void 0===n||n.remove(),nB(hW,this,null)}async addButton(e,t){switch(e){case"colorPicker":this.addColorPicker(t);break;case"altText":await this.addAltText(t);break;case"editSignature":await this.addEditSignatureButton(t);break;case"delete":this.addDeleteButton();break;case"comment":this.addComment(t)}}async addButtonBefore(e,t,n){const r=tB(cW,this).querySelector(n);r&&"comment"===e&&this.addComment(t,r)}updateEditSignatureButton(e){tB(pW,this)&&(tB(pW,this).title=e)}remove(){var e;tB(aW,this).remove(),null===(e=tB(oW,this))||void 0===e||e.destroy(),nB(oW,this,null)}}function gW(e){e.stopPropagation()}function vW(e){tB(lW,this)._focusEventsAllowed=!1,Hz(e)}function yW(e){tB(lW,this)._focusEventsAllowed=!0,Hz(e)}function xW(e){const t=tB(lW,this)._uiManager._signal;return t instanceof AbortSignal&&!t.aborted&&(e.addEventListener("focusin",ZF(mW,this,vW).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",ZF(mW,this,yW).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",Vz,{signal:t}),!0)}function bW(e){const t=document.createElement("div");return t.className="divider",t}var wW={_:null},jW=new WeakMap,NW=new WeakMap,kW=new WeakMap,AW=new WeakSet;class SW{constructor(e){$F(this,AW),QF(this,jW,null),QF(this,NW,null),QF(this,kW,void 0),nB(kW,this,e)}show(e,t,n){const[r,i]=ZF(AW,this,CW).call(this,t,n),{style:s}=tB(NW,this)||nB(NW,this,ZF(AW,this,_W).call(this));e.append(tB(NW,this)),s.insetInlineEnd="".concat(100*r,"%"),s.top="calc(".concat(100*i,"% + var(--editor-toolbar-vert-offset))")}hide(){tB(NW,this).remove()}}function _W(){const e=nB(NW,this,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar");const t=tB(kW,this)._signal;t instanceof AbortSignal&&!t.aborted&&e.addEventListener("contextmenu",Vz,{signal:t});const n=nB(jW,this,document.createElement("div"));return n.className="buttons",e.append(n),tB(kW,this).hasCommentManager()&&ZF(AW,this,EW).call(this,"commentButton","pdfjs-comment-floating-button","pdfjs-comment-floating-button-label",()=>{tB(kW,this).commentSelection("floating_button")}),ZF(AW,this,EW).call(this,"highlightButton","pdfjs-highlight-floating-button1","pdfjs-highlight-floating-button-label",()=>{tB(kW,this).highlightSelection("floating_button")}),e}function CW(e,t){let n=0,r=0;for(const i of e){const e=i.y+i.height;if(e<n)continue;const s=i.x+(t?i.width:0);e>n?(r=s,n=e):t?s>r&&(r=s):s<r&&(r=s)}return[t?1-r:r,n]}function EW(e,t,n,r){const i=document.createElement("button");i.classList.add("basic",e),i.tabIndex=0,i.setAttribute("data-l10n-id",t);const s=document.createElement("span");i.append(s),s.className="visuallyHidden",s.setAttribute("data-l10n-id",n);const a=tB(kW,this)._signal;a instanceof AbortSignal&&!a.aborted&&(i.addEventListener("contextmenu",Vz,{signal:a}),i.addEventListener("click",r,{signal:a})),tB(jW,this).append(i)}function PW(e,t,n){for(const r of n)t.addEventListener(r,e[r].bind(e))}var TW=new WeakMap;class MW{constructor(){QF(this,TW,0)}get id(){var e,t;return"".concat(OB).concat((nB(TW,this,(e=tB(TW,this),t=e++,e)),t))}}var DW=new WeakMap,OW=new WeakMap,RW=new WeakMap,IW=new WeakSet;class LW{constructor(){$F(this,IW),QF(this,DW,Cz()),QF(this,OW,0),QF(this,RW,null)}static get _isSVGFittingCanvas(){const e=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),t=new Image;t.src='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>';return uz(this,"_isSVGFittingCanvas",t.decode().then(()=>(e.drawImage(t,0,0,1,1,0,0,1,3),0===new Uint32Array(e.getImageData(0,0,1,1).data.buffer)[0])))}async getFromFile(e){const{lastModified:t,name:n,size:r,type:i}=e;return ZF(IW,this,FW).call(this,"".concat(t,"_").concat(n,"_").concat(r,"_").concat(i),e)}async getFromUrl(e){return ZF(IW,this,FW).call(this,e,e)}async getFromBlob(e,t){const n=await t;return ZF(IW,this,FW).call(this,e,n)}async getFromId(e){tB(RW,this)||nB(RW,this,new Map);const t=tB(RW,this).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:e}=t;return delete t.blobPromise,this.getFromBlob(t.id,e)}return this.getFromUrl(t.url)}getFromCanvas(e,t){var n,r,i;tB(RW,this)||nB(RW,this,new Map);let s=tB(RW,this).get(e);if(null!==(i=s)&&void 0!==i&&i.bitmap)return s.refCounter+=1,s;const a=new OffscreenCanvas(t.width,t.height);return a.getContext("2d").drawImage(t,0,0),s={bitmap:a.transferToImageBitmap(),id:"image_".concat(tB(DW,this),"_").concat((nB(OW,this,(n=tB(OW,this),r=n++,n)),r)),refCounter:1,isSvg:!1},tB(RW,this).set(e,s),tB(RW,this).set(s.id,s),s}getSvgUrl(e){const t=tB(RW,this).get(e);return null!==t&&void 0!==t&&t.isSvg?t.svgUrl:null}deleteId(e){var t;tB(RW,this)||nB(RW,this,new Map);const n=tB(RW,this).get(e);if(!n)return;if(n.refCounter-=1,0!==n.refCounter)return;const{bitmap:r}=n;if(!n.url&&!n.file){const e=new OffscreenCanvas(r.width,r.height);e.getContext("bitmaprenderer").transferFromImageBitmap(r),n.blobPromise=e.convertToBlob()}null===(t=r.close)||void 0===t||t.call(r),n.bitmap=null}isValidId(e){return e.startsWith("image_".concat(tB(DW,this),"_"))}}async function FW(e,t){var n;tB(RW,this)||nB(RW,this,new Map);let r=tB(RW,this).get(e);if(null===r)return null;if(null!==(n=r)&&void 0!==n&&n.bitmap)return r.refCounter+=1,r;try{var i,s;let e;if(r||(r={bitmap:null,id:"image_".concat(tB(DW,this),"_").concat((nB(OW,this,(i=tB(OW,this),s=i++,i)),s)),refCounter:0,isSvg:!1}),"string"===typeof t?(r.url=t,e=await Iz(t,"blob")):t instanceof File?e=r.file=t:t instanceof Blob&&(e=t),"image/svg+xml"===e.type){const t=sB._isSVGFittingCanvas,n=new FileReader,i=new Image,s=new Promise((e,s)=>{i.onload=()=>{r.bitmap=i,r.isSvg=!0,e()},n.onload=async()=>{const e=r.svgUrl=n.result;i.src=await t?"".concat(e,"#svgView(preserveAspectRatio(none))"):e},i.onerror=n.onerror=s});n.readAsDataURL(e),await s}else r.bitmap=await createImageBitmap(e);r.refCounter=1}catch(Ae){az(Ae),r=null}return tB(RW,this).set(e,r),r&&tB(RW,this).set(r.id,r),r}sB=LW;var BW=new WeakMap,zW=new WeakMap,WW=new WeakMap,UW=new WeakMap;class VW{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:128;QF(this,BW,[]),QF(this,zW,!1),QF(this,WW,void 0),QF(this,UW,-1),nB(WW,this,e)}add(e){let{cmd:t,undo:n,post:r,mustExec:i,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}=e;if(i&&t(),tB(zW,this))return;const l={cmd:t,undo:n,post:r,type:s};if(-1===tB(UW,this))return tB(BW,this).length>0&&(tB(BW,this).length=0),nB(UW,this,0),void tB(BW,this).push(l);if(a&&tB(BW,this)[tB(UW,this)].type===s)return o&&(l.undo=tB(BW,this)[tB(UW,this)].undo),void(tB(BW,this)[tB(UW,this)]=l);const c=tB(UW,this)+1;c===tB(WW,this)?tB(BW,this).splice(0,1):(nB(UW,this,c),c<tB(BW,this).length&&tB(BW,this).splice(c)),tB(BW,this).push(l)}undo(){if(-1===tB(UW,this))return;nB(zW,this,!0);const{undo:e,post:t}=tB(BW,this)[tB(UW,this)];e(),null===t||void 0===t||t(),nB(zW,this,!1),nB(UW,this,tB(UW,this)-1)}redo(){if(tB(UW,this)<tB(BW,this).length-1){nB(UW,this,tB(UW,this)+1),nB(zW,this,!0);const{cmd:e,post:t}=tB(BW,this)[tB(UW,this)];e(),null===t||void 0===t||t(),nB(zW,this,!1)}}hasSomethingToUndo(){return-1!==tB(UW,this)}hasSomethingToRedo(){return tB(UW,this)<tB(BW,this).length-1}cleanType(e){if(-1!==tB(UW,this)){for(let t=tB(UW,this);t>=0;t--)if(tB(BW,this)[t].type!==e)return tB(BW,this).splice(t+1,tB(UW,this)-t),void nB(UW,this,t);tB(BW,this).length=0,nB(UW,this,-1)}}destroy(){nB(BW,this,null)}}var HW=new WeakSet;class qW{constructor(e){$F(this,HW),this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=wz.platform;for(const[n,r,i={}]of e)for(const e of n){const n=e.startsWith("mac+");t&&n?(this.callbacks.set(e.slice(4),{callback:r,options:i}),this.allKeys.add(e.split("+").at(-1))):t||n||(this.callbacks.set(e,{callback:r,options:i}),this.allKeys.add(e.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(ZF(HW,this,GW).call(this,t));if(!n)return;const{callback:r,options:{bubbles:i=!1,args:s=[],checker:a=null}}=n;a&&!a(e,t)||(r.bind(e,...s,t)(),i||Hz(t))}}function GW(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t}class KW{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return function(e){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const n of e.keys()){t.style.color=n;const r=window.getComputedStyle(t).color;e.set(n,Kz(r))}t.remove()}(e),uz(this,"_colors",e)}convert(e){const t=Kz(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((e,n)=>e===t[n]))return KW._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?Nz.makeHexColor(...t):e}}(0,ol.A)(KW,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));var YW=new WeakMap,XW=new WeakMap,JW=new WeakMap,$W=new WeakMap,QW=new WeakMap,ZW=new WeakMap,eU=new WeakMap,tU=new WeakMap,nU=new WeakMap,rU=new WeakMap,iU=new WeakMap,sU=new WeakMap,aU=new WeakMap,oU=new WeakMap,lU=new WeakMap,cU=new WeakMap,dU=new WeakMap,uU=new WeakMap,hU=new WeakMap,pU=new WeakMap,mU=new WeakMap,fU=new WeakMap,gU=new WeakMap,vU=new WeakMap,yU=new WeakMap,xU=new WeakMap,bU=new WeakMap,wU=new WeakMap,jU=new WeakMap,NU=new WeakMap,kU=new WeakMap,AU=new WeakMap,SU=new WeakMap,_U=new WeakMap,CU=new WeakMap,EU=new WeakMap,PU=new WeakMap,TU=new WeakMap,MU=new WeakMap,DU=new WeakMap,OU=new WeakMap,RU=new WeakMap,IU=new WeakMap,LU=new WeakMap,FU=new WeakMap,BU=new WeakMap,zU=new WeakMap,WU=new WeakMap,UU=new WeakMap,VU=new WeakSet;class HU{static get _keyboardManager(){const e=HU.prototype,t=e=>tB(BU,e).contains(document.activeElement)&&"BUTTON"!==document.activeElement.tagName&&e.hasSomethingToControl(),n=(e,t)=>{let{target:n}=t;if(n instanceof HTMLInputElement){const{type:e}=n;return"text"!==e&&"number"!==e}return!0},r=this.TRANSLATE_SMALL,i=this.TRANSLATE_BIG;return uz(this,"_keyboardManager",new qW([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&tB(BU,e).contains(n)&&!e.isEnterHandled}}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(e,t)=>{let{target:n}=t;return!(n instanceof HTMLButtonElement)&&tB(BU,e).contains(document.activeElement)}}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-i,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[i,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-i],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,i],checker:t}]]))}constructor(e,t,n,r,i,s,a,o,l,c,d,u,h,p,m,f){$F(this,VU),QF(this,YW,new AbortController),QF(this,XW,null),QF(this,JW,null),QF(this,$W,new Map),QF(this,QW,new Map),QF(this,ZW,null),QF(this,eU,null),QF(this,tU,null),QF(this,nU,new VW),QF(this,rU,null),QF(this,iU,null),QF(this,sU,null),QF(this,aU,0),QF(this,oU,new Set),QF(this,lU,null),QF(this,cU,null),QF(this,dU,new Set),(0,ol.A)(this,"_editorUndoBar",null),QF(this,uU,!1),QF(this,hU,!1),QF(this,pU,!1),QF(this,mU,null),QF(this,fU,null),QF(this,gU,null),QF(this,vU,null),QF(this,yU,!1),QF(this,xU,null),QF(this,bU,new MW),QF(this,wU,!1),QF(this,jU,!1),QF(this,NU,!1),QF(this,kU,null),QF(this,AU,null),QF(this,SU,null),QF(this,_U,null),QF(this,CU,null),QF(this,EU,RB.NONE),QF(this,PU,new Set),QF(this,TU,null),QF(this,MU,null),QF(this,DU,null),QF(this,OU,null),QF(this,RU,null),QF(this,IU,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1}),QF(this,LU,[0,0]),QF(this,FU,null),QF(this,BU,null),QF(this,zU,null),QF(this,WU,null),QF(this,UU,null);const g=this._signal=tB(YW,this).signal;nB(BU,this,e),nB(zU,this,t),nB(WU,this,n),nB(ZW,this,r),nB(rU,this,i),nB(MU,this,s),nB(RU,this,o),this._eventBus=a,a._on("editingaction",this.onEditingAction.bind(this),{signal:g}),a._on("pagechanging",this.onPageChanging.bind(this),{signal:g}),a._on("scalechanging",this.onScaleChanging.bind(this),{signal:g}),a._on("rotationchanging",this.onRotationChanging.bind(this),{signal:g}),a._on("setpreference",this.onSetPreference.bind(this),{signal:g}),a._on("switchannotationeditorparams",e=>this.updateParams(e.type,e.value),{signal:g}),window.addEventListener("pointerdown",()=>{nB(jU,this,!0)},{capture:!0,signal:g}),window.addEventListener("pointerup",()=>{nB(jU,this,!1)},{capture:!0,signal:g}),ZF(VU,this,JU).call(this),ZF(VU,this,rV).call(this),ZF(VU,this,ZU).call(this),nB(eU,this,o.annotationStorage),nB(mU,this,o.filterFactory),nB(DU,this,l),nB(vU,this,c||null),nB(uU,this,d),nB(hU,this,u),nB(pU,this,h),nB(CU,this,p||null),this.viewParameters={realScale:Rz.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=m||null,this._supportsPinchToZoom=!1!==f,null===i||void 0===i||i.setSidebarUiManager(this)}destroy(){var e,t,n,r,i,s,a,o,l;null===(e=tB(UU,this))||void 0===e||e.resolve(),nB(UU,this,null),null===(t=tB(YW,this))||void 0===t||t.abort(),nB(YW,this,null),this._signal=null;for(const c of tB(QW,this).values())c.destroy();tB(QW,this).clear(),tB($W,this).clear(),tB(dU,this).clear(),null===(n=tB(_U,this))||void 0===n||n.clear(),nB(XW,this,null),tB(PU,this).clear(),tB(nU,this).destroy(),null===(r=tB(ZW,this))||void 0===r||r.destroy(),null===(i=tB(rU,this))||void 0===i||i.destroy(),null===(s=tB(MU,this))||void 0===s||s.destroy(),null===(a=tB(xU,this))||void 0===a||a.hide(),nB(xU,this,null),null===(o=tB(SU,this))||void 0===o||o.destroy(),nB(SU,this,null),nB(JW,this,null),tB(fU,this)&&(clearTimeout(tB(fU,this)),nB(fU,this,null)),tB(FU,this)&&(clearTimeout(tB(FU,this)),nB(FU,this,null)),null===(l=this._editorUndoBar)||void 0===l||l.destroy(),nB(RU,this,null)}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return tB(CU,this)}get useNewAltTextFlow(){return tB(hU,this)}get useNewAltTextWhenAddingImage(){return tB(pU,this)}get hcmFilter(){return uz(this,"hcmFilter",tB(DU,this)?tB(mU,this).addHCMFilter(tB(DU,this).foreground,tB(DU,this).background):"none")}get direction(){return uz(this,"direction",getComputedStyle(tB(BU,this)).direction)}get _highlightColors(){return uz(this,"_highlightColors",tB(vU,this)?new Map(tB(vU,this).split(",").map(e=>((e=e.split("=").map(e=>e.trim()))[1]=e[1].toUpperCase(),e))):null)}get highlightColors(){const{_highlightColors:e}=this;if(!e)return uz(this,"highlightColors",null);const t=new Map,n=!!tB(DU,this);for(const[r,i]of e){const e=r.endsWith("_HCM");n&&e?t.set(r.replace("_HCM",""),i):n||e||t.set(r,i)}return uz(this,"highlightColors",t)}get highlightColorNames(){return uz(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}getNonHCMColor(e){if(!this._highlightColors)return e;const t=this.highlightColorNames.get(e);return this._highlightColors.get(t)||e}getNonHCMColorName(e){return this.highlightColorNames.get(e)||e}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),nB(sU,this,e)}setMainHighlightColorPicker(e){nB(SU,this,e)}editAltText(e){var t;let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];null===(t=tB(ZW,this))||void 0===t||t.editAltText(this,e,n)}hasCommentManager(){return!!tB(rU,this)}editComment(e,t,n,r){var i;null===(i=tB(rU,this))||void 0===i||i.showDialog(this,e,t,n,r)}selectComment(e,t){const n=tB(QW,this).get(e),r=null===n||void 0===n?void 0:n.getEditorByUID(t);null===r||void 0===r||r.toggleComment(!0,!0)}updateComment(e){var t;null===(t=tB(rU,this))||void 0===t||t.updateComment(e.getData())}updatePopupColor(e){var t;null===(t=tB(rU,this))||void 0===t||t.updatePopupColor(e)}removeComment(e){var t;null===(t=tB(rU,this))||void 0===t||t.removeComments([e.uid])}toggleComment(e,t){var n;let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;null===(n=tB(rU,this))||void 0===n||n.toggleCommentPopup(e,t,r)}makeCommentColor(e,t){var n;return e&&(null===(n=tB(rU,this))||void 0===n?void 0:n.makeCommentColor(e,t))||null}getCommentDialogElement(){var e;return(null===(e=tB(rU,this))||void 0===e?void 0:e.dialogElement)||null}async waitForEditorsRendered(e){if(tB(QW,this).has(e-1))return;const{resolve:t,promise:n}=Promise.withResolvers(),r=n=>{n.pageNumber===e&&(this._eventBus._off("editorsrendered",r),t())};this._eventBus.on("editorsrendered",r),await n}getSignature(e){var t;null===(t=tB(MU,this))||void 0===t||t.getSignature({uiManager:this,editor:e})}get signatureManager(){return tB(MU,this)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference(e){let{name:t,value:n}=e;if("enableNewAltTextWhenAddingImage"===t)nB(pU,this,n)}onPageChanging(e){let{pageNumber:t}=e;nB(aU,this,t-1)}focusMainContainer(){tB(BU,this).focus()}findParent(e,t){for(const n of tB(QW,this).values()){const{x:r,y:i,width:s,height:a}=n.div.getBoundingClientRect();if(e>=r&&e<=r+s&&t>=i&&t<=i+a)return n}return null}disableUserSelect(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];tB(zU,this).classList.toggle("noUserSelect",e)}addShouldRescale(e){tB(dU,this).add(e)}removeShouldRescale(e){tB(dU,this).delete(e)}onScaleChanging(e){var t;let{scale:n}=e;this.commitOrRemove(),this.viewParameters.realScale=n*Rz.PDF_TO_CSS_UNITS;for(const r of tB(dU,this))r.onScaleChanging();null===(t=tB(sU,this))||void 0===t||t.onScaleChanging()}onRotationChanging(e){let{pagesRotation:t}=e;this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=document.getSelection();if(!n||n.isCollapsed)return;const{anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:a}=n,o=n.toString(),l=ZF(VU,this,qU).call(this,n).closest(".textLayer"),c=this.getSelectionBoxes(l);if(!c)return;n.empty();const d=ZF(VU,this,GU).call(this,l),u=tB(EU,this)===RB.NONE,h=()=>{const n=null===d||void 0===d?void 0:d.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:r,anchorOffset:i,focusNode:s,focusOffset:a,text:o});u&&this.showAllEditors("highlight",!0,!0),t&&(null===n||void 0===n||n.editComment())};u?this.switchToMode(RB.HIGHLIGHT,h):h()}commentSelection(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.highlightSelection(e,!0)}getAndRemoveDataFromAnnotationStorage(e){if(!tB(eU,this))return null;const t="".concat(OB).concat(e),n=tB(eU,this).getRawValue(t);return n&&tB(eU,this).remove(t),n}addToAnnotationStorage(e){e.isEmpty()||!tB(eU,this)||tB(eU,this).has(e.id)||tB(eU,this).setValue(e.id,e)}a11yAlert(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=tB(WU,this);n&&(n.setAttribute("data-l10n-id",e),t?n.setAttribute("data-l10n-args",JSON.stringify(t)):n.removeAttribute("data-l10n-args"))}blur(){if(this.isShiftKeyDown=!1,tB(yU,this)&&(nB(yU,this,!1),ZF(VU,this,XU).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of tB(PU,this))if(t.div.contains(e)){nB(AU,this,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!tB(AU,this))return;const[e,t]=tB(AU,this);nB(AU,this,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){ZF(VU,this,ZU).call(this),ZF(VU,this,tV).call(this)}removeEditListeners(){ZF(VU,this,eV).call(this),ZF(VU,this,nV).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of tB(cU,this))if(n.isHandlingMimeForPasting(t))return e.dataTransfer.dropEffect="copy",void e.preventDefault()}drop(e){for(const t of e.dataTransfer.items)for(const n of tB(cU,this))if(n.isHandlingMimeForPasting(t.type))return n.paste(t,this.currentLayer),void e.preventDefault()}copy(e){var t;if(e.preventDefault(),null===(t=tB(XW,this))||void 0===t||t.commitOrRemove(),!this.hasSelection)return;const n=[];for(const r of tB(PU,this)){const e=r.serialize(!0);e&&n.push(e)}0!==n.length&&e.clipboardData.setData("application/pdfjs",JSON.stringify(n))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const e of tB(cU,this))if(e.isHandlingMimeForPasting(s.type))return void e.paste(s,this.currentLayer);let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(i){return void az('paste: "'.concat(i.message,'".'))}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const e=[];for(const s of n){const t=await r.deserialize(s);if(!t)return;e.push(t)}const t=()=>{for(const t of e)ZF(VU,this,lV).call(this,t);ZF(VU,this,uV).call(this,e)},i=()=>{for(const t of e)t.remove()};this.addCommands({cmd:t,undo:i,mustExec:!0})}catch(i){az('paste: "'.concat(i.message,'".'))}}keydown(e){this.isShiftKeyDown||"Shift"!==e.key||(this.isShiftKeyDown=!0),tB(EU,this)===RB.NONE||this.isEditorHandlingKeyboard||HU._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&"Shift"===e.key&&(this.isShiftKeyDown=!1,tB(yU,this)&&(nB(yU,this,!1),ZF(VU,this,XU).call(this,"main_toolbar")))}onEditingAction(e){let{name:t}=e;switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break;case"commentSelection":this.commentSelection("context_menu")}}setEditingState(e){e?(ZF(VU,this,$U).call(this),ZF(VU,this,tV).call(this),ZF(VU,this,iV).call(this,{isEditing:tB(EU,this)!==RB.NONE,isEmpty:ZF(VU,this,dV).call(this),hasSomethingToUndo:tB(nU,this).hasSomethingToUndo(),hasSomethingToRedo:tB(nU,this).hasSomethingToRedo(),hasSelectedEditor:!1})):(ZF(VU,this,QU).call(this),ZF(VU,this,nV).call(this),ZF(VU,this,iV).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!tB(cU,this)){nB(cU,this,e);for(const e of tB(cU,this))ZF(VU,this,sV).call(this,e.defaultPropertiesToUpdate)}}getId(){return tB(bU,this).id}get currentLayer(){return tB(QW,this).get(tB(aU,this))}getLayer(e){return tB(QW,this).get(e)}get currentPageIndex(){return tB(aU,this)}addLayer(e){tB(QW,this).set(e.pageIndex,e),tB(wU,this)?e.enable():e.disable()}removeLayer(e){tB(QW,this).delete(e.pageIndex)}async updateMode(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(tB(EU,this)!==e&&(!tB(UU,this)||(await tB(UU,this).promise,tB(UU,this)))){var o,l;if(nB(UU,this,Promise.withResolvers()),null===(t=tB(sU,this))||void 0===t||t.commitOrRemove(),tB(EU,this)===RB.POPUP)null===(o=tB(rU,this))||void 0===o||o.hideSidebar();if(null===(n=tB(rU,this))||void 0===n||n.destroyPopup(),nB(EU,this,e),e===RB.NONE){var c;this.setEditingState(!1),ZF(VU,this,oV).call(this);for(const e of tB($W,this).values())e.hideStandaloneCommentButton();return null===(c=this._editorUndoBar)||void 0===c||c.hide(),this.toggleComment(null),void tB(UU,this).resolve()}for(const e of tB($W,this).values())e.addStandaloneCommentButton();if(e===RB.SIGNATURE)await(null===(l=tB(MU,this))||void 0===l?void 0:l.loadSignatures());this.setEditingState(!0),await ZF(VU,this,aV).call(this),this.unselectAll();for(const t of tB(QW,this).values())t.updateMode(e);if(e===RB.POPUP){var d;tB(JW,this)||nB(JW,this,await tB(RU,this).getAnnotationsByType(new Set(tB(cU,this).map(e=>e._editorType))));const e=new Set,t=[];for(const n of tB($W,this).values()){const{annotationElementId:r,hasComment:i,deleted:s}=n;r&&e.add(r),i&&!s&&t.push(n.getData())}for(const n of tB(JW,this)){const{id:r,popupRef:i,contentsObj:s}=n;i&&null!==s&&void 0!==s&&s.str&&!e.has(r)&&!tB(oU,this).has(r)&&t.push(n)}null===(d=tB(rU,this))||void 0===d||d.showSidebar(t)}if(!r)return i&&this.addNewEditorFromKeyboard(),void tB(UU,this).resolve();for(const e of tB($W,this).values())e.uid===r?(this.setSelected(e),a?e.editComment():s?e.enterInEditMode():e.focus()):e.unselect();tB(UU,this).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e.mode!==tB(EU,this)&&this._eventBus.dispatch("switchannotationeditormode",(0,Ne.A)({source:this},e))}updateParams(e,t){if(tB(cU,this)){switch(e){case IB.CREATE:return void this.currentLayer.addNewEditor(t);case IB.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(tB(OU,this)||nB(OU,this,new Map)).set(e,t),this.showAllEditors("highlight",t)}if(this.hasSelection)for(const n of tB(PU,this))n.updateParams(e,t);else for(const n of tB(cU,this))n.updateDefaultParams(e,t)}}showAllEditors(e,t){var n,r;for(const i of tB($W,this).values())i.editorType===e&&i.show(t);(null===(n=null===(r=tB(OU,this))||void 0===r?void 0:r.get(IB.HIGHLIGHT_SHOW_ALL))||void 0===n||n)!==t&&ZF(VU,this,sV).call(this,[[IB.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(tB(NU,this)!==e){nB(NU,this,e);for(const t of tB(QW,this).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}*getEditors(e){for(const t of tB($W,this).values())t.pageIndex===e&&(yield t)}getEditor(e){return tB($W,this).get(e)}addEditor(e){tB($W,this).set(e.id,e)}removeEditor(e){var t,n;(e.div.contains(document.activeElement)&&(tB(fU,this)&&clearTimeout(tB(fU,this)),nB(fU,this,setTimeout(()=>{this.focusMainContainer(),nB(fU,this,null)},0))),tB($W,this).delete(e.id),e.annotationElementId)&&(null===(t=tB(_U,this))||void 0===t||t.delete(e.annotationElementId));(this.unselect(e),e.annotationElementId&&tB(oU,this).has(e.annotationElementId))||(null===(n=tB(eU,this))||void 0===n||n.remove(e.id))}addDeletedAnnotationElement(e){tB(oU,this).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return tB(oU,this).has(e)}removeDeletedAnnotationElement(e){tB(oU,this).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){tB(XW,this)!==e&&(nB(XW,this,e),e&&ZF(VU,this,sV).call(this,e.propertiesToUpdate))}updateUI(e){eB(VU,this,cV)===e&&ZF(VU,this,sV).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){ZF(VU,this,sV).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(tB(PU,this).has(e))return tB(PU,this).delete(e),e.unselect(),void ZF(VU,this,iV).call(this,{hasSelectedEditor:this.hasSelection});tB(PU,this).add(e),e.select(),ZF(VU,this,sV).call(this,e.propertiesToUpdate),ZF(VU,this,iV).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;this.updateToolbar({mode:e.mode,editId:e.id}),null===(t=tB(sU,this))||void 0===t||t.commitOrRemove();for(const n of tB(PU,this))n!==e&&n.unselect();tB(PU,this).clear(),tB(PU,this).add(e),e.select(),ZF(VU,this,sV).call(this,e.propertiesToUpdate),ZF(VU,this,iV).call(this,{hasSelectedEditor:!0})}isSelected(e){return tB(PU,this).has(e)}get firstSelectedEditor(){return tB(PU,this).values().next().value}unselect(e){e.unselect(),tB(PU,this).delete(e),ZF(VU,this,iV).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return 0!==tB(PU,this).size}get isEnterHandled(){return 1===tB(PU,this).size&&this.firstSelectedEditor.isEnterHandled}undo(){var e;tB(nU,this).undo(),ZF(VU,this,iV).call(this,{hasSomethingToUndo:tB(nU,this).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:ZF(VU,this,dV).call(this)}),null===(e=this._editorUndoBar)||void 0===e||e.hide()}redo(){tB(nU,this).redo(),ZF(VU,this,iV).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:tB(nU,this).hasSomethingToRedo(),isEmpty:ZF(VU,this,dV).call(this)})}addCommands(e){tB(nU,this).add(e),ZF(VU,this,iV).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:ZF(VU,this,dV).call(this)})}cleanUndoStack(e){tB(nU,this).cleanType(e)}delete(){var e;this.commitOrRemove();const t=null===(e=this.currentLayer)||void 0===e?void 0:e.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const n=t?[t]:[...tB(PU,this)],r=()=>{for(const e of n)ZF(VU,this,lV).call(this,e)};this.addCommands({cmd:()=>{var e;null===(e=this._editorUndoBar)||void 0===e||e.show(r,1===n.length?n[0].editorType:n.length);for(const t of n)t.remove()},undo:r,mustExec:!0})}commitOrRemove(){var e;null===(e=tB(XW,this))||void 0===e||e.commitOrRemove()}hasSomethingToControl(){return tB(XW,this)||this.hasSelection}selectAll(){for(const e of tB(PU,this))e.commit();ZF(VU,this,uV).call(this,tB($W,this).values())}unselectAll(){var e;if((!tB(XW,this)||(tB(XW,this).commitOrRemove(),tB(EU,this)===RB.NONE))&&(null===(e=tB(sU,this))||void 0===e||!e.commitOrRemove())&&this.hasSelection){for(const e of tB(PU,this))e.unselect();tB(PU,this).clear(),ZF(VU,this,iV).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2]||this.commitOrRemove(),!this.hasSelection)return;tB(LU,this)[0]+=e,tB(LU,this)[1]+=t;const[n,r]=tB(LU,this),i=[...tB(PU,this)];tB(FU,this)&&clearTimeout(tB(FU,this)),nB(FU,this,setTimeout(()=>{nB(FU,this,null),tB(LU,this)[0]=tB(LU,this)[1]=0,this.addCommands({cmd:()=>{for(const e of i)tB($W,this).has(e.id)&&(e.translateInPage(n,r),e.translationDone())},undo:()=>{for(const e of i)tB($W,this).has(e.id)&&(e.translateInPage(-n,-r),e.translationDone())},mustExec:!1})},1e3));for(const s of i)s.translateInPage(e,t),s.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),nB(lU,this,new Map);for(const e of tB(PU,this))tB(lU,this).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!tB(lU,this))return!1;this.disableUserSelect(!1);const e=tB(lU,this);nB(lU,this,null);let t=!1;for(const[{x:r,y:i,pageIndex:s},a]of e)a.newX=r,a.newY=i,a.newPageIndex=s,t||(t=r!==a.savedX||i!==a.savedY||s!==a.savedPageIndex);if(!t)return!1;const n=(e,t,n,r)=>{if(tB($W,this).has(e.id)){const i=tB(QW,this).get(r);i?e._setParentAndPosition(i,t,n):(e.pageIndex=r,e.x=t,e.y=n)}};return this.addCommands({cmd:()=>{for(const[t,{newX:r,newY:i,newPageIndex:s}]of e)n(t,r,i,s)},undo:()=>{for(const[t,{savedX:r,savedY:i,savedPageIndex:s}]of e)n(t,r,i,s)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(tB(lU,this))for(const n of tB(lU,this).keys())n.drag(e,t)}rebuild(e){if(null===e.parent){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return(null===(e=this.getActive())||void 0===e?void 0:e.shouldGetKeyboardEvents())||1===tB(PU,this).size&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return tB(XW,this)===e}getActive(){return tB(XW,this)}getMode(){return tB(EU,this)}isEditingMode(){return tB(EU,this)!==RB.NONE}get imageManager(){return uz(this,"imageManager",new LW)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let l=0,c=t.rangeCount;l<c;l++)if(!e.contains(t.getRangeAt(l).commonAncestorContainer))return null;const{x:n,y:r,width:i,height:s}=e.getBoundingClientRect();let a;switch(e.getAttribute("data-main-rotation")){case"90":a=(e,t,a,o)=>({x:(t-r)/s,y:1-(e+a-n)/i,width:o/s,height:a/i});break;case"180":a=(e,t,a,o)=>({x:1-(e+a-n)/i,y:1-(t+o-r)/s,width:a/i,height:o/s});break;case"270":a=(e,t,a,o)=>({x:1-(t+o-r)/s,y:(e-n)/i,width:o/s,height:a/i});break;default:a=(e,t,a,o)=>({x:(e-n)/i,y:(t-r)/s,width:a/i,height:o/s})}const o=[];for(let l=0,c=t.rangeCount;l<c;l++){const e=t.getRangeAt(l);if(!e.collapsed)for(const{x:t,y:n,width:r,height:i}of e.getClientRects())0!==r&&0!==i&&o.push(a(t,n,r,i))}return 0===o.length?null:o}addChangedExistingAnnotation(e){let{annotationElementId:t,id:n}=e;(tB(tU,this)||nB(tU,this,new Map)).set(t,n)}removeChangedExistingAnnotation(e){var t;let{annotationElementId:n}=e;null===(t=tB(tU,this))||void 0===t||t.delete(n)}renderAnnotationElement(e){var t;const n=null===(t=tB(tU,this))||void 0===t?void 0:t.get(e.data.id);if(!n)return;const r=tB(eU,this).getRawValue(n);r&&(tB(EU,this)!==RB.NONE||r.hasBeenModified)&&r.renderAnnotationElement(e)}setMissingCanvas(e,t,n){var r;const i=null===(r=tB(_U,this))||void 0===r?void 0:r.get(e);i&&(i.setCanvas(t,n),tB(_U,this).delete(e))}addMissingCanvas(e,t){(tB(_U,this)||nB(_U,this,new Map)).set(e,t)}}function qU(e){let{anchorNode:t}=e;return t.nodeType===Node.TEXT_NODE?t.parentElement:t}function GU(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of tB(QW,this).values())if(n.hasTextLayer(e))return n;return null}function KU(){const e=document.getSelection();if(!e||e.isCollapsed)return;const t=ZF(VU,this,qU).call(this,e).closest(".textLayer"),n=this.getSelectionBoxes(t);n&&(tB(xU,this)||nB(xU,this,new SW(this)),tB(xU,this).show(t,n,"ltr"===this.direction))}function YU(){var e;const t=document.getSelection();if(!t||t.isCollapsed){var n;if(tB(TU,this))null===(n=tB(xU,this))||void 0===n||n.hide(),nB(TU,this,null),ZF(VU,this,iV).call(this,{hasSelectedText:!1});return}const{anchorNode:r}=t;if(r===tB(TU,this))return;const i=ZF(VU,this,qU).call(this,t).closest(".textLayer");var s;if(i){if(null===(e=tB(xU,this))||void 0===e||e.hide(),nB(TU,this,r),ZF(VU,this,iV).call(this,{hasSelectedText:!0}),(tB(EU,this)===RB.HIGHLIGHT||tB(EU,this)===RB.NONE)&&(tB(EU,this)===RB.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),nB(yU,this,this.isShiftKeyDown),!this.isShiftKeyDown)){const e=tB(EU,this)===RB.HIGHLIGHT?ZF(VU,this,GU).call(this,i):null;if(null===e||void 0===e||e.toggleDrawing(),tB(jU,this)){const t=new AbortController,n=this.combinedSignal(t),r=n=>{"pointerup"===n.type&&0!==n.button||(t.abort(),null===e||void 0===e||e.toggleDrawing(!0),"pointerup"===n.type&&ZF(VU,this,XU).call(this,"main_toolbar"))};window.addEventListener("pointerup",r,{signal:n}),window.addEventListener("blur",r,{signal:n})}else null===e||void 0===e||e.toggleDrawing(!0),ZF(VU,this,XU).call(this,"main_toolbar")}}else tB(TU,this)&&(null===(s=tB(xU,this))||void 0===s||s.hide(),nB(TU,this,null),ZF(VU,this,iV).call(this,{hasSelectedText:!1}))}function XU(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";tB(EU,this)===RB.HIGHLIGHT?this.highlightSelection(e):tB(uU,this)&&ZF(VU,this,KU).call(this)}function JU(){document.addEventListener("selectionchange",ZF(VU,this,YU).bind(this),{signal:this._signal})}function $U(){if(tB(gU,this))return;nB(gU,this,new AbortController);const e=this.combinedSignal(tB(gU,this));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})}function QU(){var e;null===(e=tB(gU,this))||void 0===e||e.abort(),nB(gU,this,null)}function ZU(){if(tB(kU,this))return;nB(kU,this,new AbortController);const e=this.combinedSignal(tB(kU,this));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})}function eV(){var e;null===(e=tB(kU,this))||void 0===e||e.abort(),nB(kU,this,null)}function tV(){if(tB(iU,this))return;nB(iU,this,new AbortController);const e=this.combinedSignal(tB(iU,this));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})}function nV(){var e;null===(e=tB(iU,this))||void 0===e||e.abort(),nB(iU,this,null)}function rV(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})}function iV(e){const t=Object.entries(e).some(e=>{let[t,n]=e;return tB(IU,this)[t]!==n});t&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(tB(IU,this),e)}),tB(EU,this)===RB.HIGHLIGHT&&!1===e.hasSelectedEditor&&ZF(VU,this,sV).call(this,[[IB.HIGHLIGHT_FREE,!0]]))}function sV(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})}async function aV(){if(!tB(wU,this)){nB(wU,this,!0);const e=[];for(const t of tB(QW,this).values())e.push(t.enable());await Promise.all(e);for(const t of tB($W,this).values())t.enable()}}function oV(){if(this.unselectAll(),tB(wU,this)){nB(wU,this,!1);for(const e of tB(QW,this).values())e.disable();for(const e of tB($W,this).values())e.disable()}}function lV(e){const t=tB(QW,this).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))}function cV(e){let t=null;for(t of tB(PU,e));return t}function dV(){if(0===tB($W,this).size)return!0;if(1===tB($W,this).size)for(const e of tB($W,this).values())return e.isEmpty();return!1}function uV(e){for(const t of tB(PU,this))t.unselect();tB(PU,this).clear();for(const t of e)t.isEmpty()||(tB(PU,this).add(t),t.select());ZF(VU,this,iV).call(this,{hasSelectedEditor:this.hasSelection})}(0,ol.A)(HU,"TRANSLATE_SMALL",1),(0,ol.A)(HU,"TRANSLATE_BIG",10);var hV=new WeakMap,pV=new WeakMap,mV=new WeakMap,fV=new WeakMap,gV=new WeakMap,vV=new WeakMap,yV=new WeakMap,xV=new WeakMap,bV=new WeakMap,wV=new WeakMap,jV=new WeakMap,NV=new WeakMap,kV=new WeakSet;class AV{constructor(e){$F(this,kV),QF(this,hV,null),QF(this,pV,!1),QF(this,mV,null),QF(this,fV,null),QF(this,gV,null),QF(this,vV,null),QF(this,yV,!1),QF(this,xV,null),QF(this,bV,null),QF(this,wV,null),QF(this,jV,null),QF(this,NV,!1),nB(bV,this,e),nB(NV,this,e._uiManager.useNewAltTextFlow),CV._||(CV._=Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){var t;null!==(t=AV._l10n)&&void 0!==t||(AV._l10n=e)}async render(){const e=nB(mV,this,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=nB(fV,this,document.createElement("span"));e.append(t),tB(NV,this)?(e.classList.add("new"),e.setAttribute("data-l10n-id",CV._.missing),t.setAttribute("data-l10n-id",CV._["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=tB(bV,this)._uiManager._signal;e.addEventListener("contextmenu",Vz,{signal:n}),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const r=e=>{e.preventDefault(),tB(bV,this)._uiManager.editAltText(tB(bV,this)),tB(NV,this)&&tB(bV,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:eB(kV,this,SV)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(nB(yV,this,!0),r(t))},{signal:n}),await ZF(kV,this,_V).call(this),e}finish(){tB(mV,this)&&(tB(mV,this).focus({focusVisible:tB(yV,this)}),nB(yV,this,!1))}isEmpty(){return tB(NV,this)?null===tB(hV,this):!tB(hV,this)&&!tB(pV,this)}hasData(){return tB(NV,this)?null!==tB(hV,this)||!!tB(wV,this):this.isEmpty()}get guessedText(){return tB(wV,this)}async setGuessedText(e){null===tB(hV,this)&&(nB(wV,this,e),nB(jV,this,await AV._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),ZF(kV,this,_V).call(this))}toggleAltTextBadge(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];var t;if(!tB(NV,this)||tB(hV,this))return null===(t=tB(xV,this))||void 0===t||t.remove(),void nB(xV,this,null);if(!tB(xV,this)){const e=nB(xV,this,document.createElement("div"));e.className="noAltTextBadge",tB(bV,this).div.append(e)}tB(xV,this).classList.toggle("hidden",!e)}serialize(e){let t=tB(hV,this);return e||tB(wV,this)!==t||(t=tB(jV,this)),{altText:t,decorative:tB(pV,this),guessedText:tB(wV,this),textWithDisclaimer:tB(jV,this)}}get data(){return{altText:tB(hV,this),decorative:tB(pV,this)}}set data(e){let{altText:t,decorative:n,guessedText:r,textWithDisclaimer:i,cancel:s=!1}=e;r&&(nB(wV,this,r),nB(jV,this,i)),tB(hV,this)===t&&tB(pV,this)===n||(s||(nB(hV,this,t),nB(pV,this,n)),ZF(kV,this,_V).call(this))}toggle(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];tB(mV,this)&&(!e&&tB(vV,this)&&(clearTimeout(tB(vV,this)),nB(vV,this,null)),tB(mV,this).disabled=!e)}shown(){tB(bV,this)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:eB(kV,this,SV)}})}destroy(){var e,t;null===(e=tB(mV,this))||void 0===e||e.remove(),nB(mV,this,null),nB(fV,this,null),nB(gV,this,null),null===(t=tB(xV,this))||void 0===t||t.remove(),nB(xV,this,null)}}function SV(e){return(tB(hV,e)?"added":null===tB(hV,e)&&e.guessedText&&"review")||"missing"}async function _V(){const e=tB(mV,this);if(!e)return;if(tB(NV,this)){var t,n;if(e.classList.toggle("done",!!tB(hV,this)),e.setAttribute("data-l10n-id",CV._[eB(kV,this,SV)]),null===(t=tB(fV,this))||void 0===t||t.setAttribute("data-l10n-id",CV._["".concat(eB(kV,this,SV),"-label")]),!tB(hV,this))return void(null===(n=tB(gV,this))||void 0===n||n.remove())}else{var r;if(!tB(hV,this)&&!tB(pV,this))return e.classList.remove("done"),void(null===(r=tB(gV,this))||void 0===r||r.remove());e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let i=tB(gV,this);if(!i){nB(gV,this,i=document.createElement("span")),i.className="tooltip",i.setAttribute("role","tooltip"),i.id="alt-text-tooltip-".concat(tB(bV,this).id);const t=100,n=tB(bV,this)._uiManager._signal;n.addEventListener("abort",()=>{clearTimeout(tB(vV,this)),nB(vV,this,null)},{once:!0}),e.addEventListener("mouseenter",()=>{nB(vV,this,setTimeout(()=>{nB(vV,this,null),tB(gV,this).classList.add("show"),tB(bV,this)._reportTelemetry({action:"alt_text_tooltip"})},t))},{signal:n}),e.addEventListener("mouseleave",()=>{var e;tB(vV,this)&&(clearTimeout(tB(vV,this)),nB(vV,this,null)),null===(e=tB(gV,this))||void 0===e||e.classList.remove("show")},{signal:n})}tB(pV,this)?i.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(i.removeAttribute("data-l10n-id"),i.textContent=tB(hV,this)),i.parentNode||e.append(i);const s=tB(bV,this).getElementForAltText();null===s||void 0===s||s.setAttribute("aria-describedby",i.id)}var CV={_:null};(0,ol.A)(AV,"_l10n",null);var EV=new WeakMap,PV=new WeakMap,TV=new WeakMap,MV=new WeakMap,DV=new WeakMap,OV=new WeakMap,RV=new WeakMap,IV=new WeakMap,LV=new WeakMap,FV=new WeakMap,BV=new WeakSet;class zV{constructor(e){$F(this,BV),QF(this,EV,null),QF(this,PV,null),QF(this,TV,!1),QF(this,MV,null),QF(this,DV,null),QF(this,OV,null),QF(this,RV,null),QF(this,IV,null),QF(this,LV,!1),QF(this,FV,null),nB(MV,this,e)}renderForToolbar(){const e=nB(PV,this,document.createElement("button"));return e.className="comment",ZF(BV,this,WV).call(this,e,!1)}renderForStandalone(){const e=nB(EV,this,document.createElement("button"));e.className="annotationCommentButton";const t=tB(MV,this).commentButtonPosition;if(t){const{style:n}=e;n.insetInlineEnd="calc(".concat(100*("ltr"===tB(MV,this)._uiManager.direction?1-t[0]:t[0]),"% - var(--comment-button-dim))"),n.top="calc(".concat(100*t[1],"% - var(--comment-button-dim))");const r=tB(MV,this).commentButtonColor;r&&(n.backgroundColor=r)}return ZF(BV,this,WV).call(this,e,!0)}focusButton(){setTimeout(()=>{var e,t;null===(e=null!==(t=tB(EV,this))&&void 0!==t?t:tB(PV,this))||void 0===e||e.focus()},0)}onUpdatedColor(){if(!tB(EV,this))return;const e=tB(MV,this).commentButtonColor;e&&(tB(EV,this).style.backgroundColor=e),tB(MV,this)._uiManager.updatePopupColor(tB(MV,this))}get commentButtonWidth(){var e,t;return(null!==(e=null===(t=tB(EV,this))||void 0===t?void 0:t.getBoundingClientRect().width)&&void 0!==e?e:0)/tB(MV,this).parent.boundingClientRect.width}get commentPopupPositionInLayer(){if(tB(FV,this))return tB(FV,this);if(!tB(EV,this))return null;const{x:e,y:t,height:n}=tB(EV,this).getBoundingClientRect(),{x:r,y:i,width:s,height:a}=tB(MV,this).parent.boundingClientRect;return[(e-r)/s,(t+n-i)/a]}set commentPopupPositionInLayer(e){nB(FV,this,e)}hasDefaultPopupPosition(){return null===tB(FV,this)}removeStandaloneCommentButton(){var e;null===(e=tB(EV,this))||void 0===e||e.remove(),nB(EV,this,null)}removeToolbarCommentButton(){var e;null===(e=tB(PV,this))||void 0===e||e.remove(),nB(PV,this,null)}setCommentButtonStates(e){let{selected:t,hasPopup:n}=e;tB(EV,this)&&(tB(EV,this).classList.toggle("selected",t),tB(EV,this).ariaExpanded=n)}edit(e){const t=this.commentPopupPositionInLayer;let n,r;if(t)[n,r]=t;else{[n,r]=tB(MV,this).commentButtonPosition;const{width:e,height:t,x:i,y:s}=tB(MV,this);n=i+n*e,r=s+r*t}const i=tB(MV,this).parent.boundingClientRect,{x:s,y:a,width:o,height:l}=i;tB(MV,this)._uiManager.editComment(tB(MV,this),s+n*o,a+r*l,(0,Ne.A)((0,Ne.A)({},e),{},{parentDimensions:i}))}finish(){tB(PV,this)&&(tB(PV,this).focus({focusVisible:tB(TV,this)}),nB(TV,this,!1))}isDeleted(){return tB(LV,this)||""===tB(RV,this)}isEmpty(){return null===tB(RV,this)}hasBeenEdited(){return this.isDeleted()||tB(RV,this)!==tB(DV,this)}serialize(){return this.data}get data(){return{text:tB(RV,this),richText:tB(OV,this),date:tB(IV,this),deleted:this.isDeleted()}}set data(e){if(e!==tB(RV,this)&&nB(OV,this,null),null===e)return nB(RV,this,""),void nB(LV,this,!0);nB(RV,this,e),nB(IV,this,new Date),nB(LV,this,!1)}setInitialText(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;nB(DV,this,e),this.data=e,nB(IV,this,null),nB(OV,this,t)}shown(){}destroy(){var e,t;null===(e=tB(PV,this))||void 0===e||e.remove(),nB(PV,this,null),null===(t=tB(EV,this))||void 0===t||t.remove(),nB(EV,this,null),nB(RV,this,""),nB(OV,this,null),nB(IV,this,null),nB(MV,this,null),nB(TV,this,!1),nB(LV,this,!1)}}function WV(e,t){if(!tB(MV,this)._uiManager.hasCommentManager())return null;e.tabIndex="0",e.ariaHasPopup="dialog",t?(e.ariaControls="commentPopup",e.setAttribute("data-l10n-id","pdfjs-show-comment-button")):(e.ariaControlsElements=[tB(MV,this)._uiManager.getCommentDialogElement()],e.setAttribute("data-l10n-id","pdfjs-editor-edit-comment-button"));const n=tB(MV,this)._uiManager._signal;if(!(n instanceof AbortSignal)||n.aborted)return e;e.addEventListener("contextmenu",Vz,{signal:n}),t&&(e.addEventListener("focusin",e=>{tB(MV,this)._focusEventsAllowed=!1,Hz(e)},{capture:!0,signal:n}),e.addEventListener("focusout",e=>{tB(MV,this)._focusEventsAllowed=!0,Hz(e)},{capture:!0,signal:n})),e.addEventListener("pointerdown",e=>e.stopPropagation(),{signal:n});const r=t=>{t.preventDefault(),e===tB(PV,this)?this.edit():tB(MV,this).toggleComment(!0)};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",t=>{t.target===e&&"Enter"===t.key&&(nB(TV,this,!0),r(t))},{signal:n}),e.addEventListener("pointerenter",()=>{tB(MV,this).toggleComment(!1,!0)},{signal:n}),e.addEventListener("pointerleave",()=>{tB(MV,this).toggleComment(!1,!1)},{signal:n}),e}var UV=new WeakMap,VV=new WeakMap,HV=new WeakMap,qV=new WeakMap,GV=new WeakMap,KV=new WeakMap,YV=new WeakMap,XV=new WeakMap,JV=new WeakMap,$V=new WeakMap,QV=new WeakMap,ZV=new WeakMap,eH=new WeakSet;class tH{constructor(e){let{container:t,isPinchingDisabled:n=null,isPinchingStopped:r=null,onPinchStart:i=null,onPinching:s=null,onPinchEnd:a=null,signal:o}=e;$F(this,eH),QF(this,UV,void 0),QF(this,VV,!1),QF(this,HV,null),QF(this,qV,void 0),QF(this,GV,void 0),QF(this,KV,void 0),QF(this,YV,void 0),QF(this,XV,null),QF(this,JV,void 0),QF(this,$V,null),QF(this,QV,void 0),QF(this,ZV,null),nB(UV,this,t),nB(HV,this,r),nB(qV,this,n),nB(GV,this,i),nB(KV,this,s),nB(YV,this,a),nB(QV,this,new AbortController),nB(JV,this,AbortSignal.any([o,tB(QV,this).signal])),t.addEventListener("touchstart",ZF(eH,this,nH).bind(this),{passive:!1,signal:tB(JV,this)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/$z.pixelRatio}destroy(){var e,t;null===(e=tB(QV,this))||void 0===e||e.abort(),nB(QV,this,null),null===(t=tB(XV,this))||void 0===t||t.abort(),nB(XV,this,null)}}function nH(e){var t,n;if(null!==(t=tB(qV,this))&&void 0!==t&&t.call(this))return;if(1===e.touches.length){if(tB(XV,this))return;const e=nB(XV,this,new AbortController),t=AbortSignal.any([tB(JV,this),e.signal]),n=tB(UV,this),r={capture:!0,signal:t,passive:!1},i=e=>{var t;"touch"===e.pointerType&&(null===(t=tB(XV,this))||void 0===t||t.abort(),nB(XV,this,null))};return n.addEventListener("pointerdown",e=>{"touch"===e.pointerType&&(Hz(e),i(e))},r),n.addEventListener("pointerup",i,r),void n.addEventListener("pointercancel",i,r)}if(!tB(ZV,this)){var r;nB(ZV,this,new AbortController);const e=AbortSignal.any([tB(JV,this),tB(ZV,this).signal]),t=tB(UV,this),n={signal:e,capture:!1,passive:!1};t.addEventListener("touchmove",ZF(eH,this,rH).bind(this),n);const i=ZF(eH,this,iH).bind(this);t.addEventListener("touchend",i,n),t.addEventListener("touchcancel",i,n),n.capture=!0,t.addEventListener("pointerdown",Hz,n),t.addEventListener("pointermove",Hz,n),t.addEventListener("pointercancel",Hz,n),t.addEventListener("pointerup",Hz,n),null===(r=tB(GV,this))||void 0===r||r.call(this)}if(Hz(e),2!==e.touches.length||null!==(n=tB(HV,this))&&void 0!==n&&n.call(this))return void nB($V,this,null);let[i,s]=e.touches;i.identifier>s.identifier&&([i,s]=[s,i]),nB($V,this,{touch0X:i.screenX,touch0Y:i.screenY,touch1X:s.screenX,touch1Y:s.screenY})}function rH(e){var t;if(!tB($V,this)||2!==e.touches.length)return;Hz(e);let[n,r]=e.touches;n.identifier>r.identifier&&([n,r]=[r,n]);const{screenX:i,screenY:s}=n,{screenX:a,screenY:o}=r,l=tB($V,this),{touch0X:c,touch0Y:d,touch1X:u,touch1Y:h}=l,p=u-c,m=h-d,f=a-i,g=o-s,v=Math.hypot(f,g)||1,y=Math.hypot(p,m)||1;if(!tB(VV,this)&&Math.abs(y-v)<=aB.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=i,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,!tB(VV,this))return void nB(VV,this,!0);const x=[(i+a)/2,(s+o)/2];null===(t=tB(KV,this))||void 0===t||t.call(this,x,y,v)}function iH(e){if(!(e.touches.length>=2)){var t;if(tB(ZV,this))tB(ZV,this).abort(),nB(ZV,this,null),null===(t=tB(YV,this))||void 0===t||t.call(this);tB($V,this)&&(Hz(e),nB($V,this,null),nB(VV,this,!1))}}aB=tH;var sH=new WeakMap,aH=new WeakMap,oH=new WeakMap,lH=new WeakMap,cH=new WeakMap,dH=new WeakMap,uH=new WeakMap,hH=new WeakMap,pH=new WeakMap,mH=new WeakMap,fH=new WeakMap,gH=new WeakMap,vH=new WeakMap,yH=new WeakMap,xH=new WeakMap,bH=new WeakMap,wH=new WeakMap,jH=new WeakMap,NH=new WeakMap,kH=new WeakMap,AH=new WeakMap,SH=new WeakMap,_H=new WeakMap,CH=new WeakMap,EH=new WeakMap,PH=new WeakMap,TH=new WeakSet;class MH{static get _resizerKeyboardManager(){const e=MH.prototype._resizeWithKeyboard,t=HU.TRANSLATE_SMALL,n=HU.TRANSLATE_BIG;return uz(this,"_resizerKeyboardManager",new qW([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],MH.prototype._stopResizingWithKeyboard]]))}constructor(e){$F(this,TH),QF(this,sH,null),QF(this,aH,null),QF(this,oH,null),QF(this,lH,null),QF(this,cH,null),QF(this,dH,!1),QF(this,uH,null),QF(this,hH,""),QF(this,pH,null),QF(this,mH,null),QF(this,fH,null),QF(this,gH,null),QF(this,vH,null),QF(this,yH,""),QF(this,xH,!1),QF(this,bH,null),QF(this,wH,!1),QF(this,jH,!1),QF(this,NH,!1),QF(this,kH,null),QF(this,AH,0),QF(this,SH,0),QF(this,_H,null),QF(this,CH,null),(0,ol.A)(this,"isSelected",!1),(0,ol.A)(this,"_isCopy",!1),(0,ol.A)(this,"_editToolbar",null),(0,ol.A)(this,"_initialOptions",Object.create(null)),(0,ol.A)(this,"_initialData",null),(0,ol.A)(this,"_isVisible",!0),(0,ol.A)(this,"_uiManager",null),(0,ol.A)(this,"_focusEventsAllowed",!0),QF(this,EH,!1),QF(this,PH,MH._zIndex++),this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null,this.annotationElementId=e.annotationElementId||null,this.creationDate=e.creationDate||new Date,this.modificationDate=e.modificationDate||null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:s}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[i,s];const[a,o]=this.parentDimensions;this.x=e.x/a,this.y=e.y/o,this.isAttachedToDOM=!1,this.deleted=!1}get editorType(){return Object.getPrototypeOf(this).constructor._type}get mode(){return Object.getPrototypeOf(this).constructor._editorType}static get isDrawer(){return!1}static get _defaultLineColor(){return uz(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new QH({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){var n;if(null!==(n=MH._l10n)&&void 0!==n||(MH._l10n=e),MH._l10nResizer||(MH._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),-1!==MH._borderLineWidth)return;const r=getComputedStyle(document.documentElement);MH._borderLineWidth=parseFloat(r.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){oz("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return tB(EH,this)}set _isDraggable(e){var t;nB(EH,this,e),null===(t=this.div)||void 0===t||t.classList.toggle("draggable",e)}get uid(){return this.annotationElementId||this.id}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(2*e),this.y+=this.width*e/(2*t);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(2*e),this.y-=this.width*e/(2*t);break;default:this.x-=this.width/2,this.y-=this.height/2}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=tB(PH,this)}setParent(e){var t;null!==e?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):(ZF(TH,this,$H).call(this),null===(t=tB(gH,this))||void 0===t||t.remove(),nB(gH,this,null));this.parent=e}focusin(e){this._focusEventsAllowed&&(tB(xH,this)?nB(xH,this,!1):this.parent.setSelected(this))}focusout(e){var t;if(!this._focusEventsAllowed)return;if(!this.isAttachedToDOM)return;const n=e.relatedTarget;null!==n&&void 0!==n&&n.closest("#".concat(this.id))||(e.preventDefault(),null!==(t=this.parent)&&void 0!==t&&t.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.isInEditMode()&&this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[i,s]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/i,this.y=(t+r)/s,this.fixAndSetPosition()}_moveAfterPaste(e,t){const[n,r]=this.parentDimensions;this.setAt(e*n,t*r,this.width*n,this.height*r),this._onTranslated()}translate(e,t){ZF(TH,this,DH).call(this,this.parentDimensions,e,t)}translateInPage(e,t){tB(bH,this)||nB(bH,this,[this.x,this.y,this.width,this.height]),ZF(TH,this,DH).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(e,t){tB(bH,this)||nB(bH,this,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,i]}=this;if(this.x+=e/r,this.y+=t/i,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:e,y:t}=this.div.getBoundingClientRect();this.parent.findNewParent(this,e,t)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:s,y:a}=this;const[o,l]=this.getBaseTranslation();s+=o,a+=l;const{style:c}=n;c.left="".concat((100*s).toFixed(2),"%"),c.top="".concat((100*a).toFixed(2),"%"),this._onTranslating(s,a),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!tB(bH,this)&&(tB(bH,this)[0]!==this.x||tB(bH,this)[1]!==this.y)}get _hasBeenResized(){return!!tB(bH,this)&&(tB(bH,this)[2]!==this.width||tB(bH,this)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=MH,r=n/e,i=n/t;switch(this.rotation){case 90:return[-r,i];case 180:return[r,i];case 270:return[r,-i];default:return[-r,-i]}}get _mustFixPosition(){return!0}fixAndSetPosition(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.rotation;const{div:{style:t},pageDimensions:[n,r]}=this;let{x:i,y:s,width:a,height:o}=this;if(a*=n,o*=r,i*=n,s*=r,this._mustFixPosition)switch(e){case 0:i=Pz(i,0,n-a),s=Pz(s,0,r-o);break;case 90:i=Pz(i,0,n-o),s=Pz(s,a,r);break;case 180:i=Pz(i,a,n),s=Pz(s,o,r);break;case 270:i=Pz(i,o,n),s=Pz(s,0,r-a)}this.x=i/=n,this.y=s/=r;const[l,c]=this.getBaseTranslation();i+=l,s+=c,t.left="".concat((100*i).toFixed(2),"%"),t.top="".concat((100*s).toFixed(2),"%"),this.moveInDOM()}screenToPageTranslation(e,t){return OH.call(MH,e,t,this.parentRotation)}pageTranslationToScreen(e,t){return OH.call(MH,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(){const{div:{style:e},width:t,height:n}=this;e.width="".concat((100*t).toFixed(2),"%"),e.height="".concat((100*n).toFixed(2),"%")}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(1e4*e)/1e4}_onResizing(){}altTextFinish(){var e;null===(e=tB(oH,this))||void 0===e||e.finish()}get toolbarButtons(){return null}async addEditToolbar(){if(this._editToolbar||tB(jH,this))return this._editToolbar;this._editToolbar=new fW(this),this.div.append(this._editToolbar.render());const{toolbarButtons:e}=this;if(e)for(const[t,n]of e)await this._editToolbar.addButton(t,n);return this.hasComment||this._editToolbar.addButton("comment",this.addCommentButton()),this._editToolbar.addButton("delete"),this._editToolbar}addCommentButtonInToolbar(){var e;null===(e=this._editToolbar)||void 0===e||e.addButtonBefore("comment",this.addCommentButton(),".deleteButton")}removeCommentButtonFromToolbar(){var e;null===(e=this._editToolbar)||void 0===e||e.removeButton("comment")}removeEditToolbar(){var e,t;null===(e=this._editToolbar)||void 0===e||e.remove(),this._editToolbar=null,null===(t=tB(oH,this))||void 0===t||t.destroy()}addContainer(e){var t;const n=null===(t=this._editToolbar)||void 0===t?void 0:t.div;n?n.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}createAltText(){return tB(oH,this)||(AV.initialize(MH._l10n),nB(oH,this,new AV(this)),tB(sH,this)&&(tB(oH,this).data=tB(sH,this),nB(sH,this,null))),tB(oH,this)}get altTextData(){var e;return null===(e=tB(oH,this))||void 0===e?void 0:e.data}set altTextData(e){tB(oH,this)&&(tB(oH,this).data=e)}get guessedAltText(){var e;return null===(e=tB(oH,this))||void 0===e?void 0:e.guessedText}async setGuessedAltText(e){var t;await(null===(t=tB(oH,this))||void 0===t?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return null===(t=tB(oH,this))||void 0===t?void 0:t.serialize(e)}hasAltText(){return!!tB(oH,this)&&!tB(oH,this).isEmpty()}hasAltTextData(){var e,t;return null!==(e=null===(t=tB(oH,this))||void 0===t?void 0:t.hasData())&&void 0!==e&&e}focusCommentButton(){var e;null===(e=tB(lH,this))||void 0===e||e.focusButton()}addCommentButton(){return tB(lH,this)||nB(lH,this,new zV(this))}addStandaloneCommentButton(){tB(cH,this)?this._uiManager.isEditingMode()&&tB(cH,this).classList.remove("hidden"):this.hasComment&&(nB(cH,this,tB(lH,this).renderForStandalone()),this.div.append(tB(cH,this)))}removeStandaloneCommentButton(){tB(lH,this).removeStandaloneCommentButton(),nB(cH,this,null)}hideStandaloneCommentButton(){var e;null===(e=tB(cH,this))||void 0===e||e.classList.add("hidden")}get comment(){var e;const{data:{richText:t,text:n,date:r,deleted:i}}=tB(lH,this);return{text:n,richText:t,date:r,deleted:i,color:this.getNonHCMColor(),opacity:null!==(e=this.opacity)&&void 0!==e?e:1}}set comment(e){tB(lH,this)||nB(lH,this,new zV(this)),tB(lH,this).data=e,this.hasComment?(this.removeCommentButtonFromToolbar(),this.addStandaloneCommentButton(),this._uiManager.updateComment(this)):(this.addCommentButtonInToolbar(),this.removeStandaloneCommentButton(),this._uiManager.removeComment(this))}setCommentData(e){let{comment:t,popupRef:n,richText:r}=e;if(!n)return;if(tB(lH,this)||nB(lH,this,new zV(this)),tB(lH,this).setInitialText(t,r),!this.annotationElementId)return;const i=this._uiManager.getAndRemoveDataFromAnnotationStorage(this.annotationElementId);i&&this.updateFromAnnotationLayer(i)}get hasEditedComment(){var e;return null===(e=tB(lH,this))||void 0===e?void 0:e.hasBeenEdited()}get hasDeletedComment(){var e;return null===(e=tB(lH,this))||void 0===e?void 0:e.isDeleted()}get hasComment(){return!!tB(lH,this)&&!tB(lH,this).isEmpty()&&!tB(lH,this).isDeleted()}async editComment(e){tB(lH,this)||nB(lH,this,new zV(this)),tB(lH,this).edit(e)}toggleComment(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;this.hasComment&&this._uiManager.toggleComment(this,e,t)}setSelectedCommentButton(e){tB(lH,this).setSelectedButton(e)}addComment(e){if(this.hasEditedComment){const t=180,n=100,[,,,r]=e.rect,[i]=this.pageDimensions,[s]=this.pageTranslation,a=s+i+1,o=r-n,l=a+t;e.popup={contents:this.comment.text,deleted:this.comment.deleted,rect:[a,o,l,r]}}}updateFromAnnotationLayer(e){let{popup:{contents:t,deleted:n}}=e;tB(lH,this).data=n?null:t}get parentBoundingClientRect(){return this.parent.boundingClientRect}render(){var e;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=tB(dH,this)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),ZF(TH,this,GH).call(this);const[n,r]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth="".concat((100*r/n).toFixed(2),"%"),t.style.maxHeight="".concat((100*n/r).toFixed(2),"%"));const[i,s]=this.getInitialTranslation();return this.translate(i,s),PW(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(tB(CH,this)||nB(CH,this,new tH({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:ZF(TH,this,WH).bind(this),onPinching:ZF(TH,this,UH).bind(this),onPinchEnd:ZF(TH,this,VH).bind(this),signal:this._uiManager._signal}))),this.addStandaloneCommentButton(),null===(e=this._uiManager._editorUndoBar)||void 0===e||e.hide(),t}pointerdown(e){const{isMac:t}=wz.platform;0!==e.button||e.ctrlKey&&t?e.preventDefault():(nB(xH,this,!0),this._isDraggable?ZF(TH,this,qH).call(this,e):ZF(TH,this,HH).call(this,e))}_onStartDragging(){}_onStopDragging(){}moveInDOM(){tB(kH,this)&&clearTimeout(tB(kH,this)),nB(kH,this,setTimeout(()=>{var e;nB(kH,this,null),null===(e=this.parent)||void 0===e||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.rotation;const r=this.parentScale,[i,s]=this.pageDimensions,[a,o]=this.pageTranslation,l=e/r,c=t/r,d=this.x*i,u=this.y*s,h=this.width*i,p=this.height*s;switch(n){case 0:return[d+l+a,s-u-c-p+o,d+l+h+a,s-u-c+o];case 90:return[d+c+a,s-u+l+o,d+c+p+a,s-u+l+h+o];case 180:return[d-l-h+a,s-u+c+o,d-l+a,s-u+c+p+o];case 270:return[d-c-p+a,s-u-l-h+o,d-c+a,s-u-l+o];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,i,s]=e,a=i-n,o=s-r;switch(this.rotation){case 0:return[n,t-s,a,o];case 90:return[n,t-r,o,a];case 180:return[i,t-r,a,o];case 270:return[i,t-s,o,a];default:throw new Error("Invalid rotation")}}getPDFRect(){return this.getRect(0,0)}getNonHCMColor(){return this.color&&MH._colorManager.convert(this._uiManager.getNonHCMColor(this.color))}onUpdatedColor(){var e;null===(e=tB(lH,this))||void 0===e||e.onUpdatedColor()}getData(){const{comment:{text:e,color:t,date:n,opacity:r,deleted:i,richText:s},uid:a,pageIndex:o,creationDate:l,modificationDate:c}=this;return{id:a,pageIndex:o,rect:this.getPDFRect(),richText:s,contentsObj:{str:e},creationDate:l,modificationDate:n||c,popupRef:!i,color:t,opacity:r}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){return!this.isInEditMode()&&(this.parent.setEditingState(!1),nB(jH,this,!0),!0)}disableEditMode(){return!!this.isInEditMode()&&(this.parent.setEditingState(!0),nB(jH,this,!1),!0)}isInEditMode(){return tB(jH,this)}shouldGetKeyboardEvents(){return tB(NH,this)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:i,innerWidth:s}=window;return t<s&&r>0&&e<i&&n>0}rebuild(){ZF(TH,this,GH).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}serialize(){var e;return{annotationType:this.mode,pageIndex:this.pageIndex,rect:this.getPDFRect(),rotation:this.rotation,structTreeParentId:this._structTreeParentId,popupRef:(null===(e=this._initialData)||void 0===e?void 0:e.popupRef)||""}}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n,annotationElementId:e.annotationElementId,creationDate:e.creationDate,modificationDate:e.modificationDate});r.rotation=e.rotation,nB(sH,r,e.accessibilityData),r._isCopy=e.isCopy||!1;const[i,s]=r.pageDimensions,[a,o,l,c]=r.getRectInCurrentCoords(e.rect,s);return r.x=a/i,r.y=o/s,r.width=l/i,r.height=c/s,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||null!==this.serialize())}remove(){var e,t;if(null===(e=tB(vH,this))||void 0===e||e.abort(),nB(vH,this,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),tB(kH,this)&&(clearTimeout(tB(kH,this)),nB(kH,this,null)),ZF(TH,this,$H).call(this),this.removeEditToolbar(),tB(_H,this)){for(const e of tB(_H,this).values())clearTimeout(e);nB(_H,this,null)}this.parent=null,null===(t=tB(CH,this))||void 0===t||t.destroy(),nB(CH,this,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(ZF(TH,this,IH).call(this),tB(pH,this).classList.remove("hidden"))}get toolbarPosition(){return null}get commentButtonPosition(){return"ltr"===this._uiManager.direction?[1,0]:[0,0]}get commentButtonPositionInPage(){const{commentButtonPosition:[e,t]}=this,[n,r,i,s]=this.getPDFRect();return[MH._round(n+(i-n)*e),MH._round(r+(s-r)*(1-t))]}get commentButtonColor(){return this._uiManager.makeCommentColor(this.getNonHCMColor(),this.opacity)}get commentPopupPosition(){return tB(lH,this).commentPopupPositionInLayer}set commentPopupPosition(e){tB(lH,this).commentPopupPositionInLayer=e}hasDefaultPopupPosition(){return tB(lH,this).hasDefaultPopupPosition()}get commentButtonWidth(){return tB(lH,this).commentButtonWidth}get elementBeforePopup(){return this.div}setCommentButtonStates(e){tB(lH,this).setCommentButtonStates(e)}keydown(e){if(!this.isResizable||e.target!==this.div||"Enter"!==e.key)return;this._uiManager.setSelected(this),nB(fH,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=tB(pH,this).children;if(!tB(aH,this)){nB(aH,this,Array.from(t));const e=ZF(TH,this,KH).bind(this),n=ZF(TH,this,YH).bind(this),r=this._uiManager._signal;for(const t of tB(aH,this)){const i=t.getAttribute("data-resizer-name");t.setAttribute("role","spinbutton"),t.addEventListener("keydown",e,{signal:r}),t.addEventListener("blur",n,{signal:r}),t.addEventListener("focus",ZF(TH,this,XH).bind(this,i),{signal:r}),t.setAttribute("data-l10n-id",MH._l10nResizer[i])}}const n=tB(aH,this)[0];let r=0;for(const s of t){if(s===n)break;r++}const i=(360-this.rotation+this.parentRotation)%360/90*(tB(aH,this).length/4);if(i!==r){if(i<r)for(let t=0;t<r-i;t++)tB(pH,this).append(tB(pH,this).firstChild);else if(i>r)for(let t=0;t<i-r;t++)tB(pH,this).firstChild.before(tB(pH,this).lastChild);let e=0;for(const n of t){const t=tB(aH,this)[e++].getAttribute("data-resizer-name");n.setAttribute("data-l10n-id",MH._l10nResizer[t])}}ZF(TH,this,JH).call(this,0),nB(NH,this,!0),tB(pH,this).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){tB(NH,this)&&ZF(TH,this,zH).call(this,tB(yH,this),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){ZF(TH,this,$H).call(this),this.div.focus()}select(){var e,t,n;this.isSelected&&this._editToolbar?this._editToolbar.show():(this.isSelected=!0,this.makeResizable(),null===(e=this.div)||void 0===e||e.classList.add("selectedEditor"),this._editToolbar?(null===(t=this._editToolbar)||void 0===t||t.show(),null===(n=tB(oH,this))||void 0===n||n.toggleAltTextBadge(!1)):this.addEditToolbar().then(()=>{var e,t;null!==(e=this.div)&&void 0!==e&&e.classList.contains("selectedEditor")&&(null===(t=this._editToolbar)||void 0===t||t.show())}))}focus(){this.div&&!this.div.contains(document.activeElement)&&setTimeout(()=>{var e;return null===(e=this.div)||void 0===e?void 0:e.focus({preventScroll:!0})},0)}unselect(){var e,t,n,r,i;this.isSelected&&(this.isSelected=!1,null===(e=tB(pH,this))||void 0===e||e.classList.add("hidden"),null===(t=this.div)||void 0===t||t.classList.remove("selectedEditor"),null!==(n=this.div)&&void 0!==n&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),null===(r=this._editToolbar)||void 0===r||r.hide(),null===(i=tB(oH,this))||void 0===i||i.toggleAltTextBadge(!0),this.hasComment&&this._uiManager.toggleComment(this,!1,!1))}updateParams(e,t){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(e){"BUTTON"!==e.target.nodeName&&(this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id}))}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return tB(wH,this)}set isEditing(e){nB(wH,this,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1]){tB(_H,this)||nB(_H,this,new Map);const{action:t}=e;let n=tB(_H,this).get(t);return n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(e),tB(_H,this).delete(t),0===tB(_H,this).size&&nB(_H,this,null)},MH._telemetryTimeout),void tB(_H,this).set(t,n)}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),nB(dH,this,!1)}disable(){this.div&&(this.div.tabIndex=-1),nB(dH,this,!0)}updateFakeAnnotationElement(e){if(tB(gH,this)||this.deleted)return this.deleted?(tB(gH,this).remove(),void nB(gH,this,null)):void((this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized)&&tB(gH,this).updateEdited({rect:this.getPDFRect(),popup:this.comment}));nB(gH,this,e.addFakeAnnotation(this))}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;let t=e.container.querySelector(".annotationContent");if(t){if("CANVAS"===t.nodeName){const e=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.before(t)}}else t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);return t}resetAnnotationElement(e){const{firstChild:t}=e.container;"DIV"===(null===t||void 0===t?void 0:t.nodeName)&&t.classList.contains("annotationContent")&&t.remove()}}function DH(e,t,n){let[r,i]=e;[t,n]=this.screenToPageTranslation(t,n),this.x+=t/r,this.y+=n/i,this._onTranslating(this.x,this.y),this.fixAndSetPosition()}function OH(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}}function RH(e){switch(e){case 90:{const[e,t]=this.pageDimensions;return[0,-e/t,t/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,t]=this.pageDimensions;return[0,e/t,-t/e,0]}default:return[1,0,0,1]}}function IH(){if(tB(pH,this))return;nB(pH,this,document.createElement("div")),tB(pH,this).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const e=document.createElement("div");tB(pH,this).append(e),e.classList.add("resizer",n),e.setAttribute("data-resizer-name",n),e.addEventListener("pointerdown",ZF(TH,this,LH).bind(this,n),{signal:t}),e.addEventListener("contextmenu",Vz,{signal:t}),e.tabIndex=-1}this.div.prepend(tB(pH,this))}function LH(e,t){var n;t.preventDefault();const{isMac:r}=wz.platform;if(0!==t.button||t.ctrlKey&&r)return;null===(n=tB(oH,this))||void 0===n||n.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,nB(mH,this,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",ZF(TH,this,zH).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Hz,{passive:!1,signal:a}),window.addEventListener("contextmenu",Vz,{signal:a}),nB(fH,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const c=()=>{var e;s.abort(),this.parent.togglePointerEvents(!0),null===(e=tB(oH,this))||void 0===e||e.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=o,this.div.style.cursor=l,ZF(TH,this,BH).call(this)};window.addEventListener("pointerup",c,{signal:a}),window.addEventListener("blur",c,{signal:a})}function FH(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t,this.setDims(),this.fixAndSetPosition(),this._onResized()}function BH(){if(!tB(fH,this))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=tB(fH,this);nB(fH,this,null);const i=this.x,s=this.y,a=this.width,o=this.height;i===e&&s===t&&a===n&&o===r||this.addCommands({cmd:ZF(TH,this,FH).bind(this,i,s,a,o),undo:ZF(TH,this,FH).bind(this,e,t,n,r),mustExec:!0})}function zH(e,t){const[n,r]=this.parentDimensions,i=this.x,s=this.y,a=this.width,o=this.height,l=oB.MIN_SIZE/n,c=oB.MIN_SIZE/r,d=ZF(TH,this,RH).call(this,this.rotation),u=(e,t)=>[d[0]*e+d[2]*t,d[1]*e+d[3]*t],h=ZF(TH,this,RH).call(this,360-this.rotation);let p,m,f=!1,g=!1;switch(e){case"topLeft":f=!0,p=(e,t)=>[0,0],m=(e,t)=>[e,t];break;case"topMiddle":p=(e,t)=>[e/2,0],m=(e,t)=>[e/2,t];break;case"topRight":f=!0,p=(e,t)=>[e,0],m=(e,t)=>[0,t];break;case"middleRight":g=!0,p=(e,t)=>[e,t/2],m=(e,t)=>[0,t/2];break;case"bottomRight":f=!0,p=(e,t)=>[e,t],m=(e,t)=>[0,0];break;case"bottomMiddle":p=(e,t)=>[e/2,t],m=(e,t)=>[e/2,0];break;case"bottomLeft":f=!0,p=(e,t)=>[0,t],m=(e,t)=>[e,0];break;case"middleLeft":g=!0,p=(e,t)=>[0,t/2],m=(e,t)=>[e,t/2]}const v=p(a,o),y=m(a,o);let x=u(...y);const b=oB._round(i+x[0]),w=oB._round(s+x[1]);let j,N,k=1,A=1;if(t.fromKeyboard)({deltaX:j,deltaY:N}=t);else{const{screenX:e,screenY:n}=t,[r,i]=tB(mH,this);[j,N]=this.screenToPageTranslation(e-r,n-i),tB(mH,this)[0]=e,tB(mH,this)[1]=n}if([j,N]=((e,t)=>[h[0]*e+h[2]*t,h[1]*e+h[3]*t])(j/n,N/r),f){const e=Math.hypot(a,o);k=A=Math.max(Math.min(Math.hypot(y[0]-v[0]-j,y[1]-v[1]-N)/e,1/a,1/o),l/a,c/o)}else g?k=Pz(Math.abs(y[0]-v[0]-j),l,1)/a:A=Pz(Math.abs(y[1]-v[1]-N),c,1)/o;const S=oB._round(a*k),_=oB._round(o*A);x=u(...m(S,_));const C=b-x[0],E=w-x[1];tB(bH,this)||nB(bH,this,[this.x,this.y,this.width,this.height]),this.width=S,this.height=_,this.x=C,this.y=E,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function WH(){var e;nB(fH,this,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),null===(e=tB(oH,this))||void 0===e||e.toggle(!1),this.parent.togglePointerEvents(!1)}function UH(e,t,n){let r=n/t*.7+1-.7;if(1===r)return;const i=ZF(TH,this,RH).call(this,this.rotation),s=(e,t)=>[i[0]*e+i[2]*t,i[1]*e+i[3]*t],[a,o]=this.parentDimensions,l=this.x,c=this.y,d=this.width,u=this.height,h=oB.MIN_SIZE/a,p=oB.MIN_SIZE/o;r=Math.max(Math.min(r,1/d,1/u),h/d,p/u);const m=oB._round(d*r),f=oB._round(u*r);if(m===d&&f===u)return;tB(bH,this)||nB(bH,this,[l,c,d,u]);const g=s(d/2,u/2),v=oB._round(l+g[0]),y=oB._round(c+g[1]),x=s(m/2,f/2);this.x=v-x[0],this.y=y-x[1],this.width=m,this.height=f,this.setDims(),this.fixAndSetPosition(),this._onResizing()}function VH(){var e;null===(e=tB(oH,this))||void 0===e||e.toggle(!0),this.parent.togglePointerEvents(!0),ZF(TH,this,BH).call(this)}function HH(e){const{isMac:t}=wz.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)}function qH(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,i=this._uiManager.combinedSignal(r),s={capture:!0,passive:!1,signal:i},a=e=>{r.abort(),nB(uH,this,null),nB(xH,this,!1),this._uiManager.endDragSession()||ZF(TH,this,HH).call(this,e),n&&this._onStopDragging()};t&&(nB(AH,this,e.clientX),nB(SH,this,e.clientY),nB(uH,this,e.pointerId),nB(hH,this,e.pointerType),window.addEventListener("pointermove",e=>{n||(n=!0,this._uiManager.toggleComment(this,!0,!1),this._onStartDragging());const{clientX:t,clientY:r,pointerId:i}=e;if(i!==tB(uH,this))return void Hz(e);const[s,a]=this.screenToPageTranslation(t-tB(AH,this),r-tB(SH,this));nB(AH,this,t),nB(SH,this,r),this._uiManager.dragSelectedEditors(s,a)},s),window.addEventListener("touchmove",Hz,s),window.addEventListener("pointerdown",e=>{e.pointerType===tB(hH,this)&&(tB(CH,this)||e.isPrimary)&&a(e),Hz(e)},s));const o=e=>{tB(uH,this)&&tB(uH,this)!==e.pointerId?Hz(e):a(e)};window.addEventListener("pointerup",o,{signal:i}),window.addEventListener("blur",o,{signal:i})}function GH(){if(tB(vH,this)||!this.div)return;nB(vH,this,new AbortController);const e=this._uiManager.combinedSignal(tB(vH,this));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})}function KH(e){oB._resizerKeyboardManager.exec(this,e)}function YH(e){var t;tB(NH,this)&&(null===(t=e.relatedTarget)||void 0===t?void 0:t.parentNode)!==tB(pH,this)&&ZF(TH,this,$H).call(this)}function XH(e){nB(yH,this,tB(NH,this)?e:"")}function JH(e){if(tB(aH,this))for(const t of tB(aH,this))t.tabIndex=e}function $H(){nB(NH,this,!1),ZF(TH,this,JH).call(this,-1),ZF(TH,this,BH).call(this)}oB=MH,(0,ol.A)(MH,"_l10n",null),(0,ol.A)(MH,"_l10nResizer",null),(0,ol.A)(MH,"_borderLineWidth",-1),(0,ol.A)(MH,"_colorManager",new KW),(0,ol.A)(MH,"_zIndex",1),(0,ol.A)(MH,"_telemetryTimeout",1e3);class QH extends MH{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const ZH=3285377520,eq=4294901760,tq=65535;class nq{constructor(e){this.h1=e?4294967295&e:ZH,this.h2=e?4294967295&e:ZH}update(e){let t,n;if("string"===typeof e){t=new Uint8Array(2*e.length),n=0;for(let r=0,i=e.length;r<i;r++){const i=e.charCodeAt(r);i<=255?t[n++]=i:(t[n++]=i>>>8,t[n++]=255&i)}}else{if(!ArrayBuffer.isView(e))throw new Error("Invalid data format, must be a string or TypedArray.");t=e.slice(),n=t.byteLength}const r=n>>2,i=n-4*r,s=new Uint32Array(t.buffer,0,r);let a=0,o=0,l=this.h1,c=this.h2;const d=3432918353,u=461845907,h=11601,p=13715;for(let m=0;m<r;m++)1&m?(a=s[m],a=a*d&eq|a*h&tq,a=a<<15|a>>>17,a=a*u&eq|a*p&tq,l^=a,l=l<<13|l>>>19,l=5*l+3864292196):(o=s[m],o=o*d&eq|o*h&tq,o=o<<15|o>>>17,o=o*u&eq|o*p&tq,c^=o,c=c<<13|c>>>19,c=5*c+3864292196);switch(a=0,i){case 3:a^=t[4*r+2]<<16;case 2:a^=t[4*r+1]<<8;case 1:a^=t[4*r],a=a*d&eq|a*h&tq,a=a<<15|a>>>17,a=a*u&eq|a*p&tq,1&r?l^=a:c^=a}this.h1=l,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=3981806797*e&eq|36045*e&tq,t=4283543511*t&eq|(2950163797*(t<<16|e>>>16)&eq)>>>16,e^=t>>>1,e=444984403*e&eq|60499*e&tq,t=3301882366*t&eq|(3120437893*(t<<16|e>>>16)&eq)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const rq=Object.freeze({map:null,hash:"",transfer:void 0});var iq=new WeakMap,sq=new WeakMap,aq=new WeakMap,oq=new WeakMap,lq=new WeakSet;class cq{constructor(){$F(this,lq),QF(this,iq,!1),QF(this,sq,null),QF(this,aq,null),QF(this,oq,new Map),this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=tB(oq,this).get(e);return void 0===n?t:Object.assign(t,n)}getRawValue(e){return tB(oq,this).get(e)}remove(e){const t=tB(oq,this).get(e);if(void 0!==t&&(t instanceof MH&&tB(aq,this).delete(t.annotationElementId),tB(oq,this).delete(e),0===tB(oq,this).size&&this.resetModified(),"function"===typeof this.onAnnotationEditor)){for(const e of tB(oq,this).values())if(e instanceof MH)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=tB(oq,this).get(e);let r=!1;if(void 0!==n)for(const[i,s]of Object.entries(t))n[i]!==s&&(r=!0,n[i]=s);else r=!0,tB(oq,this).set(e,t);r&&ZF(lq,this,dq).call(this),t instanceof MH&&((tB(aq,this)||nB(aq,this,new Map)).set(t.annotationElementId,t),"function"===typeof this.onAnnotationEditor&&this.onAnnotationEditor(t.constructor._type))}has(e){return tB(oq,this).has(e)}get size(){return tB(oq,this).size}resetModified(){tB(iq,this)&&(nB(iq,this,!1),"function"===typeof this.onResetModified&&this.onResetModified())}get print(){return new hq(this)}get serializable(){if(0===tB(oq,this).size)return rq;const e=new Map,t=new nq,n=[],r=Object.create(null);let i=!1;for(const[s,a]of tB(oq,this)){const n=a instanceof MH?a.serialize(!1,r):a;n&&(e.set(s,n),t.update("".concat(s,":").concat(JSON.stringify(n))),i||(i=!!n.bitmap))}if(i)for(const s of e.values())s.bitmap&&n.push(s.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:rq}get editorStats(){let e=null;const t=new Map;let n=0,r=0;for(const a of tB(oq,this).values()){var i;if(!(a instanceof MH)){a.popup&&(a.popup.deleted?r+=1:n+=1);continue}a.isCommentDeleted?r+=1:a.hasEditedComment&&(n+=1);const o=a.telemetryFinalData;if(!o)continue;const{type:l}=o;t.has(l)||t.set(l,Object.getPrototypeOf(a).constructor),e||(e=Object.create(null));const c=(i=e)[l]||(i[l]=new Map);for(const[e,t]of Object.entries(o)){var s;if("type"===e)continue;let n=c.get(e);n||(n=new Map,c.set(e,n));const r=null!==(s=n.get(t))&&void 0!==s?s:0;n.set(t,r+1)}}if((r>0||n>0)&&(e||(e=Object.create(null)),e.comments={deleted:r,edited:n}),!e)return null;for(const[a,o]of t)e[a]=o.computeTelemetryFinalData(e[a]);return e}resetModifiedIds(){nB(sq,this,null)}updateEditor(e,t){var n;const r=null===(n=tB(aq,this))||void 0===n?void 0:n.get(e);return!!r&&(r.updateFromAnnotationLayer(t),!0)}getEditor(e){var t;return(null===(t=tB(aq,this))||void 0===t?void 0:t.get(e))||null}get modifiedIds(){if(tB(sq,this))return tB(sq,this);const e=[];if(tB(aq,this))for(const t of tB(aq,this).values())t.serialize()&&e.push(t.annotationElementId);return nB(sq,this,{ids:new Set(e),hash:e.join(",")})}[Symbol.iterator](){return tB(oq,this).entries()}}function dq(){tB(iq,this)||(nB(iq,this,!0),"function"===typeof this.onSetModified&&this.onSetModified())}var uq=new WeakMap;class hq extends cq{constructor(e){super(),QF(this,uq,void 0);const{map:t,hash:n,transfer:r}=e.serializable,i=structuredClone(t,r?{transfer:r}:null);nB(uq,this,{map:i,hash:n,transfer:r})}get print(){oz("Should not call PrintAnnotationStorage.print")}get serializable(){return tB(uq,this)}get modifiedIds(){return uz(this,"modifiedIds",{ids:new Set,hash:""})}}var pq=new WeakMap;class mq{constructor(e){let{ownerDocument:t=globalThis.document,styleElement:n=null}=e;QF(this,pq,new Set),this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),tB(pq,this).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont(e){let{systemFontInfo:t,disableFontFace:n,_inspectFont:r}=e;if(t&&!tB(pq,this).has(t.loadedName)){if(lz(!n,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:e,src:n,style:s}=t,a=new FontFace(e,n,s);this.addNativeFontFace(a);try{await a.load(),tB(pq,this).add(e),null===r||void 0===r||r(t)}catch(i){az("Cannot load system font: ".concat(t.baseFontName,", installing it could help to improve PDF rendering.")),this.removeNativeFontFace(a)}return}oz("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo)return void await this.loadSystemFont(e);if(this.isFontLoadingAPISupported){const t=e.createNativeFontFace();if(t){this.addNativeFontFace(t);try{await t.loaded}catch(n){throw az("Failed to load font '".concat(t.family,"': '").concat(n,"'.")),e.disableFontFace=!0,n}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(t=>{const n=this._queueLoadingCallback(t);this._prepareFontLoadEvent(e,n)})}}get isFontLoadingAPISupported(){var e;return uz(this,"isFontLoadingAPISupported",!(null===(e=this._document)||void 0===e||!e.fonts))}get isSyncFontLoadingSupported(){return uz(this,"isSyncFontLoadingSupported",jB||wz.platform.isFirefox)}_queueLoadingCallback(e){const{loadingRequests:t}=this,n={done:!1,complete:function(){for(lz(!n.done,"completeRequest() cannot be called twice."),n.done=!0;t.length>0&&t[0].done;){const e=t.shift();setTimeout(e.callback,0)}},callback:e};return t.push(n),n}get _loadTestFont(){return uz(this,"_loadTestFont",atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA=="))}_prepareFontLoadEvent(e,t){function n(e,t){return e.charCodeAt(t)<<24|e.charCodeAt(t+1)<<16|e.charCodeAt(t+2)<<8|255&e.charCodeAt(t+3)}function r(e,t,n,r){return e.substring(0,t)+r+e.substring(t+n)}let i,s;const a=this._document.createElement("canvas");a.width=1,a.height=1;const o=a.getContext("2d");let l=0;const c="lt".concat(Date.now()).concat(this.loadTestFontId++);let d=this._loadTestFont;d=r(d,976,c.length,c);const u=1482184792;let h=n(d,16);for(i=0,s=c.length-3;i<s;i+=4)h=h-u+n(c,i)|0;i<c.length&&(h=h-u+n(c+"XXX",i)|0),d=r(d,16,4,function(e){return String.fromCharCode(e>>24&255,e>>16&255,e>>8&255,255&e)}(h));const p="url(data:font/opentype;base64,".concat(btoa(d),");"),m='@font-face {font-family:"'.concat(c,'";src:').concat(p,"}");this.insertRule(m);const f=this._document.createElement("div");f.style.visibility="hidden",f.style.width=f.style.height="10px",f.style.position="absolute",f.style.top=f.style.left="0px";for(const g of[e.loadedName,c]){const e=this._document.createElement("span");e.textContent="Hi",e.style.fontFamily=g,f.append(e)}this._document.body.append(f),function e(t,n){if(++l>30)return az("Load test font never loaded."),void n();o.font="30px "+t,o.fillText(".",0,20),o.getImageData(0,0,1,1).data[3]>0?n():setTimeout(e.bind(null,t,n))}(c,()=>{f.remove(),t.complete()})}}var fq=new WeakMap;class gq{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0;QF(this,fq,void 0),this.compiledGlyphs=Object.create(null),nB(fq,this,e),this._inspectFont=t,n&&Object.assign(this,n),r&&(this.charProcOperatorList=r)}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(this.cssFontInfo){const e={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(e.style="oblique ".concat(this.cssFontInfo.italicAngle,"deg")),t=new FontFace(this.cssFontInfo.fontFamily,this.data,e)}else t=new FontFace(this.loadedName,this.data,{});return null===(e=this._inspectFont)||void 0===e||e.call(this,this),t}createFontFaceRule(){var e;if(!this.data||this.disableFontFace)return null;const t="url(data:".concat(this.mimetype,";base64,").concat(Tz(this.data),");");let n;if(this.cssFontInfo){let e="font-weight: ".concat(this.cssFontInfo.fontWeight,";");this.cssFontInfo.italicAngle&&(e+="font-style: oblique ".concat(this.cssFontInfo.italicAngle,"deg;")),n='@font-face {font-family:"'.concat(this.cssFontInfo.fontFamily,'";').concat(e,"src:").concat(t,"}")}else n='@font-face {font-family:"'.concat(this.loadedName,'";src:').concat(t,"}");return null===(e=this._inspectFont)||void 0===e||e.call(this,this,t),n}getPathGenerator(e,t){if(void 0!==this.compiledGlyphs[t])return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(s){az('getPathGenerator - ignoring character: "'.concat(s,'".'))}const i=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=i}get black(){return tB(fq,this).black}get bold(){return tB(fq,this).bold}get disableFontFace(){var e;return null!==(e=tB(fq,this).disableFontFace)&&void 0!==e&&e}get fontExtraProperties(){var e;return null!==(e=tB(fq,this).fontExtraProperties)&&void 0!==e&&e}get isInvalidPDFjsFont(){return tB(fq,this).isInvalidPDFjsFont}get isType3Font(){return tB(fq,this).isType3Font}get italic(){return tB(fq,this).italic}get missingFile(){return tB(fq,this).missingFile}get remeasure(){return tB(fq,this).remeasure}get vertical(){return tB(fq,this).vertical}get ascent(){return tB(fq,this).ascent}get defaultWidth(){return tB(fq,this).defaultWidth}get descent(){return tB(fq,this).descent}get bbox(){return tB(fq,this).bbox}get fontMatrix(){return tB(fq,this).fontMatrix}get fallbackName(){return tB(fq,this).fallbackName}get loadedName(){return tB(fq,this).loadedName}get mimetype(){return tB(fq,this).mimetype}get name(){return tB(fq,this).name}get data(){return tB(fq,this).data}clearData(){tB(fq,this).clearData()}get cssFontInfo(){return tB(fq,this).cssFontInfo}get systemFontInfo(){return tB(fq,this).systemFontInfo}get defaultVMetrics(){return tB(fq,this).defaultVMetrics}}function vq(e){if("string"!==typeof e)return null;if(e.endsWith("/"))return e;throw new Error('Invalid factory url: "'.concat(e,'" must include trailing slash.'))}const yq=e=>"object"===typeof e&&Number.isInteger(null===e||void 0===e?void 0:e.num)&&e.num>=0&&Number.isInteger(null===e||void 0===e?void 0:e.gen)&&e.gen>=0,xq=function(e,t,n){if(!Array.isArray(n)||n.length<2)return!1;const[r,i,...s]=n;if(!e(r)&&!Number.isInteger(r))return!1;if(!t(i))return!1;const a=s.length;let o=!0;switch(i.name){case"XYZ":if(a<2||a>3)return!1;break;case"Fit":case"FitB":return 0===a;case"FitH":case"FitBH":case"FitV":case"FitBV":if(a>1)return!1;break;case"FitR":if(4!==a)return!1;o=!1;break;default:return!1}for(const l of s)if(!("number"===typeof l||o&&null===l))return!1;return!0}.bind(null,yq,e=>"object"===typeof e&&"string"===typeof(null===e||void 0===e?void 0:e.name));var bq=new WeakMap,wq=new WeakMap;class jq{constructor(){QF(this,bq,new Map),QF(this,wq,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};tB(wq,this).then(()=>{for(const[e]of tB(bq,this))e.call(this,n)})}addEventListener(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null;if((null===n||void 0===n?void 0:n.signal)instanceof AbortSignal){const{signal:i}=n;if(i.aborted)return void az("LoopbackPort - cannot use an `aborted` signal.");const s=()=>this.removeEventListener(e,t);r=()=>i.removeEventListener("abort",s),i.addEventListener("abort",s)}tB(bq,this).set(t,r)}removeEventListener(e,t){const n=tB(bq,this).get(t);null===n||void 0===n||n(),tB(bq,this).delete(t)}terminate(){for(const[,e]of tB(bq,this))null===e||void 0===e||e();tB(bq,this).clear()}}const Nq=1,kq=2,Aq=1,Sq=2,_q=3,Cq=4,Eq=5,Pq=6,Tq=7,Mq=8;function Dq(){}function Oq(e){if(e instanceof yz||e instanceof fz||e instanceof pz||e instanceof gz||e instanceof mz)return e;switch(e instanceof Error||"object"===typeof e&&null!==e||oz('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),e.name){case"AbortException":return new yz(e.message);case"InvalidPDFException":return new fz(e.message);case"PasswordException":return new pz(e.message,e.code);case"ResponseException":return new gz(e.message,e.status,e.missing);case"UnknownErrorException":return new mz(e.message,e.details)}return new mz(e.message,e.toString())}var Rq=new WeakMap,Iq=new WeakSet;class Lq{constructor(e,t,n){$F(this,Iq),QF(this,Rq,new AbortController),this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",ZF(Iq,this,Fq).bind(this),{signal:tB(Rq,this).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error('There is already an actionName called "'.concat(e,'"'));n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,i=Promise.withResolvers();this.callbackCapabilities[r]=i;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(s){i.reject(s)}return i.promise}sendWithStream(e,t,n,r){const i=this.streamId++,s=this.sourceName,a=this.targetName,o=this.comObj;return new ReadableStream({start:n=>{const l=Promise.withResolvers();return this.streamControllers[i]={controller:n,startCall:l,pullCall:null,cancelCall:null,isClosed:!1},o.postMessage({sourceName:s,targetName:a,action:e,streamId:i,data:t,desiredSize:n.desiredSize},r),l.promise},pull:e=>{const t=Promise.withResolvers();return this.streamControllers[i].pullCall=t,o.postMessage({sourceName:s,targetName:a,stream:Pq,streamId:i,desiredSize:e.desiredSize}),t.promise},cancel:e=>{lz(e instanceof Error,"cancel must have a valid reason");const t=Promise.withResolvers();return this.streamControllers[i].cancelCall=t,this.streamControllers[i].isClosed=!0,o.postMessage({sourceName:s,targetName:a,stream:Aq,streamId:i,reason:Oq(e)}),t.promise}},n)}destroy(){var e;null===(e=tB(Rq,this))||void 0===e||e.abort(),nB(Rq,this,null)}}function Fq(e){let{data:t}=e;if(t.targetName!==this.sourceName)return;if(t.stream)return void ZF(Iq,this,zq).call(this,t);if(t.callback){const e=t.callbackId,n=this.callbackCapabilities[e];if(!n)throw new Error("Cannot resolve callback ".concat(e));if(delete this.callbackCapabilities[e],t.callback===Nq)n.resolve(t.data);else{if(t.callback!==kq)throw new Error("Unexpected callback case");n.reject(Oq(t.reason))}return}const n=this.actionHandler[t.action];if(!n)throw new Error("Unknown action from worker: ".concat(t.action));if(t.callbackId){const e=this.sourceName,r=t.sourceName,i=this.comObj;return void Promise.try(n,t.data).then(function(n){i.postMessage({sourceName:e,targetName:r,callback:Nq,callbackId:t.callbackId,data:n})},function(n){i.postMessage({sourceName:e,targetName:r,callback:kq,callbackId:t.callbackId,reason:Oq(n)})})}t.streamId?ZF(Iq,this,Bq).call(this,t):n(t.data)}function Bq(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,s=this,a=this.actionHandler[e.action],o={enqueue(e){let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2?arguments[2]:void 0;if(this.isCancelled)return;const o=this.desiredSize;this.desiredSize-=s,o>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),i.postMessage({sourceName:n,targetName:r,stream:Cq,streamId:t,chunk:e},a)},close(){this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:_q,streamId:t}),delete s.streamSinks[t])},error(e){lz(e instanceof Error,"error must have a valid reason"),this.isCancelled||(this.isCancelled=!0,i.postMessage({sourceName:n,targetName:r,stream:Eq,streamId:t,reason:Oq(e)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};o.sinkCapability.resolve(),o.ready=o.sinkCapability.promise,this.streamSinks[t]=o,Promise.try(a,e.data,o).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Mq,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:r,stream:Mq,streamId:t,reason:Oq(e)})})}function zq(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,i=this.comObj,s=this.streamControllers[t],a=this.streamSinks[t];switch(e.stream){case Mq:e.success?s.startCall.resolve():s.startCall.reject(Oq(e.reason));break;case Tq:e.success?s.pullCall.resolve():s.pullCall.reject(Oq(e.reason));break;case Pq:if(!a){i.postMessage({sourceName:n,targetName:r,stream:Tq,streamId:t,success:!0});break}a.desiredSize<=0&&e.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=e.desiredSize,Promise.try(a.onPull||Dq).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Tq,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:r,stream:Tq,streamId:t,reason:Oq(e)})});break;case Cq:if(lz(s,"enqueue should have stream controller"),s.isClosed)break;s.controller.enqueue(e.chunk);break;case _q:if(lz(s,"close should have stream controller"),s.isClosed)break;s.isClosed=!0,s.controller.close(),ZF(Iq,this,Wq).call(this,s,t);break;case Eq:lz(s,"error should have stream controller"),s.controller.error(Oq(e.reason)),ZF(Iq,this,Wq).call(this,s,t);break;case Sq:e.success?s.cancelCall.resolve():s.cancelCall.reject(Oq(e.reason)),ZF(Iq,this,Wq).call(this,s,t);break;case Aq:if(!a)break;const o=Oq(e.reason);Promise.try(a.onCancel||Dq,o).then(function(){i.postMessage({sourceName:n,targetName:r,stream:Sq,streamId:t,success:!0})},function(e){i.postMessage({sourceName:n,targetName:r,stream:Sq,streamId:t,reason:Oq(e)})}),a.sinkCapability.reject(o),a.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}}async function Wq(e,t){var n,r,i;await Promise.allSettled([null===(n=e.startCall)||void 0===n?void 0:n.promise,null===(r=e.pullCall)||void 0===r?void 0:r.promise,null===(i=e.cancelCall)||void 0===i?void 0:i.promise]),delete this.streamControllers[t]}var Uq=new WeakMap;class Vq{constructor(e){let{enableHWA:t=!1}=e;QF(this,Uq,!1),nB(Uq,this,t)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!tB(Uq,this)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){oz("Abstract method `_createCanvas` called.")}}class Hq extends Vq{constructor(e){let{ownerDocument:t=globalThis.document,enableHWA:n=!1}=e;super({enableHWA:n}),this._document=t}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class qq{constructor(e){let{baseUrl:t=null,isCompressed:n=!0}=e;this.baseUrl=t,this.isCompressed=n}async fetch(e){let{name:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const n=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(n).then(e=>({cMapData:e,isCompressed:this.isCompressed})).catch(e=>{throw new Error("Unable to load ".concat(this.isCompressed?"binary ":"","CMap at: ").concat(n))})}async _fetch(e){oz("Abstract method `_fetch` called.")}}class Gq extends qq{async _fetch(e){const t=await Iz(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):bz(t)}}class Kq{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,i){return"none"}destroy(){}}var Yq=new WeakMap,Xq=new WeakMap,Jq=new WeakMap,$q=new WeakMap,Qq=new WeakMap,Zq=new WeakMap,eG=new WeakMap,tG=new WeakSet;class nG extends Kq{constructor(e){let{docId:t,ownerDocument:n=globalThis.document}=e;super(),$F(this,tG),QF(this,Yq,void 0),QF(this,Xq,void 0),QF(this,Jq,void 0),QF(this,$q,void 0),QF(this,Qq,void 0),QF(this,Zq,void 0),QF(this,eG,0),nB($q,this,t),nB(Qq,this,n)}addFilter(e){var t,n;if(!e)return"none";let r=eB(tG,this,rG).get(e);if(r)return r;const[i,s,a]=ZF(tG,this,aG).call(this,e),o=1===e.length?i:"".concat(i).concat(s).concat(a);if(r=eB(tG,this,rG).get(o),r)return eB(tG,this,rG).set(e,r),r;const l="g_".concat(tB($q,this),"_transfer_map_").concat((nB(eG,this,(t=tB(eG,this),n=t++,t)),n)),c=ZF(tG,this,oG).call(this,l);eB(tG,this,rG).set(e,c),eB(tG,this,rG).set(o,c);const d=ZF(tG,this,dG).call(this,l);return ZF(tG,this,hG).call(this,i,s,a,d),c}addHCMFilter(e,t){var n;const r="".concat(e,"-").concat(t),i="base";let s=eB(tG,this,iG).get(i);if((null===(n=s)||void 0===n?void 0:n.key)===r)return s.url;var a;s?(null===(a=s.filter)||void 0===a||a.remove(),s.key=r,s.url="none",s.filter=null):(s={key:r,url:"none",filter:null},eB(tG,this,iG).set(i,s));if(!e||!t)return s.url;const o=ZF(tG,this,mG).call(this,e);e=Nz.makeHexColor(...o);const l=ZF(tG,this,mG).call(this,t);if(t=Nz.makeHexColor(...l),eB(tG,this,sG).style.color="","#000000"===e&&"#ffffff"===t||e===t)return s.url;const c=new Array(256);for(let m=0;m<=255;m++){const e=m/255;c[m]=e<=.03928?e/12.92:((e+.055)/1.055)**2.4}const d=c.join(","),u="g_".concat(tB($q,this),"_hcm_filter"),h=s.filter=ZF(tG,this,dG).call(this,u);ZF(tG,this,hG).call(this,d,d,d,h),ZF(tG,this,cG).call(this,h);const p=(e,t)=>{const n=o[e]/255,r=l[e]/255,i=new Array(t+1);for(let s=0;s<=t;s++)i[s]=n+s/t*(r-n);return i.join(",")};return ZF(tG,this,hG).call(this,p(0,5),p(1,5),p(2,5),h),s.url=ZF(tG,this,oG).call(this,u),s.url}addAlphaFilter(e){var t,n;let r=eB(tG,this,rG).get(e);if(r)return r;const[i]=ZF(tG,this,aG).call(this,[e]),s="alpha_".concat(i);if(r=eB(tG,this,rG).get(s),r)return eB(tG,this,rG).set(e,r),r;const a="g_".concat(tB($q,this),"_alpha_map_").concat((nB(eG,this,(t=tB(eG,this),n=t++,t)),n)),o=ZF(tG,this,oG).call(this,a);eB(tG,this,rG).set(e,o),eB(tG,this,rG).set(s,o);const l=ZF(tG,this,dG).call(this,a);return ZF(tG,this,pG).call(this,i,l),o}addLuminosityFilter(e){var t,n;let r,i,s=eB(tG,this,rG).get(e||"luminosity");if(s)return s;if(e?([r]=ZF(tG,this,aG).call(this,[e]),i="luminosity_".concat(r)):i="luminosity",s=eB(tG,this,rG).get(i),s)return eB(tG,this,rG).set(e,s),s;const a="g_".concat(tB($q,this),"_luminosity_map_").concat((nB(eG,this,(t=tB(eG,this),n=t++,t)),n)),o=ZF(tG,this,oG).call(this,a);eB(tG,this,rG).set(e,o),eB(tG,this,rG).set(i,o);const l=ZF(tG,this,dG).call(this,a);return ZF(tG,this,lG).call(this,l),e&&ZF(tG,this,pG).call(this,r,l),o}addHighlightHCMFilter(e,t,n,r,i){var s;const a="".concat(t,"-").concat(n,"-").concat(r,"-").concat(i);let o=eB(tG,this,iG).get(e);if((null===(s=o)||void 0===s?void 0:s.key)===a)return o.url;var l;o?(null===(l=o.filter)||void 0===l||l.remove(),o.key=a,o.url="none",o.filter=null):(o={key:a,url:"none",filter:null},eB(tG,this,iG).set(e,o));if(!t||!n)return o.url;const[c,d]=[t,n].map(ZF(tG,this,mG).bind(this));let u=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),h=Math.round(.2126*d[0]+.7152*d[1]+.0722*d[2]),[p,m]=[r,i].map(ZF(tG,this,mG).bind(this));h<u&&([u,h,p,m]=[h,u,m,p]),eB(tG,this,sG).style.color="";const f=(e,t,n)=>{const r=new Array(256),i=(h-u)/n,s=e/255,a=(t-e)/(255*n);let o=0;for(let l=0;l<=n;l++){const e=Math.round(u+l*i),t=s+l*a;for(let n=o;n<=e;n++)r[n]=t;o=e+1}for(let l=o;l<256;l++)r[l]=r[o-1];return r.join(",")},g="g_".concat(tB($q,this),"_hcm_").concat(e,"_filter"),v=o.filter=ZF(tG,this,dG).call(this,g);return ZF(tG,this,cG).call(this,v),ZF(tG,this,hG).call(this,f(p[0],m[0],5),f(p[1],m[1],5),f(p[2],m[2],5),v),o.url=ZF(tG,this,oG).call(this,g),o.url}destroy(){var e,t,n,r;arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&null!==(e=tB(Zq,this))&&void 0!==e&&e.size||(null===(t=tB(Jq,this))||void 0===t||t.parentNode.parentNode.remove(),nB(Jq,this,null),null===(n=tB(Xq,this))||void 0===n||n.clear(),nB(Xq,this,null),null===(r=tB(Zq,this))||void 0===r||r.clear(),nB(Zq,this,null),nB(eG,this,0))}}function rG(e){return tB(Xq,e)||nB(Xq,e,new Map)}function iG(e){return tB(Zq,e)||nB(Zq,e,new Map)}function sG(e){if(!tB(Jq,e)){const t=tB(Qq,e).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=tB(Qq,e).createElementNS(Oz,"svg");r.setAttribute("width",0),r.setAttribute("height",0),nB(Jq,e,tB(Qq,e).createElementNS(Oz,"defs")),t.append(r),r.append(tB(Jq,e)),tB(Qq,e).body.append(t)}return tB(Jq,e)}function aG(e){if(1===e.length){const t=e[0],n=new Array(256);for(let e=0;e<256;e++)n[e]=t[e]/255;const r=n.join(",");return[r,r,r]}const[t,n,r]=e,i=new Array(256),s=new Array(256),a=new Array(256);for(let o=0;o<256;o++)i[o]=t[o]/255,s[o]=n[o]/255,a[o]=r[o]/255;return[i.join(","),s.join(","),a.join(",")]}function oG(e){if(void 0===tB(Yq,this)){nB(Yq,this,"");const e=tB(Qq,this).URL;e!==tB(Qq,this).baseURI&&(Bz(e)?az('#createUrl: ignore "data:"-URL for performance reasons.'):nB(Yq,this,dz(e,"")))}return"url(".concat(tB(Yq,this),"#").concat(e,")")}function lG(e){const t=tB(Qq,this).createElementNS(Oz,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(t)}function cG(e){const t=tB(Qq,this).createElementNS(Oz,"feColorMatrix");t.setAttribute("type","matrix"),t.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(t)}function dG(e){const t=tB(Qq,this).createElementNS(Oz,"filter");return t.setAttribute("color-interpolation-filters","sRGB"),t.setAttribute("id",e),eB(tG,this,sG).append(t),t}function uG(e,t,n){const r=tB(Qq,this).createElementNS(Oz,t);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)}function hG(e,t,n,r){const i=tB(Qq,this).createElementNS(Oz,"feComponentTransfer");r.append(i),ZF(tG,this,uG).call(this,i,"feFuncR",e),ZF(tG,this,uG).call(this,i,"feFuncG",t),ZF(tG,this,uG).call(this,i,"feFuncB",n)}function pG(e,t){const n=tB(Qq,this).createElementNS(Oz,"feComponentTransfer");t.append(n),ZF(tG,this,uG).call(this,n,"feFuncA",e)}function mG(e){return eB(tG,this,sG).style.color=e,Kz(getComputedStyle(eB(tG,this,sG)).getPropertyValue("color"))}class fG{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load font data at: ".concat(n))})}async _fetch(e){oz("Abstract method `_fetch` called.")}}class gG extends fG{async _fetch(e){const t=await Iz(e,"arraybuffer");return new Uint8Array(t)}}class vG{constructor(e){let{baseUrl:t=null}=e;this.baseUrl=t}async fetch(e){let{filename:t}=e;if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const n="".concat(this.baseUrl).concat(t);return this._fetch(n).catch(e=>{throw new Error("Unable to load wasm data at: ".concat(n))})}async _fetch(e){oz("Abstract method `_fetch` called.")}}class yG extends vG{async _fetch(e){const t=await Iz(e,"arraybuffer");return new Uint8Array(t)}}async function xG(e){const t=process.getBuiltinModule("fs"),n=await t.promises.readFile(e);return new Uint8Array(n)}jB&&az("Please use the `legacy` build in Node.js environments.");class bG extends Kq{}class wG extends Vq{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire("file:///G:/%E5%8F%91%E7%A5%A8%E8%BD%AF%E4%BB%B6/frontend/node_modules/pdfjs-dist/build/pdf.mjs")("@napi-rs/canvas").createCanvas(e,t)}}class jG extends qq{async _fetch(e){return xG(e)}}class NG extends fG{async _fetch(e){return xG(e)}}class kG extends vG{async _fetch(e){return xG(e)}}const AG="__forcedDependency",{floor:SG,ceil:_G}=Math;function CG(e,t,n,r,i,s){e[4*t+0]=Math.min(e[4*t+0],n),e[4*t+1]=Math.min(e[4*t+1],r),e[4*t+2]=Math.max(e[4*t+2],i),e[4*t+3]=Math.max(e[4*t+3],s)}const EG=new Uint32Array(new Uint8Array([255,255,0,0]).buffer)[0];var PG=new WeakMap,TG=new WeakMap;class MG{constructor(e,t){QF(this,PG,void 0),QF(this,TG,void 0),nB(PG,this,e),nB(TG,this,t)}get length(){return tB(PG,this).length}isEmpty(e){return tB(PG,this)[e]===EG}minX(e){return tB(TG,this)[4*e+0]/256}minY(e){return tB(TG,this)[4*e+1]/256}maxX(e){return(tB(TG,this)[4*e+2]+1)/256}maxY(e){return(tB(TG,this)[4*e+3]+1)/256}}const DG=(e,t)=>{if(!e)return;let n=e.get(t);return n||(n={dependencies:new Set,isRenderingOperation:!1},e.set(t,n)),n};var OG=new WeakMap,RG=new WeakMap,IG=new WeakMap,LG=new WeakMap,FG=new WeakMap,BG=new WeakMap,zG=new WeakMap,WG=new WeakMap,UG=new WeakMap,VG=new WeakMap,HG=new WeakMap,qG=new WeakMap,GG=new WeakMap,KG=new WeakMap,YG=new WeakMap,XG=new WeakMap,JG=new WeakMap,$G=new WeakSet;class QG{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];$F(this,$G),QF(this,OG,{__proto__:null}),QF(this,RG,{__proto__:null,transform:[],moveText:[],sameLineText:[],[AG]:[]}),QF(this,IG,new Map),QF(this,LG,[]),QF(this,FG,[]),QF(this,BG,[[1,0,0,1,0,0]]),QF(this,zG,[-1/0,-1/0,1/0,1/0]),QF(this,WG,new Float64Array([1/0,1/0,-1/0,-1/0])),QF(this,UG,-1),QF(this,VG,new Set),QF(this,HG,new Map),QF(this,qG,new Map),QF(this,GG,void 0),QF(this,KG,void 0),QF(this,YG,void 0),QF(this,XG,void 0),QF(this,JG,void 0),nB(GG,this,e.width),nB(KG,this,e.height),ZF($G,this,ZG).call(this,t),n&&nB(JG,this,new Map)}growOperationsCount(e){e>=tB(XG,this).length&&ZF($G,this,ZG).call(this,e,tB(XG,this))}save(e){return nB(OG,this,{__proto__:tB(OG,this)}),nB(RG,this,{__proto__:tB(RG,this),transform:{__proto__:tB(RG,this).transform},moveText:{__proto__:tB(RG,this).moveText},sameLineText:{__proto__:tB(RG,this).sameLineText},[AG]:{__proto__:tB(RG,this)[AG]}}),nB(zG,this,{__proto__:tB(zG,this)}),tB(LG,this).push(e),this}restore(e){const t=Object.getPrototypeOf(tB(OG,this));if(null===t)return this;nB(OG,this,t),nB(RG,this,Object.getPrototypeOf(tB(RG,this))),nB(zG,this,Object.getPrototypeOf(tB(zG,this)));const n=tB(LG,this).pop();var r;void 0!==n&&(null===(r=DG(tB(JG,this),e))||void 0===r||r.dependencies.add(n),tB(XG,this)[e]=tB(XG,this)[n]);return this}recordOpenMarker(e){return tB(LG,this).push(e),this}getOpenMarker(){return 0===tB(LG,this).length?null:tB(LG,this).at(-1)}recordCloseMarker(e){const t=tB(LG,this).pop();var n;void 0!==t&&(null===(n=DG(tB(JG,this),e))||void 0===n||n.dependencies.add(t),tB(XG,this)[e]=tB(XG,this)[t]);return this}beginMarkedContent(e){return tB(FG,this).push(e),this}endMarkedContent(e){const t=tB(FG,this).pop();var n;void 0!==t&&(null===(n=DG(tB(JG,this),e))||void 0===n||n.dependencies.add(t),tB(XG,this)[e]=tB(XG,this)[t]);return this}pushBaseTransform(e){return tB(BG,this).push(Nz.multiplyByDOMMatrix(tB(BG,this).at(-1),e.getTransform())),this}popBaseTransform(){return tB(BG,this).length>1&&tB(BG,this).pop(),this}recordSimpleData(e,t){return tB(OG,this)[e]=t,this}recordIncrementalData(e,t){return tB(RG,this)[e].push(t),this}resetIncrementalData(e,t){return tB(RG,this)[e].length=0,this}recordNamedData(e,t){return tB(IG,this).set(e,t),this}recordSimpleDataFromNamed(e,t,n){var r;tB(OG,this)[e]=null!==(r=tB(IG,this).get(t))&&void 0!==r?r:n}recordFutureForcedDependency(e,t){return this.recordIncrementalData(AG,t),this}inheritSimpleDataAsFutureForcedDependencies(e){for(const t of e)t in tB(OG,this)&&this.recordFutureForcedDependency(t,tB(OG,this)[t]);return this}inheritPendingDependenciesAsFutureForcedDependencies(){for(const e of tB(VG,this))this.recordFutureForcedDependency(AG,e);return this}resetBBox(e){return tB(UG,this)!==e&&(nB(UG,this,e),tB(WG,this)[0]=1/0,tB(WG,this)[1]=1/0,tB(WG,this)[2]=-1/0,tB(WG,this)[3]=-1/0),this}recordClipBox(e,t,n,r,i,s){const a=Nz.multiplyByDOMMatrix(tB(BG,this).at(-1),t.getTransform()),o=[1/0,1/0,-1/0,-1/0];Nz.axialAlignedBoundingBox([n,i,r,s],a,o);const l=Nz.intersect(tB(zG,this),o);return l?(tB(zG,this)[0]=l[0],tB(zG,this)[1]=l[1],tB(zG,this)[2]=l[2],tB(zG,this)[3]=l[3]):(tB(zG,this)[0]=tB(zG,this)[1]=1/0,tB(zG,this)[2]=tB(zG,this)[3]=-1/0),this}recordBBox(e,t,n,r,i,s){const a=tB(zG,this);if(a[0]===1/0)return this;const o=Nz.multiplyByDOMMatrix(tB(BG,this).at(-1),t.getTransform());if(a[0]===-1/0)return Nz.axialAlignedBoundingBox([n,i,r,s],o,tB(WG,this)),this;const l=[1/0,1/0,-1/0,-1/0];return Nz.axialAlignedBoundingBox([n,i,r,s],o,l),tB(WG,this)[0]=Math.min(tB(WG,this)[0],Math.max(l[0],a[0])),tB(WG,this)[1]=Math.min(tB(WG,this)[1],Math.max(l[1],a[1])),tB(WG,this)[2]=Math.max(tB(WG,this)[2],Math.min(l[2],a[2])),tB(WG,this)[3]=Math.max(tB(WG,this)[3],Math.min(l[3],a[3])),this}recordCharacterBBox(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6?arguments[6]:void 0;const o=n.bbox;let l,c;if(o&&(l=o[2]!==o[0]&&o[3]!==o[1]&&tB(qG,this).get(n),!1!==l&&(c=[0,0,0,0],Nz.axialAlignedBoundingBox(o,n.fontMatrix,c),1===r&&0===i&&0===s||Nz.scaleMinMax([r,0,0,-r,i,s],c),l)))return this.recordBBox(e,t,c[0],c[2],c[1],c[3]);if(!a)return this.recordFullPageBBox(e);const d=a();return o&&c&&void 0===l&&(l=c[0]<=i-d.actualBoundingBoxLeft&&c[2]>=i+d.actualBoundingBoxRight&&c[1]<=s-d.actualBoundingBoxAscent&&c[3]>=s+d.actualBoundingBoxDescent,tB(qG,this).set(n,l),l)?this.recordBBox(e,t,c[0],c[2],c[1],c[3]):this.recordBBox(e,t,i-d.actualBoundingBoxLeft,i+d.actualBoundingBoxRight,s-d.actualBoundingBoxAscent,s+d.actualBoundingBoxDescent)}recordFullPageBBox(e){return tB(WG,this)[0]=Math.max(0,tB(zG,this)[0]),tB(WG,this)[1]=Math.max(0,tB(zG,this)[1]),tB(WG,this)[2]=Math.min(tB(GG,this),tB(zG,this)[2]),tB(WG,this)[3]=Math.min(tB(KG,this),tB(zG,this)[3]),this}getSimpleIndex(e){return tB(OG,this)[e]}recordDependencies(e,t){const n=tB(VG,this),r=tB(OG,this),i=tB(RG,this);for(const s of t)s in tB(OG,this)?n.add(r[s]):s in i&&i[s].forEach(n.add,n);return this}recordNamedDependency(e,t){return tB(IG,this).has(t)&&tB(VG,this).add(tB(IG,this).get(t)),this}recordOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.recordDependencies(e,[AG]),tB(JG,this)){const t=DG(tB(JG,this),e),{dependencies:n}=t;tB(VG,this).forEach(n.add,n),tB(LG,this).forEach(n.add,n),tB(FG,this).forEach(n.add,n),n.delete(e),t.isRenderingOperation=!0}if(tB(UG,this)===e){const n=SG(256*tB(WG,this)[0]/tB(GG,this)),r=SG(256*tB(WG,this)[1]/tB(KG,this)),i=_G(256*tB(WG,this)[2]/tB(GG,this)),s=_G(256*tB(WG,this)[3]/tB(KG,this));CG(tB(YG,this),e,n,r,i,s);for(const t of tB(VG,this))t!==e&&CG(tB(YG,this),t,n,r,i,s);for(const t of tB(LG,this))t!==e&&CG(tB(YG,this),t,n,r,i,s);for(const t of tB(FG,this))t!==e&&CG(tB(YG,this),t,n,r,i,s);t||(tB(VG,this).clear(),nB(UG,this,-1))}return this}recordShowTextOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=Array.from(tB(VG,this));this.recordOperation(e,t),this.recordIncrementalData("sameLineText",e);for(const r of n)this.recordIncrementalData("sameLineText",r);return this}bboxToClipBoxDropOperation(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return tB(UG,this)===e&&(nB(UG,this,-1),tB(zG,this)[0]=Math.max(tB(zG,this)[0],tB(WG,this)[0]),tB(zG,this)[1]=Math.max(tB(zG,this)[1],tB(WG,this)[1]),tB(zG,this)[2]=Math.min(tB(zG,this)[2],tB(WG,this)[2]),tB(zG,this)[3]=Math.min(tB(zG,this)[3],tB(WG,this)[3]),t||tB(VG,this).clear()),this}_takePendingDependencies(){const e=tB(VG,this);return nB(VG,this,new Set),e}_extractOperation(e){const t=tB(HG,this).get(e);return tB(HG,this).delete(e),t}_pushPendingDependencies(e){for(const t of e)tB(VG,this).add(t)}take(){return tB(qG,this).clear(),new MG(tB(XG,this),tB(YG,this))}takeDebugMetadata(){return tB(JG,this)}}function ZG(e,t){const n=new ArrayBuffer(4*e);nB(YG,this,new Uint8ClampedArray(n)),nB(XG,this,new Uint32Array(n)),t&&t.length>0?(tB(XG,this).set(t),tB(XG,this).fill(EG,t.length)):tB(XG,this).fill(EG)}var eK=new WeakMap,tK=new WeakMap,nK=new WeakMap,rK=new WeakMap,iK=new WeakMap;class sK{constructor(e,t,n){if(QF(this,eK,void 0),QF(this,tK,void 0),QF(this,nK,void 0),QF(this,rK,0),QF(this,iK,0),e instanceof sK&&tB(nK,e)===!!n)return e;nB(eK,this,e),nB(tK,this,t),nB(nK,this,!!n)}growOperationsCount(){throw new Error("Unreachable")}save(e){var t;return nB(iK,this,(t=tB(iK,this),t++,t)),tB(eK,this).save(tB(tK,this)),this}restore(e){var t;tB(iK,this)>0&&(tB(eK,this).restore(tB(tK,this)),nB(iK,this,(t=tB(iK,this),t--,t)));return this}recordOpenMarker(e){var t;return nB(rK,this,(t=tB(rK,this),t++,t)),this}getOpenMarker(){return tB(rK,this)>0?tB(tK,this):tB(eK,this).getOpenMarker()}recordCloseMarker(e){var t;return nB(rK,this,(t=tB(rK,this),t--,t)),this}beginMarkedContent(e){return this}endMarkedContent(e){return this}pushBaseTransform(e){return tB(eK,this).pushBaseTransform(e),this}popBaseTransform(){return tB(eK,this).popBaseTransform(),this}recordSimpleData(e,t){return tB(eK,this).recordSimpleData(e,tB(tK,this)),this}recordIncrementalData(e,t){return tB(eK,this).recordIncrementalData(e,tB(tK,this)),this}resetIncrementalData(e,t){return tB(eK,this).resetIncrementalData(e,tB(tK,this)),this}recordNamedData(e,t){return this}recordSimpleDataFromNamed(e,t,n){return tB(eK,this).recordSimpleDataFromNamed(e,t,tB(tK,this)),this}recordFutureForcedDependency(e,t){return tB(eK,this).recordFutureForcedDependency(e,tB(tK,this)),this}inheritSimpleDataAsFutureForcedDependencies(e){return tB(eK,this).inheritSimpleDataAsFutureForcedDependencies(e),this}inheritPendingDependenciesAsFutureForcedDependencies(){return tB(eK,this).inheritPendingDependenciesAsFutureForcedDependencies(),this}resetBBox(e){return tB(nK,this)||tB(eK,this).resetBBox(tB(tK,this)),this}recordClipBox(e,t,n,r,i,s){return tB(nK,this)||tB(eK,this).recordClipBox(tB(tK,this),t,n,r,i,s),this}recordBBox(e,t,n,r,i,s){return tB(nK,this)||tB(eK,this).recordBBox(tB(tK,this),t,n,r,i,s),this}recordCharacterBBox(e,t,n,r,i,s,a){return tB(nK,this)||tB(eK,this).recordCharacterBBox(tB(tK,this),t,n,r,i,s,a),this}recordFullPageBBox(e){return tB(nK,this)||tB(eK,this).recordFullPageBBox(tB(tK,this)),this}getSimpleIndex(e){return tB(eK,this).getSimpleIndex(e)}recordDependencies(e,t){return tB(eK,this).recordDependencies(tB(tK,this),t),this}recordNamedDependency(e,t){return tB(eK,this).recordNamedDependency(tB(tK,this),t),this}recordOperation(e){return tB(eK,this).recordOperation(tB(tK,this),!0),this}recordShowTextOperation(e){return tB(eK,this).recordShowTextOperation(tB(tK,this),!0),this}bboxToClipBoxDropOperation(e){return tB(nK,this)||tB(eK,this).bboxToClipBoxDropOperation(tB(tK,this),!0),this}take(){throw new Error("Unreachable")}takeDebugMetadata(){throw new Error("Unreachable")}}const aK=["path","transform","filter","strokeColor","strokeAlpha","lineWidth","lineCap","lineJoin","miterLimit","dash"],oK=["path","transform","filter","fillColor","fillAlpha","globalCompositeOperation","SMask"],lK=["transform","SMask","filter","fillAlpha","strokeAlpha","globalCompositeOperation"],cK=["filter","fillColor","fillAlpha"],dK=["transform","leading","charSpacing","wordSpacing","hScale","textRise","moveText","textMatrix","font","fontObj","filter","fillColor","textRenderingMode","SMask","fillAlpha","strokeAlpha","globalCompositeOperation","sameLineText"],uK=["transform"],hK=["transform","fillColor"],pK="Fill",mK="Stroke",fK="Shading";function gK(e,t){if(!t)return;const n=t[2]-t[0],r=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],n,r),e.clip(i)}class vK{isModifyingCurrentTransform(){return!1}getPattern(){oz("Abstract method `getPattern` called.")}}class yK extends vK{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;"axial"===this._type?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):"radial"===this._type&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let i;if(r===mK||r===pK){const s=t.current.getClippedPathBoundingBox(r,Yz(e))||[0,0,0,0],a=Math.ceil(s[2]-s[0])||1,o=Math.ceil(s[3]-s[1])||1,l=t.cachedCanvases.getCanvas("pattern",a,o),c=l.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-s[0],-s[1]),n=Nz.transform(n,[1,0,0,1,s[0],s[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),gK(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),i=e.createPattern(l.canvas,"no-repeat");const d=new DOMMatrix(n);i.setTransform(d)}else gK(e,this._bbox),i=this._createGradient(e);return i}}function xK(e,t,n,r,i,s,a,o){const l=t.coords,c=t.colors,d=e.data,u=4*e.width;let h;l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=s,s=a,a=h),l[r+1]>l[i+1]&&(h=r,r=i,i=h,h=a,a=o,o=h),l[n+1]>l[r+1]&&(h=n,n=r,r=h,h=s,s=a,a=h);const p=(l[n]+t.offsetX)*t.scaleX,m=(l[n+1]+t.offsetY)*t.scaleY,f=(l[r]+t.offsetX)*t.scaleX,g=(l[r+1]+t.offsetY)*t.scaleY,v=(l[i]+t.offsetX)*t.scaleX,y=(l[i+1]+t.offsetY)*t.scaleY;if(m>=y)return;const x=c[s],b=c[s+1],w=c[s+2],j=c[a],N=c[a+1],k=c[a+2],A=c[o],S=c[o+1],_=c[o+2],C=Math.round(m),E=Math.round(y);let P,T,M,D,O,R,I,L;for(let F=C;F<=E;F++){if(F<g){const e=F<m?0:(m-F)/(m-g);P=p-(p-f)*e,T=x-(x-j)*e,M=b-(b-N)*e,D=w-(w-k)*e}else{let e;e=F>y?1:g===y?0:(g-F)/(g-y),P=f-(f-v)*e,T=j-(j-A)*e,M=N-(N-S)*e,D=k-(k-_)*e}let e;e=F<m?0:F>y?1:(m-F)/(m-y),O=p-(p-v)*e,R=x-(x-A)*e,I=b-(b-S)*e,L=w-(w-_)*e;const t=Math.round(Math.min(P,O)),n=Math.round(Math.max(P,O));let r=u*F+4*t;for(let i=t;i<=n;i++)e=(P-i)/(P-O),e<0?e=0:e>1&&(e=1),d[r++]=T-(T-R)*e|0,d[r++]=M-(M-I)*e|0,d[r++]=D-(D-L)*e|0,d[r++]=255}}function bK(e,t,n){const r=t.coords,i=t.colors;let s,a;switch(t.type){case"lattice":const o=t.verticesPerRow,l=Math.floor(r.length/o)-1,c=o-1;for(s=0;s<l;s++){let t=s*o;for(let s=0;s<c;s++,t++)xK(e,n,r[t],r[t+1],r[t+o],i[t],i[t+1],i[t+o]),xK(e,n,r[t+o+1],r[t+1],r[t+o],i[t+o+1],i[t+1],i[t+o])}break;case"triangles":for(s=0,a=r.length;s<a;s+=3)xK(e,n,r[s],r[s+1],r[s+2],i[s],i[s+1],i[s+2]);break;default:throw new Error("illegal figure")}}class wK extends vK{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[6],this._background=e[7],this.matrix=null}_createMeshCanvas(e,t,n){const r=Math.floor(this._bounds[0]),i=Math.floor(this._bounds[1]),s=Math.ceil(this._bounds[2])-r,a=Math.ceil(this._bounds[3])-i,o=Math.min(Math.ceil(Math.abs(s*e[0]*1.1)),3e3),l=Math.min(Math.ceil(Math.abs(a*e[1]*1.1)),3e3),c=s/o,d=a/l,u={coords:this._coords,colors:this._colors,offsetX:-r,offsetY:-i,scaleX:1/c,scaleY:1/d},h=o+4,p=l+4,m=n.getCanvas("mesh",h,p),f=m.context,g=f.createImageData(o,l);if(t){const e=g.data;for(let n=0,r=e.length;n<r;n+=4)e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=255}for(const v of this._figures)bK(g,v,u);f.putImageData(g,2,2);return{canvas:m.canvas,offsetX:r-2*c,offsetY:i-2*d,scaleX:c,scaleY:d}}isModifyingCurrentTransform(){return!0}getPattern(e,t,n,r){gK(e,this._bbox);const i=new Float32Array(2);if(r===fK)Nz.singularValueDecompose2dScale(Yz(e),i);else if(this.matrix){Nz.singularValueDecompose2dScale(this.matrix,i);const[e,n]=i;Nz.singularValueDecompose2dScale(t.baseTransform,i),i[0]*=e,i[1]*=n}else Nz.singularValueDecompose2dScale(t.baseTransform,i);const s=this._createMeshCanvas(i,r===fK?null:this._background,t.cachedCanvases);return r!==fK&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(s.offsetX,s.offsetY),e.scale(s.scaleX,s.scaleY),e.createPattern(s.canvas,"no-repeat")}}class jK extends vK{getPattern(){return"hotpink"}}const NK=1,kK=2;class AK{constructor(e,t,n,r){this.color=e[1],this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.ctx=t,this.canvasGraphicsFactory=n,this.baseTransform=r}createPatternCanvas(e,t){var n,r;const{bbox:i,operatorList:s,paintType:a,tilingType:o,color:l,canvasGraphicsFactory:c}=this;let{xstep:d,ystep:u}=this;d=Math.abs(d),u=Math.abs(u),sz("TilingType: "+o);const h=i[0],p=i[1],m=i[2],f=i[3],g=m-h,v=f-p,y=new Float32Array(2);Nz.singularValueDecompose2dScale(this.matrix,y);const[x,b]=y;Nz.singularValueDecompose2dScale(this.baseTransform,y);const w=x*y[0],j=b*y[1];let N=g,k=v,A=!1,S=!1;const _=Math.ceil(d*w),C=Math.ceil(u*j);_>=Math.ceil(g*w)?N=d:A=!0,C>=Math.ceil(v*j)?k=u:S=!0;const E=this.getSizeAndScale(N,this.ctx.canvas.width,w),P=this.getSizeAndScale(k,this.ctx.canvas.height,j),T=e.cachedCanvases.getCanvas("pattern",E.size,P.size),M=T.context,D=c.createCanvasGraphics(M,t);if(D.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext(D,a,l),M.translate(-E.scale*h,-P.scale*p),D.transform(0,E.scale,0,0,P.scale,0,0),M.save(),null===(n=D.dependencyTracker)||void 0===n||n.save(),this.clipBbox(D,h,p,m,f),D.baseTransform=Yz(D.ctx),D.executeOperatorList(s),D.endDrawing(),null===(r=D.dependencyTracker)||void 0===r||r.restore(),M.restore(),A||S){const t=T.canvas;A&&(N=d),S&&(k=u);const n=this.getSizeAndScale(N,this.ctx.canvas.width,w),r=this.getSizeAndScale(k,this.ctx.canvas.height,j),i=n.size,s=r.size,a=e.cachedCanvases.getCanvas("pattern-workaround",i,s),o=a.context,l=A?Math.floor(g/d):0,c=S?Math.floor(v/u):0;for(let e=0;e<=l;e++)for(let n=0;n<=c;n++)o.drawImage(t,i*e,s*n,i,s,0,0,i,s);return{canvas:a.canvas,scaleX:n.scale,scaleY:r.scale,offsetX:h,offsetY:p}}return{canvas:T.canvas,scaleX:E.scale,scaleY:P.scale,offsetX:h,offsetY:p}}getSizeAndScale(e,t,n){const r=Math.max(AK.MAX_PATTERN_SIZE,t);let i=Math.ceil(e*n);return i>=r?i=r:n=i/e,{scale:n,size:i}}clipBbox(e,t,n,r,i){const s=r-t,a=i-n;e.ctx.rect(t,n,s,a),Nz.axialAlignedBoundingBox([t,n,r,i],Yz(e.ctx),e.current.minMax),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,i=e.current;switch(t){case NK:const{fillStyle:e,strokeStyle:s}=this.ctx;r.fillStyle=i.fillColor=e,r.strokeStyle=i.strokeColor=s;break;case kK:r.fillStyle=r.strokeStyle=n,i.fillColor=i.strokeColor=n;break;default:throw new vz("Unsupported paint type: ".concat(t))}}isModifyingCurrentTransform(){return!1}getPattern(e,t,n,r,i){let s=n;r!==fK&&(s=Nz.transform(s,t.baseTransform),this.matrix&&(s=Nz.transform(s,this.matrix)));const a=this.createPatternCanvas(t,i);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}}function SK(e){let{src:t,srcPos:n=0,dest:r,width:i,height:s,nonBlackColor:a=4294967295,inverseDecode:o=!1}=e;const l=wz.isLittleEndian?4278190080:255,[c,d]=o?[a,l]:[l,a],u=i>>3,h=7&i,p=t.length;r=new Uint32Array(r.buffer);let m=0;for(let f=0;f<s;f++){for(const i=n+u;n<i;n++){const e=n<p?t[n]:255;r[m++]=128&e?d:c,r[m++]=64&e?d:c,r[m++]=32&e?d:c,r[m++]=16&e?d:c,r[m++]=8&e?d:c,r[m++]=4&e?d:c,r[m++]=2&e?d:c,r[m++]=1&e?d:c}if(0===h)continue;const e=n<p?t[n++]:255;for(let t=0;t<h;t++)r[m++]=e&1<<7-t?d:c}return{srcPos:n,destPos:m}}(0,ol.A)(AK,"MAX_PATTERN_SIZE",3e3);const _K=16,CK=new DOMMatrix,EK=new Float32Array(2),PK=new Float32Array([1/0,1/0,-1/0,-1/0]);class TK{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return void 0!==this.cache[e]?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function MK(e,t,n,r,i,s,a,o,l,c){const[d,u,h,p,m,f]=Yz(e);if(0===u&&0===h){const g=a*d+m,v=Math.round(g),y=o*p+f,x=Math.round(y),b=(a+l)*d+m,w=Math.abs(Math.round(b)-v)||1,j=(o+c)*p+f,N=Math.abs(Math.round(j)-x)||1;return e.setTransform(Math.sign(d),0,0,Math.sign(p),v,x),e.drawImage(t,n,r,i,s,0,0,w,N),e.setTransform(d,u,h,p,m,f),[w,N]}if(0===d&&0===p){const g=o*h+m,v=Math.round(g),y=a*u+f,x=Math.round(y),b=(o+c)*h+m,w=Math.abs(Math.round(b)-v)||1,j=(a+l)*u+f,N=Math.abs(Math.round(j)-x)||1;return e.setTransform(0,Math.sign(u),Math.sign(h),0,v,x),e.drawImage(t,n,r,i,s,0,0,N,w),e.setTransform(d,u,h,p,m,f),[N,w]}e.drawImage(t,n,r,i,s,a,o,l,c);return[Math.hypot(d,u)*l,Math.hypot(h,p)*c]}class DK{constructor(e,t,n){(0,ol.A)(this,"alphaIsShape",!1),(0,ol.A)(this,"fontSize",0),(0,ol.A)(this,"fontSizeScale",1),(0,ol.A)(this,"textMatrix",null),(0,ol.A)(this,"textMatrixScale",1),(0,ol.A)(this,"fontMatrix",NB),(0,ol.A)(this,"leading",0),(0,ol.A)(this,"x",0),(0,ol.A)(this,"y",0),(0,ol.A)(this,"lineX",0),(0,ol.A)(this,"lineY",0),(0,ol.A)(this,"charSpacing",0),(0,ol.A)(this,"wordSpacing",0),(0,ol.A)(this,"textHScale",1),(0,ol.A)(this,"textRenderingMode",LB),(0,ol.A)(this,"textRise",0),(0,ol.A)(this,"fillColor","#000000"),(0,ol.A)(this,"strokeColor","#000000"),(0,ol.A)(this,"patternFill",!1),(0,ol.A)(this,"patternStroke",!1),(0,ol.A)(this,"fillAlpha",1),(0,ol.A)(this,"strokeAlpha",1),(0,ol.A)(this,"lineWidth",1),(0,ol.A)(this,"activeSMask",null),(0,ol.A)(this,"transferMaps","none"),null===n||void 0===n||n(this),this.clipBox=new Float32Array([0,0,e,t]),this.minMax=PK.slice()}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e.minMax=this.minMax.slice(),e}getPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pK,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=this.minMax.slice();if(e===mK){t||oz("Stroke bounding box must include transform."),Nz.singularValueDecompose2dScale(t,EK);const e=EK[0]*this.lineWidth/2,r=EK[1]*this.lineWidth/2;n[0]-=e,n[1]-=r,n[2]+=e,n[3]+=r}return n}updateClipFromPath(){const e=Nz.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(e){this.clipBox.set(e,0),this.minMax.set(PK,0)}getClippedPathBoundingBox(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pK,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return Nz.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function OK(e,t){if(t instanceof ImageData)return void e.putImageData(t,0,0);const n=t.height,r=t.width,i=n%_K,s=(n-i)/_K,a=0===i?s:s+1,o=e.createImageData(r,_K);let l,c=0;const d=t.data,u=o.data;let h,p,m,f;if(t.kind===VB.GRAYSCALE_1BPP){const t=d.byteLength,n=new Uint32Array(u.buffer,0,u.byteLength>>2),f=n.length,g=r+7>>3,v=4294967295,y=wz.isLittleEndian?4278190080:255;for(h=0;h<a;h++){for(m=h<s?_K:i,l=0,p=0;p<m;p++){const e=t-c;let i=0;const s=e>g?r:8*e-7,a=-8&s;let o=0,u=0;for(;i<a;i+=8)u=d[c++],n[l++]=128&u?v:y,n[l++]=64&u?v:y,n[l++]=32&u?v:y,n[l++]=16&u?v:y,n[l++]=8&u?v:y,n[l++]=4&u?v:y,n[l++]=2&u?v:y,n[l++]=1&u?v:y;for(;i<s;i++)0===o&&(u=d[c++],o=128),n[l++]=u&o?v:y,o>>=1}for(;l<f;)n[l++]=0;e.putImageData(o,0,h*_K)}}else if(t.kind===VB.RGBA_32BPP){for(p=0,f=r*_K*4,h=0;h<s;h++)u.set(d.subarray(c,c+f)),c+=f,e.putImageData(o,0,p),p+=_K;h<a&&(f=r*i*4,u.set(d.subarray(c,c+f)),e.putImageData(o,0,p))}else{if(t.kind!==VB.RGB_24BPP)throw new Error("bad image kind: ".concat(t.kind));for(m=_K,f=r*m,h=0;h<a;h++){for(h>=s&&(m=i,f=r*m),l=0,p=f;p--;)u[l++]=d[c++],u[l++]=d[c++],u[l++]=d[c++],u[l++]=255;e.putImageData(o,0,h*_K)}}}function RK(e,t){if(t.bitmap)return void e.drawImage(t.bitmap,0,0);const n=t.height,r=t.width,i=n%_K,s=(n-i)/_K,a=0===i?s:s+1,o=e.createImageData(r,_K);let l=0;const c=t.data,d=o.data;for(let u=0;u<a;u++){const t=u<s?_K:i;({srcPos:l}=SK({src:c,srcPos:l,dest:d,width:r,height:t,nonBlackColor:0})),e.putImageData(o,0,u*_K)}}function IK(e,t){const n=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const r of n)void 0!==e[r]&&(t[r]=e[r]);void 0!==e.setLineDash&&(t.setLineDash(e.getLineDash()),t.lineDashOffset=e.lineDashOffset)}function LK(e){e.strokeStyle=e.fillStyle="#000000",e.fillRule="nonzero",e.globalAlpha=1,e.lineWidth=1,e.lineCap="butt",e.lineJoin="miter",e.miterLimit=10,e.globalCompositeOperation="source-over",e.font="10px sans-serif",void 0!==e.setLineDash&&(e.setLineDash([]),e.lineDashOffset=0);const{filter:t}=e;"none"!==t&&""!==t&&(e.filter="none")}function FK(e,t){if(t)return!0;Nz.singularValueDecompose2dScale(e,EK);const n=Math.fround($z.pixelRatio*Rz.PDF_TO_CSS_UNITS);return EK[0]<=n&&EK[1]<=n}const BK=["butt","round","square"],zK=["miter","round","bevel"],WK={},UK={};var VK=new WeakSet;class HK{constructor(e,t,n,r,i,s,a,o,l){let{optionalContentConfig:c,markedContentStack:d=null}=s;$F(this,VK),this.ctx=e,this.current=new DK(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=i,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=d||[],this.optionalContentConfig=c,this.cachedCanvases=new TK(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=a,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=o,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map,this.dependencyTracker=null!==l&&void 0!==l?l:null}getObject(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;var r;return"string"===typeof t?(null===(r=this.dependencyTracker)||void 0===r||r.recordNamedDependency(e,t),t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t)):n}beginDrawing(e){let{transform:t,viewport:n,transparency:r=!1,background:i=null}=e;const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,r){const e=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=e.canvas,this.ctx=e.context,this.ctx.save(),this.ctx.transform(...Yz(this.compositeCtx))}this.ctx.save(),LK(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...n.transform),this.viewportScale=n.scale,this.baseTransform=Yz(this.ctx)}executeOperatorList(e,t,n,r,i){const s=e.argsArray,a=e.fnArray;let o=t||0;const l=s.length;if(l===o)return o;const c=l-o>10&&"function"===typeof n,d=c?Date.now()+15:0;let u=0;const h=this.commonObjs,p=this.objs;let m,f;for(;;){if(void 0!==r&&o===r.nextBreakPoint)return r.breakIt(o,n),o;var g;if(!i||i(o))if(m=a[o],f=null!==(g=s[o])&&void 0!==g?g:null,m!==$B.dependency)null===f?this[m](o):this[m](o,...f);else for(const e of f){var v;null===(v=this.dependencyTracker)||void 0===v||v.recordNamedData(e,o);const t=e.startsWith("g_")?h:p;if(!t.has(e))return t.get(e,n),o}if(o++,o===l)return o;if(c&&++u>10){if(Date.now()>d)return n(),o;u=0}}}endDrawing(){ZF(VK,this,qK).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())"undefined"!==typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),ZF(VK,this,GK).call(this)}_scaleImage(e,t){var n,r;const i=null!==(n=e.width)&&void 0!==n?n:e.displayWidth,s=null!==(r=e.height)&&void 0!==r?r:e.displayHeight;let a,o,l=Math.max(Math.hypot(t[0],t[1]),1),c=Math.max(Math.hypot(t[2],t[3]),1),d=i,u=s,h="prescale1";for(;l>2&&d>1||c>2&&u>1;){let t=d,n=u;l>2&&d>1&&(t=d>=16384?Math.floor(d/2)-1||1:Math.ceil(d/2),l/=d/t),c>2&&u>1&&(n=u>=16384?Math.floor(u/2)-1||1:Math.ceil(u)/2,c/=u/n),a=this.cachedCanvases.getCanvas(h,t,n),o=a.context,o.clearRect(0,0,t,n),o.drawImage(e,0,0,d,u,0,0,t,n),e=a.canvas,d=t,u=n,h="prescale1"===h?"prescale2":"prescale1"}return{img:e,paintWidth:d,paintHeight:u}}_createMaskCanvas(e,t){var n;const r=this.ctx,{width:i,height:s}=t,a=this.current.fillColor,o=this.current.patternFill,l=Yz(r);let c,d,u,h;if((t.bitmap||t.data)&&t.count>1){const n=t.bitmap||t.data.buffer;d=JSON.stringify(o?l:[l.slice(0,4),a]),c=this._cachedBitmapsMap.get(n),c||(c=new Map,this._cachedBitmapsMap.set(n,c));const r=c.get(d);if(r&&!o){var p;const t=Math.round(Math.min(l[0],l[2])+l[4]),n=Math.round(Math.min(l[1],l[3])+l[5]);return null===(p=this.dependencyTracker)||void 0===p||p.recordDependencies(e,hK),{canvas:r,offsetX:t,offsetY:n}}u=r}u||(h=this.cachedCanvases.getCanvas("maskCanvas",i,s),RK(h.context,t));let m=Nz.transform(l,[1/i,0,0,-1/s,0,0]);m=Nz.transform(m,[1,0,0,1,0,-s]);const f=PK.slice();Nz.axialAlignedBoundingBox([0,0,i,s],m,f);const[g,v,y,x]=f,b=Math.round(y-g)||1,w=Math.round(x-v)||1,j=this.cachedCanvases.getCanvas("fillCanvas",b,w),N=j.context,k=g,A=v;N.translate(-k,-A),N.transform(...m),u||(u=this._scaleImage(h.canvas,Xz(N)),u=u.img,c&&o&&c.set(d,u)),N.imageSmoothingEnabled=FK(Yz(N),t.interpolate),MK(N,u,0,0,u.width,u.height,0,0,i,s),N.globalCompositeOperation="source-in";const S=Nz.transform(Xz(N),[1,0,0,1,-k,-A]);return N.fillStyle=o?a.getPattern(r,this,S,pK,e):a,N.fillRect(0,0,i,s),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(d,j.canvas)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,hK),{canvas:j.canvas,offsetX:Math.round(k),offsetY:Math.round(A)}}setLineWidth(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineWidth",e),t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineCap",e),this.ctx.lineCap=BK[t]}setLineJoin(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("lineJoin",e),this.ctx.lineJoin=zK[t]}setMiterLimit(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("miterLimit",e),this.ctx.miterLimit=t}setDash(e,t,n){var r;null===(r=this.dependencyTracker)||void 0===r||r.recordSimpleData("dash",e);const i=this.ctx;void 0!==i.setLineDash&&(i.setLineDash(t),i.lineDashOffset=n)}setRenderingIntent(e,t){}setFlatness(e,t){}setGState(e,t){var n,r,i,s,a;for(const[o,l]of t)switch(o){case"LW":this.setLineWidth(e,l);break;case"LC":this.setLineCap(e,l);break;case"LJ":this.setLineJoin(e,l);break;case"ML":this.setMiterLimit(e,l);break;case"D":this.setDash(e,l[0],l[1]);break;case"RI":this.setRenderingIntent(e,l);break;case"FL":this.setFlatness(e,l);break;case"Font":this.setFont(e,l[0],l[1]);break;case"CA":null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeAlpha",e),this.current.strokeAlpha=l;break;case"ca":null===(r=this.dependencyTracker)||void 0===r||r.recordSimpleData("fillAlpha",e),this.ctx.globalAlpha=this.current.fillAlpha=l;break;case"BM":null===(i=this.dependencyTracker)||void 0===i||i.recordSimpleData("globalCompositeOperation",e),this.ctx.globalCompositeOperation=l;break;case"SMask":null===(s=this.dependencyTracker)||void 0===s||s.recordSimpleData("SMask",e),this.current.activeSMask=l?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":null===(a=this.dependencyTracker)||void 0===a||a.recordSimpleData("filter",e),this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(l)}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(e){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,n=this.ctx.canvas.height,r="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(r,t,n);this.suspendedCtx=this.ctx;const s=this.ctx=i.context;s.setTransform(this.suspendedCtx.getTransform()),IK(this.suspendedCtx,s),function(e,t){if(e._removeMirroring)throw new Error("Context is already forwarding operations.");e.__originalSave=e.save,e.__originalRestore=e.restore,e.__originalRotate=e.rotate,e.__originalScale=e.scale,e.__originalTranslate=e.translate,e.__originalTransform=e.transform,e.__originalSetTransform=e.setTransform,e.__originalResetTransform=e.resetTransform,e.__originalClip=e.clip,e.__originalMoveTo=e.moveTo,e.__originalLineTo=e.lineTo,e.__originalBezierCurveTo=e.bezierCurveTo,e.__originalRect=e.rect,e.__originalClosePath=e.closePath,e.__originalBeginPath=e.beginPath,e._removeMirroring=()=>{e.save=e.__originalSave,e.restore=e.__originalRestore,e.rotate=e.__originalRotate,e.scale=e.__originalScale,e.translate=e.__originalTranslate,e.transform=e.__originalTransform,e.setTransform=e.__originalSetTransform,e.resetTransform=e.__originalResetTransform,e.clip=e.__originalClip,e.moveTo=e.__originalMoveTo,e.lineTo=e.__originalLineTo,e.bezierCurveTo=e.__originalBezierCurveTo,e.rect=e.__originalRect,e.closePath=e.__originalClosePath,e.beginPath=e.__originalBeginPath,delete e._removeMirroring},e.save=function(){t.save(),this.__originalSave()},e.restore=function(){t.restore(),this.__originalRestore()},e.translate=function(e,n){t.translate(e,n),this.__originalTranslate(e,n)},e.scale=function(e,n){t.scale(e,n),this.__originalScale(e,n)},e.transform=function(e,n,r,i,s,a){t.transform(e,n,r,i,s,a),this.__originalTransform(e,n,r,i,s,a)},e.setTransform=function(e,n,r,i,s,a){t.setTransform(e,n,r,i,s,a),this.__originalSetTransform(e,n,r,i,s,a)},e.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},e.rotate=function(e){t.rotate(e),this.__originalRotate(e)},e.clip=function(e){t.clip(e),this.__originalClip(e)},e.moveTo=function(e,n){t.moveTo(e,n),this.__originalMoveTo(e,n)},e.lineTo=function(e,n){t.lineTo(e,n),this.__originalLineTo(e,n)},e.bezierCurveTo=function(e,n,r,i,s,a){t.bezierCurveTo(e,n,r,i,s,a),this.__originalBezierCurveTo(e,n,r,i,s,a)},e.rect=function(e,n,r,i){t.rect(e,n,r,i),this.__originalRect(e,n,r,i)},e.closePath=function(){t.closePath(),this.__originalClosePath()},e.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}(s,this.suspendedCtx),this.setGState(e,[["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),IK(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const i=r[0],s=r[1],a=r[2]-i,o=r[3]-s;0!==a&&0!==o&&(this.genericComposeSMask(t.context,n,a,o,t.subtype,t.backdrop,t.transferMap,i,s,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,i,s,a,o,l,c,d){let u=e.canvas,h=o-c,p=l-d;if(s)if(h<0||p<0||h+n>u.width||p+r>u.height){const e=this.cachedCanvases.getCanvas("maskExtension",n,r),t=e.context;t.drawImage(u,-h,-p),t.globalCompositeOperation="destination-atop",t.fillStyle=s,t.fillRect(0,0,n,r),t.globalCompositeOperation="source-over",u=e.canvas,h=p=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const t=new Path2D;t.rect(h,p,n,r),e.clip(t),e.globalCompositeOperation="destination-atop",e.fillStyle=s,e.fillRect(h,p,n,r),e.restore()}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),"Alpha"===i&&a?t.filter=this.filterFactory.addAlphaFilter(a):"Luminosity"===i&&(t.filter=this.filterFactory.addLuminosityFilter(a));const m=new Path2D;m.rect(o,l,n,r),t.clip(m),t.globalCompositeOperation="destination-in",t.drawImage(u,h,p,n,r,o,l,n,r),t.restore()}save(e){var t;this.inSMaskMode&&IK(this.ctx,this.suspendedCtx),this.ctx.save();const n=this.current;this.stateStack.push(n),this.current=n.clone(),null===(t=this.dependencyTracker)||void 0===t||t.save(e)}restore(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.restore(e),0!==this.stateStack.length?(this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&IK(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null):this.inSMaskMode&&this.endSMaskMode()}transform(e,t,n,r,i,s,a){var o;null===(o=this.dependencyTracker)||void 0===o||o.recordIncrementalData("transform",e),this.ctx.transform(t,n,r,i,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n,r){let[i]=n;if(!r)return i||(i=n[0]=new Path2D),void this[t](e,i);if(null!==this.dependencyTracker){const n=t===$B.stroke?this.current.lineWidth/2:0;this.dependencyTracker.resetBBox(e).recordBBox(e,this.ctx,r[0]-n,r[2]+n,r[1]-n,r[3]+n).recordDependencies(e,["transform"])}if(!(i instanceof Path2D)){const e=n[0]=new Path2D;for(let t=0,n=i.length;t<n;)switch(i[t++]){case QB:e.moveTo(i[t++],i[t++]);break;case ZB:e.lineTo(i[t++],i[t++]);break;case ez:e.bezierCurveTo(i[t++],i[t++],i[t++],i[t++],i[t++],i[t++]);break;case tz:e.closePath();break;default:az("Unrecognized drawing path operator: ".concat(i[t-1]))}i=e}Nz.axialAlignedBoundingBox(r,Yz(this.ctx),this.current.minMax),this[t](e,i),this._pathStartIdx=e}closePath(e){this.ctx.closePath()}stroke(e,t){var n;let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this.ctx,s=this.current.strokeColor;if(i.globalAlpha=this.current.strokeAlpha,this.contentVisible)if("object"===typeof s&&null!==s&&void 0!==s&&s.getPattern){const n=s.isModifyingCurrentTransform()?i.getTransform():null;if(i.save(),i.strokeStyle=s.getPattern(i,this,Xz(i),mK,e),n){const e=new Path2D;e.addPath(t,i.getTransform().invertSelf().multiplySelf(n)),t=e}this.rescaleAndStroke(t,!1),i.restore()}else this.rescaleAndStroke(t,!0);null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,aK),r&&this.consumePath(e,t,this.current.getClippedPathBoundingBox(mK,Yz(this.ctx))),i.globalAlpha=this.current.fillAlpha}closeStroke(e,t){this.stroke(e,t)}fill(e,t){var n;let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const i=this.ctx,s=this.current.fillColor;let a=!1;if(this.current.patternFill){var o;const n=s.isModifyingCurrentTransform()?i.getTransform():null;if(null===(o=this.dependencyTracker)||void 0===o||o.save(e),i.save(),i.fillStyle=s.getPattern(i,this,Xz(i),pK,e),n){const e=new Path2D;e.addPath(t,i.getTransform().invertSelf().multiplySelf(n)),t=e}a=!0}const l=this.current.getClippedPathBoundingBox();var c;(this.contentVisible&&null!==l&&(this.pendingEOFill?(i.fill(t,"evenodd"),this.pendingEOFill=!1):i.fill(t)),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,oK),a)&&(i.restore(),null===(c=this.dependencyTracker)||void 0===c||c.restore(e));r&&this.consumePath(e,t,l)}eoFill(e,t){this.pendingEOFill=!0,this.fill(e,t)}fillStroke(e,t){this.fill(e,t,!1),this.stroke(e,t,!1),this.consumePath(e,t)}eoFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}closeFillStroke(e,t){this.fillStroke(e,t)}closeEOFillStroke(e,t){this.pendingEOFill=!0,this.fillStroke(e,t)}endPath(e,t){this.consumePath(e,t)}rawFillPath(e,t){var n;this.ctx.fill(t),null===(n=this.dependencyTracker)||void 0===n||n.recordDependencies(e,cK).recordOperation(e)}clip(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=WK}eoClip(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordFutureForcedDependency("clipMode",e),this.pendingClip=UK}beginText(e){var t;this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0,null===(t=this.dependencyTracker)||void 0===t||t.recordOpenMarker(e).resetIncrementalData("sameLineText").resetIncrementalData("moveText",e)}endText(e){const t=this.pendingTextPaths,n=this.ctx;if(this.dependencyTracker){const{dependencyTracker:n}=this;void 0!==t&&n.recordFutureForcedDependency("textClip",n.getOpenMarker()).recordFutureForcedDependency("textClip",e),n.recordCloseMarker(e)}if(void 0!==t){const e=new Path2D,r=n.getTransform().invertSelf();for(const{transform:n,x:i,y:s,fontSize:a,path:o}of t)o&&e.addPath(o,new DOMMatrix(n).preMultiplySelf(r).translate(i,s).scale(a,-a));n.clip(e)}delete this.pendingTextPaths}setCharSpacing(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("charSpacing",e),this.current.charSpacing=t}setWordSpacing(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("wordSpacing",e),this.current.wordSpacing=t}setHScale(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("hScale",e),this.current.textHScale=t/100}setLeading(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("leading",e),this.current.leading=-t}setFont(e,t,n){var r,i;null===(r=this.dependencyTracker)||void 0===r||r.recordSimpleData("font",e).recordSimpleDataFromNamed("fontObj",t,e);const s=this.commonObjs.get(t),a=this.current;if(!s)throw new Error("Can't find font for ".concat(t));if(a.fontMatrix=s.fontMatrix||NB,0!==a.fontMatrix[0]&&0!==a.fontMatrix[3]||az("Invalid font matrix for font "+t),n<0?(n=-n,a.fontDirection=-1):a.fontDirection=1,this.current.font=s,this.current.fontSize=n,s.isType3Font)return;const o=s.loadedName||"sans-serif",l=(null===(i=s.systemFontInfo)||void 0===i?void 0:i.css)||'"'.concat(o,'", ').concat(s.fallbackName);let c="normal";s.black?c="900":s.bold&&(c="bold");const d=s.italic?"italic":"normal";let u=n;n<16?u=16:n>100&&(u=100),this.current.fontSizeScale=n/u,this.ctx.font="".concat(d," ").concat(c," ").concat(u,"px ").concat(l)}setTextRenderingMode(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRenderingMode",e),this.current.textRenderingMode=t}setTextRise(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textRise",e),this.current.textRise=t}moveText(e,t,n){var r;null===(r=this.dependencyTracker)||void 0===r||r.resetIncrementalData("sameLineText").recordIncrementalData("moveText",e),this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=n}setLeadingMoveText(e,t,n){this.setLeading(e,-n),this.moveText(e,t,n)}setTextMatrix(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("textMatrix",e);const{current:r}=this;r.textMatrix=t,r.textMatrixScale=Math.hypot(t[0],t[1]),r.x=r.lineX=0,r.y=r.lineY=0}nextLine(e){var t,n;this.moveText(e,0,this.current.leading),null===(t=this.dependencyTracker)||void 0===t||t.recordIncrementalData("moveText",null!==(n=this.dependencyTracker.getSimpleIndex("leading"))&&void 0!==n?n:e)}paintChar(e,t,n,r,i,s){const a=this.ctx,o=this.current,l=o.font,c=o.textRenderingMode,d=o.fontSize/o.fontSizeScale,u=c&WB,h=!!(c&UB),p=o.patternFill&&!l.missingFile,m=o.patternStroke&&!l.missingFile;let f;if((l.disableFontFace||h||p||m)&&!l.missingFile&&(f=l.getPathGenerator(this.commonObjs,t)),f&&(l.disableFontFace||p||m)){var g;let t;if(a.save(),a.translate(n,r),a.scale(d,-d),null===(g=this.dependencyTracker)||void 0===g||g.recordCharacterBBox(e,a,l),u===LB||u===BB)if(i){t=a.getTransform(),a.setTransform(...i);const e=ZF(VK,this,KK).call(this,f,t,i);a.fill(e)}else a.fill(f);if(u===FB||u===BB)if(s){t||(t=a.getTransform()),a.setTransform(...s);const{a:e,b:n,c:r,d:i}=t,o=Nz.inverseTransform(s),l=Nz.transform([e,n,r,i,0,0],o);Nz.singularValueDecompose2dScale(l,EK),a.lineWidth*=Math.max(EK[0],EK[1])/d,a.stroke(ZF(VK,this,KK).call(this,f,t,s))}else a.lineWidth/=d,a.stroke(f);a.restore()}else{var v;if(u===LB||u===BB)a.fillText(t,n,r),null===(v=this.dependencyTracker)||void 0===v||v.recordCharacterBBox(e,a,l,d,n,r,()=>a.measureText(t));if(u===FB||u===BB){var y;if(this.dependencyTracker)null===(y=this.dependencyTracker)||void 0===y||y.recordCharacterBBox(e,a,l,d,n,r,()=>a.measureText(t)).recordDependencies(e,aK);a.strokeText(t,n,r)}}if(h){var x;(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Yz(a),x:n,y:r,fontSize:d,path:f}),null===(x=this.dependencyTracker)||void 0===x||x.recordCharacterBBox(e,a,l,d,n,r)}}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return uz(this,"isFontSubpixelAAEnabled",n)}showText(e,t){var n;this.dependencyTracker&&(this.dependencyTracker.recordDependencies(e,dK).resetBBox(e),this.current.textRenderingMode&UB&&this.dependencyTracker.recordFutureForcedDependency("textClip",e).inheritPendingDependenciesAsFutureForcedDependencies());const r=this.current,i=r.font;var s;if(i.isType3Font)return this.showType3Text(e,t),void(null===(s=this.dependencyTracker)||void 0===s||s.recordShowTextOperation(e));const a=r.fontSize;var o;if(0===a)return void(null===(o=this.dependencyTracker)||void 0===o||o.recordOperation(e));const l=this.ctx,c=r.fontSizeScale,d=r.charSpacing,u=r.wordSpacing,h=r.fontDirection,p=r.textHScale*h,m=t.length,f=i.vertical,g=f?1:-1,v=i.defaultVMetrics,y=a*r.fontMatrix[0],x=r.textRenderingMode===LB&&!i.disableFontFace&&!r.patternFill;let b,w;if(l.save(),r.textMatrix&&l.transform(...r.textMatrix),l.translate(r.x,r.y+r.textRise),h>0?l.scale(p,-1):l.scale(p,1),r.patternFill){l.save();const t=r.fillColor.getPattern(l,this,Xz(l),pK,e);b=Yz(l),l.restore(),l.fillStyle=t}if(r.patternStroke){l.save();const t=r.strokeColor.getPattern(l,this,Xz(l),mK,e);w=Yz(l),l.restore(),l.strokeStyle=t}let j=r.lineWidth;const N=r.textMatrixScale;if(0===N||0===j){const e=r.textRenderingMode&WB;e!==FB&&e!==BB||(j=this.getSinglePixelWidth())}else j/=N;if(1!==c&&(l.scale(c,c),j/=c),l.lineWidth=j,i.isInvalidPDFjsFont){const n=[];let i=0;for(const e of t)n.push(e.unicode),i+=e.width;const s=n.join("");if(l.fillText(s,0,0),null!==this.dependencyTracker){const t=l.measureText(s);this.dependencyTracker.recordBBox(e,this.ctx,-t.actualBoundingBoxLeft,t.actualBoundingBoxRight,-t.actualBoundingBoxAscent,t.actualBoundingBoxDescent).recordShowTextOperation(e)}return r.x+=i*y*p,l.restore(),void this.compose()}let k,A=0;for(k=0;k<m;++k){const n=t[k];if("number"===typeof n){A+=g*n*a/1e3;continue}let r=!1;const s=(n.isSpace?u:0)+d,o=n.fontChar,p=n.accent;let m,j,N,_=n.width;if(f){const e=n.vmetric||v,t=-(n.vmetric?e[1]:.5*_)*y,r=e[2]*y;_=e?-e[0]:_,m=t/c,j=(A+r)/c}else m=A/c,j=0;if(i.remeasure&&_>0){N=l.measureText(o);const e=1e3*N.width/a*c;if(_<e&&this.isFontSubpixelAAEnabled){const t=_/e;r=!0,l.save(),l.scale(t,1),m/=t}else _!==e&&(m+=(_-e)/2e3*a/c)}var S;if(this.contentVisible&&(n.isInFont||i.missingFile))if(x&&!p)l.fillText(o,m,j),null===(S=this.dependencyTracker)||void 0===S||S.recordCharacterBBox(e,l,N?{bbox:null}:i,a/c,m,j,()=>null!==N&&void 0!==N?N:l.measureText(o));else if(this.paintChar(e,o,m,j,b,w),p){const t=m+a*p.offset.x/c,n=j-a*p.offset.y/c;this.paintChar(e,p.fontChar,t,n,b,w)}A+=f?_*y-s*h:_*y+s*h,r&&l.restore()}f?r.y-=A:r.x+=A*p,l.restore(),this.compose(),null===(n=this.dependencyTracker)||void 0===n||n.recordShowTextOperation(e)}showType3Text(e,t){const n=this.ctx,r=this.current,i=r.font,s=r.fontSize,a=r.fontDirection,o=i.vertical?1:-1,l=r.charSpacing,c=r.wordSpacing,d=r.textHScale*a,u=r.fontMatrix||NB,h=t.length;let p,m,f,g;if(r.textRenderingMode===zB||0===s)return;this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,n.save(),r.textMatrix&&n.transform(...r.textMatrix),n.translate(r.x,r.y+r.textRise),n.scale(d,a);const v=this.dependencyTracker;for(this.dependencyTracker=v?new sK(v,e):null,p=0;p<h;++p){if(m=t[p],"number"===typeof m){g=o*m*s/1e3,this.ctx.translate(g,0),r.x+=g*d;continue}const e=(m.isSpace?c:0)+l,a=i.charProcOperatorList[m.operatorListId];a?this.contentVisible&&(this.save(),n.scale(s,s),n.transform(...u),this.executeOperatorList(a),this.restore()):az('Type3 character "'.concat(m.operatorListId,'" is not available.'));const h=[m.width,0];Nz.applyTransform(h,u),f=h[0]*s+e,n.translate(f,0),r.x+=f*d}n.restore(),v&&(this.dependencyTracker=v)}setCharWidth(e,t,n){}setCharWidthAndBounds(e,t,n,r,i,s,a){var o;const l=new Path2D;l.rect(r,i,s-r,a-i),this.ctx.clip(l),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,this.ctx,r,s,i,a).recordClipBox(e,this.ctx,r,s,i,a),this.endPath(e)}getColorN_Pattern(e,t){let n;if("TilingPattern"===t[0]){const e=this.baseTransform||Yz(this.ctx),r={createCanvasGraphics:(e,t)=>new HK(e,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack},void 0,void 0,this.dependencyTracker?new sK(this.dependencyTracker,t,!0):null)};n=new AK(t,this.ctx,r,e)}else n=this._getPattern(e,t[1],t[2]);return n}setStrokeColorN(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("strokeColor",e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.current.strokeColor=this.getColorN_Pattern(e,r),this.current.patternStroke=!0}setFillColorN(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("fillColor",e);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];this.current.fillColor=this.getColorN_Pattern(e,r),this.current.patternFill=!0}setStrokeRGBColor(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("strokeColor",e),this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.recordSimpleData("fillColor",e),this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this.cachedPatterns.has(t)?n=this.cachedPatterns.get(t):(n=function(e){switch(e[0]){case"RadialAxial":return new yK(e);case"Mesh":return new wK(e);case"Dummy":return new jK}throw new Error("Unknown IR type: ".concat(e[0]))}(this.getObject(e,t)),this.cachedPatterns.set(t,n)),r&&(n.matrix=r),n}shadingFill(e,t){var n;if(!this.contentVisible)return;const r=this.ctx;this.save(e);const i=this._getPattern(e,t);r.fillStyle=i.getPattern(r,this,Xz(r),fK,e);const s=Xz(r);if(s){const{width:e,height:t}=r.canvas,n=PK.slice();Nz.axialAlignedBoundingBox([0,0,e,t],s,n);const[i,a,o,l]=n;this.ctx.fillRect(i,a,o-i,l-a)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordFullPageBBox(e).recordDependencies(e,uK).recordDependencies(e,oK).recordOperation(e),this.compose(this.current.getClippedPathBoundingBox()),this.restore(e)}beginInlineImage(){oz("Should not call beginInlineImage")}beginImageData(){oz("Should not call beginImageData")}paintFormXObjectBegin(e,t,n){if(this.contentVisible&&(this.save(e),this.baseTransformStack.push(this.baseTransform),t&&this.transform(e,...t),this.baseTransform=Yz(this.ctx),n)){var r;Nz.axialAlignedBoundingBox(n,this.baseTransform,this.current.minMax);const[t,i,s,a]=n,o=new Path2D;o.rect(t,i,s-t,a-i),this.ctx.clip(o),null===(r=this.dependencyTracker)||void 0===r||r.recordClipBox(e,this.ctx,t,s,i,a),this.endPath(e)}}paintFormXObjectEnd(e){this.contentVisible&&(this.restore(e),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e,t){var n;if(!this.contentVisible)return;this.save(e),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const r=this.ctx;t.isolated||sz("TODO: Support non-isolated groups."),t.knockout&&az("Knockout groups not supported.");const i=Yz(r);if(t.matrix&&r.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let s=PK.slice();Nz.axialAlignedBoundingBox(t.bbox,Yz(r),s);const a=[0,0,r.canvas.width,r.canvas.height];s=Nz.intersect(s,a)||[0,0,0,0];const o=Math.floor(s[0]),l=Math.floor(s[1]),c=Math.max(Math.ceil(s[2])-o,1),d=Math.max(Math.ceil(s[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,d]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(u,c,d),p=h.context;p.translate(-o,-l),p.transform(...i);let m=new Path2D;const[f,g,v,y]=t.bbox;if(m.rect(f,g,v-f,y-g),t.matrix){const e=new Path2D;e.addPath(m,new DOMMatrix(t.matrix)),m=e}p.clip(m),t.smask&&this.smaskStack.push({canvas:h.canvas,context:p,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}),t.smask&&!this.dependencyTracker||(r.setTransform(1,0,0,1,0,0),r.translate(o,l),r.save()),IK(r,p),this.ctx=p,null===(n=this.dependencyTracker)||void 0===n||n.inheritSimpleDataAsFutureForcedDependencies(["fillAlpha","strokeAlpha","globalCompositeOperation"]).pushBaseTransform(r),this.setGState(e,[["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(r),this.groupLevel++}endGroup(e,t){var n;if(!this.contentVisible)return;this.groupLevel--;const r=this.ctx,i=this.groupStack.pop();if(this.ctx=i,this.ctx.imageSmoothingEnabled=!1,null===(n=this.dependencyTracker)||void 0===n||n.popBaseTransform(),t.smask)this.tempSMask=this.smaskStack.pop(),this.restore(e),this.dependencyTracker&&this.ctx.restore();else{this.ctx.restore();const t=Yz(this.ctx);this.restore(e),this.ctx.save(),this.ctx.setTransform(...t);const n=PK.slice();Nz.axialAlignedBoundingBox([0,0,r.canvas.width,r.canvas.height],t,n),this.ctx.drawImage(r.canvas,0,0),this.ctx.restore(),this.compose(n)}}beginAnnotation(e,t,n,r,i,s){if(ZF(VK,this,qK).call(this),LK(this.ctx),this.ctx.save(),this.save(e),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),n){const i=n[2]-n[0],a=n[3]-n[1];if(s&&this.annotationCanvasMap){(r=r.slice())[4]-=n[0],r[5]-=n[1],(n=n.slice())[0]=n[1]=0,n[2]=i,n[3]=a,Nz.singularValueDecompose2dScale(Yz(this.ctx),EK);const{viewportScale:e}=this,s=Math.ceil(i*this.outputScaleX*e),o=Math.ceil(a*this.outputScaleY*e);this.annotationCanvas=this.canvasFactory.create(s,o);const{canvas:l,context:c}=this.annotationCanvas;this.annotationCanvasMap.set(t,l),this.annotationCanvas.savedCtx=this.ctx,this.ctx=c,this.ctx.save(),this.ctx.setTransform(EK[0],0,0,-EK[1],0,a*EK[1]),LK(this.ctx)}else{LK(this.ctx),this.endPath(e);const t=new Path2D;t.rect(n[0],n[1],i,a),this.ctx.clip(t)}}this.current=new DK(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(e,...r),this.transform(e,...i)}endAnnotation(e){this.annotationCanvas&&(this.ctx.restore(),ZF(VK,this,GK).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e,t){var n;if(!this.contentVisible)return;const r=t.count;(t=this.getObject(e,t.data,t)).count=r;const i=this.ctx,s=this._createMaskCanvas(e,t),a=s.canvas;i.save(),i.setTransform(1,0,0,1,0,0),i.drawImage(a,s.offsetX,s.offsetY),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordBBox(e,this.ctx,s.offsetX,s.offsetX+a.width,s.offsetY,s.offsetY+a.height).recordOperation(e),i.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n){var r,i;let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5?arguments[5]:void 0,l=arguments.length>6?arguments[6]:void 0;if(!this.contentVisible)return;t=this.getObject(e,t.data,t);const c=this.ctx;c.save();const d=Yz(c);c.transform(n,s,a,o,0,0);const u=this._createMaskCanvas(e,t);c.setTransform(1,0,0,1,u.offsetX-d[4],u.offsetY-d[5]),null===(r=this.dependencyTracker)||void 0===r||r.resetBBox(e);for(let p=0,m=l.length;p<m;p+=2){var h;const t=Nz.transform(d,[n,s,a,o,l[p],l[p+1]]);c.drawImage(u.canvas,t[4],t[5]),null===(h=this.dependencyTracker)||void 0===h||h.recordBBox(e,this.ctx,t[4],t[4]+u.canvas.width,t[5],t[5]+u.canvas.height)}c.restore(),this.compose(),null===(i=this.dependencyTracker)||void 0===i||i.recordOperation(e)}paintImageMaskXObjectGroup(e,t){var n,r;if(!this.contentVisible)return;const i=this.ctx,s=this.current.fillColor,a=this.current.patternFill;null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordDependencies(e,hK);for(const l of t){var o;const{data:t,width:n,height:r,transform:c}=l,d=this.cachedCanvases.getCanvas("maskCanvas",n,r),u=d.context;u.save();RK(u,this.getObject(e,t,l)),u.globalCompositeOperation="source-in",u.fillStyle=a?s.getPattern(u,this,Xz(i),pK,e):s,u.fillRect(0,0,n,r),u.restore(),i.save(),i.transform(...c),i.scale(1,-1),MK(i,d.canvas,0,0,n,r,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,i,0,n,0,r),i.restore()}this.compose(),null===(r=this.dependencyTracker)||void 0===r||r.recordOperation(e)}paintImageXObject(e,t){if(!this.contentVisible)return;const n=this.getObject(e,t);n?this.paintInlineImageXObject(e,n):az("Dependent image isn't ready yet")}paintImageXObjectRepeat(e,t,n,r,i){if(!this.contentVisible)return;const s=this.getObject(e,t);if(!s)return void az("Dependent image isn't ready yet");const a=s.width,o=s.height,l=[];for(let c=0,d=i.length;c<d;c+=2)l.push({transform:[n,0,0,r,i[c],i[c+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(e,s,l)}applyTransferMapsToCanvas(e){return"none"!==this.current.transferMaps&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if("none"===this.current.transferMaps)return e.bitmap;const{bitmap:t,width:n,height:r}=e,i=this.cachedCanvases.getCanvas("inlineImage",n,r),s=i.context;return s.filter=this.current.transferMaps,s.drawImage(t,0,0),s.filter="none",i.canvas}paintInlineImageXObject(e,t){var n;if(!this.contentVisible)return;const r=t.width,i=t.height,s=this.ctx;this.save(e);const{filter:a}=s;let o;if("none"!==a&&""!==a&&(s.filter="none"),s.scale(1/r,-1/i),t.bitmap)o=this.applyTransferMapsToBitmap(t);else if("function"===typeof HTMLElement&&t instanceof HTMLElement||!t.data)o=t;else{const e=this.cachedCanvases.getCanvas("inlineImage",r,i).context;OK(e,t),o=this.applyTransferMapsToCanvas(e)}const l=this._scaleImage(o,Xz(s));s.imageSmoothingEnabled=FK(Yz(s),t.interpolate),null===(n=this.dependencyTracker)||void 0===n||n.resetBBox(e).recordBBox(e,s,0,r,-i,0).recordDependencies(e,lK).recordOperation(e),MK(s,l.img,0,0,l.paintWidth,l.paintHeight,0,-i,r,i),this.compose(),this.restore(e)}paintInlineImageXObjectGroup(e,t,n){var r,i;if(!this.contentVisible)return;const s=this.ctx;let a;if(t.bitmap)a=t.bitmap;else{const e=t.width,n=t.height,r=this.cachedCanvases.getCanvas("inlineImage",e,n).context;OK(r,t),a=this.applyTransferMapsToCanvas(r)}null===(r=this.dependencyTracker)||void 0===r||r.resetBBox(e);for(const l of n){var o;s.save(),s.transform(...l.transform),s.scale(1,-1),MK(s,a,l.x,l.y,l.w,l.h,0,-1,1,1),null===(o=this.dependencyTracker)||void 0===o||o.recordBBox(e,s,0,1,-1,0),s.restore()}null===(i=this.dependencyTracker)||void 0===i||i.recordOperation(e),this.compose()}paintSolidColorImageMask(e){var t;this.contentVisible&&(null===(t=this.dependencyTracker)||void 0===t||t.resetBBox(e).recordBBox(e,this.ctx,0,1,0,1).recordDependencies(e,oK).recordOperation(e),this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e,t){}markPointProps(e,t,n){}beginMarkedContent(e,t){var n;null===(n=this.dependencyTracker)||void 0===n||n.beginMarkedContent(e),this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t,n){var r;null===(r=this.dependencyTracker)||void 0===r||r.beginMarkedContent(e),"OC"===t?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(n)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(e){var t;null===(t=this.dependencyTracker)||void 0===t||t.endMarkedContent(e),this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(e){}endCompat(e){}consumePath(e,t,n){const r=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(n);const i=this.ctx;var s,a;this.pendingClip?(r||(this.pendingClip===UK?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null,null===(s=this.dependencyTracker)||void 0===s||s.bboxToClipBoxDropOperation(e).recordFutureForcedDependency("clipPath",e)):null===(a=this.dependencyTracker)||void 0===a||a.recordOperation(e);this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=Yz(this.ctx);if(0===e[1]&&0===e[2])this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(-1===this._cachedScaleForStroking[0]){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:i}=this.ctx.getTransform();let s,a;if(0===n&&0===r){const n=Math.abs(t),r=Math.abs(i);if(n===r)if(0===e)s=a=1/n;else{const t=n*e;s=a=t<1?1/t:1}else if(0===e)s=1/n,a=1/r;else{const t=n*e,i=r*e;s=t<1?1/t:1,a=i<1?1/i:1}}else{const o=Math.abs(t*i-n*r),l=Math.hypot(t,n),c=Math.hypot(r,i);if(0===e)s=c/o,a=l/o;else{const t=e*o;s=c>t?c/t:1,a=l>t?l/t:1}}this._cachedScaleForStroking[0]=s,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(e,t){const{ctx:n,current:{lineWidth:r}}=this,[i,s]=this.getScaleForStroking();if(i===s)return n.lineWidth=(r||1)*i,void n.stroke(e);const a=n.getLineDash();t&&n.save(),n.scale(i,s),CK.a=1/i,CK.d=1/s;const o=new Path2D;if(o.addPath(e,CK),a.length>0){const e=Math.max(i,s);n.setLineDash(a.map(t=>t/e)),n.lineDashOffset/=e}n.lineWidth=r||1,n.stroke(o),t&&n.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}}function qK(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)}function GK(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if("none"!==e){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}}function KK(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r}for(const n in $B)void 0!==HK.prototype[n]&&(HK.prototype[$B[n]]=HK.prototype[n]);var YK=new WeakMap,XK=new WeakMap,JK=new WeakMap,$K=new WeakSet;class QK{static write(e){const t=new TextEncoder,n={};let r=0;for(const l of QK.strings){const i=t.encode(e[l]);n[l]=i,r+=4+i.length}const i=new ArrayBuffer(r),s=new Uint8Array(i),a=new DataView(i);let o=0;for(const l of QK.strings){const e=n[l],t=e.length;a.setUint32(o,t),s.set(e,o+4),o+=4+t}return lz(o===i.byteLength,"CssFontInfo.write: Buffer overflow"),i}constructor(e){$F(this,$K),QF(this,YK,void 0),QF(this,XK,void 0),QF(this,JK,void 0),nB(YK,this,e),nB(XK,this,new DataView(tB(YK,this))),nB(JK,this,new TextDecoder)}get fontFamily(){return ZF($K,this,ZK).call(this,0)}get fontWeight(){return ZF($K,this,ZK).call(this,1)}get italicAngle(){return ZF($K,this,ZK).call(this,2)}}function ZK(e){lz(e<lB.strings.length,"Invalid string index");let t=0;for(let r=0;r<e;r++)t+=tB(XK,this).getUint32(t)+4;const n=tB(XK,this).getUint32(t);return tB(JK,this).decode(new Uint8Array(tB(YK,this),t+4,n))}lB=QK,(0,ol.A)(QK,"strings",["fontFamily","fontWeight","italicAngle"]);var eY=new WeakMap,tY=new WeakMap,nY=new WeakMap,rY=new WeakSet;class iY{static write(e){const t=new TextEncoder,n={};let r=0;for(const u of iY.strings){const i=t.encode(e[u]);n[u]=i,r+=4+i.length}r+=4;let i,s,a=1+r;e.style&&(i=t.encode(e.style.style),s=t.encode(e.style.weight),a+=4+i.length+4+s.length);const o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let d=0;c.setUint8(d++,e.guessFallback?1:0),c.setUint32(d,0),d+=4,r=0;for(const u of iY.strings){const e=n[u],t=e.length;r+=4+t,c.setUint32(d,t),l.set(e,d+4),d+=4+t}return c.setUint32(d-r-4,r),e.style&&(c.setUint32(d,i.length),l.set(i,d+4),d+=4+i.length,c.setUint32(d,s.length),l.set(s,d+4),d+=4+s.length),lz(d<=o.byteLength,"SubstitionInfo.write: Buffer overflow"),o.transferToFixedLength(d)}constructor(e){$F(this,rY),QF(this,eY,void 0),QF(this,tY,void 0),QF(this,nY,void 0),nB(eY,this,e),nB(tY,this,new DataView(tB(eY,this))),nB(nY,this,new TextDecoder)}get guessFallback(){return 0!==tB(tY,this).getUint8(0)}get css(){return ZF(rY,this,sY).call(this,0)}get loadedName(){return ZF(rY,this,sY).call(this,1)}get baseFontName(){return ZF(rY,this,sY).call(this,2)}get src(){return ZF(rY,this,sY).call(this,3)}get style(){let e=1;e+=4+tB(tY,this).getUint32(e);const t=tB(tY,this).getUint32(e),n=tB(nY,this).decode(new Uint8Array(tB(eY,this),e+4,t));e+=4+t;const r=tB(tY,this).getUint32(e);return{style:n,weight:tB(nY,this).decode(new Uint8Array(tB(eY,this),e+4,r))}}}function sY(e){lz(e<cB.strings.length,"Invalid string index");let t=5;for(let r=0;r<e;r++)t+=tB(tY,this).getUint32(t)+4;const n=tB(tY,this).getUint32(t);return tB(nY,this).decode(new Uint8Array(tB(eY,this),t+4,n))}cB=iY,(0,ol.A)(iY,"strings",["css","loadedName","baseFontName","src"]);var aY=new WeakMap,oY=new WeakMap,lY=new WeakMap,cY=new WeakSet;class dY{constructor(e){let{data:t,extra:n}=e;$F(this,cY),QF(this,aY,void 0),QF(this,oY,void 0),QF(this,lY,void 0),nB(aY,this,t),nB(oY,this,new TextDecoder),nB(lY,this,new DataView(tB(aY,this))),n&&Object.assign(this,n)}get black(){return ZF(cY,this,uY).call(this,0)}get bold(){return ZF(cY,this,uY).call(this,1)}get disableFontFace(){return ZF(cY,this,uY).call(this,2)}get fontExtraProperties(){return ZF(cY,this,uY).call(this,3)}get isInvalidPDFjsFont(){return ZF(cY,this,uY).call(this,4)}get isType3Font(){return ZF(cY,this,uY).call(this,5)}get italic(){return ZF(cY,this,uY).call(this,6)}get missingFile(){return ZF(cY,this,uY).call(this,7)}get remeasure(){return ZF(cY,this,uY).call(this,8)}get vertical(){return ZF(cY,this,uY).call(this,9)}get ascent(){return ZF(cY,this,hY).call(this,0)}get defaultWidth(){return ZF(cY,this,hY).call(this,1)}get descent(){return ZF(cY,this,hY).call(this,2)}get bbox(){let e=fY._;if(0===tB(lY,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<4;n++)t.push(tB(lY,this).getInt16(e,!0)),e+=2;return t}get fontMatrix(){let e=gY._;if(0===tB(lY,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<6;n++)t.push(tB(lY,this).getFloat64(e,!0)),e+=8;return t}get defaultVMetrics(){let e=vY._;if(0===tB(lY,this).getUint8(e))return;e+=1;const t=[];for(let n=0;n<3;n++)t.push(tB(lY,this).getInt16(e,!0)),e+=2;return t}get fallbackName(){return ZF(cY,this,pY).call(this,0)}get loadedName(){return ZF(cY,this,pY).call(this,1)}get mimetype(){return ZF(cY,this,pY).call(this,2)}get name(){return ZF(cY,this,pY).call(this,3)}get data(){let e=yY._;e+=4+tB(lY,this).getUint32(e);e+=4+tB(lY,this).getUint32(e);e+=4+tB(lY,this).getUint32(e);const t=tB(lY,this).getUint32(e);if(0!==t)return new Uint8Array(tB(aY,this),e+4,t)}clearData(){let e=yY._;e+=4+tB(lY,this).getUint32(e);e+=4+tB(lY,this).getUint32(e);e+=4+tB(lY,this).getUint32(e);const t=tB(lY,this).getUint32(e);new Uint8Array(tB(aY,this),e+4,t).fill(0),tB(lY,this).setUint32(e,0)}get cssFontInfo(){let e=yY._;e+=4+tB(lY,this).getUint32(e);e+=4+tB(lY,this).getUint32(e);const t=tB(lY,this).getUint32(e);if(0===t)return null;const n=new Uint8Array(t);return n.set(new Uint8Array(tB(aY,this),e+4,t)),new QK(n.buffer)}get systemFontInfo(){let e=yY._;e+=4+tB(lY,this).getUint32(e);const t=tB(lY,this).getUint32(e);if(0===t)return null;const n=new Uint8Array(t);return n.set(new Uint8Array(tB(aY,this),e+4,t)),new iY(n.buffer)}static write(e){const t=e.systemFontInfo?iY.write(e.systemFontInfo):null,n=e.cssFontInfo?QK.write(e.cssFontInfo):null,r=new TextEncoder,i={};let s=0;for(const m of dY.strings)i[m]=r.encode(e[m]),s+=4+i[m].length;const a=yY._+4+s+4+(t?t.byteLength:0)+4+(n?n.byteLength:0)+4+(e.data?e.data.length:0),o=new ArrayBuffer(a),l=new Uint8Array(o),c=new DataView(o);let d=0;const u=dY.bools.length;let h=0,p=0;for(let m=0;m<u;m++){const t=e[dY.bools[m]];h|=(void 0===t?0:t?2:1)<<p,p+=2,8!==p&&m!==u-1||(c.setUint8(d++,h),h=0,p=0)}lz(d===mY._,"FontInfo.write: Boolean properties offset mismatch");for(const m of dY.numbers)c.setFloat64(d,e[m]),d+=8;if(lz(d===fY._,"FontInfo.write: Number properties offset mismatch"),e.bbox){c.setUint8(d++,4);for(const t of e.bbox)c.setInt16(d,t,!0),d+=2}else c.setUint8(d++,0),d+=8;if(lz(d===gY._,"FontInfo.write: BBox properties offset mismatch"),e.fontMatrix){c.setUint8(d++,6);for(const t of e.fontMatrix)c.setFloat64(d,t,!0),d+=8}else c.setUint8(d++,0),d+=48;if(lz(d===vY._,"FontInfo.write: FontMatrix properties offset mismatch"),e.defaultVMetrics){c.setUint8(d++,1);for(const t of e.defaultVMetrics)c.setInt16(d,t,!0),d+=2}else c.setUint8(d++,0),d+=6;lz(d===yY._,"FontInfo.write: DefaultVMetrics properties offset mismatch"),c.setUint32(yY._,0),d+=4;for(const m of dY.strings){const e=i[m],t=e.length;c.setUint32(d,t),l.set(e,d+4),d+=4+t}if(c.setUint32(yY._,d-yY._-4),t){const e=t.byteLength;c.setUint32(d,e),lz(d+4+e<=o.byteLength,"FontInfo.write: Buffer overflow at systemFontInfo"),l.set(new Uint8Array(t),d+4),d+=4+e}else c.setUint32(d,0),d+=4;if(n){const e=n.byteLength;c.setUint32(d,e),lz(d+4+e<=o.byteLength,"FontInfo.write: Buffer overflow at cssFontInfo"),l.set(new Uint8Array(n),d+4),d+=4+e}else c.setUint32(d,0),d+=4;return void 0===e.data?(c.setUint32(d,0),d+=4):(c.setUint32(d,e.data.length),l.set(e.data,d+4),d+=4+e.data.length),lz(d<=o.byteLength,"FontInfo.write: Buffer overflow"),o.transferToFixedLength(d)}}function uY(e){lz(e<dB.bools.length,"Invalid boolean index");const t=Math.floor(e/4),n=2*e%8,r=tB(lY,this).getUint8(t)>>n&3;return 0===r?void 0:2===r}function hY(e){return lz(e<dB.numbers.length,"Invalid number index"),tB(lY,this).getFloat64(mY._+8*e)}function pY(e){lz(e<dB.strings.length,"Invalid string index");let t=yY._+4;for(let i=0;i<e;i++)t+=tB(lY,this).getUint32(t)+4;const n=tB(lY,this).getUint32(t),r=new Uint8Array(n);return r.set(new Uint8Array(tB(aY,this),t+4,n)),tB(oY,this).decode(r)}dB=dY,(0,ol.A)(dY,"bools",["black","bold","disableFontFace","fontExtraProperties","isInvalidPDFjsFont","isType3Font","italic","missingFile","remeasure","vertical"]),(0,ol.A)(dY,"numbers",["ascent","defaultWidth","descent"]),(0,ol.A)(dY,"strings",["fallbackName","loadedName","mimetype","name"]);var mY={_:Math.ceil(2*dB.bools.length/8)},fY={_:ZF(dB,dB,mY)._+8*dB.numbers.length},gY={_:ZF(dB,dB,fY)._+1+8},vY={_:ZF(dB,dB,gY)._+1+48},yY={_:ZF(dB,dB,vY)._+1+6};class xY{static get workerPort(){return ZF(xY,this,bY)._}static set workerPort(e){if(!("undefined"!==typeof Worker&&e instanceof Worker)&&null!==e)throw new Error("Invalid `workerPort` type.");bY._=ZF(xY,this,e)}static get workerSrc(){return ZF(xY,this,wY)._}static set workerSrc(e){if("string"!==typeof e)throw new Error("Invalid `workerSrc` type.");wY._=ZF(xY,this,e)}}var bY={_:null},wY={_:""},jY=new WeakMap,NY=new WeakMap;class kY{constructor(e){let{parsedData:t,rawData:n}=e;QF(this,jY,void 0),QF(this,NY,void 0),nB(jY,this,t),nB(NY,this,n)}getRaw(){return tB(NY,this)}get(e){var t;return null!==(t=tB(jY,this).get(e))&&void 0!==t?t:null}[Symbol.iterator](){return tB(jY,this).entries()}}const AY=Symbol("INTERNAL");var SY=new WeakMap,_Y=new WeakMap,CY=new WeakMap,EY=new WeakMap;class PY{constructor(e,t){let{name:n,intent:r,usage:i,rbGroups:s}=t;QF(this,SY,!1),QF(this,_Y,!1),QF(this,CY,!1),QF(this,EY,!0),nB(SY,this,!!(e&SB)),nB(_Y,this,!!(e&_B)),this.name=n,this.intent=r,this.usage=i,this.rbGroups=s}get visible(){if(tB(CY,this))return tB(EY,this);if(!tB(EY,this))return!1;const{print:e,view:t}=this.usage;return tB(SY,this)?"OFF"!==(null===t||void 0===t?void 0:t.viewState):!tB(_Y,this)||"OFF"!==(null===e||void 0===e?void 0:e.printState)}_setVisible(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e!==AY&&oz("Internal method `_setVisible` called."),nB(CY,this,n),nB(EY,this,t)}}var TY=new WeakMap,MY=new WeakMap,DY=new WeakMap,OY=new WeakMap,RY=new WeakSet;class IY{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:SB;if($F(this,RY),QF(this,TY,null),QF(this,MY,new Map),QF(this,DY,null),QF(this,OY,null),this.renderingIntent=t,this.name=null,this.creator=null,null!==e){this.name=e.name,this.creator=e.creator,nB(OY,this,e.order);for(const n of e.groups)tB(MY,this).set(n.id,new PY(t,n));if("OFF"===e.baseState)for(const e of tB(MY,this).values())e._setVisible(AY,!1);for(const t of e.on)tB(MY,this).get(t)._setVisible(AY,!0);for(const t of e.off)tB(MY,this).get(t)._setVisible(AY,!1);nB(DY,this,this.getHash())}}isVisible(e){if(0===tB(MY,this).size)return!0;if(!e)return sz("Optional content group not defined."),!0;if("OCG"===e.type)return tB(MY,this).has(e.id)?tB(MY,this).get(e.id).visible:(az("Optional content group not found: ".concat(e.id)),!0);if("OCMD"===e.type){if(e.expression)return ZF(RY,this,LY).call(this,e.expression);if(!e.policy||"AnyOn"===e.policy){for(const t of e.ids){if(!tB(MY,this).has(t))return az("Optional content group not found: ".concat(t)),!0;if(tB(MY,this).get(t).visible)return!0}return!1}if("AllOn"===e.policy){for(const t of e.ids){if(!tB(MY,this).has(t))return az("Optional content group not found: ".concat(t)),!0;if(!tB(MY,this).get(t).visible)return!1}return!0}if("AnyOff"===e.policy){for(const t of e.ids){if(!tB(MY,this).has(t))return az("Optional content group not found: ".concat(t)),!0;if(!tB(MY,this).get(t).visible)return!0}return!1}if("AllOff"===e.policy){for(const t of e.ids){if(!tB(MY,this).has(t))return az("Optional content group not found: ".concat(t)),!0;if(tB(MY,this).get(t).visible)return!1}return!0}return az("Unknown optional content policy ".concat(e.policy,".")),!0}return az("Unknown group type ".concat(e.type,".")),!0}setVisibility(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=tB(MY,this).get(e);if(r){if(n&&t&&r.rbGroups.length)for(const t of r.rbGroups)for(const n of t){var i;if(n!==e)null===(i=tB(MY,this).get(n))||void 0===i||i._setVisible(AY,!1,!0)}r._setVisible(AY,!!t,!0),nB(TY,this,null)}else az("Optional content group not found: ".concat(e))}setOCGState(e){let t,{state:n,preserveRB:r}=e;for(const i of n){switch(i){case"ON":case"OFF":case"Toggle":t=i;continue}const e=tB(MY,this).get(i);if(e)switch(t){case"ON":this.setVisibility(i,!0,r);break;case"OFF":this.setVisibility(i,!1,r);break;case"Toggle":this.setVisibility(i,!e.visible,r)}}nB(TY,this,null)}get hasInitialVisibility(){return null===tB(DY,this)||this.getHash()===tB(DY,this)}getOrder(){return tB(MY,this).size?tB(OY,this)?tB(OY,this).slice():[...tB(MY,this).keys()]:null}getGroup(e){return tB(MY,this).get(e)||null}getHash(){if(null!==tB(TY,this))return tB(TY,this);const e=new nq;for(const[t,n]of tB(MY,this))e.update("".concat(t,":").concat(n.visible));return nB(TY,this,e.hexdigest())}[Symbol.iterator](){return tB(MY,this).entries()}}function LY(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const t=e[r];let i;if(Array.isArray(t))i=ZF(RY,this,LY).call(this,t);else{if(!tB(MY,this).has(t))return az("Optional content group not found: ".concat(t)),!0;i=tB(MY,this).get(t).visible}switch(n){case"And":if(!i)return!1;break;case"Or":if(i)return!0;break;case"Not":return!i;default:return!0}}return"And"===n}class FY{constructor(e,t){let{disableRange:n=!1,disableStream:r=!1}=t;lz(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(null===s||void 0===s?void 0:s.length)>0){const e=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(e)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!r,this._isRangeSupported=!n,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((e,t)=>{this._onReceiveData({begin:e,chunk:t})}),e.addProgressListener((e,t)=>{this._onProgress({loaded:e,total:t})}),e.addProgressiveReadListener(e=>{this._onReceiveData({chunk:e})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData(e){let{begin:t,chunk:n}=e;const r=n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength?n.buffer:new Uint8Array(n).buffer;if(void 0===t)this._fullRequestReader?this._fullRequestReader._enqueue(r):this._queuedChunks.push(r);else{lz(this._rangeReaders.some(function(e){return e._begin===t&&(e._enqueue(r),!0)}),"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}_onProgress(e){var t,n,r,i;void 0===e.total?null===(t=this._rangeReaders[0])||void 0===t||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded}):null===(r=this._fullRequestReader)||void 0===r||null===(i=r.onProgress)||void 0===i||i.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;null===(e=this._fullRequestReader)||void 0===e||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){lz(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new BY(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new zY(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class BY{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._stream=e,this._done=n||!1,this._filename=zz(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const i of this._queuedChunks)this._loaded+=i.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length>0){this._requests.shift().resolve({value:e,done:!1})}else this._queuedChunks.push(e);this._loaded+=e.byteLength}}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0){return{value:this._queuedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class zY{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(0===this._requests.length)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function WY(e,t){const n=new Headers;if(!e||!t||"object"!==typeof t)return n;for(const r in t){const e=t[r];void 0!==e&&n.append(r,e)}return n}function UY(e){var t,n;return null!==(t=null===(n=URL.parse(e))||void 0===n?void 0:n.origin)&&void 0!==t?t:null}function VY(e){let{responseHeaders:t,isHttp:n,rangeChunkSize:r,disableRange:i}=e;const s={allowRangeRequests:!1,suggestedLength:void 0},a=parseInt(t.get("Content-Length"),10);if(!Number.isInteger(a))return s;if(s.suggestedLength=a,a<=2*r)return s;if(i||!n)return s;if("bytes"!==t.get("Accept-Ranges"))return s;return"identity"!==(t.get("Content-Encoding")||"identity")||(s.allowRangeRequests=!0),s}function HY(e){const t=e.get("Content-Disposition");if(t){let e=function(e){let t=!0,n=r("filename\\*","i").exec(e);if(n){n=n[1];let e=a(n);return e=unescape(e),e=o(e),e=l(e),s(e)}if(n=function(e){const t=[];let n;const i=r("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;null!==(n=i.exec(e));){let[,e,r,i]=n;if(e=parseInt(e,10),e in t){if(0===e)break}else t[e]=[r,i]}const s=[];for(let r=0;r<t.length&&r in t;++r){let[e,n]=t[r];n=a(n),e&&(n=unescape(n),0===r&&(n=o(n))),s.push(n)}return s.join("")}(e),n)return s(l(n));if(n=r("filename","i").exec(e),n){n=n[1];let e=a(n);return e=l(e),s(e)}function r(e,t){return new RegExp("(?:^|;)\\s*"+e+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',t)}function i(e,n){if(e){if(!/^[\x00-\xFF]+$/.test(n))return n;try{const r=new TextDecoder(e,{fatal:!0}),i=bz(n);n=r.decode(i),t=!1}catch(r){}}return n}function s(e){return t&&/[\x80-\xff]/.test(e)&&(e=i("utf-8",e),t&&(e=i("iso-8859-1",e))),e}function a(e){if(e.startsWith('"')){const t=e.slice(1).split('\\"');for(let e=0;e<t.length;++e){const n=t[e].indexOf('"');-1!==n&&(t[e]=t[e].slice(0,n),t.length=e+1),t[e]=t[e].replaceAll(/\\(.)/g,"$1")}e=t.join('"')}return e}function o(e){const t=e.indexOf("'");return-1===t?e:i(e.slice(0,t),e.slice(t+1).replace(/^[^']*'/,""))}function l(e){return!e.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(e)?e:e.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(e,t,n,r){if("q"===n||"Q"===n)return r=(r=r.replaceAll("_"," ")).replaceAll(/=([0-9a-fA-F]{2})/g,function(e,t){return String.fromCharCode(parseInt(t,16))}),i(t,r);try{r=atob(r)}catch(s){}return i(t,r)})}return""}(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch(n){}if(zz(e))return e}return null}function qY(e,t){return new gz("Unexpected server response (".concat(e,') while retrieving PDF "').concat(t,'".'),e,404===e||0===e&&t.startsWith("file:"))}function GY(e){return 200===e||206===e}function KY(e,t,n){return{method:"GET",headers:e,signal:n.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function YY(e){return e instanceof Uint8Array?e.buffer:e instanceof ArrayBuffer?e:(az("getArrayBuffer - unexpected data format: ".concat(e)),new Uint8Array(e).buffer)}class XY{constructor(e){(0,ol.A)(this,"_responseOrigin",null),this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=WY(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return lz(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new JY(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new $Y(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class JY{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,KY(n,this._withCredentials,this._abortController)).then(t=>{if(e._responseOrigin=UY(t.url),!GY(t.status))throw qY(t.status,r);this._reader=t.body.getReader(),this._headersCapability.resolve();const n=t.headers,{allowRangeRequests:i,suggestedLength:s}=VY({responseHeaders:n,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=i,this._contentLength=s||this._contentLength,this._filename=HY(n),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new yz("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._headersCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength}),{value:YY(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class $Y{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const i=new Headers(e.headers);i.append("Range","bytes=".concat(t,"-").concat(n-1));const s=r.url;fetch(s,KY(i,this._withCredentials,this._abortController)).then(t=>{const n=UY(t.url);if(n!==e._responseOrigin)throw new Error('Expected range response-origin "'.concat(n,'" to match "').concat(e._responseOrigin,'".'));if(!GY(t.status))throw qY(t.status,s);this._readCapability.resolve(),this._reader=t.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;await this._readCapability.promise;const{value:t,done:n}=await this._reader.read();return n?{value:t,done:n}:(this._loaded+=t.byteLength,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded}),{value:YY(t),done:!1})}cancel(e){var t;null===(t=this._reader)||void 0===t||t.cancel(e),this._abortController.abort()}}class QY{constructor(e){let{url:t,httpHeaders:n,withCredentials:r}=e;(0,ol.A)(this,"_responseOrigin",null),this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=WY(this.isHttp,n),this.withCredentials=r||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[i,s]of this.headers)t.setRequestHeader(i,s);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range","bytes=".concat(e.begin,"-").concat(e.end-1)),r.expectedStatus=206):r.expectedStatus=200,t.responseType="arraybuffer",lz(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var n;const r=this.pendingRequests[e];r&&(null===(n=r.onProgress)||void 0===n||n.call(r,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),4!==r.readyState)return;if(!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],0===r.status&&this.isHttp)return void n.onError(r.status);const i=r.status||200;if(!(200===i&&206===n.expectedStatus)&&i!==n.expectedStatus)return void n.onError(r.status);const s=function(e){const t=e.response;return"string"!==typeof t?t:bz(t).buffer}(r);if(206===i){const e=r.getResponseHeader("Content-Range"),t=/bytes (\d+)-(\d+)\/(\d+)/.exec(e);t?n.onDone({begin:parseInt(t[1],10),chunk:s}):(az('Missing or invalid "Content-Range" header.'),n.onError(0))}else s?n.onDone({begin:0,chunk:s}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class ZY{constructor(e){this._source=e,this._manager=new QY(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return lz(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new eX(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new tX(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class eX{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=UY(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(e=>{const[t,...n]=e.split(": ");return[t,n.join(": ")]}):[]),{allowRangeRequests:i,suggestedLength:s}=VY({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});i&&(this._isRangeSupported=!0),this._contentLength=s||this._contentLength,this._filename=HY(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e)if(this._requests.length>0){this._requests.shift().resolve({value:e.chunk,done:!1})}else this._cachedChunks.push(e.chunk);if(this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=qY(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0){return{value:this._cachedChunks.shift(),done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class tX{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=UY(null===(e=this._manager.getRequestXhr(this._requestId))||void 0===e?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error('Expected range response-origin "'.concat(t,'" to match "').concat(this._manager._responseOrigin,'".')),this._onError(0))}_close(){var e;null===(e=this.onClosed)||void 0===e||e.call(this,this)}_onDone(e){const t=e.chunk;if(this._requests.length>0){this._requests.shift().resolve({value:t,done:!1})}else this._queuedChunk=t;this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){var t;null!==(t=this._storedError)&&void 0!==t||(this._storedError=qY(e,this._url));for(const n of this._requests)n.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(null===(t=this.onProgress)||void 0===t||t.call(this,{loaded:e.loaded}))}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(null!==this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const nX=/^[a-z][a-z0-9\-+.]+:/i;class rX{constructor(e){this.source=e,this.url=function(e){if(nX.test(e))return new URL(e);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(e))}(e.url),lz("file:"===this.url.protocol,"PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e,t;return null!==(e=null===(t=this._fullRequestReader)||void 0===t?void 0:t._loaded)&&void 0!==e?e:0}getFullReader(){return lz(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new iX(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new sX(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;null===(t=this._fullRequestReader)||void 0===t||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class iX{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,this._rangeChunkSize||this._disableRange||(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(e=>{this._contentLength=e.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},e=>{"ENOENT"===e.code&&(e=qY(0,this._url.href)),this._storedError=e,this._headersCapability.reject(e)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded,total:this._contentLength});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new yz("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class sX{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const i=process.getBuiltinModule("fs");this._setReadableStream(i.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var e;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();if(null===t)return this._readCapability=Promise.withResolvers(),this.read();this._loaded+=t.length,null===(e=this.onProgress)||void 0===e||e.call(this,{loaded:this._loaded});return{value:new Uint8Array(t).buffer,done:!1}}cancel(e){this._readableStream?this._readableStream.destroy(e):this._error(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const aX=Symbol("INITIAL_DATA");var oX=new WeakMap,lX=new WeakSet;class cX{constructor(){$F(this,lX),QF(this,oX,Object.create(null))}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(t){const n=ZF(lX,this,dX).call(this,e);return n.promise.then(()=>t(n.data)),null}const n=tB(oX,this)[e];if(!n||n.data===aX)throw new Error("Requesting object that isn't resolved yet ".concat(e,"."));return n.data}has(e){const t=tB(oX,this)[e];return!!t&&t.data!==aX}delete(e){const t=tB(oX,this)[e];return!(!t||t.data===aX)&&(delete tB(oX,this)[e],!0)}resolve(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=ZF(lX,this,dX).call(this,e);n.data=t,n.resolve()}clear(){for(const t in tB(oX,this)){var e;const{data:n}=tB(oX,this)[t];null===n||void 0===n||null===(e=n.bitmap)||void 0===e||e.close()}nB(oX,this,Object.create(null))}*[Symbol.iterator](){for(const e in tB(oX,this)){const{data:t}=tB(oX,this)[e];t!==aX&&(yield[e,t])}}}function dX(e){var t;return(t=tB(oX,this))[e]||(t[e]=(0,Ne.A)((0,Ne.A)({},Promise.withResolvers()),{},{data:aX}))}var uX=new WeakMap,hX=new WeakMap,pX=new WeakMap,mX=new WeakMap,fX=new WeakMap,gX=new WeakMap,vX=new WeakMap,yX=new WeakMap,xX=new WeakMap,bX=new WeakMap,wX=new WeakMap,jX=new WeakMap,NX=new WeakMap,kX=new WeakMap,AX=new WeakMap,SX=new WeakMap,_X=new WeakMap,CX=new WeakMap,EX=new WeakSet;class PX{constructor(e){var t;let{textContentSource:n,container:r,viewport:i}=e;if($F(this,EX),QF(this,uX,Promise.withResolvers()),QF(this,hX,null),QF(this,pX,!1),QF(this,mX,!(null===(t=globalThis.FontInspector)||void 0===t||!t.enabled)),QF(this,fX,null),QF(this,gX,null),QF(this,vX,0),QF(this,yX,0),QF(this,xX,null),QF(this,bX,null),QF(this,wX,0),QF(this,jX,0),QF(this,NX,Object.create(null)),QF(this,kX,[]),QF(this,AX,null),QF(this,SX,[]),QF(this,_X,new WeakMap),QF(this,CX,null),n instanceof ReadableStream)nB(AX,this,n);else{if("object"!==typeof n)throw new Error('No "textContentSource" parameter specified.');nB(AX,this,new ReadableStream({start(e){e.enqueue(n),e.close()}}))}nB(hX,this,nB(bX,this,r)),nB(jX,this,i.scale*$z.pixelRatio),nB(wX,this,i.rotation),nB(gX,this,{div:null,properties:null,ctx:null});const{pageWidth:s,pageHeight:a,pageX:o,pageY:l}=i.rawDims;nB(CX,this,[1,0,0,-1,-o,l+a]),nB(yX,this,s),nB(vX,this,a),IX.call(PX),Jz(r,i),tB(uX,this).promise.finally(()=>{UX._.delete(this),nB(gX,this,null),nB(NX,this,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=wz.platform;return uz(this,"fontFamilyMap",new Map([["sans-serif","".concat(e&&t?"Calibri, ":"","sans-serif")],["monospace","".concat(e&&t?"Lucida Console, ":"","monospace")]]))}render(){const e=()=>{tB(xX,this).read().then(t=>{var n;let{value:r,done:i}=t;i?tB(uX,this).resolve():(null!==(n=tB(fX,this))&&void 0!==n||nB(fX,this,r.lang),Object.assign(tB(NX,this),r.styles),ZF(EX,this,TX).call(this,r.items),e())},tB(uX,this).reject)};return nB(xX,this,tB(AX,this).getReader()),UX._.add(this),e(),tB(uX,this).promise}update(e){let{viewport:t,onBefore:n=null}=e;const r=t.scale*$z.pixelRatio,i=t.rotation;if(i!==tB(wX,this)&&(null===n||void 0===n||n(),nB(wX,this,i),Jz(tB(bX,this),{rotation:i})),r!==tB(jX,this)){null===n||void 0===n||n(),nB(jX,this,r);const e={div:null,properties:null,ctx:OX.call(PX,tB(fX,this))};for(const t of tB(SX,this))e.properties=tB(_X,this).get(t),e.div=t,ZF(EX,this,DX).call(this,e)}}cancel(){var e;const t=new yz("TextLayer task cancelled.");null===(e=tB(xX,this))||void 0===e||e.cancel(t).catch(()=>{}),nB(xX,this,null),tB(uX,this).reject(t)}get textDivs(){return tB(SX,this)}get textContentItemsStr(){return tB(kX,this)}static cleanup(){if(!(ZF(PX,this,UX)._.size>0)){ZF(PX,this,FX)._.clear();for(const{canvas:e}of ZF(PX,this,BX)._.values())e.remove();ZF(PX,this,BX)._.clear()}}}function TX(e){var t,n;if(tB(pX,this))return;null!==(n=(t=tB(gX,this)).ctx)&&void 0!==n||(t.ctx=OX.call(uB,tB(fX,this)));const r=tB(SX,this),i=tB(kX,this);for(const s of e){if(r.length>1e5)return az("Ignoring additional textDivs for performance reasons."),void nB(pX,this,!0);if(void 0!==s.str)i.push(s.str),ZF(EX,this,MX).call(this,s);else if("beginMarkedContentProps"===s.type||"beginMarkedContent"===s.type){const e=tB(hX,this);nB(hX,this,document.createElement("span")),tB(hX,this).classList.add("markedContent"),s.id&&tB(hX,this).setAttribute("id","".concat(s.id)),e.append(tB(hX,this))}else"endMarkedContent"===s.type&&nB(hX,this,tB(hX,this).parentNode)}}function MX(e){const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:""!==e.str,hasEOL:e.hasEOL,fontSize:0};tB(SX,this).push(t);const r=Nz.transform(tB(CX,this),e.transform);let i=Math.atan2(r[1],r[0]);const s=tB(NX,this)[e.fontName];s.vertical&&(i+=Math.PI/2);let a=tB(mX,this)&&s.fontSubstitution||s.fontFamily;a=uB.fontFamilyMap.get(a)||a;const o=Math.hypot(r[2],r[3]),l=o*LX.call(uB,a,s,tB(fX,this));let c,d;0===i?(c=r[4],d=r[5]-l):(c=r[4]+l*Math.sin(i),d=r[5]-l*Math.cos(i));const u="calc(var(--total-scale-factor) *",h=t.style;tB(hX,this)===tB(bX,this)?(h.left="".concat((100*c/tB(yX,this)).toFixed(2),"%"),h.top="".concat((100*d/tB(vX,this)).toFixed(2),"%")):(h.left="".concat(u).concat(c.toFixed(2),"px)"),h.top="".concat(u).concat(d.toFixed(2),"px)")),h.fontSize="".concat(u).concat((WX._*o).toFixed(2),"px)"),h.fontFamily=a,n.fontSize=o,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,tB(mX,this)&&(t.dataset.fontName=s.fontSubstitutionLoadedName||e.fontName),0!==i&&(n.angle=i*(180/Math.PI));let p=!1;if(e.str.length>1)p=!0;else if(" "!==e.str&&e.transform[0]!==e.transform[3]){const t=Math.abs(e.transform[0]),n=Math.abs(e.transform[3]);t!==n&&Math.max(t,n)/Math.min(t,n)>1.5&&(p=!0)}if(p&&(n.canvasWidth=s.vertical?e.height:e.width),tB(_X,this).set(t,n),tB(gX,this).div=t,tB(gX,this).properties=n,ZF(EX,this,DX).call(this,tB(gX,this)),n.hasText&&tB(hX,this).append(t),n.hasEOL){const e=document.createElement("br");e.setAttribute("role","presentation"),tB(hX,this).append(e)}}function DX(e){const{div:t,properties:n,ctx:r}=e,{style:i}=t;let s="";if(WX._>1&&(s="scale(".concat(1/WX._,")")),0!==n.canvasWidth&&n.hasText){const{fontFamily:e}=i,{canvasWidth:a,fontSize:o}=n;RX.call(uB,r,o*tB(jX,this),e);const{width:l}=r.measureText(t.textContent);l>0&&(s="scaleX(".concat(a*tB(jX,this)/l,") ").concat(s))}0!==n.angle&&(s="rotate(".concat(n.angle,"deg) ").concat(s)),s.length>0&&(i.transform=s)}function OX(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=ZF(uB,this,BX)._.get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),ZF(uB,this,BX)._.set(e,t),ZF(uB,this,zX)._.set(t,{size:0,family:""})}return t}function RX(e,t,n){const r=ZF(uB,this,zX)._.get(e);t===r.size&&n===r.family||(e.font="".concat(t,"px ").concat(n),r.size=t,r.family=n)}function IX(){if(null!==ZF(uB,this,WX)._)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),WX._=ZF(uB,this,e.getBoundingClientRect().height),e.remove()}function LX(e,t,n){const r=ZF(uB,this,FX)._.get(e);if(r)return r;const i=ZF(uB,this,OX).call(this,n);i.canvas.width=i.canvas.height=30,ZF(uB,this,RX).call(this,i,30,e);const s=i.measureText(""),a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);i.canvas.width=i.canvas.height=0;let l=.8;return a?l=a/(a+o):(wz.platform.isFirefox&&az("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),t.ascent?l=t.ascent:t.descent&&(l=1+t.descent)),ZF(uB,this,FX)._.set(e,l),l}uB=PX;var FX={_:new Map},BX={_:new Map},zX={_:new WeakMap},WX={_:null},UX={_:new Set};function VX(){var e,t;let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};"string"===typeof n||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const r=new HX,{docId:i}=r,s=n.url?function(e){if(e instanceof URL)return e.href;if("string"===typeof e){if(jB)return e;const t=URL.parse(e,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}(n.url):null,a=n.data?function(e){if(jB&&"undefined"!==typeof Buffer&&e instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength)return e;if("string"===typeof e)return bz(e);if(e instanceof ArrayBuffer||ArrayBuffer.isView(e)||"object"===typeof e&&!isNaN(null===e||void 0===e?void 0:e.length))return new Uint8Array(e);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}(n.data):null,o=n.httpHeaders||null,l=!0===n.withCredentials,c=null!==(e=n.password)&&void 0!==e?e:null,d=n.range instanceof $X?n.range:null,u=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:65536;let h=n.worker instanceof lJ?n.worker:null;const p=n.verbosity,m="string"!==typeof n.docBaseUrl||Bz(n.docBaseUrl)?null:n.docBaseUrl,f=vq(n.cMapUrl),g=!1!==n.cMapPacked,v=n.CMapReaderFactory||(jB?jG:Gq),y=vq(n.iccUrl),x=vq(n.standardFontDataUrl),b=n.StandardFontDataFactory||(jB?NG:gG),w=vq(n.wasmUrl),j=n.WasmFactory||(jB?kG:yG),N=!0!==n.stopAtErrors,k=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,A=!1!==n.isEvalSupported,S="boolean"===typeof n.isOffscreenCanvasSupported?n.isOffscreenCanvasSupported:!jB,_="boolean"===typeof n.isImageDecoderSupported?n.isImageDecoderSupported:!jB&&(wz.platform.isFirefox||!globalThis.chrome),C=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,E="boolean"===typeof n.disableFontFace?n.disableFontFace:jB,P=!0===n.fontExtraProperties,T=!0===n.enableXfa,M=n.ownerDocument||globalThis.document,D=!0===n.disableRange,O=!0===n.disableStream,R=!0===n.disableAutoFetch,I=!0===n.pdfBug,L=n.CanvasFactory||(jB?wG:Hq),F=n.FilterFactory||(jB?bG:nG),B=!0===n.enableHWA,z=!1!==n.useWasm,W=d?d.length:null!==(t=n.length)&&void 0!==t?t:NaN,U="boolean"===typeof n.useSystemFonts?n.useSystemFonts:!jB&&!E,V="boolean"===typeof n.useWorkerFetch?n.useWorkerFetch:!!(v===Gq&&b===gG&&j===yG&&f&&x&&w&&Uz(f,document.baseURI)&&Uz(x,document.baseURI)&&Uz(w,document.baseURI));rz(p);const H={canvasFactory:new L({ownerDocument:M,enableHWA:B}),filterFactory:new F({docId:i,ownerDocument:M}),cMapReaderFactory:V?null:new v({baseUrl:f,isCompressed:g}),standardFontDataFactory:V?null:new b({baseUrl:x}),wasmFactory:V?null:new j({baseUrl:w})};h||(h=lJ.create({verbosity:p,port:xY.workerPort}),r._worker=h);const q={docId:i,apiVersion:"5.4.296",data:a,password:c,disableAutoFetch:R,rangeChunkSize:u,length:W,docBaseUrl:m,enableXfa:T,evaluatorOptions:{maxImageSize:k,disableFontFace:E,ignoreErrors:N,isEvalSupported:A,isOffscreenCanvasSupported:S,isImageDecoderSupported:_,canvasMaxAreaInBytes:C,fontExtraProperties:P,useSystemFonts:U,useWasm:z,useWorkerFetch:V,cMapUrl:f,iccUrl:y,standardFontDataUrl:x,wasmUrl:w}},G={ownerDocument:M,pdfBug:I,styleElement:null,loadingParams:{disableAutoFetch:R,enableXfa:T}};return h.promise.then(function(){if(r.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const e=h.messageHandler.sendWithPromise("GetDocRequest",q,a?[a.buffer]:null);let t;if(d)t=new FY(d,{disableRange:D,disableStream:O});else if(!a){if(!s)throw new Error("getDocument - no `url` parameter provided.");const e=Uz(s)?XY:jB?rX:ZY;t=new e({url:s,length:W,httpHeaders:o,withCredentials:l,rangeChunkSize:u,disableRange:D,disableStream:O})}return e.then(e=>{if(r.destroyed)throw new Error("Loading aborted");if(h.destroyed)throw new Error("Worker was destroyed");const n=new Lq(i,e,h.port),s=new NJ(n,r,t,G,H,B);r._transport=s,n.send("Ready",null)})}).catch(r._capability.reject),r}class HX{constructor(){(0,ol.A)(this,"_capability",Promise.withResolvers()),(0,ol.A)(this,"_transport",null),(0,ol.A)(this,"_worker",null),(0,ol.A)(this,"docId","d".concat((qX._=(hB=qX._,pB=hB++,hB),pB))),(0,ol.A)(this,"destroyed",!1),(0,ol.A)(this,"onPassword",null),(0,ol.A)(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var e;this.destroyed=!0;try{var t,n;null!==(t=this._worker)&&void 0!==t&&t.port&&(this._worker._pendingDestroy=!0),await(null===(n=this._transport)||void 0===n?void 0:n.destroy())}catch(i){var r;throw null!==(r=this._worker)&&void 0!==r&&r.port&&delete this._worker._pendingDestroy,i}this._transport=null,null===(e=this._worker)||void 0===e||e.destroy(),this._worker=null}async getData(){return this._transport.getData()}}var qX={_:0},GX=new WeakMap,KX=new WeakMap,YX=new WeakMap,XX=new WeakMap,JX=new WeakMap;class $X{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;QF(this,GX,Promise.withResolvers()),QF(this,KX,[]),QF(this,YX,[]),QF(this,XX,[]),QF(this,JX,[]),this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r}addRangeListener(e){tB(JX,this).push(e)}addProgressListener(e){tB(XX,this).push(e)}addProgressiveReadListener(e){tB(YX,this).push(e)}addProgressiveDoneListener(e){tB(KX,this).push(e)}onDataRange(e,t){for(const n of tB(JX,this))n(e,t)}onDataProgress(e,t){tB(GX,this).promise.then(()=>{for(const n of tB(XX,this))n(e,t)})}onDataProgressiveRead(e){tB(GX,this).promise.then(()=>{for(const t of tB(YX,this))t(e)})}onDataProgressiveDone(){tB(GX,this).promise.then(()=>{for(const e of tB(KX,this))e()})}transportReady(){tB(GX,this).resolve()}requestDataRange(e,t){oz("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class QX{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return uz(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getAnnotationsByType(e,t){return this._transport.getAnnotationsByType(e,t)}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var ZX=new WeakMap,eJ=new WeakSet;class tJ{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];$F(this,eJ),QF(this,ZX,!1),this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new Wz:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new cX,this._intentStates=new Map,this.destroyed=!1,this.recordedBBoxes=null}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport(){let{scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:i=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Lz({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:i})}getAnnotations(){let{intent:e="display"}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return uz(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return(null===(e=this._transport._htmlForXfa)||void 0===e?void 0:e.children[this._pageIndex])||null}render(e){var t,n,r;let{canvasContext:i,canvas:s=i.canvas,viewport:a,intent:o="display",annotationMode:l=DB.ENABLE,transform:c=null,background:d=null,optionalContentConfigPromise:u=null,annotationCanvasMap:h=null,pageColors:p=null,printAnnotationStorage:m=null,isEditing:f=!1,recordOperations:g=!1,operationsFilter:v=null}=e;null===(t=this._stats)||void 0===t||t.time("Overall");const y=this._transport.getRenderingIntent(o,l,m,f),{renderingIntent:x,cacheKey:b}=y;nB(ZX,this,!1),u||(u=this._transport.getOptionalContentConfig(x));let w=this._intentStates.get(b);w||(w=Object.create(null),this._intentStates.set(b,w)),w.streamReaderCancelTimeout&&(clearTimeout(w.streamReaderCancelTimeout),w.streamReaderCancelTimeout=null);const j=!!(x&_B);var N;w.displayReadyCapability||(w.displayReadyCapability=Promise.withResolvers(),w.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(N=this._stats)||void 0===N||N.time("Page Request"),this._pumpOperatorList(y));const k=Boolean(this._pdfBug&&(null===(n=globalThis.StepperManager)||void 0===n?void 0:n.enabled)),A=!this.recordedBBoxes&&(g||k),S=e=>{if(w.renderTasks.delete(_),A){var t;const e=null===(t=_.gfx)||void 0===t?void 0:t.dependencyTracker.take();e&&(_.stepper&&_.stepper.setOperatorBBoxes(e,_.gfx.dependencyTracker.takeDebugMetadata()),g&&(this.recordedBBoxes=e))}var n;(j&&nB(ZX,this,!0),ZF(eJ,this,nJ).call(this),e?(_.capability.reject(e),this._abortOperatorList({intentState:w,reason:e instanceof Error?e:new Error(e)})):_.capability.resolve(),this._stats)&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),null!==(n=globalThis.Stats)&&void 0!==n&&n.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},_=new CJ({callback:S,params:{canvas:s,canvasContext:i,dependencyTracker:A?new QG(s,w.operatorList.length,k):null,viewport:a,transform:c,background:d},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:h,operatorList:w.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!j,pdfBug:this._pdfBug,pageColors:p,enableHWA:this._transport.enableHWA,operationsFilter:v});((r=w).renderTasks||(r.renderTasks=new Set)).add(_);const C=_.task;return Promise.all([w.displayReadyCapability.promise,u]).then(e=>{var t;let[n,r]=e;if(this.destroyed)S();else{if(null===(t=this._stats)||void 0===t||t.time("Rendering"),!(r.renderingIntent&x))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");_.initializeGraphics({transparency:n,optionalContentConfig:r}),_.operatorListChanged()}}).catch(S),C}getOperatorList(){let{intent:e="display",annotationMode:t=DB.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const i=this._transport.getRenderingIntent(e,t,n,r,!0);let s,a=this._intentStates.get(i.cacheKey);var o,l;(a||(a=Object.create(null),this._intentStates.set(i.cacheKey,a)),a.opListReadCapability)||(s=Object.create(null),s.operatorListChanged=function(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(s))},a.opListReadCapability=Promise.withResolvers(),((o=a).renderTasks||(o.renderTasks=new Set)).add(s),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},null===(l=this._stats)||void 0===l||l.time("Page Request"),this._pumpOperatorList(i));return a.opListReadCapability.promise}streamTextContent(){let{includeMarkedContent:e=!1,disableNormalization:t=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:!0===e,disableNormalization:!0===t},{highWaterMark:100,size:e=>e.items.length})}getTextContent(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._transport._htmlForXfa)return this.getXfa().then(e=>Mz.textContent(e));const t=this.streamTextContent(e);return new Promise(function(e,n){const r=t.getReader(),i={items:[],styles:Object.create(null),lang:null};!function t(){r.read().then(function(n){var r;let{value:s,done:a}=n;a?e(i):(null!==(r=i.lang)&&void 0!==r||(i.lang=s.lang),Object.assign(i.styles,s.styles),i.items.push(...s.items),t())},n)}()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),nB(ZX,this,!1),Promise.all(e)}cleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];nB(ZX,this,!0);const t=ZF(eJ,this,nJ).call(this);return e&&t&&this._stats&&(this._stats=new Wz),t}_startRenderPage(e,t){var n,r;const i=this._intentStates.get(t);i&&(null===(n=this._stats)||void 0===n||n.timeEnd("Page Request"),null===(r=i.displayReadyCapability)||void 0===r||r.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&ZF(eJ,this,nJ).call(this)}_pumpOperatorList(e){let{renderingIntent:t,cacheKey:n,annotationStorageSerializable:r,modifiedIds:i}=e;const{map:s,transfer:a}=r,o=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:n,annotationStorage:s,modifiedIds:i},a).getReader(),l=this._intentStates.get(n);l.streamReader=o;const c=()=>{o.read().then(e=>{let{value:t,done:n}=e;n?l.streamReader=null:this._transport.destroyed||(this._renderPageChunk(t,l),c())},e=>{if(l.streamReader=null,!this._transport.destroyed){if(l.operatorList){l.operatorList.lastChunk=!0;for(const e of l.renderTasks)e.operatorListChanged();ZF(eJ,this,nJ).call(this)}if(l.displayReadyCapability)l.displayReadyCapability.reject(e);else{if(!l.opListReadCapability)throw e;l.opListReadCapability.reject(e)}}})};c()}_abortOperatorList(e){let{intentState:t,reason:n,force:r=!1}=e;if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!r){if(t.renderTasks.size>0)return;if(n instanceof Fz){let e=100;return n.extraDelay>0&&n.extraDelay<1e3&&(e+=n.extraDelay),void(t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:n,force:!0})},e))}}if(t.streamReader.cancel(new yz(n.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[e,n]of this._intentStates)if(n===t){this._intentStates.delete(e);break}this.cleanup()}}}get stats(){return this._stats}}function nJ(){if(!tB(ZX,this)||this.destroyed)return!1;for(const{renderTasks:e,operatorList:t}of this._intentStates.values())if(e.size>0||!t.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),nB(ZX,this,!1),!0}var rJ=new WeakMap,iJ=new WeakMap,sJ=new WeakMap,aJ=new WeakMap,oJ=new WeakSet;class lJ{constructor(){let{name:e=null,port:t=null,verbosity:n=iz()}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if($F(this,oJ),QF(this,rJ,Promise.withResolvers()),QF(this,iJ,null),QF(this,sJ,null),QF(this,aJ,null),this.name=e,this.destroyed=!1,this.verbosity=n,t){if(gJ._.has(t))throw new Error("Cannot use more than one PDFWorker per port.");gJ._.set(t,this),ZF(oJ,this,dJ).call(this,t)}else ZF(oJ,this,uJ).call(this)}get promise(){return tB(rJ,this).promise}get port(){return tB(sJ,this)}get messageHandler(){return tB(iJ,this)}destroy(){var e,t;this.destroyed=!0,null===(e=tB(aJ,this))||void 0===e||e.terminate(),nB(aJ,this,null),gJ._.delete(tB(sJ,this)),nB(sJ,this,null),null===(t=tB(iJ,this))||void 0===t||t.destroy(),nB(iJ,this,null)}static create(e){const t=ZF(lJ,this,gJ)._.get(null===e||void 0===e?void 0:e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new lJ(e)}static get workerSrc(){if(xY.workerSrc)return xY.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return uz(this,"_setupFakeWorkerGlobal",(async()=>{if(eB(lJ,this,pJ))return eB(lJ,this,pJ);return(await import(this.workerSrc)).WorkerMessageHandler})())}}function cJ(){tB(rJ,this).resolve(),tB(iJ,this).send("configure",{verbosity:this.verbosity})}function dJ(e){nB(sJ,this,e),nB(iJ,this,new Lq("main","worker",e)),tB(iJ,this).on("ready",()=>{}),ZF(oJ,this,cJ).call(this)}function uJ(){if(fJ._||pJ(mB))return void ZF(oJ,this,hJ).call(this);let{workerSrc:e}=mB;try{mB._isSameOrigin(window.location,e)||(e=mB._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new Lq("main","worker",t),r=()=>{i.abort(),n.destroy(),t.terminate(),this.destroyed?tB(rJ,this).reject(new Error("Worker was destroyed")):ZF(oJ,this,hJ).call(this)},i=new AbortController;t.addEventListener("error",()=>{tB(aJ,this)||r()},{signal:i.signal}),n.on("test",e=>{i.abort(),!this.destroyed&&e?(nB(iJ,this,n),nB(sJ,this,t),nB(aJ,this,t),ZF(oJ,this,cJ).call(this)):r()}),n.on("ready",e=>{if(i.abort(),this.destroyed)r();else try{s()}catch(t){ZF(oJ,this,hJ).call(this)}});const s=()=>{const e=new Uint8Array;n.send("test",e,[e.buffer])};return void s()}catch(t){sz("The worker has been disabled.")}ZF(oJ,this,hJ).call(this)}function hJ(){fJ._||(az("Setting up fake worker."),fJ._=!0),mB._setupFakeWorkerGlobal.then(e=>{var t,n;if(this.destroyed)return void tB(rJ,this).reject(new Error("Worker was destroyed"));const r=new jq;nB(sJ,this,r);const i="fake".concat((mJ._=(t=mJ._,n=t++,t),n)),s=new Lq(i+"_worker",i,r);e.setup(s,r),nB(iJ,this,new Lq(i,i+"_worker",r)),ZF(oJ,this,cJ).call(this)}).catch(e=>{tB(rJ,this).reject(new Error('Setting up fake worker failed: "'.concat(e.message,'".')))})}function pJ(e){try{var t;return(null===(t=globalThis.pdfjsWorker)||void 0===t?void 0:t.WorkerMessageHandler)||null}catch(n){return null}}mB=lJ;var mJ={_:0},fJ={_:!1},gJ={_:new WeakMap};jB&&(fJ._=ZF(mB,mB,!0),xY.workerSrc||(xY.workerSrc="./pdf.worker.mjs")),mB._isSameOrigin=(e,t)=>{const n=URL.parse(e);if(null===n||void 0===n||!n.origin||"null"===n.origin)return!1;const r=new URL(t,n);return n.origin===r.origin},mB._createCDNWrapper=e=>{const t='await import("'.concat(e,'");');return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))},mB.fromPort=e=>{var t;if(t="`PDFWorker.fromPort` - please use `PDFWorker.create` instead.",console.log("Deprecated API usage: "+t),null===e||void 0===e||!e.port)throw new Error("PDFWorker.fromPort - invalid method signature.");return mB.create(e)};var vJ=new WeakMap,yJ=new WeakMap,xJ=new WeakMap,bJ=new WeakMap,wJ=new WeakMap,jJ=new WeakSet;class NJ{constructor(e,t,n,r,i,s){$F(this,jJ),QF(this,vJ,new Map),QF(this,yJ,new Map),QF(this,xJ,new Map),QF(this,bJ,new Map),QF(this,wJ,null),this.messageHandler=e,this.loadingTask=t,this.commonObjs=new cX,this.fontLoader=new mq({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=i.canvasFactory,this.filterFactory=i.filterFactory,this.cMapReaderFactory=i.cMapReaderFactory,this.standardFontDataFactory=i.standardFontDataFactory,this.wasmFactory=i.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.enableHWA=s,this.setupMessageHandler()}get annotationStorage(){return uz(this,"annotationStorage",new cq)}getRenderingIntent(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:DB.ENABLE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],s=SB,a=rq;switch(e){case"any":s=AB;break;case"display":break;case"print":s=_B;break;default:az("getRenderingIntent - invalid intent: ".concat(e))}const o=s&_B&&n instanceof hq?n:this.annotationStorage;switch(t){case DB.DISABLE:s+=PB;break;case DB.ENABLE:break;case DB.ENABLE_FORMS:s+=CB;break;case DB.ENABLE_STORAGE:s+=EB,a=o.serializable;break;default:az("getRenderingIntent - invalid annotationMode: ".concat(t))}r&&(s+=TB),i&&(s+=MB);const{ids:l,hash:c}=o.modifiedIds;return{renderingIntent:s,cacheKey:[s,a.hash,c].join("_"),annotationStorageSerializable:a,modifiedIds:l}}destroy(){var e;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),null===(e=tB(wJ,this))||void 0===e||e.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const r of tB(yJ,this).values())t.push(r._destroy());tB(yJ,this).clear(),tB(xJ,this).clear(),tB(bJ,this).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const n=this.messageHandler.sendWithPromise("Terminate",null);return t.push(n),Promise.all(t).then(()=>{var e,t;this.commonObjs.clear(),this.fontLoader.clear(),tB(vJ,this).clear(),this.filterFactory.destroy(),PX.cleanup(),null===(e=this._networkStream)||void 0===e||e.cancelAllRequests(new yz("Worker was terminated.")),null===(t=this.messageHandler)||void 0===t||t.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(e,t)=>{lz(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=e=>{this._lastProgress={loaded:e.loaded,total:e.total}},t.onPull=()=>{this._fullReader.read().then(function(e){let{value:n,done:r}=e;r?t.close():(lz(n instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{this._fullReader.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}}),e.on("ReaderHeadersReady",async e=>{await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:r,contentLength:i}=this._fullReader;if(!n||!r){var s;if(this._lastProgress)null===(s=t.onProgress)||void 0===s||s.call(t,this._lastProgress);this._fullReader.onProgress=e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}}return{isStreamingSupported:n,isRangeSupported:r,contentLength:i}}),e.on("GetRangeReader",(e,t)=>{lz(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const n=this._networkStream.getRangeReader(e.begin,e.end);n?(t.onPull=()=>{n.read().then(function(e){let{value:n,done:r}=e;r?t.close():(lz(n instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),t.enqueue(new Uint8Array(n),1,[n]))}).catch(e=>{t.error(e)})},t.onCancel=e=>{n.cancel(e),t.ready.catch(e=>{if(!this.destroyed)throw e})}):t.close()}),e.on("GetDoc",e=>{let{pdfInfo:n}=e;this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new QX(n,this))}),e.on("DocException",e=>{t._capability.reject(Oq(e))}),e.on("PasswordRequest",e=>{nB(wJ,this,Promise.withResolvers());try{if(!t.onPassword)throw Oq(e);const n=e=>{e instanceof Error?tB(wJ,this).reject(e):tB(wJ,this).resolve({password:e})};t.onPassword(n,e.code)}catch(n){tB(wJ,this).reject(n)}return tB(wJ,this).promise}),e.on("DataLoaded",e=>{var n;null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.length,total:e.length}),this.downloadInfoCapability.resolve(e)}),e.on("StartRenderPage",e=>{if(this.destroyed)return;tB(yJ,this).get(e.pageIndex)._startRenderPage(e.transparency,e.cacheKey)}),e.on("commonobj",t=>{var n;let[r,i,s]=t;if(this.destroyed)return null;if(this.commonObjs.has(r))return null;switch(i){case"Font":if("error"in s){const e=s.error;az("Error during font loading: ".concat(e)),this.commonObjs.resolve(r,e);break}const t=new dY(s),a=this._params.pdfBug&&null!==(n=globalThis.FontInspector)&&void 0!==n&&n.enabled?(e,t)=>globalThis.FontInspector.fontAdded(e,t):null,o=new gq(t,a,s.extra,s.charProcOperatorList);this.fontLoader.bind(o).catch(()=>e.sendWithPromise("FontFallback",{id:r})).finally(()=>{!o.fontExtraProperties&&o.data&&o.clearData(),this.commonObjs.resolve(r,o)});break;case"CopyLocalImage":const{imageRef:l}=s;lz(l,"The imageRef must be defined.");for(const e of tB(yJ,this).values())for(const[,t]of e.objs)if((null===t||void 0===t?void 0:t.ref)===l)return t.dataLen?(this.commonObjs.resolve(r,structuredClone(t)),t.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(r,s);break;default:throw new Error("Got unknown common object type ".concat(i))}return null}),e.on("obj",e=>{let[t,n,r,i]=e;if(this.destroyed)return;const s=tB(yJ,this).get(n);var a;if(!s.objs.has(t))if(0!==s._intentStates.size)switch(r){case"Image":case"Pattern":s.objs.resolve(t,i);break;default:throw new Error("Got unknown object type ".concat(r))}else null===i||void 0===i||null===(a=i.bitmap)||void 0===a||a.close()}),e.on("DocProgress",e=>{var n;this.destroyed||null===(n=t.onProgress)||void 0===n||n.call(t,{loaded:e.loaded,total:e.total})}),e.on("FetchBinaryData",async e=>{if(this.destroyed)throw new Error("Worker was destroyed.");const t=this[e.type];if(!t)throw new Error("".concat(e.type," not initialized, see the `useWorkerFetch` parameter."));return t.fetch(e)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var e,t;this.annotationStorage.size<=0&&az("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:n,transfer:r}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:n,filename:null!==(e=null===(t=this._fullReader)||void 0===t?void 0:t.filename)&&void 0!==e?e:null},r).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=tB(xJ,this).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(n=>{if(this.destroyed)throw new Error("Transport destroyed");n.refStr&&tB(bJ,this).set(n.refStr,e);const r=new tJ(t,n,this,this._params.pdfBug);return tB(yJ,this).set(t,r),r});return tB(xJ,this).set(t,r),r}getPageIndex(e){return yq(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return ZF(jJ,this,kJ).call(this,"GetFieldObjects")}hasJSActions(){return ZF(jJ,this,kJ).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return"string"!==typeof e?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getAnnotationsByType(e,t){return this.messageHandler.sendWithPromise("GetAnnotationsByType",{types:e,pageIndexesToSkip:t})}getDocJSActions(){return ZF(jJ,this,kJ).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return ZF(jJ,this,kJ).call(this,"GetOptionalContentConfig").then(t=>new IY(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=tB(vJ,this).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(e=>{var t,n,r,i;return{info:e[0],metadata:e[1]?new kY(e[1]):null,contentDispositionFilename:null!==(t=null===(n=this._fullReader)||void 0===n?void 0:n.filename)&&void 0!==t?t:null,contentLength:null!==(r=null===(i=this._fullReader)||void 0===i?void 0:i.contentLength)&&void 0!==r?r:null}});return tB(vJ,this).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of tB(yJ,this).values()){if(!e.cleanup())throw new Error("startCleanup: Page ".concat(e.pageNumber," is currently rendering."))}this.commonObjs.clear(),e||this.fontLoader.clear(),tB(vJ,this).clear(),this.filterFactory.destroy(!0),PX.cleanup()}}cachedPageNumber(e){var t;if(!yq(e))return null;const n=0===e.gen?"".concat(e.num,"R"):"".concat(e.num,"R").concat(e.gen);return null!==(t=tB(bJ,this).get(n))&&void 0!==t?t:null}}function kJ(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=tB(vJ,this).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return tB(vJ,this).set(e,r),r}var AJ=new WeakMap;class SJ{constructor(e){QF(this,AJ,null),(0,ol.A)(this,"onContinue",null),(0,ol.A)(this,"onError",null),nB(AJ,this,e)}get promise(){return tB(AJ,this).capability.promise}cancel(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;tB(AJ,this).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=tB(AJ,this).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=tB(AJ,this);return e.form||e.canvas&&(null===t||void 0===t?void 0:t.size)>0}}var _J=new WeakMap;class CJ{constructor(e){let{callback:t,params:n,objs:r,commonObjs:i,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:c,useRequestAnimationFrame:d=!1,pdfBug:u=!1,pageColors:h=null,enableHWA:p=!1,operationsFilter:m=null}=e;QF(this,_J,null),this.callback=t,this.params=n,this.objs=r,this.commonObjs=i,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=c,this._pdfBug=u,this.pageColors=h,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=!0===d&&"undefined"!==typeof window,this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new SJ(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=n.canvas,this._canvasContext=n.canvas?null:n.canvasContext,this._enableHWA=p,this._dependencyTracker=n.dependencyTracker,this._operationsFilter=m}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics(e){var t,n;let{transparency:r=!1,optionalContentConfig:i}=e;if(this.cancelled)return;if(this._canvas){if(EJ._.has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");EJ._.add(this._canvas)}this._pdfBug&&null!==(t=globalThis.StepperManager)&&void 0!==t&&t.enabled&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{viewport:s,transform:a,background:o,dependencyTracker:l}=this.params,c=this._canvasContext||this._canvas.getContext("2d",{alpha:!1,willReadFrequently:!this._enableHWA});this.gfx=new HK(c,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:i},this.annotationCanvasMap,this.pageColors,l),this.gfx.beginDrawing({transform:a,viewport:s,transparency:r,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,null===(n=this.graphicsReadyCallback)||void 0===n||n.call(this)}cancel(){var e,t,n;let r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.running=!1,this.cancelled=!0,null===(e=this.gfx)||void 0===e||e.endDrawing(),tB(_J,this)&&(window.cancelAnimationFrame(tB(_J,this)),nB(_J,this,null)),EJ._.delete(this._canvas),r||(r=new Fz("Rendering cancelled, page ".concat(this._pageIndex+1),i)),this.callback(r),null===(t=(n=this.task).onError)||void 0===t||t.call(n,r)}operatorListChanged(){var e,t;this.graphicsReady?(null===(e=this.gfx.dependencyTracker)||void 0===e||e.growOperationsCount(this.operatorList.fnArray.length),null===(t=this.stepper)||void 0===t||t.updateOperatorList(this.operatorList),this.running||this._continue()):this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound)}_continue(){this.running=!0,this.cancelled||(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?nB(_J,this,window.requestAnimationFrame(()=>{nB(_J,this,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper,this._operationsFilter),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),EJ._.delete(this._canvas),this.callback())))}}var EJ={_:new WeakSet};var PJ=new WeakMap,TJ=new WeakMap,MJ=new WeakMap,DJ=new WeakMap,OJ=new WeakMap,RJ=new WeakMap,IJ=new WeakMap,LJ=new WeakMap,FJ=new WeakMap,BJ=new WeakMap,zJ=new WeakSet;class WJ{static get _keyboardManager(){return uz(this,"_keyboardManager",new qW([[["Escape","mac+Escape"],WJ.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],WJ.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],WJ.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],WJ.prototype._moveToPrevious],[["Home","mac+Home"],WJ.prototype._moveToBeginning],[["End","mac+End"],WJ.prototype._moveToEnd]]))}constructor(e){var t,n;let{editor:r=null,uiManager:i=null}=e;$F(this,zJ),QF(this,PJ,null),QF(this,TJ,null),QF(this,MJ,void 0),QF(this,DJ,null),QF(this,OJ,!1),QF(this,RJ,!1),QF(this,IJ,null),QF(this,LJ,void 0),QF(this,FJ,null),QF(this,BJ,null),r?(nB(RJ,this,!1),nB(IJ,this,r)):nB(RJ,this,!0),nB(BJ,this,(null===r||void 0===r?void 0:r._uiManager)||i),nB(LJ,this,tB(BJ,this)._eventBus),nB(MJ,this,(null===r||void 0===r||null===(t=r.color)||void 0===t?void 0:t.toUpperCase())||(null===(n=tB(BJ,this))||void 0===n?void 0:n.highlightColors.values().next().value)||"#FFFF98"),YJ._||(YJ._=Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}renderButton(){const e=nB(PJ,this,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.ariaHasPopup="true",tB(IJ,this)&&(e.ariaControls="".concat(tB(IJ,this).id,"_colorpicker_dropdown"));const t=tB(BJ,this)._signal;e.addEventListener("click",ZF(zJ,this,qJ).bind(this),{signal:t}),e.addEventListener("keydown",ZF(zJ,this,HJ).bind(this),{signal:t});const n=nB(TJ,this,document.createElement("span"));return n.className="swatch",n.ariaHidden="true",n.style.backgroundColor=tB(MJ,this),e.append(n),e}renderMainDropdown(){const e=nB(DJ,this,ZF(zJ,this,UJ).call(this));return e.ariaOrientation="horizontal",e.ariaLabelledBy="highlightColorPickerLabel",e}_colorSelectFromKeyboard(e){if(e.target===tB(PJ,this))return void ZF(zJ,this,qJ).call(this,e);const t=e.target.getAttribute("data-color");t&&ZF(zJ,this,VJ).call(this,t,e)}_moveToNext(e){var t,n;eB(zJ,this,KJ)?e.target!==tB(PJ,this)?null===(t=e.target.nextSibling)||void 0===t||t.focus():null===(n=tB(DJ,this).firstChild)||void 0===n||n.focus():ZF(zJ,this,qJ).call(this,e)}_moveToPrevious(e){var t,n;e.target!==(null===(t=tB(DJ,this))||void 0===t?void 0:t.firstChild)&&e.target!==tB(PJ,this)?(eB(zJ,this,KJ)||ZF(zJ,this,qJ).call(this,e),null===(n=e.target.previousSibling)||void 0===n||n.focus()):eB(zJ,this,KJ)&&this._hideDropdownFromKeyboard()}_moveToBeginning(e){var t;eB(zJ,this,KJ)?null===(t=tB(DJ,this).firstChild)||void 0===t||t.focus():ZF(zJ,this,qJ).call(this,e)}_moveToEnd(e){var t;eB(zJ,this,KJ)?null===(t=tB(DJ,this).lastChild)||void 0===t||t.focus():ZF(zJ,this,qJ).call(this,e)}hideDropdown(){var e,t;null===(e=tB(DJ,this))||void 0===e||e.classList.add("hidden"),tB(PJ,this).ariaExpanded="false",null===(t=tB(FJ,this))||void 0===t||t.abort(),nB(FJ,this,null)}_hideDropdownFromKeyboard(){var e;tB(RJ,this)||(eB(zJ,this,KJ)?(this.hideDropdown(),tB(PJ,this).focus({preventScroll:!0,focusVisible:tB(OJ,this)})):null===(e=tB(IJ,this))||void 0===e||e.unselect())}updateColor(e){if(tB(TJ,this)&&(tB(TJ,this).style.backgroundColor=e),!tB(DJ,this))return;const t=tB(BJ,this).highlightColors.values();for(const n of tB(DJ,this).children)n.ariaSelected=t.next().value===e.toUpperCase()}destroy(){var e,t;null===(e=tB(PJ,this))||void 0===e||e.remove(),nB(PJ,this,null),nB(TJ,this,null),null===(t=tB(DJ,this))||void 0===t||t.remove(),nB(DJ,this,null)}}function UJ(){const e=document.createElement("div"),t=tB(BJ,this)._signal;e.addEventListener("contextmenu",Vz,{signal:t}),e.className="dropdown",e.role="listbox",e.ariaMultiSelectable="false",e.ariaOrientation="vertical",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown"),tB(IJ,this)&&(e.id="".concat(tB(IJ,this).id,"_colorpicker_dropdown"));for(const[n,r]of tB(BJ,this).highlightColors){const i=document.createElement("button");i.tabIndex="0",i.role="option",i.setAttribute("data-color",r),i.title=n,i.setAttribute("data-l10n-id",YJ._[n]);const s=document.createElement("span");i.append(s),s.className="swatch",s.style.backgroundColor=r,i.ariaSelected=r===tB(MJ,this),i.addEventListener("click",ZF(zJ,this,VJ).bind(this,r),{signal:t}),e.append(i)}return e.addEventListener("keydown",ZF(zJ,this,HJ).bind(this),{signal:t}),e}function VJ(e,t){t.stopPropagation(),tB(LJ,this).dispatch("switchannotationeditorparams",{source:this,type:IB.HIGHLIGHT_COLOR,value:e}),this.updateColor(e)}function HJ(e){fB._keyboardManager.exec(this,e)}function qJ(e){if(eB(zJ,this,KJ))return void this.hideDropdown();if(nB(OJ,this,0===e.detail),tB(FJ,this)||(nB(FJ,this,new AbortController),window.addEventListener("pointerdown",ZF(zJ,this,GJ).bind(this),{signal:tB(BJ,this).combinedSignal(tB(FJ,this))})),tB(PJ,this).ariaExpanded="true",tB(DJ,this))return void tB(DJ,this).classList.remove("hidden");const t=nB(DJ,this,ZF(zJ,this,UJ).call(this));tB(PJ,this).append(t)}function GJ(e){var t;null!==(t=tB(DJ,this))&&void 0!==t&&t.contains(e.target)||this.hideDropdown()}function KJ(e){return tB(DJ,e)&&!tB(DJ,e).classList.contains("hidden")}fB=WJ;var YJ={_:null},XJ=new WeakMap,JJ=new WeakMap,$J=new WeakMap;class QJ{constructor(e){QF(this,XJ,null),QF(this,JJ,null),QF(this,$J,null),nB(JJ,this,e),nB($J,this,e._uiManager),ZJ._||(ZJ._=Object.freeze({freetext:"pdfjs-editor-color-picker-free-text-input",ink:"pdfjs-editor-color-picker-ink-input"}))}renderButton(){if(tB(XJ,this))return tB(XJ,this);const{editorType:e,colorType:t,colorValue:n}=tB(JJ,this),r=nB(XJ,this,document.createElement("input"));return r.type="color",r.value=n||"#000000",r.className="basicColorPicker",r.tabIndex=0,r.setAttribute("data-l10n-id",ZJ._[e]),r.addEventListener("input",()=>{tB($J,this).updateParams(t,r.value)},{signal:tB($J,this)._signal}),r}update(e){tB(XJ,this)&&(tB(XJ,this).value=e)}destroy(){var e;null===(e=tB(XJ,this))||void 0===e||e.remove(),nB(XJ,this,null)}hideDropdown(){}}var ZJ={_:null};function e$(e){return Math.floor(255*Math.max(0,Math.min(1,e))).toString(16).padStart(2,"0")}function t$(e){return Math.max(0,Math.min(255,255*e))}class n${static CMYK_G(e){let[t,n,r,i]=e;return["G",1-Math.min(1,.3*t+.59*r+.11*n+i)]}static G_CMYK(e){let[t]=e;return["CMYK",0,0,0,1-t]}static G_RGB(e){let[t]=e;return["RGB",t,t,t]}static G_rgb(e){let[t]=e;return t=t$(t),[t,t,t]}static G_HTML(e){let[t]=e;const n=e$(t);return"#".concat(n).concat(n).concat(n)}static RGB_G(e){let[t,n,r]=e;return["G",.3*t+.59*n+.11*r]}static RGB_rgb(e){return e.map(t$)}static RGB_HTML(e){return"#".concat(e.map(e$).join(""))}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB(e){let[t,n,r,i]=e;return["RGB",1-Math.min(1,t+i),1-Math.min(1,r+i),1-Math.min(1,n+i)]}static CMYK_rgb(e){let[t,n,r,i]=e;return[t$(1-Math.min(1,t+i)),t$(1-Math.min(1,r+i)),t$(1-Math.min(1,n+i))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK(e){let[t,n,r]=e;const i=1-t,s=1-n,a=1-r;return["CMYK",i,s,a,Math.min(i,s,a)]}}class r${create(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width","".concat(e,"px")),r.setAttribute("height","".concat(t,"px"))),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox","0 0 ".concat(e," ").concat(t)),r}createElement(e){if("string"!==typeof e)throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){oz("Abstract method `_createSVG` called.")}}class i$ extends r${_createSVG(e){return document.createElementNS(Oz,e)}}const s$=new WeakSet,a$=60*(new Date).getTimezoneOffset()*1e3;class o${static create(e){switch(e.data.annotationType){case HB.LINK:return new g$(e);case HB.TEXT:return new b$(e);case HB.WIDGET:switch(e.data.fieldType){case"Tx":return new j$(e);case"Btn":return e.data.radioButton?new A$(e):e.data.checkBox?new k$(e):new S$(e);case"Ch":return new _$(e);case"Sig":return new N$(e)}return new w$(e);case HB.POPUP:return new E$(e);case HB.FREETEXT:return new yQ(e);case HB.LINE:return new bQ(e);case HB.SQUARE:return new jQ(e);case HB.CIRCLE:return new kQ(e);case HB.POLYLINE:return new SQ(e);case HB.CARET:return new CQ(e);case HB.INK:return new MQ(e);case HB.POLYGON:return new _Q(e);case HB.HIGHLIGHT:return new OQ(e);case HB.UNDERLINE:return new RQ(e);case HB.SQUIGGLY:return new IQ(e);case HB.STRIKEOUT:return new LQ(e);case HB.STAMP:return new FQ(e);case HB.FILEATTACHMENT:return new WQ(e);default:return new h$(e)}}}var l$=new WeakMap,c$=new WeakMap,d$=new WeakMap,u$=new WeakSet;class h${constructor(e){let{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};$F(this,u$),QF(this,l$,null),QF(this,c$,!1),QF(this,d$,null),this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableComment=e.enableComment,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData(e){let{contentsObj:t,richText:n}=e;return!!(null!==t&&void 0!==t&&t.str||null!==n&&void 0!==n&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return h$._hasPopupData(this.data)||this.enableComment&&!!this.commentText}get commentData(){var e;const{data:t}=this,n=null===(e=this.annotationStorage)||void 0===e?void 0:e.getEditor(t.id);return n?n.getData():t}get hasCommentButton(){return this.enableComment&&this.hasPopupElement}get commentButtonPosition(){var e;const t=null===(e=this.annotationStorage)||void 0===e?void 0:e.getEditor(this.data.id);if(t)return t.commentButtonPositionInPage;const{quadPoints:n,inkLists:r,rect:i}=this.data;let s=-1/0,a=-1/0;if((null===n||void 0===n?void 0:n.length)>=8){for(let e=0;e<n.length;e+=8)n[e+1]>a?(a=n[e+1],s=n[e+2]):n[e+1]===a&&(s=Math.max(s,n[e+2]));return[s,a]}if((null===r||void 0===r?void 0:r.length)>=1){for(const e of r)for(let t=0,n=e.length;t<n;t+=2)e[t+1]>a?(a=e[t+1],s=e[t]):e[t+1]===a&&(s=Math.max(s,e[t]));if(s!==1/0)return[s,a]}return i?[i[2],i[3]]:null}_normalizePoint(e){const{page:{view:t},viewport:{rawDims:{pageWidth:n,pageHeight:r,pageX:i,pageY:s}}}=this.parent;return e[1]=t[3]-e[1]+t[1],e[0]=100*(e[0]-i)/n,e[1]=100*(e[1]-s)/r,e}get commentText(){var e,t;const{data:n}=this;return(null===(e=this.annotationStorage.getRawValue("".concat(OB).concat(n.id)))||void 0===e||null===(e=e.popup)||void 0===e?void 0:e.contents)||(null===(t=n.contentsObj)||void 0===t?void 0:t.str)||""}set commentText(e){const{data:t}=this,n={deleted:!e,contents:e||""};this.annotationStorage.updateEditor(t.id,{popup:n})||this.annotationStorage.setValue("".concat(OB).concat(t.id),{id:t.id,annotationType:t.annotationType,pageIndex:this.parent.page._pageIndex,popup:n,popupRef:t.popupRef,modificationDate:new Date}),e||this.removePopup()}removePopup(){var e,t;null===(e=(null===(t=tB(d$,this))||void 0===t?void 0:t.popup)||this.popup)||void 0===e||e.remove(),nB(d$,this,this.popup=null)}updateEdited(e){var t;if(!this.container)return;e.rect&&(tB(l$,this)||nB(l$,this,{rect:this.data.rect.slice(0)}));const{rect:n,popup:r}=e;n&&ZF(u$,this,p$).call(this,n);let i=(null===(t=tB(d$,this))||void 0===t?void 0:t.popup)||this.popup;!i&&null!==r&&void 0!==r&&r.text&&(this._createPopup(r),i=tB(d$,this).popup),i&&(i.updateEdited(e),null!==r&&void 0!==r&&r.deleted&&(i.remove(),nB(d$,this,null),this.popup=null))}resetEdited(){var e;tB(l$,this)&&(ZF(u$,this,p$).call(this,tB(l$,this).rect),null===(e=tB(d$,this))||void 0===e||e.popup.resetEdited(),nB(l$,this,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,i=document.createElement("section");i.setAttribute("data-annotation-id",t.id),this instanceof w$||this instanceof g$||(i.tabIndex=0);const{style:s}=i;if(s.zIndex=this.parent.zIndex,this.parent.zIndex+=2,t.alternativeText&&(i.title=t.alternativeText),t.noRotate&&i.classList.add("norotate"),!t.rect||this instanceof E$){const{rotation:e}=t;return t.hasOwnCanvas||0===e||this.setRotation(e,i),i}const{width:a,height:o}=this;if(!e&&t.borderStyle.width>0){s.borderWidth="".concat(t.borderStyle.width,"px");const e=t.borderStyle.horizontalCornerRadius,n=t.borderStyle.verticalCornerRadius;if(e>0||n>0){const t="calc(".concat(e,"px * var(--total-scale-factor)) / calc(").concat(n,"px * var(--total-scale-factor))");s.borderRadius=t}else if(this instanceof A$){const e="calc(".concat(a,"px * var(--total-scale-factor)) / calc(").concat(o,"px * var(--total-scale-factor))");s.borderRadius=e}switch(t.borderStyle.style){case qB:s.borderStyle="solid";break;case GB:s.borderStyle="dashed";break;case KB:az("Unimplemented border style: beveled");break;case YB:az("Unimplemented border style: inset");break;case XB:s.borderBottomStyle="solid"}const r=t.borderColor||null;r?(nB(c$,this,!0),s.borderColor=Nz.makeHexColor(0|r[0],0|r[1],0|r[2])):s.borderWidth=0}const l=Nz.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:d,pageX:u,pageY:h}=r.rawDims;s.left="".concat(100*(l[0]-u)/c,"%"),s.top="".concat(100*(l[1]-h)/d,"%");const{rotation:p}=t;return t.hasOwnCanvas||0===p?(s.width="".concat(100*a/c,"%"),s.height="".concat(100*o/d,"%")):this.setRotation(p,i),i}setRotation(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.container;if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims;let{width:i,height:s}=this;e%180!==0&&([i,s]=[s,i]),t.style.width="".concat(100*i/n,"%"),t.style.height="".concat(100*s/r,"%"),t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(e,t,n)=>{const r=n.detail[e],i=r[0],s=r.slice(1);n.target.style[t]=n$["".concat(i,"_HTML")](s),this.annotationStorage.setValue(this.data.id,{[t]:n$["".concat(i,"_rgb")](s)})};return uz(this,"_commonActions",{display:e=>{const{display:t}=e.detail,n=t%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:1===t||2===t})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:t}=e.detail;this.container.style.visibility=t?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:t,noView:t})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:e=>{const t=e.detail.rotation;this.setRotation(t),this.annotationStorage.setValue(this.data.id,{rotation:t})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const i=e[r]||n[r];null===i||void 0===i||i(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,i]of Object.entries(t)){const s=n[r];if(s){s({detail:{[r]:i},target:e}),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,i]=this.data.rect.map(e=>Math.fround(e));if(8===e.length){const[s,a,o,l]=e.subarray(2,6);if(r===s&&i===a&&t===o&&n===l)return}const{style:s}=this.container;let a;if(tB(c$,this)){const{borderColor:e,borderWidth:t}=s;s.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">','<g fill="transparent" stroke="'.concat(e,'" stroke-width="').concat(t,'">')],this.container.classList.add("hasBorder")}const o=r-t,l=i-n,{svgFactory:c}=this,d=c.createElement("svg");d.classList.add("quadrilateralsContainer"),d.setAttribute("width",0),d.setAttribute("height",0),d.role="none";const u=c.createElement("defs");d.append(u);const h=c.createElement("clipPath"),p="clippath_".concat(this.data.id);h.setAttribute("id",p),h.setAttribute("clipPathUnits","objectBoundingBox"),u.append(h);for(let f=2,g=e.length;f<g;f+=8){var m;const n=e[f],r=e[f+1],s=e[f+2],d=e[f+3],u=c.createElement("rect"),p=(s-t)/o,g=(i-r)/l,v=(n-s)/o,y=(r-d)/l;u.setAttribute("x",p),u.setAttribute("y",g),u.setAttribute("width",v),u.setAttribute("height",y),h.append(u),null===(m=a)||void 0===m||m.push('<rect vector-effect="non-scaling-stroke" x="'.concat(p,'" y="').concat(g,'" width="').concat(v,'" height="').concat(y,'"/>'))}tB(c$,this)&&(a.push("</g></svg>')"),s.backgroundImage=a.join("")),this.container.append(d),this.container.style.clipPath="url(#".concat(p,")")}_createPopup(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;const{data:t}=this;let n,r;e?(n={str:e.text},r=e.date):(n=t.contentsObj,r=t.modificationDate);const i=nB(d$,this,new E$({data:{color:t.color,titleObj:t.titleObj,modificationDate:r,contentsObj:n,richText:t.richText,parentRect:t.rect,borderStyle:0,id:"popup_".concat(t.id),rotation:t.rotation,noRotate:!0},linkService:this.linkService,parent:this.parent,elements:[this]}));this.parent._commentManager||this.parent.div.append(i.render())}get hasPopupElement(){return!!(tB(d$,this)||this.popup||this.data.popupRef)}get extraPopupElement(){return tB(d$,this)}render(){oz("Abstract method `AnnotationElement.render` called")}_getElementsByName(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:e,id:i,exportValues:s}of r){if(-1===e)continue;if(i===t)continue;const r="string"===typeof s?s:null,a=document.querySelector('[data-element-id="'.concat(i,'"]'));!a||s$.has(a)?n.push({id:i,exportValue:r,domElement:a}):az("_getElementsByName - element not allowed: ".concat(i))}return n}for(const r of document.getElementsByName(e)){const{exportValue:e}=r,i=r.getAttribute("data-element-id");i!==t&&(s$.has(r)&&n.push({id:i,exportValue:e,domElement:r}))}return n}show(){var e;this.container&&(this.container.hidden=!1),null===(e=this.popup)||void 0===e||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),null===(e=this.popup)||void 0===e||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t,mustEnterInEditMode:!0})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}}function p$(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:i,pageHeight:s,pageX:a,pageY:o}}}}=this;null===n||void 0===n||n.splice(0,4,...e),t.left="".concat(100*(e[0]-a)/i,"%"),t.top="".concat(100*(s-e[3]+o)/s,"%"),0===r?(t.width="".concat(100*(e[2]-e[0])/i,"%"),t.height="".concat(100*(e[3]-e[1])/s,"%")):this.setRotation(r)}class m$ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.editor=e.editor}render(){return this.container.className="editorAnnotation",this.container}createOrUpdatePopup(){const{editor:e}=this;e.hasComment&&(this._createPopup(e.comment),this.extraPopupElement.popup.renderCommentButton())}get hasCommentButton(){return this.enableComment&&this.editor.hasComment}get commentButtonPosition(){return this.editor.commentButtonPositionInPage}get commentText(){return this.editor.comment.text}set commentText(e){this.editor.comment=e,e||this.removePopup()}get commentData(){return this.editor.getData()}remove(){this.container.remove(),this.container=null,this.removePopup()}}var f$=new WeakSet;class g$ extends h${constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;super(e,{isRenderable:!0,ignoreBorder:!(null===t||void 0===t||!t.ignoreBorder),createQuadrilaterals:!0}),$F(this,f$),this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:t}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(t.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action,e.overlaidText),r=!0):e.attachment?(ZF(f$,this,y$).call(this,n,e.attachment,e.overlaidText,e.attachmentDest),r=!0):e.setOCGState?(ZF(f$,this,x$).call(this,n,e.setOCGState,e.overlaidText),r=!0):e.dest?(this._bindLink(n,e.dest,e.overlaidText),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getDestinationHash(t),e.onclick=()=>(t&&this.linkService.goToDestination(t),!1),(t||""===t)&&ZF(f$,this,v$).call(this),n&&(e.title=n)}_bindNamedAction(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(t),!1),n&&(e.title=n),ZF(f$,this,v$).call(this)}_bindJSAction(e,t){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(t.actions)){const i=n.get(r);i&&(e[i]=()=>{var e;return null===(e=this.linkService.eventBus)||void 0===e||e.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t.id,name:r}}),!1})}t.overlaidText&&(e.title=t.overlaidText),e.onclick||(e.onclick=()=>!1),ZF(f$,this,v$).call(this)}_bindResetFormAction(e,t){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),ZF(f$,this,v$).call(this),!this._fieldObjects)return az('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),void(n||(e.onclick=()=>!1));e.onclick=()=>{null===n||void 0===n||n();const{fields:e,refs:r,include:i}=t,s=[];if(0!==e.length||0!==r.length){const t=new Set(r);for(const n of e){const e=this._fieldObjects[n]||[];for(const{id:n}of e)t.add(n)}for(const e of Object.values(this._fieldObjects))for(const n of e)t.has(n.id)===i&&s.push(n)}else for(const t of Object.values(this._fieldObjects))s.push(...t);const a=this.annotationStorage,o=[];for(const t of s){const{id:e}=t;switch(o.push(e),t.type){case"text":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}case"checkbox":case"radiobutton":{const n=t.defaultValue===t.exportValues;a.setValue(e,{value:n});break}case"combobox":case"listbox":{const n=t.defaultValue||"";a.setValue(e,{value:n});break}default:continue}const n=document.querySelector('[data-element-id="'.concat(e,'"]'));n&&(s$.has(n)?n.dispatchEvent(new Event("resetform")):az("_bindResetFormAction - element not allowed: ".concat(e)))}var l;this.enableScripting&&(null===(l=this.linkService.eventBus)||void 0===l||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:o,name:"ResetForm"}}));return!1}}}function v$(){this.container.setAttribute("data-internal-link","")}function y$(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;e.href=this.linkService.getAnchorUrl(""),t.description?e.title=t.description:n&&(e.title=n),e.onclick=()=>{var e;return null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(t.content,t.filename,r),!1},ZF(f$,this,v$).call(this)}function x$(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(t),!1),n&&(e.title=n),ZF(f$,this,v$).call(this)}class b$ extends h${constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class w$ extends h${render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&("CANVAS"===(null===(t=e.previousSibling)||void 0===t?void 0:t.nodeName)&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return wz.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,i){n.includes("mouse")?e.addEventListener(n,e=>{var t;null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(e),shift:e.shiftKey,modifier:this._getKeyModifier(e)}})}):e.addEventListener(n,e=>{var s;if("blur"===n){if(!t.focused||!e.relatedTarget)return;t.focused=!1}else if("focus"===n){if(t.focused)return;t.focused=!0}i&&(null===(s=this.linkService.eventBus)||void 0===s||s.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:i(e)}}))})}_setEventListeners(e,t,n,r){for(const[o,l]of n){var i,s,a;if("Action"===l||null!==(i=this.data.actions)&&void 0!==i&&i[l])"Focus"!==l&&"Blur"!==l||t||(t={focused:!1}),this._setEventListener(e,t,o,l,r),"Focus"!==l||null!==(s=this.data.actions)&&void 0!==s&&s.Blur?"Blur"!==l||null!==(a=this.data.actions)&&void 0!==a&&a.Focus||this._setEventListener(e,t,"focus","Focus",null):this._setEventListener(e,t,"blur","Blur",null)}}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=null===t?"transparent":Nz.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||9,i=e.style;let s;const a=e=>Math.round(10*e)/10;if(this.data.multiLine){const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2),t=e/(Math.round(e/(kB*r))||1);s=Math.min(r,a(t/kB))}else{const e=Math.abs(this.data.rect[3]-this.data.rect[1]-2);s=Math.min(r,a(e/kB))}i.fontSize="calc(".concat(s,"px * var(--total-scale-factor))"),i.color=Nz.makeHexColor(n[0],n[1],n[2]),null!==this.data.textAlignment&&(i.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class j$ extends w${constructor(e){super(e,{isRenderable:e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue})}setPropertyOnSiblings(e,t,n,r){const i=this.annotationStorage;for(const s of this._getElementsByName(e.name,e.id))s.domElement&&(s.domElement[t]=n),i.setValue(s.id,{[r]:n})}render(){const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){var r;const s=e.getValue(t,{value:this.data.fieldValue});let a=s.value||"";const o=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;o&&a.length>o&&(a=a.slice(0,o));let l=s.formattedValue||(null===(r=this.data.textContent)||void 0===r?void 0:r.join("\n"))||null;l&&this.data.comb&&(l=l.replaceAll(/\s+/g,""));const c={userValue:a,formattedValue:l,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=null!==l&&void 0!==l?l:a,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type=this.data.password?"password":"text",n.setAttribute("value",null!==l&&void 0!==l?l:a),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),s$.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=0;const{datetimeFormat:d,datetimeType:u,timeStep:h}=this.data,p=!!u&&this.enableScripting;d&&(n.title=d),this._setRequired(n,this.data.required),o&&(n.maxLength=o),n.addEventListener("input",r=>{e.setValue(t,{value:r.target.value}),this.setPropertyOnSiblings(n,"value",r.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",e=>{var t;const r=null!==(t=this.data.defaultFieldValue)&&void 0!==t?t:"";n.value=c.userValue=r,c.formattedValue=null});let m=e=>{const{formattedValue:t}=c;null!==t&&void 0!==t&&(e.target.value=t),e.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){var i;n.addEventListener("focus",e=>{var t;if(c.focused)return;const{target:n}=e;if(p&&(n.type=u,h&&(n.step=h)),c.userValue){const e=c.userValue;if(p)if("time"===u){const t=new Date(e),r=[t.getHours(),t.getMinutes(),t.getSeconds()];n.value=r.map(e=>e.toString().padStart(2,"0")).join(":")}else n.value=new Date(e-a$).toISOString().split("date"===u?"T":".",1)[0];else n.value=e}c.lastCommittedValue=n.value,c.commitKey=1,null!==(t=this.data.actions)&&void 0!==t&&t.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",n=>{this.showElementAndHideCanvas(n.target);const r={value(n){var r;c.userValue=null!==(r=n.detail.value)&&void 0!==r?r:"",p||e.setValue(t,{value:c.userValue.toString()}),n.target.value=c.userValue},formattedValue(n){const{formattedValue:r}=n.detail;c.formattedValue=r,null!==r&&void 0!==r&&n.target!==document.activeElement&&(n.target.value=r);const i={formattedValue:r};p&&(i.value=r),e.setValue(t,i)},selRange(e){e.target.setSelectionRange(...e.detail.selRange)},charLimit:n=>{var r;const{charLimit:i}=n.detail,{target:s}=n;if(0===i)return void s.removeAttribute("maxLength");s.setAttribute("maxLength",i);let a=c.userValue;!a||a.length<=i||(a=a.slice(0,i),s.value=c.userValue=a,e.setValue(t,{value:a}),null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:a,willCommit:!0,commitKey:1,selStart:s.selectionStart,selEnd:s.selectionEnd}}))}};this._dispatchEventFromSandbox(r,n)}),n.addEventListener("keydown",e=>{var n;c.commitKey=1;let r=-1;if("Escape"===e.key?r=0:"Enter"!==e.key||this.data.multiLine?"Tab"===e.key&&(c.commitKey=3):r=2,-1===r)return;const{value:i}=e.target;c.lastCommittedValue!==i&&(c.lastCommittedValue=i,c.userValue=i,null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:i,willCommit:!0,commitKey:r,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}))});const r=m;m=null,n.addEventListener("blur",e=>{var n;if(!c.focused||!e.relatedTarget)return;null!==(n=this.data.actions)&&void 0!==n&&n.Blur||(c.focused=!1);const{target:i}=e;let{value:s}=i;if(p){if(s&&"time"===u){const e=s.split(":").map(e=>parseInt(e,10));s=new Date(2e3,0,1,e[0],e[1],e[2]||0).valueOf(),i.step=""}else s.includes("T")||(s="".concat(s,"T00:00")),s=new Date(s).valueOf();i.type="text"}var a;(c.userValue=s,c.lastCommittedValue!==s)&&(null===(a=this.linkService.eventBus)||void 0===a||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,willCommit:!0,commitKey:c.commitKey,selStart:e.target.selectionStart,selEnd:e.target.selectionEnd}}));r(e)}),null!==(i=this.data.actions)&&void 0!==i&&i.Keystroke&&n.addEventListener("beforeinput",e=>{var n;c.lastCommittedValue=null;const{data:r,target:i}=e,{value:s,selectionStart:a,selectionEnd:o}=i;let l=a,d=o;switch(e.inputType){case"deleteWordBackward":{const e=s.substring(0,a).match(/\w*[^\w]*$/);e&&(l-=e[0].length);break}case"deleteWordForward":{const e=s.substring(a).match(/^[^\w]*\w*/);e&&(d+=e[0].length);break}case"deleteContentBackward":a===o&&(l-=1);break;case"deleteContentForward":a===o&&(d+=1)}e.preventDefault(),null===(n=this.linkService.eventBus)||void 0===n||n.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:s,change:r||"",willCommit:!1,selStart:l,selEnd:d}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.value)}if(m&&n.addEventListener("blur",m),this.data.comb){const e=(this.data.rect[2]-this.data.rect[0])/o;n.classList.add("comb"),n.style.letterSpacing="calc(".concat(e,"px * var(--total-scale-factor) - 1ch)")}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class N$ extends w${constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class k$ extends w${constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;"string"===typeof r&&(r="Off"!==r,e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const i=document.createElement("input");return s$.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="checkbox",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.setAttribute("exportValue",t.exportValue),i.tabIndex=0,i.addEventListener("change",r=>{const{name:i,checked:s}=r.target;for(const a of this._getElementsByName(i,n)){const n=s&&a.exportValue===t.exportValue;a.domElement&&(a.domElement.checked=n),e.setValue(a.id,{value:n})}e.setValue(n,{value:s})}),i.addEventListener("resetform",e=>{const n=t.defaultFieldValue||"Off";e.target.checked=n===t.exportValue}),this.enableScripting&&this.hasJSActions&&(i.addEventListener("updatefromsandbox",t=>{const r={value(t){t.target.checked="Off"!==t.detail.value,e.setValue(n,{value:t.target.checked})}};this._dispatchEventFromSandbox(r,t)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class A$ extends w${constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if("string"===typeof r&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const s of this._getElementsByName(t.fieldName,n))e.setValue(s.id,{value:!1});const i=document.createElement("input");if(s$.add(i),i.setAttribute("data-element-id",n),i.disabled=t.readOnly,this._setRequired(i,this.data.required),i.type="radio",i.name=t.fieldName,r&&i.setAttribute("checked",!0),i.tabIndex=0,i.addEventListener("change",t=>{const{name:r,checked:i}=t.target;for(const s of this._getElementsByName(r,n))e.setValue(s.id,{value:!1});e.setValue(n,{value:i})}),i.addEventListener("resetform",e=>{const n=t.defaultFieldValue;e.target.checked=null!==n&&void 0!==n&&n===t.buttonValue}),this.enableScripting&&this.hasJSActions){const r=t.buttonValue;i.addEventListener("updatefromsandbox",t=>{const i={value:t=>{const i=r===t.detail.value;for(const r of this._getElementsByName(t.target.name)){const t=i&&r.id===n;r.domElement&&(r.domElement.checked=t),e.setValue(r.id,{value:t})}}};this._dispatchEventFromSandbox(i,t)}),this._setEventListeners(i,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],e=>e.target.checked)}return this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class S$ extends g${constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",e=>{this._dispatchEventFromSandbox({},e)})),e}}class _$ extends w${constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");s$.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=0;let i=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",e=>{const t=this.data.defaultFieldValue;for(const n of r.options)n.selected=n.value===t});for(const c of this.data.options){const e=document.createElement("option");e.textContent=c.displayValue,e.value=c.exportValue,n.value.includes(c.exportValue)&&(e.setAttribute("selected",!0),i=!1),r.append(e)}let s=null;if(i){const e=document.createElement("option");e.value=" ",e.setAttribute("hidden",!0),e.setAttribute("selected",!0),r.prepend(e),s=()=>{e.remove(),r.removeEventListener("input",s),s=null},r.addEventListener("input",s)}const a=e=>{const t=e?"value":"textContent",{options:n,multiple:i}=r;return i?Array.prototype.filter.call(n,e=>e.selected).map(e=>e[t]):-1===n.selectedIndex?null:n[n.selectedIndex][t]};let o=a(!1);const l=e=>{const t=e.target.options;return Array.prototype.map.call(t,e=>({displayValue:e.textContent,exportValue:e.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",n=>{const i={value(n){var i;null===(i=s)||void 0===i||i();const l=n.detail.value,c=new Set(Array.isArray(l)?l:[l]);for(const e of r.options)e.selected=c.has(e.value);e.setValue(t,{value:a(!0)}),o=a(!1)},multipleSelection(e){r.multiple=!0},remove(n){const i=r.options,s=n.detail.remove;if(i[s].selected=!1,r.remove(s),i.length>0){-1===Array.prototype.findIndex.call(i,e=>e.selected)&&(i[0].selected=!0)}e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},clear(n){for(;0!==r.length;)r.remove(0);e.setValue(t,{value:null,items:[]}),o=a(!1)},insert(n){const{index:i,displayValue:s,exportValue:c}=n.detail.insert,d=r.children[i],u=document.createElement("option");u.textContent=s,u.value=c,d?d.before(u):r.append(u),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},items(n){const{items:i}=n.detail;for(;0!==r.length;)r.remove(0);for(const e of i){const{displayValue:t,exportValue:n}=e,i=document.createElement("option");i.textContent=t,i.value=n,r.append(i)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:a(!0),items:l(n)}),o=a(!1)},indices(n){const r=new Set(n.detail.indices);for(const e of n.target.options)e.selected=r.has(e.index);e.setValue(t,{value:a(!0)}),o=a(!1)},editable(e){e.target.disabled=!e.detail.editable}};this._dispatchEventFromSandbox(i,n)}),r.addEventListener("input",n=>{var r;const i=a(!0),s=a(!1);e.setValue(t,{value:i}),n.preventDefault(),null===(r=this.linkService.eventBus)||void 0===r||r.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:o,change:s,changeEx:i,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],e=>e.target.value)):r.addEventListener("input",function(n){e.setValue(t,{value:a(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}var C$=new WeakSet;class E$ extends h${constructor(e){const{data:t,elements:n,parent:r}=e,i=!!r._commentManager;if(super(e,{isRenderable:!i&&h$._hasPopupData(t)}),$F(this,C$),this.elements=n,i&&h$._hasPopupData(t)){const e=this.popup=ZF(C$,this,P$).call(this);for(const t of n)t.popup=e}else this.popup=null}render(){const{container:e}=this;e.classList.add("popupAnnotation"),e.role="comment";const t=this.popup=ZF(C$,this,P$).call(this),n=[];for(const r of this.elements)r.popup=t,r.container.ariaHasPopup="dialog",n.push(r.data.id),r.addHighlightArea();return this.container.setAttribute("aria-controls",n.map(e=>"".concat(Ez).concat(e)).join(",")),this.container}}function P$(){return new iQ({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate||this.data.creationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open,commentManager:this.parent._commentManager})}var T$=new WeakMap,M$=new WeakMap,D$=new WeakMap,O$=new WeakMap,R$=new WeakMap,I$=new WeakMap,L$=new WeakMap,F$=new WeakMap,B$=new WeakMap,z$=new WeakMap,W$=new WeakMap,U$=new WeakMap,V$=new WeakMap,H$=new WeakMap,q$=new WeakMap,G$=new WeakMap,K$=new WeakMap,Y$=new WeakMap,X$=new WeakMap,J$=new WeakMap,$$=new WeakMap,Q$=new WeakMap,Z$=new WeakMap,eQ=new WeakMap,tQ=new WeakMap,nQ=new WeakMap,rQ=new WeakSet;class iQ{constructor(e){let{container:t,color:n,elements:r,titleObj:i,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:c,parentRect:d,open:u,commentManager:h=null}=e;$F(this,rQ),QF(this,T$,null),QF(this,M$,ZF(rQ,this,pQ).bind(this)),QF(this,D$,ZF(rQ,this,vQ).bind(this)),QF(this,O$,ZF(rQ,this,gQ).bind(this)),QF(this,R$,ZF(rQ,this,fQ).bind(this)),QF(this,I$,null),QF(this,L$,null),QF(this,F$,null),QF(this,B$,null),QF(this,z$,null),QF(this,W$,null),QF(this,U$,null),QF(this,V$,!1),QF(this,H$,null),QF(this,q$,null),QF(this,G$,null),QF(this,K$,null),QF(this,Y$,null),QF(this,X$,null),QF(this,J$,null),QF(this,$$,null),QF(this,Q$,null),QF(this,Z$,null),QF(this,eQ,!1),QF(this,tQ,null),QF(this,nQ,null),nB(L$,this,t),nB(Q$,this,i),nB(F$,this,a),nB($$,this,o),nB(W$,this,l),nB(I$,this,n),nB(J$,this,c),nB(U$,this,d),nB(z$,this,r),nB(T$,this,h),nB(tQ,this,r[0]),nB(B$,this,qz.toDateObject(s)),this.trigger=r.flatMap(e=>e.getElementsToTriggerPopup()),h?this.renderCommentButton():(ZF(rQ,this,sQ).call(this),tB(L$,this).hidden=!0,u&&ZF(rQ,this,fQ).call(this))}renderCommentButton(){if(tB(K$,this))return;if(tB(Y$,this)||ZF(rQ,this,aQ).call(this),!tB(Y$,this))return;const{signal:e}=nB(q$,this,new AbortController),t=!!tB(tQ,this).extraPopupElement,n=()=>{tB(T$,this).toggleCommentPopup(this,!0,void 0,!t)},r=()=>{tB(T$,this).toggleCommentPopup(this,!1,!0,!t)},i=()=>{tB(T$,this).toggleCommentPopup(this,!1,!1)};if(t){nB(K$,this,tB(tQ,this).container);for(const t of this.trigger)t.ariaHasPopup="dialog",t.ariaControls="commentPopup",t.addEventListener("keydown",tB(M$,this),{signal:e}),t.addEventListener("click",n,{signal:e}),t.addEventListener("pointerenter",r,{signal:e}),t.addEventListener("pointerleave",i,{signal:e}),t.classList.add("popupTriggerArea")}else{const t=nB(K$,this,document.createElement("button"));t.className="annotationCommentButton";const s=tB(tQ,this).container;t.style.zIndex=s.style.zIndex+1,t.tabIndex=0,t.ariaHasPopup="dialog",t.ariaControls="commentPopup",t.setAttribute("data-l10n-id","pdfjs-show-comment-button"),ZF(rQ,this,lQ).call(this),ZF(rQ,this,oQ).call(this),t.addEventListener("keydown",tB(M$,this),{signal:e}),t.addEventListener("click",n,{signal:e}),t.addEventListener("pointerenter",r,{signal:e}),t.addEventListener("pointerleave",i,{signal:e}),s.after(t)}}get commentButtonColor(){const{color:e,opacity:t}=tB(tQ,this).commentData;return e?tB(W$,this)._commentManager.makeCommentColor(e,t):null}focusCommentButton(){setTimeout(()=>{var e;null===(e=tB(K$,this))||void 0===e||e.focus()},0)}getData(){const{richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}=tB(tQ,this).commentData;return{contentsObj:{str:this.comment},richText:e,color:t,opacity:n,creationDate:r,modificationDate:i}}get elementBeforePopup(){return tB(K$,this)}get comment(){return tB(nQ,this)||nB(nQ,this,tB(tQ,this).commentText),tB(nQ,this)}set comment(e){e!==this.comment&&(tB(tQ,this).commentText=nB(nQ,this,e))}get parentBoundingClientRect(){return tB(tQ,this).layer.getBoundingClientRect()}setCommentButtonStates(e){let{selected:t,hasPopup:n}=e;tB(K$,this)&&(tB(K$,this).classList.toggle("selected",t),tB(K$,this).ariaExpanded=n)}setSelectedCommentButton(e){tB(K$,this).classList.toggle("selected",e)}get commentPopupPosition(){if(tB(X$,this))return tB(X$,this);const{x:e,y:t,height:n}=tB(K$,this).getBoundingClientRect(),{x:r,y:i,width:s,height:a}=tB(tQ,this).layer.getBoundingClientRect();return[(e-r)/s,(t+n-i)/a]}set commentPopupPosition(e){nB(X$,this,e)}hasDefaultPopupPosition(){return null===tB(X$,this)}get commentButtonPosition(){return tB(Y$,this)}get commentButtonWidth(){return tB(K$,this).getBoundingClientRect().width/this.parentBoundingClientRect.width}editComment(e){const[t,n]=tB(X$,this)||this.commentButtonPosition.map(e=>e/100),r=this.parentBoundingClientRect,{x:i,y:s,width:a,height:o}=r;tB(T$,this).showDialog(null,this,i+t*a,s+n*o,(0,Ne.A)((0,Ne.A)({},e),{},{parentDimensions:r}))}render(){var e,t;if(tB(H$,this))return;const n=nB(H$,this,document.createElement("div"));if(n.className="popup",tB(I$,this)){const e=n.style.outlineColor=Nz.makeHexColor(...tB(I$,this));n.style.backgroundColor="color-mix(in srgb, ".concat(e," 30%, white)")}const r=document.createElement("span");if(r.className="header",null!==(e=tB(Q$,this))&&void 0!==e&&e.str){const e=document.createElement("span");e.className="title",r.append(e),({dir:e.dir,str:e.textContent}=tB(Q$,this))}if(n.append(r),tB(B$,this)){const e=document.createElement("time");e.className="popupDate",e.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),e.setAttribute("data-l10n-args",JSON.stringify({dateObj:tB(B$,this).valueOf()})),e.dateTime=tB(B$,this).toISOString(),r.append(e)}sW({html:eB(rQ,this,cQ)||tB(F$,this).str,dir:null===(t=tB(F$,this))||void 0===t?void 0:t.dir,className:"popupContent"},n),tB(L$,this).append(n)}updateEdited(e){var t;let{rect:n,popup:r,deleted:i}=e;if(tB(T$,this))return i?(this.remove(),nB(nQ,this,null)):r&&(r.deleted?this.remove():(ZF(rQ,this,lQ).call(this),nB(nQ,this,r.text))),void(n&&(nB(Y$,this,null),ZF(rQ,this,aQ).call(this),ZF(rQ,this,oQ).call(this)));i||null!==r&&void 0!==r&&r.deleted?this.remove():(ZF(rQ,this,sQ).call(this),tB(Z$,this)||nB(Z$,this,{contentsObj:tB(F$,this),richText:tB($$,this)}),n&&nB(G$,this,null),r&&r.text&&(nB($$,this,ZF(rQ,this,hQ).call(this,r.text)),nB(B$,this,qz.toDateObject(r.date)),nB(F$,this,null)),null===(t=tB(H$,this))||void 0===t||t.remove(),nB(H$,this,null))}resetEdited(){var e;tB(Z$,this)&&(({contentsObj:XF(nB,[F$,this])._,richText:XF(nB,[$$,this])._}=tB(Z$,this)),nB(Z$,this,null),null===(e=tB(H$,this))||void 0===e||e.remove(),nB(H$,this,null),nB(G$,this,null))}remove(){var e,t,n;if(null===(e=tB(q$,this))||void 0===e||e.abort(),nB(q$,this,null),null===(t=tB(H$,this))||void 0===t||t.remove(),nB(H$,this,null),nB(eQ,this,!1),nB(V$,this,!1),null===(n=tB(K$,this))||void 0===n||n.remove(),nB(K$,this,null),this.trigger)for(const r of this.trigger)r.classList.remove("popupTriggerArea")}forceHide(){nB(eQ,this,this.isVisible),tB(eQ,this)&&(tB(L$,this).hidden=!0)}maybeShow(){tB(T$,this)||(ZF(rQ,this,sQ).call(this),tB(eQ,this)&&(tB(H$,this)||ZF(rQ,this,gQ).call(this),nB(eQ,this,!1),tB(L$,this).hidden=!1))}get isVisible(){return!tB(T$,this)&&!1===tB(L$,this).hidden}}function sQ(){if(tB(q$,this))return;nB(q$,this,new AbortController);const{signal:e}=tB(q$,this);for(const n of this.trigger)n.addEventListener("click",tB(R$,this),{signal:e}),n.addEventListener("pointerenter",tB(O$,this),{signal:e}),n.addEventListener("pointerleave",tB(D$,this),{signal:e}),n.classList.add("popupTriggerArea");for(const n of tB(z$,this)){var t;null===(t=n.container)||void 0===t||t.addEventListener("keydown",tB(M$,this),{signal:e})}}function aQ(){const e=tB(z$,this).find(e=>e.hasCommentButton);e&&nB(Y$,this,e._normalizePoint(e.commentButtonPosition))}function oQ(){if(tB(tQ,this).extraPopupElement&&!tB(tQ,this).editor)return;this.renderCommentButton();const[e,t]=tB(Y$,this),{style:n}=tB(K$,this);n.left="calc(".concat(e,"%)"),n.top="calc(".concat(t,"% - var(--comment-button-dim))")}function lQ(){tB(tQ,this).extraPopupElement||(this.renderCommentButton(),tB(K$,this).style.backgroundColor=this.commentButtonColor||"")}function cQ(e){const t=tB($$,e),n=tB(F$,e);return null===t||void 0===t||!t.str||null!==n&&void 0!==n&&n.str&&n.str!==t.str?null:tB($$,e).html||null}function dQ(e){var t;return(null===(t=eB(rQ,e,cQ))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.fontSize)||0}function uQ(e){var t;return(null===(t=eB(rQ,e,cQ))||void 0===t||null===(t=t.attributes)||void 0===t||null===(t=t.style)||void 0===t?void 0:t.color)||null}function hQ(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:eB(rQ,this,uQ),fontSize:eB(rQ,this,dQ)?"calc(".concat(eB(rQ,this,dQ),"px * var(--total-scale-factor))"):""}};for(const i of e.split("\n"))t.push({name:"span",value:i,attributes:r});return n}function pQ(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||("Enter"===e.key||"Escape"===e.key&&tB(V$,this))&&ZF(rQ,this,fQ).call(this)}function mQ(){if(null!==tB(G$,this))return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:i}}}=tB(W$,this);let s=!!tB(U$,this),a=tB(s?U$:J$,this);for(const h of tB(z$,this))if(!a||null!==Nz.intersect(h.data.rect,a)){a=h.data.rect,s=!0;break}const o=Nz.normalizeRect([a[0],e[3]-a[1]+e[1],a[2],e[3]-a[3]+e[1]]),l=s?a[2]-a[0]+5:0,c=o[0]+l,d=o[1];nB(G$,this,[100*(c-r)/t,100*(d-i)/n]);const{style:u}=tB(L$,this);u.left="".concat(tB(G$,this)[0],"%"),u.top="".concat(tB(G$,this)[1],"%")}function fQ(){tB(T$,this)?tB(T$,this).toggleCommentPopup(this,!1):(nB(V$,this,!tB(V$,this)),tB(V$,this)?(ZF(rQ,this,gQ).call(this),tB(L$,this).addEventListener("click",tB(R$,this)),tB(L$,this).addEventListener("keydown",tB(M$,this))):(ZF(rQ,this,vQ).call(this),tB(L$,this).removeEventListener("click",tB(R$,this)),tB(L$,this).removeEventListener("keydown",tB(M$,this))))}function gQ(){tB(H$,this)||this.render(),this.isVisible?tB(V$,this)&&tB(L$,this).classList.add("focused"):(ZF(rQ,this,mQ).call(this),tB(L$,this).hidden=!1,tB(L$,this).style.zIndex=parseInt(tB(L$,this).style.zIndex)+1e3)}function vQ(){tB(L$,this).classList.remove("focused"),!tB(V$,this)&&this.isVisible&&(tB(L$,this).hidden=!0,tB(L$,this).style.zIndex=parseInt(tB(L$,this).style.zIndex)-1e3)}class yQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=RB.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var xQ=new WeakMap;class bQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),QF(this,xQ,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),i=nB(xQ,this,this.svgFactory.createElement("svg:line"));return i.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),i.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),i.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),i.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),i.setAttribute("stroke-width",e.borderStyle.width||1),i.setAttribute("stroke","transparent"),i.setAttribute("fill","transparent"),r.append(i),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tB(xQ,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var wQ=new WeakMap;class jQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),QF(this,wQ,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,s=nB(wQ,this,this.svgFactory.createElement("svg:rect"));return s.setAttribute("x",i/2),s.setAttribute("y",i/2),s.setAttribute("width",t-i),s.setAttribute("height",n-i),s.setAttribute("stroke-width",i||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tB(wQ,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var NQ=new WeakMap;class kQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),QF(this,NQ,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:t,height:n}=this,r=this.svgFactory.create(t,n,!0),i=e.borderStyle.width,s=nB(NQ,this,this.svgFactory.createElement("svg:ellipse"));return s.setAttribute("cx",t/2),s.setAttribute("cy",n/2),s.setAttribute("rx",t/2-i/2),s.setAttribute("ry",n/2-i/2),s.setAttribute("stroke-width",i||1),s.setAttribute("stroke","transparent"),s.setAttribute("fill","transparent"),r.append(s),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tB(NQ,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}var AQ=new WeakMap;class SQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),QF(this,AQ,null),this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:t,borderStyle:n,popupRef:r},width:i,height:s}=this;if(!t)return this.container;const a=this.svgFactory.create(i,s,!0);let o=[];for(let c=0,d=t.length;c<d;c+=2){const n=t[c]-e[0],r=e[3]-t[c+1];o.push("".concat(n,",").concat(r))}o=o.join(" ");const l=nB(AQ,this,this.svgFactory.createElement(this.svgElementName));return l.setAttribute("points",o),l.setAttribute("stroke-width",n.width||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),a.append(l),this.container.append(a),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return tB(AQ,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}class _Q extends SQ{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class CQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var EQ=new WeakMap,PQ=new WeakMap,TQ=new WeakSet;class MQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),$F(this,TQ),QF(this,EQ,null),QF(this,PQ,[]),this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType="InkHighlight"===this.data.it?RB.HIGHLIGHT:RB.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:t,inkLists:n,borderStyle:r,popupRef:i}}=this,{transform:s,width:a,height:o}=ZF(TQ,this,DQ).call(this,t,e),l=this.svgFactory.create(a,o,!0),c=nB(EQ,this,this.svgFactory.createElement("svg:g"));l.append(c),c.setAttribute("stroke-width",r.width||1),c.setAttribute("stroke-linecap","round"),c.setAttribute("stroke-linejoin","round"),c.setAttribute("stroke-miterlimit",10),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),c.setAttribute("transform",s);for(let d=0,u=n.length;d<u;d++){const e=this.svgFactory.createElement(this.svgElementName);tB(PQ,this).push(e),e.setAttribute("points",n[d].join(",")),c.append(e)}return!i&&this.hasPopupData&&this._createPopup(),this.container.append(l),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:t,points:n,rect:r}=e,i=tB(EQ,this);if(t>=0&&i.setAttribute("stroke-width",t||1),n)for(let s=0,a=tB(PQ,this).length;s<a;s++)tB(PQ,this)[s].setAttribute("points",n[s].join(","));if(r){const{transform:e,width:t,height:n}=ZF(TQ,this,DQ).call(this,this.data.rotation,r);i.parentElement.setAttribute("viewBox","0 0 ".concat(t," ").concat(n)),i.setAttribute("transform",e)}}getElementsToTriggerPopup(){return tB(PQ,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function DQ(e,t){switch(e){case 90:return{transform:"rotate(90) translate(".concat(-t[0],",").concat(t[1],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};case 180:return{transform:"rotate(180) translate(".concat(-t[2],",").concat(t[1],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]};case 270:return{transform:"rotate(270) translate(".concat(-t[2],",").concat(t[3],") scale(1,-1)"),width:t[3]-t[1],height:t[2]-t[0]};default:return{transform:"translate(".concat(-t[0],",").concat(t[3],") scale(1,-1)"),width:t[2]-t[0],height:t[3]-t[1]}}}class OQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=RB.HIGHLIGHT}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),e){const t=document.createElement("mark");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class RQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class IQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),e){const t=document.createElement("u");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class LQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){const{data:{overlaidText:e,popupRef:t}}=this;if(!t&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),e){const t=document.createElement("s");t.classList.add("overlaidText"),t.textContent=e,this.container.append(t)}return this.container}}class FQ extends h${constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=RB.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var BQ=new WeakMap,zQ=new WeakSet;class WQ extends h${constructor(e){var t;super(e,{isRenderable:!0}),$F(this,zQ),QF(this,BQ,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,null===(t=this.linkService.eventBus)||void 0===t||t.dispatch("fileattachmentannotation",(0,Ne.A)({source:this},n))}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:t}=this;let n;t.hasAppearance||0===t.fillAlpha?n=document.createElement("div"):(n=document.createElement("img"),n.src="".concat(this.imageResourcesPath,"annotation-").concat(/paperclip/i.test(t.name)?"paperclip":"pushpin",".svg"),t.fillAlpha&&t.fillAlpha<1&&(n.style="filter: opacity(".concat(Math.round(100*t.fillAlpha),"%);"))),n.addEventListener("dblclick",ZF(zQ,this,UQ).bind(this)),nB(BQ,this,n);const{isMac:r}=wz.platform;return e.addEventListener("keydown",e=>{"Enter"===e.key&&(r?e.metaKey:e.ctrlKey)&&ZF(zQ,this,UQ).call(this)}),!t.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return tB(BQ,this)}addHighlightArea(){this.container.classList.add("highlightArea")}}function UQ(){var e;null===(e=this.downloadManager)||void 0===e||e.openOrDownloadData(this.content,this.filename)}var VQ=new WeakMap,HQ=new WeakMap,qQ=new WeakMap,GQ=new WeakMap,KQ=new WeakMap,YQ=new WeakMap,XQ=new WeakSet;class JQ{constructor(e){let{div:t,accessibilityManager:n,annotationCanvasMap:r,annotationEditorUIManager:i,page:s,viewport:a,structTreeLayer:o,commentManager:l,linkService:c,annotationStorage:d}=e;$F(this,XQ),QF(this,VQ,null),QF(this,HQ,null),QF(this,qQ,null),QF(this,GQ,new Map),QF(this,KQ,null),QF(this,YQ,null),this.div=t,nB(VQ,this,n),nB(HQ,this,r),nB(KQ,this,o||null),nB(YQ,this,c||null),nB(qQ,this,d||new cq),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=i,this._commentManager=l||null}hasEditableAnnotations(){return tB(GQ,this).size>0}async render(e){const{annotations:t}=e,n=this.div;Jz(n,this.viewport);const r=new Map,i={data:null,layer:n,linkService:tB(YQ,this),downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:!1!==e.renderForms,svgFactory:new i$,annotationStorage:tB(qQ,this),enableComment:!0===e.enableComment,enableScripting:!0===e.enableScripting,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){var s;if(o.noHTML)continue;const e=o.annotationType===HB.POPUP;if(e){const e=r.get(o.id);if(!e)continue;i.elements=e}else if(o.rect[2]===o.rect[0]||o.rect[3]===o.rect[1])continue;i.data=o;const t=o$.create(i);if(!t.isRenderable)continue;if(!e&&o.popupRef){const e=r.get(o.popupRef);e?e.push(t):r.set(o.popupRef,[t])}const n=t.render();var a;if(o.hidden&&(n.style.visibility="hidden"),await ZF(XQ,this,$Q).call(this,n,o.id,i.elements),null===(s=t.extraPopupElement)||void 0===s||null===(s=s.popup)||void 0===s||s.renderCommentButton(),t._isEditable)tB(GQ,this).set(t.data.id,t),null===(a=this._annotationEditorUIManager)||void 0===a||a.renderAnnotationElement(t)}ZF(XQ,this,QQ).call(this)}async addLinkAnnotations(e){const t={data:null,layer:this.div,linkService:tB(YQ,this),svgFactory:new i$,parent:this};for(const n of e){n.borderStyle||(n.borderStyle=JQ._defaultBorderStyle),t.data=n;const e=o$.create(t);if(!e.isRenderable)continue;const r=e.render();await ZF(XQ,this,$Q).call(this,r,n.id,null)}}update(e){let{viewport:t}=e;const n=this.div;this.viewport=t,Jz(n,{rotation:t.rotation}),ZF(XQ,this,QQ).call(this),n.hidden=!1}getEditableAnnotations(){return Array.from(tB(GQ,this).values())}getEditableAnnotation(e){return tB(GQ,this).get(e)}addFakeAnnotation(e){var t;const{div:n}=this,{id:r,rotation:i}=e,s=new m$({data:{id:r,rect:e.getPDFRect(),rotation:i},editor:e,layer:n,parent:this,enableComment:!!this._commentManager,linkService:tB(YQ,this),annotationStorage:tB(qQ,this)}),a=s.render();return n.append(a),null===(t=tB(VQ,this))||void 0===t||t.moveElementInDOM(n,a,a,!1),s.createOrUpdatePopup(),s}static get _defaultBorderStyle(){return uz(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:qB,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}}async function $Q(e,t,n){var r;const i=e.firstChild||e,s=i.id="".concat(Ez).concat(t),a=await(null===(r=tB(KQ,this))||void 0===r?void 0:r.getAriaAttributes(s));if(a)for(const[l,c]of a)i.setAttribute(l,c);var o;n?n.at(-1).container.after(e):(this.div.append(e),null===(o=tB(VQ,this))||void 0===o||o.moveElementInDOM(this.div,e,i,!1))}function QQ(){if(!tB(HQ,this))return;const e=this.div;for(const[n,r]of tB(HQ,this)){const i=e.querySelector('[data-annotation-id="'.concat(n,'"]'));if(!i)continue;r.className="annotationContent";const{firstChild:s}=i;s?"CANVAS"===s.nodeName?s.replaceWith(r):s.classList.contains("annotationContent")?s.after(r):s.before(r):i.append(r);const a=tB(GQ,this).get(n);var t;if(a)if(a._hasNoCanvas)null===(t=this._annotationEditorUIManager)||void 0===t||t.setMissingCanvas(n,i.id,r),a._hasNoCanvas=!1;else a.canvas=r}tB(HQ,this).clear()}const ZQ=/\r\n?|\n/g;var eZ=new WeakMap,tZ=new WeakMap,nZ=new WeakMap,rZ=new WeakMap,iZ=new WeakSet;class sZ extends MH{static get _keyboardManager(){const e=sZ.prototype,t=e=>e.isEmpty(),n=HU.TRANSLATE_SMALL,r=HU.TRANSLATE_BIG;return uz(this,"_keyboardManager",new qW([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:t}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:t}]]))}constructor(e){super((0,Ne.A)((0,Ne.A)({},e),{},{name:"freeTextEditor"})),$F(this,iZ),QF(this,eZ,""),QF(this,tZ,"".concat(this.id,"-editor")),QF(this,nZ,null),QF(this,rZ,void 0),(0,ol.A)(this,"_colorPicker",null),this.color=e.color||sZ._defaultColor||MH._defaultLineColor,nB(rZ,this,e.fontSize||sZ._defaultFontSize),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-freetext-added-alert")}static initialize(e,t){MH.initialize(e,t);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,t){switch(e){case IB.FREETEXT_SIZE:sZ._defaultFontSize=t;break;case IB.FREETEXT_COLOR:sZ._defaultColor=t}}updateParams(e,t){switch(e){case IB.FREETEXT_SIZE:ZF(iZ,this,aZ).call(this,t);break;case IB.FREETEXT_COLOR:ZF(iZ,this,oZ).call(this,t)}}static get defaultPropertiesToUpdate(){return[[IB.FREETEXT_SIZE,sZ._defaultFontSize],[IB.FREETEXT_COLOR,sZ._defaultColor||MH._defaultLineColor]]}get propertiesToUpdate(){return[[IB.FREETEXT_SIZE,tB(rZ,this)],[IB.FREETEXT_COLOR,this.color]]}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new QJ(this)),[["colorPicker",this._colorPicker]]}get colorType(){return IB.FREETEXT_COLOR}onUpdatedColor(){var e;this.editorDiv.style.color=this.color,null===(e=this._colorPicker)||void 0===e||e.update(this.color),super.onUpdatedColor()}_translateEmpty(e,t){this._uiManager.translateSelectedEditors(e,t,!0)}getInitialTranslation(){const e=this.parentScale;return[-sZ._internalPadding*e,-(sZ._internalPadding+tB(rZ,this))*e]}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),nB(nZ,this,new AbortController);const e=this._uiManager.combinedSignal(tB(nZ,this));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return!!super.disableEditMode()&&(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",tB(tZ,this)),this._isDraggable=!0,null===(e=tB(nZ,this))||void 0===e||e.abort(),nB(nZ,this,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0)}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var t;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),null!==(t=this._initialOptions)&&void 0!==t&&t.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||""===this.editorDiv.innerText.trim()}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=tB(eZ,this),t=nB(eZ,this,ZF(iZ,this,lZ).call(this).trimEnd());if(e===t)return;const n=e=>{nB(eZ,this,e),e?(ZF(iZ,this,uZ).call(this),this._uiManager.rebuild(this),ZF(iZ,this,cZ).call(this)):this.remove()};this.addCommands({cmd:()=>{n(t)},undo:()=>{n(e)},mustExec:!1}),ZF(iZ,this,cZ).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&"Enter"===e.key&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){sZ._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,t;(this._isCopy||this.annotationElementId)&&(e=this.x,t=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",tB(tZ,this)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize="calc(".concat(tB(rZ,this),"px * var(--total-scale-factor))"),n.color=this.color,this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[n,r]=this.parentDimensions;if(this.annotationElementId){const{position:i}=this._initialData;let[s,a]=this.getInitialTranslation();[s,a]=this.pageTranslationToScreen(s,a);const[o,l]=this.pageDimensions,[c,d]=this.pageTranslation;let u,h;switch(this.rotation){case 0:u=e+(i[0]-c)/o,h=t+this.height-(i[1]-d)/l;break;case 90:u=e+(i[0]-c)/o,h=t-(i[1]-d)/l,[s,a]=[a,-s];break;case 180:u=e-this.width+(i[0]-c)/o,h=t-(i[1]-d)/l,[s,a]=[-s,-a];break;case 270:u=e+(i[0]-c-this.height*l)/o,h=t+(i[1]-d-this.width*o)/l,[s,a]=[-a,s]}this.setAt(u*n,h*r,s,a)}else this._moveAfterPaste(e,t);ZF(iZ,this,uZ).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){const t=e.clipboardData||window.clipboardData,{types:n}=t;if(1===n.length&&"text/plain"===n[0])return;e.preventDefault();const r=pZ.call(sZ,t.getData("text")||"").replaceAll(ZQ,"\n");if(!r)return;const i=window.getSelection();if(!i.rangeCount)return;this.editorDiv.normalize(),i.deleteFromDocument();const s=i.getRangeAt(0);if(!r.includes("\n"))return s.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),void i.collapseToStart();const{startContainer:a,startOffset:o}=s,l=[],c=[];if(a.nodeType===Node.TEXT_NODE){const e=a.parentElement;if(c.push(a.nodeValue.slice(o).replaceAll(ZQ,"")),e!==this.editorDiv){let t=l;for(const n of this.editorDiv.childNodes)n!==e?t.push(dZ.call(sZ,n)):t=c}l.push(a.nodeValue.slice(0,o).replaceAll(ZQ,""))}else if(a===this.editorDiv){let e=l,t=0;for(const n of this.editorDiv.childNodes)t++===o&&(e=c),e.push(dZ.call(sZ,n))}nB(eZ,this,"".concat(l.join("\n")).concat(r).concat(c.join("\n"))),ZF(iZ,this,uZ).call(this);const d=new Range;let u=Math.sumPrecise(l.map(e=>e.length));for(const{firstChild:h}of this.editorDiv.childNodes)if(h.nodeType===Node.TEXT_NODE){const e=h.nodeValue.length;if(u<=e){d.setStart(h,u),d.setEnd(h,u);break}u-=e}i.removeAllRanges(),i.addRange(d)}get contentDiv(){return this.editorDiv}getPDFRect(){const e=sZ._internalPadding*this.parentScale;return this.getRect(e,e)}static async deserialize(e,t,n){let r=null;if(e instanceof yQ){const{data:{defaultAppearanceData:{fontSize:t,fontColor:n},rect:i,rotation:s,id:a,popupRef:o,richText:l,contentsObj:c,creationDate:d,modificationDate:u},textContent:h,textPosition:p,parent:{page:{pageNumber:m}}}=e;if(!h||0===h.length)return null;r=e={annotationType:RB.FREETEXT,color:Array.from(n),fontSize:t,value:h.join("\n"),position:p,pageIndex:m-1,rect:i.slice(0),rotation:s,annotationElementId:a,id:a,deleted:!1,popupRef:o,comment:(null===c||void 0===c?void 0:c.str)||null,richText:l,creationDate:d,modificationDate:u}}const i=await super.deserialize(e,t,n);return nB(rZ,i,e.fontSize),i.color=Nz.makeHexColor(...e.color),nB(eZ,i,pZ.call(sZ,e.value)),i._initialData=r,e.comment&&i.setCommentData(e),i}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const t=MH._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:this.color),n=Object.assign(super.serialize(e),{color:t,fontSize:tB(rZ,this),value:ZF(iZ,this,hZ).call(this)});return this.addComment(n),e?(n.isCopy=!0,n):this.annotationElementId&&!ZF(iZ,this,mZ).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){const t=super.renderAnnotationElement(e);if(!t)return null;const{style:n}=t;n.fontSize="calc(".concat(tB(rZ,this),"px * var(--total-scale-factor))"),n.color=this.color,t.replaceChildren();for(const r of tB(eZ,this).split("\n")){const e=document.createElement("div");e.append(r?document.createTextNode(r):document.createElement("br")),t.append(e)}return e.updateEdited({rect:this.getPDFRect(),popup:this._uiManager.hasCommentManager()||this.hasEditedComment?this.comment:{text:tB(eZ,this)}}),t}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}}function aZ(e){const t=e=>{this.editorDiv.style.fontSize="calc(".concat(e,"px * var(--total-scale-factor))"),this.translate(0,-(e-tB(rZ,this))*this.parentScale),nB(rZ,this,e),ZF(iZ,this,cZ).call(this)},n=tB(rZ,this);this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:IB.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})}function oZ(e){const t=e=>{this.color=e,this.onUpdatedColor()},n=this.color;this.addCommands({cmd:t.bind(this,e),undo:t.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:IB.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})}function lZ(){const e=[];this.editorDiv.normalize();let t=null;for(const r of this.editorDiv.childNodes){var n;(null===(n=t)||void 0===n?void 0:n.nodeType)===Node.TEXT_NODE&&"BR"===r.nodeName||(e.push(dZ.call(gB,r)),t=r)}return e.join("\n")}function cZ(){const[e,t]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:e,div:t}=this,r=t.style.display,i=t.classList.contains("hidden");t.classList.remove("hidden"),t.style.display="hidden",e.div.append(this.div),n=t.getBoundingClientRect(),t.remove(),t.style.display=r,t.classList.toggle("hidden",i)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/t):(this.width=n.height/e,this.height=n.width/t),this.fixAndSetPosition()}function dZ(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(ZQ,"")}function uZ(){if(this.editorDiv.replaceChildren(),tB(eZ,this))for(const e of tB(eZ,this).split("\n")){const t=document.createElement("div");t.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(t)}}function hZ(){return tB(eZ,this).replaceAll("\xa0"," ")}function pZ(e){return e.replaceAll(" ","\xa0")}function mZ(e){const{value:t,fontSize:n,color:r,pageIndex:i}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||e.value!==t||e.fontSize!==n||e.color.some((e,t)=>e!==r[t])||e.pageIndex!==i}gB=sZ,(0,ol.A)(sZ,"_freeTextDefaultContent",""),(0,ol.A)(sZ,"_internalPadding",0),(0,ol.A)(sZ,"_defaultColor",null),(0,ol.A)(sZ,"_defaultFontSize",10),(0,ol.A)(sZ,"_type","freetext"),(0,ol.A)(sZ,"_editorType",RB.FREETEXT);class fZ{toSVGPath(){oz("Abstract method `toSVGPath` must be implemented.")}get box(){oz("Abstract getter `box` must be implemented.")}serialize(e,t){oz("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,i,s){s||(s=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)s[a]=t+e[a]*r,s[a+1]=n+e[a+1]*i;return s}static _rescaleAndSwap(e,t,n,r,i,s){s||(s=new Float32Array(e.length));for(let a=0,o=e.length;a<o;a+=2)s[a]=t+e[a+1]*r,s[a+1]=n+e[a]*i;return s}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let i=0,s=e.length;i<s;i+=2)r[i]=t+e[i],r[i+1]=n+e[i+1];return r}static svgRound(e){return Math.round(1e4*e)}static _normalizePoint(e,t,n,r,i){switch(i){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,i,s){return[(e+5*n)/6,(t+5*r)/6,(5*n+i)/6,(5*r+s)/6,(n+i)/2,(r+s)/2]}}(0,ol.A)(fZ,"PRECISION",1e-4);var gZ=new WeakMap,vZ=new WeakMap,yZ=new WeakMap,xZ=new WeakMap,bZ=new WeakMap,wZ=new WeakMap,jZ=new WeakMap,NZ=new WeakMap,kZ=new WeakMap,AZ=new WeakMap,SZ=new WeakMap,_Z=new WeakMap,CZ=new WeakMap,EZ=new WeakSet;class PZ{constructor(e,t,n,r,i){let{x:s,y:a}=e,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;$F(this,EZ),QF(this,gZ,void 0),QF(this,vZ,[]),QF(this,yZ,void 0),QF(this,xZ,void 0),QF(this,bZ,[]),QF(this,wZ,new Float32Array(18)),QF(this,jZ,void 0),QF(this,NZ,void 0),QF(this,kZ,void 0),QF(this,AZ,void 0),QF(this,SZ,void 0),QF(this,_Z,void 0),QF(this,CZ,[]),nB(gZ,this,t),nB(_Z,this,r*n),nB(xZ,this,i),tB(wZ,this).set([NaN,NaN,NaN,NaN,s,a],6),nB(yZ,this,o),nB(AZ,this,FZ._*n),nB(kZ,this,BZ._*n),nB(SZ,this,n),tB(CZ,this).push(s,a)}isEmpty(){return isNaN(tB(wZ,this)[8])}add(e){var t;let{x:n,y:r}=e;nB(jZ,this,n),nB(NZ,this,r);const[i,s,a,o]=tB(gZ,this);let[l,c,d,u]=tB(wZ,this).subarray(8,12);const h=n-d,p=r-u,m=Math.hypot(h,p);if(m<tB(kZ,this))return!1;const f=m-tB(AZ,this),g=f/m,v=g*h,y=g*p;let x=l,b=c;l=d,c=u,d+=v,u+=y,null===(t=tB(CZ,this))||void 0===t||t.push(n,r);const w=v/f,j=-y/f*tB(_Z,this),N=w*tB(_Z,this);if(tB(wZ,this).set(tB(wZ,this).subarray(2,8),0),tB(wZ,this).set([d+j,u+N],4),tB(wZ,this).set(tB(wZ,this).subarray(14,18),12),tB(wZ,this).set([d-j,u-N],16),isNaN(tB(wZ,this)[6]))return 0===tB(bZ,this).length&&(tB(wZ,this).set([l+j,c+N],2),tB(bZ,this).push(NaN,NaN,NaN,NaN,(l+j-i)/a,(c+N-s)/o),tB(wZ,this).set([l-j,c-N],14),tB(vZ,this).push(NaN,NaN,NaN,NaN,(l-j-i)/a,(c-N-s)/o)),tB(wZ,this).set([x,b,l,c,d,u],6),!this.isEmpty();tB(wZ,this).set([x,b,l,c,d,u],6);return Math.abs(Math.atan2(b-c,x-l)-Math.atan2(y,v))<Math.PI/2?([l,c,d,u]=tB(wZ,this).subarray(2,6),tB(bZ,this).push(NaN,NaN,NaN,NaN,((l+d)/2-i)/a,((c+u)/2-s)/o),[l,c,x,b]=tB(wZ,this).subarray(14,18),tB(vZ,this).push(NaN,NaN,NaN,NaN,((x+l)/2-i)/a,((b+c)/2-s)/o),!0):([x,b,l,c,d,u]=tB(wZ,this).subarray(0,6),tB(bZ,this).push(((x+5*l)/6-i)/a,((b+5*c)/6-s)/o,((5*l+d)/6-i)/a,((5*c+u)/6-s)/o,((l+d)/2-i)/a,((c+u)/2-s)/o),[d,u,l,c,x,b]=tB(wZ,this).subarray(12,18),tB(vZ,this).push(((x+5*l)/6-i)/a,((b+5*c)/6-s)/o,((5*l+d)/6-i)/a,((5*c+u)/6-s)/o,((l+d)/2-i)/a,((c+u)/2-s)/o),!0)}toSVGPath(){if(this.isEmpty())return"";const e=tB(bZ,this),t=tB(vZ,this);if(isNaN(tB(wZ,this)[6])&&!this.isEmpty())return ZF(EZ,this,MZ).call(this);const n=[];n.push("M".concat(e[4]," ").concat(e[5]));for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push("L".concat(e[r+4]," ").concat(e[r+5])):n.push("C".concat(e[r]," ").concat(e[r+1]," ").concat(e[r+2]," ").concat(e[r+3]," ").concat(e[r+4]," ").concat(e[r+5]));ZF(EZ,this,OZ).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push("L".concat(t[r+4]," ").concat(t[r+5])):n.push("C".concat(t[r]," ").concat(t[r+1]," ").concat(t[r+2]," ").concat(t[r+3]," ").concat(t[r+4]," ").concat(t[r+5]));return ZF(EZ,this,DZ).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,i,s){return new YZ(e,t,n,r,i,s)}getOutlines(){var e,t;const n=tB(bZ,this),r=tB(vZ,this),i=tB(wZ,this),[s,a,o,l]=tB(gZ,this),c=new Float32Array((null!==(e=null===(t=tB(CZ,this))||void 0===t?void 0:t.length)&&void 0!==e?e:0)+2);for(let h=0,p=c.length-2;h<p;h+=2)c[h]=(tB(CZ,this)[h]-s)/o,c[h+1]=(tB(CZ,this)[h+1]-a)/l;if(c[c.length-2]=(tB(jZ,this)-s)/o,c[c.length-1]=(tB(NZ,this)-a)/l,isNaN(i[6])&&!this.isEmpty())return ZF(EZ,this,RZ).call(this,c);const d=new Float32Array(tB(bZ,this).length+24+tB(vZ,this).length);let u=n.length;for(let h=0;h<u;h+=2)isNaN(n[h])?d[h]=d[h+1]=NaN:(d[h]=n[h],d[h+1]=n[h+1]);u=ZF(EZ,this,LZ).call(this,d,u);for(let h=r.length-6;h>=6;h-=6)for(let e=0;e<6;e+=2)isNaN(r[h+e])?(d[u]=d[u+1]=NaN,u+=2):(d[u]=r[h+e],d[u+1]=r[h+e+1],u+=2);return ZF(EZ,this,IZ).call(this,d,u),this.newFreeDrawOutline(d,c,tB(gZ,this),tB(SZ,this),tB(yZ,this),tB(xZ,this))}}function TZ(){const e=tB(wZ,this).subarray(4,6),t=tB(wZ,this).subarray(16,18),[n,r,i,s]=tB(gZ,this);return[(tB(jZ,this)+(e[0]-t[0])/2-n)/i,(tB(NZ,this)+(e[1]-t[1])/2-r)/s,(tB(jZ,this)+(t[0]-e[0])/2-n)/i,(tB(NZ,this)+(t[1]-e[1])/2-r)/s]}function MZ(){const[e,t,n,r]=tB(gZ,this),[i,s,a,o]=ZF(EZ,this,TZ).call(this);return"M".concat((tB(wZ,this)[2]-e)/n," ").concat((tB(wZ,this)[3]-t)/r," L").concat((tB(wZ,this)[4]-e)/n," ").concat((tB(wZ,this)[5]-t)/r," L").concat(i," ").concat(s," L").concat(a," ").concat(o," L").concat((tB(wZ,this)[16]-e)/n," ").concat((tB(wZ,this)[17]-t)/r," L").concat((tB(wZ,this)[14]-e)/n," ").concat((tB(wZ,this)[15]-t)/r," Z")}function DZ(e){const t=tB(vZ,this);e.push("L".concat(t[4]," ").concat(t[5]," Z"))}function OZ(e){const[t,n,r,i]=tB(gZ,this),s=tB(wZ,this).subarray(4,6),a=tB(wZ,this).subarray(16,18),[o,l,c,d]=ZF(EZ,this,TZ).call(this);e.push("L".concat((s[0]-t)/r," ").concat((s[1]-n)/i," L").concat(o," ").concat(l," L").concat(c," ").concat(d," L").concat((a[0]-t)/r," ").concat((a[1]-n)/i))}function RZ(e){const t=tB(wZ,this),[n,r,i,s]=tB(gZ,this),[a,o,l,c]=ZF(EZ,this,TZ).call(this),d=new Float32Array(36);return d.set([NaN,NaN,NaN,NaN,(t[2]-n)/i,(t[3]-r)/s,NaN,NaN,NaN,NaN,(t[4]-n)/i,(t[5]-r)/s,NaN,NaN,NaN,NaN,a,o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,(t[16]-n)/i,(t[17]-r)/s,NaN,NaN,NaN,NaN,(t[14]-n)/i,(t[15]-r)/s],0),this.newFreeDrawOutline(d,e,tB(gZ,this),tB(SZ,this),tB(yZ,this),tB(xZ,this))}function IZ(e,t){const n=tB(vZ,this);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+6}function LZ(e,t){const n=tB(wZ,this).subarray(4,6),r=tB(wZ,this).subarray(16,18),[i,s,a,o]=tB(gZ,this),[l,c,d,u]=ZF(EZ,this,TZ).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-i)/a,(n[1]-s)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,d,u,NaN,NaN,NaN,NaN,(r[0]-i)/a,(r[1]-s)/o],t),t+24}var FZ={_:8},BZ={_:FZ._+2},zZ=new WeakMap,WZ=new WeakMap,UZ=new WeakMap,VZ=new WeakMap,HZ=new WeakMap,qZ=new WeakMap,GZ=new WeakMap,KZ=new WeakSet;class YZ extends fZ{constructor(e,t,n,r,i,s){super(),$F(this,KZ),QF(this,zZ,void 0),QF(this,WZ,new Float32Array(4)),QF(this,UZ,void 0),QF(this,VZ,void 0),QF(this,HZ,void 0),QF(this,qZ,void 0),QF(this,GZ,void 0),nB(GZ,this,e),nB(HZ,this,t),nB(zZ,this,n),nB(qZ,this,r),nB(UZ,this,i),nB(VZ,this,s),this.firstPoint=[NaN,NaN],this.lastPoint=[NaN,NaN],ZF(KZ,this,XZ).call(this,s);const[a,o,l,c]=tB(WZ,this);for(let d=0,u=e.length;d<u;d+=2)e[d]=(e[d]-a)/l,e[d+1]=(e[d+1]-o)/c;for(let d=0,u=t.length;d<u;d+=2)t[d]=(t[d]-a)/l,t[d+1]=(t[d+1]-o)/c}toSVGPath(){const e=["M".concat(tB(GZ,this)[4]," ").concat(tB(GZ,this)[5])];for(let t=6,n=tB(GZ,this).length;t<n;t+=6)isNaN(tB(GZ,this)[t])?e.push("L".concat(tB(GZ,this)[t+4]," ").concat(tB(GZ,this)[t+5])):e.push("C".concat(tB(GZ,this)[t]," ").concat(tB(GZ,this)[t+1]," ").concat(tB(GZ,this)[t+2]," ").concat(tB(GZ,this)[t+3]," ").concat(tB(GZ,this)[t+4]," ").concat(tB(GZ,this)[t+5]));return e.push("Z"),e.join(" ")}serialize(e,t){let[n,r,i,s]=e;const a=i-n,o=s-r;let l,c;switch(t){case 0:l=fZ._rescale(tB(GZ,this),n,s,a,-o),c=fZ._rescale(tB(HZ,this),n,s,a,-o);break;case 90:l=fZ._rescaleAndSwap(tB(GZ,this),n,r,a,o),c=fZ._rescaleAndSwap(tB(HZ,this),n,r,a,o);break;case 180:l=fZ._rescale(tB(GZ,this),i,r,-a,o),c=fZ._rescale(tB(HZ,this),i,r,-a,o);break;case 270:l=fZ._rescaleAndSwap(tB(GZ,this),i,s,-a,-o),c=fZ._rescaleAndSwap(tB(HZ,this),i,s,-a,-o)}return{outline:Array.from(l),points:[Array.from(c)]}}get box(){return tB(WZ,this)}newOutliner(e,t,n,r,i){return new PZ(e,t,n,r,i,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}getNewOutline(e,t){const[n,r,i,s]=tB(WZ,this),[a,o,l,c]=tB(zZ,this),d=i*l,u=s*c,h=n*l+a,p=r*c+o,m=this.newOutliner({x:tB(HZ,this)[0]*d+h,y:tB(HZ,this)[1]*u+p},tB(zZ,this),tB(qZ,this),e,tB(VZ,this),null!==t&&void 0!==t?t:tB(UZ,this));for(let f=2;f<tB(HZ,this).length;f+=2)m.add({x:tB(HZ,this)[f]*d+h,y:tB(HZ,this)[f+1]*u+p});return m.getOutlines()}}function XZ(e){const t=tB(GZ,this);let n=t[4],r=t[5];const i=[n,r,n,r];let s=n,a=r,o=n,l=r;const c=e?Math.max:Math.min,d=new Float32Array(4);for(let h=6,p=t.length;h<p;h+=6){const e=t[h+4],u=t[h+5];isNaN(t[h])?(Nz.pointBoundingBox(e,u,i),a>u?(s=e,a=u):a===u&&(s=c(s,e)),l<u?(o=e,l=u):l===u&&(o=c(o,e))):(d[0]=d[1]=1/0,d[2]=d[3]=-1/0,Nz.bezierBoundingBox(n,r,...t.slice(h,h+6),d),Nz.rectBoundingBox(d[0],d[1],d[2],d[3],i),a>d[1]?(s=d[0],a=d[1]):a===d[1]&&(s=c(s,d[0])),l<d[3]?(o=d[2],l=d[3]):l===d[3]&&(o=c(o,d[2]))),n=e,r=u}const u=tB(WZ,this);u[0]=i[0]-tB(UZ,this),u[1]=i[1]-tB(UZ,this),u[2]=i[2]-i[0]+2*tB(UZ,this),u[3]=i[3]-i[1]+2*tB(UZ,this),this.firstPoint=[s,a],this.lastPoint=[o,l]}var JZ=new WeakMap,$Z=new WeakMap,QZ=new WeakMap,ZZ=new WeakMap,e0=new WeakMap,t0=new WeakSet;class n0{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];$F(this,t0),QF(this,JZ,void 0),QF(this,$Z,void 0),QF(this,QZ,void 0),QF(this,ZZ,[]),QF(this,e0,[]);const i=[1/0,1/0,-1/0,-1/0],s=10**-4;for(const{x:m,y:f,width:g,height:v}of e){const e=Math.floor((m-t)/s)*s,n=Math.ceil((m+g+t)/s)*s,r=Math.floor((f-t)/s)*s,a=Math.ceil((f+v+t)/s)*s,o=[e,r,a,!0],l=[n,r,a,!1];tB(ZZ,this).push(o,l),Nz.rectBoundingBox(e,r,n,a,i)}const a=i[2]-i[0]+2*n,o=i[3]-i[1]+2*n,l=i[0]-n,c=i[1]-n;let d=r?-1/0:1/0,u=1/0;const h=tB(ZZ,this).at(r?-1:-2),p=[h[0],h[2]];for(const m of tB(ZZ,this)){const[e,t,n,i]=m;!i&&r?t<u?(u=t,d=e):t===u&&(d=Math.max(d,e)):i&&!r&&(t<u?(u=t,d=e):t===u&&(d=Math.min(d,e))),m[0]=(e-l)/a,m[1]=(t-c)/o,m[2]=(n-c)/o}nB(JZ,this,new Float32Array([l,c,a,o])),nB($Z,this,[d,u]),nB(QZ,this,p)}getOutlines(){tB(ZZ,this).sort((e,t)=>e[0]-t[0]||e[1]-t[1]||e[2]-t[2]);const e=[];for(const t of tB(ZZ,this))t[3]?(e.push(...ZF(t0,this,o0).call(this,t)),ZF(t0,this,s0).call(this,t)):(ZF(t0,this,a0).call(this,t),e.push(...ZF(t0,this,o0).call(this,t)));return ZF(t0,this,r0).call(this,e)}}function r0(e){const t=[],n=new Set;for(const s of e){const[e,n,r]=s;t.push([e,n,s],[e,r,s])}t.sort((e,t)=>e[1]-t[1]||e[0]-t[0]);for(let s=0,a=t.length;s<a;s+=2){const e=t[s][2],r=t[s+1][2];e.push(r),r.push(e),n.add(e),n.add(r)}const r=[];let i;for(;n.size>0;){const e=n.values().next().value;let[t,s,a,o,l]=e;n.delete(e);let c=t,d=s;for(i=[t,a],r.push(i);;){let e;if(n.has(o))e=o;else{if(!n.has(l))break;e=l}n.delete(e),[t,s,a,o,l]=e,c!==t&&(i.push(c,d,t,d===s?s:a),c=t),d=d===s?a:s}i.push(c,d)}return new d0(r,tB(JZ,this),tB($Z,this),tB(QZ,this))}function i0(e){const t=tB(e0,this);let n=0,r=t.length-1;for(;n<=r;){const i=n+r>>1,s=t[i][0];if(s===e)return i;s<e?n=i+1:r=i-1}return r+1}function s0(e){let[,t,n]=e;const r=ZF(t0,this,i0).call(this,t);tB(e0,this).splice(r,0,[t,n])}function a0(e){let[,t,n]=e;const r=ZF(t0,this,i0).call(this,t);for(let i=r;i<tB(e0,this).length;i++){const[e,r]=tB(e0,this)[i];if(e!==t)break;if(e===t&&r===n)return void tB(e0,this).splice(i,1)}for(let i=r-1;i>=0;i--){const[e,r]=tB(e0,this)[i];if(e!==t)break;if(e===t&&r===n)return void tB(e0,this).splice(i,1)}}function o0(e){const[t,n,r]=e,i=[[t,n,r]],s=ZF(t0,this,i0).call(this,r);for(let a=0;a<s;a++){const[e,n]=tB(e0,this)[a];for(let r=0,s=i.length;r<s;r++){const[,a,o]=i[r];if(!(n<=a||o<=e))if(a>=e)if(o>n)i[r][1]=n;else{if(1===s)return[];i.splice(r,1),r--,s--}else i[r][2]=e,o>n&&i.push([t,n,o])}}return i}var l0=new WeakMap,c0=new WeakMap;class d0 extends fZ{constructor(e,t,n,r){super(),QF(this,l0,void 0),QF(this,c0,void 0),nB(c0,this,e),nB(l0,this,t),this.firstPoint=n,this.lastPoint=r}toSVGPath(){const e=[];for(const t of tB(c0,this)){let[n,r]=t;e.push("M".concat(n," ").concat(r));for(let i=2;i<t.length;i+=2){const s=t[i],a=t[i+1];s===n?(e.push("V".concat(a)),r=a):a===r&&(e.push("H".concat(s)),n=s)}e.push("Z")}return e.join(" ")}serialize(e,t){let[n,r,i,s]=e;const a=[],o=i-n,l=s-r;for(const c of tB(c0,this)){const e=new Array(c.length);for(let t=0;t<c.length;t+=2)e[t]=n+c[t]*o,e[t+1]=s-c[t+1]*l;a.push(e)}return a}get box(){return tB(l0,this)}get classNamesForOutlining(){return["highlightOutline"]}}class u0 extends PZ{newFreeDrawOutline(e,t,n,r,i,s){return new h0(e,t,n,r,i,s)}}class h0 extends YZ{newOutliner(e,t,n,r,i){return new u0(e,t,n,r,i,arguments.length>5&&void 0!==arguments[5]?arguments[5]:0)}}var p0=new WeakMap,m0=new WeakMap,f0=new WeakMap,g0=new WeakMap,v0=new WeakMap,y0=new WeakMap,x0=new WeakMap,b0=new WeakMap,w0=new WeakMap,j0=new WeakMap,N0=new WeakMap,k0=new WeakMap,A0=new WeakMap,S0=new WeakMap,_0=new WeakMap,C0=new WeakMap,E0=new WeakMap,P0=new WeakMap,T0=new WeakSet;class M0 extends MH{static get _keyboardManager(){const e=M0.prototype;return uz(this,"_keyboardManager",new qW([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}constructor(e){super((0,Ne.A)((0,Ne.A)({},e),{},{name:"highlightEditor"})),$F(this,T0),QF(this,p0,null),QF(this,m0,0),QF(this,f0,void 0),QF(this,g0,null),QF(this,v0,null),QF(this,y0,null),QF(this,x0,null),QF(this,b0,0),QF(this,w0,null),QF(this,j0,null),QF(this,N0,null),QF(this,k0,!1),QF(this,A0,null),QF(this,S0,null),QF(this,_0,null),QF(this,C0,""),QF(this,E0,void 0),QF(this,P0,""),this.color=e.color||M0._defaultColor,nB(E0,this,e.thickness||M0._defaultThickness),this.opacity=e.opacity||M0._defaultOpacity,nB(f0,this,e.boxes||null),nB(P0,this,e.methodOfCreation||""),nB(C0,this,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(nB(k0,this,!0),ZF(T0,this,O0).call(this,e),ZF(T0,this,B0).call(this)):tB(f0,this)&&(nB(p0,this,e.anchorNode),nB(m0,this,e.anchorOffset),nB(x0,this,e.focusNode),nB(b0,this,e.focusOffset),ZF(T0,this,D0).call(this),ZF(T0,this,B0).call(this),this.rotate(this.rotation)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-highlight-added-alert")}get telemetryInitialData(){return{action:"added",type:tB(k0,this)?"free_highlight":"highlight",color:this._uiManager.getNonHCMColorName(this.color),thickness:tB(E0,this),methodOfCreation:tB(P0,this)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.getNonHCMColorName(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,t){var n;MH.initialize(e,t),M0._defaultColor||(M0._defaultColor=(null===(n=t.highlightColors)||void 0===n?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,t){switch(e){case IB.HIGHLIGHT_COLOR:M0._defaultColor=t;break;case IB.HIGHLIGHT_THICKNESS:M0._defaultThickness=t}}translateInPage(e,t){}get toolbarPosition(){return tB(S0,this)}get commentButtonPosition(){return tB(A0,this)}updateParams(e,t){switch(e){case IB.HIGHLIGHT_COLOR:ZF(T0,this,R0).call(this,t);break;case IB.HIGHLIGHT_THICKNESS:ZF(T0,this,I0).call(this,t)}}static get defaultPropertiesToUpdate(){return[[IB.HIGHLIGHT_COLOR,M0._defaultColor],[IB.HIGHLIGHT_THICKNESS,M0._defaultThickness]]}get propertiesToUpdate(){return[[IB.HIGHLIGHT_COLOR,this.color||M0._defaultColor],[IB.HIGHLIGHT_THICKNESS,tB(E0,this)||M0._defaultThickness],[IB.HIGHLIGHT_FREE,tB(k0,this)]]}onUpdatedColor(){var e,t;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(tB(N0,this),{root:{fill:this.color,"fill-opacity":this.opacity}}),null===(t=tB(v0,this))||void 0===t||t.updateColor(this.color),super.onUpdatedColor()}get toolbarButtons(){if(this._uiManager.highlightColors){return[["colorPicker",nB(v0,this,new WJ({editor:this}))]]}return super.toolbarButtons}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(ZF(T0,this,V0).call(this))}getBaseTranslation(){return[0,0]}getRect(e,t){return super.getRect(e,t,ZF(T0,this,V0).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){ZF(T0,this,F0).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(ZF(T0,this,B0).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)ZF(T0,this,F0).call(this);else if(e){var n;ZF(T0,this,B0).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),this.show(this._isVisible),t&&this.select()}rotate(e){const{drawLayer:t}=this.parent;let n;tB(k0,this)?(e=(e-this.rotation+360)%360,n=z0.call(M0,tB(j0,this).box,e)):n=z0.call(M0,[this.x,this.y,this.width,this.height],e),t.updateProperties(tB(N0,this),{bbox:n,root:{"data-main-rotation":e}}),t.updateProperties(tB(_0,this),{bbox:z0.call(M0,tB(y0,this).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();tB(C0,this)&&(e.setAttribute("aria-label",tB(C0,this)),e.setAttribute("role","mark")),tB(k0,this)?e.classList.add("free"):this.div.addEventListener("keydown",ZF(T0,this,W0).bind(this),{signal:this._uiManager._signal});const t=nB(w0,this,document.createElement("div"));return e.append(t),t.setAttribute("aria-hidden","true"),t.className="internal",t.style.clipPath=tB(g0,this),this.setDims(this.width,this.height),PW(this,tB(w0,this),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(tB(_0,this),{rootClass:{hovered:!0}}))}pointerleave(){var e;this.isSelected||(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(tB(_0,this),{rootClass:{hovered:!1}}))}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:ZF(T0,this,U0).call(this,!0);break;case 1:case 3:ZF(T0,this,U0).call(this,!1)}}select(){var e;super.select(),tB(_0,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(tB(_0,this),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),tB(_0,this)&&(null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(tB(_0,this),{rootClass:{selected:!1}}),tB(k0,this)||ZF(T0,this,U0).call(this,!1))}get _mustFixPosition(){return!tB(k0,this)}show(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this._isVisible;super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(tB(N0,this),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(tB(_0,this),{rootClass:{hidden:!e}}))}static startHighlighting(e,t,n){let{target:r,x:i,y:s}=n;const{x:a,y:o,width:l,height:c}=r.getBoundingClientRect(),d=new AbortController,u=e.combinedSignal(d),h=t=>{d.abort(),ZF(M0,this,K0).call(this,e,t)};window.addEventListener("blur",h,{signal:u}),window.addEventListener("pointerup",h,{signal:u}),window.addEventListener("pointerdown",Hz,{capture:!0,passive:!1,signal:u}),window.addEventListener("contextmenu",Vz,{signal:u}),r.addEventListener("pointermove",ZF(M0,this,G0).bind(this,e),{signal:u}),this._freeHighlight=new u0({x:i,y:s},[a,o,l,c],e.scale,this._defaultThickness/2,t,.001),({id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0))}static async deserialize(e,t,n){let r=null;if(e instanceof OQ){const{data:{quadPoints:t,rect:n,rotation:i,id:s,color:a,opacity:o,popupRef:l,richText:c,contentsObj:d,creationDate:u,modificationDate:h},parent:{page:{pageNumber:p}}}=e;r=e={annotationType:RB.HIGHLIGHT,color:Array.from(a),opacity:o,quadPoints:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:i,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null===d||void 0===d?void 0:d.str)||null,creationDate:u,modificationDate:h}}else if(e instanceof MQ){const{data:{inkLists:t,rect:n,rotation:i,id:s,color:a,borderStyle:{rawWidth:o},popupRef:l,richText:c,contentsObj:d,creationDate:u,modificationDate:h},parent:{page:{pageNumber:p}}}=e;r=e={annotationType:RB.HIGHLIGHT,color:Array.from(a),thickness:o,inkLists:t,boxes:null,pageIndex:p-1,rect:n.slice(0),rotation:i,annotationElementId:s,id:s,deleted:!1,popupRef:l,richText:c,comment:(null===d||void 0===d?void 0:d.str)||null,creationDate:u,modificationDate:h}}const{color:i,quadPoints:s,inkLists:a,opacity:o}=e,l=await super.deserialize(e,t,n);l.color=Nz.makeHexColor(...i),l.opacity=o||1,a&&nB(E0,l,e.thickness),l._initialData=r,e.comment&&l.setCommentData(e);const[c,d]=l.pageDimensions,[u,h]=l.pageTranslation;if(s){const e=nB(f0,l,[]);for(let t=0;t<s.length;t+=8)e.push({x:(s[t]-u)/c,y:1-(s[t+1]-h)/d,width:(s[t+2]-s[t])/c,height:(s[t+1]-s[t+5])/d});ZF(T0,l,D0).call(l),ZF(T0,l,B0).call(l),l.rotate(l.rotation)}else if(a){nB(k0,l,!0);const e=a[0],n={x:e[0]-u,y:d-(e[1]-h)},r=new u0(n,[0,0,c,d],1,tB(E0,l)/2,!0,.001);for(let t=0,a=e.length;t<a;t+=2)n.x=e[t]-u,n.y=d-(e[t+1]-h),r.add(n);const{id:i,clipPathId:s}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:l.color,"fill-opacity":l._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:r.toSVGPath()}},!0,!0);ZF(T0,l,O0).call(l,{highlightOutlines:r.getOutlines(),highlightId:i,clipPathId:s}),ZF(T0,l,B0).call(l),l.rotate(l.parentRotation)}return l}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const t=MH._colorManager.convert(this._uiManager.getNonHCMColor(this.color)),n=super.serialize(e);return Object.assign(n,{color:t,opacity:this.opacity,thickness:tB(E0,this),quadPoints:ZF(T0,this,H0).call(this),outlines:ZF(T0,this,q0).call(this,n.rect)}),this.addComment(n),this.annotationElementId&&!ZF(T0,this,Y0).call(this,n)?null:(n.id=this.annotationElementId,n)}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}static canCreateNewEmptyEditor(){return!1}}function D0(){const e=new n0(tB(f0,this),.001);nB(j0,this,e.getOutlines()),[this.x,this.y,this.width,this.height]=tB(j0,this).box;const t=new n0(tB(f0,this),.0025,.001,"ltr"===this._uiManager.direction);nB(y0,this,t.getOutlines());const{firstPoint:n}=tB(j0,this);nB(A0,this,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height]);const{lastPoint:r}=tB(y0,this);nB(S0,this,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])}function O0(e){let{highlightOutlines:t,highlightId:n,clipPathId:r}=e;nB(j0,this,t);if(nB(y0,this,t.getNewOutline(tB(E0,this)/2+1.5,.0025)),n>=0)nB(N0,this,n),nB(g0,this,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),nB(_0,this,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:tB(y0,this).box,path:{d:tB(y0,this).toSVGPath()}},!0));else if(this.parent){const e=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(tB(N0,this),{bbox:z0.call(vB,tB(j0,this).box,(e-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(tB(_0,this),{bbox:z0.call(vB,tB(y0,this).box,e),path:{d:tB(y0,this).toSVGPath()}})}const[i,s,a,o]=t.box;switch(this.rotation){case 0:this.x=i,this.y=s,this.width=a,this.height=o;break;case 90:{const[e,t]=this.parentDimensions;this.x=s,this.y=1-i,this.width=a*t/e,this.height=o*e/t;break}case 180:this.x=1-i,this.y=1-s,this.width=a,this.height=o;break;case 270:{const[e,t]=this.parentDimensions;this.x=1-s,this.y=i,this.width=a*t/e,this.height=o*e/t;break}}const{firstPoint:l}=t;nB(A0,this,[(l[0]-i)/a,(l[1]-s)/o]);const{lastPoint:c}=tB(y0,this);nB(S0,this,[(c[0]-i)/a,(c[1]-s)/o])}function R0(e){const t=(e,t)=>{this.color=e,this.opacity=t,this.onUpdatedColor()},n=this.color,r=this.opacity;this.addCommands({cmd:t.bind(this,e,vB._defaultOpacity),undo:t.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:IB.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.getNonHCMColorName(e)},!0)}function I0(e){const t=tB(E0,this),n=e=>{nB(E0,this,e),ZF(T0,this,L0).call(this,e)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,t),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:IB.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)}function L0(e){tB(k0,this)&&(ZF(T0,this,O0).call(this,{highlightOutlines:tB(j0,this).getNewOutline(e/2)}),this.fixAndSetPosition(),this.setDims(this.width,this.height))}function F0(){null!==tB(N0,this)&&this.parent&&(this.parent.drawLayer.remove(tB(N0,this)),nB(N0,this,null),this.parent.drawLayer.remove(tB(_0,this)),nB(_0,this,null))}function B0(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null===tB(N0,this)&&(({id:XF(nB,[N0,this])._,clipPathId:XF(nB,[g0,this])._}=e.drawLayer.draw({bbox:tB(j0,this).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":this.opacity},rootClass:{highlight:!0,free:tB(k0,this)},path:{d:tB(j0,this).toSVGPath()}},!1,!0)),nB(_0,this,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:tB(k0,this)},bbox:tB(y0,this).box,path:{d:tB(y0,this).toSVGPath()}},tB(k0,this))),tB(w0,this)&&(tB(w0,this).style.clipPath=tB(g0,this)))}function z0(e,t){let[n,r,i,s]=e;switch(t){case 90:return[1-r-s,n,s,i];case 180:return[1-n-i,1-r-s,i,s];case 270:return[r,1-n-i,s,i]}return[n,r,i,s]}function W0(e){vB._keyboardManager.exec(this,e)}function U0(e){if(!tB(p0,this))return;const t=window.getSelection();e?t.setPosition(tB(p0,this),tB(m0,this)):t.setPosition(tB(x0,this),tB(b0,this))}function V0(){return tB(k0,this)?this.rotation:0}function H0(){if(tB(k0,this))return null;const[e,t]=this.pageDimensions,[n,r]=this.pageTranslation,i=tB(f0,this),s=new Float32Array(8*i.length);let a=0;for(const{x:o,y:l,width:c,height:d}of i){const i=o*e+n,u=(1-l)*t+r;s[a]=s[a+4]=i,s[a+1]=s[a+3]=u,s[a+2]=s[a+6]=i+c*e,s[a+5]=s[a+7]=u-d*t,a+=8}return s}function q0(e){return tB(j0,this).serialize(e,ZF(T0,this,V0).call(this))}function G0(e,t){this._freeHighlight.add(t)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})}function K0(e,t){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(t,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""}function Y0(e){const{color:t}=this._initialData;return this.hasEditedComment||e.color.some((e,n)=>e!==t[n])}vB=M0,(0,ol.A)(M0,"_defaultColor",null),(0,ol.A)(M0,"_defaultOpacity",1),(0,ol.A)(M0,"_defaultThickness",12),(0,ol.A)(M0,"_type","highlight"),(0,ol.A)(M0,"_editorType",RB.HIGHLIGHT),(0,ol.A)(M0,"_freeHighlightId",-1),(0,ol.A)(M0,"_freeHighlight",null),(0,ol.A)(M0,"_freeHighlightClipId","");var X0=new WeakMap;class J0{constructor(){QF(this,X0,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))t.startsWith("_")||this.updateProperty(t,n)}updateSVGProperty(e,t){tB(X0,this)[e]=t}toSVGProperties(){const e=tB(X0,this);return nB(X0,this,Object.create(null)),{root:e}}reset(){nB(X0,this,Object.create(null))}updateAll(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;this.updateProperties(e)}clone(){oz("Not implemented")}}var $0=new WeakMap,Q0=new WeakMap,Z0=new WeakSet;class e1 extends MH{constructor(e){super(e),$F(this,Z0),QF(this,$0,null),QF(this,Q0,void 0),(0,ol.A)(this,"_colorPicker",null),(0,ol.A)(this,"_drawId",null),nB(Q0,this,e.mustBeCommitted||!1),this._addOutlines(e)}onUpdatedColor(){var e;null===(e=this._colorPicker)||void 0===e||e.update(this.color),super.onUpdatedColor()}_addOutlines(e){e.drawOutlines&&(ZF(Z0,this,t1).call(this,e),ZF(Z0,this,i1).call(this))}static _mergeSVGProperties(e,t){const n=new Set(Object.keys(e));for(const[r,i]of Object.entries(t))n.has(r)?Object.assign(e[r],i):e[r]=i;return e}static getDefaultDrawingOptions(e){oz("Not implemented")}static get typesMap(){oz("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,t){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,t),this._currentParent&&(c1._.updateProperty(n,t),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,t){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,t)}static get defaultPropertiesToUpdate(){const e=[],t=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)e.push([n,t[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:t}=this;for(const[n,r]of this.constructor.typesMap)e.push([n,t[r]]);return e}_updateProperty(e,t,n){const r=this._drawingOptions,i=r[t],s=n=>{var i;r.updateProperty(t,n);const s=tB($0,this).updateProperty(t,n);s&&ZF(Z0,this,o1).call(this,s),null===(i=this.parent)||void 0===i||i.drawLayer.updateProperties(this._drawId,r.toSVGProperties()),e===this.colorType&&this.onUpdatedColor()};this.addCommands({cmd:s.bind(this,n),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,e1._mergeSVGProperties(tB($0,this).getPathResizingSVGProperties(ZF(Z0,this,a1).call(this)),{bbox:ZF(Z0,this,l1).call(this)}))}_onResized(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,e1._mergeSVGProperties(tB($0,this).getPathResizedSVGProperties(ZF(Z0,this,a1).call(this)),{bbox:ZF(Z0,this,l1).call(this)}))}_onTranslating(e,t){var n;null===(n=this.parent)||void 0===n||n.drawLayer.updateProperties(this._drawId,{bbox:ZF(Z0,this,l1).call(this)})}_onTranslated(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,e1._mergeSVGProperties(tB($0,this).getPathTranslatedSVGProperties(ZF(Z0,this,a1).call(this),this.parentDimensions),{bbox:ZF(Z0,this,l1).call(this)}))}_onStartDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;null===(e=this.parent)||void 0===e||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,tB(Q0,this)&&(nB(Q0,this,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){ZF(Z0,this,r1).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),null!==this.div&&(ZF(Z0,this,i1).call(this),ZF(Z0,this,o1).call(this,tB($0,this).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){let t=!1;if(this.parent&&!e)this._uiManager.removeShouldRescale(this),ZF(Z0,this,r1).call(this);else if(e){var n;this._uiManager.addShouldRescale(this),ZF(Z0,this,i1).call(this,e),t=!this.parent&&(null===(n=this.div)||void 0===n?void 0:n.classList.contains("selectedEditor"))}super.setParent(e),t&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,e1._mergeSVGProperties({bbox:ZF(Z0,this,l1).call(this)},tB($0,this).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&ZF(Z0,this,o1).call(this,tB($0,this).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,t;this._isCopy&&(e=this.x,t=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");return n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal",this.setDims(),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,t),n}static createDrawerInstance(e,t,n,r,i){oz("Not implemented")}static startDrawing(e,t,n,r){var i,s;const{target:a,offsetX:o,offsetY:l,pointerId:c,pointerType:d}=r;if(p1._&&p1._!==d)return;const{viewport:{rotation:u}}=e,{width:h,height:p}=a.getBoundingClientRect(),m=d1._=new AbortController,f=e.combinedSignal(m);h1._||(h1._=c),null!==(i=p1._)&&void 0!==i||(p1._=d),window.addEventListener("pointerup",e=>{var t;h1._===e.pointerId?this._endDraw(e):null===(t=m1._)||void 0===t||t.delete(e.pointerId)},{signal:f}),window.addEventListener("pointercancel",e=>{var t;h1._===e.pointerId?this._currentParent.endDrawingSession():null===(t=m1._)||void 0===t||t.delete(e.pointerId)},{signal:f}),window.addEventListener("pointerdown",e=>{p1._===e.pointerType&&((m1._||(m1._=new Set)).add(e.pointerId),c1._.isCancellable()&&(c1._.removeLastElement(),c1._.isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",Vz,{signal:f}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:f}),a.addEventListener("touchmove",e=>{e.timeStamp===f1._&&Hz(e)},{signal:f}),e.toggleDrawing(),null===(s=t._editorUndoBar)||void 0===s||s.hide(),c1._?e.drawLayer.updateProperties(this._currentDrawId,c1._.startNew(o,l,h,p,u)):(t.updateUIForDefaultProperties(this),c1._=this.createDrawerInstance(o,l,h,p,u),u1._=this.getDefaultDrawingOptions(),this._currentParent=e,({id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(u1._.toSVGProperties(),c1._.defaultSVGProperties),!0,!1)))}static _drawMove(e){var t;if(f1._=-1,!c1._)return;const{offsetX:n,offsetY:r,pointerId:i}=e;h1._===i&&((null===(t=m1._)||void 0===t?void 0:t.size)>=1?this._endDraw(e):(this._currentParent.drawLayer.updateProperties(this._currentDrawId,c1._.add(n,r)),f1._=e.timeStamp,Hz(e)))}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,c1._=null,u1._=null,p1._=null,f1._=NaN),d1._&&(d1._.abort(),d1._=null,h1._=NaN,m1._=null)}static _endDraw(e){const t=this._currentParent;if(t){if(t.toggleDrawing(!0),this._cleanup(!1),(null===e||void 0===e?void 0:e.target)===t.div&&t.drawLayer.updateProperties(this._currentDrawId,c1._.end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const e=c1._,n=this._currentDrawId,r=e.getLastElement();return void t.addCommands({cmd:()=>{t.drawLayer.updateProperties(n,e.setLastElement(r))},undo:()=>{t.drawLayer.updateProperties(n,e.removeLastElement())},mustExec:!1,type:IB.DRAW_STEP})}this.endDrawing(!1)}}static endDrawing(e){const t=this._currentParent;if(!t)return null;if(t.toggleDrawing(!0),t.cleanUndoStack(IB.DRAW_STEP),!c1._.isEmpty()){const{pageDimensions:[n,r],scale:i}=t,s=t.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:c1._.getOutlines(n*i,r*i,i,this._INNER_MARGIN),drawingOptions:u1._,mustBeCommitted:!e});return this._cleanup(!0),s}return t.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,t,n,r,i,s){oz("Not implemented")}static async deserialize(e,t,n){const{rawDims:{pageWidth:r,pageHeight:i,pageX:s,pageY:a}}=t.viewport,o=this.deserializeDraw(s,a,r,i,this._INNER_MARGIN,e),l=await super.deserialize(e,t,n);return l.createDrawingOptions(e),ZF(Z0,l,t1).call(l,{drawOutlines:o}),ZF(Z0,l,i1).call(l),l.onScaleChanging(),l.rotate(),l}serializeDraw(e){const[t,n]=this.pageTranslation,[r,i]=this.pageDimensions;return tB($0,this).serialize([t,n,r,i],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getPDFRect()}),null}static canCreateNewEmptyEditor(){return!1}}function t1(e){let{drawOutlines:t,drawId:n,drawingOptions:r}=e;nB($0,this,t),this._drawingOptions||(this._drawingOptions=r),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-".concat(this.editorType,"-added-alert")),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=ZF(Z0,this,n1).call(this,t,this.parent),ZF(Z0,this,o1).call(this,t.box)}function n1(e,t){const{id:n}=t.drawLayer.draw(yB._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n}function r1(){null!==this._drawId&&this.parent&&(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())}function i1(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.parent;null!==this._drawId&&this.parent===e||(null===this._drawId?(this._drawingOptions.updateAll(),this._drawId=ZF(Z0,this,n1).call(this,tB($0,this),e)):this.parent.drawLayer.updateParent(this._drawId,e.drawLayer))}function s1(e){let[t,n,r,i]=e;const{parentDimensions:[s,a],rotation:o}=this;switch(o){case 90:return[n,1-t,r*(a/s),i*(s/a)];case 180:return[1-t,1-n,r,i];case 270:return[1-n,t,r*(a/s),i*(s/a)];default:return[t,n,r,i]}}function a1(){const{x:e,y:t,width:n,height:r,parentDimensions:[i,s],rotation:a}=this;switch(a){case 90:return[1-t,e,n*(i/s),r*(s/i)];case 180:return[1-e,1-t,n,r];case 270:return[t,1-e,n*(i/s),r*(s/i)];default:return[e,t,n,r]}}function o1(e){[this.x,this.y,this.width,this.height]=ZF(Z0,this,s1).call(this,e),this.div&&(this.fixAndSetPosition(),this.setDims()),this._onResized()}function l1(){const{x:e,y:t,width:n,height:r,rotation:i,parentRotation:s,parentDimensions:[a,o]}=this;switch((4*i+s)/90){case 1:return[1-t-r,e,r,n];case 2:return[1-e-n,1-t-r,n,r];case 3:return[t,1-e-n,r,n];case 4:return[e,t-n*(a/o),r*(o/a),n*(a/o)];case 5:return[1-t,e,n*(a/o),r*(o/a)];case 6:return[1-e-r*(o/a),1-t,r*(o/a),n*(a/o)];case 7:return[t-n*(a/o),1-e-r*(o/a),n*(a/o),r*(o/a)];case 8:return[e-n,t-r,n,r];case 9:return[1-t,e-n,r,n];case 10:return[1-e,1-t,n,r];case 11:return[t-r,1-e,r,n];case 12:return[e-r*(o/a),t,r*(o/a),n*(a/o)];case 13:return[1-t-n*(a/o),e-r*(o/a),n*(a/o),r*(o/a)];case 14:return[1-e,1-t-n*(a/o),r*(o/a),n*(a/o)];case 15:return[t,1-e,n*(a/o),r*(o/a)];default:return[e,t,n,r]}}yB=e1,(0,ol.A)(e1,"_currentDrawId",-1),(0,ol.A)(e1,"_currentParent",null);var c1={_:null},d1={_:null},u1={_:null},h1={_:NaN},p1={_:null},m1={_:null},f1={_:NaN};(0,ol.A)(e1,"_INNER_MARGIN",3);var g1=new WeakMap,v1=new WeakMap,y1=new WeakMap,x1=new WeakMap,b1=new WeakMap,w1=new WeakMap,j1=new WeakMap,N1=new WeakMap,k1=new WeakMap,A1=new WeakMap,S1=new WeakMap,_1=new WeakSet;class C1{constructor(e,t,n,r,i,s){$F(this,_1),QF(this,g1,new Float64Array(6)),QF(this,v1,void 0),QF(this,y1,void 0),QF(this,x1,void 0),QF(this,b1,void 0),QF(this,w1,void 0),QF(this,j1,""),QF(this,N1,0),QF(this,k1,new z1),QF(this,A1,void 0),QF(this,S1,void 0),nB(A1,this,n),nB(S1,this,r),nB(x1,this,i),nB(b1,this,s),[e,t]=ZF(_1,this,E1).call(this,e,t);const a=nB(v1,this,[NaN,NaN,NaN,NaN,e,t]);nB(w1,this,[e,t]),nB(y1,this,[{line:a,points:tB(w1,this)}]),tB(g1,this).set(a,0)}updateProperty(e,t){"stroke-width"===e&&nB(b1,this,t)}isEmpty(){return!tB(y1,this)||0===tB(y1,this).length}isCancellable(){return tB(w1,this).length<=10}add(e,t){[e,t]=ZF(_1,this,E1).call(this,e,t);const[n,r,i,s]=tB(g1,this).subarray(2,6),a=e-i,o=t-s;return Math.hypot(tB(A1,this)*a,tB(S1,this)*o)<=2?null:(tB(w1,this).push(e,t),isNaN(n)?(tB(g1,this).set([i,s,e,t],2),tB(v1,this).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(tB(g1,this)[0])&&tB(v1,this).splice(6,6),tB(g1,this).set([n,r,i,s,e,t],0),tB(v1,this).push(...fZ.createBezierPoints(n,r,i,s,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(2===tB(w1,this).length?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,i){nB(A1,this,n),nB(S1,this,r),nB(x1,this,i),[e,t]=ZF(_1,this,E1).call(this,e,t);const s=nB(v1,this,[NaN,NaN,NaN,NaN,e,t]);nB(w1,this,[e,t]);const a=tB(y1,this).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),tB(y1,this).push({line:s,points:tB(w1,this)}),tB(g1,this).set(s,0),nB(N1,this,0),this.toSVGPath(),null}getLastElement(){return tB(y1,this).at(-1)}setLastElement(e){return tB(y1,this)?(tB(y1,this).push(e),nB(v1,this,e.line),nB(w1,this,e.points),nB(N1,this,0),{path:{d:this.toSVGPath()}}):tB(k1,this).setLastElement(e)}removeLastElement(){if(!tB(y1,this))return tB(k1,this).removeLastElement();tB(y1,this).pop(),nB(j1,this,"");for(let e=0,t=tB(y1,this).length;e<t;e++){const{line:t,points:n}=tB(y1,this)[e];nB(v1,this,t),nB(w1,this,n),nB(N1,this,0),this.toSVGPath()}return{path:{d:tB(j1,this)}}}toSVGPath(){const e=fZ.svgRound(tB(v1,this)[4]),t=fZ.svgRound(tB(v1,this)[5]);if(2===tB(w1,this).length)return nB(j1,this,"".concat(tB(j1,this)," M ").concat(e," ").concat(t," Z")),tB(j1,this);if(tB(w1,this).length<=6){const n=tB(j1,this).lastIndexOf("M");nB(j1,this,"".concat(tB(j1,this).slice(0,n)," M ").concat(e," ").concat(t)),nB(N1,this,6)}if(4===tB(w1,this).length){const e=fZ.svgRound(tB(v1,this)[10]),t=fZ.svgRound(tB(v1,this)[11]);return nB(j1,this,"".concat(tB(j1,this)," L ").concat(e," ").concat(t)),nB(N1,this,12),tB(j1,this)}const n=[];0===tB(N1,this)&&(n.push("M ".concat(e," ").concat(t)),nB(N1,this,6));for(let r=tB(N1,this),i=tB(v1,this).length;r<i;r+=6){const[e,t,i,s,a,o]=tB(v1,this).slice(r,r+6).map(fZ.svgRound);n.push("C".concat(e," ").concat(t," ").concat(i," ").concat(s," ").concat(a," ").concat(o))}return nB(j1,this,tB(j1,this)+n.join(" ")),nB(N1,this,tB(v1,this).length),tB(j1,this)}getOutlines(e,t,n,r){const i=tB(y1,this).at(-1);return i.line=new Float32Array(i.line),i.points=new Float32Array(i.points),tB(k1,this).build(tB(y1,this),e,t,n,tB(x1,this),tB(b1,this),r),nB(g1,this,null),nB(v1,this,null),nB(y1,this,null),nB(j1,this,null),tB(k1,this)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}function E1(e,t){return fZ._normalizePoint(e,t,tB(A1,this),tB(S1,this),tB(x1,this))}var P1=new WeakMap,T1=new WeakMap,M1=new WeakMap,D1=new WeakMap,O1=new WeakMap,R1=new WeakMap,I1=new WeakMap,L1=new WeakMap,F1=new WeakMap,B1=new WeakSet;class z1 extends fZ{constructor(){super(...arguments),$F(this,B1),QF(this,P1,void 0),QF(this,T1,0),QF(this,M1,void 0),QF(this,D1,void 0),QF(this,O1,void 0),QF(this,R1,void 0),QF(this,I1,void 0),QF(this,L1,void 0),QF(this,F1,void 0)}build(e,t,n,r,i,s,a){nB(O1,this,t),nB(R1,this,n),nB(I1,this,r),nB(L1,this,i),nB(F1,this,s),nB(M1,this,null!==a&&void 0!==a?a:0),nB(D1,this,e),ZF(B1,this,V1).call(this)}get thickness(){return tB(F1,this)}setLastElement(e){return tB(D1,this).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return tB(D1,this).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:t}of tB(D1,this))if(e.push("M".concat(fZ.svgRound(t[4])," ").concat(fZ.svgRound(t[5]))),6!==t.length)if(12===t.length&&isNaN(t[6]))e.push("L".concat(fZ.svgRound(t[10])," ").concat(fZ.svgRound(t[11])));else for(let n=6,r=t.length;n<r;n+=6){const[r,i,s,a,o,l]=t.subarray(n,n+6).map(fZ.svgRound);e.push("C".concat(r," ").concat(i," ").concat(s," ").concat(a," ").concat(o," ").concat(l))}else e.push("Z");return e.join("")}serialize(e,t){let[n,r,i,s]=e;const a=[],o=[],[l,c,d,u]=ZF(B1,this,U1).call(this);let h,p,m,f,g,v,y,x,b;switch(tB(L1,this)){case 0:b=fZ._rescale,h=n,p=r+s,m=i,f=-s,g=n+l*i,v=r+(1-c-u)*s,y=n+(l+d)*i,x=r+(1-c)*s;break;case 90:b=fZ._rescaleAndSwap,h=n,p=r,m=i,f=s,g=n+c*i,v=r+l*s,y=n+(c+u)*i,x=r+(l+d)*s;break;case 180:b=fZ._rescale,h=n+i,p=r,m=-i,f=s,g=n+(1-l-d)*i,v=r+c*s,y=n+(1-l)*i,x=r+(c+u)*s;break;case 270:b=fZ._rescaleAndSwap,h=n+i,p=r+s,m=-i,f=-s,g=n+(1-c-u)*i,v=r+(1-l-d)*s,y=n+(1-c)*i,x=r+(1-l)*s}for(const{line:w,points:j}of tB(D1,this))a.push(b(w,h,p,m,f,t?new Array(w.length):null)),o.push(b(j,h,p,m,f,t?new Array(j.length):null));return{lines:a,points:o,rect:[g,v,y,x]}}static deserialize(e,t,n,r,i,s){let{paths:{lines:a,points:o},rotation:l,thickness:c}=s;const d=[];let u,h,p,m,f;switch(l){case 0:f=fZ._rescale,u=-e/n,h=t/r+1,p=1/n,m=-1/r;break;case 90:f=fZ._rescaleAndSwap,u=-t/r,h=-e/n,p=1/r,m=1/n;break;case 180:f=fZ._rescale,u=e/n+1,h=-t/r,p=-1/n,m=1/r;break;case 270:f=fZ._rescaleAndSwap,u=t/r+1,h=e/n+1,p=-1/r,m=-1/n}if(!a){a=[];for(const e of o){const t=e.length;if(2===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1]]));continue}if(4===t){a.push(new Float32Array([NaN,NaN,NaN,NaN,e[0],e[1],NaN,NaN,NaN,NaN,e[2],e[3]]));continue}const n=new Float32Array(3*(t-2));a.push(n);let[r,i,s,o]=e.subarray(0,4);n.set([NaN,NaN,NaN,NaN,r,i],0);for(let a=4;a<t;a+=2){const t=e[a],l=e[a+1];n.set(fZ.createBezierPoints(r,i,s,o,t,l),3*(a-2)),[r,i,s,o]=[s,o,t,l]}}}for(let v=0,y=a.length;v<y;v++)d.push({line:f(a[v].map(e=>null!==e&&void 0!==e?e:NaN),u,h,p,m),points:f(o[v].map(e=>null!==e&&void 0!==e?e:NaN),u,h,p,m)});const g=new this.prototype.constructor;return g.build(d,n,r,1,l,c,i),g}get box(){return tB(P1,this)}updateProperty(e,t){return"stroke-width"===e?ZF(B1,this,H1).call(this,t):null}updateParentDimensions(e,t){let[n,r]=e;const[i,s]=ZF(B1,this,W1).call(this);nB(O1,this,n),nB(R1,this,r),nB(I1,this,t);const[a,o]=ZF(B1,this,W1).call(this),l=a-i,c=o-s,d=tB(P1,this);return d[0]-=l,d[1]-=c,d[2]+=2*l,d[3]+=2*c,d}updateRotation(e){return nB(T1,this,e),{path:{transform:this.rotationTransform}}}get viewBox(){return tB(P1,this).map(fZ.svgRound).join(" ")}get defaultProperties(){const[e,t]=tB(P1,this);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(fZ.svgRound(e)," ").concat(fZ.svgRound(t))}}}get rotationTransform(){const[,,e,t]=tB(P1,this);let n=0,r=0,i=0,s=0,a=0,o=0;switch(tB(T1,this)){case 90:r=t/e,i=-e/t,a=e;break;case 180:n=-1,s=-1,a=e,o=t;break;case 270:r=-t/e,i=e/t,o=t;break;default:return""}return"matrix(".concat(n," ").concat(r," ").concat(i," ").concat(s," ").concat(fZ.svgRound(a)," ").concat(fZ.svgRound(o),")")}getPathResizingSVGProperties(e){let[t,n,r,i]=e;const[s,a]=ZF(B1,this,W1).call(this),[o,l,c,d]=tB(P1,this);if(Math.abs(c-s)<=fZ.PRECISION||Math.abs(d-a)<=fZ.PRECISION){const e=t+r/2-(o+c/2),s=n+i/2-(l+d/2);return{path:{"transform-origin":"".concat(fZ.svgRound(t)," ").concat(fZ.svgRound(n)),transform:"".concat(this.rotationTransform," translate(").concat(e," ").concat(s,")")}}}const u=(r-2*s)/(c-2*s),h=(i-2*a)/(d-2*a),p=c/r,m=d/i;return{path:{"transform-origin":"".concat(fZ.svgRound(o)," ").concat(fZ.svgRound(l)),transform:"".concat(this.rotationTransform," scale(").concat(p," ").concat(m,") ")+"translate(".concat(fZ.svgRound(s)," ").concat(fZ.svgRound(a),") scale(").concat(u," ").concat(h,") ")+"translate(".concat(fZ.svgRound(-s)," ").concat(fZ.svgRound(-a),")")}}}getPathResizedSVGProperties(e){let[t,n,r,i]=e;const[s,a]=ZF(B1,this,W1).call(this),o=tB(P1,this),[l,c,d,u]=o;if(o[0]=t,o[1]=n,o[2]=r,o[3]=i,Math.abs(d-s)<=fZ.PRECISION||Math.abs(u-a)<=fZ.PRECISION){const e=t+r/2-(l+d/2),s=n+i/2-(c+u/2);for(const{line:t,points:n}of tB(D1,this))fZ._translate(t,e,s,t),fZ._translate(n,e,s,n);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(fZ.svgRound(t)," ").concat(fZ.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}const h=(r-2*s)/(d-2*s),p=(i-2*a)/(u-2*a),m=-h*(l+s)+t+s,f=-p*(c+a)+n+a;if(1!==h||1!==p||0!==m||0!==f)for(const{line:g,points:v}of tB(D1,this))fZ._rescale(g,m,f,h,p,g),fZ._rescale(v,m,f,h,p,v);return{root:{viewBox:this.viewBox},path:{"transform-origin":"".concat(fZ.svgRound(t)," ").concat(fZ.svgRound(n)),transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties(e,t){let[n,r]=e;const[i,s]=t,a=tB(P1,this),o=n-a[0],l=r-a[1];if(tB(O1,this)===i&&tB(R1,this)===s)for(const{line:c,points:d}of tB(D1,this))fZ._translate(c,o,l,c),fZ._translate(d,o,l,d);else{const e=tB(O1,this)/i,t=tB(R1,this)/s;nB(O1,this,i),nB(R1,this,s);for(const{line:n,points:r}of tB(D1,this))fZ._rescale(n,o,l,e,t,n),fZ._rescale(r,o,l,e,t,r);a[2]*=e,a[3]*=t}return a[0]=n,a[1]=r,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":"".concat(fZ.svgRound(n)," ").concat(fZ.svgRound(r))}}}get defaultSVGProperties(){const e=tB(P1,this);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":"".concat(fZ.svgRound(e[0])," ").concat(fZ.svgRound(e[1])),transform:this.rotationTransform||null},bbox:e}}}function W1(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tB(F1,this);const t=tB(M1,this)+e/2*tB(I1,this);return tB(L1,this)%180===0?[t/tB(O1,this),t/tB(R1,this)]:[t/tB(R1,this),t/tB(O1,this)]}function U1(){const[e,t,n,r]=tB(P1,this),[i,s]=ZF(B1,this,W1).call(this,0);return[e+i,t+s,n-2*i,r-2*s]}function V1(){const e=nB(P1,this,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of tB(D1,this)){if(r.length<=12){for(let t=4,n=r.length;t<n;t+=6)Nz.pointBoundingBox(r[t],r[t+1],e);continue}let t=r[4],n=r[5];for(let i=6,s=r.length;i<s;i+=6){const[s,a,o,l,c,d]=r.subarray(i,i+6);Nz.bezierBoundingBox(t,n,s,a,o,l,c,d,e),t=c,n=d}}const[t,n]=ZF(B1,this,W1).call(this);e[0]=Pz(e[0]-t,0,1),e[1]=Pz(e[1]-n,0,1),e[2]=Pz(e[2]+t,0,1),e[3]=Pz(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]}function H1(e){const[t,n]=ZF(B1,this,W1).call(this);nB(F1,this,e);const[r,i]=ZF(B1,this,W1).call(this),[s,a]=[r-t,i-n],o=tB(P1,this);return o[0]-=s,o[1]-=a,o[2]+=2*s,o[3]+=2*a,o}class q1 extends J0{constructor(e){super(),this._viewParameters=e,super.updateProperties({fill:"none",stroke:MH._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(e,t){"stroke-width"===e&&(null!==t&&void 0!==t||(t=this["stroke-width"]),t*=this._viewParameters.realScale),super.updateSVGProperty(e,t)}clone(){const e=new q1(this._viewParameters);return e.updateAll(this),e}}var G1=new WeakSet;class K1 extends e1{constructor(e){super((0,Ne.A)((0,Ne.A)({},e),{},{name:"inkEditor"})),$F(this,G1),this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,t){MH.initialize(e,t),this._defaultDrawingOptions=new q1(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!0}static get typesMap(){return uz(this,"typesMap",new Map([[IB.INK_THICKNESS,"stroke-width"],[IB.INK_COLOR,"stroke"],[IB.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,t,n,r,i){return new C1(e,t,n,r,i,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,t,n,r,i,s){return z1.deserialize(e,t,n,r,i,s)}static async deserialize(e,t,n){let r=null;if(e instanceof MQ){const{data:{inkLists:t,rect:n,rotation:i,id:s,color:a,opacity:o,borderStyle:{rawWidth:l},popupRef:c,richText:d,contentsObj:u,creationDate:h,modificationDate:p},parent:{page:{pageNumber:m}}}=e;r=e={annotationType:RB.INK,color:Array.from(a),thickness:l,opacity:o,paths:{points:t},boxes:null,pageIndex:m-1,rect:n.slice(0),rotation:i,annotationElementId:s,id:s,deleted:!1,popupRef:c,richText:d,comment:(null===u||void 0===u?void 0:u.str)||null,creationDate:h,modificationDate:p}}const i=await super.deserialize(e,t,n);return i._initialData=r,e.comment&&i.setCommentData(e),i}get toolbarButtons(){return this._colorPicker||(this._colorPicker=new QJ(this)),[["colorPicker",this._colorPicker]]}get colorType(){return IB.INK_COLOR}get color(){return this._drawingOptions.stroke}get opacity(){return this._drawingOptions["stroke-opacity"]}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:t,parent:n}=this;t.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,t.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions(e){let{color:t,thickness:n,opacity:r}=e;this._drawingOptions=K1.getDefaultDrawingOptions({stroke:Nz.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{stroke:r,"stroke-opacity":i,"stroke-width":s}}=this,a=Object.assign(super.serialize(e),{color:MH._colorManager.convert(r),opacity:i,thickness:s,paths:{lines:t,points:n}});return this.addComment(a),e?(a.isCopy=!0,a):this.annotationElementId&&!ZF(G1,this,Y1).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(e){if(this.deleted)return e.hide(),null;const{points:t,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:t,popup:this.comment}),null}}function Y1(e){const{color:t,thickness:n,opacity:r,pageIndex:i}=this._initialData;return this.hasEditedComment||this._hasBeenMoved||this._hasBeenResized||e.color.some((e,n)=>e!==t[n])||e.thickness!==n||e.opacity!==r||e.pageIndex!==i}(0,ol.A)(K1,"_type","ink"),(0,ol.A)(K1,"_editorType",RB.INK),(0,ol.A)(K1,"_defaultDrawingOptions",null);class X1 extends z1{toSVGPath(){let e=super.toSVGPath();return e.endsWith("Z")||(e+="Z"),e}}class J1{static extractContoursFromText(e,t,n,r,i,s){let{fontFamily:a,fontStyle:o,fontWeight:l}=t,c=new OffscreenCanvas(1,1),d=c.getContext("2d",{alpha:!1});const u=d.font="".concat(o," ").concat(l," ").concat(200,"px ").concat(a),{actualBoundingBoxLeft:h,actualBoundingBoxRight:p,actualBoundingBoxAscent:m,actualBoundingBoxDescent:f,fontBoundingBoxAscent:g,fontBoundingBoxDescent:v,width:y}=d.measureText(e),x=1.5,b=Math.ceil(Math.max(Math.abs(h)+Math.abs(p)||0,y)*x),w=Math.ceil(Math.max(Math.abs(m)+Math.abs(f)||200,Math.abs(g)+Math.abs(v)||200)*x);c=new OffscreenCanvas(b,w),d=c.getContext("2d",{alpha:!0,willReadFrequently:!0}),d.font=u,d.filter="grayscale(1)",d.fillStyle="white",d.fillRect(0,0,b,w),d.fillStyle="black",d.fillText(e,.5*b/2,1.5*w/2);const j=ZF(J1,this,s2).call(this,d.getImageData(0,0,b,w).data),N=ZF(J1,this,i2).call(this,j),k=ZF(J1,this,a2).call(this,N),A=ZF(J1,this,e2).call(this,j,b,w,k);return this.processDrawnLines({lines:{curves:A,width:b,height:w},pageWidth:n,pageHeight:r,rotation:i,innerMargin:s,mustSmooth:!0,areContours:!0})}static process(e,t,n,r,i){const[s,a,o]=ZF(J1,this,o2).call(this,e),[l,c]=ZF(J1,this,r2).call(this,s,a,o,Math.hypot(a,o)*ZF(J1,this,l2)._.sigmaSFactor,ZF(J1,this,l2)._.sigmaR,ZF(J1,this,l2)._.kernelSize),d=ZF(J1,this,a2).call(this,c),u=ZF(J1,this,e2).call(this,l,a,o,d);return this.processDrawnLines({lines:{curves:u,width:a,height:o},pageWidth:t,pageHeight:n,rotation:r,innerMargin:i,mustSmooth:!0,areContours:!0})}static processDrawnLines(e){var t;let{lines:n,pageWidth:r,pageHeight:i,rotation:s,innerMargin:a,mustSmooth:o,areContours:l}=e;s%180!==0&&([r,i]=[i,r]);const{curves:c,width:d,height:u}=n,h=null!==(t=n.thickness)&&void 0!==t?t:0,p=[],m=Math.min(r/d,i/u),f=m/r,g=m/i,v=[];for(const{points:x}of c){const e=o?ZF(J1,this,n2).call(this,x):x;if(!e)continue;v.push(e);const t=e.length,n=new Float32Array(t),r=new Float32Array(3*(2===t?2:t-2));if(p.push({line:r,points:n}),2===t){n[0]=e[0]*f,n[1]=e[1]*g,r.set([NaN,NaN,NaN,NaN,n[0],n[1]],0);continue}let[i,s,a,l]=e;i*=f,s*=g,a*=f,l*=g,n.set([i,s,a,l],0),r.set([NaN,NaN,NaN,NaN,i,s],0);for(let o=4;o<t;o+=2){const t=n[o]=e[o]*f,c=n[o+1]=e[o+1]*g;r.set(fZ.createBezierPoints(i,s,a,l,t,c),3*(o-2)),[i,s,a,l]=[a,l,t,c]}}if(0===p.length)return null;const y=l?new X1:new z1;return y.build(p,r,i,1,s,l?0:h,a),{outline:y,newCurves:v,areContours:l,thickness:h,width:d,height:u}}static async compressSignature(e){let t,{outlines:n,areContours:r,thickness:i,width:s,height:a}=e,o=1/0,l=-1/0,c=0;for(const y of n){c+=y.length;for(let e=2,t=y.length;e<t;e++){const t=y[e]-y[e-2];o=Math.min(o,t),l=Math.max(l,t)}}t=o>=-128&&l<=127?Int8Array:o>=-32768&&l<=32767?Int16Array:Int32Array;const d=n.length,u=8+3*d,h=new Uint32Array(u);let p=0;h[p++]=u*Uint32Array.BYTES_PER_ELEMENT+(c-2*d)*t.BYTES_PER_ELEMENT,h[p++]=0,h[p++]=s,h[p++]=a,h[p++]=r?0:1,h[p++]=Math.max(0,Math.floor(null!==i&&void 0!==i?i:0)),h[p++]=d,h[p++]=t.BYTES_PER_ELEMENT;for(const y of n)h[p++]=y.length-2,h[p++]=y[0],h[p++]=y[1];const m=new CompressionStream("deflate-raw"),f=m.writable.getWriter();await f.ready,f.write(h);const g=t.prototype.constructor;for(const y of n){const e=new g(y.length-2);for(let t=2,n=y.length;t<n;t++)e[t-2]=y[t]-y[t-2];f.write(e)}f.close();const v=await new Response(m.readable).arrayBuffer();return Tz(new Uint8Array(v))}static async decompressSignature(e){try{const l=(a=e,Uint8Array.fromBase64?Uint8Array.fromBase64(a):bz(atob(a))),{readable:c,writable:d}=new DecompressionStream("deflate-raw"),u=d.getWriter();await u.ready,u.write(l).then(async()=>{await u.ready,await u.close()}).catch(()=>{});let h=null,p=0;var t,n=!1,r=!1;try{for(var i,s=(0,wB.A)(c);n=!(i=await s.next()).done;n=!1){const e=i.value;h||(h=new Uint8Array(new Uint32Array(e.buffer,0,4)[0])),h.set(e,p),p+=e.length}}catch(o){r=!0,t=o}finally{try{n&&null!=s.return&&await s.return()}finally{if(r)throw t}}const m=new Uint32Array(h.buffer,0,h.length>>2),f=m[1];if(0!==f)throw new Error("Invalid version: ".concat(f));const g=m[2],v=m[3],y=0===m[4],x=m[5],b=m[6],w=m[7],j=[],N=(8+3*b)*Uint32Array.BYTES_PER_ELEMENT;let k;switch(w){case Int8Array.BYTES_PER_ELEMENT:k=new Int8Array(h.buffer,N);break;case Int16Array.BYTES_PER_ELEMENT:k=new Int16Array(h.buffer,N);break;case Int32Array.BYTES_PER_ELEMENT:k=new Int32Array(h.buffer,N)}p=0;for(let e=0;e<b;e++){const t=m[3*e+8],n=new Float32Array(t+2);j.push(n);for(let r=0;r<2;r++)n[r]=m[3*e+8+r+1];for(let e=0;e<t;e++)n[e+2]=n[e]+k[p++]}return{areContours:y,thickness:x,outlines:j,width:g,height:v}}catch(Ae){return az("decompressSignature: ".concat(Ae)),null}var a}}function $1(e,t,n,r){return r-=t,0===(n-=e)?r>0?0:4:1===n?r+6:2-r}function Q1(e,t,n,r,i,s,a){const o=ZF(xB,this,$1).call(this,n,r,i,s);for(let l=0;l<8;l++){const i=(-l+o-a+16)%8;if(0!==e[(n+ZF(xB,this,c2)._[2*i])*t+(r+ZF(xB,this,c2)._[2*i+1])])return i}return-1}function Z1(e,t,n,r,i,s,a){const o=ZF(xB,this,$1).call(this,n,r,i,s);for(let l=0;l<8;l++){const i=(l+o+a+16)%8;if(0!==e[(n+ZF(xB,this,c2)._[2*i])*t+(r+ZF(xB,this,c2)._[2*i+1])])return i}return-1}function e2(e,t,n,r){const i=e.length,s=new Int32Array(i);for(let c=0;c<i;c++)s[c]=e[c]<=r?1:0;for(let c=1;c<n-1;c++)s[c*t]=s[c*t+t-1]=0;for(let c=0;c<t;c++)s[c]=s[t*n-1-c]=0;let a,o=1;const l=[];for(let c=1;c<n-1;c++){a=1;for(let e=1;e<t-1;e++){const n=c*t+e,r=s[n];if(0===r)continue;let i=c,d=e;if(1===r&&0===s[n-1])o+=1,d-=1;else{if(!(r>=1&&0===s[n+1])){1!==r&&(a=Math.abs(r));continue}o+=1,d+=1,r>1&&(a=r)}const u=[e,c],h=d===e+1,p={isHole:h,points:u,id:o,parent:0};let m;l.push(p);for(const e of l)if(e.id===a){m=e;break}m?m.isHole?p.parent=h?m.parent:a:p.parent=h?a:m.parent:p.parent=h?a:0;const f=ZF(xB,this,Q1).call(this,s,t,c,e,i,d,0);if(-1===f){s[n]=-o,1!==s[n]&&(a=Math.abs(s[n]));continue}let g=ZF(xB,this,c2)._[2*f],v=ZF(xB,this,c2)._[2*f+1];const y=c+g,x=e+v;i=y,d=x;let b=c,w=e;for(;;){const r=ZF(xB,this,Z1).call(this,s,t,b,w,i,d,1);g=ZF(xB,this,c2)._[2*r],v=ZF(xB,this,c2)._[2*r+1];const l=b+g,h=w+v;u.push(h,l);const p=b*t+w;if(0===s[p+1]?s[p]=-o:1===s[p]&&(s[p]=o),l===c&&h===e&&b===y&&w===x){1!==s[n]&&(a=Math.abs(s[n]));break}i=b,d=w,b=l,w=h}}}return l}function t2(e,t,n,r){if(n-t<=4){for(let i=t;i<n-2;i+=2)r.push(e[i],e[i+1]);return}const i=e[t],s=e[t+1],a=e[n-4]-i,o=e[n-3]-s,l=Math.hypot(a,o),c=a/l,d=o/l,u=c*s-d*i,h=o/a,p=1/l,m=Math.atan(h),f=Math.cos(m),g=Math.sin(m),v=p*(Math.abs(f)+Math.abs(g)),y=p*(1-v+v**2),x=Math.max(Math.atan(Math.abs(g+f)*y),Math.atan(Math.abs(g-f)*y));let b=0,w=t;for(let j=t+2;j<n-2;j+=2){const t=Math.abs(u-c*e[j+1]+d*e[j]);t>b&&(w=j,b=t)}b>(l*x)**2?(ZF(xB,this,t2).call(this,e,t,w+2,r),ZF(xB,this,t2).call(this,e,w,n,r)):r.push(i,s)}function n2(e){const t=[],n=e.length;return ZF(xB,this,t2).call(this,e,0,n,t),t.push(e[n-2],e[n-1]),t.length<=4?null:t}function r2(e,t,n,r,i,s){const a=new Float32Array(s**2),o=-2*r**2,l=s>>1;for(let m=0;m<s;m++){const e=(m-l)**2;for(let t=0;t<s;t++)a[m*s+t]=Math.exp((e+(t-l)**2)/o)}const c=new Float32Array(256),d=-2*i**2;for(let m=0;m<256;m++)c[m]=Math.exp(m**2/d);const u=e.length,h=new Uint8Array(u),p=new Uint32Array(256);for(let m=0;m<n;m++)for(let r=0;r<t;r++){const i=m*t+r,o=e[i];let d=0,u=0;for(let h=0;h<s;h++){const i=m+h-l;if(!(i<0||i>=n))for(let n=0;n<s;n++){const p=r+n-l;if(p<0||p>=t)continue;const m=e[i*t+p],f=a[h*s+n]*c[Math.abs(m-o)];d+=m*f,u+=f}}p[h[i]=Math.round(d/u)]++}return[h,p]}function i2(e){const t=new Uint32Array(256);for(const n of e)t[n]++;return t}function s2(e){const t=e.length,n=new Uint8ClampedArray(t>>2);let r=-1/0,i=1/0;for(let a=0,o=n.length;a<o;a++){const t=n[a]=e[a<<2];r=Math.max(r,t),i=Math.min(i,t)}const s=255/(r-i);for(let a=0,o=n.length;a<o;a++)n[a]=(n[a]-i)*s;return n}function a2(e){let t,n=-1/0,r=-1/0;const i=e.findIndex(e=>0!==e);let s=i,a=i;for(t=i;t<256;t++){const i=e[t];i>n&&(t-s>r&&(r=t-s,a=t-1),n=i,s=t)}for(t=a-1;t>=0&&!(e[t]>e[t+1]);t--);return t}function o2(e){const t=e,{width:n,height:r}=e,{maxDim:i}=ZF(xB,this,l2)._;let s=n,a=r;if(n>i||r>i){let o=n,l=r,c=Math.log2(Math.max(n,r)/i);const d=Math.floor(c);c=c===d?d-1:d;for(let n=0;n<c;n++){s=Math.ceil(o/2),a=Math.ceil(l/2);const n=new OffscreenCanvas(s,a);n.getContext("2d").drawImage(e,0,0,o,l,0,0,s,a),o=s,l=a,e!==t&&e.close(),e=n.transferToImageBitmap()}const u=Math.min(i/s,i/a);s=Math.round(s*u),a=Math.round(a*u)}const o=new OffscreenCanvas(s,a).getContext("2d",{willReadFrequently:!0});o.fillStyle="white",o.fillRect(0,0,s,a),o.filter="grayscale(1)",o.drawImage(e,0,0,e.width,e.height,0,0,s,a);const l=o.getImageData(0,0,s,a).data;return[ZF(xB,this,s2).call(this,l),s,a]}xB=J1;var l2={_:{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}},c2={_:new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1])};class d2 extends J0{constructor(){super(),super.updateProperties({fill:MH._defaultLineColor,"stroke-width":0})}clone(){const e=new d2;return e.updateAll(this),e}}class u2 extends q1{constructor(e){super(e),super.updateProperties({stroke:MH._defaultLineColor,"stroke-width":1})}clone(){const e=new u2(this._viewParameters);return e.updateAll(this),e}}var h2=new WeakMap,p2=new WeakMap,m2=new WeakMap,f2=new WeakMap;class g2 extends e1{constructor(e){super((0,Ne.A)((0,Ne.A)({},e),{},{mustBeCommitted:!0,name:"signatureEditor"})),QF(this,h2,!1),QF(this,p2,null),QF(this,m2,null),QF(this,f2,null),this._willKeepAspectRatio=!0,nB(m2,this,e.signatureData||null),nB(p2,this,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,t){MH.initialize(e,t),this._defaultDrawingOptions=new d2,this._defaultDrawnSignatureOptions=new u2(t.viewParameters)}static getDefaultDrawingOptions(e){const t=this._defaultDrawingOptions.clone();return t.updateProperties(e),t}static get supportMultipleDrawings(){return!1}static get typesMap(){return uz(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!tB(p2,this)}}static computeTelemetryFinalData(e){var t,n;const r=e.get("hasDescription");return{hasAltText:null!==(t=r.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=r.get(!1))&&void 0!==n?n:0}}get isResizable(){return!0}onScaleChanging(){null!==this._drawId&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,t;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,t=this.y),super.render(),null===this._drawId)if(tB(m2,this)){const{lines:e,mustSmooth:t,areContours:n,description:r,uuid:i,heightInPage:s}=tB(m2,this),{rawDims:{pageWidth:a,pageHeight:o},rotation:l}=this.parent.viewport,c=J1.processDrawnLines({lines:e,pageWidth:a,pageHeight:o,rotation:l,innerMargin:g2._INNER_MARGIN,mustSmooth:t,areContours:n});this.addSignature(c,s,r,i)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);else this.div.setAttribute("data-l10n-args",JSON.stringify({description:tB(p2,this)||""}));return n&&(this._isCopy=!0,this._moveAfterPaste(e,t)),this.div}setUuid(e){nB(f2,this,e),this.addEditToolbar()}getUuid(){return tB(f2,this)}get description(){return tB(p2,this)}set description(e){nB(p2,this,e),this.div&&(this.div.setAttribute("data-l10n-args",JSON.stringify({description:e})),super.addEditToolbar().then(t=>{null===t||void 0===t||t.updateEditSignatureButton(e)}))}getSignaturePreview(){const{newCurves:e,areContours:t,thickness:n,width:r,height:i}=tB(m2,this),s=Math.max(r,i);return{areContours:t,outline:J1.processDrawnLines({lines:{curves:e.map(e=>({points:e})),thickness:n,width:r,height:i},pageWidth:s,pageHeight:s,rotation:0,innerMargin:0,mustSmooth:!1,areContours:t}).outline}}get toolbarButtons(){return this._uiManager.signatureManager?[["editSignature",this._uiManager.signatureManager]]:super.toolbarButtons}addSignature(e,t,n,r){const{x:i,y:s}=this,{outline:a}=nB(m2,this,e);let o;nB(h2,this,a instanceof X1),this.description=n,tB(h2,this)?o=g2.getDefaultDrawingOptions():(o=g2._defaultDrawnSignatureOptions.clone(),o.updateProperties({"stroke-width":a.thickness})),this._addOutlines({drawOutlines:a,drawingOptions:o});const[,l]=this.pageDimensions;let c=t/l;c=c>=1?.5:c,this.width*=c/this.height,this.width>=1&&(c*=.9/this.width,this.width=.9),this.height=c,this.setDims(),this.x=i,this.y=s,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:r}=this.parent.viewport;return J1.process(e,t,n,r,g2._INNER_MARGIN)}getFromText(e,t){const{rawDims:{pageWidth:n,pageHeight:r},rotation:i}=this.parent.viewport;return J1.extractContoursFromText(e,t,n,r,i,g2._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:t,pageHeight:n},rotation:r}=this.parent.viewport;return J1.processDrawnLines({lines:e,pageWidth:t,pageHeight:n,rotation:r,innerMargin:g2._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions(e){let{areContours:t,thickness:n}=e;t?this._drawingOptions=g2.getDefaultDrawingOptions():(this._drawingOptions=g2._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":n}))}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.isEmpty())return null;const{lines:t,points:n}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":r}}=this,i=Object.assign(super.serialize(e),{isSignature:!0,areContours:tB(h2,this),color:[0,0,0],thickness:tB(h2,this)?0:r});return this.addComment(i),e?(i.paths={lines:t,points:n},i.uuid=tB(f2,this),i.isCopy=!0):i.lines=t,tB(p2,this)&&(i.accessibilityData={type:"Figure",alt:tB(p2,this)}),i}static deserializeDraw(e,t,n,r,i,s){return s.areContours?X1.deserialize(e,t,n,r,i,s):z1.deserialize(e,t,n,r,i,s)}static async deserialize(e,t,n){var r;const i=await super.deserialize(e,t,n);return nB(h2,i,e.areContours),i.description=(null===(r=e.accessibilityData)||void 0===r?void 0:r.alt)||"",nB(f2,i,e.uuid),i}}(0,ol.A)(g2,"_type","signature"),(0,ol.A)(g2,"_editorType",RB.SIGNATURE),(0,ol.A)(g2,"_defaultDrawingOptions",null);var v2=new WeakMap,y2=new WeakMap,x2=new WeakMap,b2=new WeakMap,w2=new WeakMap,j2=new WeakMap,N2=new WeakMap,k2=new WeakMap,A2=new WeakMap,S2=new WeakMap,_2=new WeakMap,C2=new WeakSet;class E2 extends MH{constructor(e){super((0,Ne.A)((0,Ne.A)({},e),{},{name:"stampEditor"})),$F(this,C2),QF(this,v2,null),QF(this,y2,null),QF(this,x2,null),QF(this,b2,null),QF(this,w2,null),QF(this,j2,""),QF(this,N2,null),QF(this,k2,!1),QF(this,A2,null),QF(this,S2,!1),QF(this,_2,!1),nB(b2,this,e.bitmapUrl),nB(w2,this,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,t){MH.initialize(e,t)}static isHandlingMimeForPasting(e){return Qz.includes(e)}static paste(e,t){t.pasteEditor({mode:RB.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!(null===(e=this.altTextData)||void 0===e||!e.altText)}}static computeTelemetryFinalData(e){var t,n;const r=e.get("hasAltText");return{hasAltText:null!==(t=r.get(!0))&&void 0!==t?t:0,hasNoAltText:null!==(n=r.get(!1))&&void 0!==n?n:0}}async mlGuessAltText(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:i,height:s}=e||this.copyCanvas(null,null,!0).imageData,a=await n.guess({name:"altText",request:{data:r,width:i,height:s,channels:r.length/(i*s)}});if(!a)throw new Error("No response from the AI service.");if(a.error)throw new Error("Error from the AI service.");if(a.cancel)return null;if(!a.output)throw new Error("No valid response from the AI service.");const o=a.output;return await this.setGuessedAltText(o),t&&!this.hasAltTextData()&&(this.altTextData={alt:o,decorative:!1}),o}remove(){var e;tB(y2,this)&&(nB(v2,this,null),this._uiManager.imageManager.deleteId(tB(y2,this)),null===(e=tB(N2,this))||void 0===e||e.remove(),nB(N2,this,null),tB(A2,this)&&(clearTimeout(tB(A2,this)),nB(A2,this,null)));super.remove()}rebuild(){this.parent?(super.rebuild(),null!==this.div&&(tB(y2,this)&&null===tB(N2,this)&&ZF(C2,this,M2).call(this),this.isAttachedToDOM||this.parent.add(this))):tB(y2,this)&&ZF(C2,this,M2).call(this)}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(tB(x2,this)||tB(v2,this)||tB(b2,this)||tB(w2,this)||tB(y2,this)||tB(k2,this))}get toolbarButtons(){return[["altText",this.createAltText()]]}get isResizable(){return!0}render(){if(this.div)return this.div;let e,t;return this._isCopy&&(e=this.x,t=this.y),super.render(),this.div.hidden=!0,this.createAltText(),tB(k2,this)||(tB(v2,this)?ZF(C2,this,D2).call(this):ZF(C2,this,M2).call(this)),this._isCopy&&this._moveAfterPaste(e,t),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,t){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,t);t.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(nB(y2,this,n),r&&nB(v2,this,r),nB(k2,this,!1),ZF(C2,this,D2).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;null!==tB(A2,this)&&clearTimeout(tB(A2,this));nB(A2,this,setTimeout(()=>{nB(A2,this,null),ZF(C2,this,R2).call(this)},200))}copyCanvas(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e||(e=224);const{width:r,height:i}=tB(v2,this),s=new $z;let a=tB(v2,this),o=r,l=i,c=null;if(t){if(r>t||i>t){const e=Math.min(t/r,t/i);o=Math.floor(r*e),l=Math.floor(i*e)}c=document.createElement("canvas");const e=c.width=Math.ceil(o*s.sx),n=c.height=Math.ceil(l*s.sy);tB(S2,this)||(a=ZF(C2,this,O2).call(this,e,n));const d=c.getContext("2d");d.filter=this._uiManager.hcmFilter;let u="white",h="#cfcfd8";"none"!==this._uiManager.hcmFilter?h="black":Zz.isDarkMode&&(u="#8f8f9d",h="#42414d");const p=15,m=p*s.sx,f=p*s.sy,g=new OffscreenCanvas(2*m,2*f),v=g.getContext("2d");v.fillStyle=u,v.fillRect(0,0,2*m,2*f),v.fillStyle=h,v.fillRect(0,0,m,f),v.fillRect(m,f,m,f),d.fillStyle=d.createPattern(g,"repeat"),d.fillRect(0,0,e,n),d.drawImage(a,0,0,a.width,a.height,0,0,e,n)}let d=null;if(n){let t,n;if(s.symmetric&&a.width<e&&a.height<e)t=a.width,n=a.height;else if(a=tB(v2,this),r>e||i>e){const s=Math.min(e/r,e/i);t=Math.floor(r*s),n=Math.floor(i*s),tB(S2,this)||(a=ZF(C2,this,O2).call(this,t,n))}const o=new OffscreenCanvas(t,n).getContext("2d",{willReadFrequently:!0});o.drawImage(a,0,0,a.width,a.height,0,0,t,n),d={width:t,height:n,data:o.getImageData(0,0,t,n).data}}return{canvas:c,width:o,height:l,imageData:d}}static async deserialize(e,t,n){let r=null,i=!1;if(e instanceof FQ){var s;const{data:{rect:a,rotation:o,id:l,structParent:c,popupRef:d,richText:u,contentsObj:h,creationDate:p,modificationDate:m},container:f,parent:{page:{pageNumber:g}},canvas:v}=e;let y,x;v?(delete e.canvas,({id:y,bitmap:x}=n.imageManager.getFromCanvas(f.id,v)),v.remove()):(i=!0,e._hasNoCanvas=!0);const b=(null===(s=await t._structTree.getAriaAttributes("".concat(Ez).concat(l)))||void 0===s?void 0:s.get("aria-label"))||"";r=e={annotationType:RB.STAMP,bitmapId:y,bitmap:x,pageIndex:g-1,rect:a.slice(0),rotation:o,annotationElementId:l,id:l,deleted:!1,accessibilityData:{decorative:!1,altText:b},isSvg:!1,structParent:c,popupRef:d,richText:u,comment:(null===h||void 0===h?void 0:h.str)||null,creationDate:p,modificationDate:m}}const a=await super.deserialize(e,t,n),{rect:o,bitmap:l,bitmapUrl:c,bitmapId:d,isSvg:u,accessibilityData:h}=e;i?(n.addMissingCanvas(e.id,a),nB(k2,a,!0)):d&&n.imageManager.isValidId(d)?(nB(y2,a,d),l&&nB(v2,a,l)):nB(b2,a,c),nB(S2,a,u);const[p,m]=a.pageDimensions;return a.width=(o[2]-o[0])/p,a.height=(o[3]-o[1])/m,h&&(a.altTextData=h),a._initialData=r,e.comment&&a.setCommentData(e),nB(_2,a,!!r),a}serialize(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Object.assign(super.serialize(e),{bitmapId:tB(y2,this),isSvg:tB(S2,this)});if(this.addComment(n),e)return n.bitmapUrl=ZF(C2,this,I2).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:i}=this.serializeAltText(!1);if(!r&&i&&(n.accessibilityData={type:"Figure",alt:i}),this.annotationElementId){const e=ZF(C2,this,L2).call(this,n);if(e.isSame)return null;var s;if(e.isSameAltText)delete n.accessibilityData;else n.accessibilityData.structParent=null!==(s=this._initialData.structParent)&&void 0!==s?s:-1;return n.id=this.annotationElementId,delete n.bitmapId,n}if(null===t)return n;t.stamps||(t.stamps=new Map);const a=tB(S2,this)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(t.stamps.has(tB(y2,this))){if(tB(S2,this)){const e=t.stamps.get(tB(y2,this));a>e.area&&(e.area=a,e.serialized.bitmap.close(),e.serialized.bitmap=ZF(C2,this,I2).call(this,!1))}}else t.stamps.set(tB(y2,this),{area:a,serialized:n}),n.bitmap=ZF(C2,this,I2).call(this,!1);return n}renderAnnotationElement(e){return this.deleted?(e.hide(),null):(e.updateEdited({rect:this.getPDFRect(),popup:this.comment}),null)}}function P2(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e?(nB(v2,this,e.bitmap),t||(nB(y2,this,e.id),nB(S2,this,e.isSvg)),e.file&&nB(j2,this,e.file.name),ZF(C2,this,D2).call(this)):this.remove()}function T2(){if(nB(x2,this,null),this._uiManager.enableWaiting(!1),tB(N2,this))if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&tB(v2,this))this.addEditToolbar().then(()=>{this._editToolbar.hide(),this._uiManager.editAltText(this,!0)});else{if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&tB(v2,this)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch(e){}}this.div.focus()}}function M2(){if(tB(y2,this))return this._uiManager.enableWaiting(!0),void this._uiManager.imageManager.getFromId(tB(y2,this)).then(e=>ZF(C2,this,P2).call(this,e,!0)).finally(()=>ZF(C2,this,T2).call(this));if(tB(b2,this)){const e=tB(b2,this);return nB(b2,this,null),this._uiManager.enableWaiting(!0),void nB(x2,this,this._uiManager.imageManager.getFromUrl(e).then(e=>ZF(C2,this,P2).call(this,e)).finally(()=>ZF(C2,this,T2).call(this)))}if(tB(w2,this)){const e=tB(w2,this);return nB(w2,this,null),this._uiManager.enableWaiting(!0),void nB(x2,this,this._uiManager.imageManager.getFromFile(e).then(e=>ZF(C2,this,P2).call(this,e)).finally(()=>ZF(C2,this,T2).call(this)))}const e=document.createElement("input");e.type="file",e.accept=Qz.join(",");const t=this._uiManager._signal;nB(x2,this,new Promise(n=>{e.addEventListener("change",async()=>{if(e.files&&0!==e.files.length){this._uiManager.enableWaiting(!0);const t=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),ZF(C2,this,P2).call(this,t)}else this.remove();n()},{signal:t}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:t})}).finally(()=>ZF(C2,this,T2).call(this))),e.click()}function D2(){var e;const{div:t}=this;let{width:n,height:r}=tB(v2,this);const[i,s]=this.pageDimensions,a=.75;if(this.width)n=this.width*i,r=this.height*s;else if(n>a*i||r>a*s){const e=Math.min(a*i/n,a*s/r);n*=e,r*=e}this._uiManager.enableWaiting(!1);const o=nB(N2,this,document.createElement("canvas"));o.setAttribute("role","img"),this.addContainer(o),this.width=n/i,this.height=r/s,this.setDims(),null!==(e=this._initialOptions)&&void 0!==e&&e.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&!this.annotationElementId||(t.hidden=!1),ZF(C2,this,R2).call(this),tB(_2,this)||(this.parent.addUndoableEditor(this),nB(_2,this,!0)),this._reportTelemetry({action:"inserted_image"}),tB(j2,this)&&this.div.setAttribute("aria-description",tB(j2,this)),this.annotationElementId||this._uiManager.a11yAlert("pdfjs-editor-stamp-added-alert")}function O2(e,t){const{width:n,height:r}=tB(v2,this);let i=n,s=r,a=tB(v2,this);for(;i>2*e||s>2*t;){const n=i,r=s;i>2*e&&(i=i>=16384?Math.floor(i/2)-1:Math.ceil(i/2)),s>2*t&&(s=s>=16384?Math.floor(s/2)-1:Math.ceil(s/2));const o=new OffscreenCanvas(i,s);o.getContext("2d").drawImage(a,0,0,n,r,0,0,i,s),a=o.transferToImageBitmap()}return a}function R2(){const[e,t]=this.parentDimensions,{width:n,height:r}=this,i=new $z,s=Math.ceil(n*e*i.sx),a=Math.ceil(r*t*i.sy),o=tB(N2,this);if(!o||o.width===s&&o.height===a)return;o.width=s,o.height=a;const l=tB(S2,this)?tB(v2,this):ZF(C2,this,O2).call(this,s,a),c=o.getContext("2d");c.filter=this._uiManager.hcmFilter,c.drawImage(l,0,0,l.width,l.height,0,0,s,a)}function I2(e){if(e){if(tB(S2,this)){const e=this._uiManager.imageManager.getSvgUrl(tB(y2,this));if(e)return e}const e=document.createElement("canvas");({width:e.width,height:e.height}=tB(v2,this));return e.getContext("2d").drawImage(tB(v2,this),0,0),e.toDataURL()}if(tB(S2,this)){const[e,t]=this.pageDimensions,n=Math.round(this.width*e*Rz.PDF_TO_CSS_UNITS),r=Math.round(this.height*t*Rz.PDF_TO_CSS_UNITS),i=new OffscreenCanvas(n,r);return i.getContext("2d").drawImage(tB(v2,this),0,0,tB(v2,this).width,tB(v2,this).height,0,0,n,r),i.transferToImageBitmap()}return structuredClone(tB(v2,this))}function L2(e){var t;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,i=e.pageIndex===n,s=((null===(t=e.accessibilityData)||void 0===t?void 0:t.alt)||"")===r;return{isSame:!this.hasEditedComment&&!this._hasBeenMoved&&!this._hasBeenResized&&i&&s,isSameAltText:s}}(0,ol.A)(E2,"_type","stamp"),(0,ol.A)(E2,"_editorType",RB.STAMP);var F2=new WeakMap,B2=new WeakMap,z2=new WeakMap,W2=new WeakMap,U2=new WeakMap,V2=new WeakMap,H2=new WeakMap,q2=new WeakMap,G2=new WeakMap,K2=new WeakMap,Y2=new WeakMap,X2=new WeakMap,J2=new WeakMap,$2=new WeakMap,Q2=new WeakMap,Z2=new WeakMap,e3=new WeakSet;class t3{constructor(e){let{uiManager:t,pageIndex:n,div:r,structTreeLayer:i,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:c,l10n:d}=e;$F(this,e3),QF(this,F2,void 0),QF(this,B2,!1),QF(this,z2,null),QF(this,W2,null),QF(this,U2,null),QF(this,V2,new Map),QF(this,H2,!1),QF(this,q2,!1),QF(this,G2,!1),QF(this,K2,null),QF(this,Y2,null),QF(this,X2,null),QF(this,J2,null),QF(this,$2,null),QF(this,Q2,-1),QF(this,Z2,void 0);const u=[...l3._.values()];if(!t3._initialized){t3._initialized=!0;for(const e of u)e.initialize(d,t)}t.registerEditorTypes(u),nB(Z2,this,t),this.pageIndex=n,this.div=r,nB(F2,this,s),nB(z2,this,a),this.viewport=c,nB(X2,this,l),this.drawLayer=o,this._structTree=i,tB(Z2,this).addLayer(this)}get isEmpty(){return 0===tB(V2,this).size}get isInvisible(){return this.isEmpty&&tB(Z2,this).getMode()===RB.NONE}updateToolbar(e){tB(Z2,this).updateToolbar(e)}updateMode(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:tB(Z2,this).getMode();switch(ZF(e3,this,o3).call(this),e){case RB.NONE:return this.div.classList.toggle("nonEditing",!0),this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),void this.disableClick();case RB.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case RB.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;if(t.toggle("nonEditing",!1),e===RB.POPUP)t.toggle("commentEditing",!0);else{t.toggle("commentEditing",!1);for(const n of l3._.values())t.toggle("".concat(n._type,"Editing"),e===n._editorType)}this.div.hidden=!1}hasTextLayer(e){var t;return e===(null===(t=tB(X2,this))||void 0===t?void 0:t.div)}setEditingState(e){tB(Z2,this).setEditingState(e)}addCommands(e){tB(Z2,this).addCommands(e)}cleanUndoStack(e){tB(Z2,this).cleanUndoStack(e)}toggleDrawing(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("drawing",!e)}togglePointerEvents(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(){var e;let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];null===(e=tB(z2,this))||void 0===e||e.div.classList.toggle("disabled",!t)}async enable(){var e;nB(G2,this,!0),this.div.tabIndex=0,this.togglePointerEvents(!0),this.div.classList.toggle("nonEditing",!1),null===(e=tB($2,this))||void 0===e||e.abort(),nB($2,this,null);const t=new Set;for(const r of eB(e3,this,n3))r.enableEditing(),r.show(!0),r.annotationElementId&&(tB(Z2,this).removeChangedExistingAnnotation(r),t.add(r.annotationElementId));const n=tB(z2,this);if(n)for(const r of n.getEditableAnnotations()){if(r.hide(),tB(Z2,this).isDeletedAnnotationElement(r.data.id))continue;if(t.has(r.data.id))continue;const e=await this.deserialize(r);e&&(this.addOrRebuild(e),e.enableEditing())}nB(G2,this,!1),tB(Z2,this)._eventBus.dispatch("editorsrendered",{source:this,pageNumber:this.pageIndex+1})}disable(){if(nB(q2,this,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1),this.div.classList.toggle("nonEditing",!0),tB(X2,this)&&!tB($2,this)){nB($2,this,new AbortController);const e=tB(Z2,this).combinedSignal(tB($2,this));tB(X2,this).div.addEventListener("pointerdown",e=>{const{clientX:t,clientY:n,timeStamp:r}=e;if(r-tB(Q2,this)>500)return void nB(Q2,this,r);nB(Q2,this,-1);const{classList:i}=this.div;i.toggle("getElements",!0);const s=document.elementsFromPoint(t,n);if(i.toggle("getElements",!1),!this.div.contains(s[0]))return;let a;const o=new RegExp("^".concat(OB,"[0-9]+$"));for(const c of s)if(o.test(c.id)){a=c.id;break}if(!a)return;const l=tB(V2,this).get(a);null===(null===l||void 0===l?void 0:l.annotationElementId)&&(e.stopPropagation(),e.preventDefault(),l.dblclick(e))},{signal:e,capture:!0})}const e=tB(z2,this);if(e){const n=new Map,r=new Map;for(const s of eB(e3,this,n3)){var t;s.disableEditing(),s.annotationElementId?null===s.serialize()?(r.set(s.annotationElementId,s),null===(t=this.getEditableAnnotation(s.annotationElementId))||void 0===t||t.show(),s.remove()):n.set(s.annotationElementId,s):s.updateFakeAnnotationElement(e)}const i=e.getEditableAnnotations();for(const e of i){const{id:t}=e.data;if(tB(Z2,this).isDeletedAnnotationElement(t)){e.updateEdited({deleted:!0});continue}let i=r.get(t);i?(i.resetAnnotationElement(e),i.show(!1),e.show()):(i=n.get(t),i&&(tB(Z2,this).addChangedExistingAnnotation(i),i.renderAnnotationElement(e)&&i.show(!1)),e.show())}}ZF(e3,this,o3).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const r of l3._.values())n.remove("".concat(r._type,"Editing"));this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),nB(q2,this,!1)}getEditableAnnotation(e){var t;return(null===(t=tB(z2,this))||void 0===t?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){tB(Z2,this).getActive()!==e&&tB(Z2,this).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,null!==(e=tB(X2,this))&&void 0!==e&&e.div&&!tB(J2,this)){nB(J2,this,new AbortController);const e=tB(Z2,this).combinedSignal(tB(J2,this));tB(X2,this).div.addEventListener("pointerdown",ZF(e3,this,r3).bind(this),{signal:e}),tB(X2,this).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,null!==(e=tB(X2,this))&&void 0!==e&&e.div&&tB(J2,this)&&(tB(J2,this).abort(),nB(J2,this,null),tB(X2,this).div.classList.remove("highlighting"))}enableClick(){if(tB(W2,this))return;nB(W2,this,new AbortController);const e=tB(Z2,this).combinedSignal(tB(W2,this));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;null===(e=tB(W2,this))||void 0===e||e.abort(),nB(W2,this,null)}attach(e){tB(V2,this).set(e.id,e);const{annotationElementId:t}=e;t&&tB(Z2,this).isDeletedAnnotationElement(t)&&tB(Z2,this).removeDeletedAnnotationElement(e)}detach(e){var t;tB(V2,this).delete(e.id),null===(t=tB(F2,this))||void 0===t||t.removePointerInTextLayer(e.contentDiv),!tB(q2,this)&&e.annotationElementId&&tB(Z2,this).addDeletedAnnotationElement(e)}remove(e){this.detach(e),tB(Z2,this).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(tB(Z2,this).addDeletedAnnotationElement(e.annotationElementId),MH.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),null===(t=e.parent)||void 0===t||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(e.parent!==this||!e.isAttachedToDOM){if(this.changeParent(e),tB(Z2,this).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!tB(G2,this)),tB(Z2,this).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var t;if(!e.isAttachedToDOM)return;const{activeElement:n}=document;e.div.contains(n)&&!tB(U2,this)&&(e._focusEventsAllowed=!1,nB(U2,this,setTimeout(()=>{nB(U2,this,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:tB(Z2,this)._signal}),n.focus())},0))),e._structTreeParentId=null===(t=tB(F2,this))||void 0===t?void 0:t.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){this.addCommands({cmd:()=>e._uiManager.rebuild(e),undo:()=>{e.remove()},mustExec:!1})}getEditorByUID(e){for(const t of tB(V2,this).values())if(t.uid===e)return t;return null}getNextId(){return tB(Z2,this).getId()}combinedSignal(e){return tB(Z2,this).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return null===(e=eB(e3,this,i3))||void 0===e?void 0:e.canCreateNewEmptyEditor()}async pasteEditor(e,t){this.updateToolbar(e),await tB(Z2,this).updateMode(e.mode);const{offsetX:n,offsetY:r}=ZF(e3,this,a3).call(this),i=this.getNextId(),s=ZF(e3,this,s3).call(this,(0,Ne.A)({parent:this,id:i,x:n,y:r,uiManager:tB(Z2,this),isCentered:!0},t));s&&this.add(s)}async deserialize(e){var t,n;return await(null===(t=l3._.get(null!==(n=e.annotationType)&&void 0!==n?n:e.annotationEditorType))||void 0===t?void 0:t.deserialize(e,this,tB(Z2,this)))||null}createAndAddNewEditor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=this.getNextId(),i=ZF(e3,this,s3).call(this,(0,Ne.A)({parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:tB(Z2,this),isCentered:t},n));return i&&this.add(i),i}get boundingClientRect(){return this.div.getBoundingClientRect()}addNewEditor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.createAndAddNewEditor(ZF(e3,this,a3).call(this),!0,e)}setSelected(e){tB(Z2,this).setSelected(e)}toggleSelected(e){tB(Z2,this).toggleSelected(e)}unselect(e){tB(Z2,this).unselect(e)}pointerup(e){var t;const{isMac:n}=wz.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(!tB(H2,this))return;if(nB(H2,this,!1),null!==(t=eB(e3,this,i3))&&void 0!==t&&t.isDrawer&&eB(e3,this,i3).supportMultipleDrawings)return;if(!tB(B2,this))return void nB(B2,this,!0);const r=tB(Z2,this).getMode();r!==RB.STAMP&&r!==RB.SIGNATURE?this.createAndAddNewEditor(e,!1):tB(Z2,this).unselectAll()}pointerdown(e){var t;if(tB(Z2,this).getMode()===RB.HIGHLIGHT&&this.enableTextSelection(),tB(H2,this))return void nB(H2,this,!1);const{isMac:n}=wz.platform;if(0!==e.button||e.ctrlKey&&n)return;if(e.target!==this.div)return;if(nB(H2,this,!0),null!==(t=eB(e3,this,i3))&&void 0!==t&&t.isDrawer)return void this.startDrawingSession(e);const r=tB(Z2,this).getActive();nB(B2,this,!r||r.isEmpty())}startDrawingSession(e){if(this.div.focus({preventScroll:!0}),tB(K2,this))return void eB(e3,this,i3).startDrawing(this,tB(Z2,this),!1,e);tB(Z2,this).setCurrentDrawingSession(this),nB(K2,this,new AbortController);const t=tB(Z2,this).combinedSignal(tB(K2,this));this.div.addEventListener("blur",e=>{let{relatedTarget:t}=e;t&&!this.div.contains(t)&&(nB(Y2,this,null),this.commitOrRemove())},{signal:t}),eB(e3,this,i3).startDrawing(this,tB(Z2,this),!1,e)}pause(e){if(e){const{activeElement:e}=document;return void(this.div.contains(e)&&nB(Y2,this,e))}tB(Y2,this)&&setTimeout(()=>{var e;null===(e=tB(Y2,this))||void 0===e||e.focus(),nB(Y2,this,null)},0)}endDrawingSession(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return tB(K2,this)?(tB(Z2,this).setCurrentDrawingSession(null),tB(K2,this).abort(),nB(K2,this,null),nB(Y2,this,null),eB(e3,this,i3).endDrawing(e)):null}findNewParent(e,t,n){const r=tB(Z2,this).findParent(t,n);return null!==r&&r!==this&&(r.changeParent(e),!0)}commitOrRemove(){return!!tB(K2,this)&&(this.endDrawingSession(),!0)}onScaleChanging(){tB(K2,this)&&eB(e3,this,i3).onScaleChangingWhenDrawing(this)}destroy(){var e;this.commitOrRemove(),(null===(e=tB(Z2,this).getActive())||void 0===e?void 0:e.parent)===this&&(tB(Z2,this).commitOrRemove(),tB(Z2,this).setActiveEditor(null)),tB(U2,this)&&(clearTimeout(tB(U2,this)),nB(U2,this,null));for(const n of tB(V2,this).values()){var t;null===(t=tB(F2,this))||void 0===t||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove()}this.div=null,tB(V2,this).clear(),tB(Z2,this).removeLayer(this)}render(e){let{viewport:t}=e;this.viewport=t,Jz(this.div,t);for(const n of tB(Z2,this).getEditors(this.pageIndex))this.add(n),n.rebuild();this.updateMode()}update(e){let{viewport:t}=e;tB(Z2,this).commitOrRemove(),ZF(e3,this,o3).call(this);const n=this.viewport.rotation,r=t.rotation;if(this.viewport=t,Jz(this.div,{rotation:r}),n!==r)for(const i of tB(V2,this).values())i.rotate(r)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return tB(Z2,this).viewParameters.realScale}}function n3(e){return 0!==tB(V2,e).size?tB(V2,e).values():tB(Z2,e).getEditors(e.pageIndex)}function r3(e){tB(Z2,this).unselectAll();const{target:t}=e;if(t===tB(X2,this).div||("img"===t.getAttribute("role")||t.classList.contains("endOfContent"))&&tB(X2,this).div.contains(t)){const{isMac:t}=wz.platform;if(0!==e.button||e.ctrlKey&&t)return;tB(Z2,this).showAllEditors("highlight",!0,!0),tB(X2,this).div.classList.add("free"),this.toggleDrawing(),M0.startHighlighting(this,"ltr"===tB(Z2,this).direction,{target:tB(X2,this).div,x:e.x,y:e.y}),tB(X2,this).div.addEventListener("pointerup",()=>{tB(X2,this).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:tB(Z2,this)._signal}),e.preventDefault()}}function i3(e){return l3._.get(tB(Z2,e).getMode())}function s3(e){const t=eB(e3,this,i3);return t?new t.prototype.constructor(e):null}function a3(){const{x:e,y:t,width:n,height:r}=this.boundingClientRect,i=Math.max(0,e),s=Math.max(0,t),a=(i+Math.min(window.innerWidth,e+n))/2-e,o=(s+Math.min(window.innerHeight,t+r))/2-t,[l,c]=this.viewport.rotation%180===0?[a,o]:[o,a];return{offsetX:l,offsetY:c}}function o3(){for(const e of tB(V2,this).values())e.isEmpty()&&e.remove()}(0,ol.A)(t3,"_initialized",!1);var l3={_:new Map([sZ,K1,E2,M0,g2].map(e=>[e._editorType,e]))},c3=new WeakMap,d3=new WeakMap,u3=new WeakMap,h3=new WeakSet;class p3{constructor(e){let{pageIndex:t}=e;$F(this,h3),QF(this,c3,null),QF(this,d3,new Map),QF(this,u3,new Map),this.pageIndex=t}setParent(e){if(tB(c3,this)){if(tB(c3,this)!==e){if(tB(d3,this).size>0)for(const t of tB(d3,this).values())t.remove(),e.append(t);nB(c3,this,e)}}else nB(c3,this,e)}static get _svgFactory(){return uz(this,"_svgFactory",new i$)}draw(e){var t,n;let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=(y3._=(t=y3._,n=t++,t),n),a=ZF(h3,this,f3).call(this),o=p3._svgFactory.createElement("defs");a.append(o);const l=p3._svgFactory.createElement("path");o.append(l);const c="path_p".concat(this.pageIndex,"_").concat(s);l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),r&&tB(u3,this).set(s,l);const d=i?ZF(h3,this,g3).call(this,o,c):null,u=p3._svgFactory.createElement("use");return a.append(u),u.setAttribute("href","#".concat(c)),this.updateProperties(a,e),tB(d3,this).set(s,a),{id:s,clipPathId:"url(#".concat(d,")")}}drawOutline(e,t){var n,r;const i=(y3._=(n=y3._,r=n++,n),r),s=ZF(h3,this,f3).call(this),a=p3._svgFactory.createElement("defs");s.append(a);const o=p3._svgFactory.createElement("path");a.append(o);const l="path_p".concat(this.pageIndex,"_").concat(i);let c;if(o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t){const e=p3._svgFactory.createElement("mask");a.append(e),c="mask_p".concat(this.pageIndex,"_").concat(i),e.setAttribute("id",c),e.setAttribute("maskUnits","objectBoundingBox");const t=p3._svgFactory.createElement("rect");e.append(t),t.setAttribute("width","1"),t.setAttribute("height","1"),t.setAttribute("fill","white");const n=p3._svgFactory.createElement("use");e.append(n),n.setAttribute("href","#".concat(l)),n.setAttribute("stroke","none"),n.setAttribute("fill","black"),n.setAttribute("fill-rule","nonzero"),n.classList.add("mask")}const d=p3._svgFactory.createElement("use");s.append(d),d.setAttribute("href","#".concat(l)),c&&d.setAttribute("mask","url(#".concat(c,")"));const u=d.cloneNode();return s.append(u),d.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(s,e),tB(d3,this).set(i,s),i}finalizeDraw(e,t){tB(u3,this).delete(e),this.updateProperties(e,t)}updateProperties(e,t){if(!t)return;const{root:n,bbox:r,rootClass:i,path:s}=t,a="number"===typeof e?tB(d3,this).get(e):e;if(a){if(n&&ZF(h3,this,v3).call(this,a,n),r&&m3.call(p3,a,r),i){const{classList:e}=a;for(const[t,n]of Object.entries(i))e.toggle(t,n)}if(s){const e=a.firstChild.firstChild;ZF(h3,this,v3).call(this,e,s)}}}updateParent(e,t){if(t===this)return;const n=tB(d3,this).get(e);n&&(tB(c3,t).append(n),tB(d3,this).delete(e),tB(d3,t).set(e,n))}remove(e){tB(u3,this).delete(e),null!==tB(c3,this)&&(tB(d3,this).get(e).remove(),tB(d3,this).delete(e))}destroy(){nB(c3,this,null);for(const e of tB(d3,this).values())e.remove();tB(d3,this).clear(),tB(u3,this).clear()}}function m3(e,t){let[n,r,i,s]=t;const{style:a}=e;a.top="".concat(100*r,"%"),a.left="".concat(100*n,"%"),a.width="".concat(100*i,"%"),a.height="".concat(100*s,"%")}function f3(){const e=bB._svgFactory.create(1,1,!0);return tB(c3,this).append(e),e.setAttribute("aria-hidden",!0),e}function g3(e,t){const n=bB._svgFactory.createElement("clipPath");e.append(n);const r="clip_".concat(t);n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const i=bB._svgFactory.createElement("use");return n.append(i),i.setAttribute("href","#".concat(t)),i.classList.add("clip"),r}function v3(e,t){for(const[n,r]of Object.entries(t))null===r?e.removeAttribute(n):e.setAttribute(n,r)}bB=p3;var y3={_:0};globalThis._pdfjsTestingUtils={HighlightOutliner:n0},globalThis.pdfjsLib={AbortException:yz,AnnotationEditorLayer:t3,AnnotationEditorParamsType:IB,AnnotationEditorType:RB,AnnotationEditorUIManager:HU,AnnotationLayer:JQ,AnnotationMode:DB,AnnotationType:HB,applyOpacity:function(e,t,n,r){const i=255*(1-(r=Math.min(Math.max(null!==r&&void 0!==r?r:1,0),1)));return[e=Math.round(e*r+i),t=Math.round(t*r+i),n=Math.round(n*r+i)]},build:"f56dc8601",ColorPicker:WJ,createValidAbsoluteUrl:cz,CSSConstants:class{static get commentForegroundColor(){const e=document.createElement("span");e.classList.add("comment","sidebar");const{style:t}=e;t.width=t.height="0",t.display="none",t.color="var(--comment-fg-color)",document.body.append(e);const{color:n}=window.getComputedStyle(e);return e.remove(),uz(this,"commentForegroundColor",Kz(n))}},DOMSVGFactory:i$,DrawLayer:p3,FeatureTest:wz,fetchData:Iz,findContrastColor:function(e,t){const n=e[0]+256*e[1]+65536*e[2]+16777216*t[0]+4294967296*t[1]+1099511627776*t[2];let r=iW.get(n);if(r)return r;const i=new Float32Array(9),s=i.subarray(0,3),a=i.subarray(3,6);eW(e,a);const o=i.subarray(6,9);eW(t,o);const l=o[2]<.5,c=l?12:4.5;if(a[2]=l?Math.sqrt(a[2]):1-Math.sqrt(1-a[2]),rW(a,o,s)<c){let e,t;l?(e=a[2],t=1):(e=0,t=a[2]);const n=.005;for(;t-e>n;){const n=a[2]=(e+t)/2;l===rW(a,o,s)<c?e=n:t=n}a[2]=l?t:e}return tW(a,s),r=Nz.makeHexColor(Math.round(255*s[0]),Math.round(255*s[1]),Math.round(255*s[2])),iW.set(n,r),r},getDocument:VX,getFilenameFromUrl:function(e){return[e]=e.split(/[#?]/,1),e.substring(e.lastIndexOf("/")+1)},getPdfFilenameFromUrl:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"document.pdf";if("string"!==typeof e)return t;if(Bz(e))return az('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const n=(e=>{try{return new URL(e)}catch(t){try{return new URL(decodeURIComponent(e))}catch(n){try{return new URL(e,"https://foo.bar")}catch(r){try{return new URL(decodeURIComponent(e),"https://foo.bar")}catch(i){return null}}}}})(e);if(!n)return t;const r=e=>{try{let t=decodeURIComponent(e);return t.includes("/")?(t=t.split("/").at(-1),t.test(/^\.pdf$/i)?t:e):t}catch(t){return e}},i=/\.pdf$/i,s=n.pathname.split("/").at(-1);if(i.test(s))return r(s);if(n.searchParams.size>0){const e=Array.from(n.searchParams.values()).reverse();for(const n of e)if(i.test(n))return r(n);const t=Array.from(n.searchParams.keys()).reverse();for(const n of t)if(i.test(n))return r(n)}if(n.hash){const e=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i.exec(n.hash);if(e)return r(e[0])}return t},getRGB:Kz,getUuid:Cz,getXfaPageViewport:function(e,t){let{scale:n=1,rotation:r=0}=t;const{width:i,height:s}=e.attributes.style,a=[0,0,parseInt(i),parseInt(s)];return new Lz({viewBox:a,userUnit:1,scale:n,rotation:r})},GlobalWorkerOptions:xY,ImageKind:VB,InvalidPDFException:fz,isDataScheme:Bz,isPdfFile:zz,isValidExplicitDest:xq,MathClamp:Pz,noContextMenu:Vz,normalizeUnicode:function(e){return Sz||(Sz=/([\xA0\xB5\u037E\u0EB3\u2000-\u200A\u202F\u2126\uFB00-\uFB04\uFB06\uFB20-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBA1\uFBA4-\uFBA9\uFBAE-\uFBB1\uFBD3-\uFBDC\uFBDE-\uFBE7\uFBEA-\uFBF8\uFBFC\uFBFD\uFC00-\uFC5D\uFC64-\uFCF1\uFCF5-\uFD3D\uFD88\uFDF4\uFDFA\uFDFB\uFE71\uFE77\uFE79\uFE7B\uFE7D]+)|(\uFB05+)/g,_z=new Map([["\ufb05","\u017ft"]])),e.replaceAll(Sz,(e,t,n)=>t?t.normalize("NFKC"):_z.get(n))},OPS:$B,OutputScale:$z,PasswordResponses:{NEED_PASSWORD:1,INCORRECT_PASSWORD:2},PDFDataRangeTransport:$X,PDFDateString:qz,PDFWorker:lJ,PermissionFlag:{PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},PixelsPerInch:Rz,RenderingCancelledException:Fz,renderRichText:sW,ResponseException:gz,setLayerDimensions:Jz,shadow:uz,SignatureExtractor:J1,stopEvent:Hz,SupportedImageMimeTypes:Qz,TextLayer:PX,TouchManager:tH,updateUrlHash:dz,Util:Nz,VerbosityLevel:JB,version:"5.4.296",XfaLayer:Dz};var x3=Object.prototype.hasOwnProperty;function b3(e,t,n){for(n of e.keys())if(w3(n,t))return n}function w3(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&w3(e[r],t[r]););return-1===r}if(n===Set){if(e.size!==t.size)return!1;for(r of e){if((i=r)&&"object"===typeof i&&!(i=b3(t,i)))return!1;if(!t.has(i))return!1}return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e){if((i=r[0])&&"object"===typeof i&&!(i=b3(t,i)))return!1;if(!w3(r[1],t.get(i)))return!1}return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return-1===r}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return-1===r}if(!n||"object"===typeof e){for(n in r=0,e){if(x3.call(e,n)&&++r&&!x3.call(t,n))return!1;if(!(n in t)||!w3(e[n],t[n]))return!1}return Object.keys(t).length===r}}return e!==e&&t!==t}function j3(e){let t=!1;const n=new Promise((n,r)=>{e.then(e=>!t&&n(e)).catch(e=>!t&&r(e))});return{promise:n,cancel(){t=!0}}}const N3=["onCopy","onCut","onPaste","onCompositionEnd","onCompositionStart","onCompositionUpdate","onFocus","onBlur","onInput","onInvalid","onReset","onSubmit","onLoad","onError","onKeyDown","onKeyPress","onKeyUp","onAbort","onCanPlay","onCanPlayThrough","onDurationChange","onEmptied","onEncrypted","onEnded","onError","onLoadedData","onLoadedMetadata","onLoadStart","onPause","onPlay","onPlaying","onProgress","onRateChange","onSeeked","onSeeking","onStalled","onSuspend","onTimeUpdate","onVolumeChange","onWaiting","onClick","onContextMenu","onDoubleClick","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onDrag","onDragEnd","onDragEnter","onDragExit","onDragLeave","onDragOver","onDragStart","onDrop","onSelect","onTouchCancel","onTouchEnd","onTouchMove","onTouchStart","onPointerDown","onPointerMove","onPointerUp","onPointerCancel","onGotPointerCapture","onLostPointerCapture","onPointerEnter","onPointerLeave","onPointerOver","onPointerOut","onScroll","onWheel","onAnimationStart","onAnimationEnd","onAnimationIteration","onTransitionEnd","onChange","onToggle"];function k3(e,t){const n={};for(const r of N3){const i=e[r];i&&(n[r]=t?e=>i(e,t(r)):i)}return n}var A3="Invariant failed";function S3(e,t){if(!e)throw new Error(A3)}var _3=n(6440);const C3=(0,i.createContext)(null);class E3{constructor(){this.externalLinkEnabled=!0,this.externalLinkRel=void 0,this.externalLinkTarget=void 0,this.isInPresentationMode=!1,this.pdfDocument=void 0,this.pdfViewer=void 0}setDocument(e){this.pdfDocument=e}setViewer(e){this.pdfViewer=e}setExternalLinkRel(e){this.externalLinkRel=e}setExternalLinkTarget(e){this.externalLinkTarget=e}setHash(){}setHistory(){}get pagesCount(){return this.pdfDocument?this.pdfDocument.numPages:0}get page(){return S3(this.pdfViewer),this.pdfViewer.currentPageNumber||0}set page(e){S3(this.pdfViewer),this.pdfViewer.currentPageNumber=e}get rotation(){return 0}set rotation(e){}addLinkAttributes(e,t,n){e.href=t,e.rel=this.externalLinkRel||"noopener noreferrer nofollow",e.target=n?"_blank":this.externalLinkTarget||""}goToDestination(e){return new Promise(t=>{S3(this.pdfDocument),S3(e),"string"===typeof e?this.pdfDocument.getDestination(e).then(t):Array.isArray(e)?t(e):e.then(t)}).then(e=>{S3(Array.isArray(e),'"'.concat(e,'" is not a valid destination array.'));const t=e[0];new Promise(e=>{S3(this.pdfDocument),t instanceof Object?this.pdfDocument.getPageIndex(t).then(t=>{e(t)}).catch(()=>{S3(!1,'"'.concat(t,'" is not a valid page reference.'))}):"number"===typeof t?e(t):S3(!1,'"'.concat(t,'" is not a valid destination reference.'))}).then(t=>{const n=t+1;S3(this.pdfViewer),S3(n>=1&&n<=this.pagesCount,'"'.concat(n,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({dest:e,pageIndex:t,pageNumber:n})})})}goToPage(e){const t=e-1;S3(this.pdfViewer),S3(e>=1&&e<=this.pagesCount,'"'.concat(e,'" is not a valid page number.')),this.pdfViewer.scrollPageIntoView({pageIndex:t,pageNumber:e})}goToXY(){}cachePageRef(){}getDestinationHash(){return"#"}getAnchorUrl(){return"#"}executeNamedAction(){}executeSetOCGState(){}isPageVisible(){return!0}isPageCached(){return!0}navigateTo(e){this.goToDestination(e)}}function P3(e){let{children:t,type:n}=e;return(0,sn.jsx)("div",{className:"react-pdf__message react-pdf__message--".concat(n),children:t})}const T3={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};function M3(e,t){switch(t.type){case"RESOLVE":return{value:t.value,error:void 0};case"REJECT":return{value:!1,error:t.error};case"RESET":return{value:void 0,error:void 0};default:return e}}function D3(){return(0,i.useReducer)(M3,{value:void 0,error:void 0})}const O3="undefined"!==typeof window,R3=O3&&"file:"===window.location.protocol;function I3(e){return function(e){return"undefined"!==typeof e}(e)&&null!==e}function L3(e){return function(e){return"string"===typeof e}(e)&&/^data:/.test(e)}function F3(e){S3(L3(e));const[t="",n=""]=e.split(",");return-1!==t.split(";").indexOf("base64")?atob(n):unescape(n)}function B3(){return O3&&window.devicePixelRatio||1}const z3="On Chromium based browsers, you can use --allow-file-access-from-files flag for debugging purposes.";function W3(){_3(!R3,"Loading PDF as base64 strings/URLs may not work on protocols other than HTTP/HTTPS. ".concat(z3))}function U3(e){(null===e||void 0===e?void 0:e.cancel)&&e.cancel()}function V3(e,t){return Object.defineProperty(e,"width",{get(){return this.view[2]*t},configurable:!0}),Object.defineProperty(e,"height",{get(){return this.view[3]*t},configurable:!0}),Object.defineProperty(e,"originalWidth",{get(){return this.view[2]},configurable:!0}),Object.defineProperty(e,"originalHeight",{get(){return this.view[3]},configurable:!0}),e}const H3=["children","className","error","externalLinkRel","externalLinkTarget","file","inputRef","imageResourcesPath","loading","noData","onItemClick","onLoadError","onLoadProgress","onLoadSuccess","onPassword","onSourceError","onSourceSuccess","options","renderMode","rotate","scale"],q3=["url"],{Tm:G3}=t,K3=(e,t)=>{switch(t){case T3.NEED_PASSWORD:e(prompt("Enter the password to open this PDF file."));break;case T3.INCORRECT_PASSWORD:e(prompt("Invalid password. Please try again."));break}};function Y3(e){return"object"===typeof e&&null!==e&&("data"in e||"range"in e||"url"in e)}const X3=(0,i.forwardRef)(function(e,t){let{children:n,className:r,error:s="Failed to load PDF file.",externalLinkRel:a,externalLinkTarget:o,file:l,inputRef:c,imageResourcesPath:d,loading:u="Loading PDF\u2026",noData:h="No PDF file specified.",onItemClick:p,onLoadError:m,onLoadProgress:f,onLoadSuccess:g,onPassword:v=K3,onSourceError:y,onSourceSuccess:x,options:b,renderMode:w,rotate:j,scale:N}=e,k=ws(e,H3);const[A,S]=D3(),{value:_,error:C}=A,[E,P]=D3(),{value:T,error:M}=E,D=(0,i.useRef)(new E3),O=(0,i.useRef)([]),R=(0,i.useRef)(void 0),I=(0,i.useRef)(void 0);l&&l!==R.current&&Y3(l)&&(_3(!w3(l,R.current),'File prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "file" prop.'),R.current=l),b&&b!==I.current&&(_3(!w3(b,I.current),'Options prop passed to <Document /> changed, but it\'s equal to previous one. This might result in unnecessary reloads. Consider memoizing the value passed to "options" prop.'),I.current=b);const L=(0,i.useRef)({scrollPageIntoView:e=>{const{dest:t,pageNumber:n,pageIndex:r=n-1}=e;if(p)return void p({dest:t,pageIndex:r,pageNumber:n});const i=O.current[r];i?i.scrollIntoView():_3(!1,"An internal link leading to page ".concat(n," was clicked, but neither <Document> was provided with onItemClick nor it was able to find the page within itself. Either provide onItemClick to <Document> and handle navigating by yourself or ensure that all pages are rendered within <Document>."))}});(0,i.useImperativeHandle)(t,()=>({linkService:D,pages:O,viewer:L}),[]),(0,i.useEffect)(function(){S({type:"RESET"})},[l,S]);const F=(0,i.useCallback)(async()=>{if(!l)return null;if("string"===typeof l){if(L3(l)){return{data:F3(l)}}return W3(),{url:l}}if(l instanceof G3)return{range:l};if(l instanceof ArrayBuffer)return{data:l};if(O3&&function(e){return S3(O3),e instanceof Blob}(l)){const e=await function(e){return new Promise((t,n)=>{const r=new FileReader;r.onload=()=>{if(!r.result)return n(new Error("Error while reading a file."));t(r.result)},r.onerror=e=>{if(!e.target)return n(new Error("Error while reading a file."));const{error:t}=e.target;if(!t)return n(new Error("Error while reading a file."));switch(t.code){case t.NOT_FOUND_ERR:return n(new Error("Error while reading a file: File not found."));case t.SECURITY_ERR:return n(new Error("Error while reading a file: Security error."));case t.ABORT_ERR:return n(new Error("Error while reading a file: Aborted."));default:return n(new Error("Error while reading a file."))}},r.readAsArrayBuffer(e)})}(l);return{data:e}}if(S3("object"===typeof l),S3(Y3(l)),"url"in l&&"string"===typeof l.url){if(L3(l.url)){const{url:e}=l,t=ws(l,q3),n=F3(e);return(0,Ne.A)({data:n},t)}W3()}return l},[l]);(0,i.useEffect)(()=>{const e=j3(F());return e.promise.then(e=>{S({type:"RESOLVE",value:e})}).catch(e=>{S({type:"REJECT",error:e})}),()=>{U3(e)}},[F,S]),(0,i.useEffect)(()=>{"undefined"!==typeof _&&(!1!==_?x&&x():C&&(_3(!1,C.toString()),y&&y(C)))},[_]),(0,i.useEffect)(function(){P({type:"RESET"})},[P,_]),(0,i.useEffect)(function(){if(!_)return;const e=VX(b?(0,Ne.A)((0,Ne.A)({},_),b):_);f&&(e.onProgress=f),v&&(e.onPassword=v);const t=e,n=t.promise.then(e=>{P({type:"RESOLVE",value:e})}).catch(e=>{t.destroyed||P({type:"REJECT",error:e})});return()=>{n.finally(()=>t.destroy())}},[b,P,_]),(0,i.useEffect)(()=>{"undefined"!==typeof T&&(!1!==T?T&&(g&&g(T),O.current=new Array(T.numPages),D.current.setDocument(T)):M&&(_3(!1,M.toString()),m&&m(M)))},[T]),(0,i.useEffect)(function(){D.current.setViewer(L.current),D.current.setExternalLinkRel(a),D.current.setExternalLinkTarget(o)},[a,o]);const B=(0,i.useCallback)((e,t)=>{O.current[e]=t},[]),z=(0,i.useCallback)(e=>{delete O.current[e]},[]),W=(0,i.useMemo)(()=>({imageResourcesPath:d,linkService:D.current,onItemClick:p,pdf:T,registerPage:B,renderMode:w,rotate:j,scale:N,unregisterPage:z}),[d,p,T,B,w,j,N,z]),U=(0,i.useMemo)(()=>k3(k,()=>T),[k,T]);return(0,sn.jsx)("div",(0,Ne.A)((0,Ne.A)({className:Bo("react-pdf__Document",r),ref:c},U),{},{children:l?void 0===T||null===T?(0,sn.jsx)(P3,{type:"loading",children:"function"===typeof u?u():u}):!1===T?(0,sn.jsx)(P3,{type:"error",children:"function"===typeof s?s():s}):function(){if(e=W,!Boolean(null===e||void 0===e?void 0:e.pdf))throw new Error("pdf is undefined");var e;const t="function"===typeof n?n(W):n;return(0,sn.jsx)(C3.Provider,{value:W,children:t})}():(0,sn.jsx)(P3,{type:"no-data",children:"function"===typeof h?h():h})}))}),J3=X3;function $3(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e.filter(Boolean);return n.length<=1?n[0]||null:function(e){for(var t=0,r=n;t<r.length;t++){var i=r[t];"function"===typeof i?i(e):i&&(i.current=e)}}}function Q3(){return(0,i.useContext)(C3)}const Z3=(0,i.createContext)(null);function e4(){return(0,i.useContext)(Z3)}function t4(){const e=Q3(),t=e4();S3(t);const n=(0,Ne.A)((0,Ne.A)({},e),t),{imageResourcesPath:r,linkService:s,onGetAnnotationsError:a,onGetAnnotationsSuccess:o,onRenderAnnotationLayerError:l,onRenderAnnotationLayerSuccess:c,page:d,pdf:u,renderForms:h,rotate:p,scale:m=1}=n;S3(u),S3(d),S3(s);const[f,g]=D3(),{value:v,error:y}=f,x=(0,i.useRef)(null);_3(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-annotation-layer"),10),"AnnotationLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-annotations"),(0,i.useEffect)(function(){g({type:"RESET"})},[g,d]),(0,i.useEffect)(function(){if(!d)return;const e=j3(d.getAnnotations()),t=e;return e.promise.then(e=>{g({type:"RESOLVE",value:e})}).catch(e=>{g({type:"REJECT",error:e})}),()=>{U3(t)}},[g,d]),(0,i.useEffect)(()=>{void 0!==v&&(!1!==v?v&&o&&o(v):y&&(_3(!1,y.toString()),a&&a(y)))},[v]);const b=(0,i.useMemo)(()=>d.getViewport({scale:m,rotation:p}),[d,p,m]);return(0,i.useEffect)(function(){if(!u||!d||!s||!v)return;const{current:e}=x;if(!e)return;const t=b.clone({dontFlip:!0}),n={accessibilityManager:null,annotationCanvasMap:null,annotationEditorUIManager:null,annotationStorage:u.annotationStorage,commentManager:null,div:e,l10n:null,linkService:s,page:d,structTreeLayer:null,viewport:t},i={annotations:v,annotationStorage:u.annotationStorage,div:e,imageResourcesPath:r,linkService:s,page:d,renderForms:h,viewport:t};e.innerHTML="";try{new JQ(n).render(i),c&&c()}catch(a){!function(e){_3(!1,"".concat(e)),l&&l(e)}(a)}return()=>{}},[v,r,s,d,u,h,b]),(0,sn.jsx)("div",{className:Bo("react-pdf__Page__annotations","annotationLayer"),ref:x})}const n4={Document:null,DocumentFragment:null,Part:"group",Sect:"group",Div:"group",Aside:"note",NonStruct:"none",P:null,H:"heading",Title:null,FENote:"note",Sub:"group",Lbl:null,Span:null,Em:null,Strong:null,Link:"link",Annot:"note",Form:"form",Ruby:null,RB:null,RT:null,RP:null,Warichu:null,WT:null,WP:null,L:"list",LI:"listitem",LBody:null,Table:"table",TR:"row",TH:"columnheader",TD:"cell",THead:"columnheader",TBody:null,TFoot:null,Caption:null,Figure:"figure",Formula:null,Artifact:null},r4=/^H(\d+)$/;function i4(e){return"children"in e}function s4(e){return!!i4(e)&&(1===e.children.length&&0 in e.children&&"id"in e.children[0])}function a4(e){const t={};if(i4(e)){const{role:n}=e,r=n.match(r4);if(r)t.role="heading",t["aria-level"]=Number(r[1]);else if(function(e){return e in n4}(n)){const e=n4[n];e&&(t.role=e)}}return t}function o4(e){const t={};if(i4(e)){if(void 0!==e.alt&&(t["aria-label"]=e.alt),void 0!==e.lang&&(t.lang=e.lang),s4(e)){const[n]=e.children;if(n){const e=o4(n);return(0,Ne.A)((0,Ne.A)({},t),e)}}}else"id"in e&&(t["aria-owns"]=e.id);return t}function l4(e){return e?(0,Ne.A)((0,Ne.A)({},a4(e)),o4(e)):null}function c4(e){let{className:t,node:n}=e;const r=(0,i.useMemo)(()=>l4(n),[n]),s=(0,i.useMemo)(()=>i4(n)?s4(n)?null:n.children.map((e,t)=>(0,sn.jsx)(c4,{node:e},t)):null,[n]);return(0,sn.jsx)("span",(0,Ne.A)((0,Ne.A)({className:t},r),{},{children:s}))}function d4(){const e=e4();S3(e);const{onGetStructTreeError:t,onGetStructTreeSuccess:n}=e,[r,s]=D3(),{value:a,error:o}=r,{customTextRenderer:l,page:c}=e;return(0,i.useEffect)(function(){s({type:"RESET"})},[s,c]),(0,i.useEffect)(function(){if(l)return;if(!c)return;const e=j3(c.getStructTree()),t=e;return e.promise.then(e=>{s({type:"RESOLVE",value:e})}).catch(e=>{s({type:"REJECT",error:e})}),()=>U3(t)},[l,c,s]),(0,i.useEffect)(()=>{void 0!==a&&(!1!==a?a&&n&&n(a):o&&(_3(!1,o.toString()),t&&t(o)))},[a]),a?(0,sn.jsx)(c4,{className:"react-pdf__Page__structTree structTree",node:a}):null}const u4=DB;function h4(e){const t=e4();S3(t);const n=(0,Ne.A)((0,Ne.A)({},t),e),{_className:r,canvasBackground:s,devicePixelRatio:a=B3(),onRenderError:o,onRenderSuccess:l,page:c,renderForms:d,renderTextLayer:u,rotate:h,scale:p}=n,{canvasRef:m}=e;S3(c);const f=(0,i.useRef)(null);function g(e){(function(e){return"RenderingCancelledException"===e.name})(e)||(_3(!1,e.toString()),o&&o(e))}const v=(0,i.useMemo)(()=>c.getViewport({scale:p*a,rotation:h}),[a,c,h,p]),y=(0,i.useMemo)(()=>c.getViewport({scale:p,rotation:h}),[c,h,p]);(0,i.useEffect)(function(){if(!c)return;c.cleanup();const{current:e}=f;if(!e)return;e.width=v.width,e.height=v.height,e.style.width="".concat(Math.floor(y.width),"px"),e.style.height="".concat(Math.floor(y.height),"px"),e.style.visibility="hidden";const t={annotationMode:d?u4.ENABLE_FORMS:u4.ENABLE,canvas:e,canvasContext:e.getContext("2d",{alpha:!1}),viewport:v};s&&(t.background=s);const n=c.render(t),r=n;return n.promise.then(()=>{e.style.visibility="",c&&l&&l(V3(c,p))}).catch(g),()=>U3(r)},[s,c,d,v,y]);const x=(0,i.useCallback)(()=>{const{current:e}=f;e&&(e.width=0,e.height=0)},[]);return(0,i.useEffect)(()=>x,[x]),(0,sn.jsx)("canvas",{className:"".concat(r,"__canvas"),dir:"ltr",ref:$3(m,f),style:{display:"block",userSelect:"none"},children:u?(0,sn.jsx)(d4,{}):null})}function p4(){const e=e4();S3(e);const{customTextRenderer:t,onGetTextError:n,onGetTextSuccess:r,onRenderTextLayerError:s,onRenderTextLayerSuccess:a,page:o,pageIndex:l,pageNumber:c,rotate:d,scale:u}=e;S3(o);const[h,p]=D3(),{value:m,error:f}=h,g=(0,i.useRef)(null);_3(1===Number.parseInt(window.getComputedStyle(document.body).getPropertyValue("--react-pdf-text-layer"),10),"TextLayer styles not found. Read more: https://github.com/wojtekmaj/react-pdf#support-for-text-layer"),(0,i.useEffect)(function(){p({type:"RESET"})},[o,p]),(0,i.useEffect)(function(){if(!o)return;const e=j3(o.getTextContent()),t=e;return e.promise.then(e=>{p({type:"RESOLVE",value:e})}).catch(e=>{p({type:"REJECT",error:e})}),()=>U3(t)},[o,p]),(0,i.useEffect)(()=>{void 0!==m&&(!1!==m?m&&r&&r(m):f&&(_3(!1,f.toString()),n&&n(f)))},[m]);const v=(0,i.useCallback)(()=>{a&&a()},[a]),y=(0,i.useCallback)(e=>{_3(!1,e.toString()),s&&s(e)},[s]);const x=(0,i.useMemo)(()=>o.getViewport({scale:u,rotation:d}),[o,d,u]);return(0,i.useLayoutEffect)(function(){if(!o||!m)return;const{current:e}=g;if(!e)return;e.innerHTML="";const n=o.streamTextContent({includeMarkedContent:!0}),r=new PX({container:e,textContentSource:n,viewport:x}),i=r;return r.render().then(()=>{const n=document.createElement("div");n.className="endOfContent",e.append(n);const r=e.querySelectorAll('[role="presentation"]');if(t){let e=0;m.items.forEach((n,i)=>{if(!function(e){return"str"in e}(n))return;const s=r[e];if(!s)return;const a=t((0,Ne.A)({pageIndex:l,pageNumber:c,itemIndex:i},n));s.innerHTML=a,e+=n.str&&n.hasEOL?2:1})}v()}).catch(y),()=>U3(i)},[t,y,v,o,l,c,m,x]),(0,sn.jsx)("div",{className:Bo("react-pdf__Page__textContent","textLayer"),onMouseUp:function(){const e=g.current;e&&e.classList.remove("selecting")},onMouseDown:function(){const e=g.current;e&&e.classList.add("selecting")},ref:g})}const m4=["_className","_enableRegisterUnregisterPage","canvasBackground","canvasRef","children","className","customRenderer","customTextRenderer","devicePixelRatio","error","height","inputRef","loading","noData","onGetAnnotationsError","onGetAnnotationsSuccess","onGetStructTreeError","onGetStructTreeSuccess","onGetTextError","onGetTextSuccess","onLoadError","onLoadSuccess","onRenderAnnotationLayerError","onRenderAnnotationLayerSuccess","onRenderError","onRenderSuccess","onRenderTextLayerError","onRenderTextLayerSuccess","pageIndex","pageNumber","pdf","registerPage","renderAnnotationLayer","renderForms","renderMode","renderTextLayer","rotate","scale","unregisterPage","width"],f4=1;function g4(e){const t=Q3(),n=(0,Ne.A)((0,Ne.A)({},t),e),{_className:r="react-pdf__Page",_enableRegisterUnregisterPage:s=!0,canvasBackground:a,canvasRef:o,children:l,className:c,customRenderer:d,customTextRenderer:u,devicePixelRatio:h,error:p="Failed to load the page.",height:m,inputRef:f,loading:g="Loading page\u2026",noData:v="No page specified.",onGetAnnotationsError:y,onGetAnnotationsSuccess:x,onGetStructTreeError:b,onGetStructTreeSuccess:w,onGetTextError:j,onGetTextSuccess:N,onLoadError:k,onLoadSuccess:A,onRenderAnnotationLayerError:S,onRenderAnnotationLayerSuccess:_,onRenderError:C,onRenderSuccess:E,onRenderTextLayerError:P,onRenderTextLayerSuccess:T,pageIndex:M,pageNumber:D,pdf:O,registerPage:R,renderAnnotationLayer:I=!0,renderForms:L=!1,renderMode:F="canvas",renderTextLayer:B=!0,rotate:z,scale:W=f4,unregisterPage:U,width:V}=n,H=ws(n,m4),[q,G]=D3(),{value:K,error:Y}=q,X=(0,i.useRef)(null);S3(O);const J=I3(D)?D-1:null!==M&&void 0!==M?M:null,$=null!==D&&void 0!==D?D:I3(M)?M+1:null,Q=null!==z&&void 0!==z?z:K?K.rotate:null,Z=(0,i.useMemo)(()=>{if(!K)return null;let e=1;const t=null!==W&&void 0!==W?W:f4;if(V||m){const t=K.getViewport({scale:1,rotation:Q});V?e=V/t.width:m&&(e=m/t.height)}return t*e},[m,K,Q,W,V]);(0,i.useEffect)(function(){return()=>{I3(J)&&s&&U&&U(J)}},[s,O,J,U]),(0,i.useEffect)(function(){G({type:"RESET"})},[G,O,J]),(0,i.useEffect)(function(){if(!O||!$)return;const e=j3(O.getPage($)),t=e;return e.promise.then(e=>{G({type:"RESOLVE",value:e})}).catch(e=>{G({type:"REJECT",error:e})}),()=>U3(t)},[G,O,$]),(0,i.useEffect)(()=>{void 0!==K&&(!1!==K?function(){if(A){if(!K||!Z)return;A(V3(K,Z))}if(s&&R){if(!I3(J)||!X.current)return;R(J,X.current)}}():Y&&(_3(!1,Y.toString()),k&&k(Y)))},[K,Z]);const ee=(0,i.useMemo)(()=>I3(J)&&$&&I3(Q)&&I3(Z)?{_className:r,canvasBackground:a,customTextRenderer:u,devicePixelRatio:h,onGetAnnotationsError:y,onGetAnnotationsSuccess:x,onGetStructTreeError:b,onGetStructTreeSuccess:w,onGetTextError:j,onGetTextSuccess:N,onRenderAnnotationLayerError:S,onRenderAnnotationLayerSuccess:_,onRenderError:C,onRenderSuccess:E,onRenderTextLayerError:P,onRenderTextLayerSuccess:T,page:K,pageIndex:J,pageNumber:$,renderForms:L,renderTextLayer:B,rotate:Q,scale:Z}:null,[r,a,u,h,y,x,b,w,j,N,S,_,C,E,P,T,K,J,$,L,B,Q,Z]),te=(0,i.useMemo)(()=>k3(H,()=>K?Z?V3(K,Z):void 0:K),[H,K,Z]),ne="".concat(J,"@").concat(Z,"/").concat(Q);function re(){switch(F){case"custom":return S3(d),(0,sn.jsx)(d,{},"".concat(ne,"_custom"));case"none":return null;default:return(0,sn.jsx)(h4,{canvasRef:o},"".concat(ne,"_canvas"))}}return(0,sn.jsx)("div",(0,Ne.A)((0,Ne.A)({className:Bo(r,c),"data-page-number":$,ref:$3(f,X),style:{"--scale-round-x":"1px","--scale-round-y":"1px","--scale-factor":"1","--user-unit":"".concat(Z),"--total-scale-factor":"calc(var(--scale-factor) * var(--user-unit))",backgroundColor:a||"white",position:"relative",minWidth:"min-content",minHeight:"min-content"}},te),{},{children:$?null===O||void 0===K||null===K?(0,sn.jsx)(P3,{type:"loading",children:"function"===typeof g?g():g}):!1===O||!1===K?(0,sn.jsx)(P3,{type:"error",children:"function"===typeof p?p():p}):function(){if(e=ee,!Boolean(null===e||void 0===e?void 0:e.page))throw new Error("page is undefined");var e;const t="function"===typeof l?l(ee):l;return(0,sn.jsxs)(Z3.Provider,{value:ee,children:[re(),B?(0,sn.jsx)(p4,{},"".concat(ne,"_text")):null,I?(0,sn.jsx)(t4,{},"".concat(ne,"_annotations")):null,t]})}():(0,sn.jsx)(P3,{type:"no-data",children:"function"===typeof v?v():v})}))}xY.workerSrc="/pdf.worker.min.js";const v4=e=>{var t,n;let{invoice:r,onClose:s}=e;const[a,o]=(0,i.useState)(null),[l,c]=(0,i.useState)(!0),[d,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(null),[m,f]=(0,i.useState)(1),[g,v]=(0,i.useState)(1),[y,x]=(0,i.useState)(!1),[b,w]=(0,i.useState)(!1);(0,i.useEffect)(()=>(r&&(async()=>{try{c(!0),u(null),j(r);const e=await fetch("/api/invoices/".concat(r.id,"/pdf"),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}});if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));const t=await e.blob(),n=URL.createObjectURL(t);o(n)}catch(d){console.error("PDF generation failed:",d),u(d.message),Ao.error("PDF generation failed: "+d.message)}finally{c(!1)}})(),()=>{a&&URL.revokeObjectURL(a)}),[r]);const j=e=>({formData:{id:e.id,invoiceNumber:e.invoiceNumber,issueDate:e.issueDate,dueDate:e.dueDate,clientId:e.clientId,notes:e.notes,currency:e.currency,invoiceMode:e.invoiceMode,items:e.InvoiceItems||[],subtotal:e.subtotal,taxAmount:e.taxAmount,total:e.total,tvaExempt:e.tvaExempt,tvaExemptClause:e.tvaExemptClause,autoLiquidation:e.autoLiquidation,deliveryAddress:e.deliveryAddress,deliveryCity:e.deliveryCity,deliveryPostalCode:e.deliveryPostalCode,deliveryCountry:e.deliveryCountry,deliveryDate:e.deliveryDate,paymentTerms:e.paymentTerms,paymentDays:e.paymentDays},client:e.Client,user:e.User});return l?(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sn.jsx)("div",{className:"bg-white p-8 rounded-lg",children:(0,sn.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,sn.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"}),(0,sn.jsx)("span",{children:"Generating PDF..."})]})})}):d?(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sn.jsxs)("div",{className:"bg-white p-8 rounded-lg max-w-md",children:[(0,sn.jsx)("h3",{className:"text-lg font-semibold text-red-600 mb-4",children:"Error"}),(0,sn.jsx)("p",{className:"text-gray-700 mb-4",children:d}),(0,sn.jsx)("button",{onClick:s,className:"w-full bg-gray-500 text-white px-4 py-2 rounded hover:bg-gray-600",children:"Close"})]})}):(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 ".concat(y?"p-0":"p-4"),children:(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl ".concat(y?"w-full h-full":"w-full max-w-6xl h-5/6"," flex flex-col"),children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between p-4 border-b bg-gray-50",children:[(0,sn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sn.jsxs)("h3",{className:"text-lg font-semibold",children:["Invoice ",r.invoiceNumber]}),(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsx)("button",{onClick:()=>{v(e=>Math.max(e-.2,.5))},className:"p-1 text-gray-600 hover:text-gray-800",title:"Zoom out",children:(0,sn.jsx)(us,{size:16})}),(0,sn.jsx)("select",{value:g,onChange:e=>v(parseFloat(e.target.value)),className:"text-sm border rounded px-2 py-1",children:[.5,.75,1,1.25,1.5,2].map(e=>(0,sn.jsxs)("option",{value:e,children:[Math.round(100*e),"%"]},e))}),(0,sn.jsx)("button",{onClick:()=>{v(e=>Math.min(e+.2,3))},className:"p-1 text-gray-600 hover:text-gray-800",title:"Zoom in",children:(0,sn.jsx)(ds,{size:16})})]}),h>1&&(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsx)("button",{onClick:()=>f(e=>Math.max(e-1,1)),disabled:m<=1,className:"px-2 py-1 text-sm bg-gray-200 rounded disabled:opacity-50",children:"Previous"}),(0,sn.jsxs)("span",{className:"text-sm",children:["Page ",m," of ",h]}),(0,sn.jsx)("button",{onClick:()=>f(e=>Math.min(e+1,h)),disabled:m>=h,className:"px-2 py-1 text-sm bg-gray-200 rounded disabled:opacity-50",children:"Next"})]})]}),(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsxs)("button",{onClick:()=>{if(a){const e=document.createElement("a");e.href=a,e.download="invoice-".concat(r.invoiceNumber,".pdf"),document.body.appendChild(e),e.click(),document.body.removeChild(e),Ao.success("PDF downloaded successfully")}},className:"flex items-center space-x-1 px-3 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",title:"Download PDF",children:[(0,sn.jsx)(vi,{size:16}),(0,sn.jsx)("span",{children:"Download"})]}),(0,sn.jsxs)("button",{onClick:async()=>{var e;if(null!==(e=r.Client)&&void 0!==e&&e.email)try{w(!0);const e=await fetch("/api/ai/send-invoice-email",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({invoiceId:r.id,recipientEmail:r.Client.email,type:"invoice",attachPDF:!0,useUserConfig:!0})});if(!e.ok)throw new Error("HTTP error! status: ".concat(e.status));await e.json();Ao.success("Email sent successfully")}catch(d){console.error("Error sending email:",d),Ao.error("Error sending email: "+d.message)}finally{w(!1)}else Ao.error("No email address found for this client")},disabled:b||!(null!==(t=r.Client)&&void 0!==t&&t.email),className:"flex items-center space-x-1 px-3 py-2 bg-green-600 text-white rounded hover:bg-green-700 disabled:opacity-50",title:null!==(n=r.Client)&&void 0!==n&&n.email?"Send to ".concat(r.Client.email):"No email address",children:[(0,sn.jsx)(Ri,{size:16}),(0,sn.jsx)("span",{children:b?"Sending...":"Email"})]}),(0,sn.jsxs)("button",{onClick:()=>{if(a){const e=document.createElement("iframe");e.style.display="none",e.src=a,document.body.appendChild(e),e.onload=()=>{e.contentWindow.print(),setTimeout(()=>{document.body.removeChild(e)},1e3)},Ao.success("Printing started")}},className:"flex items-center space-x-1 px-3 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",title:"Print",children:[(0,sn.jsx)(Gi,{size:16}),(0,sn.jsx)("span",{children:"Print"})]}),(0,sn.jsx)("button",{onClick:()=>{x(!y)},className:"p-2 text-gray-600 hover:text-gray-800",title:y?"Exit fullscreen":"Fullscreen",children:y?(0,sn.jsx)(Bi,{size:16}):(0,sn.jsx)(Li,{size:16})}),(0,sn.jsx)("button",{onClick:s,className:"p-2 text-gray-600 hover:text-gray-800",title:"Close",children:(0,sn.jsx)(ls,{size:20})})]})]}),(0,sn.jsx)("div",{className:"flex-1 overflow-auto bg-gray-100 p-4",children:(0,sn.jsx)("div",{className:"flex justify-center",children:a&&(0,sn.jsx)(J3,{file:a,onLoadSuccess:e=>{let{numPages:t}=e;p(t)},loading:(0,sn.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,sn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})}),error:(0,sn.jsx)("div",{className:"text-red-600 p-8 text-center",children:"Error loading PDF"}),children:(0,sn.jsx)(g4,{pageNumber:m,scale:g,loading:(0,sn.jsx)("div",{className:"flex items-center justify-center p-8",children:(0,sn.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})})})})})})]})})},y4=()=>{const{t:e}=nn(),{user:t}=mn(),[n,r]=qr(),[s,a]=(0,i.useState)([]),[o,l]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null),[u,h]=(0,i.useState)(""),[p,m]=(0,i.useState)(n.get("status")||"all"),[f,g]=(0,i.useState)(1),[v,y]=(0,i.useState)(1),[x,b]=(0,i.useState)(0),[w,j]=(0,i.useState)(!1),[N,k]=(0,i.useState)(null),[A,S]=(0,i.useState)(null),[_,C]=(0,i.useState)("grid");console.log("=== Invoices Component Debug ==="),console.log("User:",t),console.log("Loading:",o),console.log("Error:",c),console.log("Invoices array:",s),console.log("Invoices count:",s.length),console.log("Total count:",x);const E=(0,i.useCallback)(async e=>{try{console.log("Export invoice:",e),S(e)}catch(c){console.error("Export failed:",c)}},[]),P=(0,i.useCallback)(async e=>{try{console.log("Delete invoice:",e)}catch(c){console.error("Delete failed:",c)}},[]),T=(0,i.useCallback)(async(e,t)=>{try{console.log("Status change:",e,t)}catch(c){console.error("Status change failed:",c)}},[]),M=(0,i.useCallback)(async()=>{if(t)try{var e,n;l(!0),d(null),console.log("Fetching invoices...");const t={page:f,limit:6,search:u,status:"all"!==p?p:void 0},r=await zt.default.get("/invoices",{params:t});console.log("Fetch response:",r.data);const i=r.data.data||r.data;a(i.invoices||[]),y((null===(e=i.pagination)||void 0===e?void 0:e.totalPages)||1),b((null===(n=i.pagination)||void 0===n?void 0:n.totalItems)||0)}catch(r){console.error("Fetch error:",r),d(r.message||"Failed to fetch invoices")}finally{l(!1)}else console.log("No user, skipping fetch")},[t,f,u,p]);(0,i.useEffect)(()=>{const e=n.get("status");e&&e!==p&&m(e)},[n]),(0,i.useEffect)(()=>{console.log("useEffect triggered, user:",t),t&&M()},[t,f,u,p]),(0,i.useEffect)(()=>{const e=setTimeout(()=>{""!==u&&(g(1),M())},500);return()=>clearTimeout(e)},[u]);const D=(0,i.useMemo)(()=>(console.log("Computing displayInvoices, invoices:",s),s),[s]);return o?(0,sn.jsx)("div",{className:"flex justify-center items-center h-64",children:(0,sn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):c?(0,sn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,sn.jsx)("div",{className:"flex",children:(0,sn.jsxs)("div",{className:"ml-3",children:[(0,sn.jsx)("h3",{className:"text-sm font-medium text-red-800",children:e("common:error")}),(0,sn.jsx)("div",{className:"mt-2 text-sm text-red-700",children:(0,sn.jsx)("p",{children:c})})]})})}):(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,sn.jsx)("div",{children:(0,sn.jsxs)("h1",{className:"text-2xl font-bold text-gray-900",children:[e("invoices:title"),x>0&&(0,sn.jsxs)("span",{className:"ml-2 text-lg font-normal text-gray-500",children:["(",x," ",e(1===x?"invoices:invoice":"invoices:invoices"),")"]})]})}),(0,sn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sn.jsx)("button",{onClick:async()=>{try{var e,t;console.log("Testing API call...");const n=await zt.default.get("/invoices");console.log("API test success:",n.data),console.log("Invoices data:",null===(e=n.data.data)||void 0===e?void 0:e.invoices),console.log("Pagination:",null===(t=n.data.data)||void 0===t?void 0:t.pagination)}catch(c){console.error("API test failed:",c)}},className:"btn btn-secondary text-sm",children:"Test API Call"}),(0,sn.jsxs)(Ur,{to:"/".concat(e("routes:invoices"),"/").concat(e("routes:new")),className:"btn btn-primary inline-flex items-center",children:[(0,sn.jsx)(qi,{className:"mr-2 h-4 w-4"}),e("invoices:createInvoice")]})]})]}),(0,sn.jsx)("div",{className:"bg-white shadow rounded-lg mb-6 p-4",children:(0,sn.jsxs)("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[(0,sn.jsxs)("div",{className:"relative flex-1",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(Xi,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",{type:"text",placeholder:e("invoices:searchPlaceholder"),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-blue-500 focus:border-blue-500",value:u,onChange:e=>h(e.target.value)})]}),(0,sn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sn.jsxs)("select",{value:p,onChange:e=>m(e.target.value),className:"block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-blue-500 focus:border-blue-500 rounded-md",children:[(0,sn.jsx)("option",{value:"all",children:e("invoices:allStatuses")}),(0,sn.jsx)("option",{value:"draft",children:e("invoices:draft")}),(0,sn.jsx)("option",{value:"pending",children:e("invoices:pending")}),(0,sn.jsx)("option",{value:"paid",children:e("invoices:paid")}),(0,sn.jsx)("option",{value:"overdue",children:e("invoices:overdue")}),(0,sn.jsx)("option",{value:"cancelled",children:e("invoices:cancelled")})]}),(0,sn.jsxs)("div",{className:"flex rounded-md shadow-sm",children:[(0,sn.jsx)("button",{onClick:()=>C("grid"),className:"px-3 py-2 text-sm font-medium rounded-l-md border ".concat("grid"===_?"bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:(0,sn.jsx)(Ai,{className:"h-4 w-4"})}),(0,sn.jsx)("button",{onClick:()=>C("list"),className:"px-3 py-2 text-sm font-medium rounded-r-md border-t border-r border-b ".concat("list"===_?"bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:(0,sn.jsx)(Ti,{className:"h-4 w-4"})})]})]})]})}),0===D.length?(0,sn.jsxs)("div",{className:"text-center py-12",children:[(0,sn.jsx)("div",{className:"mx-auto h-12 w-12 text-gray-400",children:(0,sn.jsx)(Ti,{className:"h-12 w-12"})}),(0,sn.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:e("invoices:noInvoices")}),(0,sn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:e("invoices:noInvoicesDescription")}),(0,sn.jsx)("div",{className:"mt-6",children:(0,sn.jsxs)(Ur,{to:"/".concat(e("routes:invoices"),"/").concat(e("routes:new")),className:"btn btn-primary inline-flex items-center",children:[(0,sn.jsx)(qi,{className:"mr-2 h-4 w-4"}),e("invoices:createInvoice")]})})]}):(0,sn.jsxs)(sn.Fragment,{children:["grid"===_?(0,sn.jsx)(GF,{invoices:D,loading:!1,onDelete:P,onExport:E,onStatusChange:T,formatters:{formatDate:e=>new Date(e).toLocaleDateString(),formatCurrency:e=>"\u20ac".concat(e)}}):(0,sn.jsx)(KF,{invoices:D,onDelete:P,onExport:E,formatters:{formatDate:e=>new Date(e).toLocaleDateString(),formatCurrency:e=>"\u20ac".concat(e)}}),v>1&&(0,sn.jsxs)("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6 mt-6",children:[(0,sn.jsxs)("div",{className:"flex-1 flex justify-between sm:hidden",children:[(0,sn.jsx)("button",{onClick:()=>g(e=>Math.max(e-1,1)),disabled:1===f,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e("common:previous")}),(0,sn.jsx)("button",{onClick:()=>g(e=>Math.min(e+1,v)),disabled:f===v,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e("common:next")})]}),(0,sn.jsxs)("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[(0,sn.jsx)("div",{children:(0,sn.jsxs)("p",{className:"text-sm text-gray-700",children:[e("common:showing")," ",(0,sn.jsx)("span",{className:"font-medium",children:6*(f-1)+1})," ",e("common:to")," ",(0,sn.jsx)("span",{className:"font-medium",children:Math.min(6*f,x)})," ",e("common:of")," ",(0,sn.jsx)("span",{className:"font-medium",children:x})," ",e("common:results")]})}),(0,sn.jsx)("div",{children:(0,sn.jsxs)("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[(0,sn.jsx)("button",{onClick:()=>g(e=>Math.max(e-1,1)),disabled:1===f,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,sn.jsx)(ui,{className:"h-5 w-5"})}),Array.from({length:Math.min(5,v)},(e,t)=>{let n;return n=v<=5||f<=3?t+1:f>=v-2?v-4+t:f-2+t,(0,sn.jsx)("button",{onClick:()=>g(n),className:"relative inline-flex items-center px-4 py-2 border text-sm font-medium ".concat(f===n?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"),children:n},"page-btn-".concat(t,"-").concat(n))}),(0,sn.jsx)("button",{onClick:()=>g(e=>Math.min(e+1,v)),disabled:f===v,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:(0,sn.jsx)(hi,{className:"h-5 w-5"})})]})})]})]})]}),(0,sn.jsx)(YF,{isOpen:w,onClose:()=>{j(!1),k(null)},onConfirm:async()=>{if(N)try{await zt.default.patch("/invoices/".concat(N.id),{status:"paid"}),j(!1),k(null),M()}catch(c){console.error("Error marking invoice as paid:",c)}},invoice:N}),A&&(0,sn.jsx)(v4,{invoice:A,onClose:()=>S(null)})]})},x4=e=>{let{clients:t,onEdit:n,onDelete:r}=e;const{t:i}=nn(["clients","common"]);return t&&0!==t.length?(0,sn.jsx)("div",{className:"space-y-4",children:t.map(e=>(0,sn.jsxs)("div",{className:"mobile-card",children:[(0,sn.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sn.jsxs)("div",{className:"flex-1",children:[(0,sn.jsx)("h3",{className:"font-semibold text-gray-900 text-lg",children:e.name}),e.company&&(0,sn.jsx)("p",{className:"text-gray-600 text-sm mt-1",children:e.company})]}),(0,sn.jsxs)("div",{className:"flex space-x-2",children:[(0,sn.jsx)("button",{onClick:()=>n(e),className:"mobile-action-btn bg-blue-50 text-blue-600 hover:bg-blue-100","aria-label":i("common:edit"),children:(0,sn.jsx)(yi,{className:"w-4 h-4"})}),(0,sn.jsx)("button",{onClick:()=>r(e.id),className:"mobile-action-btn bg-red-50 text-red-600 hover:bg-red-100","aria-label":i("common:delete"),children:(0,sn.jsx)(ns,{className:"w-4 h-4"})})]})]}),(0,sn.jsxs)("div",{className:"space-y-2",children:[e.email&&(0,sn.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,sn.jsx)(Ri,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,sn.jsx)("a",{href:"mailto:".concat(e.email),className:"text-blue-600 hover:text-blue-800 transition-colors",children:e.email})]}),e.phone&&(0,sn.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,sn.jsx)(Ui,{className:"w-4 h-4 mr-2 text-gray-400"}),(0,sn.jsx)("a",{href:"tel:".concat(e.phone),className:"text-blue-600 hover:text-blue-800 transition-colors",children:e.phone})]}),e.address&&(0,sn.jsxs)("div",{className:"flex items-start text-sm text-gray-600",children:[(0,sn.jsx)(Ii,{className:"w-4 h-4 mr-2 mt-0.5 text-gray-400 flex-shrink-0"}),(0,sn.jsx)("span",{className:"break-words",children:e.address})]})]}),(e.taxNumber||e.registrationNumber)&&(0,sn.jsx)("div",{className:"mt-3 pt-3 border-t border-gray-100",children:(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-2 text-xs text-gray-500",children:[e.taxNumber&&(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("span",{className:"font-medium",children:[i("clients:taxNumber"),":"]})," ",e.taxNumber]}),e.registrationNumber&&(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("span",{className:"font-medium",children:[i("clients:registrationNumber"),":"]})," ",e.registrationNumber]})]})})]},e.id))}):(0,sn.jsx)("div",{className:"text-center py-8",children:(0,sn.jsx)("p",{className:"text-gray-500",children:i("clients:noClients")})})},b4=()=>{const{api:e}=mn(),{t:t}=nn(["common","clients","routes"]),{clients:n,createClient:r,updateClient:s,deleteClient:a,userProfile:o,loadClients:l,loading:c,error:d,clearError:u}=jn(),[h,p]=(0,i.useState)(null),[m,f]=(0,i.useState)(null),[g,v]=(0,i.useState)(!1),[y,x]=(0,i.useState)(!1),[b,w]=(0,i.useState)(!1),[j,N]=(0,i.useState)(null),[k,A]=(0,i.useState)(""),[S,_]=(0,i.useState)({name:"",email:"",company:"",phone:"",address:"",city:"",postalCode:"",country:"France",vatNumber:"",siren:"",siret:"",deliveryAddress:"",deliveryCity:"",deliveryPostalCode:"",deliveryCountry:"France",sameAsAddress:!0});(0,i.useEffect)(()=>{l()},[l]),(0,i.useEffect)(()=>{let e;return h&&(e=setTimeout(()=>{p(null)},3e3)),()=>{e&&clearTimeout(e)}},[h]),(0,i.useEffect)(()=>{let e;return d&&(e=setTimeout(()=>{u()},5e3)),()=>{e&&clearTimeout(e)}},[d,u]);const C=e=>{const{name:t,value:n,type:r,checked:i}=e.target;if("sameAsAddress"===t)_(e=>(0,Ne.A)((0,Ne.A)({},e),{},{sameAsAddress:i,deliveryAddress:i?e.address:e.deliveryAddress,deliveryCity:i?e.city:e.deliveryCity,deliveryPostalCode:i?e.postalCode:e.deliveryPostalCode,deliveryCountry:i?e.country:e.deliveryCountry}));else{const e="checkbox"===r?i:n;_(n=>{const r=(0,Ne.A)((0,Ne.A)({},n),{},{[t]:e});if(n.sameAsAddress&&["address","city","postalCode","country"].includes(t)){const n={address:"deliveryAddress",city:"deliveryCity",postalCode:"deliveryPostalCode",country:"deliveryCountry"}[t];n&&(r[n]=e)}return r})}},E=async e=>{e.preventDefault();try{await r(S),p(t("clients:successfullyAdded")),v(!1),_({name:"",email:"",company:"",phone:"",address:"",city:"",postalCode:"",country:"France",vatNumber:"",siren:"",siret:"",deliveryAddress:"",deliveryCity:"",deliveryPostalCode:"",deliveryCountry:"France",sameAsAddress:!0})}catch(n){console.error("Add client error:",n)}},P=e=>{N((0,Ne.A)({},e)),x(!0)},T=e=>{N(e),w(!0)},M=e=>{const{name:t,value:n,type:r,checked:i}=e.target;if("sameAsAddress"===t)N(e=>(0,Ne.A)((0,Ne.A)({},e),{},{sameAsAddress:i,deliveryAddress:i?e.address:e.deliveryAddress,deliveryCity:i?e.city:e.deliveryCity,deliveryPostalCode:i?e.postalCode:e.deliveryPostalCode,deliveryCountry:i?e.country:e.deliveryCountry}));else{const e="checkbox"===r?i:n;N(n=>{const r=(0,Ne.A)((0,Ne.A)({},n),{},{[t]:e});if(n.sameAsAddress&&["address","city","postalCode","country"].includes(t)){const n={address:"deliveryAddress",city:"deliveryCity",postalCode:"deliveryPostalCode",country:"deliveryCountry"}[t];n&&(r[n]=e)}return r})}},D=n.filter(e=>{if(!e)return!1;if(!k)return!0;const t=k.toLowerCase();return e.name&&e.name.toLowerCase().includes(t)||e.email&&e.email.toLowerCase().includes(t)||e.company&&e.company.toLowerCase().includes(t)||e.phone&&e.phone.includes(k)||e.address&&e.address.toLowerCase().includes(t)});return(0,sn.jsxs)("div",{className:"space-y-6 pt-6",children:[(0,sn.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:t("clients:title")}),(0,sn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t("clients:subtitle")})]}),(0,sn.jsx)("div",{className:"mt-4 sm:mt-0",children:(0,sn.jsxs)("button",{onClick:()=>v(!0),className:"inline-flex items-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,sn.jsx)(qi,{className:"mr-2 h-4 w-4"}),t("clients:addClient")]})})]}),(0,sn.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,sn.jsx)("div",{className:"p-6",children:(0,sn.jsxs)("div",{className:"relative",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(Xi,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",{type:"text",placeholder:t("clients:searchPlaceholder"),value:k,onChange:e=>A(e.target.value),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-1 focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]})})}),h&&(0,sn.jsx)("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:(0,sn.jsxs)("div",{className:"flex",children:[(0,sn.jsx)("div",{className:"flex-shrink-0",children:(0,sn.jsx)("svg",{className:"h-5 w-5 text-green-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,sn.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),(0,sn.jsx)("div",{className:"ml-3",children:(0,sn.jsx)("p",{className:"text-sm font-medium text-green-800",children:h})})]})}),d&&(0,sn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:(0,sn.jsxs)("div",{className:"flex",children:[(0,sn.jsx)("div",{className:"flex-shrink-0",children:(0,sn.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,sn.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,sn.jsx)("div",{className:"ml-3",children:(0,sn.jsx)("p",{className:"text-sm font-medium text-red-800",children:d})})]})}),c?(0,sn.jsx)("div",{className:"bg-white shadow rounded-lg",children:(0,sn.jsx)("div",{className:"p-6",children:(0,sn.jsxs)("div",{className:"flex items-center justify-center",children:[(0,sn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-primary-600"}),(0,sn.jsx)("span",{className:"ml-2 text-gray-600",children:t("common:loading")})]})})}):(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("div",{className:"hidden md:block bg-white shadow overflow-hidden sm:rounded-md",children:(0,sn.jsx)("ul",{className:"divide-y divide-gray-200",children:0===D.length?(0,sn.jsx)("li",{className:"px-6 py-4",children:(0,sn.jsxs)("div",{className:"text-center",children:[(0,sn.jsx)(as,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,sn.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:t(k?"clients:noSearchResults":"clients:noClients")}),(0,sn.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:t(k?"clients:tryDifferentSearch":"clients:getStarted")}),!k&&(0,sn.jsx)("div",{className:"mt-6",children:(0,sn.jsxs)("button",{onClick:()=>v(!0),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,sn.jsx)(qi,{className:"mr-2 h-4 w-4"}),t("clients:addFirstClient")]})})]})},"no-clients"):D.map(e=>(0,sn.jsx)("li",{children:(0,sn.jsx)("div",{className:"px-6 py-4 hover:bg-gray-50",children:(0,sn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"flex-shrink-0",children:(0,sn.jsx)("div",{className:"h-10 w-10 rounded-full bg-primary-100 flex items-center justify-center",children:(0,sn.jsx)(as,{className:"h-5 w-5 text-primary-600"})})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.company&&(0,sn.jsxs)("div",{className:"ml-2 text-sm text-gray-500",children:["(",e.company,")"]})]}),(0,sn.jsxs)("div",{className:"flex items-center mt-1 space-x-4",children:[e.email&&(0,sn.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,sn.jsx)(Ri,{className:"mr-1 h-4 w-4"}),e.email]}),e.phone&&(0,sn.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,sn.jsx)(Ui,{className:"mr-1 h-4 w-4"}),e.phone]}),e.address&&(0,sn.jsxs)("div",{className:"flex items-center text-sm text-gray-500",children:[(0,sn.jsx)(Ii,{className:"mr-1 h-4 w-4"}),e.address]})]})]})]}),(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsx)("button",{onClick:()=>P(e),className:"text-primary-600 hover:text-primary-900",children:(0,sn.jsx)(yi,{className:"h-4 w-4"})}),(0,sn.jsx)("button",{onClick:()=>T(e),className:"text-red-600 hover:text-red-900",children:(0,sn.jsx)(ns,{className:"h-4 w-4"})})]})]})})},e.id))})}),(0,sn.jsx)("div",{className:"md:hidden",children:(0,sn.jsx)(x4,{clients:D,onEdit:P,onDelete:T,searchTerm:k,onAddClient:()=>v(!0)})})]}),g&&(0,sn.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,sn.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,sn.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,sn.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:()=>v(!1)})}),(0,sn.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,sn.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,sn.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:t("clients:addClient")}),(0,sn.jsx)("button",{type:"button",onClick:()=>v(!1),className:"text-gray-400 hover:text-gray-600",children:(0,sn.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sn.jsxs)("form",{onSubmit:E,className:"space-y-4",children:[(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[t("clients:name")," *"]}),(0,sn.jsx)("input",{type:"text",name:"name",required:!0,value:S.name,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u90ae\u7bb1\u5730\u5740"}),(0,sn.jsxs)("div",{className:"mt-1 relative",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(Ri,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",{type:"email",name:"email",value:S.email,onChange:C,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"client@example.com"})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:company")}),(0,sn.jsx)("input",{type:"text",name:"company",value:S.company,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:phone")}),(0,sn.jsx)("input",{type:"tel",name:"phone",value:S.phone,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:vatNumber")}),(0,sn.jsx)("input",{type:"text",name:"vatNumber",value:S.vatNumber,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"FR12345678901"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:siren")}),(0,sn.jsx)("input",{type:"text",name:"siren",value:S.siren,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123456789",maxLength:"9"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:siret")}),(0,sn.jsx)("input",{type:"text",name:"siret",value:S.siret,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"12345678901234",maxLength:"14"})]})]}),(0,sn.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"\u8d26\u5355\u5730\u5740"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:address")}),(0,sn.jsx)("input",{type:"text",name:"address",value:S.address,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3 mt-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:city")}),(0,sn.jsx)("input",{type:"text",name:"city",value:S.city,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:postalCode")}),(0,sn.jsx)("input",{type:"text",name:"postalCode",value:S.postalCode,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:country")}),(0,sn.jsx)("input",{type:"text",name:"country",value:S.country,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,sn.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"\u4ea4\u4ed8\u5730\u5740"}),(0,sn.jsxs)("label",{className:"flex items-center",children:[(0,sn.jsx)("input",{type:"checkbox",name:"sameAsAddress",checked:S.sameAsAddress,onChange:C,className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,sn.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"\u4e0e\u8d26\u5355\u5730\u5740\u76f8\u540c"})]})]}),!S.sameAsAddress&&(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u4ea4\u4ed8\u5730\u5740"}),(0,sn.jsx)("input",{type:"text",name:"deliveryAddress",value:S.deliveryAddress,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3 mt-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u4ea4\u4ed8\u57ce\u5e02"}),(0,sn.jsx)("input",{type:"text",name:"deliveryCity",value:S.deliveryCity,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u4ea4\u4ed8\u90ae\u653f\u7f16\u7801"}),(0,sn.jsx)("input",{type:"text",name:"deliveryPostalCode",value:S.deliveryPostalCode,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u4ea4\u4ed8\u56fd\u5bb6"}),(0,sn.jsx)("input",{type:"text",name:"deliveryCountry",value:S.deliveryCountry,onChange:C,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]})]})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,sn.jsx)("button",{type:"button",onClick:E,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm",children:"\u521b\u5efa\u5ba2\u6237"}),(0,sn.jsx)("button",{type:"button",onClick:()=>v(!1),className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"\u53d6\u6d88"})]})]})]})}),y&&j&&(0,sn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,sn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,sn.jsxs)("div",{className:"mt-3",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:t("clients:editClient")}),(0,sn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{await s(j.id,j),p(t("clients:successfullyUpdated")),x(!1)}catch(n){console.error("Update client error:",n)}},className:"space-y-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[t("clients:name")," *"]}),(0,sn.jsx)("input",{type:"text",name:"name",required:!0,value:j.name,onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:company")}),(0,sn.jsx)("input",{type:"text",name:"company",value:j.company||"",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u90ae\u7bb1\u5730\u5740"}),(0,sn.jsxs)("div",{className:"mt-1 relative",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(Ri,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",{type:"email",name:"email",value:j.email||"",onChange:M,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:"client@example.com"})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:phone")}),(0,sn.jsx)("input",{type:"tel",name:"phone",value:j.phone||"",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:address")}),(0,sn.jsx)("input",{type:"text",name:"address",value:j.address||"",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:city")}),(0,sn.jsx)("input",{type:"text",name:"city",value:j.city||"",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:postalCode")}),(0,sn.jsx)("input",{type:"text",name:"postalCode",value:j.postalCode||"",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:country")}),(0,sn.jsxs)("select",{name:"country",value:j.country||"France",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",children:[(0,sn.jsx)("option",{value:"France",children:"France"}),(0,sn.jsx)("option",{value:"Germany",children:"Germany"}),(0,sn.jsx)("option",{value:"Spain",children:"Spain"}),(0,sn.jsx)("option",{value:"Italy",children:"Italy"}),(0,sn.jsx)("option",{value:"United Kingdom",children:"United Kingdom"}),(0,sn.jsx)("option",{value:"United States",children:"United States"}),(0,sn.jsx)("option",{value:"Canada",children:"Canada"})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:vatNumber")}),(0,sn.jsx)("input",{type:"text",name:"vatNumber",value:j.vatNumber||"",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:siren")}),(0,sn.jsx)("input",{type:"text",name:"siren",value:j.siren||"",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:t("clients:siret")}),(0,sn.jsx)("input",{type:"text",name:"siret",value:j.siret||"",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]})]}),(0,sn.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"\u4ea4\u4ed8\u5730\u5740"}),(0,sn.jsxs)("label",{className:"flex items-center",children:[(0,sn.jsx)("input",{type:"checkbox",name:"sameAsAddress",checked:j.sameAsAddress||!1,onChange:M,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,sn.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"\u4e0e\u8d26\u5355\u5730\u5740\u76f8\u540c"})]})]}),!j.sameAsAddress&&(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u4ea4\u4ed8\u5730\u5740"}),(0,sn.jsx)("input",{type:"text",name:"deliveryAddress",value:j.deliveryAddress||"",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u4ea4\u4ed8\u57ce\u5e02"}),(0,sn.jsx)("input",{type:"text",name:"deliveryCity",value:j.deliveryCity||"",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u4ea4\u4ed8\u90ae\u653f\u7f16\u7801"}),(0,sn.jsx)("input",{type:"text",name:"deliveryPostalCode",value:j.deliveryPostalCode||"",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm"})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\u4ea4\u4ed8\u56fd\u5bb6"}),(0,sn.jsxs)("select",{name:"deliveryCountry",value:j.deliveryCountry||"France",onChange:M,className:"mt-1 block w-full border border-gray-300 rounded-md shadow-sm py-2 px-3 focus:outline-none focus:ring-primary-500 focus:border-primary-500 sm:text-sm",children:[(0,sn.jsx)("option",{value:"France",children:"France"}),(0,sn.jsx)("option",{value:"Germany",children:"Germany"}),(0,sn.jsx)("option",{value:"Spain",children:"Spain"}),(0,sn.jsx)("option",{value:"Italy",children:"Italy"}),(0,sn.jsx)("option",{value:"United Kingdom",children:"United Kingdom"}),(0,sn.jsx)("option",{value:"United States",children:"United States"}),(0,sn.jsx)("option",{value:"Canada",children:"Canada"})]})]})]})]}),(0,sn.jsxs)("div",{className:"flex justify-end space-x-3 pt-4",children:[(0,sn.jsx)("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:t("common:cancel")}),(0,sn.jsx)("button",{type:"submit",className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:t("clients:updateClient")})]})]})]})})}),b&&j&&(0,sn.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,sn.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-96 shadow-lg rounded-md bg-white",children:(0,sn.jsxs)("div",{className:"mt-3 text-center",children:[(0,sn.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",children:(0,sn.jsx)(ns,{className:"h-6 w-6 text-red-600"})}),(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mt-4",children:t("clients:deleteClient")}),(0,sn.jsx)("div",{className:"mt-2 px-7 py-3",children:(0,sn.jsx)("p",{className:"text-sm text-gray-500",children:t("clients:deleteConfirmation",{name:j.name})})}),(0,sn.jsxs)("div",{className:"flex justify-center space-x-3 pt-4",children:[(0,sn.jsx)("button",{onClick:()=>w(!1),className:"px-4 py-2 border border-gray-300 rounded-md text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:t("common:cancel")}),(0,sn.jsx)("button",{onClick:async()=>{try{await a(j.id),p(t("clients:successfullyDeleted")),w(!1),N(null)}catch(e){console.error("Delete client error:",e)}},className:"px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:t("clients:delete")})]})]})})})]})};const w4=new class{async getNotifications(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await zt.default.get("/notifications",{params:e})).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to get notifications")}}async sendInvoiceEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return(await zt.default.post("/notifications/send-invoice/".concat(e),t)).data}catch(i){var n,r;throw new Error((null===(n=i.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to send invoice email")}}async sendPaymentReminder(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gentle";try{return(await zt.default.post("/notifications/payment-reminder/".concat(e),{reminderType:t})).data}catch(i){var n,r;throw new Error((null===(n=i.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to send payment reminder")}}async sendBulkPaymentReminders(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"gentle";try{return(await zt.default.post("/notifications/bulk-payment-reminders",{invoiceIds:e,reminderType:t})).data}catch(i){var n,r;throw new Error((null===(n=i.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to batch send payment reminders")}}async markAsRead(e){try{return(await zt.default.put("/notifications/mark-read",{notificationIds:Array.isArray(e)?e:[e]})).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to mark notifications as read")}}async getEmailHistory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await zt.default.get("/notifications/email-history",{params:e})).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to get email history")}}async testEmailConfiguration(e){try{return(await zt.default.post("/notifications/test-email",{email:e})).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"Failed to test email configuration")}}async getNotificationStats(){try{return(await zt.default.get("/notifications/stats")).data}catch(n){var e,t;throw new Error((null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||"Failed to get notification statistics")}}async sendReportEmail(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{return(await zt.default.post("/notifications/send-report",(0,Ne.A)({reportType:e},t))).data}catch(i){var n,r;throw new Error((null===(n=i.response)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.message)||"Failed to send report email")}}},j4=()=>{const{t:e}=nn(["settings","common"]),t=fr.language||"en",n=Object.entries(Pr),r=async e=>{try{await(t=e,Pr[t]?fr.changeLanguage(t):(console.warn("Language ".concat(t," is not supported. Falling back to English.")),fr.changeLanguage("en"))),localStorage.setItem("preferredLanguage",e)}catch(n){console.error("Failed to change language:",n)}var t};return(0,sn.jsxs)("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-200 dark:border-gray-700 p-6",children:[(0,sn.jsxs)("div",{className:"flex items-center mb-4",children:[(0,sn.jsx)(ki,{className:"h-5 w-5 text-blue-600 dark:text-blue-400 mr-2"}),(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 dark:text-white",children:e("settings:language")})]}),(0,sn.jsxs)("div",{className:"space-y-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:e("settings:selectLanguage")}),(0,sn.jsxs)("div",{className:"relative",children:[(0,sn.jsx)("select",{value:t,onChange:e=>r(e.target.value),className:"block w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded-md shadow-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 appearance-none",children:n.map(e=>{let[t,n]=e;return(0,sn.jsxs)("option",{value:t,children:[n.flag," ",n.name]},t)})}),(0,sn.jsx)(di,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]})]}),(0,sn.jsxs)("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[(0,sn.jsx)("p",{children:e("settings:languageDescription")}),(0,sn.jsx)("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-900/20 rounded-md border border-blue-200 dark:border-blue-800",children:(0,sn.jsxs)("p",{className:"text-blue-700 dark:text-blue-300 text-xs",children:[(0,sn.jsxs)("strong",{children:[e("settings:comingSoon"),":"]})," ",e("settings:moreLanguagesComingSoon")]})})]})]})]})},N4=()=>{const{user:e,updateProfile:t}=mn(),n=Q(),r=ee(),{userProfile:s,updateUserProfile:a,loading:o}=jn(),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(null),[m,f]=(0,i.useState)("profile"),[g,v]=(0,i.useState)({}),[y,x]=(0,i.useState)({firstName:"",lastName:"",email:"",companyName:"",phone:"",address:"",currency:"EUR",timezone:"Europe/Paris",vatNumber:"",sirenNumber:"",siretNumber:"",legalForm:"",registeredCapital:"",rcsNumber:"",nafCode:"",bankIBAN:"",bankBIC:"",bankName:"",accountHolder:""}),[b,w]=(0,i.useState)({currentPassword:"",newPassword:"",confirmPassword:""}),[j,N]=(0,i.useState)({current:!1,new:!1,confirm:!1}),k=(e,t)=>{x((0,Ne.A)((0,Ne.A)({},y),{},{[e]:t}));const n=((e,t)=>{const n={};switch(e){case"vatNumber":t&&!/^FR[0-9]{11}$/.test(t)&&(n.vatNumber="VAT number format: FR + 11 digits (e.g., FR12345678901)");break;case"sirenNumber":t&&!/^[0-9]{9}$/.test(t)&&(n.sirenNumber="SIREN must be 9 digits");break;case"siretNumber":t&&!/^[0-9]{14}$/.test(t)&&(n.siretNumber="SIRET must be 14 digits");break;case"rcsNumber":t&&!/^RCS\s+[A-Z]+\s+[0-9\s]+$/.test(t)&&(n.rcsNumber="RCS format: RCS + city + number (e.g., RCS PARIS 123 456 789)");break;case"nafCode":t&&!/^[0-9]{4}[A-Z]$/.test(t)&&(n.nafCode="NAF code format: 4 digits + 1 letter (e.g., 6201Z)");break;case"bankIBAN":t&&!/^FR[0-9]{2}\s?[0-9]{4}\s?[0-9]{4}\s?[0-9]{4}\s?[0-9]{4}\s?[0-9]{4}\s?[0-9]{3}$/.test(t.replace(/\s/g,""))&&(n.bankIBAN="IBAN format: FR + 2 digits + 23 digits (e.g., FR76 1234 5678 9012 3456 7890 123)");break;case"bankBIC":t&&!/^[A-Z]{6}[A-Z0-9]{2}([A-Z0-9]{3})?$/.test(t)&&(n.bankBIC="BIC format: 6 letters + 2 letters or digits + optional 3 letters or digits (e.g., BNPAFRPPXXX)")}return n})(e,t);v(t=>(0,Ne.A)((0,Ne.A)({},t),{},{[e]:n[e]||null})),h&&p(null)};(0,i.useEffect)(()=>{s?x({firstName:s.firstName||"",lastName:s.lastName||"",email:s.email||"",companyName:s.companyName||"",phone:s.phone||"",address:s.address||"",currency:s.currency||"EUR",timezone:s.timezone||"Europe/Paris",vatNumber:s.vatNumber||"",sirenNumber:s.siren||s.sirenNumber||"",siretNumber:s.siretNumber||"",legalForm:s.legalForm||"",registeredCapital:s.registeredCapital||"",rcsNumber:s.rcsNumber||"",nafCode:s.nafCode||"",bankIBAN:s.bankIBAN||"",bankBIC:s.bankBIC||"",bankName:s.bankName||"",accountHolder:s.accountHolder||""}):A()},[s]),(0,i.useEffect)(()=>{const e=new URLSearchParams(n.search).get("tab");e&&f(e)},[n.search]);const A=async()=>{try{c(!0);const e=await xn.getProfile();x({firstName:e.firstName||"",lastName:e.lastName||"",email:e.email||"",companyName:e.companyName||"",phone:e.phone||"",address:e.address||"",currency:e.currency||"EUR",timezone:e.timezone||"Europe/Paris",vatNumber:e.vatNumber||"",sirenNumber:e.siren||"",siretNumber:e.siretNumber||"",legalForm:e.legalForm||"",registeredCapital:e.registeredCapital||"",rcsNumber:e.rcsNumber||"",nafCode:e.nafCode||"",bankIBAN:e.bankIBAN||"",bankBIC:e.bankBIC||"",bankName:e.bankName||"",accountHolder:e.accountHolder||""});try{const e=await xn.getEmailConfig();e&&(C(t=>(0,Ne.A)((0,Ne.A)({},t),{},{email:e.email||t.email,provider:e.provider||t.provider,smtpHost:e.smtpHost||t.smtpHost,smtpPort:"number"===typeof e.smtpPort?e.smtpPort:t.smtpPort,smtpSecure:"boolean"===typeof e.smtpSecure?e.smtpSecure:t.smtpSecure,isActive:"boolean"===typeof e.isActive?e.isActive:t.isActive})),e.isVerified&&M({ok:!0,message:"User SMTP verified"}))}catch(Ae){console.warn("\u52a0\u8f7d\u90ae\u4ef6\u914d\u7f6e\u5931\u8d25:",Ae.message)}}catch(e){u("Failed to load settings: "+e.message)}finally{c(!1)}},S=async e=>{e.preventDefault();try{c(!0),u(null),await a(y),p("Profile updated successfully"),t&&t(y)}catch(n){u("Failed to update profile: "+n.message)}finally{c(!1)}},[_,C]=(0,i.useState)({email:(null===e||void 0===e?void 0:e.email)||"",provider:"custom",smtpHost:"",smtpPort:465,smtpSecure:!0,password:"",isActive:!0}),[E,P]=(0,i.useState)((null===e||void 0===e?void 0:e.email)||""),[T,M]=(0,i.useState)(null),[D,O]=(0,i.useState)(null),R={163:{smtpHost:"smtp.163.com",smtpPort:465,smtpSecure:!0},qq:{smtpHost:"smtp.qq.com",smtpPort:465,smtpSecure:!0},gmail:{smtpHost:"smtp.gmail.com",smtpPort:465,smtpSecure:!0},outlook:{smtpHost:"smtp.office365.com",smtpPort:587,smtpSecure:!1},custom:{smtpHost:"",smtpPort:465,smtpSecure:!0}},I=async e=>{if(null===e||void 0===e||e.preventDefault(),O(null),_.email)if(_.smtpHost)if(_.password)try{const e=await xn.saveEmailConfig(_);O({type:"success",text:"\u90ae\u4ef6\u914d\u7f6e\u5df2\u4fdd\u5b58"}),null!==e&&void 0!==e&&e.isVerified&&M({ok:!0,message:"User SMTP verified"})}catch(t){O({type:"error",text:t.message||"\u4fdd\u5b58\u5931\u8d25"})}else O({type:"error",text:"\u8bf7\u8f93\u5165\u90ae\u7bb1\u6388\u6743\u7801\u6216\u5bc6\u7801"});else O({type:"error",text:"\u8bf7\u8f93\u5165SMTP\u670d\u52a1\u5668\u5730\u5740"});else O({type:"error",text:"\u8bf7\u8f93\u5165\u53d1\u4ef6\u90ae\u7bb1\u5730\u5740"})},L=async()=>{O(null);try{const e=await w4.testEmailConfiguration(E),t=(null===e||void 0===e?void 0:e.success)||"ok"===(null===e||void 0===e?void 0:e.status);O({type:t?"success":"error",text:t?"Test email sent. Please check your inbox.":(null===e||void 0===e?void 0:e.message)||"Test send failed."})}catch(n){var e,t;O({type:"error",text:(null===n||void 0===n||null===(e=n.response)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.message)||n.message||"Test send failed."})}},F=async()=>{M(null);try{const e=await xn.verifyEmailConfig(_);M({ok:!(null===e||void 0===e||!e.ok),message:null===e||void 0===e?void 0:e.message})}catch(e){M({ok:!1,message:(null===e||void 0===e?void 0:e.message)||"\u9a8c\u8bc1\u5931\u8d25"})}},B=async e=>{if(e.preventDefault(),b.newPassword===b.confirmPassword)if(b.newPassword.length<6)u("New password must be at least 6 characters long");else try{c(!0),u(null),await xn.changePassword({currentPassword:b.currentPassword,newPassword:b.newPassword}),p("Password changed successfully"),w({currentPassword:"",newPassword:"",confirmPassword:""})}catch(t){u("Failed to change password: "+t.message)}finally{c(!1)}else u("New password and confirm password do not match")},z=[{id:"profile",name:"Profile",icon:as},{id:"password",name:"Password",icon:Di},{id:"language",name:"Language Settings",icon:ki},{id:"email",name:"Email Settings",icon:Ri}];return(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,sn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,sn.jsxs)("div",{className:"mb-8",children:[(0,sn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Settings"}),(0,sn.jsx)("p",{className:"mt-2 text-gray-600",children:"Manage your account settings and preferences"})]}),d&&(0,sn.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:d}),h&&(0,sn.jsx)("div",{className:"mb-6 bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md",children:h}),(0,sn.jsxs)("div",{className:"flex flex-col lg:flex-row gap-8",children:[(0,sn.jsx)("div",{className:"lg:w-64",children:(0,sn.jsx)("nav",{className:"bg-white rounded-lg shadow p-4",children:(0,sn.jsx)("ul",{className:"space-y-2",children:z.map(e=>{const t=e.icon;return(0,sn.jsx)("li",{children:(0,sn.jsxs)("button",{onClick:()=>{f(e.id),u(null),p(null);const t=new URLSearchParams(n.search);t.set("tab",e.id),r({pathname:"/settings",search:"?".concat(t.toString())},{replace:!0})},className:"w-full flex items-center gap-3 px-3 py-2 text-left rounded-md transition-colors ".concat(m===e.id?"bg-blue-50 text-blue-700 border-r-2 border-blue-700":"text-gray-700 hover:bg-gray-50"),children:[(0,sn.jsx)(t,{className:"w-4 h-4"}),e.name]})},e.id)})})})}),(0,sn.jsx)("div",{className:"flex-1",children:(()=>{switch(m){case"profile":return(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-6",children:"Profile Settings"}),(0,sn.jsxs)("form",{onSubmit:S,className:"space-y-8",children:[(0,sn.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,sn.jsxs)("h4",{className:"text-md font-medium text-gray-800 mb-4 flex items-center",children:[(0,sn.jsx)(as,{className:"w-4 h-4 mr-2"}),"Personal Information"]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,sn.jsx)("input",{type:"text",value:y.firstName,onChange:e=>k("firstName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,sn.jsx)("input",{type:"text",value:y.lastName,onChange:e=>k("lastName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]})]}),(0,sn.jsxs)("div",{className:"mt-4",children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,sn.jsx)("input",{type:"email",value:y.email,onChange:e=>k("email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mt-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,sn.jsx)("input",{type:"tel",value:y.phone,onChange:e=>k("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Time Zone"}),(0,sn.jsx)("select",{value:y.timezone,onChange:e=>k("timezone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[{value:"Europe/Paris",label:"Europe/Paris (UTC+1/+2)"},{value:"Europe/London",label:"Europe/London (UTC+0/+1)"},{value:"America/New_York",label:"America/New_York (UTC-5/-4)"},{value:"America/Los_Angeles",label:"America/Los_Angeles (UTC-8/-7)"},{value:"America/Chicago",label:"America/Chicago (UTC-6/-5)"},{value:"Asia/Shanghai",label:"Asia/Shanghai (UTC+8)"},{value:"Asia/Tokyo",label:"Asia/Tokyo (UTC+9)"},{value:"Asia/Dubai",label:"Asia/Dubai (UTC+4)"},{value:"Asia/Singapore",label:"Asia/Singapore (UTC+8)"},{value:"Australia/Sydney",label:"Australia/Sydney (UTC+10/+11)"},{value:"Australia/Melbourne",label:"Australia/Melbourne (UTC+10/+11)"},{value:"Pacific/Auckland",label:"Pacific/Auckland (UTC+12/+13)"},{value:"UTC",label:"Coordinated Universal Time (UTC+0)"}].map(e=>(0,sn.jsx)("option",{value:e.value,children:e.label},e.value))})]})]}),(0,sn.jsxs)("div",{className:"mt-4",children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),(0,sn.jsx)("textarea",{value:y.address,onChange:e=>k("address",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),(0,sn.jsxs)("div",{className:"border-b border-gray-200 pb-6",children:[(0,sn.jsxs)("h4",{className:"text-md font-medium text-gray-800 mb-4 flex items-center",children:[(0,sn.jsx)($i,{className:"w-4 h-4 mr-2"}),"Company Information"]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),(0,sn.jsx)("input",{type:"text",value:y.companyName,onChange:e=>k("companyName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Full company name"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Currency"}),(0,sn.jsxs)("select",{value:y.currency,onChange:e=>k("currency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,sn.jsx)("option",{value:"EUR",children:"Euro (EUR)"}),(0,sn.jsx)("option",{value:"USD",children:"US Dollar (USD)"}),(0,sn.jsx)("option",{value:"GBP",children:"British Pound (GBP)"}),(0,sn.jsx)("option",{value:"CNY",children:"Chinese Yuan (CNY)"})]})]})]})]}),(0,sn.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[(0,sn.jsxs)("h4",{className:"text-md font-medium text-blue-900 mb-4 flex items-center",children:[(0,sn.jsx)(Zi,{className:"w-4 h-4 mr-2"}),"French Tax Information"]}),(0,sn.jsx)("p",{className:"text-sm text-blue-700 mb-4",children:"The following information will appear on French invoices. Please ensure accuracy. The system will generate compliant French invoices based on what you provide."}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"VAT Number"}),(0,sn.jsx)("input",{type:"text",value:y.vatNumber,onChange:e=>k("vatNumber",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.vatNumber?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"FR12345678901"}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Format: FR + 11 digits"}),g.vatNumber&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:g.vatNumber})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SIREN Number"}),(0,sn.jsx)("input",{type:"text",value:y.sirenNumber,onChange:e=>k("sirenNumber",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.sirenNumber?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"123456789",maxLength:"9"}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"9-digit company identifier"}),g.sirenNumber&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:g.sirenNumber})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"SIRET Number"}),(0,sn.jsx)("input",{type:"text",value:y.siretNumber,onChange:e=>k("siretNumber",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.siretNumber?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"12345678901234",maxLength:"14"}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"14-digit establishment identifier"}),g.siretNumber&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:g.siretNumber})]})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Legal Form"}),(0,sn.jsxs)("select",{value:y.legalForm||"",onChange:e=>k("legalForm",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,sn.jsx)("option",{value:"",children:"Please select"}),(0,sn.jsx)("option",{value:"SAS",children:"SAS (Simplified joint-stock company)"}),(0,sn.jsx)("option",{value:"SARL",children:"SARL (Limited liability company)"}),(0,sn.jsx)("option",{value:"SA",children:"SA (Public limited company)"}),(0,sn.jsx)("option",{value:"EURL",children:"EURL (Single-member limited liability company)"}),(0,sn.jsx)("option",{value:"SNC",children:"SNC (General partnership)"}),(0,sn.jsx)("option",{value:"Auto-entrepreneur",children:"Auto-entrepreneur (Sole proprietor)"})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Registered Capital (EUR)"}),(0,sn.jsx)("input",{type:"number",value:y.registeredCapital||"",onChange:e=>k("registeredCapital",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., 10000",min:"0"})]})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"RCS Number"}),(0,sn.jsx)("input",{type:"text",value:y.rcsNumber||"",onChange:e=>k("rcsNumber",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.rcsNumber?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"RCS PARIS 123 456 789"}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Trade and Companies Register number"}),g.rcsNumber&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:g.rcsNumber})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"NAF Code"}),(0,sn.jsx)("input",{type:"text",value:y.nafCode||"",onChange:e=>k("nafCode",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 ".concat(g.nafCode?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"e.g., 6201Z",maxLength:"5"}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"5-character activity code"}),g.nafCode&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:g.nafCode})]})]}),(0,sn.jsxs)("div",{className:"mb-6",children:[(0,sn.jsxs)("h4",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center gap-2",children:[(0,sn.jsx)(fi,{className:"w-5 h-5"}),"Bank Information"]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"IBAN"}),(0,sn.jsx)("input",{type:"text",value:y.bankIBAN||"",onChange:e=>k("bankIBAN",e.target.value),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono ".concat(g.bankIBAN?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"FR76 1234 5678 9012 3456 7890 123"}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"International Bank Account Number"}),g.bankIBAN&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:g.bankIBAN})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"BIC/SWIFT"}),(0,sn.jsx)("input",{type:"text",value:y.bankBIC||"",onChange:e=>k("bankBIC",e.target.value.toUpperCase()),className:"w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono ".concat(g.bankBIC?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"BNPAFRPPXXX",maxLength:"11"}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Bank Identifier Code"}),g.bankBIC&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:g.bankBIC})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Bank Name"}),(0,sn.jsx)("input",{type:"text",value:y.bankName||"",onChange:e=>k("bankName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"BNP Paribas"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Account Holder"}),(0,sn.jsx)("input",{type:"text",value:y.accountHolder||"",onChange:e=>k("accountHolder",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Company or personal name"})]})]})]})]}),(0,sn.jsx)("div",{className:"flex justify-end",children:(0,sn.jsxs)("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[(0,sn.jsx)(Yi,{className:"w-4 h-4"}),l?"Saving...":"Save Changes"]})})]})]});case"password":return(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Change Password"}),(0,sn.jsxs)("form",{onSubmit:B,className:"space-y-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,sn.jsxs)("div",{className:"relative",children:[(0,sn.jsx)("input",{type:j.current?"text":"password",value:b.currentPassword,onChange:e=>w((0,Ne.A)((0,Ne.A)({},b),{},{currentPassword:e.target.value})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}),(0,sn.jsx)("button",{type:"button",onClick:()=>N((0,Ne.A)((0,Ne.A)({},j),{},{current:!j.current})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:j.current?(0,sn.jsx)(xi,{className:"w-4 h-4"}):(0,sn.jsx)(bi,{className:"w-4 h-4"})})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,sn.jsxs)("div",{className:"relative",children:[(0,sn.jsx)("input",{type:j.new?"text":"password",value:b.newPassword,onChange:e=>w((0,Ne.A)((0,Ne.A)({},b),{},{newPassword:e.target.value})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:6}),(0,sn.jsx)("button",{type:"button",onClick:()=>N((0,Ne.A)((0,Ne.A)({},j),{},{new:!j.new})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:j.new?(0,sn.jsx)(xi,{className:"w-4 h-4"}):(0,sn.jsx)(bi,{className:"w-4 h-4"})})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,sn.jsxs)("div",{className:"relative",children:[(0,sn.jsx)("input",{type:j.confirm?"text":"password",value:b.confirmPassword,onChange:e=>w((0,Ne.A)((0,Ne.A)({},b),{},{confirmPassword:e.target.value})),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,minLength:6}),(0,sn.jsx)("button",{type:"button",onClick:()=>N((0,Ne.A)((0,Ne.A)({},j),{},{confirm:!j.confirm})),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:j.confirm?(0,sn.jsx)(xi,{className:"w-4 h-4"}):(0,sn.jsx)(bi,{className:"w-4 h-4"})})]})]}),(0,sn.jsx)("div",{className:"flex justify-end",children:(0,sn.jsxs)("button",{type:"submit",disabled:l,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[(0,sn.jsx)(Di,{className:"w-4 h-4"}),l?"Changing...":"Change Password"]})})]})]});case"language":return(0,sn.jsx)(j4,{});case"email":return(0,sn.jsxs)("div",{className:"space-y-6",children:[(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Email Settings"}),(0,sn.jsxs)("form",{className:"space-y-4",onSubmit:I,children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Sender Email"}),(0,sn.jsx)("input",{type:"email",value:_.email,onChange:e=>C(t=>(0,Ne.A)((0,Ne.A)({},t),{},{email:e.target.value})),className:"mt-1 block w-full border rounded-md p-2",placeholder:"e.g., name@163.com"})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Provider"}),(0,sn.jsxs)("select",{value:_.provider,onChange:e=>(e=>{const t=R[e]||R.custom;C(n=>(0,Ne.A)((0,Ne.A)({},n),{},{provider:e},t))})(e.target.value),className:"mt-1 block w-full border rounded-md p-2",children:[(0,sn.jsx)("option",{value:"163",children:"163"}),(0,sn.jsx)("option",{value:"qq",children:"QQ"}),(0,sn.jsx)("option",{value:"gmail",children:"Gmail"}),(0,sn.jsx)("option",{value:"outlook",children:"Outlook"}),(0,sn.jsx)("option",{value:"custom",children:"Custom"})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"SMTP Host"}),(0,sn.jsx)("input",{type:"text",value:_.smtpHost,onChange:e=>C(t=>(0,Ne.A)((0,Ne.A)({},t),{},{smtpHost:e.target.value})),className:"mt-1 block w-full border rounded-md p-2",placeholder:"e.g., smtp.163.com"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Port"}),(0,sn.jsx)("input",{type:"number",value:_.smtpPort,onChange:e=>C(t=>(0,Ne.A)((0,Ne.A)({},t),{},{smtpPort:Number(e.target.value)})),className:"mt-1 block w-full border rounded-md p-2"})]})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,sn.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sn.jsx)("input",{id:"secure",type:"checkbox",checked:_.smtpSecure,onChange:e=>C(t=>(0,Ne.A)((0,Ne.A)({},t),{},{smtpSecure:e.target.checked}))}),(0,sn.jsx)("label",{htmlFor:"secure",className:"text-sm text-gray-700",children:"Use SSL/TLS"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Auth Code / Password"}),(0,sn.jsx)("input",{type:"password",value:_.password,onChange:e=>C(t=>(0,Ne.A)((0,Ne.A)({},t),{},{password:e.target.value})),className:"mt-1 block w-full border rounded-md p-2",placeholder:"SMTP authorization code or password from your email provider"})]})]}),(0,sn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sn.jsxs)("div",{className:"flex items-center gap-2",children:[(0,sn.jsx)("input",{id:"active",type:"checkbox",checked:_.isActive,onChange:e=>C(t=>(0,Ne.A)((0,Ne.A)({},t),{},{isActive:e.target.checked}))}),(0,sn.jsx)("label",{htmlFor:"active",className:"text-sm text-gray-700",children:"Enable configuration"})]}),(0,sn.jsx)("button",{type:"submit",className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300",children:"Save"})]}),D&&(0,sn.jsx)("div",{className:"mt-2 text-sm ".concat("success"===D.type?"text-green-600":"error"===D.type?"text-red-600":"text-gray-600"),children:D.text})]})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Test Email"}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 items-end",children:[(0,sn.jsxs)("div",{className:"md:col-span-2",children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Recipient Email"}),(0,sn.jsx)("input",{type:"email",value:E,onChange:e=>P(e.target.value),className:"mt-1 block w-full border rounded-md p-2",placeholder:"Enter an email to receive the test email"})]}),(0,sn.jsx)("button",{type:"button",onClick:L,className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:"Send Test"})]}),D&&"info"!==D.type&&(0,sn.jsx)("div",{className:"mt-2 text-sm ".concat("success"===D.type?"text-green-600":"text-red-600"),children:D.text})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Verify Server Email Config"}),(0,sn.jsxs)("div",{className:"flex items-center gap-3",children:[(0,sn.jsx)("button",{type:"button",onClick:F,className:"px-4 py-2 bg-indigo-600 text-white rounded hover:bg-indigo-700",children:"Verify"}),T&&(0,sn.jsx)("span",{className:"text-sm ".concat(T.ok?"text-green-600":"text-red-600"),children:T.ok?"Server email config is OK":"Not OK: ".concat(T.message||"Unknown")})]}),(0,sn.jsx)("p",{className:"mt-3 text-xs text-gray-500",children:"Tip: Configure your SMTP here and verify connectivity before sending invoices."})]})]});default:return null}})()})]})]})})},k4=()=>(0,sn.jsx)(N4,{}),A4=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],S4="label";function _4(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function C4(e,t){e.labels=t}function E4(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S4;const r=[];e.datasets=t.map(t=>{const i=e.datasets.find(e=>e[n]===t[n]);return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):(0,Ne.A)({},t)})}function P4(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:S4;const n={labels:[],datasets:[]};return C4(n,e.labels),E4(n,e.datasets,t),n}function T4(e,t){const{height:n=150,width:r=300,redraw:s=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h}=e,p=ws(e,A4),m=(0,i.useRef)(null),f=(0,i.useRef)(null),g=()=>{m.current&&(f.current=new _I(m.current,{type:o,data:P4(l,a),options:c&&(0,Ne.A)({},c),plugins:d}),_4(t,f.current))},v=()=>{_4(t,null),f.current&&(f.current.destroy(),f.current=null)};return(0,i.useEffect)(()=>{!s&&f.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(f.current,c)},[s,c]),(0,i.useEffect)(()=>{!s&&f.current&&C4(f.current.config.data,l.labels)},[s,l.labels]),(0,i.useEffect)(()=>{!s&&f.current&&l.datasets&&E4(f.current.config.data,l.datasets,a)},[s,l.datasets]),(0,i.useEffect)(()=>{f.current&&(s?(v(),setTimeout(g)):f.current.update(h))},[s,c,l.labels,l.datasets,h]),(0,i.useEffect)(()=>{f.current&&(v(),setTimeout(g))},[o]),(0,i.useEffect)(()=>(g(),()=>v()),[]),i.createElement("canvas",(0,Ne.A)({ref:m,role:"img",height:n,width:r},p),u)}const M4=(0,i.forwardRef)(T4);function D4(e,t){return _I.register(t),(0,i.forwardRef)((t,n)=>i.createElement(M4,(0,Ne.A)((0,Ne.A)({},t),{},{ref:n,type:e})))}const O4=D4("line",YO),R4=D4("doughnut",KO);const I4=new class{async getRevenueReport(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{var t,n;console.log("\ud83d\udd0d [reportService] \u8c03\u7528 getRevenueReport\uff0c\u53c2\u6570:",e),console.log("\ud83d\udd0d [reportService] API baseURL:",zt.default.defaults.baseURL);const r=await zt.default.get("/reports/revenue",{params:e});console.log("\u2705 [reportService] \u6536\u5165\u62a5\u544aAPI\u54cd\u5e94\u6210\u529f"),console.log("\ud83d\udcca [reportService] \u54cd\u5e94\u6570\u636e:",r.data),console.log("\ud83d\udcca [reportService] monthlyData\u957f\u5ea6:",null===(t=r.data)||void 0===t||null===(n=t.monthlyData)||void 0===n?void 0:n.length);const i=r.data||{};return{monthlyData:i.monthlyData||[],totalRevenue:i.totalRevenue||0,totalInvoices:i.totalInvoices||0,success:!1!==i.success,message:i.message||"\u6536\u5165\u62a5\u544a\u83b7\u53d6\u6210\u529f"}}catch(c){var r,i,s,a,o,l;return console.error("\u274c [reportService] \u6536\u5165\u62a5\u544aAPI\u8c03\u7528\u5931\u8d25:",c),console.error("\u274c [reportService] \u9519\u8bef\u8be6\u60c5:",{message:c.message,status:null===(r=c.response)||void 0===r?void 0:r.status,statusText:null===(i=c.response)||void 0===i?void 0:i.statusText,data:null===(s=c.response)||void 0===s?void 0:s.data}),401===(null===(a=c.response)||void 0===a?void 0:a.status)&&console.warn("\u26a0\ufe0f [reportService] Token\u5931\u6548\uff0c\u8fd4\u56de\u9ed8\u8ba4\u6570\u636e\u7ed3\u6784"),{monthlyData:[],totalRevenue:0,totalInvoices:0,success:!1,message:(null===(o=c.response)||void 0===o||null===(l=o.data)||void 0===l?void 0:l.message)||"\u83b7\u53d6\u6536\u5165\u62a5\u544a\u5931\u8d25"}}}async getAccountsReceivableReport(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await zt.default.get("/reports/accounts-receivable",{params:e})).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u83b7\u53d6\u5e94\u6536\u8d26\u6b3e\u62a5\u544a\u5931\u8d25")}}async getTaxReport(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{return(await zt.default.get("/reports/tax",{params:e})).data}catch(r){var t,n;throw new Error((null===(t=r.response)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.message)||"\u83b7\u53d6\u7a0e\u52a1\u62a5\u544a\u5931\u8d25")}}async getInvoiceStatusOverview(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;try{const n=new URLSearchParams;e&&n.append("startDate",e),t&&n.append("endDate",t);const r=await zt.default.get("/reports/invoice-status-overview?".concat(n.toString())),i=r.data.statusBreakdown||[],s={};return i.forEach((e,t)=>{s[t]={count:e.count||0,amount:e.amount||0,status:e.status,percentage:e.percentage||0}}),{summary:r.data.summary||{total:0,draft:0,sent:0,paid:0,overdue:0,cancelled:0},statusBreakdown:s,monthlyTrends:r.data.monthlyTrends||[],statusDetails:r.data.statusBreakdown||[]}}catch(n){throw console.error("Error fetching invoice status overview:",n),n}}},L4=I4,F4=e=>{let{children:t,feature:n="create_invoice",fallbackComponent:r=null,showUpgradePrompt:i=!0,blockAccess:s=!1}=e;const{t:a}=nn(["subscription","common"]),{subscriptionData:o,isExpired:l,loading:c,hasActiveSubscription:d,hasFeature:u,getInvoiceLimit:h,handleExpiration:p}=ps();if(c)return(0,sn.jsxs)("div",{className:"subscription-guard-loading",children:[(0,sn.jsx)("div",{className:"loading-spinner"}),(0,sn.jsx)("p",{children:a("common:loading")})]});const m=u(n);h();return l&&s||!m&&l||m?(0,sn.jsx)("div",{className:"subscription-guard-wrapper",children:t}):r||(0,sn.jsx)("div",{className:"subscription-guard-wrapper",children:t})},B4=e=>{let{children:t}=e;return(0,sn.jsx)(F4,{feature:"create_invoice",blockAccess:!0,showUpgradePrompt:!0,children:t})},z4=e=>{let{children:t}=e;return(0,sn.jsx)(F4,{feature:"advanced_templates",blockAccess:!1,showUpgradePrompt:!0,children:t})};const W4=new class{async getCurrentSubscription(){try{return(await zt.default.get("/subscriptions/current")).data}catch(e){throw console.error("Error fetching current subscription:",e),this.handleError(e)}}async getSubscriptionHistory(){try{return(await zt.default.get("/subscriptions/history")).data}catch(e){throw console.error("Error fetching subscription history:",e),this.handleError(e)}}async syncSubscription(){try{return(await zt.default.post("/subscriptions/sync")).data}catch(e){throw console.error("Error syncing subscription:",e),this.handleError(e)}}async cancelSubscription(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";try{return(await zt.default.post("/subscriptions/cancel",{reason:e})).data}catch(t){throw console.error("Error cancelling subscription:",t),this.handleError(t)}}async getBillingHistory(){try{return(await zt.default.get("/subscriptions/billing-history")).data}catch(e){throw console.error("Error fetching billing history:",e),this.handleError(e)}}async getSubscriptionFeatures(){try{return(await zt.default.get("/subscriptions/features")).data}catch(e){throw console.error("Error fetching subscription features:",e),this.handleError(e)}}async getSyncStats(){try{return(await zt.default.get("/subscriptions/stats")).data}catch(e){throw console.error("Error fetching sync stats:",e),this.handleError(e)}}async syncAllSubscriptions(){try{return(await zt.default.post("/subscriptions/admin/sync-all")).data}catch(e){throw console.error("Error syncing all subscriptions:",e),this.handleError(e)}}async hasFeature(e){try{return!0===(await this.getSubscriptionFeatures()).features[e]}catch(t){return console.error("Error checking feature access:",t),!1}}async checkUsageLimit(e,t){try{const n=(await this.getSubscriptionFeatures()).features[e];if(null===n||void 0===n)return{hasLimit:!1,isExceeded:!1,limit:null,remaining:null};return{hasLimit:!0,isExceeded:t>=n,limit:n,remaining:Math.max(0,n-t),currentCount:t}}catch(n){return console.error("Error checking usage limit:",n),{hasLimit:!0,isExceeded:!0,limit:0,remaining:0}}}formatSubscriptionStatus(e){return{active:"\u6d3b\u8dc3",cancelled:"\u5df2\u53d6\u6d88",past_due:"\u903e\u671f",paused:"\u6682\u505c",trialing:"\u8bd5\u7528\u4e2d",expired:"\u5df2\u8fc7\u671f",inactive:"\u672a\u6fc0\u6d3b"}[e]||e}formatBillingCycle(e){return{monthly:"\u6708\u4ed8",yearly:"\u5e74\u4ed8",quarterly:"\u5b63\u4ed8"}[e]||e}formatPlanType(e){return{free:"\u514d\u8d39\u7248",basic:"\u57fa\u7840\u7248",pro:"\u4e13\u4e1a\u7248",enterprise:"\u4f01\u4e1a\u7248"}[e]||e}formatDaysRemaining(e){return null===e||void 0===e?"\u65e0\u9650\u5236":e<0?"\u5df2\u8fc7\u671f ".concat(Math.abs(e)," \u5929"):0===e?"\u4eca\u5929\u5230\u671f":1===e?"\u660e\u5929\u5230\u671f":"\u8fd8\u6709 ".concat(e," \u5929")}handleError(e){if(e.response){const{status:t,data:n}=e.response;return{status:t,message:n.error||n.message||"\u670d\u52a1\u5668\u9519\u8bef",details:n.details||null}}return e.request?{status:0,message:"\u7f51\u7edc\u8fde\u63a5\u9519\u8bef\uff0c\u8bf7\u68c0\u67e5\u7f51\u7edc\u8bbe\u7f6e",details:null}:{status:-1,message:e.message||"\u672a\u77e5\u9519\u8bef",details:null}}},U4=W4,V4={invoiceLimit:-1,clientLimit:-1,customTemplates:!0,advancedReports:!0,apiAccess:!0,prioritySupport:!1,exportFormats:["pdf","excel","csv"],storageLimit:-1,teamMembers:-1},H4=()=>{const{user:e}=mn(),[t,n]=(0,i.useState)(V4),[r,s]=(0,i.useState)(null),[a,o]=(0,i.useState)(!0),[l,c]=(0,i.useState)(null);(0,i.useEffect)(()=>{(async()=>{if(!e)return n(V4),void o(!1);try{o(!0),c(null);const e=await U4.getCurrentSubscription();s(e);const t=await U4.getSubscriptionFeatures();n(t||V4)}catch(t){console.error("Failed to load subscription features:",t),c(t.message),n(V4)}finally{o(!1)}})()},[e]);return{features:t,subscription:r,loading:a,error:l,canUseFeature:e=>{if(a)return!1;switch(e){case"customTemplates":return t.customTemplates;case"advancedReports":return t.advancedReports;case"apiAccess":return t.apiAccess;case"prioritySupport":return t.prioritySupport;default:return!0}},isLimitReached:(e,n)=>{if(a)return!1;const r=t[e];return-1!==r&&n>=r},getRemainingQuota:(e,n)=>{const r=t[e];return-1===r?-1:Math.max(0,r-n)},supportsExportFormat:e=>{var n;return(null===(n=t.exportFormats)||void 0===n?void 0:n.includes(e))||!1},getUpgradeRecommendation:e=>{if(!r||"active"===r.status){if("advancedReports"===e||"apiAccess"===e)return"pro";if("customTemplates"===e)return"basic"}return null},getFeatureHint:e=>({customTemplates:"\u81ea\u5b9a\u4e49\u53d1\u7968\u6a21\u677f\u8ba9\u60a8\u7684\u54c1\u724c\u66f4\u4e13\u4e1a",advancedReports:"\u9ad8\u7ea7\u62a5\u544a\u5e2e\u52a9\u60a8\u6df1\u5165\u4e86\u89e3\u4e1a\u52a1\u6570\u636e",apiAccess:"API \u8bbf\u95ee\u8ba9\u60a8\u96c6\u6210\u7b2c\u4e09\u65b9\u7cfb\u7edf",prioritySupport:"\u4f18\u5148\u6280\u672f\u652f\u6301\u786e\u4fdd\u95ee\u9898\u5feb\u901f\u89e3\u51b3"}[e]||""),refreshSubscription:async()=>{if(e)try{o(!0),c(null),await U4.syncSubscription();const e=await U4.getCurrentSubscription();s(e);const t=await U4.getFeatures();return n(t||V4),!0}catch(t){return console.error("Failed to refresh subscription:",t),c(t.message),!1}finally{o(!1)}},isActive:"active"===(null===r||void 0===r?void 0:r.status),isPro:"pro"===(null===r||void 0===r?void 0:r.planType),isEnterprise:"enterprise"===(null===r||void 0===r?void 0:r.planType),hasActiveSubscription:r&&["active","trialing"].includes(r.status)}},q4=e=>{let{isVisible:t=!0,onRenew:n=null,customMessage:r=null,showBackground:i=!0}=e;const{t:s}=nn(["subscription","common"]),{subscriptionData:a,subscriptionType:o,remainingDays:l,getExpirationDate:c}=ps();if(!t)return null;const d=c(),u=0===l||d&&new Date>=d;return(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("div",{className:"subscription-expired-modal-backdrop ".concat(i?"with-background":""),children:(0,sn.jsx)("div",{className:"modal-overlay"})}),(0,sn.jsx)("div",{className:"subscription-expired-modal-content",children:(0,sn.jsxs)("div",{className:"modal-content",children:[(0,sn.jsx)("div",{className:"modal-icon",children:(0,sn.jsx)("div",{className:"lock-icon",children:"\ud83d\udd12"})}),(0,sn.jsx)("h2",{className:"modal-title",children:u?s("subscription:expired.title","Subscription expired"):s("subscription:expiring_soon.title","Subscription expiring soon")}),(0,sn.jsx)("div",{className:"modal-message",children:r||(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"primary-message",children:u?s("subscription:expired.invoice_creation_blocked","Your subscription has expired; invoice creation is blocked. Please renew to continue using the service."):s("subscription:expiring_soon.message","Your subscription is expiring soon. Please renew to avoid service interruption.")}),(0,sn.jsxs)("div",{className:"subscription-details",children:[(0,sn.jsxs)("div",{className:"detail-item",children:[(0,sn.jsxs)("span",{className:"label",children:[s("subscription:current_plan","Current plan"),":"]}),(0,sn.jsx)("span",{className:"value plan-name",children:"professional"===o?s("subscription:plans.professional","Professional"):"basic"===o?s("subscription:plans.basic","Basic"):s("subscription:plans.free","Free")})]}),d&&(0,sn.jsxs)("div",{className:"detail-item",children:[(0,sn.jsxs)("span",{className:"label",children:[u?s("subscription:expired_on","Expired on"):s("subscription:expires_on","Expires on"),":"]}),(0,sn.jsx)("span",{className:"value expiry-date",children:d.toLocaleDateString("zh-CN")})]}),!u&&null!==l&&(0,sn.jsxs)("div",{className:"detail-item",children:[(0,sn.jsxs)("span",{className:"label",children:[s("subscription:days_remaining","Days remaining"),":"]}),(0,sn.jsxs)("span",{className:"value days-remaining ".concat(l<=3?"urgent":""),children:[l," ",s("common:days","days")]})]})]}),(0,sn.jsxs)("div",{className:"restrictions-info",children:[(0,sn.jsxs)("h4",{children:[s("subscription:restrictions.title","Current limitations"),":"]}),(0,sn.jsxs)("ul",{className:"restrictions-list",children:[(0,sn.jsx)("li",{children:s("subscription:restrictions.no_invoice_creation","\u2022 Cannot create new invoices")}),(0,sn.jsx)("li",{children:s("subscription:restrictions.limited_access","\u2022 Some features are restricted")}),(0,sn.jsx)("li",{children:s("subscription:restrictions.no_support","\u2022 No priority support")})]})]})]})}),(0,sn.jsxs)("div",{className:"modal-actions",children:[(0,sn.jsxs)("button",{className:"btn btn-primary btn-large",onClick:()=>{n?n():window.location.href="/pricing"},children:[(0,sn.jsx)("span",{className:"btn-icon",children:"\u2b50"}),s("subscription:renew_now","Renew now")]}),(0,sn.jsx)(Ur,{to:"/subscription",className:"btn btn-secondary",children:s("subscription:view_subscription","View subscription details")}),(0,sn.jsx)("button",{className:"btn btn-link",onClick:()=>{window.location.href="/dashboard"},children:s("common:back_to_dashboard","Back to dashboard")})]}),(0,sn.jsx)("div",{className:"modal-footer",children:(0,sn.jsx)("p",{className:"footer-text",children:s("subscription:renewal_help","Please renew your subscription to continue using all features.")})})]})})]})};_I.register(ZL,rF,HI,UI,ML,XL,PL,DI);const G4=()=>{const[e,t]=(0,i.useState)("revenue"),[n,r]=(0,i.useState)(!1),[s,a]=(0,i.useState)(""),[o,l]=(0,i.useState)(()=>{const e=new Date;return"".concat(e.getFullYear(),"-").concat(String(e.getMonth()+1).padStart(2,"0"))}),{isExpired:c}=ps(),[d,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(null),[m,f]=(0,i.useState)(null),[g,v]=(0,i.useState)(null),y=async()=>{console.log("\ud83d\udd04 [loadReports] \u5f00\u59cb\u52a0\u8f7d\u62a5\u544a\u6570\u636e..."),console.log("\ud83d\udd04 [loadReports] selectedMonth:",o),r(!0),a("");try{const[e,t]=o.split("-"),n="".concat(e,"-").concat(t,"-01"),r=new Date(parseInt(e),parseInt(t),0).toISOString().split("T")[0];console.log("\ud83d\udcc5 [loadReports] \u65e5\u671f\u8303\u56f4:",{startDate:n,endDate:r});const[i,s,a,l]=await Promise.all([L4.getRevenueReport({startDate:n,endDate:r,groupBy:"day",nodeCount:31}),L4.getTaxReport({startDate:n,endDate:r}),L4.getInvoiceStatusOverview(n,r),L4.getAccountsReceivableReport({startDate:n,endDate:r})]);console.log("\ud83d\udcca [loadReports] \u83b7\u53d6\u5230\u7684\u6570\u636e:"),console.log("  - revenueData:",i),console.log("  - taxData:",s),console.log("  - statusData:",a),console.log("  - statusData.statusBreakdown:",null===a||void 0===a?void 0:a.statusBreakdown),console.log("  - receivableData:",l),u(i),p(s),f(a),v(l),console.log("\u2705 [loadReports] \u6570\u636e\u8bbe\u7f6e\u5b8c\u6210")}catch(t){var e;console.error("\u274c [loadReports] Failed to load reports:",t),console.error("\u274c [loadReports] Error details:",null===(e=t.response)||void 0===e?void 0:e.data),a("Failed to load report data, please try again later")}finally{r(!1)}},x=()=>{var e;if(console.log("getInvoiceStatusTrendData called"),console.log("invoiceStatusReport:",m),console.log("monthlyTrends:",null===m||void 0===m?void 0:m.monthlyTrends),null===m||void 0===m||!m.monthlyTrends||0===m.monthlyTrends.length)return console.log("No monthly trends data available"),{labels:[],datasets:[]};const t=m.monthlyTrends;let n;n=void 0!==(null===(e=t[0])||void 0===e?void 0:e.day)?t.map(e=>"Day ".concat(e.day)):t.map(e=>new Date(e.month+"-01").toLocaleDateString("en-GB",{year:"numeric",month:"short"}));const r=[{label:"Total Invoices",data:t.map(e=>e.totalCount||0),borderColor:"rgb(75, 192, 192)",backgroundColor:"rgba(75, 192, 192, 0.2)",tension:.1},{label:"Paid",data:t.map(e=>{var t;return(null===(t=e.paid)||void 0===t?void 0:t.count)||0}),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.2)",tension:.1},{label:"Overdue",data:t.map(e=>{var t;return(null===(t=e.overdue)||void 0===t?void 0:t.count)||0}),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.2)",tension:.1}];return console.log("Generated trend data:",{labels:n,datasets:r}),{labels:n,datasets:r}},b=e=>({draft:"bg-blue-500",sent:"bg-green-500",paid:"bg-emerald-500",overdue:"bg-red-500",cancelled:"bg-gray-500",pending:"bg-purple-500"}[e]||"bg-gray-400");(0,i.useEffect)(()=>{y()},[o]);const w=()=>{if(console.log("\ud83d\udd0d [getRevenueChartData] \u5f00\u59cb\u5904\u7406\u56fe\u8868\u6570\u636e"),console.log("\ud83d\udd0d [getRevenueChartData] revenueReport:",d),null===d||void 0===d||!d.monthlyData||!Array.isArray(d.monthlyData))return console.log("\u26a0\ufe0f [getRevenueChartData] \u6ca1\u6709\u627e\u5230monthlyData\uff0c\u8fd4\u56de\u7a7a\u56fe\u8868"),{labels:["No Data"],datasets:[{label:"Revenue Amount",data:[0],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]};const e=d.monthlyData;if(console.log("\ud83d\udcca [getRevenueChartData] monthlyData\u957f\u5ea6:",e.length),console.log("\ud83d\udcca [getRevenueChartData] monthlyData\u5185\u5bb9:",e),0===e.length)return console.log("\u26a0\ufe0f [getRevenueChartData] monthlyData\u4e3a\u7a7a\u6570\u7ec4"),{labels:["No Data"],datasets:[{label:"Revenue Amount",data:[0],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0}]};const t=e.map((e,t)=>{if(e.segmentStart&&e.segmentEnd){const t=new Date(e.segmentStart),n=new Date(e.segmentEnd);return e.segmentStart===e.segmentEnd?t.toLocaleDateString("en-GB",{month:"short",day:"numeric"}):"".concat(t.toLocaleDateString("en-GB",{month:"short",day:"numeric"})," - ").concat(n.toLocaleDateString("en-GB",{month:"short",day:"numeric"}))}return e.period?e.period:e.month?e.month:"Data Point ".concat(t+1)}),n=e.map(e=>{const t=parseFloat(e.revenue||e.amount||e.total||0);return console.log("\ud83d\udcca [getRevenueChartData] \u6570\u636e\u9879:",e,"\u63d0\u53d6\u503c:",t),t});console.log("\u2705 [getRevenueChartData] \u6700\u7ec8\u56fe\u8868\u6570\u636e:"),console.log("\ud83d\udcca [getRevenueChartData] labels:",t),console.log("\ud83d\udcca [getRevenueChartData] dataValues:",n);return{labels:t,datasets:[{label:"Revenue Amount",data:n,borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0,pointBackgroundColor:"rgb(59, 130, 246)",pointBorderColor:"#fff",pointBorderWidth:2,pointRadius:4,pointHoverRadius:6,pointHoverBackgroundColor:"rgb(59, 130, 246)",pointHoverBorderColor:"#fff",pointHoverBorderWidth:2}]}},j=()=>{if(console.log("\ud83d\udd0d [getTaxChartData] \u5f00\u59cb\u5904\u7406\u7a0e\u52a1\u56fe\u8868\u6570\u636e"),console.log("\ud83d\udd0d [getTaxChartData] taxReport:",h),null===h||void 0===h||!h.taxByRate||!Array.isArray(h.taxByRate))return console.log("\u26a0\ufe0f [getTaxChartData] \u6ca1\u6709\u627e\u5230taxByRate\uff0c\u8fd4\u56de\u7a7a\u56fe\u8868"),{labels:["No Data"],datasets:[{data:[0],backgroundColor:["#e5e7eb"],borderColor:["#d1d5db"],borderWidth:1}]};const e=h.taxByRate;if(console.log("\ud83d\udcca [getTaxChartData] taxByRate\u957f\u5ea6:",e.length),console.log("\ud83d\udcca [getTaxChartData] taxByRate\u5185\u5bb9:",e),0===e.length)return console.log("\u26a0\ufe0f [getTaxChartData] taxByRate\u4e3a\u7a7a\u6570\u7ec4"),{labels:["No Data"],datasets:[{data:[0],backgroundColor:["#e5e7eb"],borderColor:["#d1d5db"],borderWidth:1}]};const t=e.map(e=>{const t=parseFloat(e.rate||e.taxRate||0);return"".concat(t,"% Rate")}),n=e.map(e=>{const t=parseFloat(e.amount||e.taxAmount||e.total||0);return console.log("\ud83d\udcca [getTaxChartData] \u7a0e\u52a1\u6570\u636e\u9879:",e,"\u63d0\u53d6\u503c:",t),t}),r=["#3b82f6","#ef4444","#10b981","#f59e0b","#8b5cf6","#06b6d4","#f97316","#84cc16","#ec4899","#6366f1"];return console.log("\u2705 [getTaxChartData] \u6700\u7ec8\u7a0e\u52a1\u56fe\u8868\u6570\u636e:"),console.log("\ud83d\udcca [getTaxChartData] labels:",t),console.log("\ud83d\udcca [getTaxChartData] dataValues:",n),{labels:t,datasets:[{data:n,backgroundColor:r.slice(0,n.length),borderColor:r.slice(0,n.length).map(e=>e),borderWidth:2,hoverOffset:4}]}},N=e=>null===e||void 0===e||isNaN(e)?new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(0):new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(e),k=e=>void 0===e||null===e||isNaN(e)?"0.0%":"".concat(e>=0?"+":"").concat(e.toFixed(1),"%"),A=()=>{if(null===g||void 0===g||!g.monthlyTrend||!Array.isArray(g.monthlyTrend))return{labels:["No Data"],datasets:[{label:"No Data",data:[0],borderColor:"#e5e7eb",backgroundColor:"rgba(229, 231, 235, 0.1)",tension:.1}]};const e=g.monthlyTrend,t=e.map(e=>{if(e.month){return new Date(e.month+"-01").toLocaleDateString("en-GB",{year:"numeric",month:"short"})}return""});return console.log("\ud83d\udcca [Accounts Receivable] \u6708\u5ea6\u8d8b\u52bf\u6570\u636e:",e),console.log("\ud83d\udcca [Accounts Receivable] \u6807\u7b7e:",t),{labels:t,datasets:[{label:"Total Receivables",data:e.map(e=>parseFloat(e.totalAmount||0)),borderColor:"#3b82f6",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.1,fill:!0},{label:"Paid Amount",data:e.map(e=>parseFloat(e.paidAmount||0)),borderColor:"#10b981",backgroundColor:"rgba(16, 185, 129, 0.1)",tension:.1},{label:"Pending Amount",data:e.map(e=>parseFloat(e.pendingAmount||0)),borderColor:"#f59e0b",backgroundColor:"rgba(245, 158, 11, 0.1)",tension:.1},{label:"Overdue Amount",data:e.map(e=>parseFloat(e.overdueAmount||0)),borderColor:"#ef4444",backgroundColor:"rgba(239, 68, 68, 0.1)",tension:.1}]}},S=[{id:"revenue",name:"Revenue Report",icon:gi},{id:"tax",name:"Tax Report",icon:ii},{id:"invoice-status",name:"Invoice Status",icon:Vi}];return(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(z4,{children:(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,sn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,sn.jsx)("div",{className:"mb-8",children:(0,sn.jsxs)("div",{className:"flex justify-between items-center",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Report Center"}),(0,sn.jsx)("p",{className:"mt-2 text-gray-600",children:"View detailed business reports"})]}),(0,sn.jsxs)("button",{onClick:y,disabled:n,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 flex items-center gap-2",children:[(0,sn.jsx)(Ki,{className:"w-4 h-4 ".concat(n?"animate-spin":"")}),"Refresh Data"]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6 mb-8",children:(0,sn.jsxs)("div",{className:"flex items-center gap-4",children:[(0,sn.jsx)(oi,{className:"w-5 h-5 text-gray-400"}),(0,sn.jsx)("div",{className:"flex items-center gap-4",children:(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Select Month"}),(0,sn.jsx)("input",{type:"month",value:o,onChange:e=>l(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]})})]})}),s&&(0,sn.jsx)("div",{className:"mb-6 bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:s}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow mb-8",children:(0,sn.jsx)("div",{className:"border-b border-gray-200",children:(0,sn.jsx)("nav",{className:"-mb-px flex space-x-8 px-6",children:S.map(n=>{const r=n.icon;return(0,sn.jsxs)("button",{onClick:()=>t(n.id),className:"py-4 px-1 border-b-2 font-medium text-sm flex items-center gap-2 ".concat(e===n.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,sn.jsx)(r,{className:"w-4 h-4"}),n.name]},n.id)})})})}),(0,sn.jsx)("div",{className:"mb-8",children:n?(0,sn.jsxs)("div",{className:"text-center py-12",children:[(0,sn.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),(0,sn.jsx)("p",{className:"text-gray-600",children:"Loading report data..."})]}):(0,sn.jsxs)(sn.Fragment,{children:["revenue"===e&&(0,sn.jsxs)("div",{className:"space-y-6",children:[(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,sn.jsx)(gi,{className:"w-6 h-6 text-green-600"})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N((null===d||void 0===d?void 0:d.totalRevenue)||0)}),(0,sn.jsx)("p",{className:"text-sm ".concat(((null===d||void 0===d?void 0:d.growthRate)||0)>=0?"text-green-600":"text-red-600"),children:k((null===d||void 0===d?void 0:d.growthRate)||0)})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,sn.jsx)(is,{className:"w-6 h-6 text-blue-600"})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Paid Amount"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N((null===d||void 0===d?void 0:d.paidAmount)||0)})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,sn.jsx)(is,{className:"w-6 h-6 text-yellow-600"})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending Amount"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N((null===d||void 0===d?void 0:d.pendingAmount)||0)})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,sn.jsx)(rs,{className:"w-6 h-6 text-red-600"})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Overdue Amount"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N((null===d||void 0===d?void 0:d.overdueAmount)||0)})]})]})})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,sn.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Revenue Trend"})}),(0,sn.jsx)("div",{className:"h-80",children:(0,sn.jsx)(O4,{data:w(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"rgb(59, 130, 246)",borderWidth:1,callbacks:{label:function(e){return"Revenue: ".concat(N(e.parsed.y))}}}},scales:{x:{display:!0,title:{display:!0,text:"Date"},grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"},ticks:{color:"#666",font:{size:11},maxRotation:45,minRotation:0,maxTicksLimit:10}},y:{display:!0,beginAtZero:!0,title:{display:!0,text:"Revenue"},grid:{display:!0,color:"rgba(0, 0, 0, 0.1)"},ticks:{color:"#666",font:{size:11},callback:function(e){return N(e)}}}},interaction:{intersect:!1,mode:"index"},animation:{duration:1e3,easing:"easeInOutQuart"}}})}),(0,sn.jsx)("div",{className:"mt-4 text-xs text-gray-500 text-center",children:"* Chart shows revenue trend, X-axis is time period, Y-axis is revenue amount"})]})]}),"tax"===e&&(()=>{var e,t,n,r,i;return(0,sn.jsxs)("div",{className:"space-y-6",children:[(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"p-2 bg-red-100 rounded-lg",children:(0,sn.jsx)(gi,{className:"w-6 h-6 text-red-600"})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Tax"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N((null===h||void 0===h||null===(e=h.summary)||void 0===e?void 0:e.totalTax)||(null===h||void 0===h?void 0:h.totalTax)||0)})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,sn.jsx)(is,{className:"w-6 h-6 text-green-600"})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Collected VAT"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N((null===h||void 0===h||null===(t=h.summary)||void 0===t?void 0:t.vatCollected)||(null===h||void 0===h||null===(n=h.vatSummary)||void 0===n?void 0:n.vatCollected)||0)})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,sn.jsx)(is,{className:"w-6 h-6 text-yellow-600"})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Pending VAT"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N((null===h||void 0===h||null===(r=h.summary)||void 0===r?void 0:r.vatPending)||(null===h||void 0===h||null===(i=h.vatSummary)||void 0===i?void 0:i.vatPending)||0)})]})]})})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,sn.jsx)("div",{className:"flex justify-between items-center mb-4",children:(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Tax Rate Distribution"})}),(0,sn.jsx)("div",{className:"h-64",children:(0,sn.jsx)(R4,{data:j(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"},tooltip:{callbacks:{label:function(e){const t=e.label||"",n=N(e.parsed);return"".concat(t,": ").concat(n)}}}}}})})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quarterly Tax Summary"}),(0,sn.jsx)("div",{className:"space-y-3",children:null!==h&&void 0!==h&&h.quarterlyTax&&0!==h.quarterlyTax.length?h.quarterlyTax.map((e,t)=>(0,sn.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.quarter||"Q".concat(t+1)}),(0,sn.jsxs)("p",{className:"text-xs text-gray-500",children:["Tax: ",N(e.taxAmount||0)]})]}),(0,sn.jsxs)("div",{className:"text-right",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-900",children:N(e.totalRevenue||0)}),(0,sn.jsx)("p",{className:"text-xs text-gray-500",children:"Revenue"})]})]},t)):(0,sn.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,sn.jsx)("p",{children:"No quarterly tax data"})})})]})]})]})})(),"accounts-receivable"===e&&(()=>{var e,t,n,r;return(0,sn.jsxs)("div",{className:"space-y-6",children:[(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"flex-shrink-0",children:(0,sn.jsx)(gi,{className:"h-8 w-8 text-blue-600"})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Total Receivables"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N((null===g||void 0===g||null===(e=g.summary)||void 0===e?void 0:e.totalReceivables)||0)})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"flex-shrink-0",children:(0,sn.jsx)(is,{className:"h-8 w-8 text-green-600"})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Current Receivables"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N((null===g||void 0===g||null===(t=g.summary)||void 0===t?void 0:t.currentReceivables)||0)})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"flex-shrink-0",children:(0,sn.jsx)(rs,{className:"h-8 w-8 text-red-600"})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Overdue Receivables"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:N((null===g||void 0===g||null===(n=g.summary)||void 0===n?void 0:n.overdueReceivables)||0)})]})]})}),(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"flex-shrink-0",children:(0,sn.jsx)(ii,{className:"h-8 w-8 text-purple-600"})}),(0,sn.jsxs)("div",{className:"ml-4",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-500",children:"Collection Rate"}),(0,sn.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[((null===g||void 0===g||null===(r=g.summary)||void 0===r?void 0:r.collectionRate)||0).toFixed(1),"%"]})]})]})})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Receivables Trend"}),(0,sn.jsx)("div",{className:"h-64",children:(0,sn.jsx)(O4,{data:A(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top"},title:{display:!1}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return N(e)}}}},interaction:{intersect:!1},plugins:{tooltip:{callbacks:{label:function(e){return"".concat(e.dataset.label,": ").concat(N(e.parsed.y))}}}}}})})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Top Clients by Receivables"}),(0,sn.jsx)("div",{className:"space-y-3 max-h-64 overflow-y-auto",children:null!==g&&void 0!==g&&g.clientReceivables&&0!==g.clientReceivables.length?g.clientReceivables.slice(0,10).map((e,t)=>(0,sn.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,sn.jsxs)("div",{className:"flex-1",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-900",children:e.clientName}),(0,sn.jsx)("p",{className:"text-xs text-gray-500",children:e.company||e.email}),(0,sn.jsxs)("div",{className:"flex gap-2 mt-1",children:[(0,sn.jsxs)("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded",children:["Current: ",N(e.pendingAmount||0)]}),(e.overdueAmount||0)>0&&(0,sn.jsxs)("span",{className:"text-xs bg-red-100 text-red-800 px-2 py-1 rounded",children:["Overdue: ",N(e.overdueAmount)]})]})]}),(0,sn.jsxs)("div",{className:"text-right",children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-900",children:N((e.pendingAmount||0)+(e.overdueAmount||0))}),(0,sn.jsxs)("p",{className:"text-xs text-gray-500",children:[e.invoiceCount||0," invoices"]})]})]},e.clientId||t)):(0,sn.jsx)("div",{className:"text-center py-8 text-gray-500",children:(0,sn.jsx)("p",{children:"No customer receivables data"})})})]})]})]})})(),"invoice-status"===e&&(()=>{var e,t,n,r,i;return(0,sn.jsxs)("div",{className:"space-y-6",children:[(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[(0,sn.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,sn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Invoices"}),(0,sn.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:(null===m||void 0===m||null===(e=m.summary)||void 0===e?void 0:e.totalInvoices)||0})]}),(0,sn.jsx)("div",{className:"p-3 bg-blue-100 rounded-full",children:(0,sn.jsx)(ii,{className:"h-6 w-6 text-blue-600"})})]})}),(0,sn.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,sn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Amount"}),(0,sn.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:["\u20ac",((null===m||void 0===m||null===(t=m.summary)||void 0===t?void 0:t.totalAmount)||0).toLocaleString()]})]}),(0,sn.jsx)("div",{className:"p-3 bg-green-100 rounded-full",children:(0,sn.jsx)(gi,{className:"h-6 w-6 text-green-600"})})]})}),(0,sn.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,sn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg Processing Time"}),(0,sn.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[(null===m||void 0===m||null===(n=m.summary)||void 0===n?void 0:n.avgProcessingTime)||0," days"]})]}),(0,sn.jsx)("div",{className:"p-3 bg-yellow-100 rounded-full",children:(0,sn.jsx)(Ki,{className:"h-6 w-6 text-yellow-600"})})]})}),(0,sn.jsx)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:(0,sn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Collection Rate"}),(0,sn.jsxs)("p",{className:"text-2xl font-bold text-gray-900",children:[((null===m||void 0===m||null===(r=m.summary)||void 0===r?void 0:r.collectionRate)||0).toFixed(1),"%"]})]}),(0,sn.jsx)("div",{className:"p-3 bg-purple-100 rounded-full",children:(0,sn.jsx)(is,{className:"h-6 w-6 text-purple-600"})})]})})]}),(0,sn.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow-sm border",children:[(0,sn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Monthly Trends (12 Months)"}),(0,sn.jsx)("div",{className:"h-80",children:(null===m||void 0===m||null===(i=m.monthlyTrends)||void 0===i?void 0:i.length)>0?(0,sn.jsx)(O4,{data:x(),options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}},scales:{y:{beginAtZero:!0,ticks:{callback:function(e){return e.toLocaleString()}}}}}}):(0,sn.jsx)("div",{className:"flex items-center justify-center h-full text-gray-500",children:"No trend data available"})})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-sm border",children:[(0,sn.jsx)("div",{className:"p-6 border-b border-gray-200",children:(0,sn.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Status Breakdown"})}),(0,sn.jsx)("div",{className:"overflow-x-auto",children:(0,sn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,sn.jsx)("thead",{className:"bg-gray-50",children:(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),(0,sn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Count"}),(0,sn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Amount"}),(0,sn.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Percentage"})]})}),(0,sn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:null!==m&&void 0!==m&&m.statusBreakdown?(()=>{let e=[];Array.isArray(m.statusBreakdown)?e=m.statusBreakdown.filter(e=>e.count>0):"object"===typeof m.statusBreakdown&&(e=Object.entries(m.statusBreakdown).filter(e=>{let[t,n]=e;return(n.count||0)>0}).map(e=>{let[t,n]=e;return{status:n.status||t,count:n.count||0,amount:n.amount||0}}));const t=e.reduce((e,t)=>e+(t.count||0),0);return e.map((e,n)=>{const r=t>0?((e.count||0)/t*100).toFixed(1):0;return(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("div",{className:"w-3 h-3 rounded-full mr-3 ".concat(b(e.status))}),(0,sn.jsx)("span",{className:"text-sm font-medium text-gray-900 capitalize",children:e.status})]})}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.count||0}),(0,sn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["\u20ac",(e.amount||0).toLocaleString()]}),(0,sn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[r,"%"]})]},e.status||n)})})():(0,sn.jsx)("tr",{children:(0,sn.jsx)("td",{colSpan:"4",className:"px-6 py-4 text-center text-gray-500",children:"No status data available"})})})]})})]})]})})()]})})]})})}),c&&(0,sn.jsx)(q4,{isVisible:!0,onRenew:()=>window.location.href="/pricing",showBackground:!0})]})},K4=()=>(0,sn.jsx)(G4,{}),Y4=e=>{var t;let{formData:n,clients:r,user:s,calculateTotals:a,calculateItemTotal:o,formatCurrency:l,invoiceMode:c,selectedTemplate:d}=e;const{t:u}=nn(["common","invoiceform"]),{subtotal:h,taxAmount:p,total:m}=a(),f=("fr"===c?"FR-":"INV-")+"PREVIEW-001",g=r.find(e=>e.id===n.clientId||String(e.id)===String(n.clientId)),v=(null===n||void 0===n?void 0:n.currency)||(null===s||void 0===s||null===(t=s.Company)||void 0===t?void 0:t.currency)||"EUR",y=e=>{const t=Number(null!==e&&void 0!==e?e:0);if("fr"===c)try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:v,minimumFractionDigits:2,maximumFractionDigits:2}).format(t).replace(/\u00A0/g," ").replace(/\u202F/g," ")}catch(Ae){return"".concat(v," ").concat(t.toFixed(2))}return"function"===typeof l?l(t,v):"".concat(v," ").concat(t.toFixed(2))},x=e=>{const t=Number(null!==e&&void 0!==e?e:0);if("fr"===c)try{return new Intl.NumberFormat("fr-FR",{style:"percent",minimumFractionDigits:1,maximumFractionDigits:1}).format(t/100)}catch(Ae){return"".concat(t.toFixed(1)," %")}return"".concat(t," %")};return(0,sn.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm overflow-hidden",children:[(0,sn.jsxs)("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200 flex justify-between items-center",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:u("preview")}),(0,sn.jsx)("span",{className:"text-xs font-medium text-gray-500 bg-gray-200 px-2 py-1 rounded",children:(e=>{if(!e)return f;if("fr"===c){const t=e.match(/^INV-(\d{4})-(\d{1,6})$/);if(t){const e=t[1],n=t[2].padStart(5,"0");return"FR-".concat(e,"-").concat(n)}}return e})(n.invoiceNumber)})]}),(0,sn.jsxs)("div",{className:"p-6",children:[(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mb-8",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:u("from")}),(0,sn.jsxs)("div",{className:"text-sm text-gray-700",children:[(null===s||void 0===s?void 0:s.logo)&&(0,sn.jsx)("div",{className:"mb-3",children:(0,sn.jsx)("img",{src:"".concat("http://localhost:3001").concat(s.logo),alt:u("companylogo"),className:"h-16 w-auto max-w-xs object-contain"})}),(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:(null===n||void 0===n?void 0:n.sellerCompanyName)||(null===s||void 0===s?void 0:s.companyName)||(null===s||void 0===s?void 0:s.firstName)+" "+(null===s||void 0===s?void 0:s.lastName)}),(0,sn.jsx)("p",{className:"mt-1",children:(null===n||void 0===n?void 0:n.sellerEmail)||(null===s||void 0===s?void 0:s.email)}),(0,sn.jsx)("p",{className:"mt-1",children:(null===n||void 0===n?void 0:n.sellerPhone)||(null===s||void 0===s?void 0:s.phone)}),(0,sn.jsx)("p",{className:"mt-1",children:(null===n||void 0===n?void 0:n.sellerAddress)||(null===s||void 0===s?void 0:s.address)}),((null===n||void 0===n?void 0:n.sellerVATNumber)||(null===s||void 0===s?void 0:s.vatNumber))&&(0,sn.jsxs)("p",{className:"mt-1",children:["VAT: ",(null===n||void 0===n?void 0:n.sellerVATNumber)||s.vatNumber]}),((null===n||void 0===n?void 0:n.sellerSIREN)||(null===s||void 0===s?void 0:s.sirenNumber)||(null===s||void 0===s?void 0:s.siren))&&(0,sn.jsxs)("p",{className:"mt-1",children:["SIREN: ",(null===n||void 0===n?void 0:n.sellerSIREN)||(null===s||void 0===s?void 0:s.sirenNumber)||(null===s||void 0===s?void 0:s.siren)]}),((null===n||void 0===n?void 0:n.sellerSIRET)||(null===s||void 0===s?void 0:s.siretNumber))&&(0,sn.jsxs)("p",{className:"mt-1",children:["SIRET: ",(null===n||void 0===n?void 0:n.sellerSIRET)||s.siretNumber]}),(null===n||void 0===n?void 0:n.sellerLegalForm)&&(0,sn.jsxs)("p",{className:"mt-1",children:["Legal Form: ",n.sellerLegalForm]}),(null===n||void 0===n?void 0:n.sellerRegisteredCapital)&&(0,sn.jsxs)("p",{className:"mt-1",children:["Registered Capital: ",y(n.sellerRegisteredCapital)]}),(null===n||void 0===n?void 0:n.sellerRCS)&&(0,sn.jsxs)("p",{className:"mt-1",children:["RCS Number: ",n.sellerRCS]}),(null===n||void 0===n?void 0:n.sellerNAF)&&(0,sn.jsxs)("p",{className:"mt-1",children:["NAF Code: ",n.sellerNAF]})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:u("to")}),(0,sn.jsx)("div",{className:"text-sm text-gray-700 bg-gray-50 p-3 rounded-lg border-l-4 border-gray-400",children:g?(0,sn.jsxs)(sn.Fragment,{children:[g.company?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:g.company}),(0,sn.jsxs)("p",{className:"mt-1 text-gray-600",children:["\xc0 l'attention de: ",g.name]})]}):(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:g.name}),g.email&&(0,sn.jsxs)("p",{className:"mt-1",children:["\u2709\ufe0f ",g.email]}),g.phone&&(0,sn.jsxs)("p",{className:"mt-1",children:["\ud83d\udcde ",g.phone]}),g.vatNumber&&(0,sn.jsxs)("p",{className:"mt-1 text-xs text-gray-600",children:["Num\xe9ro de TVA: ",g.vatNumber]}),g.siren&&(0,sn.jsxs)("p",{className:"mt-1 text-xs text-gray-600",children:["SIREN: ",g.siren]}),g.siret&&(0,sn.jsxs)("p",{className:"mt-1 text-xs text-gray-600",children:["SIRET: ",g.siret]})]}):(0,sn.jsx)("p",{className:"text-gray-500 italic",children:u("noselectedclient")})})]})]}),(()=>{const e=n.deliveryAddress||n.deliveryCity||n.deliveryPostalCode||n.deliveryCountry,t=(null===g||void 0===g?void 0:g.deliveryAddress)||(null===g||void 0===g?void 0:g.deliveryCity)||(null===g||void 0===g?void 0:g.deliveryPostalCode)||(null===g||void 0===g?void 0:g.deliveryCountry),r=(null===g||void 0===g?void 0:g.address)||(null===g||void 0===g?void 0:g.city)||(null===g||void 0===g?void 0:g.postalCode)||(null===g||void 0===g?void 0:g.country),i=!0===(null===g||void 0===g?void 0:g.sameAsAddress);return e||t||r?(0,sn.jsx)("div",{className:"mb-8",children:(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r&&(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[(0,sn.jsx)("span",{className:"mr-2",children:"\ud83d\udcb3"}),u("billingAddress")]}),(0,sn.jsx)("div",{className:"text-sm text-gray-700 bg-blue-50 p-4 rounded-lg border-l-4 border-blue-400",children:g&&(0,sn.jsxs)(sn.Fragment,{children:[g.company?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:g.company}),g.name&&(0,sn.jsxs)("p",{className:"mt-1 text-gray-600",children:["\xc0 l'attention de: ",g.name]})]}):g.name&&(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:g.name}),g.address&&(0,sn.jsx)("p",{className:"mt-1",children:g.address}),g.city&&g.postalCode&&(0,sn.jsxs)("p",{className:"mt-1",children:[g.city,", ",g.postalCode]}),g.country&&(0,sn.jsx)("p",{className:"mt-1",children:g.country}),g.vatNumber&&(0,sn.jsxs)("p",{className:"mt-1 text-xs text-gray-600",children:["Num\xe9ro de TVA: ",g.vatNumber]})]})})]}),(e||t||i&&r)&&(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-3 flex items-center",children:[(0,sn.jsx)("span",{className:"mr-2",children:"\ud83d\ude9a"}),u("deliveryAddress")]}),(0,sn.jsx)("div",{className:"text-sm text-gray-700 bg-green-50 p-4 rounded-lg border-l-4 border-green-400",children:e?(0,sn.jsxs)(sn.Fragment,{children:[g&&(g.company?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:g.company}),g.name&&(0,sn.jsxs)("p",{className:"mt-1 text-gray-600",children:["\xc0 l'attention de: ",g.name]})]}):g.name&&(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:g.name})),n.deliveryAddress&&(0,sn.jsx)("p",{className:"mt-1",children:n.deliveryAddress}),(n.deliveryCity||n.deliveryPostalCode)&&(0,sn.jsx)("p",{className:"mt-1",children:[n.deliveryCity,n.deliveryPostalCode].filter(Boolean).join(", ")}),n.deliveryCountry&&(0,sn.jsx)("p",{className:"mt-1",children:n.deliveryCountry}),n.deliveryDate&&(0,sn.jsxs)("p",{className:"mt-2 text-xs text-gray-600",children:[(0,sn.jsxs)("span",{className:"font-medium",children:[u("deliveryDate"),":"]})," ",n.deliveryDate]}),(0,sn.jsx)("p",{className:"mt-2 text-xs text-green-600 font-medium",children:"\ud83d\udccd Adresse de livraison personnalis\xe9e"})]}):i&&r?(0,sn.jsxs)(sn.Fragment,{children:[g&&(g.company?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:g.company}),g.name&&(0,sn.jsxs)("p",{className:"mt-1 text-gray-600",children:["\xc0 l'attention de: ",g.name]})]}):g.name&&(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:g.name})),g.address&&(0,sn.jsx)("p",{className:"mt-1",children:g.address}),g.city&&g.postalCode&&(0,sn.jsxs)("p",{className:"mt-1",children:[g.city,", ",g.postalCode]}),g.country&&(0,sn.jsx)("p",{className:"mt-1",children:g.country}),(0,sn.jsx)("p",{className:"mt-2 text-xs text-green-600 font-medium",children:"\u2713 Identique \xe0 l'adresse de facturation"})]}):t?(0,sn.jsxs)(sn.Fragment,{children:[g&&(g.company?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:g.company}),g.name&&(0,sn.jsxs)("p",{className:"mt-1 text-gray-600",children:["\xc0 l'attention de: ",g.name]})]}):g.name&&(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:g.name})),(null===g||void 0===g?void 0:g.deliveryAddress)&&(0,sn.jsx)("p",{className:"mt-1",children:g.deliveryAddress}),((null===g||void 0===g?void 0:g.deliveryCity)||(null===g||void 0===g?void 0:g.deliveryPostalCode))&&(0,sn.jsx)("p",{className:"mt-1",children:[null===g||void 0===g?void 0:g.deliveryCity,null===g||void 0===g?void 0:g.deliveryPostalCode].filter(Boolean).join(", ")}),(null===g||void 0===g?void 0:g.deliveryCountry)&&(0,sn.jsx)("p",{className:"mt-1",children:g.deliveryCountry}),(0,sn.jsx)("p",{className:"mt-2 text-xs text-green-600 font-medium",children:"\ud83c\udfe2 Adresse de livraison du client"})]}):null})]})]})}):null})(),(0,sn.jsx)("div",{className:"mb-8",children:(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sn.jsxs)("div",{className:"space-y-4",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Dates / \u65e5\u671f\u4fe1\u606f"}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,sn.jsxs)("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h5",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:u("invoicedate")}),(0,sn.jsx)("p",{className:"text-sm text-gray-600 mt-1",children:"Date de facturation"})]}),(0,sn.jsxs)("div",{className:"flex items-center text-sm font-medium text-gray-900",children:[(0,sn.jsx)(oi,{className:"mr-1.5 h-4 w-4 text-gray-400"}),n.issueDate]})]}),(n.serviceDate||n.deliveryDate)&&(0,sn.jsxs)("div",{className:"flex justify-between items-center p-3 bg-blue-50 rounded-lg border border-blue-200",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h5",{className:"text-xs font-medium text-blue-700 uppercase tracking-wide",children:"Date de livraison"}),(0,sn.jsx)("p",{className:"text-sm text-blue-600 mt-1",children:"Service fourni / Livraison"})]}),(0,sn.jsxs)("div",{className:"flex items-center text-sm font-medium text-blue-900",children:[(0,sn.jsx)(oi,{className:"mr-1.5 h-4 w-4 text-blue-500"}),n.serviceDate||n.deliveryDate]})]}),(0,sn.jsxs)("div",{className:"flex justify-between items-center p-3 bg-yellow-50 rounded-lg border border-yellow-200",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h5",{className:"text-xs font-medium text-yellow-700 uppercase tracking-wide",children:u("duedate")}),(0,sn.jsx)("p",{className:"text-sm text-yellow-600 mt-1",children:"\xc9ch\xe9ance de paiement"})]}),(0,sn.jsxs)("div",{className:"flex items-center text-sm font-medium text-yellow-900",children:[(0,sn.jsx)(oi,{className:"mr-1.5 h-4 w-4 text-yellow-500"}),n.dueDate]})]})]})]}),(0,sn.jsxs)("div",{className:"space-y-4",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Montant / \u91d1\u989d\u4fe1\u606f"}),(0,sn.jsxs)("div",{className:"p-4 bg-green-50 rounded-lg border border-green-200",children:[(0,sn.jsx)("h5",{className:"text-xs font-medium text-green-700 uppercase tracking-wide mb-2",children:u("amount")}),(0,sn.jsxs)("div",{className:"flex items-center text-2xl font-bold text-green-900",children:[(0,sn.jsx)(gi,{className:"mr-2 h-6 w-6 text-green-600"}),l(m)]}),(0,sn.jsx)("p",{className:"text-sm text-green-600 mt-1",children:"Montant TTC"})]})]})]})}),(0,sn.jsxs)("div",{className:"mb-8",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:u("items")}),(0,sn.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:(0,sn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,sn.jsx)("thead",{className:"bg-gray-50",children:(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("th",{scope:"col",className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/5",children:u("description")}),(0,sn.jsx)("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:u("qty")}),(0,sn.jsx)("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:u("price")}),(0,sn.jsx)("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Taux TVA"}),(0,sn.jsx)("th",{scope:"col",className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:u("total")})]})}),(0,sn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:n.items.map((e,t)=>(0,sn.jsx)(i.Fragment,{children:(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900",children:e.description||(0,sn.jsx)("span",{className:"text-gray-400 italic",children:u("descriptionplaceholder")})}),(0,sn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 text-right",children:e.quantity}),(0,sn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 text-right",children:y(e.unitPrice)}),(0,sn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500 text-right",children:x(e.taxRate)}),(0,sn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:y(o(e))})]})},e.id||t))}),(0,sn.jsxs)("tfoot",{className:"bg-gray-50",children:[(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{colSpan:"4",className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:u("subtotal")}),(0,sn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:y(h)})]}),(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{colSpan:"4",className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:"Montant TVA :"}),(0,sn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:y(p)})]}),(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{colSpan:"4",className:"px-4 py-3 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:u("total")}),(0,sn.jsx)("td",{className:"px-4 py-3 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:y(m)})]})]})]})})]}),n.notes&&(0,sn.jsxs)("div",{className:"mb-6",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:u("notes")}),(0,sn.jsx)("div",{className:"text-sm text-gray-700 bg-gray-50 p-4 rounded-lg",children:n.notes})]}),d&&(d.startsWith("french-")||"france-template"===d)&&(0,sn.jsxs)("div",{className:"mb-8 border-t pt-6",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Conditions L\xe9gales / Legal Terms"}),(0,sn.jsxs)("div",{className:"space-y-3 text-xs text-gray-600 leading-relaxed",children:[(0,sn.jsxs)("div",{className:"bg-blue-50 p-3 rounded border-l-4 border-blue-400",children:[(0,sn.jsx)("p",{className:"font-medium text-blue-800 mb-1",children:"Identit\xe9 du prestataire de services"}),(0,sn.jsxs)("p",{className:"text-blue-700",children:["Cette facture est \xe9mise par ",n.sellerCompanyName||(null===s||void 0===s?void 0:s.companyName)||"[Nom de l'entreprise]",", soci\xe9t\xe9 immatricul\xe9e au RCS de ",n.sellerRcsNumber||(null===s||void 0===s?void 0:s.rcsNumber)||"[Ville] sous le num\xe9ro [Num\xe9ro RCS]",", SIREN : ",n.sellerSiren||(null===s||void 0===s?void 0:s.sirenNumber)||"[SIREN]",", SIRET : ",n.sellerSiret||(null===s||void 0===s?void 0:s.siretNumber)||"[SIRET]","."]})]}),(0,sn.jsxs)("div",{className:"bg-green-50 p-3 rounded border-l-4 border-green-400",children:[(0,sn.jsx)("p",{className:"font-medium text-green-800 mb-1",children:"D\xe9claration de conformit\xe9"}),(0,sn.jsx)("p",{className:"text-green-700",children:"Cette facture est \xe9tablie conform\xe9ment aux dispositions du Code de commerce fran\xe7ais, du Code g\xe9n\xe9ral des imp\xf4ts et de la r\xe9glementation europ\xe9enne en mati\xe8re de facturation \xe9lectronique. Elle respecte les exigences l\xe9gales fran\xe7aises en vigueur."})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,sn.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"Garantie des vices cach\xe9s (Article 1641 du Code Civil)"}),(0,sn.jsx)("p",{children:"Le vendeur est tenu de la garantie \xe0 raison des d\xe9fauts cach\xe9s de la chose vendue qui la rendent impropre \xe0 l'usage auquel on la destine, ou qui diminuent tellement cet usage que l'acheteur ne l'aurait pas acquise, ou n'en aurait donn\xe9 qu'un moindre prix, s'il les avait connus."})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,sn.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"Conditions de paiement"}),(0,sn.jsx)("p",{children:"Paiement \xe0 30 jours net. En cas de retard de paiement, des p\xe9nalit\xe9s de retard sont exigibles le jour suivant la date de r\xe8glement figurant sur la facture. Le taux d'int\xe9r\xeat de ces p\xe9nalit\xe9s de retard est de trois fois le taux d'int\xe9r\xeat l\xe9gal. Ces p\xe9nalit\xe9s sont exigibles sans qu'un rappel soit n\xe9cessaire."})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,sn.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"Clause de r\xe9serve de propri\xe9t\xe9"}),(0,sn.jsx)("p",{children:"Nous nous r\xe9servons la propri\xe9t\xe9 des biens vendus jusqu'au paiement int\xe9gral du prix, en principal et accessoires. En cas de d\xe9faut de paiement, nous pourrons revendiquer ces biens."})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,sn.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"R\xe8glement des diff\xe9rends"}),(0,sn.jsx)("p",{children:"Tout litige relatif \xe0 l'interpr\xe9tation et \xe0 l'ex\xe9cution des pr\xe9sentes conditions de vente est soumis au droit fran\xe7ais. \xc0 d\xe9faut de r\xe9solution amiable, le litige sera port\xe9 devant les tribunaux comp\xe9tents de Paris."})]}),d&&(d.startsWith("french-")||"france-template"===d)&&(0,sn.jsxs)("div",{className:"bg-blue-50 p-3 rounded border-l-4 border-blue-400",children:[(0,sn.jsx)("p",{className:"font-medium text-blue-800 mb-1",children:"Information TVA"}),(0,sn.jsx)("p",{className:"text-blue-700",children:"french-exempt"===d||n.tvaExempt?"TVA non applicable \u2013 Art. 293 B du CGI (R\xe9gime de la franchise en base de TVA). Cette facture est \xe9mise dans le cadre du r\xe9gime de franchise en base de TVA pr\xe9vu aux articles 293 B \xe0 293 E du Code g\xe9n\xe9ral des imp\xf4ts.":"french-autoliquidation"===d||n.autoLiquidation?"Auto-liquidation de la TVA - TVA due par le preneur selon l'article 283-1 du CGI. Le destinataire de cette facture doit acquitter la TVA selon les modalit\xe9s d'auto-liquidation pr\xe9vues par la r\xe9glementation en vigueur.":"TVA applicable selon les taux en vigueur (20 %) \u2013 Art. 256 du CGI. Num\xe9ro de TVA intracommunautaire : ".concat(n.sellerVATNumber||(null===s||void 0===s?void 0:s.vatNumber)||"FR12345678901",". Cette facture est soumise aux dispositions du r\xe9gime normal de TVA.")})]})]})]}),(0,sn.jsxs)("div",{className:"mb-8 border-t pt-6",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Informations de Paiement / Payment Information"}),(0,sn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:(0,sn.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,sn.jsx)("h5",{className:"font-medium text-gray-800 mb-3",children:"Modalit\xe9s de Paiement"}),(0,sn.jsxs)("div",{className:"space-y-2 text-sm text-gray-700",children:[(0,sn.jsxs)("div",{className:"flex justify-between",children:[(0,sn.jsx)("span",{className:"font-medium",children:"Mode de paiement:"}),(0,sn.jsx)("span",{children:n.paymentMethod||"Virement bancaire"})]}),(0,sn.jsxs)("div",{className:"flex justify-between",children:[(0,sn.jsx)("span",{className:"font-medium",children:"Escompte:"}),(0,sn.jsx)("span",{children:"Aucun escompte pour paiement anticip\xe9"})]}),(0,sn.jsx)("div",{className:"bg-yellow-50 p-2 rounded border-l-2 border-yellow-400 mt-3",children:(0,sn.jsxs)("p",{className:"text-xs text-yellow-800",children:[(0,sn.jsx)("strong",{children:"P\xe9nalit\xe9s de retard:"})," 3 fois le taux d'int\xe9r\xeat l\xe9gal + indemnit\xe9 forfaitaire de 40\u20ac (Art. L441-6 du Code de commerce)"]})})]})]})})]}),")}",(0,sn.jsx)("div",{className:"flex justify-between items-center",children:(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("span",{className:"text-sm font-medium text-gray-500",children:[u("status"),":"]}),(0,sn.jsx)("span",{className:"ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:u("statusOptions.".concat(n.status))})]})})]})]})},X4=e=>{let{field:t,value:n,onChange:r}=e;const i=e=>{const t="checkbox"===e.target.type?e.target.checked:e.target.value;r(t)},s=()=>{switch(t.valueType||t.fieldType){case"number":return(0,sn.jsx)("input",{type:"number",id:t.id,value:n||"",onChange:i,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:t.placeholder,required:t.isRequired});case"date":return(0,sn.jsx)("input",{type:"date",id:t.id,value:n||"",onChange:i,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:t.isRequired});case"select":const e=t.options?JSON.parse(t.options):[];return(0,sn.jsxs)("select",{id:t.id,value:n||"",onChange:i,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",required:t.isRequired,children:[(0,sn.jsx)("option",{value:"",children:"\u8bf7\u9009\u62e9..."}),e.map((e,t)=>(0,sn.jsx)("option",{value:e.value||e,children:e.label||e},t))]});case"checkbox":return(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("input",{type:"checkbox",id:t.id,checked:n||!1,onChange:i,className:"h-4 w-4 text-primary-600 focus:ring-primary-500 border-gray-300 rounded"}),(0,sn.jsx)("label",{htmlFor:t.id,className:"ml-2 block text-sm text-gray-900",children:t.fieldLabel||t.label})]});case"textarea":return(0,sn.jsx)("textarea",{id:t.id,value:n||"",onChange:i,rows:3,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:t.placeholder,required:t.isRequired});default:return(0,sn.jsx)("input",{type:"text",id:t.id,value:n||"",onChange:i,className:"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-primary-500 focus:border-primary-500 sm:text-sm",placeholder:t.placeholder,required:t.isRequired})}};return"checkbox"===t.valueType||"checkbox"===t.fieldType?(0,sn.jsx)("div",{className:"form-group",children:s()}):(0,sn.jsxs)("div",{className:"form-group",children:[(0,sn.jsxs)("label",{htmlFor:t.id,className:"block text-sm font-medium text-gray-700",children:[t.fieldLabel||t.label,t.isRequired&&(0,sn.jsx)("span",{className:"text-red-500 ml-1",children:"*"})]}),s()]})},J4=e=>{let{feature:t,children:n,fallback:r,showUpgrade:i=!0,upgradeText:s="\u5347\u7ea7\u89e3\u9501",onUpgrade:a}=e;const{canUseFeature:o,getUpgradeRecommendation:l,getFeatureHint:c}=H4();if(o(t))return n;if(r)return r;const d=l(t),u=c(t);return(0,sn.jsx)("div",{className:"feature-gate",children:(0,sn.jsxs)("div",{className:"feature-gate-content",children:[(0,sn.jsx)("div",{className:"feature-gate-icon",children:(0,sn.jsx)(Di,{size:24})}),(0,sn.jsxs)("div",{className:"feature-gate-text",children:[(0,sn.jsx)("h3",{children:"\u9700\u8981\u5347\u7ea7\u8ba2\u9605"}),u&&(0,sn.jsx)("p",{children:u})]}),i&&(0,sn.jsxs)("button",{className:"feature-gate-upgrade",onClick:()=>null===a||void 0===a?void 0:a(d),children:[s,(0,sn.jsx)(ni,{size:16})]})]})})},$4=()=>{const{id:e}=ne(),t=ee(),n=Q(),{user:r,api:s}=mn(),{t:a}=nn(),o=Boolean(e),{canUseFeature:l,isLimitReached:c,getRemainingQuota:d,hasActiveSubscription:u}=H4(),h=new URLSearchParams(n.search).get("clientId"),[p,m]=(0,i.useState)(!1),[f,g]=(0,i.useState)(null),[v,y]=(0,i.useState)([]),[x,b]=(0,i.useState)("intl"),[w,j]=(0,i.useState)([]),[N,k]=(0,i.useState)([]),[A,S]=(0,i.useState)({clientId:h||"",issueDate:(new Date).toISOString().split("T")[0],dueDate:new Date(Date.now()+2592e6).toISOString().split("T")[0],notes:"",status:"draft",items:[{id:Date.now(),description:"",quantity:1,unitPrice:0,taxRate:0,customFieldValues:{}}]}),[_,C]=(0,i.useState)({});(0,i.useEffect)(()=>{(async()=>{try{const t=await s.get("/clients");y(t.data);const n=await s.get("/custom-fields?target=invoice");j(n.data);const r=await s.get("/custom-fields?target=item");if(k(r.data),o){const t=(await s.get("/invoices/".concat(e))).data,n={};if(t.InvoiceItems&&Array.isArray(t.InvoiceItems))for(const e of t.InvoiceItems)e.CustomFieldValues&&Array.isArray(e.CustomFieldValues)&&(n[e.id]={},e.CustomFieldValues.forEach(t=>{n[e.id][t.customFieldId]=t.value}));if(S({clientId:t.clientId,issueDate:new Date(t.issueDate).toISOString().split("T")[0],dueDate:new Date(t.dueDate).toISOString().split("T")[0],notes:t.notes||"",status:t.status,items:t.InvoiceItems&&Array.isArray(t.InvoiceItems)?t.InvoiceItems.map(e=>({id:e.id,description:e.description,quantity:e.quantity,unitPrice:e.unitPrice,taxRate:e.taxRate,customFieldValues:n[e.id]||{}})):[]}),b(t.invoiceMode||"intl"),t.CustomFieldValues&&Array.isArray(t.CustomFieldValues)){const e={};t.CustomFieldValues.forEach(t=>{e[t.customFieldId]=t.value}),C(e)}}}catch(t){console.error("Error initializing data:",t),g("Failed to initialize data")}})()},[e,o,s]);const E=e=>{const{name:t,value:n}=e.target;S((0,Ne.A)((0,Ne.A)({},A),{},{[t]:n}))},P=(e,t,n)=>{const r=[...A.items];r[e]=(0,Ne.A)((0,Ne.A)({},r[e]),{},{[t]:"description"===t?n:Number(n)}),S((0,Ne.A)((0,Ne.A)({},A),{},{items:r}))},T=e=>{const t=e.quantity*e.unitPrice;return t+t*(e.taxRate/100)},M=()=>{const e=A.items.reduce((e,t)=>e+t.quantity*t.unitPrice,0),t=A.items.reduce((e,t)=>e+t.quantity*t.unitPrice*(t.taxRate/100),0);return{subtotal:e,taxAmount:t,total:e+t}},D=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:(null===r||void 0===r?void 0:r.currency)||"USD"}).format(e),{subtotal:O,taxAmount:R,total:I}=M();return(0,sn.jsxs)("div",{children:[(0,sn.jsx)("div",{className:"mb-6",children:(0,sn.jsxs)("button",{type:"button",onClick:()=>t("/".concat(a("routes:invoices"))),className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700",children:[(0,sn.jsx)(ti,{className:"mr-2 h-4 w-4"}),a("backtoinvoices")]})}),(0,sn.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden",children:[(0,sn.jsx)("div",{className:"px-6 py-5 border-b border-gray-200",children:(0,sn.jsx)("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:a(o?"title.edit":"title.create")})}),(0,sn.jsxs)("form",{onSubmit:async n=>{if(n.preventDefault(),A.clientId)if(A.items.some(e=>!e.description))g(a("validation.itemdescription"));else try{m(!0),g(null);const{subtotal:n,taxAmount:r,total:i}=M(),l={clientId:A.clientId,issueDate:A.issueDate,dueDate:A.dueDate,notes:A.notes,status:A.status,invoiceMode:x,subtotal:n,taxAmount:r,total:i,customFieldValues:_,items:A.items.map(e=>({description:e.description,quantity:e.quantity,unitPrice:e.unitPrice,taxRate:e.taxRate,taxAmount:e.quantity*e.unitPrice*(e.taxRate/100),total:T(e),customFieldValues:e.customFieldValues||{}}))};o?await s.put("/invoices/".concat(e),l):await s.post("/invoices",l),t("/".concat(a("routes:invoices")))}catch(r){g(a("errors.".concat(o?"updateinvoice":"createinvoice"))),console.error(a("errors.".concat(o?"updateinvoice":"createinvoice")),r)}finally{m(!1)}else g(a("validation.selectclient"))},children:[(0,sn.jsxs)("div",{className:"px-6 py-8",children:[(0,sn.jsx)("div",{className:"mb-8",children:(0,sn.jsx)(Y4,{formData:A,clients:v,user:r,calculateTotals:M,calculateItemTotal:T,formatCurrency:D,invoiceMode:x,customFieldValues:_})}),f&&(0,sn.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:(0,sn.jsx)("div",{className:"flex",children:(0,sn.jsx)("div",{className:"ml-3",children:(0,sn.jsx)("p",{className:"text-sm text-red-700",children:f})})})}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"clientId",className:"block text-sm font-medium text-gray-700",children:a("client")}),(0,sn.jsxs)("select",{id:"clientId",name:"clientId",className:"mt-1 block w-full form-input",value:A.clientId,onChange:E,required:!0,children:[(0,sn.jsx)("option",{value:"",children:a("selectclient")}),v.map(e=>(0,sn.jsx)("option",{value:e.id,children:e.company?"".concat(e.company," (").concat(e.name,")"):e.name},e.id))]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"status",className:"block text-sm font-medium text-gray-700",children:a("status")}),(0,sn.jsxs)("select",{id:"status",name:"status",className:"mt-1 block w-full form-input",value:A.status,onChange:E,children:[(0,sn.jsx)("option",{value:"draft",children:a("statusOptions.draft")}),(0,sn.jsx)("option",{value:"sent",children:a("statusOptions.sent")}),(0,sn.jsx)("option",{value:"paid",children:a("statusOptions.paid")}),(0,sn.jsx)("option",{value:"overdue",children:a("statusOptions.overdue")}),(0,sn.jsx)("option",{value:"cancelled",children:a("statusOptions.cancelled")})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"issueDate",className:"block text-sm font-medium text-gray-700",children:a("issuedate")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(oi,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",{type:"date",id:"issueDate",name:"issueDate",className:"form-input-with-icon w-full",value:A.issueDate,onChange:E,required:!0})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{htmlFor:"dueDate",className:"block text-sm font-medium text-gray-700",children:a("duedate")}),(0,sn.jsxs)("div",{className:"mt-1 relative rounded-md shadow-sm",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(oi,{className:"h-5 w-5 text-gray-400"})}),(0,sn.jsx)("input",{type:"date",id:"dueDate",name:"dueDate",className:"form-input-with-icon w-full",value:A.dueDate,onChange:E,required:!0})]})]})]}),(0,sn.jsxs)("div",{className:"mt-6",children:[(0,sn.jsx)("label",{htmlFor:"notes",className:"block text-sm font-medium text-gray-700",children:a("notes")}),(0,sn.jsx)("textarea",{id:"notes",name:"notes",rows:3,className:"mt-1 block w-full form-input",value:A.notes,onChange:E,placeholder:a("notesplaceholder")})]}),w.length>0&&(0,sn.jsxs)("div",{className:"mt-6",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:a("customfields")}),(0,sn.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:w.map(e=>(0,sn.jsx)(X4,{field:e,value:_[e.id]||"",onChange:t=>((e,t)=>{C(n=>(0,Ne.A)((0,Ne.A)({},n),{},{[e]:t}))})(e.id,t)},e.id))})]}),(0,sn.jsxs)("div",{className:"mt-8",children:[(0,sn.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:a("items")}),(0,sn.jsxs)("button",{type:"button",className:"inline-flex items-center px-3 py-1 border border-transparent text-xs font-medium rounded text-primary-700 bg-primary-100 hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:()=>{S((0,Ne.A)((0,Ne.A)({},A),{},{items:[...A.items,{id:Date.now(),description:"",quantity:1,unitPrice:0,taxRate:0,customFieldValues:{}}]}))},children:[(0,sn.jsx)(qi,{className:"mr-1 h-4 w-4"}),a("additem")]})]}),(0,sn.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:(0,sn.jsx)("div",{className:"overflow-x-auto",children:(0,sn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,sn.jsx)("thead",{className:"bg-gray-50",children:(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider w-2/5",children:a("description")}),(0,sn.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("qty")}),(0,sn.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("price")}),(0,sn.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("taxpercent")}),(0,sn.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:a("total")}),(0,sn.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider w-16",children:a("actions")})]})}),(0,sn.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:A.items.map((e,t)=>(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,sn.jsx)("input",{type:"text",className:"form-input w-full",value:e.description,onChange:e=>P(t,"description",e.target.value),placeholder:a("descriptionplaceholder"),required:!0})}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,sn.jsx)("input",{type:"number",min:"1",step:"1",className:"form-input w-full text-right",value:e.quantity,onChange:e=>P(t,"quantity",e.target.value),required:!0})}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,sn.jsxs)("div",{className:"relative",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)(gi,{className:"h-4 w-4 text-gray-400"})}),(0,sn.jsx)("input",{type:"number",min:"0",step:"0.01",className:"form-input pl-7 w-full text-right",value:e.unitPrice,onChange:e=>P(t,"unitPrice",e.target.value),required:!0})]})}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,sn.jsx)("input",{type:"number",min:"0",max:"100",step:"0.1",className:"form-input w-full text-right",value:e.taxRate,onChange:e=>P(t,"taxRate",e.target.value)})}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:D(T(e))}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,sn.jsx)("button",{type:"button",className:"text-red-600 hover:text-red-900 disabled:opacity-50 disabled:cursor-not-allowed",onClick:()=>(e=>{if(A.items.length<=1)return;const t=[...A.items];t.splice(e,1),S((0,Ne.A)((0,Ne.A)({},A),{},{items:t}))})(t),disabled:A.items.length<=1,children:(0,sn.jsx)(ns,{className:"h-5 w-5"})})})]},e.id),N.length>0&&(0,sn.jsx)("tr",{children:(0,sn.jsx)("td",{colSpan:"6",className:"px-6 py-4 bg-gray-50",children:(0,sn.jsx)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:N.map(n=>(0,sn.jsx)(X4,{field:n,value:e.customFieldValues[n.id]||"",onChange:e=>((e,t,n)=>{const r=[...A.items];r[e].customFieldValues||(r[e].customFieldValues={}),r[e].customFieldValues[t]=n,S((0,Ne.A)((0,Ne.A)({},A),{},{items:r}))})(t,n.id,e)},n.id))})})},"custom-fields-".concat(e.id))]}))}),(0,sn.jsxs)("tfoot",{className:"bg-gray-50",children:[(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:a("subtotal")}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:D(O)}),(0,sn.jsx)("td",{})]}),(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:a("tax")}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:D(R)}),(0,sn.jsx)("td",{})]}),(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:a("total")}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:D(I)}),(0,sn.jsx)("td",{})]})]})]})})})]})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3",children:[(0,sn.jsx)("button",{type:"button",className:"btn btn-secondary",onClick:()=>t("/".concat(a("routes:invoices"))),children:a("cancel")}),(0,sn.jsx)(J4,{feature:"invoices",fallback:(0,sn.jsxs)("button",{type:"button",className:"btn btn-primary opacity-50 cursor-not-allowed",disabled:!0,children:[(0,sn.jsx)(Yi,{className:"mr-2 h-4 w-4"}),"\u9700\u8981\u5347\u7ea7\u8ba2\u9605"]}),children:(0,sn.jsxs)("button",{type:"submit",className:"btn btn-primary flex items-center",disabled:p,children:[(0,sn.jsx)(Yi,{className:"mr-2 h-4 w-4"}),a(p?"saving":o?"updateinvoice":"createinvoice")]})})]})]})]})]})},Q4=e=>{let{isOpen:t,onClose:n,clients:r=[],onSelect:s,initialSelectedId:a,onRefresh:o}=e;const[l,c]=(0,i.useState)(""),[d,u]=(0,i.useState)(10),[h,p]=(0,i.useState)(1);(0,i.useEffect)(()=>{if(t&&(c(""),p(1),"function"===typeof o))try{o()}catch(Ae){}},[t,o]);const m=(0,i.useMemo)(()=>{const e=l.trim().toLowerCase();return e?r.filter(t=>{const n=((null===t||void 0===t?void 0:t.name)||"").toLowerCase(),r=((null===t||void 0===t?void 0:t.company)||"").toLowerCase(),i=((null===t||void 0===t?void 0:t.email)||"").toLowerCase();return n.includes(e)||r.includes(e)||i.includes(e)}):r},[r,l]),f=Math.max(1,Math.ceil(((null===m||void 0===m?void 0:m.length)||0)/d)),g=(h-1)*d,v=m.slice(g,g+d);return t?(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-3xl mx-4",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,sn.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"Choose Client"}),(0,sn.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:(0,sn.jsx)(ls,{className:"h-6 w-6"})})]}),(0,sn.jsxs)("div",{className:"p-6 pt-4 space-y-4",children:[(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsxs)("div",{className:"flex-1 relative",children:[(0,sn.jsx)(Xi,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),(0,sn.jsx)("input",{type:"text",value:l,onChange:e=>c(e.target.value),className:"w-full pl-9 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Search by name, company, or email"})]}),(0,sn.jsxs)("select",{value:d,onChange:e=>{u(Number(e.target.value)),p(1)},className:"px-2 py-2 border border-gray-300 rounded-md focus:outline-none","aria-label":"Page size",children:[(0,sn.jsx)("option",{value:10,children:"10"}),(0,sn.jsx)("option",{value:25,children:"25"}),(0,sn.jsx)("option",{value:50,children:"50"})]}),(0,sn.jsxs)("button",{type:"button",onClick:o,className:"px-3 py-2 text-sm bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-gray-500",title:"Refresh clients",children:[(0,sn.jsx)(Ki,{className:"inline mr-1"})," Refresh"]})]}),(0,sn.jsxs)("div",{className:"border rounded-md overflow-hidden",children:[(0,sn.jsxs)("div",{className:"grid grid-cols-12 bg-gray-50 text-gray-700 text-sm px-4 py-2",children:[(0,sn.jsx)("div",{className:"col-span-5",children:"Name"}),(0,sn.jsx)("div",{className:"col-span-4",children:"Company"}),(0,sn.jsx)("div",{className:"col-span-3",children:"Email"})]}),(0,sn.jsx)("div",{className:"max-h-80 overflow-y-auto",children:0===v.length?(0,sn.jsx)("div",{className:"p-4 text-center text-gray-500",children:"No clients found"}):v.map(e=>(0,sn.jsxs)("button",{onClick:()=>(e=>{if(e&&e.id)try{null===s||void 0===s||s(e)}finally{null===n||void 0===n||n()}})(e),className:"w-full grid grid-cols-12 items-center px-4 py-3 text-left hover:bg-blue-50 focus:bg-blue-50 ".concat(a&&String(a)===String(e.id)?"bg-blue-50":""),children:[(0,sn.jsxs)("div",{className:"col-span-5",children:[(0,sn.jsx)("div",{className:"font-medium text-gray-900",children:(null===e||void 0===e?void 0:e.name)||"\u2014"}),(null===e||void 0===e?void 0:e.phone)&&(0,sn.jsx)("div",{className:"text-xs text-gray-500 mt-0.5",children:e.phone})]}),(0,sn.jsx)("div",{className:"col-span-4 text-gray-700",children:(null===e||void 0===e?void 0:e.company)||"\u2014"}),(0,sn.jsx)("div",{className:"col-span-3 text-gray-700 truncate",children:(null===e||void 0===e?void 0:e.email)||"\u2014"})]},e.id))})]}),(0,sn.jsxs)("div",{className:"flex items-center justify-between pt-2",children:[(0,sn.jsxs)("div",{className:"text-sm text-gray-600",children:["Showing ",v.length," of ",m.length," clients"]}),(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsxs)("button",{className:"px-3 py-2 bg-gray-100 rounded-md text-gray-700 hover:bg-gray-200 disabled:opacity-50",onClick:()=>p(e=>Math.max(1,e-1)),disabled:h<=1,children:[(0,sn.jsx)(ui,{className:"inline"})," Prev"]}),(0,sn.jsxs)("span",{className:"text-sm text-gray-700",children:["Page ",h," / ",f]}),(0,sn.jsxs)("button",{className:"px-3 py-2 bg-gray-100 rounded-md text-gray-700 hover:bg-gray-200 disabled:opacity-50",onClick:()=>p(e=>Math.min(f,e+1)),disabled:h>=f,children:["Next ",(0,sn.jsx)(hi,{className:"inline"})]})]})]})]}),(0,sn.jsx)("div",{className:"flex justify-end space-x-3 p-6 border-t",children:(0,sn.jsx)("button",{type:"button",onClick:n,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-md focus:outline-none focus:ring-2 focus:ring-gray-500",children:"Close"})})]})}):null},Z4=e=>{let{invoice:t,formData:n,client:r,user:s,onPrint:a,loading:o=!1,disabled:l=!1}=e;const{t:c}=nn(["invoices","common"]),[d,u]=(0,i.useState)({print:!1});return(0,sn.jsx)(sn.Fragment,{children:(0,sn.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[(0,sn.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:c("invoices:actions.title")}),(0,sn.jsx)("div",{className:"grid grid-cols-1 gap-3",children:(0,sn.jsx)("button",{onClick:a,disabled:l||d.print||o,className:"flex items-center justify-center px-4 py-3 text-sm bg-purple-100 text-purple-700 rounded-md hover:bg-purple-200 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:d.print?"Printing...":"Export"})})]})})},e5={invoice:"Facture",invoiceNumber:"Num\xe9ro de facture",invoiceDate:"Date de facture",dueDate:"Date d'\xe9ch\xe9ance",issueDate:"Date d'\xe9mission",serviceDate:"Date de prestation",invoiceTypes:{standard:"Facture standard",credit:"Note de cr\xe9dit",debit:"Note de d\xe9bit",proforma:"Facture pro forma",advance:"Facture d'acompte",final:"Facture de solde"},from:"\xc9metteur",to:"Destinataire",companyName:"Raison sociale",address:"Adresse",billingAddress:"Adresse de facturation",deliveryAddress:"Adresse de livraison",phone:"T\xe9l\xe9phone",email:"Email",vatNumber:"Num\xe9ro de TVA",sirenNumber:"Num\xe9ro SIREN",siretNumber:"Num\xe9ro SIRET",rcsNumber:"RCS",nafCode:"Code NAF",legalForm:"Forme juridique",registeredCapital:"Capital social",clientName:"Nom du client",clientEmail:"Email du client",clientPhone:"T\xe9l\xe9phone du client",clientAddress:"Adresse du client",description:"Description",quantity:"Quantit\xe9",unitPrice:"Prix unitaire",taxRate:"Taux de TVA",amount:"Montant",total:"Total",subtotal:"Sous-total HT",totalTax:"Total TVA",grandTotal:"Total TTC",totalHT:"Total HT",totalTTC:"Total TTC",tva:"TVA",tvaExempt:"Exon\xe9ration de TVA",tvaExemptClause:"Clause d'exon\xe9ration",autoLiquidation:"Autoliquidation",vatApplicable:"TVA applicable",vatExempt:"TVA non applicable",template:"Mod\xe8le",selectTemplate:"S\xe9lectionner un mod\xe8le",frenchTemplate:"Mod\xe8le fran\xe7ais",standardVAT:"TVA standard",exemptVAT:"TVA exon\xe9r\xe9e",autoLiquidationVAT:"Autoliquidation TVA",preview:"Aper\xe7u",download:"T\xe9l\xe9charger",print:"Imprimer",send:"Envoyer",save:"Enregistrer",create:"Cr\xe9er",edit:"Modifier",delete:"Supprimer",cancel:"Annuler",sendEmail:"Envoyer par email",emailSubject:"Objet de l'email",emailMessage:"Message de l'email",emailContent:"Contenu de l'email",sendingMethod:"M\xe9thode d'envoi",draft:"Brouillon",sent:"Envoy\xe9e",paid:"Pay\xe9e",overdue:"En retard",cancelled:"Annul\xe9e",required:"Champ obligatoire",invalidEmail:"Email invalide",invalidNumber:"Nombre invalide",itemsRequired:"Au moins un article est requis",notes:"Notes",legalTerms:"Conditions l\xe9gales",hiddenDefectsWarranty:"Garantie des vices cach\xe9s",paymentConditions:"Conditions de paiement",propertyReservation:"R\xe9serve de propri\xe9t\xe9",disputeResolution:"R\xe8glement des litiges",vatInformation:"Information TVA",bankingDetails:"Coordonn\xe9es bancaires",iban:"IBAN",bic:"BIC/SWIFT",bank:"Banque",accountHolder:"Titulaire du compte",paymentDue:"\xc9ch\xe9ance de paiement",paymentMethod:"Mode de paiement",earlyPaymentDiscount:"Escompte pour paiement anticip\xe9",latePenalties:"P\xe9nalit\xe9s de retard",recoveryFee:"Indemnit\xe9 forfaitaire pour frais de recouvrement",yes:"Oui",no:"Non",none:"Aucun",optional:"Optionnel",loading:"Chargement...",error:"Erreur",success:"Succ\xe8s",city:"Ville",postalCode:"Code postal",country:"Pays",sameAsBilling:"Identique \xe0 l'adresse de facturation",unit:"Unit\xe9",hours:"Heures",days:"Jours",pieces:"Pi\xe8ces",currency:"Devise",euro:"Euro",dateFormat:"jj/mm/aaaa",defaultEmailSubject:"Facture #{invoiceNumber}",defaultEmailMessage:"Bonjour,\n\nVeuillez trouver ci-joint votre facture.\n\nCordialement,",invoiceCreated:"Facture cr\xe9\xe9e avec succ\xe8s",invoiceUpdated:"Facture mise \xe0 jour avec succ\xe8s",invoiceSent:"Facture envoy\xe9e avec succ\xe8s",invoiceDeleted:"Facture supprim\xe9e avec succ\xe8s",emailSent:"Email envoy\xe9 avec succ\xe8s",pdfGenerated:"PDF g\xe9n\xe9r\xe9 avec succ\xe8s",createError:"Erreur lors de la cr\xe9ation de la facture",updateError:"Erreur lors de la mise \xe0 jour de la facture",sendError:"Erreur lors de l'envoi de la facture",deleteError:"Erreur lors de la suppression de la facture",emailError:"Erreur lors de l'envoi de l'email",pdfError:"Erreur lors de la g\xe9n\xe9ration du PDF",templateHint:"S\xe9lectionnez un mod\xe8le pour voir les changements dans l'aper\xe7u",invoiceTypeHint:"Champ obligatoire pour les factures fran\xe7aises",serviceDateHint:"Date de prestation de service (obligatoire en France)",frenchCompliance:"Conformit\xe9 fran\xe7aise",complianceAdded:"Exigences de conformit\xe9 fran\xe7aise ajout\xe9es",vatStatus:{standard:"Statut TVA: TVA applicable selon l'article 256 du Code g\xe9n\xe9ral des imp\xf4ts. Num\xe9ro de TVA intracommunautaire: {vatNumber}",exempt:"Statut TVA: TVA Exon\xe9r\xe9e selon l'article 262 ter I du Code g\xe9n\xe9ral des imp\xf4ts (CGI) - Livraisons intracommunautaires de biens",autoLiquidation:"Statut TVA: Autoliquidation de la TVA par le preneur selon l'article 283-1 du Code g\xe9n\xe9ral des imp\xf4ts (CGI) - Prestations de services B to B"}},t5=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";const n=e.split(".");let r=e5;for(const i of n){if(!r||"object"!==typeof r||!(i in r))return t||e;r=r[i]}return r||t||e},n5=i.memo(e=>{var t,n,r,s,a,o,l,c,d,u,h,p,m,f,g,v;let{formData:y,client:x,user:b,selectedTemplate:w,loading:j=!1}=e;y.deliveryAddress||y.deliveryCity||y.deliveryPostalCode||y.deliveryCountry,null!==x&&void 0!==x&&x.deliveryAddress||null!==x&&void 0!==x&&x.deliveryCity||null!==x&&void 0!==x&&x.deliveryPostalCode||null!==x&&void 0!==x&&x.deliveryCountry,null===x||void 0===x||x.sameAsAddress,null!==x&&void 0!==x&&x.address||null!==x&&void 0!==x&&x.city||null!==x&&void 0!==x&&x.postalCode||null!==x&&void 0!==x&&x.country;const{t:N,i18n:k}=nn(["invoices","common"]),{getCompanySettings:A}=kn(),{userProfile:S}=jn();(0,i.useEffect)(()=>{},[w,y]);const _=e=>{const t="fr"===k.language?"fr-FR":"en-US",n=(null===y||void 0===y?void 0:y.currency)||(null===b||void 0===b?void 0:b.currency)||"EUR";return new Intl.NumberFormat(t,{style:"currency",currency:n,minimumFractionDigits:2,maximumFractionDigits:2}).format(e||0)},C=e=>{if(!e)return"";return new Date(e).toISOString().split("T")[0]},E=e=>{const t=(e.quantity||0)*(e.unitPrice||0);if(y.tvaExempt||y.autoLiquidation)return t;return t+t*(("object"===typeof e.taxRate?0:e.taxRate||0)/100)},P=(0,i.useMemo)(()=>{const e=y.items.reduce((e,t)=>e+(t.quantity||0)*(t.unitPrice||0),0);let t=0;y.tvaExempt||y.autoLiquidation||(t=y.items.reduce((e,t)=>e+(t.quantity||0)*(t.unitPrice||0)*(("object"===typeof t.taxRate?0:t.taxRate||0)/100),0));return{subtotal:e,totalTax:t,grandTotal:e+t}},[y.items,y.tvaExempt,y.autoLiquidation]),T=A(),M=(null===b||void 0===b||null===(t=b.Company)||void 0===t||null===(n=t.bankInfo)||void 0===n?void 0:n.iban)||(null===S||void 0===S||null===(r=S.Company)||void 0===r||null===(s=r.bankInfo)||void 0===s?void 0:s.iban)||(null===b||void 0===b?void 0:b.bankIBAN)||(null===S||void 0===S?void 0:S.bankIBAN)||(null===y||void 0===y?void 0:y.bankIBAN),D=(null===b||void 0===b||null===(a=b.Company)||void 0===a||null===(o=a.bankInfo)||void 0===o?void 0:o.bic)||(null===S||void 0===S||null===(l=S.Company)||void 0===l||null===(c=l.bankInfo)||void 0===c?void 0:c.bic)||(null===b||void 0===b?void 0:b.bankBIC)||(null===S||void 0===S?void 0:S.bankBIC)||(null===y||void 0===y?void 0:y.bankBIC),O=(null===b||void 0===b||null===(d=b.Company)||void 0===d||null===(u=d.bankInfo)||void 0===u?void 0:u.bankName)||(null===S||void 0===S||null===(h=S.Company)||void 0===h||null===(p=h.bankInfo)||void 0===p?void 0:p.bankName)||(null===b||void 0===b?void 0:b.bankName)||(null===S||void 0===S?void 0:S.bankName)||(null===y||void 0===y?void 0:y.bankName),R=(null===b||void 0===b||null===(m=b.Company)||void 0===m||null===(f=m.bankInfo)||void 0===f?void 0:f.accountHolder)||(null===S||void 0===S||null===(g=S.Company)||void 0===g||null===(v=g.bankInfo)||void 0===v?void 0:v.accountHolder)||(null===b||void 0===b?void 0:b.accountHolder)||(null===S||void 0===S?void 0:S.accountHolder)||(null===y||void 0===y?void 0:y.accountHolder)||(null===T||void 0===T?void 0:T.name)||(null===b||void 0===b?void 0:b.companyName)||"",I=!!(M||D||O||R);return(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:(0,sn.jsxs)("div",{className:"p-6",children:[(0,sn.jsx)("div",{className:"mb-6",children:(0,sn.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:t5("preview","Aper\xe7u")})}),(0,sn.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-4 sm:p-6 lg:p-8 min-h-80 sm:min-h-96 shadow-sm",children:[(0,sn.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start mb-8",children:[(0,sn.jsxs)("div",{className:"mb-4 sm:mb-0",children:[(0,sn.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:t5("invoice")}),(0,sn.jsxs)("p",{className:"text-gray-600 text-sm sm:text-base",children:["#",(()=>{if(null!==y&&void 0!==y&&y.invoiceNumber){if(w&&(w.startsWith("french-")||"france-template"===w)&&String(y.invoiceNumber).startsWith("INV-")){const e=String(y.invoiceNumber).split("-");if(e.length>=3){const t=(new Date).getFullYear(),n=String(e[2]).padStart(6,"0");return"FR-".concat(t,"-").concat(n)}}return y.invoiceNumber}return"INV-XXXX"})()]}),w&&(w.startsWith("french-")||"france-template"===w)&&y.invoiceType&&(0,sn.jsxs)("div",{className:"mt-2 px-3 py-2 text-sm",children:[(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsx)("span",{className:"text-gray-800 font-bold",children:"\ud83c\udd95 Invoice Type:"}),(0,sn.jsx)("span",{className:"text-gray-700 font-semibold",children:t5("invoiceTypes.".concat(y.invoiceType),y.invoiceType)})]}),(0,sn.jsxs)("div",{className:"text-xs text-gray-600 mt-1",children:["\u2705 ",t5("frenchCompliance")," - ",t5("complianceAdded")]})]}),w&&(0,sn.jsxs)("div",{className:"mt-2 px-2 py-1 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:[t5("template"),": ",w.startsWith("french-")||"france-template"===w?"".concat(t5("frenchTemplate")," - ").concat("standard"===w.replace("french-","")?t5("standardVAT"):"exempt"===w.replace("french-","")?t5("exemptVAT"):t5("france-template"===w?"frenchTemplate":"autoLiquidationVAT")):w]})]}),(0,sn.jsxs)("div",{className:"text-left sm:text-right",children:[(0,sn.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:[t5("invoiceDate"),": ",C(y.issueDate)]}),y.dueDate&&(0,sn.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:[t5("dueDate"),": ",C(y.dueDate)]}),(y.serviceDate||y.deliveryDate)&&(0,sn.jsxs)("p",{className:"text-sm text-gray-600",children:[t5("deliveryDate"),": ",C(y.serviceDate||y.deliveryDate)]})]})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-2 gap-8 mb-8",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:t5("from")}),(0,sn.jsx)("div",{className:"text-sm text-gray-600",children:(()=>{const e=A();let t=null;return e&&(e.name||e.vatNumber)&&(t={sellerCompanyName:e.name||"",sellerAddress:[e.address,e.city,e.postalCode].filter(Boolean).join(" ")||"",sellerVATNumber:e.vatNumber||"",sellerSIREN:e.siren||"",sellerSIRET:e.siret||"",sellerPhone:e.phone||"",sellerEmail:e.email||"",sellerLegalForm:e.legalForm||"",sellerRegisteredCapital:e.registeredCapital||"",sellerRcsNumber:e.rcsNumber||"",sellerNafCode:e.nafCode||""}),!t&&b&&(t={sellerCompanyName:b.companyName||"",sellerAddress:b.address||"",sellerVATNumber:b.vatNumber||"",sellerSIREN:b.siren||"",sellerSIRET:b.siretNumber||"",sellerPhone:b.phone||"",sellerEmail:b.email||"",sellerLegalForm:b.legalForm||"",sellerRegisteredCapital:b.registeredCapital||"",sellerRcsNumber:b.rcsNumber||"",sellerNafCode:b.nafCode||""}),t&&(t.sellerCompanyName||t.sellerVATNumber)?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("p",{className:"font-medium",children:t.sellerCompanyName||"Company name not set"}),t.sellerAddress&&(0,sn.jsx)("p",{children:t.sellerAddress}),t.sellerPhone&&(0,sn.jsxs)("p",{children:["Phone: ",t.sellerPhone]}),t.sellerEmail&&(0,sn.jsxs)("p",{children:["Email: ",t.sellerEmail]}),t.sellerVATNumber&&(0,sn.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[t5("vatNumber"),": ",t.sellerVATNumber]}),t.sellerSIREN&&(0,sn.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[t5("sirenNumber"),": ",t.sellerSIREN]}),t.sellerSIRET&&(0,sn.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[t5("siretNumber"),": ",t.sellerSIRET]}),t.sellerPhone&&(0,sn.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[t5("phone"),": ",t.sellerPhone]}),t.sellerEmail&&(0,sn.jsxs)("p",{className:"mt-1 text-xs text-gray-500",children:[t5("email"),": ",t.sellerEmail]}),t.sellerLegalForm&&(0,sn.jsxs)("p",{children:["Forme: ",t.sellerLegalForm]}),t.sellerRegisteredCapital&&(0,sn.jsxs)("p",{children:["Capital: ",t.sellerRegisteredCapital," \u20ac"]}),t.sellerNafCode&&(0,sn.jsxs)("p",{children:["NAF: ",t.sellerNafCode]}),t.sellerRcsNumber&&(0,sn.jsxs)("p",{children:["RCS: ",t.sellerRcsNumber]})]}):(0,sn.jsxs)("p",{className:"text-gray-400 italic",children:[t5("companyName")," non d\xe9fini"]})})()})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:t5("to")}),(0,sn.jsxs)("div",{className:"mb-4",children:[(0,sn.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-2 flex items-center",children:[(0,sn.jsx)("span",{className:"mr-2",children:"\ud83c\udfe2"}),t5("billingAddress")]}),(0,sn.jsx)("div",{className:"text-sm text-gray-700 bg-blue-50 p-3 rounded-lg border-l-4 border-blue-400",children:x?(0,sn.jsxs)(sn.Fragment,{children:[x.company?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:x.company}),x.name&&(0,sn.jsxs)("p",{className:"mt-1 text-gray-600",children:["\xc0 l'attention de: ",x.name]})]}):x.name&&(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:x.name}),x.address&&(0,sn.jsx)("p",{className:"mt-1",children:x.address}),(x.city||x.postalCode)&&(0,sn.jsx)("p",{className:"mt-1",children:[x.city,x.postalCode].filter(Boolean).join(", ")}),x.country&&(0,sn.jsx)("p",{className:"mt-1",children:x.country}),x.vatNumber&&(0,sn.jsxs)("p",{className:"mt-2 text-xs text-gray-600",children:[(0,sn.jsxs)("span",{className:"font-medium",children:[t5("vatNumber"),":"]})," ",x.vatNumber]})]}):(0,sn.jsx)("p",{className:"text-gray-400",children:t5("selectClient")})})]}),(()=>{const e=!!(y.deliveryAddress||y.deliveryCity||y.deliveryPostalCode||y.deliveryCountry),t=!!(null!==x&&void 0!==x&&x.deliveryAddress||null!==x&&void 0!==x&&x.deliveryCity||null!==x&&void 0!==x&&x.deliveryPostalCode||null!==x&&void 0!==x&&x.deliveryCountry),n=!0===(null===x||void 0===x?void 0:x.sameAsAddress),r=!!(null!==x&&void 0!==x&&x.address||null!==x&&void 0!==x&&x.city||null!==x&&void 0!==x&&x.postalCode||null!==x&&void 0!==x&&x.country);return e||t||n&&r?(0,sn.jsxs)("div",{className:"mb-4",children:[(0,sn.jsxs)("h4",{className:"text-sm font-medium text-gray-900 mb-2 flex items-center",children:[(0,sn.jsx)("span",{className:"mr-2",children:"\ud83d\ude9a"}),t5("deliveryAddress")]}),(0,sn.jsx)("div",{className:"text-sm text-gray-700 bg-blue-50 p-3 rounded-lg border-l-4 border-blue-400",children:e?(0,sn.jsxs)(sn.Fragment,{children:[x&&x.company?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:x.company}),x.name&&(0,sn.jsxs)("p",{className:"mt-1 text-gray-600",children:["\xc0 l'attention de: ",x.name]})]}):x&&x.name&&(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:x.name}),y.deliveryAddress&&(0,sn.jsx)("p",{className:"mt-1",children:y.deliveryAddress}),(y.deliveryCity||y.deliveryPostalCode)&&(0,sn.jsx)("p",{className:"mt-1",children:[y.deliveryCity,y.deliveryPostalCode].filter(Boolean).join(", ")}),y.deliveryCountry&&(0,sn.jsx)("p",{className:"mt-1",children:y.deliveryCountry}),(0,sn.jsx)("p",{className:"mt-2 text-xs text-gray-600 font-medium",children:"\ud83d\udccd Adresse de livraison personnalis\xe9e"})]}):n&&r?(0,sn.jsxs)(sn.Fragment,{children:[x&&x.company?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:x.company}),x.name&&(0,sn.jsxs)("p",{className:"mt-1 text-gray-600",children:["\xc0 l'attention de: ",x.name]})]}):x&&x.name&&(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:x.name}),x.address&&(0,sn.jsx)("p",{className:"mt-1",children:x.address}),(x.city||x.postalCode)&&(0,sn.jsx)("p",{className:"mt-1",children:[x.city,x.postalCode].filter(Boolean).join(", ")}),x.country&&(0,sn.jsx)("p",{className:"mt-1",children:x.country}),(0,sn.jsxs)("p",{className:"mt-2 text-xs text-gray-600 font-medium",children:["\u2713 ",t5("sameAsBilling")]})]}):t?(0,sn.jsxs)(sn.Fragment,{children:[x&&x.company?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:x.company}),x.name&&(0,sn.jsxs)("p",{className:"mt-1 text-gray-600",children:["\xc0 l'attention de: ",x.name]})]}):x&&x.name&&(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:x.name}),x.deliveryAddress&&(0,sn.jsx)("p",{className:"mt-1",children:x.deliveryAddress}),(x.deliveryCity||x.deliveryPostalCode)&&(0,sn.jsx)("p",{className:"mt-1",children:[x.deliveryCity,x.deliveryPostalCode].filter(Boolean).join(", ")}),x.deliveryCountry&&(0,sn.jsx)("p",{className:"mt-1",children:x.deliveryCountry})]}):null})]}):null})()]})]}),(0,sn.jsx)("div",{className:"mb-8 overflow-x-auto",children:(0,sn.jsxs)("table",{className:"w-full min-w-full",children:[(0,sn.jsx)("thead",{children:(0,sn.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,sn.jsx)("th",{className:"text-left py-3 px-2 text-sm font-semibold text-gray-900",children:t5("description")}),(0,sn.jsx)("th",{className:"text-right py-3 px-2 text-sm font-semibold text-gray-900 min-w-16",children:t5("quantity")}),(0,sn.jsx)("th",{className:"text-right py-3 px-2 text-sm font-semibold text-gray-900 min-w-20",children:t5("unitPrice")}),(0,sn.jsx)("th",{className:"text-right py-3 px-2 text-sm font-semibold text-gray-900 min-w-16",children:y.tvaExempt?"TVA (Exon\xe9r\xe9e)":t5("taxRate")}),(0,sn.jsx)("th",{className:"text-right py-3 px-2 text-sm font-semibold text-gray-900 min-w-20",children:t5("total")})]})}),(0,sn.jsx)("tbody",{children:y.items.length>0?y.items.map((e,t)=>(0,sn.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50 transition-colors duration-150",children:[(0,sn.jsx)("td",{className:"py-3 px-2 text-sm text-gray-900",children:(0,sn.jsx)("div",{className:"max-w-xs truncate",title:e.description,children:e.description||"Aucune description"})}),(0,sn.jsx)("td",{className:"py-3 px-2 text-sm text-gray-600 text-right",children:e.quantity||0}),(0,sn.jsx)("td",{className:"py-3 px-2 text-sm text-gray-600 text-right",children:_(e.unitPrice||0)}),(0,sn.jsx)("td",{className:"py-3 px-2 text-sm text-gray-600 text-right",children:y.tvaExempt?(0,sn.jsx)("span",{className:"text-blue-600 font-medium",children:"Exon\xe9r\xe9e"}):null===e.taxRate||void 0===e.taxRate||""===e.taxRate?"%":"object"===typeof e.taxRate?"0%":"".concat(e.taxRate,"%")}),(0,sn.jsx)("td",{className:"py-3 px-2 text-sm text-gray-900 text-right font-medium",children:_(E(e))})]},t)):(0,sn.jsx)("tr",{children:(0,sn.jsx)("td",{colSpan:"5",className:"py-8 text-center text-gray-400 text-sm",children:t5("itemsRequired")})})})]})}),(0,sn.jsx)("div",{className:"flex justify-end",children:(0,sn.jsxs)("div",{className:"w-64",children:[(0,sn.jsxs)("div",{className:"flex justify-between py-2 text-sm",children:[(0,sn.jsxs)("span",{className:"text-gray-600",children:[t5("subtotal"),":"]}),(0,sn.jsx)("span",{className:"text-gray-900",children:_(P.subtotal)})]}),(0,sn.jsxs)("div",{className:"flex justify-between py-2 text-sm",children:[(0,sn.jsxs)("span",{className:"text-gray-600",children:[y.tvaExempt?"TVA (Exon\xe9r\xe9e)":y.autoLiquidation?"TVA (Autoliquidation)":t5("totalTax"),":"]}),(0,sn.jsx)("span",{className:"text-gray-900 ".concat(y.tvaExempt||y.autoLiquidation?"text-blue-600":""),children:y.tvaExempt||y.autoLiquidation?"\u20ac0.00":_(P.totalTax)})]}),(0,sn.jsxs)("div",{className:"flex justify-between py-2 text-lg font-bold border-t border-gray-200",children:[(0,sn.jsxs)("span",{className:"text-gray-900",children:[t5("grandTotal"),":"]}),(0,sn.jsx)("span",{className:"text-blue-600",children:_(P.grandTotal)})]}),y.tvaExempt&&y.tvaExemptClause&&(0,sn.jsxs)("div",{className:"mt-3 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:[(0,sn.jsx)("strong",{children:"Exon\xe9ration de TVA:"})," ",y.tvaExemptClause]}),y.tvaExempt&&!y.tvaExemptClause&&(0,sn.jsxs)("div",{className:"mt-3 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:[(0,sn.jsx)("strong",{children:"TVA Exon\xe9r\xe9e:"})," Exon\xe9ration de TVA selon l'article 262 ter I du Code g\xe9n\xe9ral des imp\xf4ts (CGI) - Livraisons intracommunautaires de biens"]}),y.autoLiquidation&&(0,sn.jsxs)("div",{className:"mt-3 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:[(0,sn.jsx)("strong",{children:"Autoliquidation:"})," Autoliquidation de la TVA par le preneur selon l'article 283-1 du Code g\xe9n\xe9ral des imp\xf4ts (CGI) - Prestations de services B to B"]})]})}),I&&(0,sn.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,sn.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Coordonn\xe9es Bancaires"}),(0,sn.jsxs)("div",{className:"grid grid-cols-[auto_1fr] gap-x-3 gap-y-1 items-center text-sm",children:[(0,sn.jsx)("span",{className:"text-gray-600",children:"IBAN:"}),(0,sn.jsx)("span",{className:"text-gray-900 font-mono",children:M||""}),(0,sn.jsx)("span",{className:"text-gray-600",children:"BIC/SWIFT:"}),(0,sn.jsx)("span",{className:"text-gray-900 font-mono",children:D||""}),(0,sn.jsx)("span",{className:"text-gray-600",children:"Banque:"}),(0,sn.jsx)("span",{className:"text-gray-900",children:O||""}),(0,sn.jsx)("span",{className:"text-gray-600",children:"Titulaire:"}),(0,sn.jsx)("span",{className:"text-gray-900",children:R||(null===T||void 0===T?void 0:T.name)||(null===b||void 0===b?void 0:b.companyName)||"Nom de l'entreprise"})]})]}),y.notes&&(0,sn.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,sn.jsx)("h3",{className:"text-sm font-semibold text-gray-900 mb-2",children:t5("notes")}),(0,sn.jsx)("p",{className:"text-sm text-gray-600 whitespace-pre-wrap",children:y.notes})]}),w&&(w.startsWith("french-")||"france-template"===w)&&(0,sn.jsxs)("div",{className:"mt-8 pt-8 border-t border-gray-200",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:t5("legalTerms")}),(0,sn.jsxs)("div",{className:"space-y-3 text-xs text-gray-600 leading-relaxed",children:[(0,sn.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,sn.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"Garantie des vices cach\xe9s (Article 1641 du Code Civil)"}),(0,sn.jsx)("p",{children:"Le vendeur est tenu de la garantie \xe0 raison des d\xe9fauts cach\xe9s de la chose vendue qui la rendent impropre \xe0 l'usage auquel on la destine, ou qui diminuent tellement cet usage que l'acheteur ne l'aurait pas acquise, ou n'en aurait donn\xe9 qu'un moindre prix, s'il les avait connus."})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,sn.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:t5("paymentConditions")}),(0,sn.jsx)("p",{children:"Paiement \xe0 30 jours net. En cas de retard de paiement, des p\xe9nalit\xe9s de retard sont exigibles le jour suivant la date de r\xe8glement figurant sur la facture. Le taux d'int\xe9r\xeat de ces p\xe9nalit\xe9s de retard est de trois fois le taux d'int\xe9r\xeat l\xe9gal. Ces p\xe9nalit\xe9s sont exigibles sans qu'un rappel soit n\xe9cessaire."})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,sn.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"R\xe9serve de propri\xe9t\xe9"}),(0,sn.jsx)("p",{children:"Nous nous r\xe9servons la propri\xe9t\xe9 des biens vendus jusqu'au paiement int\xe9gral du prix. En cas de d\xe9faut de paiement, nous pourrons revendiquer les marchandises o\xf9 qu'elles se trouvent."})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 p-3 rounded",children:[(0,sn.jsx)("p",{className:"font-medium text-gray-700 mb-1",children:"R\xe8glement des litiges"}),(0,sn.jsx)("p",{children:"Tout litige relatif \xe0 l'interpr\xe9tation et \xe0 l'ex\xe9cution des pr\xe9sentes conditions de vente est soumis au droit fran\xe7ais. En cas de contestation, seuls les tribunaux fran\xe7ais seront comp\xe9tents."})]}),(0,sn.jsxs)("div",{className:"bg-blue-50 p-3 rounded border border-blue-200",children:[(0,sn.jsx)("p",{className:"font-medium text-blue-700 mb-1",children:t5("vatInformation")}),y.tvaExempt?(0,sn.jsx)("p",{className:"text-blue-600",children:t5("vatStatus.exempt")}):y.autoLiquidation?(0,sn.jsx)("p",{className:"text-blue-600",children:t5("vatStatus.autoLiquidation")}):(0,sn.jsx)("p",{className:"text-blue-600",children:t5("vatStatus.standard")})]}),(0,sn.jsxs)("div",{className:"bg-yellow-50 p-3 rounded border border-yellow-200",children:[(0,sn.jsx)("p",{className:"font-medium text-yellow-700 mb-1",children:"Conditions de paiement et p\xe9nalit\xe9s"}),(0,sn.jsxs)("div",{className:"text-xs text-yellow-600 space-y-1",children:[(0,sn.jsx)("p",{children:"\u2022 \xc9ch\xe9ance de paiement: 30 jours \xe0 compter de la date de facture"}),(0,sn.jsx)("p",{children:"\u2022 Mode de paiement: Virement bancaire, ch\xe8que, ou esp\xe8ces (si montant \u2264 1000\u20ac)"}),(0,sn.jsx)("p",{children:"\u2022 Escompte pour paiement anticip\xe9: 2% si paiement sous 10 jours"}),(0,sn.jsxs)("p",{children:["\u2022 P\xe9nalit\xe9s de retard: Taux = 3 \xd7 taux d'int\xe9r\xeat l\xe9gal (actuellement ",9.45.toFixed(2),"%)"]}),(0,sn.jsx)("p",{children:"\u2022 Indemnit\xe9 forfaitaire pour frais de recouvrement: 40\u20ac (Art. L441-6 du Code de commerce)"})]})]})]})]})]})]})})}),r5=n5,i5={standard:{value:"standard",label:"Standard Invoice",description:"Standard invoice"},credit:{value:"credit",label:"Credit Note",description:"Credit note"},debit:{value:"debit",label:"Debit Note",description:"Debit note"},proforma:{value:"proforma",label:"Pro forma Invoice",description:"Pro forma invoice"},advance:{value:"advance",label:"Advance Invoice",description:"Advance invoice"},final:{value:"final",label:"Final Invoice",description:"Final invoice"}},s5=e=>{let{formData:t,setFormData:n,selectedClient:r,validationErrors:s,setValidationErrors:a}=e;const{user:o}=mn(),{userProfile:l}=jn();(()=>{try{if(l)return{sellerCompanyName:l.companyName||"",sellerAddress:l.address||"",sellerVATNumber:l.vatNumber||"",sellerSIREN:l.sirenNumber||l.siren||"",sellerPhone:l.phone||"",sellerWebsite:"",sellerSIRET:l.siretNumber||"",sellerRCS:l.rcsNumber||"",sellerNAF:l.nafCode||"",sellerLegalForm:l.legalForm||"",sellerRegisteredCapital:l.registeredCapital||"",bankIBAN:l.bankIBAN||"",bankBIC:l.bankBIC||"",bankName:l.bankName||"",accountHolder:l.accountHolder||""};const e=localStorage.getItem("frenchCompanySettings");if(e)return JSON.parse(e)}catch(e){console.error("Failed to get French company settings:",e)}})();i.useEffect(()=>{t.frenchFields||n(e=>(0,Ne.A)((0,Ne.A)({},e),{},{frenchFields:{}}))},[t.frenchFields,n,t.issueDate]);const[c,d]=(0,i.useState)(()=>({invoiceType:t.invoiceType||"standard",serviceDate:t.serviceDate||""}));(0,i.useEffect)(()=>{d(e=>(0,Ne.A)((0,Ne.A)({},e),{},{invoiceType:t.invoiceType||"standard",serviceDate:t.serviceDate||""}))},[t.invoiceType,t.serviceDate]);return(0,sn.jsx)("div",{className:"space-y-3",children:(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Invoice Type"}),(0,sn.jsx)("select",{value:c.invoiceType||"standard",onChange:e=>((e,t)=>{d(n=>(0,Ne.A)((0,Ne.A)({},n),{},{[e]:t})),n("invoiceType"===e?n=>(0,Ne.A)((0,Ne.A)({},n),{},{invoiceType:t,frenchFields:(0,Ne.A)((0,Ne.A)({},n.frenchFields),{},{[e]:t})}):"serviceDate"===e?n=>(0,Ne.A)((0,Ne.A)({},n),{},{serviceDate:t,frenchFields:(0,Ne.A)((0,Ne.A)({},n.frenchFields),{},{[e]:t})}):n=>(0,Ne.A)((0,Ne.A)({},n),{},{frenchFields:(0,Ne.A)((0,Ne.A)({},n.frenchFields),{},{[e]:t})}))})("invoiceType",e.target.value),className:"w-full p-2 border border-gray-300 rounded focus:outline-none focus:ring-1 focus:ring-blue-500 text-sm",children:Object.entries(i5).map(e=>{let[t,n]=e;return(0,sn.jsx)("option",{value:n.value,children:n.label},t)})})]})})},a5=e=>{let{onTemplateSelect:t}=e;const[n,r]=(0,i.useState)(""),s=(e,t)=>{const n={blue:t?"border-blue-300 bg-gray-50":"border-gray-200 hover:border-gray-300",green:t?"border-green-300 bg-gray-50":"border-gray-200 hover:border-gray-300",purple:t?"border-purple-300 bg-gray-50":"border-gray-200 hover:border-gray-300"};return"".concat("p-3 border rounded-lg cursor-pointer transition-all duration-200"," ").concat(n[e])};return(0,sn.jsxs)("div",{className:"p-4 border border-gray-300 rounded-lg bg-white",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"Choose invoice template"}),(0,sn.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[{id:"french-standard",name:"French Standard (TVA)",description:"For domestic French clients, tax rate 20%",color:"blue",changes:["Tax rate: 20%","Show TVA information","French legal statements"]},{id:"french-exempt",name:"French Exempt (TVA exemption)",description:"For micro businesses, tax rate 0%",color:"green",changes:["Tax rate: 0%","Show TVA exemption terms","French legal statements"]},{id:"french-auto",name:"French Reverse Charge (Auto-liquidation)",description:"For EU B2B transactions; customer calculates TVA",color:"purple",changes:["Tax rate: 0%","Show reverse charge information","French legal statements"]}].map(e=>(0,sn.jsxs)("div",{onClick:()=>{return n=e.id,r(n),void t(n);var n},className:s(e.color,n===e.id),children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sn.jsx)("h4",{className:"font-medium text-gray-900 text-sm",children:e.name}),n===e.id&&(0,sn.jsx)("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sn.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),(0,sn.jsx)("p",{className:"text-xs text-gray-600 mb-2",children:e.description}),(0,sn.jsxs)("div",{className:"text-xs",children:[(0,sn.jsx)("div",{className:"text-gray-500 mb-1",children:"Preview will show:"}),(0,sn.jsx)("ul",{className:"space-y-1",children:e.changes.map((e,t)=>(0,sn.jsxs)("li",{className:"flex items-center text-gray-600",children:[(0,sn.jsx)("span",{className:"w-1 h-1 bg-gray-400 rounded-full mr-2"}),e]},t))})]})]},e.id))}),(0,sn.jsxs)("div",{className:"mt-4 p-2 bg-blue-50 border border-blue-200 rounded text-xs text-blue-700",children:["\ud83d\udca1 ",(0,sn.jsx)("strong",{children:"Tip:"})," After selecting different templates, check the changes in the right preview area"]})]})},o5=e=>{var t,n,r,s,a,o,l,c,d,u,h,p,m,f,g,v,y,x,b,w,j,N;let{formData:k,clients:A,client:S,user:_,calculateTotals:C,calculateItemTotal:E,formatCurrency:P,invoiceMode:T,selectedTemplate:M,onClose:D}=e;const{t:O}=nn(["common","invoiceform"]),[R,I]=(0,i.useState)(!1),[L,F]=(0,i.useState)(.8),B=(0,i.useRef)(),{subtotal:z,taxAmount:W,total:U}=C(),V=S||A&&A.find(e=>e.id===k.clientId||String(e.id)===String(k.clientId)),H=("fr"===T?"FR-":"INV-")+"PREVIEW-001",q=e=>{if(!e)return"";return new Date(e).toLocaleDateString("fr-FR",{year:"numeric",month:"long",day:"numeric"})},G=(null===k||void 0===k?void 0:k.currency)||(null===_||void 0===_||null===(t=_.Company)||void 0===t?void 0:t.currency)||"EUR",K=e=>{const t=Number(null!==e&&void 0!==e?e:0);if("fr"===T)try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:G,minimumFractionDigits:2,maximumFractionDigits:2}).format(t).replace(/\u00A0/g," ").replace(/\u202F/g," ")}catch(Ae){return"".concat(G," ").concat(t.toFixed(2))}return"function"===typeof P?P(t,G):"".concat(G," ").concat(t.toFixed(2))},Y=e=>{const t=Number(null!==e&&void 0!==e?e:0);if("fr"===T)try{return new Intl.NumberFormat("fr-FR",{style:"percent",minimumFractionDigits:1,maximumFractionDigits:1}).format(t/100)}catch(Ae){return"".concat(t.toFixed(1)," %")}return"".concat(t," %")},X=(()=>{const e=!0===(null===V||void 0===V?void 0:V.sameAsAddress)||!0===(null===k||void 0===k?void 0:k.deliveryAddressSameAsBilling),t=!!(null!==V&&void 0!==V&&V.address||null!==V&&void 0!==V&&V.city||null!==V&&void 0!==V&&V.postalCode||null!==V&&void 0!==V&&V.country);var n;return null!==k&&void 0!==k&&k.deliveryAddress||null!==k&&void 0!==k&&k.deliveryCity||null!==k&&void 0!==k&&k.deliveryPostalCode||null!==k&&void 0!==k&&k.deliveryCountry||null!==k&&void 0!==k&&k.customDeliveryAddress&&k.customDeliveryAddress.trim()?{type:"invoice",address:(null===k||void 0===k||null===(n=k.customDeliveryAddress)||void 0===n?void 0:n.trim())||(null===k||void 0===k?void 0:k.deliveryAddress)||"",city:(null===k||void 0===k?void 0:k.deliveryCity)||"",postalCode:(null===k||void 0===k?void 0:k.deliveryPostalCode)||"",country:(null===k||void 0===k?void 0:k.deliveryCountry)||""}:e&&t?{type:"billing",address:(null===V||void 0===V?void 0:V.address)||"",city:(null===V||void 0===V?void 0:V.city)||"",postalCode:(null===V||void 0===V?void 0:V.postalCode)||"",country:(null===V||void 0===V?void 0:V.country)||""}:null!==V&&void 0!==V&&V.deliveryAddress||null!==V&&void 0!==V&&V.deliveryCity||null!==V&&void 0!==V&&V.deliveryPostalCode||null!==V&&void 0!==V&&V.deliveryCountry?{type:"client",address:(null===V||void 0===V?void 0:V.deliveryAddress)||"",city:(null===V||void 0===V?void 0:V.deliveryCity)||"",postalCode:(null===V||void 0===V?void 0:V.deliveryPostalCode)||"",country:(null===V||void 0===V?void 0:V.deliveryCountry)||""}:{type:"none",address:"",city:"",postalCode:"",country:""}})(),J=("fr"!==T||(k.tvaExempt||k.autoLiquidation),{iban:(null===_||void 0===_||null===(n=_.Company)||void 0===n||null===(r=n.bankInfo)||void 0===r?void 0:r.iban)||(null===_||void 0===_?void 0:_.bankIBAN)||(null===k||void 0===k?void 0:k.bankIBAN)||"",bic:(null===_||void 0===_||null===(s=_.Company)||void 0===s||null===(a=s.bankInfo)||void 0===a?void 0:a.bic)||(null===_||void 0===_?void 0:_.bankBIC)||(null===k||void 0===k?void 0:k.bankBIC)||"",bankName:(null===_||void 0===_||null===(o=_.Company)||void 0===o||null===(l=o.bankInfo)||void 0===l?void 0:l.bankName)||(null===_||void 0===_?void 0:_.bankName)||"",accountHolder:(null===_||void 0===_||null===(c=_.Company)||void 0===c||null===(d=c.bankInfo)||void 0===d?void 0:d.accountHolder)||(null===_||void 0===_?void 0:_.accountHolder)||[null===_||void 0===_?void 0:_.firstName,null===_||void 0===_?void 0:_.lastName].filter(Boolean).join(" ")}),$={name:(null===k||void 0===k?void 0:k.sellerCompanyName)||(null===_||void 0===_?void 0:_.companyName)||(null===_||void 0===_||null===(u=_.Company)||void 0===u?void 0:u.name)||[null===_||void 0===_?void 0:_.firstName,null===_||void 0===_?void 0:_.lastName].filter(Boolean).join(" "),address:(null===k||void 0===k?void 0:k.sellerAddress)||(null===_||void 0===_?void 0:_.address)||(null===_||void 0===_||null===(h=_.Company)||void 0===h?void 0:h.address),city:(null===_||void 0===_?void 0:_.city)||(null===_||void 0===_||null===(p=_.Company)||void 0===p?void 0:p.city),postalCode:(null===_||void 0===_?void 0:_.postalCode)||(null===_||void 0===_||null===(m=_.Company)||void 0===m?void 0:m.postalCode),phone:(null===k||void 0===k?void 0:k.sellerPhone)||(null===_||void 0===_?void 0:_.phone)||(null===_||void 0===_||null===(f=_.Company)||void 0===f?void 0:f.phone),email:(null===k||void 0===k?void 0:k.sellerEmail)||(null===_||void 0===_?void 0:_.email)||(null===_||void 0===_||null===(g=_.Company)||void 0===g?void 0:g.email),vatNumber:(null===k||void 0===k?void 0:k.sellerVATNumber)||(null===_||void 0===_?void 0:_.vatNumber)||(null===_||void 0===_||null===(v=_.Company)||void 0===v?void 0:v.vatNumber),siren:(null===k||void 0===k?void 0:k.sellerSIREN)||(null===_||void 0===_?void 0:_.sirenNumber)||(null===_||void 0===_?void 0:_.siren)||(null===_||void 0===_||null===(y=_.Company)||void 0===y?void 0:y.sirenNumber),siret:(null===k||void 0===k?void 0:k.sellerSIRET)||(null===_||void 0===_?void 0:_.siretNumber)||(null===_||void 0===_||null===(x=_.Company)||void 0===x?void 0:x.siretNumber),legalForm:(null===k||void 0===k?void 0:k.sellerLegalForm)||(null===_||void 0===_?void 0:_.legalForm)||(null===_||void 0===_||null===(b=_.Company)||void 0===b?void 0:b.legalForm),registeredCapital:(null===k||void 0===k?void 0:k.sellerRegisteredCapital)||(null===_||void 0===_?void 0:_.registeredCapital)||(null===_||void 0===_||null===(w=_.Company)||void 0===w?void 0:w.registeredCapital),rcsNumber:(null===k||void 0===k?void 0:k.sellerRCS)||(null===_||void 0===_?void 0:_.rcsNumber)||(null===_||void 0===_||null===(j=_.Company)||void 0===j?void 0:j.rcsNumber),nafCode:(null===k||void 0===k?void 0:k.sellerNAF)||(null===_||void 0===_||null===(N=_.Company)||void 0===N?void 0:N.nafCode)||(null===_||void 0===_?void 0:_.nafCode)};return(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 ".concat(R?"p-0":"p-4"),children:(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl ".concat(R?"w-full h-full":"max-w-6xl max-h-[90vh]"," flex flex-col"),children:[(0,sn.jsxs)("div",{className:"flex justify-between items-center p-4 border-b no-print",children:[(0,sn.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:O("common:printPreview")}),(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsx)("label",{className:"text-sm text-gray-600",children:"Zoom:"}),(0,sn.jsxs)("select",{value:L,onChange:e=>F(parseFloat(e.target.value)),className:"border rounded px-2 py-1 text-sm",children:[(0,sn.jsx)("option",{value:.5,children:"50%"}),(0,sn.jsx)("option",{value:.75,children:"75%"}),(0,sn.jsx)("option",{value:.8,children:"80%"}),(0,sn.jsx)("option",{value:1,children:"100%"}),(0,sn.jsx)("option",{value:1.25,children:"125%"})]})]}),(0,sn.jsxs)("button",{onClick:()=>{const e=B.current,t=window.open("","_blank");t.document.write("\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>Facture ".concat(H,"</title>\n          <meta charset=\"utf-8\">\n          <style>\n            @page {\n              size: A4;\n              margin: 20mm;\n            }\n            \n            body {\n              font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\n              font-size: 12pt;\n              line-height: 1.4;\n              color: #000;\n              background: white;\n              margin: 0;\n              padding: 0;\n            }\n            \n            .print-container {\n              max-width: 210mm;\n              margin: 0 auto;\n              background: white;\n              padding: 0;\n            }\n            \n            /* \u5934\u90e8\u4fe1\u606f\u6837\u5f0f */\n            .header {\n              display: flex;\n              justify-content: space-between;\n              margin-bottom: 30px;\n              border-bottom: 2px solid #e5e7eb;\n              padding-bottom: 20px;\n            }\n            \n            .company-info, .client-info {\n              width: 45%;\n            }\n            \n            .company-info h2, .client-info h2 {\n              font-size: 14pt;\n              font-weight: bold;\n              margin-bottom: 10px;\n              color: #1f2937;\n            }\n            \n            .company-info p, .client-info p {\n              margin: 3px 0;\n              font-size: 11pt;\n            }\n            \n            /* \u53d1\u7968\u8be6\u60c5\u6837\u5f0f */\n            .invoice-details {\n              display: flex;\n              justify-content: space-between;\n              margin-bottom: 30px;\n            }\n            \n            .invoice-details .left {\n              width: 45%;\n            }\n            \n            .invoice-details .right {\n              width: 45%;\n              text-align: right;\n            }\n            \n            .invoice-info-item {\n              margin-bottom: 8px;\n              display: flex;\n              justify-content: flex-end;\n              align-items: baseline;\n            }\n            \n            .invoice-info-item .label {\n              font-size: 11pt;\n              font-weight: normal;\n              margin-right: 10px;\n              min-width: 120px;\n              text-align: right;\n            }\n            \n            .invoice-info-item .value {\n              font-size: 11pt;\n              font-weight: normal;\n            }\n            \n            /* \u6cd5\u56fd\u7279\u5b9a\u5b57\u6bb5\u6837\u5f0f */\n            .french-fields {\n              margin-bottom: 20px;\n            }\n            \n            .french-fields h3 {\n              font-size: 12pt;\n              font-weight: bold;\n              margin-bottom: 10px;\n              color: #1f2937;\n            }\n            \n            .french-fields p {\n              margin: 5px 0;\n              font-size: 11pt;\n            }\n            \n            /* \u4ea4\u4ed8\u5730\u5740\u6837\u5f0f */\n            .delivery-address {\n              margin-bottom: 20px;\n            }\n            \n            .delivery-address h3 {\n              font-size: 12pt;\n              font-weight: bold;\n              margin-bottom: 10px;\n              color: #1f2937;\n            }\n            \n            /* \u9879\u76ee\u8868\u683c\u6837\u5f0f */\n            .items-table {\n              width: 100%;\n              border-collapse: collapse;\n              margin-bottom: 30px;\n            }\n            \n            .items-table th {\n              background: #f9fafb;\n              padding: 10px;\n              text-align: left;\n              font-weight: bold;\n              border: 1px solid #e5e7eb;\n              font-size: 11pt;\n            }\n            \n            .items-table td {\n              padding: 10px;\n              border: 1px solid #e5e7eb;\n              font-size: 10pt;\n            }\n            \n            .items-table tr:nth-child(even) {\n              background: #fafafa;\n            }\n            \n            /* \u603b\u8ba1\u6837\u5f0f */\n            .totals {\n              text-align: right;\n              margin-bottom: 30px;\n            }\n            \n            .totals table {\n              margin-left: auto;\n              border-collapse: collapse;\n            }\n            \n            .totals td {\n              padding: 5px 15px;\n              font-size: 11pt;\n            }\n            \n            .totals .total-row {\n              font-weight: bold;\n              font-size: 12pt;\n              border-top: 2px solid #1f2937;\n            }\n            \n            /* TVA\u4fe1\u606f\u6837\u5f0f */\n            .tva-info {\n              margin-bottom: 20px;\n              padding: 10px;\n              background: #f0f9ff;\n              border-left: 4px solid #3b82f6;\n            }\n            \n            .tva-info h3 {\n              font-size: 12pt;\n              font-weight: bold;\n              margin-bottom: 5px;\n              color: #1f2937;\n            }\n            \n            /* \u94f6\u884c\u4fe1\u606f\u6837\u5f0f */\n            .bank-info {\n              margin-bottom: 30px;\n            }\n            \n            .bank-info h3 {\n              font-size: 12pt;\n              font-weight: bold;\n              margin-bottom: 10px;\n              color: #1f2937;\n            }\n            \n            .bank-info p {\n              margin: 5px 0;\n              font-size: 11pt;\n            }\n            \n            /* \u6cd5\u5f8b\u6761\u6b3e\u6837\u5f0f */\n            .legal-clauses {\n              margin-top: 30px;\n              page-break-inside: avoid;\n            }\n            \n            .legal-clauses h3 {\n              font-size: 12pt;\n              font-weight: bold;\n              margin-bottom: 15px;\n              color: #1f2937;\n            }\n            \n            .legal-clause {\n              margin-bottom: 15px;\n            }\n            \n            .legal-clause h4 {\n              font-size: 11pt;\n              font-weight: bold;\n              margin-bottom: 5px;\n              color: #374151;\n            }\n            \n            .legal-clause p {\n              font-size: 10pt;\n              line-height: 1.4;\n              text-align: justify;\n            }\n            \n            /* \u5206\u9875\u6837\u5f0f */\n            .page {\n              width: 210mm;\n              min-height: 297mm;\n              padding: 20mm;\n              margin: 0 auto;\n              background: white;\n              box-shadow: 0 0 10px rgba(0,0,0,0.1);\n              page-break-after: always;\n              position: relative;\n            }\n            \n            .page:last-child {\n              page-break-after: auto;\n            }\n            \n            .page-1 {\n              /* \u7b2c\u4e00\u9875\u5185\u5bb9 */\n            }\n            \n            .page-2 {\n              /* \u7b2c\u4e8c\u9875\u5185\u5bb9 */\n            }\n            \n            /* \u6253\u5370\u65f6\u9690\u85cf\u4e0d\u5fc5\u8981\u5143\u7d20 */\n            @media print {\n              .no-print {\n                display: none !important;\n              }\n              \n              body {\n                -webkit-print-color-adjust: exact;\n                print-color-adjust: exact;\n                margin: 0;\n                padding: 0;\n              }\n              \n              .page {\n                width: 210mm;\n                height: 297mm;\n                padding: 20mm;\n                margin: 0;\n                box-shadow: none;\n                page-break-after: always;\n              }\n              \n              .page:last-child {\n                page-break-after: auto;\n              }\n              \n              /* \u786e\u4fdd\u5185\u5bb9\u4e0d\u4f1a\u8de8\u9875 */\n              .legal-clauses {\n                page-break-inside: avoid;\n              }\n              \n              .legal-clause {\n                page-break-inside: avoid;\n                margin-bottom: 15px;\n              }\n            }\n          </style>\n        </head>\n        <body>\n          ").concat(e.innerHTML,"\n        </body>\n      </html>\n    ")),t.document.close(),t.focus(),setTimeout(()=>{t.print(),t.close()},250)},className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:[(0,sn.jsx)(Gi,{size:16}),(0,sn.jsx)("span",{children:O("common:print")})]}),(0,sn.jsx)("button",{onClick:()=>{I(!R)},className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",title:R?"Exit full screen":"Full screen",children:R?(0,sn.jsx)(Bi,{size:20}):(0,sn.jsx)(Li,{size:20})}),(0,sn.jsx)("button",{onClick:D,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",children:(0,sn.jsx)(ls,{size:20})})]})]}),(0,sn.jsx)("div",{className:"flex-1 overflow-auto p-4 bg-gray-100",children:(0,sn.jsx)("div",{className:"mx-auto bg-white shadow-lg",style:{transform:"scale(".concat(L,")"),transformOrigin:"top center",width:"210mm",minHeight:"297mm"},children:(0,sn.jsxs)("div",{ref:B,className:"print-container",children:[(0,sn.jsxs)("div",{className:"page page-1",children:[(0,sn.jsxs)("div",{className:"header",children:[(0,sn.jsxs)("div",{className:"company-info",children:[(0,sn.jsx)("h2",{children:"Vendeur / Prestataire"}),$.name&&(0,sn.jsx)("p",{children:(0,sn.jsx)("strong",{children:$.name})}),$.address&&(0,sn.jsx)("p",{children:$.address}),($.city||$.postalCode)&&(0,sn.jsx)("p",{children:[$.city,$.postalCode].filter(Boolean).join(", ")}),$.phone&&(0,sn.jsxs)("p",{children:["T\xe9l: ",$.phone]}),$.email&&(0,sn.jsxs)("p",{children:["Email: ",$.email]}),$.vatNumber&&(0,sn.jsxs)("p",{children:["N\xb0 TVA: ",$.vatNumber]}),$.siren&&(0,sn.jsxs)("p",{children:["SIREN: ",$.siren]}),$.siret&&(0,sn.jsxs)("p",{children:["SIRET: ",$.siret]}),$.legalForm&&(0,sn.jsxs)("p",{children:["Forme juridique: ",$.legalForm]}),void 0!==$.registeredCapital&&null!==$.registeredCapital&&(0,sn.jsxs)("p",{children:["Capital social: ",K($.registeredCapital)]}),$.rcsNumber&&(0,sn.jsxs)("p",{children:["RCS: ",$.rcsNumber]}),$.nafCode&&(0,sn.jsxs)("p",{children:["Code NAF: ",$.nafCode]})]}),(0,sn.jsxs)("div",{className:"client-info",children:[(0,sn.jsx)("h2",{children:"Adresse de facturation"}),V&&(0,sn.jsxs)(sn.Fragment,{children:[V.companyName&&(0,sn.jsx)("p",{children:(0,sn.jsx)("strong",{children:V.companyName})}),V.contactName&&(0,sn.jsxs)("p",{children:["\xc0 l'attention de: ",V.contactName]}),V.address&&(0,sn.jsx)("p",{children:V.address}),(V.city||V.postalCode)&&(0,sn.jsx)("p",{children:[V.city,V.postalCode].filter(Boolean).join(", ")}),V.country&&(0,sn.jsx)("p",{children:V.country}),V.vatNumber&&(0,sn.jsxs)("p",{children:["Num\xe9ro de TVA: ",V.vatNumber]})]})]})]}),(0,sn.jsxs)("div",{className:"invoice-details",children:[(0,sn.jsx)("div",{className:"left"}),(0,sn.jsxs)("div",{className:"right",children:[(0,sn.jsxs)("div",{className:"invoice-info-item",children:[(0,sn.jsx)("span",{className:"label",children:"N\xb0 de facture:"}),(0,sn.jsx)("span",{className:"value",children:(e=>{if(!e)return H;if("fr"===T){const t=e.match(/^INV-(\d{4})-(\d{1,6})$/);if(t){const e=t[1],n=t[2].padStart(5,"0");return"FR-".concat(e,"-").concat(n)}}return e})(k.invoiceNumber)})]}),(0,sn.jsxs)("div",{className:"invoice-info-item",children:[(0,sn.jsx)("span",{className:"label",children:"Date de facture:"}),(0,sn.jsx)("span",{className:"value",children:q(k.invoiceDate)})]}),k.serviceDate&&(0,sn.jsxs)("div",{className:"invoice-info-item",children:[(0,sn.jsx)("span",{className:"label",children:"Date de prestation:"}),(0,sn.jsx)("span",{className:"value",children:q(k.serviceDate)})]}),k.dueDate&&(0,sn.jsxs)("div",{className:"invoice-info-item",children:[(0,sn.jsx)("span",{className:"label",children:"Date d'\xe9ch\xe9ance:"}),(0,sn.jsx)("span",{className:"value",children:q(k.dueDate)})]})]})]}),"fr"===T&&(X.address||X.city||X.postalCode||X.country)&&(0,sn.jsxs)("div",{className:"delivery-address",children:[(0,sn.jsx)("h3",{children:"Adresse de livraison"}),V&&(0,sn.jsxs)(sn.Fragment,{children:[V.companyName&&(0,sn.jsx)("p",{children:(0,sn.jsx)("strong",{children:V.companyName})}),V.contactName&&(0,sn.jsx)("p",{children:V.contactName}),X.address&&(0,sn.jsx)("p",{children:X.address}),(X.city||X.postalCode)&&(0,sn.jsx)("p",{children:[X.city,X.postalCode].filter(Boolean).join(", ")}),X.country&&(0,sn.jsx)("p",{children:X.country}),"invoice"===X.type&&(0,sn.jsx)("p",{style:{fontSize:"9pt",color:"#2563eb"},children:"\ud83d\udccd Adresse de livraison personnalis\xe9e"}),"billing"===X.type&&(0,sn.jsx)("p",{style:{fontSize:"9pt",color:"#2563eb"},children:"\u2713 Identique \xe0 l'adresse de facturation"})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h3",{style:{fontSize:"14pt",fontWeight:"bold",marginBottom:"15px",color:"#1f2937"},children:"D\xe9tail des prestations"}),(0,sn.jsxs)("table",{className:"items-table",children:[(0,sn.jsx)("thead",{children:(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("th",{children:"Description"}),(0,sn.jsx)("th",{children:"Qt\xe9"}),(0,sn.jsx)("th",{children:"Prix unitaire"}),(0,sn.jsx)("th",{children:"TVA"}),(0,sn.jsx)("th",{children:"Total HT"})]})}),(0,sn.jsx)("tbody",{children:k.items&&k.items.length>0?k.items.map((e,t)=>(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{children:e.description||"-"}),(0,sn.jsx)("td",{children:e.quantity||1}),(0,sn.jsx)("td",{children:K(e.unitPrice||0)}),(0,sn.jsx)("td",{children:Y(e.taxRate||0)}),(0,sn.jsx)("td",{children:K(E(e))})]},t)):(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{children:"-"}),(0,sn.jsx)("td",{children:"1"}),(0,sn.jsx)("td",{children:K(0)}),(0,sn.jsx)("td",{children:Y(0)}),(0,sn.jsx)("td",{children:K(0)})]})})]})]}),(0,sn.jsx)("div",{className:"totals",children:(0,sn.jsx)("table",{children:(0,sn.jsxs)("tbody",{children:[(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{children:"Sous-total HT :"}),(0,sn.jsx)("td",{children:K(z)})]}),(0,sn.jsxs)("tr",{children:[(0,sn.jsxs)("td",{children:["TVA ",k.items&&k.items.length>0&&void 0!==k.items[0].taxRate&&null!==k.items[0].taxRate?Y(k.items[0].taxRate):Y(20)," :"]}),(0,sn.jsx)("td",{children:K(W)})]}),(0,sn.jsxs)("tr",{className:"total-row",children:[(0,sn.jsx)("td",{children:"Total TTC :"}),(0,sn.jsx)("td",{children:K(U)})]})]})})}),"fr"===T&&(J.iban||J.bic||J.bankName||J.accountHolder)&&(0,sn.jsxs)("div",{className:"bank-info",children:[(0,sn.jsx)("h3",{children:"Informations bancaires"}),J.iban&&(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"IBAN:"})," ",(0,sn.jsx)("span",{style:{fontFamily:"monospace"},children:J.iban})]}),J.bic&&(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"BIC/SWIFT:"})," ",(0,sn.jsx)("span",{style:{fontFamily:"monospace"},children:J.bic})]}),J.bankName&&(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"Banque:"})," ",J.bankName]}),J.accountHolder&&(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"Titulaire:"})," ",J.accountHolder]})]})]}),"fr"===T&&(0,sn.jsx)("div",{className:"page page-2",children:(0,sn.jsxs)("div",{className:"legal-clauses",children:[(0,sn.jsx)("h3",{children:"Conditions l\xe9gales"}),(0,sn.jsxs)("div",{className:"legal-clause",children:[(0,sn.jsx)("h4",{children:"Identit\xe9 du prestataire:"}),(0,sn.jsx)("p",{children:"Le prestataire certifie l'exactitude des informations figurant sur cette facture conform\xe9ment \xe0 l'article 289 du Code g\xe9n\xe9ral des imp\xf4ts. Toutes les mentions l\xe9gales obligatoires sont pr\xe9sentes sur cette facture."})]}),(0,sn.jsxs)("div",{className:"legal-clause",children:[(0,sn.jsx)("h4",{children:"Conditions de paiement:"}),(0,sn.jsxs)("p",{children:["Paiement \xe0 ",k.paymentTerms||"30"," jours. En cas de retard de paiement, des p\xe9nalit\xe9s de retard au taux de 3 fois le taux d'int\xe9r\xeat l\xe9gal en vigueur seront appliqu\xe9es de plein droit, ainsi qu'une indemnit\xe9 forfaitaire de 40\u20ac pour frais de recouvrement (articles L441-6 et D441-5 du Code de commerce)."]})]}),(0,sn.jsxs)("div",{className:"legal-clause",children:[(0,sn.jsx)("h4",{children:"Clause de r\xe9serve de propri\xe9t\xe9:"}),(0,sn.jsx)("p",{children:"Les marchandises demeurent la propri\xe9t\xe9 du vendeur jusqu'au paiement int\xe9gral du prix, conform\xe9ment \xe0 la loi n\xb080-335 du 12 mai 1980. Le d\xe9faut de paiement \xe0 l'\xe9ch\xe9ance rend exigible l'int\xe9gralit\xe9 des sommes dues."})]}),(0,sn.jsxs)("div",{className:"legal-clause",children:[(0,sn.jsx)("h4",{children:"Garantie de conformit\xe9:"}),(0,sn.jsx)("p",{children:"Les prestations sont r\xe9alis\xe9es conform\xe9ment aux r\xe8gles de l'art et aux normes en vigueur. Le prestataire garantit la conformit\xe9 de ses prestations aux sp\xe9cifications convenues. Toute r\xe9clamation doit \xeatre formul\xe9e par \xe9crit dans les 8 jours suivant la livraison."})]}),(0,sn.jsxs)("div",{className:"legal-clause",children:[(0,sn.jsx)("h4",{children:"Vices cach\xe9s:"}),(0,sn.jsx)("p",{children:"Conform\xe9ment aux articles 1641 \xe0 1649 du Code civil, le prestataire est tenu de la garantie \xe0 raison des d\xe9fauts cach\xe9s qui rendent la chose impropre \xe0 l'usage auquel on la destine, ou qui diminuent tellement cet usage que l'acheteur ne l'aurait pas acquise."})]}),(0,sn.jsxs)("div",{className:"legal-clause",children:[(0,sn.jsx)("h4",{children:"R\xe8glement des litiges:"}),(0,sn.jsx)("p",{children:"Tout litige relatif \xe0 l'interpr\xe9tation et \xe0 l'ex\xe9cution des pr\xe9sentes sera soumis aux tribunaux comp\xe9tents du ressort du si\xe8ge social du prestataire. Le droit fran\xe7ais est seul applicable."})]}),(0,sn.jsxs)("div",{className:"legal-clause",children:[(0,sn.jsx)("h4",{children:"Protection des donn\xe9es:"}),(0,sn.jsx)("p",{children:"Conform\xe9ment au RGPD et \xe0 la loi Informatique et Libert\xe9s, les donn\xe9es personnelles collect\xe9es sont trait\xe9es pour les besoins de la relation commerciale. Vous disposez d'un droit d'acc\xe8s, de rectification et de suppression de vos donn\xe9es."})]}),(0,sn.jsxs)("div",{className:"legal-clause",children:[(0,sn.jsx)("h4",{children:"D\xe9lai de prescription:"}),(0,sn.jsx)("p",{children:"Conform\xe9ment \xe0 l'article L110-4 du Code de commerce, toute action judiciaire relative aux obligations n\xe9es du pr\xe9sent contrat se prescrit par 5 ans \xe0 compter de la naissance de l'obligation."})]})]})})]})})})]})})};xY.workerSrc="/pdf.worker.min.js";const l5=e=>{let{formData:t,selectedClient:n,user:r,onClose:s,previewInvoiceNumber:a}=e;const{t:o}=nn(["common","invoices"]),[l,c]=(0,i.useState)(.8),[d,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(null),[m,f]=(0,i.useState)(1),[g,v]=(0,i.useState)(null),[y,x]=(0,i.useState)(!0),[b,w]=(0,i.useState)(null),[j,N]=(0,i.useState)(!1),[k,A]=(0,i.useState)(!1);(0,i.useEffect)(()=>((async()=>{try{var e,i,s,o,l,c,d,u,h,p,m,f,g,y,j,N,k,A,S,_,C,E,P,T,M,D,O;x(!0),w(null);const b="http://localhost:3001",R=(0,Ne.A)((0,Ne.A)({},r),{},{Company:{name:(null===r||void 0===r?void 0:r.companyName)||(null===r||void 0===r||null===(e=r.Company)||void 0===e?void 0:e.name)||"",address:(null===r||void 0===r?void 0:r.address)||(null===r||void 0===r||null===(i=r.Company)||void 0===i?void 0:i.address)||"",city:(null===r||void 0===r?void 0:r.city)||(null===r||void 0===r||null===(s=r.Company)||void 0===s?void 0:s.city)||"",postalCode:(null===r||void 0===r?void 0:r.postalCode)||(null===r||void 0===r||null===(o=r.Company)||void 0===o?void 0:o.postalCode)||"",country:(null===r||void 0===r?void 0:r.country)||(null===r||void 0===r||null===(l=r.Company)||void 0===l?void 0:l.country)||"",phone:(null===r||void 0===r?void 0:r.phone)||(null===r||void 0===r||null===(c=r.Company)||void 0===c?void 0:c.phone)||"",fax:(null===r||void 0===r?void 0:r.fax)||(null===r||void 0===r||null===(d=r.Company)||void 0===d?void 0:d.fax)||"",email:(null===r||void 0===r?void 0:r.email)||(null===r||void 0===r||null===(u=r.Company)||void 0===u?void 0:u.email)||"",website:(null===r||void 0===r?void 0:r.website)||(null===r||void 0===r||null===(h=r.Company)||void 0===h?void 0:h.website)||"",vatNumber:(null===r||void 0===r?void 0:r.vatNumber)||(null===r||void 0===r||null===(p=r.Company)||void 0===p?void 0:p.vatNumber)||"",sirenNumber:(null===r||void 0===r?void 0:r.siren)||(null===r||void 0===r?void 0:r.sirenNumber)||(null===r||void 0===r||null===(m=r.Company)||void 0===m?void 0:m.sirenNumber)||"",siretNumber:(null===r||void 0===r?void 0:r.siretNumber)||(null===r||void 0===r?void 0:r.siret)||(null===r||void 0===r||null===(f=r.Company)||void 0===f?void 0:f.siretNumber)||"",rcsNumber:(null===r||void 0===r?void 0:r.rcsNumber)||(null===r||void 0===r||null===(g=r.Company)||void 0===g?void 0:g.rcsNumber)||"",nafCode:(null===r||void 0===r?void 0:r.nafCode)||(null===r||void 0===r||null===(y=r.Company)||void 0===y?void 0:y.nafCode)||"",legalForm:(null===r||void 0===r?void 0:r.legalForm)||(null===r||void 0===r||null===(j=r.Company)||void 0===j?void 0:j.legalForm)||"",registeredCapital:(null===r||void 0===r?void 0:r.registeredCapital)||(null===r||void 0===r||null===(N=r.Company)||void 0===N?void 0:N.registeredCapital)||"",insuranceCompany:(null===r||void 0===r?void 0:r.insuranceCompany)||(null===r||void 0===r||null===(k=r.Company)||void 0===k?void 0:k.insuranceCompany)||"",insurancePolicyNumber:(null===r||void 0===r?void 0:r.insurancePolicyNumber)||(null===r||void 0===r||null===(A=r.Company)||void 0===A?void 0:A.insurancePolicyNumber)||"",insuranceCoverage:(null===r||void 0===r?void 0:r.insuranceCoverage)||(null===r||void 0===r||null===(S=r.Company)||void 0===S?void 0:S.insuranceCoverage)||"",bankInfo:{iban:(null===r||void 0===r||null===(_=r.Company)||void 0===_||null===(C=_.bankInfo)||void 0===C?void 0:C.iban)||(null===r||void 0===r?void 0:r.bankIBAN)||(null===r||void 0===r?void 0:r.iban)||"",bic:(null===r||void 0===r||null===(E=r.Company)||void 0===E||null===(P=E.bankInfo)||void 0===P?void 0:P.bic)||(null===r||void 0===r?void 0:r.bankBIC)||(null===r||void 0===r?void 0:r.bic)||"",bankName:(null===r||void 0===r||null===(T=r.Company)||void 0===T||null===(M=T.bankInfo)||void 0===M?void 0:M.bankName)||(null===r||void 0===r?void 0:r.bankName)||"",accountHolder:(null===r||void 0===r||null===(D=r.Company)||void 0===D||null===(O=D.bankInfo)||void 0===O?void 0:O.accountHolder)||(null===r||void 0===r?void 0:r.accountHolder)||[null===r||void 0===r?void 0:r.firstName,null===r||void 0===r?void 0:r.lastName].filter(Boolean).join(" ")}}}),I={formData:(0,Ne.A)((0,Ne.A)({},t),{},{invoiceNumber:t.invoiceNumber||a,currency:t.currency||(null===r||void 0===r?void 0:r.currency)||"EUR",invoiceMode:t.invoiceMode||"fr"}),client:n,user:R};let L;if(L=I.formData.id?await fetch("".concat(b,"/api/invoices/").concat(I.formData.id,"/pdf"),{method:"GET",headers:{Authorization:"Bearer ".concat(localStorage.getItem("token"))}}):await fetch("".concat(b,"/api/pdf/generate-preview"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(I)}),!L.ok)throw new Error("HTTP error! status: ".concat(L.status));const F=await L.blob(),B=URL.createObjectURL(F);v(B)}catch(b){console.error("PDF\u751f\u6210\u5931\u8d25:",b),w(b.message)}finally{x(!1)}})(),()=>{g&&URL.revokeObjectURL(g)}),[t,n,r,a]);return y?(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow-xl p-8",children:(0,sn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,sn.jsx)("span",{className:"text-lg",children:"\u6b63\u5728\u751f\u6210PDF\u9884\u89c8..."})]})})}):b?(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow-xl p-8 max-w-md",children:(0,sn.jsxs)("div",{className:"text-center",children:[(0,sn.jsx)("div",{className:"text-red-500 text-6xl mb-4",children:"\u26a0\ufe0f"}),(0,sn.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"PDF\u751f\u6210\u5931\u8d25"}),(0,sn.jsx)("p",{className:"text-gray-600 mb-4",children:b}),(0,sn.jsx)("button",{onClick:s,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"\u5173\u95ed"})]})})}):(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 ".concat(d?"p-0":"p-4"),children:(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-xl ".concat(d?"w-full h-full":"max-w-6xl max-h-[90vh]"," flex flex-col"),children:[(0,sn.jsxs)("div",{className:"flex justify-between items-center p-4 border-b no-print",children:[(0,sn.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:[o("common:printPreview")," - PDF"]}),(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsx)("label",{className:"text-sm text-gray-600",children:"\u7f29\u653e:"}),(0,sn.jsxs)("select",{value:l,onChange:e=>c(parseFloat(e.target.value)),className:"border rounded px-2 py-1 text-sm",children:[(0,sn.jsx)("option",{value:.5,children:"50%"}),(0,sn.jsx)("option",{value:.75,children:"75%"}),(0,sn.jsx)("option",{value:.8,children:"80%"}),(0,sn.jsx)("option",{value:1,children:"100%"}),(0,sn.jsx)("option",{value:1.25,children:"125%"}),(0,sn.jsx)("option",{value:1.5,children:"150%"})]})]}),h>1&&(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsx)("button",{onClick:()=>f(Math.max(1,m-1)),disabled:m<=1,className:"px-2 py-1 border rounded disabled:opacity-50",children:"\u2190"}),(0,sn.jsxs)("span",{className:"text-sm",children:[m," / ",h]}),(0,sn.jsx)("button",{onClick:()=>f(Math.min(h,m+1)),disabled:m>=h,className:"px-2 py-1 border rounded disabled:opacity-50",children:"\u2192"})]}),(0,sn.jsxs)("button",{onClick:()=>{if(g){const e=document.createElement("a");e.href=g,e.download="".concat(t.invoiceNumber||a,".pdf"),document.body.appendChild(e),e.click(),document.body.removeChild(e)}},className:"flex items-center space-x-2 bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700",title:"\u4e0b\u8f7dPDF",children:[(0,sn.jsx)(vi,{size:16}),(0,sn.jsx)("span",{children:"\u4e0b\u8f7d"})]}),(0,sn.jsxs)("button",{onClick:async()=>{if(n&&n.email){N(!0),w("");try{var e,i,s,o,l,c,d,u;console.log("=== \u5f00\u59cb\u90ae\u4ef6\u53d1\u9001\u6d41\u7a0b ===");const p="http://localhost:3001";console.log("API_BASE_URL:",p);const m=(0,Ne.A)((0,Ne.A)({},r),{},{Company:(0,Ne.A)((0,Ne.A)({},r.Company||{}),{},{bankInfo:{iban:(null===r||void 0===r||null===(e=r.Company)||void 0===e||null===(i=e.bankInfo)||void 0===i?void 0:i.iban)||(null===r||void 0===r?void 0:r.bankIBAN)||(null===r||void 0===r?void 0:r.iban)||"",bic:(null===r||void 0===r||null===(s=r.Company)||void 0===s||null===(o=s.bankInfo)||void 0===o?void 0:o.bic)||(null===r||void 0===r?void 0:r.bankBIC)||(null===r||void 0===r?void 0:r.bic)||"",bankName:(null===r||void 0===r||null===(l=r.Company)||void 0===l||null===(c=l.bankInfo)||void 0===c?void 0:c.bankName)||(null===r||void 0===r?void 0:r.bankName)||"",accountHolder:(null===r||void 0===r||null===(d=r.Company)||void 0===d||null===(u=d.bankInfo)||void 0===u?void 0:u.accountHolder)||(null===r||void 0===r?void 0:r.accountHolder)||[null===r||void 0===r?void 0:r.firstName,null===r||void 0===r?void 0:r.lastName].filter(Boolean).join(" ")}})});(0,Ne.A)((0,Ne.A)({},t),{},{invoiceNumber:t.invoiceNumber||a});console.log("=== \u539f\u59cb\u6570\u636e\u68c0\u67e5 ==="),console.log("formData:",t),console.log("selectedClient:",n),console.log("user:",r),console.log("previewInvoiceNumber:",a);const f=(t.items||[]).map((e,t)=>{console.log("\u9a8c\u8bc1\u7b2c".concat(t+1,"\u9879:"),e);const n={description:e.description||"",quantity:parseFloat(e.quantity)||1,unitPrice:parseFloat(e.unitPrice)||0,taxRate:parseFloat(e.taxRate)||20};return console.log("\u9a8c\u8bc1\u540e\u7b2c".concat(t+1,"\u9879:"),n),n}),g=parseInt(n.id,10);console.log("clientId\u8f6c\u6362:",n.id,"->",g,"type:",typeof g),console.log("=== \u8ba1\u7b97\u53d1\u7968\u91d1\u989d ===");let v=0,y=0;f.forEach((e,t)=>{const n=e.quantity*e.unitPrice,r=n*(e.taxRate/100);console.log("\u7b2c".concat(t+1,"\u9879\u8ba1\u7b97:"),{quantity:e.quantity,unitPrice:e.unitPrice,taxRate:e.taxRate,itemSubtotal:n,itemTax:r}),v+=n,y+=r});const x=v+y;console.log("\u91d1\u989d\u8ba1\u7b97\u7ed3\u679c:",{subtotal:v,taxAmount:y,total:x});const b=(0,Ne.A)((0,Ne.A)({},t),{},{invoiceNumber:t.invoiceNumber||a,currency:t.currency||(null===r||void 0===r?void 0:r.currency)||"EUR",invoiceMode:t.invoiceMode||"fr",clientId:g,status:"sent",issueDate:t.issueDate||(new Date).toISOString().split("T")[0],dueDate:t.dueDate||new Date(Date.now()+2592e6).toISOString().split("T")[0],items:f,subtotal:parseFloat(v.toFixed(2)),taxAmount:parseFloat(y.toFixed(2)),total:parseFloat(x.toFixed(2)),totalAmount:parseFloat(x.toFixed(2))});if(console.log("=== \u53d1\u9001\u7ed9\u540e\u7aef\u7684\u53d1\u7968\u6570\u636e ==="),console.log("\u5b8c\u6574payload:",JSON.stringify(b,null,2)),console.log("items\u6570\u7ec4:",b.items),console.log("clientId:",b.clientId,"type:",typeof b.clientId),console.log("issueDate:",b.issueDate),console.log("=== \u524d\u7aef\u6570\u636e\u9a8c\u8bc1 ==="),!b.clientId||isNaN(b.clientId))throw console.error("\u5ba2\u6237 ID validation failed:",b.clientId),new Error("Invalid client ID");if(console.log("\u2713 clientId\u9a8c\u8bc1\u901a\u8fc7"),!b.items||0===b.items.length)throw console.error("Items validation failed:",b.items),new Error("Invoice items cannot be empty");console.log("\u2713 items\u6570\u7ec4\u9a8c\u8bc1\u901a\u8fc7\uff0c\u957f\u5ea6:",b.items.length);for(let e=0;e<b.items.length;e++){const t=b.items[e];if(console.log("\u9a8c\u8bc1\u7b2c".concat(e+1,"\u9879:"),t),!t.description||""===t.description.trim())throw console.error("Item ".concat(e+1," description validation failed:"),t.description),new Error("Item ".concat(e+1,": description is required"));if(isNaN(t.quantity)||t.quantity<=0)throw console.error("Item ".concat(e+1," quantity validation failed:"),t.quantity),new Error("Item ".concat(e+1,": quantity must be greater than 0"));if(isNaN(t.unitPrice)||t.unitPrice<0)throw console.error("Item ".concat(e+1," unit price validation failed:"),t.unitPrice),new Error("Item ".concat(e+1,": unit price cannot be negative"));console.log("\u2713 \u7b2c".concat(e+1,"\u9879\u9a8c\u8bc1\u901a\u8fc7"))}console.log("=== \u53d1\u9001HTTP\u8bf7\u6c42\u5230\u540e\u7aef ===");const w="".concat(p,"/api/invoices"),j={"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},N=JSON.stringify(b);console.log("\u8bf7\u6c42URL:",w),console.log("\u8bf7\u6c42\u5934:",j),console.log("\u8bf7\u6c42\u4f53\u957f\u5ea6:",N.length),console.log("\u8bf7\u6c42\u4f53\u5185\u5bb9:",N);const k=await fetch(w,{method:"POST",headers:j,body:N});console.log("=== \u540e\u7aef\u54cd\u5e94\u5206\u6790 ==="),console.log("\u54cd\u5e94\u72b6\u6001:",k.status),console.log("\u54cd\u5e94\u72b6\u6001\u6587\u672c:",k.statusText),console.log("\u54cd\u5e94\u5934:",Object.fromEntries(k.headers.entries()));const S=await k.text();if(console.log("\u54cd\u5e94\u539f\u59cb\u5185\u5bb9:",S),!k.ok){let e="Failed to save invoice",t=null;try{t=JSON.parse(S),console.log("\u89e3\u6790\u540e\u7684\u9519\u8bef\u8be6\u60c5:",t),t.message&&(e=t.message),t.details&&Array.isArray(t.details)&&(e+=": "+t.details.join(", "))}catch(h){console.error("\u89e3\u6790\u9519\u8bef\u54cd\u5e94\u5931\u8d25:",h),e+=" (HTTP ".concat(k.status,")")}throw console.error("\u4fdd\u5b58\u53d1\u7968\u5931\u8d25\uff0c\u5b8c\u6574\u9519\u8bef\u4fe1\u606f:",{status:k.status,statusText:k.statusText,responseText:S,errorDetails:t}),new Error(e)}let _=null;try{const e=JSON.parse(S);if(console.log("\u4fdd\u5b58\u6210\u529f\uff0c\u5b8c\u6574\u54cd\u5e94\u6570\u636e:",e),e.success&&e.data&&e.data.invoice)_=e.data.invoice,console.log("\u63d0\u53d6\u7684\u53d1\u7968\u6570\u636e:",_);else{if(!e.id)throw console.error("Unable to extract invoice data from response:",e),new Error("Invalid server response: missing invoice data");_=e,console.log("\u4f7f\u7528\u76f4\u63a5\u683c\u5f0f\u7684\u53d1\u7968\u6570\u636e:",_)}console.log("\u53d1\u7968ID\u68c0\u67e5:",{savedInvoice:_,hasId:_&&"id"in _,idValue:_?_.id:null,idType:_?typeof _.id:"undefined",keys:_?Object.keys(_):[]})}catch(h){throw console.error("Failed to parse successful response:",h),new Error("Invalid server response format")}if(!_||!_.id)throw console.error("Saved invoice is missing ID:",_),new Error("Saved invoice missing ID; cannot send email");console.log("=== \u5f00\u59cb\u53d1\u9001\u90ae\u4ef6 ===");const C={invoiceId:_.id,recipientEmail:n.email,type:"invoice",attachPDF:!0,useUserConfig:!0};console.log("\u90ae\u4ef6\u53d1\u9001payload:",C);const E=await fetch("".concat(p,"/api/ai/send-invoice-email"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify(C)});if(console.log("\u90ae\u4ef6\u53d1\u9001\u54cd\u5e94\u72b6\u6001:",E.status),!E.ok){const e=await E.json();throw console.error("\u90ae\u4ef6\u53d1\u9001\u5931\u8d25:",e),new Error(e.message||"HTTP error! status: ".concat(E.status))}const P=await E.json();console.log("\u90ae\u4ef6\u53d1\u9001\u6210\u529f:",P),A(!0),alert("\u90ae\u4ef6\u5df2\u6210\u529f\u53d1\u9001\u81f3 ".concat(n.email))}catch(b){console.error("=== \u90ae\u4ef6\u53d1\u9001\u6d41\u7a0b\u5931\u8d25 ==="),console.error("\u9519\u8bef\u7c7b\u578b:",b.constructor.name),console.error("\u9519\u8bef\u6d88\u606f:",b.message),console.error("\u9519\u8bef\u5806\u6808:",b.stack),w("\u90ae\u4ef6\u53d1\u9001\u5931\u8d25: ".concat(b.message)),alert("\u90ae\u4ef6\u53d1\u9001\u5931\u8d25: ".concat(b.message))}finally{N(!1)}}else w("Please select a client and ensure the client has an email address")},disabled:j||!(null!==n&&void 0!==n&&n.email),className:"flex items-center space-x-2 px-4 py-2 rounded ".concat(j||null===n||void 0===n||!n.email?"bg-gray-400 cursor-not-allowed":k?"bg-green-600 hover:bg-green-700":"bg-orange-600 hover:bg-orange-700"," text-white"),title:null!==n&&void 0!==n&&n.email?k?"\u90ae\u4ef6\u5df2\u53d1\u9001":"\u53d1\u9001\u90ae\u4ef6":"\u5ba2\u6237\u90ae\u7bb1\u5730\u5740\u4e0d\u5b58\u5728",children:[(0,sn.jsx)(Ri,{size:16}),(0,sn.jsx)("span",{children:j?"\u53d1\u9001\u4e2d...":k?"\u5df2\u53d1\u9001":"\u53d1\u9001\u90ae\u4ef6"})]}),(0,sn.jsxs)("button",{onClick:()=>{if(g){const e=document.createElement("iframe");e.style.display="none",e.src=g,document.body.appendChild(e),e.onload=()=>{e.contentWindow.print(),setTimeout(()=>{document.body.removeChild(e)},1e3)}}},className:"flex items-center space-x-2 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:[(0,sn.jsx)(Gi,{size:16}),(0,sn.jsx)("span",{children:o("common:print")})]}),(0,sn.jsx)("button",{onClick:()=>{u(!d)},className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",title:d?"\u9000\u51fa\u5168\u5c4f":"\u5168\u5c4f",children:d?(0,sn.jsx)(Bi,{size:20}):(0,sn.jsx)(Li,{size:20})}),(0,sn.jsx)("button",{onClick:s,className:"p-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded",children:(0,sn.jsx)(ls,{size:20})})]})]}),(0,sn.jsx)("div",{className:"flex-1 overflow-auto p-4 bg-gray-100",children:(0,sn.jsx)("div",{className:"flex justify-center",children:g&&(0,sn.jsx)(J3,{file:g,onLoadSuccess:e=>{let{numPages:t}=e;p(t)},onLoadError:e=>{console.error("PDF\u52a0\u8f7d\u9519\u8bef:",e),w("PDF\u52a0\u8f7d\u5931\u8d25: ".concat(e.message))},loading:(0,sn.jsxs)("div",{className:"flex items-center justify-center p-8",children:[(0,sn.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"}),(0,sn.jsx)("span",{className:"ml-2",children:"\u52a0\u8f7dPDF\u4e2d..."})]}),error:(0,sn.jsxs)("div",{className:"text-center p-8",children:[(0,sn.jsx)("div",{className:"text-red-500 text-4xl mb-2",children:"\u26a0\ufe0f"}),(0,sn.jsx)("p",{className:"text-red-600",children:"PDF\u52a0\u8f7d\u5931\u8d25"}),(0,sn.jsx)("button",{onClick:()=>window.location.reload(),className:"mt-4 bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:"\u5237\u65b0\u9875\u9762\u91cd\u8bd5"})]}),children:(0,sn.jsx)(g4,{pageNumber:m,scale:l,renderTextLayer:!0,renderAnnotationLayer:!0,onRenderError:e=>{console.error("\u9875\u9762\u6e32\u67d3\u9519\u8bef:",e)}})})})})]})})};const c5=new class{async getAllTemplates(){try{return(await zt.default.get("/invoice-templates")).data}catch(e){throw console.error("Failed to get template list:",e),e}}async getDefaultTemplate(){try{return(await zt.default.get("/invoice-templates/default")).data}catch(t){var e;if(404===(null===(e=t.response)||void 0===e?void 0:e.status))return null;throw console.error("Failed to get default template:",t),t}}async getTemplate(e){try{return(await zt.default.get("/invoice-templates/".concat(e))).data}catch(t){throw console.error("Failed to get template:",t),t}}async createTemplate(e){try{return(await zt.default.post("/templates",e)).data}catch(t){throw console.error("Failed to create template:",t),t}}async updateTemplate(e,t){try{return(await zt.default.put("/templates/".concat(e),t)).data}catch(n){throw console.error("Failed to update template:",n),n}}async deleteTemplate(e){try{return(await zt.default.delete("/templates/".concat(e))).data}catch(t){throw console.error("Failed to delete template:",t),t}}async setDefaultTemplate(e){try{return(await zt.default.put("/templates/".concat(e,"/default"))).data}catch(t){throw console.error("Failed to set default template:",t),t}}applyTemplateToInvoice(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e||!e.fields)return t;const n=(0,Ne.A)({},t);return e.fields.forEach(e=>{const{name:t,value:r,targetEntity:i,fieldType:s}=e;let a=n;"client"===i?a=n.client=n.client||{}:"company"===i&&(a=n.company=n.company||{}),"fixed"===s?(a[t]=r,n._readOnlyFields||(n._readOnlyFields=[]),n._readOnlyFields.push("".concat(i,".").concat(t))):"flexible"===s&&(a[t]||(a[t]=r))}),n}validateInvoiceAgainstTemplate(e,t){const n=[];return e&&e.fields?(e.fields.forEach(e=>{const{name:r,label:i,required:s,targetEntity:a}=e;let o=t;"client"===a?o=t.client||{}:"company"===a&&(o=t.company||{}),!s||o[r]&&""!==o[r].toString().trim()||n.push("".concat(i||r," is a required field"))}),{isValid:0===n.length,errors:n}):{isValid:!0,errors:[]}}},d5=c5,u5="http://localhost:3001";const h5=new class{async createInvoice(e){try{var t;console.log("=== InvoiceService.createInvoice \u8c03\u8bd5 ==="),console.log("1. \u539f\u59cb\u53d1\u7968\u6570\u636e:",e),console.log("2. \u6570\u636e\u7c7b\u578b\u68c0\u67e5:"),console.log("   - clientId:",e.clientId,"(\u7c7b\u578b:",typeof e.clientId,")"),console.log("   - issueDate:",e.issueDate,"(\u7c7b\u578b:",typeof e.issueDate,")"),console.log("   - dueDate:",e.dueDate,"(\u7c7b\u578b:",typeof e.dueDate,")"),console.log("   - items:",e.items,"(\u957f\u5ea6:",null===(t=e.items)||void 0===t?void 0:t.length,")"),console.log("   - subtotal:",e.subtotal,"(\u7c7b\u578b:",typeof e.subtotal,")"),console.log("   - total:",e.total,"(\u7c7b\u578b:",typeof e.total,")");const n=localStorage.getItem("token"),r=JSON.stringify(e);console.log("3. \u8bf7\u6c42\u4f53 JSON:",r),console.log("4. \u8bf7\u6c42\u5934:",{"Content-Type":"application/json",Authorization:n?"Bearer ".concat(n.substring(0,20),"..."):"No token"});const i=await fetch("".concat(u5,"/api/invoices"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:r});if(console.log("5. \u54cd\u5e94\u72b6\u6001:",i.status,i.statusText),console.log("6. \u54cd\u5e94\u5934:",Object.fromEntries(i.headers.entries())),!i.ok){const e=await i.text();console.log("7. \u9519\u8bef\u54cd\u5e94\u5185\u5bb9:",e);try{const t=JSON.parse(e);console.log("8. \u89e3\u6790\u7684\u9519\u8befJSON:",t)}catch(Ae){console.log("8. \u65e0\u6cd5\u89e3\u6790\u9519\u8bef\u54cd\u5e94\u4e3aJSON")}throw new Error("HTTP error! status: ".concat(i.status))}const s=await i.json();return console.log("7. \u6210\u529f\u54cd\u5e94:",s),s}catch(n){throw console.error("Error creating invoice:",n),n}}async getAllInvoices(){try{const e=localStorage.getItem("token"),t=await fetch("".concat(u5,"/api/invoices"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return await t.json()}catch(e){throw console.error("Error fetching invoices:",e),e}}async getDefaultInvoice(){try{const e=localStorage.getItem("token"),t=await fetch("".concat(u5,"/api/invoices/default"),{headers:{Authorization:"Bearer ".concat(e)}});if(!t.ok)throw new Error("HTTP error! status: ".concat(t.status));return await t.json()}catch(e){throw console.error("Error fetching default invoice:",e),e}}async getInvoice(e){try{const t=localStorage.getItem("token"),n=await fetch("".concat(u5,"/api/invoices/").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));return await n.json()}catch(t){throw console.error("Error fetching invoice:",t),t}}async updateInvoice(e,t){try{const n=localStorage.getItem("token"),r=await fetch("".concat(u5,"/api/invoices/").concat(e),{method:"PUT",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)});if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));return await r.json()}catch(n){throw console.error("Error updating invoice:",n),n}}async deleteInvoice(e){try{const t=localStorage.getItem("token"),n=await fetch("".concat(u5,"/api/invoices/").concat(e),{method:"DELETE",headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));return await n.json()}catch(t){throw console.error("Error deleting invoice:",t),t}}async generatePDF(e){try{const t=localStorage.getItem("token");console.log("=== PDF\u751f\u6210\u8c03\u8bd5 ==="),console.log("1. \u53d1\u7968ID:",e),console.log("2. API_BASE_URL:",u5),console.log("3. \u5b8c\u6574URL:","".concat(u5,"/api/invoices/").concat(e,"/pdf"));const n=await fetch("".concat(u5,"/api/invoices/").concat(e,"/pdf"),{method:"GET",headers:{Authorization:"Bearer ".concat(t)}});if(console.log("4. \u54cd\u5e94\u72b6\u6001:",n.status),console.log("5. \u54cd\u5e94\u5934:",Object.fromEntries(n.headers.entries())),!n.ok){const e=await n.text();throw console.log("6. \u9519\u8bef\u54cd\u5e94:",e),new Error("HTTP error! status: ".concat(n.status))}const r=await n.blob();return console.log("7. PDF blob\u5927\u5c0f:",r.size,"\u5b57\u8282"),r}catch(t){throw console.error("Error generating PDF:",t),t}}async generateXML(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"factur-x";try{const n=localStorage.getItem("token"),r=await fetch("".concat(u5,"/api/invoices/").concat(e,"/xml"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify({format:t})});if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));return await r.text()}catch(n){throw console.error("Error generating XML:",n),n}}async sendInvoice(e,t){try{const n=localStorage.getItem("token"),r=await fetch("".concat(u5,"/api/invoices/").concat(e,"/send"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n)},body:JSON.stringify(t)});if(!r.ok)throw new Error("HTTP error! status: ".concat(r.status));return await r.json()}catch(n){throw console.error("Error sending invoice:",n),n}}async getInvoiceStats(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"month";try{const t=localStorage.getItem("token"),n=await fetch("".concat(u5,"/api/invoices/stats?period=").concat(e),{headers:{Authorization:"Bearer ".concat(t)}});if(!n.ok)throw new Error("HTTP error! status: ".concat(n.status));return await n.json()}catch(t){throw console.error("Error fetching invoice stats:",t),t}}},p5=h5,m5=["timestamp","issueDate","dueDate","serviceDate"],f5=e=>{let{user:t}=e;const n=ee(),{user:r,isLoading:s}=mn(),{clients:a,createClient:o,loadClients:l}=jn(),{getCompanySettings:c}=kn(),{t:d,i18n:u}=nn(["invoices","common"]),{isExpired:h,hasActiveSubscription:p,remainingDays:m,loading:f}=ps(),g=t||r,[v,y]=(0,i.useState)(!1),[x,b]=(0,i.useState)([]),[w,j]=(0,i.useState)("french-standard"),[N,k]=(0,i.useState)({}),[A,S]=(0,i.useState)(!1),[_,C]=(0,i.useState)("html"),[E,P]=(0,i.useState)(!1),[T,M]=(0,i.useState)(!1),[D,O]=(0,i.useState)({name:"",company:"",address:"",city:"",postalCode:"",country:"France",vatNumber:"",siren:"",siret:"",phone:"",email:""}),[R,I]=(0,i.useState)(!1),[L,F]=(0,i.useState)({clientId:"",issueDate:(new Date).toISOString().split("T")[0],dueDate:(()=>{const e=new Date;return e.setDate(e.getDate()+30),e.toISOString().split("T")[0]})(),serviceDate:(new Date).toISOString().split("T")[0],items:[{description:"",quantity:1,unitPrice:"",taxRate:"france"===(null===g||void 0===g?void 0:g.invoiceMode)?20:""}],notes:"",defaultTaxRate:"france"===(null===g||void 0===g?void 0:g.invoiceMode)?20:"",invoiceNumber:"",tvaExempt:!1,tvaExemptClause:"",invoiceType:"standard",sellerCompanyName:"",sellerEmail:"",sellerPhone:"",sellerAddress:"",sellerVATNumber:"",sellerSIREN:"",sellerSIRET:"",sellerLegalForm:"",sellerRegisteredCapital:"",sellerRCS:"",sellerNAF:"",deliveryAddress:"",deliveryCity:"",deliveryPostalCode:"",deliveryCountry:"",deliveryAddressSameAsBilling:!1}),[B,z]=(0,i.useState)(!1),{clientId:W,issueDate:U,dueDate:V,invoiceNumber:H,notes:q,defaultTaxRate:G,items:K,tvaExempt:Y,tvaExemptClause:X}=L,J=(0,i.useCallback)(async()=>{try{const e=await p5.getDefaultInvoice();if(e.defaultInvoice){const t=e.defaultInvoice;F(e=>(0,Ne.A)((0,Ne.A)({},e),{},{clientId:t.clientId||"",issueDate:(new Date).toISOString().split("T")[0],dueDate:(()=>{const e=new Date;return e.setDate(e.getDate()+30),e.toISOString().split("T")[0]})(),serviceDate:(new Date).toISOString().split("T")[0],items:t.items&&t.items.length>0?t.items.map(e=>({description:e.description||"",quantity:e.quantity||1,unitPrice:e.unitPrice||"",taxRate:e.taxRate||""})):[{description:"",quantity:1,unitPrice:"",taxRate:""}],notes:t.notes||"",defaultTaxRate:t.items&&t.items.length>0&&t.items[0].taxRate||""}))}}catch(e){console.error("Failed to load default invoice:",e),F(e=>(0,Ne.A)((0,Ne.A)({},e),{},{issueDate:(new Date).toISOString().split("T")[0],dueDate:(()=>{const e=new Date;return e.setDate(e.getDate()+30),e.toISOString().split("T")[0]})(),serviceDate:(new Date).toISOString().split("T")[0],items:[{description:"",quantity:1,unitPrice:0,taxRate:"france"===(null===g||void 0===g?void 0:g.invoiceMode)||"french"===(null===g||void 0===g?void 0:g.invoiceMode)?20:0}],tvaExempt:!1,tvaExemptClause:""}))}},[g]),$=(0,i.useCallback)(async()=>{try{const e=await d5.getAllTemplates();b(e)}catch(e){console.error("Failed to load data:",e),b([])}},[]),Q=async()=>{try{return(await zt.default.get("/invoice-numbers/next-number?format=french")).data.invoiceNumber}catch(e){console.error("Failed to get French invoice number:",e);const t=(new Date).getFullYear(),n=(Math.floor(9e5*Math.random())+1e5).toString().padStart(6,"0");return"FR-".concat(t,"-").concat(n)}},Z={zero:{rate:0,label:"Taux z\xe9ro (0%)"},special:{rate:2.1,label:"Taux particulier (2,1%)"},superReduced:{rate:5.5,label:"Taux super r\xe9duit (5,5%)"},reduced:{rate:10,label:"Taux r\xe9duit (10%)"},standard:{rate:20,label:"Taux standard (20%)"}},te=(0,i.useCallback)(e=>{try{const t=(0,Ne.A)((0,Ne.A)({},e),{},{timestamp:Date.now()});localStorage.setItem("newInvoiceFormData",JSON.stringify(t))}catch(t){console.error("Failed to save form data:",t)}},[]),ne=(0,i.useCallback)(()=>{try{const e=localStorage.getItem("newInvoiceFormData");if(e){const t=JSON.parse(e),n=Date.now()-t.timestamp>864e5;if(!n&&t.clientId){const{timestamp:e,issueDate:n,dueDate:r,serviceDate:i}=t,s=ws(t,m5);return F(e=>(0,Ne.A)((0,Ne.A)((0,Ne.A)({},e),s),{},{issueDate:(new Date).toISOString().split("T")[0],dueDate:(()=>{const e=new Date;return e.setDate(e.getDate()+30),e.toISOString().split("T")[0]})(),serviceDate:(new Date).toISOString().split("T")[0]})),!0}n&&localStorage.removeItem("newInvoiceFormData")}}catch(e){console.error("Failed to restore form data:",e),localStorage.removeItem("newInvoiceFormData")}return!1},[]),re=(0,i.useCallback)(()=>{try{localStorage.removeItem("newInvoiceFormData")}catch(e){console.error("Failed to clear saved form data:",e)}},[]);(0,i.useEffect)(()=>{if(!s&&g){$();ne()||J();const e=ye();if(F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{sellerCompanyName:e.name||"",sellerEmail:e.email||"",sellerPhone:e.phone||"",sellerAddress:e.address||"",sellerVATNumber:e.vatNumber||"",sellerSIREN:e.siren||"",sellerSIRET:e.siret||"",sellerLegalForm:e.legalForm||"",sellerRegisteredCapital:e.registeredCapital||"",sellerRCS:e.rcsNumber||"",sellerNAF:e.nafCode||""})),w&&w.startsWith("french-")){const e=w.replace("french-","");ie("france-template",e)}L.invoiceNumber||oe()}},[s,g,w,$,J,ne]);const ie=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"standard";if("france-template"===e){let r={sellerCompanyName:"",sellerAddress:"",sellerVATNumber:"",sellerSIREN:"",sellerSIRET:""};try{const e=localStorage.getItem("frenchCompanySettings");if(e){const t=JSON.parse(e);r={sellerCompanyName:t.sellerCompanyName||r.sellerCompanyName,sellerAddress:t.sellerAddress||r.sellerAddress,sellerVATNumber:t.sellerVATNumber||r.sellerVATNumber,sellerSIREN:t.sellerSIREN||r.sellerSIREN,sellerSIRET:t.sellerSIRET||r.sellerSIRET}}}catch(n){console.error("Failed to read French company info:",n)}const i=await Q();return F(e=>(0,Ne.A)((0,Ne.A)({},e),{},{invoiceNumber:i,frenchFields:{sellerCompanyName:r.sellerCompanyName,sellerAddress:r.sellerAddress,sellerVATNumber:r.sellerVATNumber,sellerSIREN:r.sellerSIREN,sellerSIRET:r.sellerSIRET},tvaExempt:"exempt"===t,autoLiquidation:"auto"===t,tvaExemptClause:"exempt"===t?"":void 0,defaultTaxRate:"exempt"===t||"auto"===t?0:Z.standard.rate,items:e.items.map(e=>(0,Ne.A)((0,Ne.A)({},e),{},{taxRate:"exempt"===t||"auto"===t?0:e.taxRate||Z.standard.rate}))})),void j(e)}try{const t=await d5.getTemplate(e),n=d5.applyTemplateToInvoice(t,L);F(e=>(0,Ne.A)((0,Ne.A)((0,Ne.A)({},e),n),{},{issueDate:e.issueDate,invoiceNumber:e.invoiceNumber})),j(e),console.log("Applied template: ".concat(t.name))}catch(n){console.error("Failed to apply template:",n),alert("Failed to apply template, please try again")}},se=(e,t,n)=>{const r=[...L.items];"taxRate"===t&&(L.tvaExempt||L.autoLiquidation)&&(n=0),r[e]=(0,Ne.A)((0,Ne.A)({},r[e]),{},{[t]:n});const i=(0,Ne.A)((0,Ne.A)({},L),{},{items:r});F(i),te(i)},ae=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;const n=new Date(e);return n.setDate(n.getDate()+t),n.toISOString().split("T")[0]},oe=async()=>{try{if(w&&(w.includes("french")||"france-template"===w)){const e=await Q();return F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{invoiceNumber:e})),e}const e=new Date,t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=Math.floor(1e4*Math.random()).toString().padStart(4,"0"),i="INV-".concat(t).concat(n,"-").concat(r);return F(e=>(0,Ne.A)((0,Ne.A)({},e),{},{invoiceNumber:i})),i}catch(e){console.error("\u751f\u6210\u53d1\u7968\u7f16\u53f7\u5931\u8d25:",e);const t=new Date,n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),i=Date.now().toString().slice(-4),s="INV-".concat(n).concat(r,"-").concat(i);return F(e=>(0,Ne.A)((0,Ne.A)({},e),{},{invoiceNumber:s})),s}},le=e=>{const t=(e.quantity||0)*(e.unitPrice||0);if(L.tvaExempt||L.autoLiquidation)return t;return t+t*((e.taxRate||0)/100)},ce=()=>L.items.reduce((e,t)=>e+le(t),0),de=()=>L.tvaExempt||L.autoLiquidation?0:L.items.reduce((e,t)=>e+(t.quantity||0)*(t.unitPrice||0)*((t.taxRate||0)/100),0),ue=()=>L.items.reduce((e,t)=>e+(t.quantity||0)*(t.unitPrice||0),0),he=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR";const n=Number(null!==e&&void 0!==e?e:0);if("fr"===(null===g||void 0===g?void 0:g.invoiceMode)||"france"===(null===g||void 0===g?void 0:g.invoiceMode)||"french"===(null===g||void 0===g?void 0:g.invoiceMode)||"fr"===u.language)try{return new Intl.NumberFormat("fr-FR",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(n).replace(/\u00A0/g," ").replace(/\u202F/g," ")}catch(Ae){return"".concat(t," ").concat(n.toFixed(2))}try{return new Intl.NumberFormat("en-US",{style:"currency",currency:t,minimumFractionDigits:2,maximumFractionDigits:2}).format(n)}catch(Ae){return"".concat(t," ").concat(n.toFixed(2))}},pe=e=>{const{name:t,value:n}=e.target;let r=n;"siren"!==t&&"siret"!==t||(r=n.replace(/\D/g,"")),O(e=>(0,Ne.A)((0,Ne.A)({},e),{},{[t]:r}))},me=()=>{M(!1),O({name:"",company:"",address:"",city:"",postalCode:"",country:"France",vatNumber:"",siren:"",siret:"",phone:"",email:""})},fe=async()=>{if(v)console.log("Save operation in progress; ignoring duplicate request");else{if(!ge())throw console.log("Form validation failed; cannot save"),new Error("Form validation failed");console.log("Starting to save invoice, form data:",L),y(!0);try{var e,t;const n=ye(),r={clientId:parseInt(L.clientId,10)||null,items:L.items.map(e=>({description:e.description||"",quantity:parseFloat(e.quantity)||1,unitPrice:parseFloat(e.unitPrice)||0,taxRate:L.tvaExempt||L.autoLiquidation?0:parseFloat(e.taxRate)||0})),issueDate:L.issueDate,dueDate:L.dueDate,notes:L.notes,status:"draft",subtotal:parseFloat(ue())||0,taxAmount:parseFloat(de())||0,total:parseFloat(ce())||0,totalAmount:parseFloat(ce())||0,templateId:w||null,currency:"EUR",locale:"fr"===u.language?"fr-FR":"en-US",invoiceNumber:L.invoiceNumber,serviceDate:L.serviceDate,deliveryAddress:L.deliveryAddress,deliveryCity:L.deliveryCity,deliveryPostalCode:L.deliveryPostalCode,deliveryCountry:L.deliveryCountry,tvaExempt:L.tvaExempt||!1,tvaExemptClause:L.tvaExemptClause||"",autoLiquidation:L.autoLiquidation||!1,sellerCompanyName:n.name||"",sellerCompanyAddress:[n.address,n.city,n.postalCode].filter(Boolean).join(" ")||"",sellerTaxId:n.vatNumber||"",sellerSiren:n.siren||"",sellerSiret:n.siret||"",sellerPhone:n.phone||"",sellerEmail:n.email||"",sellerNafCode:n.nafCode||"",sellerRcsNumber:n.rcsNumber||"",sellerLegalForm:n.legalForm||"",sellerRegisteredCapital:n.registeredCapital||""};console.log("Prepared invoice data:",r),console.log("Invoice data structure details:",JSON.stringify(r,null,2)),console.log("Client ID validation:",{clientId:r.clientId,clientIdType:typeof r.clientId,clientIdString:String(r.clientId),isValidClientId:!(!r.clientId||""===String(r.clientId).trim())}),console.log("Current available clients list:",a.map(e=>({id:e.id,name:e.name,company:e.company})));const i=parseInt(L.clientId,10);if(!i||isNaN(i))throw new Error("Invalid client ID; cannot create invoice");const s=a.find(e=>parseInt(e.id,10)===i);if(console.log("Selected client:",s),!s)throw new Error("Client ID ".concat(i," not found in clients list; please refresh and retry"));const o=await p5.createInvoice(r);console.log("Raw API response:",o);const l=o.invoice||(null===(e=o.data)||void 0===e?void 0:e.invoice)||o.data;return console.log("Invoice saved successfully; returned data:",l),console.log("Response structure analysis:",{hasData:!!o.data,hasInvoice:!!o.invoice,hasDataInvoice:!(null===(t=o.data)||void 0===t||!t.invoice),responseKeys:Object.keys(o||{}),dataKeys:o.data?Object.keys(o.data):null}),l&&l.id&&(F(e=>(0,Ne.A)((0,Ne.A)({},e),{},{id:l.id})),console.log("Updated invoice ID in formData:",l.id),re()),l}catch(n){throw console.error("Error creating invoice:",n),n}finally{y(!1)}}},ge=()=>{const e={};if(L.clientId){const t=String(L.clientId).trim();t&&""!==t&&"undefined"!==t&&"null"!==t||(e.clientId=d("invoices:validation.clientRequired"))}else e.clientId=d("invoices:validation.clientRequired");if(0===L.items.length&&(e.items=d("invoices:validation.itemsRequired")),"france"===(null===g||void 0===g?void 0:g.invoiceMode)||"french"===(null===g||void 0===g?void 0:g.invoiceMode)){const t=ye();if(t.name||(e.sellerCompanyName="Nom de l'entreprise vendeur obligatoire - Veuillez configurer dans les param\xe8tres"),t.address||t.city||(e.sellerAddress="Adresse du vendeur obligatoire - Veuillez configurer dans les param\xe8tres"),t.vatNumber){/^FR[0-9A-Z]{2}[0-9]{9}$/.test(t.vatNumber)||(e.sellerVATNumber="Format de num\xe9ro de TVA fran\xe7ais invalide (FR + 2 caract\xe8res + 9 chiffres)")}else e.sellerVATNumber="Num\xe9ro de TVA obligatoire - Veuillez configurer dans les param\xe8tres";if(t.siren){/^[0-9]{9}$/.test(t.siren)||(e.sellerSIREN="Format SIREN invalide (9 chiffres requis)")}else e.sellerSIREN="Num\xe9ro SIREN obligatoire - Veuillez configurer dans les param\xe8tres";if(t.siret){/^[0-9]{14}$/.test(t.siret)||(e.sellerSIRET="Format SIRET invalide (14 chiffres requis)")}else e.sellerSIRET="Num\xe9ro SIRET obligatoire - Veuillez configurer dans les param\xe8tres";t.legalForm||(e.sellerLegalForm="Forme juridique obligatoire - Veuillez configurer dans les param\xe8tres"),t.registeredCapital||(e.sellerRegisteredCapital="Capital social obligatoire - Veuillez configurer dans les param\xe8tres"),t.rcsNumber||(e.sellerRcsNumber="Num\xe9ro RCS obligatoire - Veuillez configurer dans les param\xe8tres"),t.nafCode||(e.sellerNafCode="Code APE/NAF obligatoire - Veuillez configurer dans les param\xe8tres"),!0===L.tvaExempt&&(L.tvaExemptClause&&""!==L.tvaExemptClause.trim()||(e.tvaExemptClause="Mention d'exon\xe9ration TVA obligatoire"))}const t=[];for(let n=0;n<L.items.length;n++){const e=L.items[n],r={};e.description||(r.description=d("invoices:validation.descriptionRequired")),(!e.quantity||e.quantity<=0)&&(r.quantity=d("invoices:validation.invalidQuantity")),(!e.unitPrice||e.unitPrice<=0)&&(r.unitPrice=d("invoices:validation.invalidUnitPrice")),(e.taxRate<0||e.taxRate>100)&&(r.taxRate=d("invoices:validation.invalidTaxRate")),Object.keys(r).length>0&&(t[n]=r)}return t.length>0&&(e.itemErrors=t),k(e),0===Object.keys(e).length},ve=(0,i.useMemo)(()=>{if(!L.clientId||!a.length)return null;const e=L.clientId,t=a.find(t=>!(!t||"undefined"===typeof t.id)&&(t.id===e||String(t.id)===String(e)||Number(t.id)===Number(e)));return t||null},[L.clientId,a]),ye=()=>{const e=c();return{name:e.name||(null===g||void 0===g?void 0:g.companyName)||"",address:e.address||(null===g||void 0===g?void 0:g.address)||"",city:e.city||(null===g||void 0===g?void 0:g.city)||"",postalCode:e.postalCode||(null===g||void 0===g?void 0:g.postalCode)||"",phone:e.phone||(null===g||void 0===g?void 0:g.phone)||"",email:e.email||(null===g||void 0===g?void 0:g.email)||"",vatNumber:e.vatNumber||(null===g||void 0===g?void 0:g.vatNumber)||"",siren:e.siren||(null===g||void 0===g?void 0:g.siren)||"",siret:e.siret||(null===g||void 0===g?void 0:g.siret)||"",legalForm:e.legalForm||(null===g||void 0===g?void 0:g.legalForm)||"",registeredCapital:e.registeredCapital||(null===g||void 0===g?void 0:g.registeredCapital)||"",rcsNumber:e.rcsNumber||(null===g||void 0===g?void 0:g.rcsNumber)||"",nafCode:e.nafCode||(null===g||void 0===g?void 0:g.nafCode)||""}};return(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(B4,{children:(0,sn.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,sn.jsx)(Es,{title:d("invoices:createNew"),subtitle:d("invoices:selectTemplate")}),(0,sn.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4 lg:py-8",children:(0,sn.jsxs)("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-4 lg:gap-8",children:[(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 order-1",children:(0,sn.jsx)("div",{className:"p-6",children:(0,sn.jsxs)("form",{onSubmit:async e=>{e.preventDefault();try{const e=await fe();e&&e.id&&(alert(d("invoices:messages.createSuccess")),n("/invoices"))}catch(t){console.error("Error creating invoice:",t),alert(d("invoices:messages.createError"))}},className:"space-y-6",children:[(0,sn.jsx)(a5,{selectedTemplate:w,onTemplateSelect:async e=>{let t,n=null;if(e&&"object"===typeof e&&e.id?(t=e.id,n=e):t=e&&e.target?e.target.value:e,t)if(t.startsWith("french-")){const e=t.replace("french-","");n&&n.vatType?await ie("france-template",n.vatType):await ie("france-template",e)}else await ie(t);else j("")},invoiceMode:null===g||void 0===g?void 0:g.invoiceMode}),(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,sn.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:[d("invoices:client")," *"]}),(0,sn.jsx)("button",{type:"button",onClick:l,className:"text-xs text-blue-600 hover:text-blue-800 focus:outline-none",children:"Refresh clients"})]}),(0,sn.jsxs)("div",{className:"flex space-x-2",children:[(0,sn.jsx)("button",{type:"button",onClick:()=>P(!0),className:"flex-1 px-3 py-2 border rounded-md text-left hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ".concat(N.clientId?"border-red-300 bg-red-50":"border-gray-300"),"aria-label":"Choose client",children:ve?ve.company?"".concat(ve.company," (").concat(ve.name,")"):"".concat(ve.name):"Choose client"}),(0,sn.jsx)("button",{type:"button",onClick:()=>M(!0),className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 focus:outline-none focus:ring-2 focus:ring-green-500 focus:ring-offset-2 whitespace-nowrap",children:"+ New Client"})]}),N.clientId&&(0,sn.jsx)("p",{className:"mt-1 text-sm text-red-600",children:N.clientId})]}),("france"===(null===g||void 0===g?void 0:g.invoiceMode)||"french"===(null===g||void 0===g?void 0:g.invoiceMode))&&(0,sn.jsx)(s5,{formData:L,setFormData:F,selectedClient:ve,validationErrors:N,setValidationErrors:k}),T&&(0,sn.jsx)("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:(0,sn.jsxs)("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[(0,sn.jsx)("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:(0,sn.jsx)("div",{className:"absolute inset-0 bg-gray-500 opacity-75",onClick:me})}),(0,sn.jsx)("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"\u200b"}),(0,sn.jsxs)("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[(0,sn.jsxs)("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Create New Client"}),(0,sn.jsx)("button",{type:"button",onClick:me,className:"text-gray-400 hover:text-gray-600",children:(0,sn.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,sn.jsxs)("div",{className:"space-y-4",children:[(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Client Name *"}),(0,sn.jsx)("input",{type:"text",name:"name",value:D.name,onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,sn.jsxs)("div",{className:"mt-1 relative",children:[(0,sn.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,sn.jsx)("svg",{className:"h-5 w-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,sn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 12a4 4 0 10-8 0 4 4 0 008 0zm0 0v1.5a2.5 2.5 0 005 0V12a9 9 0 10-9 9m4.5-1.206a8.959 8.959 0 01-4.5 1.207"})})}),(0,sn.jsx)("input",{type:"email",name:"email",value:D.email,onChange:pe,className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"client@example.com"})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"VAT Number"}),(0,sn.jsx)("input",{type:"text",name:"vatNumber",value:D.vatNumber,onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"FR12345678901"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"SIREN Number"}),(0,sn.jsx)("input",{type:"text",name:"siren",value:D.siren,onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"123456789",maxLength:"9"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"SIRET Number"}),(0,sn.jsx)("input",{type:"text",name:"siret",value:D.siret,onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"12345678901234",maxLength:"14"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Company Name"}),(0,sn.jsx)("input",{type:"text",name:"company",value:D.company,onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Phone Number"}),(0,sn.jsx)("input",{type:"tel",name:"phone",value:D.phone,onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,sn.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-3",children:"Billing Address"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Address"}),(0,sn.jsx)("input",{type:"text",name:"address",value:D.address,onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3 mt-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,sn.jsx)("input",{type:"text",name:"city",value:D.city,onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,sn.jsx)("input",{type:"text",name:"postalCode",value:D.postalCode,onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),(0,sn.jsx)("input",{type:"text",name:"country",value:D.country,onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),(0,sn.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900",children:"Delivery Address"}),(0,sn.jsxs)("label",{className:"flex items-center",children:[(0,sn.jsx)("input",{type:"checkbox",checked:D.sameAsAddress||!1,onChange:e=>{const t=e.target.checked;O(e=>(0,Ne.A)((0,Ne.A)({},e),{},{sameAsAddress:t,deliveryAddress:t?e.address:e.deliveryAddress||"",deliveryCity:t?e.city:e.deliveryCity||"",deliveryPostalCode:t?e.postalCode:e.deliveryPostalCode||"",deliveryCountry:t?e.country:e.deliveryCountry||""}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,sn.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Same as billing address"})]})]}),!D.sameAsAddress&&(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Delivery Address"}),(0,sn.jsx)("input",{type:"text",name:"deliveryAddress",value:D.deliveryAddress||"",onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3 mt-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,sn.jsx)("input",{type:"text",name:"deliveryCity",value:D.deliveryCity||"",onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,sn.jsx)("input",{type:"text",name:"deliveryPostalCode",value:D.deliveryPostalCode||"",onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),(0,sn.jsx)("input",{type:"text",name:"deliveryCountry",value:D.deliveryCountry||"",onChange:pe,className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]})]})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 px-4 py-3 sm:px-6 sm:flex sm:flex-row-reverse",children:[(0,sn.jsx)("button",{type:"button",onClick:async()=>{if(D.name.trim())if(!(D.siren&&D.siren.length>0)||9===D.siren.length&&/^\d{9}$/.test(D.siren))if(!(D.siret&&D.siret.length>0)||14===D.siret.length&&/^\d{14}$/.test(D.siret)){I(!0);try{var e,t,n,r;const i={name:D.name.trim(),email:D.email.trim(),company:D.company.trim(),address:D.address.trim(),city:D.city.trim(),postalCode:D.postalCode.trim(),country:D.country.trim(),vatNumber:D.vatNumber.trim(),siren:D.siren.trim()||null,siret:D.siret.trim()||null,phone:D.phone.trim(),sameAsAddress:D.sameAsAddress||!1,deliveryAddress:(null===(e=D.deliveryAddress)||void 0===e?void 0:e.trim())||"",deliveryCity:(null===(t=D.deliveryCity)||void 0===t?void 0:t.trim())||"",deliveryPostalCode:(null===(n=D.deliveryPostalCode)||void 0===n?void 0:n.trim())||"",deliveryCountry:(null===(r=D.deliveryCountry)||void 0===r?void 0:r.trim())||""},s=await o(i);me(),F(e=>(0,Ne.A)((0,Ne.A)({},e),{},{clientId:s.id})),alert("Client created successfully!")}catch(i){console.error("Failed to create client:",i),alert("Failed to create client: "+(i.message||"Unknown error"))}finally{I(!1)}}else alert("SIRET must be 14 digits");else alert("SIREN must be 9 digits");else alert("Client name is required")},disabled:R||!D.name,className:"w-full inline-flex justify-center rounded-md border border-transparent shadow-sm px-4 py-2 bg-blue-600 text-base font-medium text-white hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:ml-3 sm:w-auto sm:text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:R?"Creating...":"Create Client"}),(0,sn.jsx)("button",{type:"button",onClick:me,className:"mt-3 w-full inline-flex justify-center rounded-md border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 sm:mt-0 sm:ml-3 sm:w-auto sm:text-sm",children:"Cancel"})]})]})]})}),E&&(0,sn.jsx)(Q4,{isOpen:E,onClose:()=>P(!1),clients:a,initialSelectedId:L.clientId,onSelect:e=>(e=>{let t="";e&&""!==String(e).trim()&&"undefined"!==e&&"null"!==e&&(t=parseInt(e,10),isNaN(t)&&(t=""));const n=(0,Ne.A)((0,Ne.A)({},L),{},{clientId:t});F(n),te(n),N.clientId&&k(e=>(0,Ne.A)((0,Ne.A)({},e),{},{clientId:void 0}))})(e.id),onRefresh:l}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:d("invoices:invoiceNumber")}),(0,sn.jsxs)("div",{className:"flex gap-2",children:[(0,sn.jsx)("input",{type:"text",value:L.invoiceNumber,onChange:e=>F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{invoiceNumber:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors"}),(0,sn.jsx)("button",{type:"button",onClick:oe,className:"px-3 py-2 bg-blue-500 text-white rounded-md hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",title:"Regenerate invoice number",children:"\ud83d\udd04"})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Invoice Date"}),(0,sn.jsx)("input",{type:"date",value:L.issueDate?L.issueDate.includes("T")?L.issueDate.split("T")[0]:L.issueDate:"",onChange:e=>(e=>{F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{issueDate:e,dueDate:t.dueDate||ae(e)}))})(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",required:!0})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Due Date"}),(0,sn.jsx)("input",{type:"date",value:L.dueDate?L.dueDate.includes("T")?L.dueDate.split("T")[0]:L.dueDate:"",onChange:e=>F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{dueDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",required:!0})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Service Delivery Date",(0,sn.jsx)("span",{className:"text-xs text-gray-500 ml-2",children:"(Required for French invoices)"})]}),(0,sn.jsx)("input",{type:"date",value:L.serviceDate?L.serviceDate.includes("T")?L.serviceDate.split("T")[0]:L.serviceDate:"",onChange:e=>F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{serviceDate:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors",required:!0}),(0,sn.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Date when services were provided or goods delivered; defines VAT liability timing."})]}),(0,sn.jsxs)("div",{className:"border-t pt-4 mt-4",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,sn.jsxs)("button",{type:"button",onClick:()=>z(!B),className:"flex items-center text-sm font-medium text-gray-900 hover:text-blue-600 transition-colors",children:[(0,sn.jsx)("span",{children:"Customize Delivery Address"}),(0,sn.jsx)("svg",{className:"ml-2 h-4 w-4 transition-transform ".concat(B?"rotate-180":""),fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,sn.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),(0,sn.jsx)("span",{className:"text-xs text-gray-500",children:"(Optional, overrides client's default delivery address)"})]}),B&&(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2",children:[(0,sn.jsx)("div",{className:"sm:col-span-2 flex items-center justify-between",children:(0,sn.jsxs)("label",{className:"flex items-center",children:[(0,sn.jsx)("input",{type:"checkbox",checked:L.deliveryAddressSameAsBilling||!1,onChange:e=>{const t=e.target.checked;F(e=>(0,Ne.A)((0,Ne.A)({},e),{},{deliveryAddressSameAsBilling:t,deliveryAddress:t?(null===ve||void 0===ve?void 0:ve.address)||"":e.deliveryAddress,deliveryCity:t?(null===ve||void 0===ve?void 0:ve.city)||"":e.deliveryCity,deliveryPostalCode:t?(null===ve||void 0===ve?void 0:ve.postalCode)||"":e.deliveryPostalCode,deliveryCountry:t?(null===ve||void 0===ve?void 0:ve.country)||"":e.deliveryCountry}))},className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,sn.jsx)("span",{className:"ml-2 text-sm text-gray-600",children:"Same as client's billing address"})]})}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Delivery Address"}),(0,sn.jsx)("input",{type:"text",value:L.deliveryAddress,onChange:e=>F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{deliveryAddress:e.target.value})),placeholder:"Leave blank to use client's default delivery address",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-3 mt-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"City"}),(0,sn.jsx)("input",{type:"text",value:L.deliveryCity,onChange:e=>F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{deliveryCity:e.target.value})),placeholder:"Leave blank to use client's default",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Postal Code"}),(0,sn.jsx)("input",{type:"text",value:L.deliveryPostalCode,onChange:e=>F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{deliveryPostalCode:e.target.value})),placeholder:"Leave blank to use client's default",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),(0,sn.jsx)("input",{type:"text",value:L.deliveryCountry,onChange:e=>F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{deliveryCountry:e.target.value})),placeholder:"Leave blank to use client's default",className:"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"france"===(null===g||void 0===g?void 0:g.invoiceMode)||"french"===(null===g||void 0===g?void 0:g.invoiceMode)?d("invoices:french.vatCalculation"):"Quick Tax Rate Selection"}),(0,sn.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mb-3",children:Object.entries("france"===(null===g||void 0===g?void 0:g.invoiceMode)||"french"===(null===g||void 0===g?void 0:g.invoiceMode)?Z:{zero:{rate:0,label:"Tax Exempt (0%)"},low:{rate:5,label:"Low Rate (5%)"},standard:{rate:10,label:"Standard Rate (10%)"},high:{rate:20,label:"High Rate (20%)"}}).map(e=>{let[t,{rate:n,label:r}]=e;return(0,sn.jsxs)("button",{type:"button",onClick:()=>(e=>{F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{defaultTaxRate:e,items:t.items.map(t=>(0,Ne.A)((0,Ne.A)({},t),{},{taxRate:e}))}))})(n),className:"px-3 py-2 text-sm rounded-md border transition-colors ".concat(L.defaultTaxRate===n?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-700 border-gray-300 hover:bg-gray-50"),children:[n,"%"]},t)})}),("france"===(null===g||void 0===g?void 0:g.invoiceMode)||"french"===(null===g||void 0===g?void 0:g.invoiceMode))&&(0,sn.jsx)("p",{className:"text-xs text-gray-500 mb-4",children:d("invoices:french.vatCalculation")})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:d("invoices:defaultTaxRate")}),(0,sn.jsxs)("div",{className:"relative",children:[(0,sn.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:L.defaultTaxRate,onChange:e=>F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{defaultTaxRate:parseFloat(e.target.value)||""})),className:"w-full px-3 py-2 pr-8 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:d("invoices:defaultTaxRate")}),(0,sn.jsx)("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:"%"})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:d("invoices:items")}),(0,sn.jsx)("button",{type:"button",onClick:()=>{const e=L.tvaExempt||L.autoLiquidation?0:L.defaultTaxRate||"",t=(0,Ne.A)((0,Ne.A)({},L),{},{items:[...L.items,{description:"",quantity:1,unitPrice:"",taxRate:e}]});F(t),te(t)},className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:d("invoices:addItem")})]}),N.items&&(0,sn.jsx)("p",{className:"mb-3 text-sm text-red-600",children:N.items}),(0,sn.jsx)("div",{className:"space-y-4",children:L.items.map((e,t)=>{var n,r,i,s,a,o,l,c,u,h,p,m,f,g,v,y,x;return(0,sn.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,sn.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,sn.jsxs)("h4",{className:"text-sm font-medium text-gray-700",children:[d("common:item")," ",t+1]}),L.items.length>1&&(0,sn.jsx)("button",{type:"button",onClick:()=>(e=>{if(L.items.length>1){const t=L.items.filter((t,n)=>n!==e),n=(0,Ne.A)((0,Ne.A)({},L),{},{items:t});F(n),te(n)}})(t),className:"text-red-600 hover:text-red-800 text-sm",children:d("invoices:removeItem")})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,sn.jsxs)("div",{className:"lg:col-span-2",children:[(0,sn.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d("invoices:description")}),(0,sn.jsx)("input",{type:"text",value:e.description,onChange:e=>{var n,r;if(se(t,"description",e.target.value),null!==(n=N.itemErrors)&&void 0!==n&&null!==(r=n[t])&&void 0!==r&&r.description){const e=(0,Ne.A)({},N);delete e.itemErrors[t].description,0===Object.keys(e.itemErrors[t]).length&&delete e.itemErrors[t],k(e)}},className:"w-full px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-500 ".concat(null!==(n=N.itemErrors)&&void 0!==n&&null!==(r=n[t])&&void 0!==r&&r.description?"border-red-300 bg-red-50":"border-gray-300"),placeholder:d("invoices:description"),required:!0}),(null===(i=N.itemErrors)||void 0===i||null===(s=i[t])||void 0===s?void 0:s.description)&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:N.itemErrors[t].description})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d("invoices:quantity")}),(0,sn.jsx)("input",{type:"number",min:"0",step:"0.01",value:e.quantity,onChange:e=>{var n,r;if(se(t,"quantity",parseFloat(e.target.value)||0),null!==(n=N.itemErrors)&&void 0!==n&&null!==(r=n[t])&&void 0!==r&&r.quantity){const e=(0,Ne.A)({},N);delete e.itemErrors[t].quantity,0===Object.keys(e.itemErrors[t]).length&&delete e.itemErrors[t],k(e)}},className:"w-full px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-500 ".concat(null!==(a=N.itemErrors)&&void 0!==a&&null!==(o=a[t])&&void 0!==o&&o.quantity?"border-red-300 bg-red-50":"border-gray-300"),required:!0}),(null===(l=N.itemErrors)||void 0===l||null===(c=l[t])||void 0===c?void 0:c.quantity)&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:N.itemErrors[t].quantity})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d("invoices:unitPrice")}),(0,sn.jsx)("input",{type:"number",min:"0",step:"0.01",value:e.unitPrice,onChange:e=>{var n,r;if(se(t,"unitPrice",parseFloat(e.target.value)||0),null!==(n=N.itemErrors)&&void 0!==n&&null!==(r=n[t])&&void 0!==r&&r.unitPrice){const e=(0,Ne.A)({},N);delete e.itemErrors[t].unitPrice,0===Object.keys(e.itemErrors[t]).length&&delete e.itemErrors[t],k(e)}},className:"w-full px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-500 ".concat(null!==(u=N.itemErrors)&&void 0!==u&&null!==(h=u[t])&&void 0!==h&&h.unitPrice?"border-red-300 bg-red-50":"border-gray-300"),required:!0}),(null===(p=N.itemErrors)||void 0===p||null===(m=p[t])||void 0===m?void 0:m.unitPrice)&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:N.itemErrors[t].unitPrice})]})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3 mt-3",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d("invoices:taxRate")}),(0,sn.jsxs)("div",{className:"relative",children:[(0,sn.jsx)("input",{type:"number",min:"0",max:"100",step:"0.01",value:"object"===typeof e.taxRate?"":null!==(f=e.taxRate)&&void 0!==f?f:"",onChange:e=>{var n,r;if(se(t,"taxRate",parseFloat(e.target.value)||""),null!==(n=N.itemErrors)&&void 0!==n&&null!==(r=n[t])&&void 0!==r&&r.taxRate){const e=(0,Ne.A)({},N);delete e.itemErrors[t].taxRate,0===Object.keys(e.itemErrors[t]).length&&delete e.itemErrors[t],k(e)}},placeholder:"Enter tax rate",className:"w-full px-2 py-1 pr-6 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-500 ".concat(null!==(g=N.itemErrors)&&void 0!==g&&null!==(v=g[t])&&void 0!==v&&v.taxRate?"border-red-300 bg-red-50":"border-gray-300")}),(0,sn.jsx)("span",{className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-500 text-xs",children:"%"})]}),(null===(y=N.itemErrors)||void 0===y||null===(x=y[t])||void 0===x?void 0:x.taxRate)&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:N.itemErrors[t].taxRate})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d("invoices:subtotal")}),(0,sn.jsx)("div",{className:"px-2 py-1 text-sm bg-gray-100 border border-gray-300 rounded text-gray-700",children:he((e.quantity||0)*(e.unitPrice||0),"EUR")})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:d("invoices:total")}),(0,sn.jsx)("div",{className:"px-2 py-1 text-sm bg-blue-50 border border-blue-200 rounded text-blue-700 font-medium",children:he(le(e),"EUR")})]})]})]},t)})}),("france"===(null===g||void 0===g?void 0:g.invoiceMode)||"french"===(null===g||void 0===g?void 0:g.invoiceMode))&&(0,sn.jsx)("div",{className:"mt-6 p-3 bg-gray-50 border border-gray-200 rounded-md",children:(0,sn.jsxs)("div",{className:"space-y-3",children:[(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("input",{type:"checkbox",id:"tvaExempt",checked:L.tvaExempt||!1,onChange:e=>F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{tvaExempt:e.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),(0,sn.jsx)("label",{htmlFor:"tvaExempt",className:"ml-2 text-sm text-gray-700",children:"TVA Exempt"})]}),L.tvaExempt&&(0,sn.jsxs)("div",{className:"ml-6",children:[(0,sn.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"Exemption Clause *"}),(0,sn.jsx)("input",{type:"text",value:L.tvaExemptClause||"",onChange:e=>F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{tvaExemptClause:e.target.value})),className:"w-full px-2 py-1 text-sm border rounded focus:outline-none focus:ring-1 focus:ring-blue-500 ".concat(N.tvaExemptClause?"border-red-300 bg-red-50":"border-gray-300"),placeholder:"TVA non applicable, art. 293 B du CGI",required:!0}),N.tvaExemptClause&&(0,sn.jsx)("p",{className:"mt-1 text-xs text-red-600",children:N.tvaExemptClause})]})]})}),(0,sn.jsx)("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[(0,sn.jsxs)("div",{className:"flex justify-between",children:[(0,sn.jsxs)("span",{className:"text-gray-600",children:[d("invoices:subtotal"),":"]}),(0,sn.jsx)("span",{className:"font-medium",children:he(ue(),"EUR")})]}),(0,sn.jsxs)("div",{className:"flex justify-between",children:[(0,sn.jsxs)("span",{className:"text-gray-600",children:[d("invoices:totalTax"),":"]}),(0,sn.jsx)("span",{className:"font-medium",children:he(de(),"EUR")})]}),(0,sn.jsxs)("div",{className:"flex justify-between",children:[(0,sn.jsxs)("span",{className:"text-gray-900 font-semibold",children:[d("invoices:grandTotal"),":"]}),(0,sn.jsx)("span",{className:"font-bold text-blue-600 text-lg",children:he(ce(),"EUR")})]})]})})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:d("invoices:notes")}),(0,sn.jsx)("textarea",{value:L.notes,onChange:e=>F(t=>(0,Ne.A)((0,Ne.A)({},t),{},{notes:e.target.value})),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:d("invoices:notes")})]}),(0,sn.jsxs)("div",{className:"flex flex-col sm:flex-row sm:justify-end space-y-3 sm:space-y-0 sm:space-x-4 pt-6",children:[(0,sn.jsx)("button",{type:"button",onClick:()=>n("/invoices"),className:"w-full sm:w-auto px-6 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2",children:d("invoices:cancel")}),(0,sn.jsx)("button",{type:"submit",disabled:v,className:"w-full sm:w-auto px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed",children:d(v?"invoices:creating":"invoices:save")})]})]})})}),(0,sn.jsxs)("div",{className:"order-2 xl:order-2 space-y-4",children:[(0,sn.jsx)(r5,{formData:L,client:ve,user:g,selectedTemplate:w,loading:v}),(0,sn.jsx)(Z4,{invoice:L.id?{id:L.id,invoiceNumber:L.invoiceNumber}:null,formData:L,client:ve,user:g,onGeneratePDF:async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.id;try{let t=e;if(!t){if(console.log("Invoice not saved; auto-saving to generate PDF..."),!L.clientId||0===L.items.length)throw new Error("Please fill in the invoice information (client and items) first");const e=await fe();if(t=null===e||void 0===e?void 0:e.id,!t)throw new Error("Auto-saving invoice failed; cannot generate PDF");console.log("Auto-saved invoice successfully, ID:",t)}const n=localStorage.getItem("token"),r="http://localhost:3001",i=await fetch("".concat(r,"/api/invoices/").concat(t,"/pdf"),{method:"GET",headers:{Authorization:"Bearer ".concat(n),"Content-Type":"application/json"}});if(!i.ok)throw new Error("HTTP error! status: ".concat(i.status));const s=await i.blob(),a=window.URL.createObjectURL(s),o=document.createElement("a");o.href=a;const l=i.headers.get("Content-Disposition");let c="facture-".concat(L.invoiceNumber||"draft",".pdf");if(l){const e=l.match(/filename="(.+)"/);e&&(c=e[1])}return o.download=c,document.body.appendChild(o),o.click(),document.body.removeChild(o),window.URL.revokeObjectURL(a),{success:!0,invoiceId:t}}catch(t){throw console.error("Error generating PDF:",t),t}},onPrint:()=>{C("pdf"),S(!0)},loading:v,disabled:!L.clientId||0===L.items.length})]})]})}),A&&(0,sn.jsx)(sn.Fragment,{children:"pdf"===_?(0,sn.jsx)(l5,{formData:L,selectedClient:ve,user:g,previewInvoiceNumber:L.invoiceNumber,onClose:()=>S(!1)}):(0,sn.jsx)(o5,{formData:L,clients:a,client:ve,user:g,calculateTotals:()=>{const e=ue(),t=de();return{subtotal:e,taxAmount:t,total:e+t}},calculateItemTotal:le,formatCurrency:he,invoiceMode:null===g||void 0===g?void 0:g.invoiceMode,selectedTemplate:w,onClose:()=>S(!1)})})]})}),h&&(0,sn.jsx)(q4,{isVisible:!0,onRenew:()=>n("/pricing"),showBackground:!0})]})},g5={paid:{bg:"bg-green-100",text:"text-green-700",labelKey:"invoices:status.paid"},overdue:{bg:"bg-red-100",text:"text-red-700",labelKey:"invoices:status.overdue"},due:{bg:"bg-yellow-100",text:"text-yellow-800",labelKey:"invoices:status.due"},draft:{bg:"bg-gray-100",text:"text-gray-700",labelKey:"invoices:status.draft"}};function v5(e){let{invoice:t={},onSendReminder:n=()=>{},onDownloadPDF:r=()=>{},onUploadProof:i=()=>{}}=e;const{t:s}=nn(["common","invoices"]),{number:a="\u2014",clientName:o="Client",issuedAt:l="\u2014",dueAt:c="\u2014",total:d="0.00",currency:u="EUR",status:h="due"}=t,p=g5[h]||g5.due,m=s(p.labelKey);return(0,sn.jsxs)("header",{role:"banner",className:"bg-white shadow-sm",children:[(0,sn.jsxs)("div",{className:"hidden md:flex items-start justify-between px-4 py-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("div",{className:"text-sm text-gray-500",children:["Invoice ",(0,sn.jsx)("span",{className:"font-medium",children:a})]}),(0,sn.jsx)("div",{className:"mt-1 text-lg font-semibold text-gray-900",children:o}),(0,sn.jsxs)("div",{className:"mt-1 text-sm text-gray-600",children:["Issued ",l," \xb7 Due ",c]})]}),(0,sn.jsxs)("div",{className:"flex flex-col items-end space-y-3",children:[(0,sn.jsxs)("div",{className:"text-2xl font-bold text-gray-900",children:[u," ",d]}),(0,sn.jsx)("div",{className:"flex items-center space-x-2",children:(0,sn.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-semibold ".concat(p.bg," ").concat(p.text),"aria-hidden":"true",children:m})}),(0,sn.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,sn.jsxs)("button",{onClick:()=>n(t),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200 shadow-sm","aria-label":s("invoices:sendReminder"),children:[(0,sn.jsx)(Ji,{className:"w-4 h-4"}),(0,sn.jsx)("span",{className:"text-sm font-medium",children:s("invoices:sendReminder")})]}),(0,sn.jsxs)("button",{onClick:()=>r(t),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200 shadow-sm","aria-label":s("invoices:downloadPdf"),children:[(0,sn.jsx)(vi,{className:"w-4 h-4"}),(0,sn.jsx)("span",{className:"text-sm font-medium",children:s("invoices:downloadPdf")})]}),(0,sn.jsxs)("button",{onClick:()=>i(t),className:"flex items-center space-x-2 px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200 shadow-sm","aria-label":s("invoices:uploadProof"),children:[(0,sn.jsx)(ss,{className:"w-4 h-4"}),(0,sn.jsx)("span",{className:"text-sm font-medium",children:s("invoices:uploadProof")})]})]})]})]}),(0,sn.jsxs)("div",{className:"md:hidden px-4 py-3 border-b",children:[(0,sn.jsxs)("div",{className:"flex justify-between items-start",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("div",{className:"text-xs text-gray-500",children:["Invoice ",(0,sn.jsx)("span",{className:"font-medium",children:a})]}),(0,sn.jsx)("div",{className:"mt-1 text-sm font-semibold",children:o}),(0,sn.jsxs)("div",{className:"mt-1 text-xs text-gray-600",children:["Due ",c]})]}),(0,sn.jsxs)("div",{className:"text-right",children:[(0,sn.jsxs)("div",{className:"text-lg font-bold",children:[u," ",d]}),(0,sn.jsx)("div",{className:"mt-1 px-2 py-0.5 rounded-full text-xs font-semibold ".concat(p.bg," ").concat(p.text),children:m})]})]}),(0,sn.jsxs)("div",{className:"mt-4 flex flex-col space-y-2",children:[(0,sn.jsxs)("div",{className:"flex space-x-2",children:[(0,sn.jsxs)("button",{onClick:()=>n(t),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors duration-200","aria-label":s("invoices:sendReminder"),children:[(0,sn.jsx)(Ji,{className:"w-4 h-4"}),(0,sn.jsx)("span",{className:"text-sm font-medium",children:s("invoices:sendReminder")})]}),(0,sn.jsxs)("button",{onClick:()=>r(t),className:"flex-1 flex items-center justify-center space-x-2 px-3 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors duration-200","aria-label":s("invoices:downloadPdf"),children:[(0,sn.jsx)(vi,{className:"w-4 h-4"}),(0,sn.jsx)("span",{className:"text-sm font-medium",children:s("invoices:downloadPdf")})]})]}),(0,sn.jsxs)("button",{onClick:()=>i(t),className:"w-full flex items-center justify-center space-x-2 px-3 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700 transition-colors duration-200","aria-label":s("invoices:uploadProof"),children:[(0,sn.jsx)(ss,{className:"w-4 h-4"}),(0,sn.jsx)("span",{className:"text-sm font-medium",children:s("invoices:uploadProof")})]})]})]})]})}const y5=e=>{var t;let{invoiceId:n,invoiceData:r,onClose:s,onSuccess:a}=e;const{t:o}=nn(),[l,c]=(0,i.useState)({recipientEmail:"",subject:"",customText:"",customHtml:""}),[d,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(""),[m,f]=(0,i.useState)("");(0,i.useEffect)(()=>{r&&c(e=>{var t;return(0,Ne.A)((0,Ne.A)({},e),{},{subject:"Invoice ".concat(r.invoiceNumber||n),recipientEmail:(null===(t=r.client)||void 0===t?void 0:t.email)||""})})},[r,n]);const g=e=>{const{name:t,value:n}=e.target;c(e=>(0,Ne.A)((0,Ne.A)({},e),{},{[t]:n}))};return(0,sn.jsx)("div",{className:"pdf-email-sender-overlay",children:(0,sn.jsxs)("div",{className:"pdf-email-sender-modal",children:[(0,sn.jsxs)("div",{className:"pdf-email-sender-header",children:[(0,sn.jsx)("h3",{children:"Send Invoice PDF Email"}),(0,sn.jsx)("button",{className:"close-button",onClick:s,disabled:d,children:"\xd7"})]}),(0,sn.jsxs)("form",{onSubmit:async e=>{var t;if(e.preventDefault(),l.recipientEmail)if(t=l.recipientEmail,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))if(l.subject){u(!0),p(""),f("");try{const e=await fetch("/api/pdf-email/send/".concat(n),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.getItem("token"))},body:JSON.stringify({recipientEmail:l.recipientEmail,subject:l.subject,customText:l.customText||void 0,customHtml:l.customHtml||void 0})}),t=await e.json();t.success?(f("Email sent successfully!"),a&&a(t.data),setTimeout(()=>{s&&s()},3e3)):p(t.error||"Email sending failed")}catch(h){console.error("Email sending error:",h),p("Network error, please try again later")}finally{u(!1)}}else p("Please enter an email subject");else p("Please enter a valid email address");else p("Please enter the recipient email address")},className:"pdf-email-sender-form",children:[(0,sn.jsxs)("div",{className:"invoice-info",children:[(0,sn.jsx)("h4",{children:"Invoice Information"}),(0,sn.jsxs)("div",{className:"info-row",children:[(0,sn.jsx)("span",{className:"label",children:"Invoice ID:"}),(0,sn.jsx)("span",{className:"value",children:n})]}),(null===r||void 0===r?void 0:r.invoiceNumber)&&(0,sn.jsxs)("div",{className:"info-row",children:[(0,sn.jsx)("span",{className:"label",children:"Invoice Number:"}),(0,sn.jsx)("span",{className:"value",children:r.invoiceNumber})]}),(null===r||void 0===r||null===(t=r.client)||void 0===t?void 0:t.name)&&(0,sn.jsxs)("div",{className:"info-row",children:[(0,sn.jsx)("span",{className:"label",children:"Client Name:"}),(0,sn.jsx)("span",{className:"value",children:r.client.name})]}),(null===r||void 0===r?void 0:r.totalAmount)&&(0,sn.jsxs)("div",{className:"info-row",children:[(0,sn.jsx)("span",{className:"label",children:"Total Amount:"}),(0,sn.jsxs)("span",{className:"value",children:["\u20ac",r.totalAmount]})]})]}),(0,sn.jsxs)("div",{className:"form-group",children:[(0,sn.jsx)("label",{htmlFor:"recipientEmail",children:"Recipient Email *"}),(0,sn.jsx)("input",{type:"email",id:"recipientEmail",name:"recipientEmail",value:l.recipientEmail,onChange:g,placeholder:"Enter recipient email address",required:!0,disabled:d})]}),(0,sn.jsxs)("div",{className:"form-group",children:[(0,sn.jsx)("label",{htmlFor:"subject",children:"Subject *"}),(0,sn.jsx)("input",{type:"text",id:"subject",name:"subject",value:l.subject,onChange:g,placeholder:"Enter email subject",required:!0,disabled:d})]}),(0,sn.jsxs)("div",{className:"form-group",children:[(0,sn.jsx)("label",{htmlFor:"customText",children:"Custom email content (optional)"}),(0,sn.jsx)("textarea",{id:"customText",name:"customText",value:l.customText,onChange:g,placeholder:"Enter custom email text...",rows:"4",disabled:d}),(0,sn.jsx)("small",{className:"form-help",children:"Leave empty to use the default email template"})]}),h&&(0,sn.jsx)("div",{className:"message error-message",children:h}),m&&(0,sn.jsx)("div",{className:"message success-message",children:m}),(0,sn.jsxs)("div",{className:"form-actions",children:[(0,sn.jsx)("button",{type:"button",className:"cancel-button",onClick:s,disabled:d,children:"Cancel"}),(0,sn.jsx)("button",{type:"submit",className:"send-button",disabled:d,children:d?"Sending...":"Send Email"})]})]}),(0,sn.jsxs)("div",{className:"feature-info",children:[(0,sn.jsx)("h4",{children:"Feature Notes"}),(0,sn.jsxs)("ul",{children:[(0,sn.jsx)("li",{children:"The system generates a PDF invoice and sends it as an attachment"}),(0,sn.jsx)("li",{children:"Email includes basic invoice details"}),(0,sn.jsx)("li",{children:"Supports custom email content"}),(0,sn.jsx)("li",{children:"Send records are saved for review"})]})]})]})})},x5=()=>{var e,t,n,r,s;const{id:a}=ne(),{user:o,api:l}=mn(),{t:c}=nn(["common","routes"]),[d,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(!0),[m,f]=(0,i.useState)(null),[g,v]=(0,i.useState)("smtp"),[y,x]=(0,i.useState)(!1),[b,w]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{try{var e;p(!0);const t=await l.get("/invoices/".concat(a));u((null===(e=t.data.data)||void 0===e?void 0:e.invoice)||t.data),f(null)}catch(t){f(c("common:error")),console.error("Failed to fetch invoice",t)}finally{p(!1)}})()},[a,l,c]),(0,i.useEffect)(()=>{const e=e=>{y&&!e.target.closest(".relative")&&x(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[y]);const j=async e=>{try{await l.put("/invoices/".concat(a),{status:e}),u((0,Ne.A)((0,Ne.A)({},d),{},{status:e}))}catch(t){f(c("common:error")),console.error("Failed to update status",t)}},N=async()=>{let e;try{e=ft.loading("Generating PDF...");const t=await l.get("/invoices/".concat(a,"/pdf"),{responseType:"blob",headers:{Accept:"application/pdf"}});if("application/pdf"!==t.data.type)throw new Error("Invalid PDF response");const n=window.URL.createObjectURL(new Blob([t.data],{type:"application/pdf"})),r=document.createElement("a");r.href=n,r.setAttribute("download","invoice-".concat(d.invoiceNumber||d.number||a,".pdf")),document.body.appendChild(r),r.click(),r.remove(),window.URL.revokeObjectURL(n),ft.dismiss(e),ft.success("PDF downloaded successfully")}catch(t){e&&ft.dismiss(e),f(c("common:error")),console.error("Failed to download PDF",t),t.response?404===t.response.status?ft.error("Invoice not found or PDF generation failed"):500===t.response.status?ft.error("Server error, please contact administrator"):ft.error("PDF download failed, please try again later"):ft.error("Network error, please check your connection and retry")}},k=e=>{const t=parseFloat(e)||0;return new Intl.NumberFormat("en-US",{style:"currency",currency:(null===o||void 0===o?void 0:o.currency)||"EUR"}).format(t)};return h?(0,sn.jsxs)("div",{className:"bg-white shadow rounded-lg p-6 text-center",children:[(0,sn.jsx)("div",{className:"flex justify-center",children:(0,sn.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}),(0,sn.jsx)("p",{className:"mt-4 text-gray-500",children:c("common:loading")})]}):m||!d?(0,sn.jsx)("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-6",children:(0,sn.jsxs)("div",{className:"flex",children:[(0,sn.jsx)("div",{className:"flex-shrink-0",children:(0,sn.jsx)(ls,{className:"h-5 w-5 text-red-500"})}),(0,sn.jsx)("div",{className:"ml-3",children:(0,sn.jsx)("p",{className:"text-sm text-red-700",children:m||"Invoice not found"})})]})}):(0,sn.jsxs)("div",{className:"pb-16 md:pb-0",children:[" ",(0,sn.jsx)("div",{className:"mb-6",children:(0,sn.jsxs)(Ur,{to:"/".concat(c("routes:invoices")),className:"inline-flex items-center text-sm font-medium text-gray-500 hover:text-gray-700",children:[(0,sn.jsx)(ti,{className:"mr-2 h-4 w-4"}),c("common:back")]})}),(0,sn.jsx)(v5,{invoice:d,onSendReminder:async()=>{try{await l.post("/pdf-email/send/"+a,{recipientEmail:"a13312860897@163.com",subject:"\u53d1\u7968\u63d0\u9192 ".concat((null===d||void 0===d?void 0:d.invoiceNumber)||a),message:"\u8fd9\u662f\u60a8\u7684\u53d1\u7968\u63d0\u9192\u3002"}),alert(c("common:success"))}catch(e){f(c("common:error")),console.error("Failed to send email",e),e.response&&e.response.data&&e.response.data.message?alert("".concat(c("common:error"),": ").concat(e.response.data.message)):alert("Email configuration error")}},onDownloadPDF:N,onUploadProof:()=>{alert("Upload proof functionality coming soon")}}),(0,sn.jsxs)("div",{className:"bg-white shadow rounded-lg overflow-hidden mt-4",children:[(0,sn.jsxs)("div",{className:"px-6 py-8",children:[(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"From"}),(0,sn.jsxs)("div",{className:"text-sm text-gray-700",children:[(null===o||void 0===o?void 0:o.logo)&&(0,sn.jsx)("div",{className:"mb-3",children:(0,sn.jsx)("img",{src:"".concat("http://localhost:3001","/").concat(o.logo),alt:"Company Logo",className:"h-16 w-auto max-w-xs object-contain"})}),(0,sn.jsx)("p",{className:"font-medium",children:(null===o||void 0===o?void 0:o.companyName)||(null===o||void 0===o?void 0:o.firstName)+" "+(null===o||void 0===o?void 0:o.lastName)}),(0,sn.jsx)("p",{children:null===o||void 0===o?void 0:o.email}),(0,sn.jsx)("p",{children:null===o||void 0===o?void 0:o.phone}),(0,sn.jsx)("p",{children:null===o||void 0===o?void 0:o.address})]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"To"}),(0,sn.jsxs)("div",{className:"text-sm text-gray-700",children:[(0,sn.jsx)("p",{className:"font-medium",children:null===(e=d.Client)||void 0===e?void 0:e.name}),(null===(t=d.Client)||void 0===t?void 0:t.company)&&(0,sn.jsx)("p",{children:d.Client.company}),(null===(n=d.Client)||void 0===n?void 0:n.vatNumber)&&(0,sn.jsxs)("p",{children:["VAT: ",d.Client.vatNumber]}),(0,sn.jsx)("p",{children:null===(r=d.Client)||void 0===r?void 0:r.phone}),(0,sn.jsx)("p",{children:null===(s=d.Client)||void 0===s?void 0:s.address})]})]})]}),(0,sn.jsxs)("div",{className:"mt-8",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-4",children:"Items"}),(0,sn.jsx)("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:(0,sn.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,sn.jsx)("thead",{className:"bg-gray-50",children:(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,sn.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty"}),(0,sn.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),(0,sn.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tax"}),(0,sn.jsx)("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"})]})}),(0,sn.jsxs)("tbody",{className:"bg-white divide-y divide-gray-200",children:[(()=>{let e=[];if(d.InvoiceItems&&Array.isArray(d.InvoiceItems)&&d.InvoiceItems.length>0)e=d.InvoiceItems;else if(d.items)try{const t="string"===typeof d.items?JSON.parse(d.items):d.items;Array.isArray(t)&&t.length>0&&(e=t.map((e,t)=>({id:"json-".concat(t),description:e.description,quantity:e.quantity,unitPrice:e.unitPrice,taxRate:e.taxRate,total:e.total})))}catch(m){console.error("Error parsing items JSON:",m)}return e.length>0?e.map(e=>(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:e.description}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:e.quantity}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:k(e.unitPrice)}),(0,sn.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500 text-right",children:[e.taxRate,"%"]}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:k(e.total)})]},e.id)):(0,sn.jsx)("tr",{children:(0,sn.jsx)("td",{colSpan:"5",className:"px-6 py-4 text-center text-sm text-gray-500",children:c("invoicedetail.noitemsfound")})})})(),(0,sn.jsxs)("tr",{className:"bg-gray-50",children:[(0,sn.jsx)("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:"Subtotal"}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:k(d.subtotal)})]}),(0,sn.jsxs)("tr",{className:"bg-gray-50",children:[(0,sn.jsx)("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:"Tax"}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 text-right",children:k(d.taxAmount)})]}),(0,sn.jsxs)("tr",{className:"bg-gray-50",children:[(0,sn.jsx)("td",{colSpan:"4",className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:"Total"}),(0,sn.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-bold text-gray-900 text-right",children:k(d.total)})]})]})]})})]}),d.notes&&(0,sn.jsxs)("div",{className:"mt-8",children:[(0,sn.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Notes"}),(0,sn.jsx)("div",{className:"text-sm text-gray-700 bg-gray-50 p-4 rounded-lg",children:d.notes})]})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 px-6 py-4 flex flex-wrap items-center justify-between gap-4",children:[(0,sn.jsx)("div",{className:"flex space-x-3",children:"cancelled"!==d.status&&(0,sn.jsxs)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:()=>j("cancelled"),children:[(0,sn.jsx)(ls,{className:"-ml-1 mr-2 h-5 w-5"}),c("common:cancel")]})}),(0,sn.jsxs)("div",{className:"flex space-x-3",children:["draft"===d.status&&(0,sn.jsxs)(Ur,{to:"/".concat(c("routes:invoices"),"/").concat(a,"/edit"),className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[(0,sn.jsx)(yi,{className:"-ml-1 mr-2 h-5 w-5"}),c("common:edit")]}),(0,sn.jsxs)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-blue-300 shadow-sm text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:N,children:[(0,sn.jsx)(gi,{className:"-ml-1 mr-2 h-5 w-5"}),"Download PDF"]}),(0,sn.jsxs)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-green-300 shadow-sm text-sm font-medium rounded-md text-green-700 bg-green-50 hover:bg-green-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-green-500",onClick:async function(){let e;try{var t,n;e=ft.loading("Sending email...");const r=await l.post("/ai/send-invoice-email",{invoiceId:a,recipientEmail:(null===d||void 0===d||null===(t=d.client)||void 0===t?void 0:t.email)||"a13312860897@163.com",type:"invoice",attachPDF:!0,useUserConfig:!0});ft.dismiss(e),null!==(n=r.data.data)&&void 0!==n&&n.usedCustomConfig?ft.success("Email sent successfully (using your email configuration)"):ft.success("Email sent successfully (using system default configuration)"),"draft"===d.status&&j("sent")}catch(c){var r,i,s,o;e&&ft.dismiss(e),console.error("Failed to send email",c);let t="Email sending failed";null!==(r=c.response)&&void 0!==r&&null!==(i=r.data)&&void 0!==i&&i.message?t=c.response.data.message:null!==(s=c.response)&&void 0!==s&&null!==(o=s.data)&&void 0!==o&&o.error&&(t=c.response.data.error),(t.includes("\u90ae\u4ef6\u914d\u7f6e")||t.includes("SMTP")||t.includes("\u4f20\u8f93\u5668")||t.includes("email configuration")||t.includes("SMTP")||t.includes("transporter"))&&(t+=". Please go to the Email Settings page to configure your mailbox."),ft.error(t),f(t)}},children:[(0,sn.jsx)(Ri,{className:"-ml-1 mr-2 h-5 w-5"}),"Send Email"]}),(0,sn.jsxs)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-blue-300 shadow-sm text-sm font-medium rounded-md text-blue-700 bg-blue-50 hover:bg-blue-100 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",onClick:()=>w(!0),children:[(0,sn.jsx)(Ji,{className:"-ml-1 mr-2 h-5 w-5"}),"Send PDF via Email"]}),(0,sn.jsxs)("button",{type:"button",className:"inline-flex items-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",onClick:()=>window.print(),children:[(0,sn.jsx)(Gi,{className:"-ml-1 mr-2 h-5 w-5"}),"Print"]})]})]})]}),b&&(0,sn.jsx)(y5,{invoiceId:a,invoiceData:d,onClose:()=>w(!1),onSuccess:e=>{console.log("PDF email sent successfully:",e),ft.success("PDF email sent successfully!"),w(!1)}})]})},b5=()=>{const e=ee(),[t,n]=(0,i.useState)([]),[r,s]=(0,i.useState)(!0),[a,o]=(0,i.useState)(null);(0,i.useEffect)(()=>{l()},[]);const l=async()=>{try{var e;s(!0);const t=(null===(e=(await zt.default.get("/invoices/stats/dashboard")).data)||void 0===e?void 0:e.data)||{},r=(t.recentInvoices||[]).filter(e=>"overdue"===e.status);n(r)}catch(a){console.error("Error loading overdue invoices:",a),o("\u52a0\u8f7d\u903e\u671f\u53d1\u7968\u5931\u8d25")}finally{s(!1)}},c=e=>{const t=void 0===e||null===e||isNaN(e)?0:e;return new Intl.NumberFormat("zh-CN",{style:"currency",currency:"EUR"}).format(t)},d=e=>new Date(e).toLocaleDateString("zh-CN");return r?(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,sn.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,sn.jsxs)("div",{className:"animate-pulse",children:[(0,sn.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),(0,sn.jsx)("div",{className:"space-y-4",children:[...Array(5)].map((e,t)=>(0,sn.jsxs)("div",{className:"bg-white p-6 rounded-lg shadow",children:[(0,sn.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,sn.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},t))})]})})}):a?(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,sn.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,sn.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[(0,sn.jsx)(ei,{className:"mx-auto h-12 w-12 text-red-400 mb-4"}),(0,sn.jsx)("h3",{className:"text-lg font-medium text-red-800 mb-2",children:"\u52a0\u8f7d\u5931\u8d25"}),(0,sn.jsx)("p",{className:"text-red-600",children:a}),(0,sn.jsx)("button",{onClick:l,className:"mt-4 bg-red-600 text-white px-4 py-2 rounded-lg hover:bg-red-700",children:"\u91cd\u8bd5"})]})})}):(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 p-6",children:(0,sn.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,sn.jsxs)("div",{className:"mb-6",children:[(0,sn.jsxs)("button",{onClick:()=>e("/dashboard"),className:"flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[(0,sn.jsx)(ti,{className:"mr-2"}),"\u8fd4\u56de\u4eea\u8868\u76d8"]}),(0,sn.jsx)("div",{className:"flex items-center justify-between",children:(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\u903e\u671f\u53d1\u7968\u8be6\u60c5"}),(0,sn.jsxs)("p",{className:"text-gray-600 mt-2",children:["\u5171 ",t.length," \u5f20\u903e\u671f\u53d1\u7968\uff0c\u603b\u91d1\u989d ",c(t.reduce((e,t)=>e+(t.amount||t.total||0),0))]})]})})]}),0===t.length?(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow p-12 text-center",children:[(0,sn.jsx)(wi,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),(0,sn.jsx)("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"\u6682\u65e0\u903e\u671f\u53d1\u7968"}),(0,sn.jsx)("p",{className:"text-gray-600",children:"\u6240\u6709\u53d1\u7968\u90fd\u6309\u65f6\u652f\u4ed8\uff0c\u592a\u68d2\u4e86\uff01"})]}):(0,sn.jsx)("div",{className:"space-y-4",children:t.map(t=>{var n;const r=(e=>{const t=new Date-new Date(e);return Math.ceil(t/864e5)})(t.dueDate),i=(s=r)<=7?{text:"\u8f7b\u5fae\u903e\u671f",color:"text-yellow-600 bg-yellow-100"}:s<=30?{text:"\u4e2d\u5ea6\u903e\u671f",color:"text-orange-600 bg-orange-100"}:{text:"\u4e25\u91cd\u903e\u671f",color:"text-red-600 bg-red-100"};var s;return(0,sn.jsx)("div",{className:"bg-white rounded-lg shadow hover:shadow-md transition-shadow",children:(0,sn.jsxs)("div",{className:"p-6",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,sn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900",children:["\u53d1\u7968 #",t.invoiceNumber]}),(0,sn.jsxs)("div",{className:"flex items-center text-sm text-gray-600 mt-1",children:[(0,sn.jsx)(as,{className:"mr-1"}),t.clientName||(null===(n=t.Client)||void 0===n?void 0:n.name)||"\u672a\u77e5\u5ba2\u6237"]})]}),(0,sn.jsx)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(i.color),children:i.text})]}),(0,sn.jsxs)("div",{className:"text-right",children:[(0,sn.jsx)("div",{className:"text-2xl font-bold text-gray-900",children:c(t.amount||t.total||0)}),(0,sn.jsxs)("div",{className:"text-sm text-red-600 font-medium",children:["\u903e\u671f ",r," \u5929"]})]})]}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[(0,sn.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,sn.jsx)(oi,{className:"mr-2"}),(0,sn.jsxs)("span",{children:["\u5f00\u7968\u65e5\u671f: ",d(t.issueDate)]})]}),(0,sn.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,sn.jsx)(oi,{className:"mr-2"}),(0,sn.jsxs)("span",{children:["\u5230\u671f\u65e5\u671f: ",d(t.dueDate)]})]}),(0,sn.jsxs)("div",{className:"flex items-center text-sm text-gray-600",children:[(0,sn.jsx)(gi,{className:"mr-2"}),(0,sn.jsxs)("span",{children:["\u72b6\u6001: ",t.status]})]})]}),(0,sn.jsxs)("div",{className:"flex items-center justify-end space-x-3 pt-4 border-t border-gray-200",children:[(0,sn.jsxs)("button",{onClick:()=>{return n=t.id,void e("/invoices/".concat(n));var n},className:"flex items-center px-3 py-2 text-sm text-blue-600 hover:text-blue-800 hover:bg-blue-50 rounded-lg transition-colors",children:[(0,sn.jsx)(bi,{className:"mr-1"}),"\u67e5\u770b"]}),(0,sn.jsxs)("button",{onClick:()=>{return n=t.id,void e("/invoices/edit/".concat(n));var n},className:"flex items-center px-3 py-2 text-sm text-gray-600 hover:text-gray-800 hover:bg-gray-50 rounded-lg transition-colors",children:[(0,sn.jsx)(yi,{className:"mr-1"}),"\u7f16\u8f91"]}),(0,sn.jsxs)("button",{onClick:()=>(async e=>{try{await Oo.markAsPaid(e),l()}catch(a){console.error("Error marking invoice as paid:",a)}})(t.id),className:"flex items-center px-3 py-2 text-sm text-green-600 hover:text-green-800 hover:bg-green-50 rounded-lg transition-colors",children:[(0,sn.jsx)(gi,{className:"mr-1"}),"\u6807\u8bb0\u5df2\u4ed8"]})]})]})},t.id)})})]})})},w5=()=>(0,sn.jsxs)("div",{className:"max-w-4xl mx-auto py-8",children:[(0,sn.jsxs)("div",{className:"text-center mb-12",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-6",children:[(0,sn.jsx)(wi,{className:"w-8 h-8 text-blue-600"}),(0,sn.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"Terms of Service"})]}),(0,sn.jsxs)("div",{className:"text-gray-600 space-y-1",children:[(0,sn.jsx)("p",{children:"Last updated: November 5, 2025"}),(0,sn.jsx)("p",{className:"text-sm",children:"English version prevails. A French translation is available upon request."})]})]}),(0,sn.jsxs)("div",{className:"prose prose-lg max-w-none text-gray-800 leading-relaxed",children:[(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"1. Introduction"}),(0,sn.jsx)("p",{children:"Welcome to Invomate, an online invoicing and billing platform designed to help individuals and businesses generate and manage invoices easily."}),(0,sn.jsx)("p",{children:'Invomate is developed and operated by an independent developer known as Shimingzi ("the Developer", "we", "us", "our").'}),(0,sn.jsx)("p",{children:'By using Invomate, you ("the User", "you", "your") agree to these Terms of Service ("Terms"). If you do not agree with these Terms, please stop using the Service immediately.'}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"2. Legal Status of the Provider"}),(0,sn.jsx)("p",{children:"Invomate is operated by an independent software developer acting as a non-incorporated professional. This means that the Service is provided as-is, without any corporate legal entity. The Developer is based in France and acts under French law as an independent creator (d\xe9veloppeur ind\xe9pendant)."}),(0,sn.jsxs)("p",{children:["For any inquiries, you can contact us at: ",(0,sn.jsx)("a",{href:"mailto:a13312860897@163.com",className:"text-blue-600",children:"a13312860897@163.com"})]}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"3. Service Description"}),(0,sn.jsx)("p",{children:"Invomate provides access to:"}),(0,sn.jsxs)("ul",{children:[(0,sn.jsx)("li",{children:"Online invoice creation and preview"}),(0,sn.jsx)("li",{children:"Custom templates (standard VAT, VAT-exempt, and reverse-charge)"}),(0,sn.jsx)("li",{children:"Optional paid features and integrations"})]}),(0,sn.jsx)("p",{children:'We strive to ensure availability and accuracy, but the Service is provided "as is" and without guarantee of uninterrupted operation.'}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"4. User Responsibility"}),(0,sn.jsx)("p",{children:"You are solely responsible for:"}),(0,sn.jsxs)("ul",{children:[(0,sn.jsx)("li",{children:"The accuracy and legality of the data you input (including company information, VAT, SIREN/SIRET numbers, invoice content, etc.);"}),(0,sn.jsx)("li",{children:"Compliance with your own local tax obligations;"}),(0,sn.jsx)("li",{children:"Keeping your account credentials safe."})]}),(0,sn.jsx)("p",{children:"The Developer cannot be held liable for any errors, omissions, or non-compliance in the invoices generated through the platform."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"5. Data & Privacy"}),(0,sn.jsx)("p",{children:"Invomate complies with the General Data Protection Regulation (GDPR)."}),(0,sn.jsx)("p",{children:"We collect only minimal technical data necessary for operation (e.g., IP, logs, email)."}),(0,sn.jsx)("p",{children:"We do not access, sell, or share the invoice content created by users."}),(0,sn.jsx)("p",{children:"Users may request full deletion of their data by email at any time."}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("span",{className:"font-semibold",children:"Disclaimer:"})," Invomate is a self-service tool. The User remains fully responsible for verifying that all invoice data complies with applicable tax and accounting laws."]}),(0,sn.jsx)("p",{children:"See the Privacy Policy for more details."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"6. Payment & Subscription"}),(0,sn.jsx)("p",{children:"Certain advanced features may require payment. All prices are displayed before confirmation. Payments are processed via trusted third-party gateways (e.g., Stripe, PayPal)."}),(0,sn.jsx)("p",{children:"No refund will be issued once an invoice has been successfully generated or data exported, except as required by law."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"7. Limitation of Liability"}),(0,sn.jsx)("p",{children:"To the maximum extent permitted by law:"}),(0,sn.jsxs)("ul",{children:[(0,sn.jsx)("li",{children:"The Developer shall not be liable for any direct, indirect, incidental, or consequential damages resulting from use or inability to use the Service."}),(0,sn.jsx)("li",{children:"The Service is provided without warranties, including fitness for a particular purpose or legal accuracy."}),(0,sn.jsx)("li",{children:"Users generate and use invoices at their own risk."})]}),(0,sn.jsx)("p",{children:"If a dispute arises, the total liability of the Developer shall not exceed the total amount paid by the User during the last 12 months."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"8. Intellectual Property"}),(0,sn.jsx)("p",{children:"All code, design, and documentation within Invomate are the intellectual property of the Developer. Users retain full ownership of the invoice content they create. You may not copy, resell, or reproduce the Service without explicit permission."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"9. Termination"}),(0,sn.jsx)("p",{children:"The Developer reserves the right to suspend or terminate any account that violates these Terms or is used for fraudulent or illegal purposes. Users may delete their account at any time by contacting support."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"10. Governing Law & Jurisdiction"}),(0,sn.jsx)("p",{children:"These Terms are governed by French law. In the event of a dispute, jurisdiction is assigned to the courts of Paris, France."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"11. Language Clause"}),(0,sn.jsx)("p",{children:"These Terms are written in English for international accessibility. A French translation is available upon request. In case of discrepancy, the English version shall prevail."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"12. Contact"}),(0,sn.jsxs)("p",{children:["For questions, concerns, or legal inquiries: ",(0,sn.jsx)("a",{href:"mailto:a13312860897@163.com",className:"text-blue-600",children:"a13312860897@163.com"})," \u2014 Developer alias: Shimingzi"]}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"Notes"}),(0,sn.jsxs)("ul",{children:[(0,sn.jsx)("li",{children:"Includes GDPR compliance and responsibility disclaimer."}),(0,sn.jsx)("li",{children:"Independent developer status clearly stated (avoids company misrepresentation)."}),(0,sn.jsx)("li",{children:"French law applied (compliant with DGCCRF and CNIL expectations)."}),(0,sn.jsx)("li",{children:'Legal risks transferred to the user ("self-service tool").'})]})]})]}),j5=()=>(0,sn.jsx)(w5,{}),N5=()=>(0,sn.jsxs)("div",{className:"max-w-4xl mx-auto py-8",children:[(0,sn.jsxs)("div",{className:"text-center mb-12",children:[(0,sn.jsxs)("div",{className:"flex items-center justify-center gap-3 mb-6",children:[(0,sn.jsx)(Zi,{className:"w-8 h-8 text-green-600"}),(0,sn.jsx)("h1",{className:"text-4xl font-bold text-gray-900",children:"Privacy Policy"})]}),(0,sn.jsx)("div",{className:"text-gray-600 space-y-1",children:(0,sn.jsx)("p",{children:"Last updated: November 5, 2025"})})]}),(0,sn.jsxs)("div",{className:"prose prose-lg max-w-none text-gray-800 leading-relaxed",children:[(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"1. Introduction"}),(0,sn.jsx)("p",{children:'This Privacy Policy explains how Invomate ("the Service") collects, uses, and protects your personal data. Invomate is operated by an independent developer known as Shimingzi ("the Developer", "we", "us").'}),(0,sn.jsx)("p",{children:"We take privacy seriously and apply the principle of data minimization \u2014 we only collect the information strictly necessary for the platform to function."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"2. Data Collected"}),(0,sn.jsx)("p",{children:"Invomate collects only limited data:"}),(0,sn.jsxs)("table",{children:[(0,sn.jsx)("thead",{children:(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("th",{children:"Type"}),(0,sn.jsx)("th",{children:"Description"}),(0,sn.jsx)("th",{children:"Purpose"})]})}),(0,sn.jsxs)("tbody",{children:[(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{children:"Account Data"}),(0,sn.jsx)("td",{children:"Email address and password (if registration is used)"}),(0,sn.jsx)("td",{children:"To identify your account"})]}),(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{children:"Technical Data"}),(0,sn.jsx)("td",{children:"Browser type, IP address, logs"}),(0,sn.jsx)("td",{children:"For security and maintenance"})]}),(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{children:"Payment Data"}),(0,sn.jsx)("td",{children:"Managed entirely by third-party payment processors (e.g., Stripe, PayPal)"}),(0,sn.jsx)("td",{children:"For subscription and billing"})]}),(0,sn.jsxs)("tr",{children:[(0,sn.jsx)("td",{children:"Invoice Content"}),(0,sn.jsx)("td",{children:"Entered directly by users. Stored locally in your browser or encrypted in our server if saving is enabled. The developer does not access or review invoice data."}),(0,sn.jsx)("td",{children:"To generate and manage invoices (user-controlled)"})]})]})]}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"3. Purpose of Processing"}),(0,sn.jsxs)("ul",{children:[(0,sn.jsx)("li",{children:"To operate and improve the Service"}),(0,sn.jsx)("li",{children:"To provide customer support when requested"}),(0,sn.jsx)("li",{children:"To ensure compliance with applicable law (e.g., accounting retention obligations if applicable)"})]}),(0,sn.jsx)("p",{children:"We do not sell, rent, or share personal data with third parties."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"4. Legal Basis (GDPR Article 6)"}),(0,sn.jsxs)("ul",{children:[(0,sn.jsxs)("li",{children:[(0,sn.jsx)("span",{className:"font-semibold",children:"Contractual necessity:"})," To provide access to the Service you request"]}),(0,sn.jsxs)("li",{children:[(0,sn.jsx)("span",{className:"font-semibold",children:"Legitimate interest:"})," To maintain security and prevent abuse"]}),(0,sn.jsxs)("li",{children:[(0,sn.jsx)("span",{className:"font-semibold",children:"Consent:"})," When you voluntarily provide data (e.g., email contact)"]})]}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"5. Data Storage and Retention"}),(0,sn.jsx)("p",{children:"User data is stored securely on servers located within the European Union."}),(0,sn.jsx)("p",{children:"Invoice data is either stored locally in your browser or securely in encrypted form on the server (if you choose to save it)."}),(0,sn.jsx)("p",{children:"Data is retained only as long as necessary for operation, then deleted automatically."}),(0,sn.jsxs)("p",{children:["You may request deletion at any time by emailing ",(0,sn.jsx)("a",{href:"mailto:a13312860897@163.com",className:"text-blue-600",children:"a13312860897@163.com"}),"."]}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"6. User Rights (Under GDPR)"}),(0,sn.jsxs)("ul",{children:[(0,sn.jsx)("li",{children:"Right of access to your data"}),(0,sn.jsx)("li",{children:"Right of rectification"}),(0,sn.jsx)("li",{children:'Right to erasure ("right to be forgotten")'}),(0,sn.jsx)("li",{children:"Right to data portability"}),(0,sn.jsx)("li",{children:"Right to restrict or object to processing"})]}),(0,sn.jsxs)("p",{children:["You may exercise these rights by contacting: ",(0,sn.jsx)("a",{href:"mailto:a13312860897@163.com",className:"text-blue-600",children:"a13312860897@163.com"})]}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"7. Data Security"}),(0,sn.jsx)("p",{children:"We use industry-standard technical measures (encryption, HTTPS, access control) to protect data. However, no system is 100% secure. You use the Service at your own risk."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"8. Data Disclosure"}),(0,sn.jsx)("p",{children:"We may disclose data only:"}),(0,sn.jsxs)("ul",{children:[(0,sn.jsx)("li",{children:"To comply with a legal obligation (e.g., court order)"}),(0,sn.jsx)("li",{children:"To protect the rights, property, or safety of the Developer or users"})]}),(0,sn.jsx)("p",{children:"We never disclose or sell data for marketing purposes."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"9. Third-Party Services"}),(0,sn.jsx)("p",{children:"Invomate may rely on third-party providers such as:"}),(0,sn.jsxs)("ul",{children:[(0,sn.jsx)("li",{children:"Payment processors (e.g., Stripe, PayPal)"}),(0,sn.jsx)("li",{children:"Analytics or hosting services (e.g., Cloudflare, Vercel, OVH)"})]}),(0,sn.jsx)("p",{children:"Each third-party service complies with GDPR and processes data under their own privacy terms."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"10. Children\u2019s Privacy"}),(0,sn.jsx)("p",{children:"The Service is not intended for users under 16 years of age. We do not knowingly collect personal data from minors."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"11. International Transfers"}),(0,sn.jsx)("p",{children:"As the Developer is based outside the EU, some data may technically be processed outside the EU. In all cases, equivalent protection measures consistent with GDPR are applied."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"12. Liability Disclaimer"}),(0,sn.jsx)("p",{children:"Invomate is a self-service tool. Users are solely responsible for the accuracy and legality of any data entered or documents generated. The Developer cannot be held liable for any data errors, legal non-compliance, or financial loss arising from user input or misuse of the Service."}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"13. Contact"}),(0,sn.jsxs)("p",{children:["For any privacy-related inquiries or requests: ",(0,sn.jsx)("a",{href:"mailto:a13312860897@163.com",className:"text-blue-600",children:"a13312860897@163.com"})," \u2014 Developer alias: Shimingzi"]}),(0,sn.jsx)("h2",{className:"text-2xl font-bold mt-8 mb-4 text-gray-900",children:"14. Governing Law"}),(0,sn.jsx)("p",{children:"This Privacy Policy is governed by French law and the General Data Protection Regulation (EU 2016/679). Disputes shall be subject to the jurisdiction of the courts of Paris, France."})]})]}),k5=()=>(0,sn.jsx)(N5,{}),A5=()=>(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 py-10",children:(0,sn.jsxs)("div",{className:"max-w-3xl mx-auto bg-white shadow-sm rounded-lg p-8",children:[(0,sn.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\u6cd5\u5f8b\u58f0\u660e\uff08Mentions l\xe9gales\uff09"}),(0,sn.jsxs)("section",{className:"mb-6",children:[(0,sn.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\u516c\u53f8\u4fe1\u606f"}),(0,sn.jsx)("p",{children:"\u516c\u53f8\u540d\u79f0\uff1a\u793a\u4f8b\u79d1\u6280\u6709\u9650\u516c\u53f8"}),(0,sn.jsx)("p",{children:"\u6ce8\u518c\u5730\u5740\uff1a\u6cd5\u56fd\u5df4\u9ece\u793a\u4f8b\u8857 123 \u53f7"}),(0,sn.jsx)("p",{children:"SIRET\uff1a123 456 789 00012"}),(0,sn.jsx)("p",{children:"\u6b27\u76df\u589e\u503c\u7a0e\u53f7\uff08TVA\uff09\uff1aFR12 3456789"})]}),(0,sn.jsxs)("section",{className:"mb-6",children:[(0,sn.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\u51fa\u7248\u8d23\u4efb\u4eba"}),(0,sn.jsx)("p",{children:"\u8d1f\u8d23\u4eba\uff1aJean Dupont"}),(0,sn.jsx)("p",{children:"\u8054\u7cfb\u90ae\u7bb1\uff1asupport@example.com"})]}),(0,sn.jsxs)("section",{className:"mb-6",children:[(0,sn.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\u7f51\u7ad9\u6258\u7ba1\u5546"}),(0,sn.jsx)("p",{children:"\u6258\u7ba1\u670d\u52a1\u5546\uff1aNetlify\uff08\u6216\u5176\u4ed6\uff09"}),(0,sn.jsx)("p",{children:"\u5730\u5740\uff1a2325 3rd Street, Suite 215, San Francisco, CA 94107"})]}),(0,sn.jsxs)("section",{className:"mb-6",children:[(0,sn.jsx)("h2",{className:"text-lg font-semibold mb-2",children:"\u8054\u7cfb\u4fe1\u606f"}),(0,sn.jsx)("p",{children:"\u90ae\u7bb1\uff1asupport@example.com"}),(0,sn.jsx)("p",{children:"\u7535\u8bdd\uff1a+33 1 23 45 67 89"})]}),(0,sn.jsx)("section",{className:"mt-8 text-sm text-gray-500",children:(0,sn.jsx)("p",{children:"\u672c\u9875\u9762\u7528\u4e8e\u6ee1\u8db3\u6b27\u76df/\u6cd5\u56fd\u6cd5\u5f8b\u5bf9\u7f51\u7ad9\u57fa\u7840\u4fe1\u606f\u516c\u5f00\u7684\u8981\u6c42\u3002\u82e5\u9700\u6570\u636e\u5904\u7406\u534f\u8bae\uff08DPA\uff09\u6216\u5b89\u5168\u8bf4\u660e\uff0c\u8bf7\u8054\u7cfb\u6211\u4eec\u4ee5\u83b7\u53d6\u6b63\u5f0f\u6587\u672c\u3002"})})]})}),S5=()=>{const e=ee(),t=Q(),{user:r,updateUser:s,refreshUser:a}=mn(),{theme:o}=vn(),{t:l}=nn(["common","pricing"]),{refreshSubscription:c}=ps(),[d,u]=(0,i.useState)(!1),[h,p]=(0,i.useState)(!1),[m,f]=(0,i.useState)(!1),[g,v]=(0,i.useState)(!1),y=((0,i.useRef)(!1),{free_trial:{name:"free_trial",monthly:{price:0,productId:null},annual:{price:0,productId:null}},basic:{name:"basic",monthly:{price:18.7,productId:"pro_01k8fvwxgq48qv7smd2e5k3rhz",priceId:"pri_01k8fvwxgq48qv7smd2e5k3rhz"},annual:{price:187,productId:"pro_01k8fvwxgq48qv7smd2e5k3rhz",priceId:"pri_01k8fvwxgq48qv7smd2e5k3rhy"}},professional:{name:"professional",monthly:{price:37.4,productId:"pro_01k8fvwxgq48qv7smd2e5k3ria",priceId:"pri_01k8fvwxgq48qv7smd2e5k3rib"},annual:{price:374,productId:"pro_01k8fvwxgq48qv7smd2e5k3ria",priceId:"pri_01k8fvwxgq48qv7smd2e5k3ric"}},enterprise:{name:"enterprise",monthly:{price:39,productId:null},annual:{price:390,productId:null}}});(0,i.useEffect)(()=>{r&&(async()=>{try{const e=await zt.default.get("/paddle/trial-status");f(e.data.hasUsedTrial||!1)}catch(e){console.error("Failed to check trial status:",e)}})()},[r,zt.default]),(0,i.useEffect)(()=>{const n=new URLSearchParams(t.search),r=n.get("success"),i=n.get("cancelled");"true"===r?(console.log("Detected payment success URL parameter"),Ao.success("Payment successful! Subscription activated"),e("/pricing",{replace:!0})):"true"===i&&(console.log("\u68c0\u6d4b\u5230\u652f\u4ed8\u53d6\u6d88URL\u53c2\u6570"),Ao.info("Payment cancelled"),e("/pricing",{replace:!0}))},[t.search,e]),(0,i.useEffect)(()=>{(async()=>{try{const e=await Promise.resolve().then(n.bind(n,7834)),t=await e.default.loadPaddle(),r="test_01k8fvwxgq48qv7smd2e5k3rhz",i="sandbox";t&&t.Initialize?(t.Initialize({token:r}),console.log("Paddle initialized successfully with client token: ".concat(r.substring(0,20),"... (environment: ").concat(i,")")),"test_7d279f61a3499fed520f7cd8c08"===r&&console.warn("Using default test Client Token; update to real value after Paddle approval")):console.error("Paddle SDK loaded but Initialize method not found")}catch(e){console.error("Failed to initialize Paddle:",e)}})()},[]);const x=e=>{if("free_trial"===e)return 0;const t=y[e];return t?h?(t.annual.price/12).toFixed(2):t.monthly.price.toFixed(2):0},b=e=>{if("free_trial"===e)return 0;const t=y[e];if(!t)return 0;return(12*t.monthly.price-t.annual.price).toFixed(2)};return(0,sn.jsxs)("div",{className:"min-h-screen transition-colors duration-200 ".concat("dark"===o?"bg-gradient-to-br from-gray-900 via-blue-900 to-gray-800":"bg-gray-50"),children:[(0,sn.jsx)("div",{className:"py-16 px-4 sm:px-6 lg:px-8 transition-colors duration-200 ".concat("dark"===o?"bg-gradient-to-r from-gray-900 via-blue-900 to-gray-800":"bg-gradient-to-r from-blue-600 to-purple-600"),children:(0,sn.jsxs)("div",{className:"max-w-7xl mx-auto text-center",children:[(0,sn.jsx)("h1",{className:"text-4xl md:text-5xl font-bold mb-6 transition-colors duration-200 ".concat("text-white"),children:l("pricing:title")}),(0,sn.jsx)("p",{className:"text-xl mb-8 max-w-3xl mx-auto transition-colors duration-200 ".concat("dark"===o?"text-gray-300":"text-blue-100"),children:l("pricing:subtitle")})]})}),(0,sn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[(0,sn.jsx)("div",{className:"flex justify-center mb-12",children:(0,sn.jsxs)("div",{className:"p-1 rounded-lg border transition-colors duration-200 ".concat("dark"===o?"bg-gray-800 border-gray-700":"bg-white border-gray-200"),children:[(0,sn.jsx)("button",{onClick:()=>p(!1),className:"px-6 py-2 rounded-md font-medium transition-all duration-200 ".concat(h?"dark"===o?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900":"bg-blue-600 text-white shadow-md"),children:l("pricing:billing.monthly")}),(0,sn.jsxs)("button",{onClick:()=>p(!0),className:"px-6 py-2 rounded-md font-medium transition-all duration-200 relative ".concat(h?"bg-blue-600 text-white shadow-md":"dark"===o?"text-gray-300 hover:text-white":"text-gray-600 hover:text-gray-900"),children:[l("pricing:billing.annual"),(0,sn.jsx)("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:l("pricing:billing.save_percent")})]})]})}),(0,sn.jsxs)("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-8 max-w-7xl mx-auto",children:[(0,sn.jsxs)("div",{className:"rounded-2xl border p-6 transition-all duration-200 opacity-80 ".concat("dark"===o?"bg-gradient-to-br from-slate-800 to-slate-700 border-slate-600":"bg-gradient-to-br from-slate-50 to-white border-slate-300"),children:[(0,sn.jsxs)("div",{className:"text-center",children:[(0,sn.jsx)("h3",{className:"text-xl font-semibold mb-2 transition-colors duration-200 ".concat("dark"===o?"text-slate-200":"text-slate-700"),children:l("pricing:plans.free_trial.name")}),(0,sn.jsx)("p",{className:"mb-4 text-sm transition-colors duration-200 ".concat("dark"===o?"text-slate-300":"text-slate-600"),children:l("pricing:plans.free_trial.description")}),(0,sn.jsxs)("div",{className:"mb-4",children:[(0,sn.jsx)("span",{className:"text-2xl font-bold transition-colors duration-200 ".concat("dark"===o?"text-slate-200":"text-slate-700"),children:"FREE"}),(0,sn.jsx)("span",{className:"text-sm transition-colors duration-200 block ".concat("dark"===o?"text-slate-400":"text-slate-500"),children:"for 14 days"})]}),(0,sn.jsx)("div",{className:"w-full py-2 px-4 rounded-lg font-medium transition-all duration-200 bg-green-500 text-white text-center text-sm opacity-90",children:"Activated"})]}),(0,sn.jsxs)("div",{className:"mt-6",children:[(0,sn.jsx)("h4",{className:"font-medium mb-3 text-sm transition-colors duration-200 ".concat("dark"===o?"text-slate-200":"text-slate-700"),children:l("pricing:features.title")}),(0,sn.jsx)("ul",{className:"space-y-2",children:l("pricing:plans.free_trial.features",{returnObjects:!0}).map((e,t)=>(0,sn.jsxs)("li",{className:"flex items-center",children:[(0,sn.jsx)(ci,{className:"w-4 h-4 text-green-500 mr-2 opacity-80"}),(0,sn.jsx)("span",{className:"text-sm transition-colors duration-200 ".concat("dark"===o?"text-slate-300":"text-slate-600"),children:e})]},t))})]})]}),(0,sn.jsxs)("div",{className:"rounded-2xl border-2 p-10 transition-all duration-200 hover:shadow-2xl relative transform hover:scale-105 border-orange-500 ".concat("dark"===o?"bg-gradient-to-br from-slate-800 to-slate-700 shadow-orange-500/20":"bg-gradient-to-br from-slate-50 to-white shadow-orange-500/20"),children:[(0,sn.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:(0,sn.jsx)("div",{className:"bg-gradient-to-r from-slate-700 to-slate-800 text-white px-6 py-2 rounded-full text-sm font-semibold shadow-lg border-2 border-orange-500",children:"Recommended"})}),(0,sn.jsxs)("div",{className:"text-center",children:[(0,sn.jsx)("h3",{className:"text-3xl font-bold mb-3 transition-colors duration-200 ".concat("dark"===o?"text-white":"text-gray-900"),children:l("pricing:plans.basic.name")}),(0,sn.jsx)("p",{className:"mb-8 text-lg transition-colors duration-200 ".concat("dark"===o?"text-slate-300":"text-slate-700"),children:l("pricing:plans.basic.description")}),(0,sn.jsxs)("div",{className:"mb-8",children:[(0,sn.jsxs)("span",{className:"text-5xl font-bold transition-colors duration-200 ".concat("dark"===o?"text-white":"text-gray-900"),children:["\u20ac",x("basic")]}),(0,sn.jsx)("span",{className:"text-xl transition-colors duration-200 ".concat("dark"===o?"text-slate-400":"text-slate-600"),children:l("pricing:billing.per_month")}),h&&b("basic")>0&&(0,sn.jsxs)("div",{className:"text-sm text-green-600 mt-1",children:["\u5e74\u4ed8\u8282\u7701 \u20ac",b("basic")]})]}),(0,sn.jsx)("button",{onClick:()=>(async e=>{u(!0);try{const d=h?"yearly":"monthly",u=window.location.origin,p="".concat(u,"/payment-success"),g="".concat(u,"/pricing?cancelled=true");if("true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:3001",REACT_APP_PADDLE_CLIENT_TOKEN:"test_01k8fvwxgq48qv7smd2e5k3rhz",REACT_APP_PADDLE_ENVIRONMENT:"sandbox",REACT_APP_PADDLE_VENDOR_ID:"12345",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51QSvKnP7VKjGhKJhYourTestKeyHereAbCdEfGhIjKlMnOpQrStUvWxYz"}.REACT_APP_PADDLE_MOCK){const t="txn_mock_".concat(Date.now()),n="".concat(p,"?transaction_id=").concat(t,"&plan=").concat(e,"&billing=").concat(d);return void(window.location.href=n)}let v;if("true"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:3001",REACT_APP_PADDLE_CLIENT_TOKEN:"test_01k8fvwxgq48qv7smd2e5k3rhz",REACT_APP_PADDLE_ENVIRONMENT:"sandbox",REACT_APP_PADDLE_VENDOR_ID:"12345",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51QSvKnP7VKjGhKJhYourTestKeyHereAbCdEfGhIjKlMnOpQrStUvWxYz"}.REACT_APP_USE_NETLIFY_FUNCTIONS){var t,r;const n="/.netlify/functions/paddle-create-transaction",i=await fetch(n,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({plan:e,billingCycle:d,successUrl:p,cancelUrl:g})});if(!i.ok){const e=await i.text();throw new Error(e||"Netlify function failed to create transaction")}const s=await i.json();v=s.checkoutUrl||s.url||(null===s||void 0===s||null===(t=s.data)||void 0===t||null===(r=t.checkout)||void 0===r?void 0:r.url)}else try{var i,s;const t=(await zt.default.post("/paddle/create-payment-link",{plan:e,billingCycle:d,successUrl:p,cancelUrl:g})).data||{};v=t.checkoutUrl||t.url||(null===t||void 0===t||null===(i=t.data)||void 0===i||null===(s=i.checkout)||void 0===s?void 0:s.url)}catch(m){if("true"!=={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_URL:"http://localhost:3001",REACT_APP_PADDLE_CLIENT_TOKEN:"test_01k8fvwxgq48qv7smd2e5k3rhz",REACT_APP_PADDLE_ENVIRONMENT:"sandbox",REACT_APP_PADDLE_VENDOR_ID:"12345",REACT_APP_STRIPE_PUBLISHABLE_KEY:"pk_test_51QSvKnP7VKjGhKJhYourTestKeyHereAbCdEfGhIjKlMnOpQrStUvWxYz"}.REACT_APP_PADDLE_MOCK){var a,o;const e=(null===(a=m.response)||void 0===a||null===(o=a.data)||void 0===o?void 0:o.error)||m.message||"\u652f\u4ed8\u521b\u5efa\u5931\u8d25";throw new Error(e)}try{const t=(await zt.default.post("/paddle/create-payment-link-mock",{plan:e,billingCycle:d,successUrl:p,cancelUrl:g})).data||{};v=t.checkoutUrl||t.url}catch(f){var l,c;const e=(null===(l=f.response)||void 0===l||null===(c=l.data)||void 0===c?void 0:c.error)||f.message||"Mock \u652f\u4ed8\u521b\u5efa\u5931\u8d25";throw new Error(e)}}if(!v)throw new Error("\u672a\u83b7\u53d6\u5230\u7ed3\u8d26\u94fe\u63a5");const y=(await Promise.resolve().then(n.bind(n,7834))).default;await y.openCheckout(v)}catch(m){var d,p;console.error("\u521b\u5efa\u771f\u5b9e\u652f\u4ed8\u94fe\u63a5\u5931\u8d25:",m);const e=(null===(d=m.response)||void 0===d||null===(p=d.data)||void 0===p?void 0:p.error)||m.message||"\u652f\u4ed8\u521b\u5efa\u5931\u8d25";Ao.error(e)}finally{u(!1)}})("basic"),disabled:d,className:"w-full py-4 px-8 bg-gradient-to-r from-slate-700 to-slate-800 text-white rounded-lg font-semibold text-lg transition-all duration-200 hover:from-slate-800 hover:to-slate-900 hover:shadow-lg transform hover:scale-105 border-2 border-orange-500 disabled:opacity-50 disabled:cursor-not-allowed",children:d?"Processing...":"Buy Now"})]}),(0,sn.jsxs)("div",{className:"mt-10",children:[(0,sn.jsx)("h4",{className:"font-bold mb-6 text-lg transition-colors duration-200 ".concat("dark"===o?"text-white":"text-gray-900"),children:l("pricing:features.title")}),(0,sn.jsx)("ul",{className:"space-y-4",children:l("pricing:plans.basic.features",{returnObjects:!0}).map((e,t)=>(0,sn.jsxs)("li",{className:"flex items-center",children:[(0,sn.jsx)(ci,{className:"w-6 h-6 text-orange-500 mr-4 flex-shrink-0"}),(0,sn.jsx)("span",{className:"text-lg transition-colors duration-200 ".concat("dark"===o?"text-slate-200":"text-gray-700"),children:e})]},t))})]})]}),(0,sn.jsxs)("div",{className:"rounded-2xl border p-6 transition-all duration-200 opacity-60 ".concat("dark"===o?"bg-gray-800 border-gray-600":"bg-white border-gray-200"),children:[(0,sn.jsxs)("div",{className:"text-center",children:[(0,sn.jsx)("h3",{className:"text-xl font-semibold mb-2 transition-colors duration-200 ".concat("dark"===o?"text-slate-400":"text-slate-500"),children:"Enterprise Edition"}),(0,sn.jsx)("p",{className:"mb-4 text-sm transition-colors duration-200 ".concat("dark"===o?"text-slate-500":"text-slate-400"),children:"Complete solution for large enterprises"}),(0,sn.jsxs)("div",{className:"mb-4",children:[(0,sn.jsxs)("span",{className:"text-2xl font-bold transition-colors duration-200 ".concat("dark"===o?"text-slate-400":"text-slate-500"),children:["\u20ac",x("enterprise")]}),(0,sn.jsx)("span",{className:"text-sm transition-colors duration-200 block ".concat("dark"===o?"text-slate-500":"text-slate-400"),children:l("pricing:billing.per_month")}),h&&b("enterprise")>0&&(0,sn.jsxs)("div",{className:"text-sm text-gray-500 mt-1",children:["\u5e74\u4ed8\u8282\u7701 \u20ac",b("enterprise")]})]}),(0,sn.jsx)("button",{disabled:!0,className:"w-full py-2 px-4 rounded-lg font-medium transition-all duration-200 cursor-not-allowed ".concat("dark"===o?"bg-gray-700 text-gray-500 border border-gray-600":"bg-gray-200 text-gray-400 border border-gray-300"),children:"Coming Soon"})]}),(0,sn.jsxs)("div",{className:"mt-6",children:[(0,sn.jsx)("h4",{className:"font-medium mb-3 text-sm transition-colors duration-200 ".concat("dark"===o?"text-slate-400":"text-slate-500"),children:l("pricing:features.title")}),(0,sn.jsx)("ul",{className:"space-y-2",children:["Everything in Professional","Advanced integrations","Custom workflows","Dedicated account manager","24/7 priority support","Custom SLA"].map((e,t)=>(0,sn.jsxs)("li",{className:"flex items-center",children:[(0,sn.jsx)(ci,{className:"w-4 h-4 mr-2 ".concat("dark"===o?"text-gray-600":"text-gray-400")}),(0,sn.jsx)("span",{className:"text-sm transition-colors duration-200 ".concat("dark"===o?"text-slate-500":"text-slate-400"),children:e})]},t))})]})]})]}),(0,sn.jsxs)("div",{className:"mt-16 text-center p-8 rounded-2xl transition-colors duration-200 ".concat("dark"===o?"bg-gray-800 border border-gray-700":"bg-white border border-gray-200"),children:[(0,sn.jsx)(Zi,{className:"w-12 h-12 mx-auto mb-4 ".concat("dark"===o?"text-green-400":"text-green-500")}),(0,sn.jsx)("h3",{className:"text-2xl font-bold mb-4 transition-colors duration-200 ".concat("dark"===o?"text-white":"text-gray-900"),children:l("pricing:security.title")}),(0,sn.jsx)("p",{className:"text-lg mb-6 max-w-2xl mx-auto transition-colors duration-200 ".concat("dark"===o?"text-gray-300":"text-gray-600"),children:l("pricing:security.description")}),(0,sn.jsx)("div",{className:"flex justify-center space-x-8 text-sm",children:l("pricing:security.features",{returnObjects:!0}).map((e,t)=>(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)(Zi,{className:"w-5 h-5 text-green-500 mr-2"}),(0,sn.jsx)("span",{className:"transition-colors duration-200 ".concat("dark"===o?"text-gray-300":"text-gray-700"),children:e})]},t))})]})]}),g&&(0,sn.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,sn.jsx)("div",{className:"max-w-md w-full rounded-2xl p-8 transition-colors duration-200 ".concat("dark"===o?"bg-gray-800 border border-gray-700":"bg-white"),children:(0,sn.jsxs)("div",{className:"text-center",children:[(0,sn.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,sn.jsx)(ci,{className:"w-8 h-8 text-green-500"})}),(0,sn.jsx)("h3",{className:"text-2xl font-bold mb-4 transition-colors duration-200 ".concat("dark"===o?"text-white":"text-gray-900"),children:l("pricing:modal.success_title")}),(0,sn.jsx)("p",{className:"mb-6 transition-colors duration-200 ".concat("dark"===o?"text-gray-300":"text-gray-600"),children:l("pricing:modal.success_message")}),(0,sn.jsx)("button",{onClick:()=>v(!1),className:"w-full py-3 px-6 rounded-lg font-medium bg-gradient-to-r from-blue-500 to-blue-600 text-white hover:from-blue-600 hover:to-blue-700 transition-all duration-200",children:l("pricing:buttons.start_using")})]})})})]})};function _5(e){let{id:t,amountCents:n,currency:r="EUR",description:i="\u8ba2\u9605\u4ed8\u6b3e",status:s="paid",billedAt:a,invoiceNumber:o,receiptUrl:l=null}=e;try{const e=new Date,c=t||"tx-".concat(e.getTime()),d=a||e.toISOString(),u=o||"INV-".concat(e.getFullYear()).concat((e.getMonth()+1).toString().padStart(2,"0")).concat(e.getDate().toString().padStart(2,"0"),"-").concat(e.getTime()),h=localStorage.getItem("mockBillingHistory"),p=h?JSON.parse(h):[];if(p.some(e=>e.id===c))return;p.unshift({id:c,billedAt:d,description:i,status:s,amount:n,currency:r,invoiceNumber:u,receiptUrl:l}),localStorage.setItem("mockBillingHistory",JSON.stringify(p))}catch(Ae){console.warn("Append local billing record failed:",Ae)}}const C5=()=>{const e=ee(),[t]=qr(),{user:n,refreshUser:r}=mn(),{t:s}=nn(["common","subscription"]),[a,o]=(0,i.useState)(!0),[l,c]=(0,i.useState)(null),[d,u]=(0,i.useState)(null),[h,p]=(0,i.useState)(!1),m=(0,i.useRef)(!1),f=t.get("transaction_id"),g=t.get("subscription_id");t.get("plan"),t.get("billing");(0,i.useEffect)(()=>{v()},[f,g]);const v=async()=>{try{if(o(!0),p(!0),f){console.log("Processing payment success for transaction:",f),await new Promise(e=>setTimeout(e,2e3)),await r();const e=await hs.default.getSubscriptionStatus();c(e),m.current||(_5({id:f?"tx-".concat(f):void 0,amountCents:1870,currency:"EUR",description:"\u4e13\u4e1a\u7248\u6708\u5ea6\u8ba2\u9605"}),m.current=!0),Bt.success(s("subscription.payment.success"))}else{const e=await hs.default.getSubscriptionStatus();c(e)}}catch(e){console.error("Error processing payment success:",e),u(e.message),Bt.error(s("subscription.payment.error"))}finally{o(!1),p(!1)}};return a?(0,sn.jsx)("div",{className:"payment-success-page",children:(0,sn.jsx)("div",{className:"success-container",children:(0,sn.jsxs)("div",{className:"loading-section",children:[(0,sn.jsx)(Ki,{className:"loading-spinner",size:48}),(0,sn.jsx)("h2",{children:s(h?"subscription.payment.processing":"common.loading")}),(0,sn.jsx)("p",{children:s("subscription.payment.processing_description")})]})})}):d?(0,sn.jsx)("div",{className:"payment-success-page",children:(0,sn.jsx)("div",{className:"success-container",children:(0,sn.jsxs)("div",{className:"error-section",children:[(0,sn.jsx)(Zr,{size:48,className:"error-icon"}),(0,sn.jsx)("h2",{children:s("subscription.payment.error_title")}),(0,sn.jsx)("p",{children:d}),(0,sn.jsxs)("div",{className:"error-actions",children:[(0,sn.jsx)("button",{className:"btn-primary",onClick:()=>e("/subscription"),children:s("subscription.view_subscription")}),(0,sn.jsx)("button",{className:"btn-secondary",onClick:()=>e("/dashboard"),children:s("common.back_to_dashboard")})]})]})})}):(0,sn.jsx)("div",{className:"payment-success-page",children:(0,sn.jsxs)("div",{className:"success-container",children:[(0,sn.jsxs)("div",{className:"success-header",children:[(0,sn.jsx)("div",{className:"success-icon",children:(0,sn.jsx)(li,{size:64})}),(0,sn.jsx)("h1",{children:s("subscription.payment.success_title")}),(0,sn.jsx)("p",{children:s("subscription.payment.success_description")})]}),l&&(0,sn.jsxs)("div",{className:"subscription-card",children:[(0,sn.jsxs)("div",{className:"card-header",children:[(0,sn.jsx)(fi,{size:24}),(0,sn.jsx)("h3",{children:s("subscription.your_subscription")})]}),(0,sn.jsxs)("div",{className:"subscription-details",children:[(0,sn.jsxs)("div",{className:"detail-item",children:[(0,sn.jsx)("span",{className:"label",children:s("subscription.plan_type")}),(0,sn.jsx)("span",{className:"value plan-name",children:(x=l.subscription,{basic:s("subscription.plans.basic"),professional:s("subscription.plans.professional"),free_trial:s("subscription.plans.trial")}[x]||x)})]}),(0,sn.jsxs)("div",{className:"detail-item",children:[(0,sn.jsx)("span",{className:"label",children:s("subscription.status")}),(0,sn.jsxs)("span",{className:"value status-badge status-".concat(l.status),children:["active"===l.status&&s("subscription.status.active"),"trial"===l.status&&s("subscription.status.trial"),"cancelled"===l.status&&s("subscription.status.cancelled")]})]}),l.endDate&&(0,sn.jsxs)("div",{className:"detail-item",children:[(0,sn.jsxs)("span",{className:"label",children:[(0,sn.jsx)(oi,{size:16}),"trial"===l.status?s("subscription.trial_ends"):s("subscription.next_billing")]}),(0,sn.jsx)("span",{className:"value",children:(y=l.endDate,y?new Date(y).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}):"-")})]}),l.limits&&(0,sn.jsxs)("div",{className:"detail-item",children:[(0,sn.jsx)("span",{className:"label",children:s("subscription.features")}),(0,sn.jsx)("span",{className:"value",children:l.limits.maxInvoices?"".concat(l.limits.maxInvoices," ").concat(s("subscription.invoices_per_month")):s("subscription.unlimited_invoices")})]})]})]}),(0,sn.jsxs)("div",{className:"next-steps",children:[(0,sn.jsx)("h3",{children:s("subscription.payment.next_steps")}),(0,sn.jsxs)("div",{className:"steps-list",children:[(0,sn.jsxs)("div",{className:"step-item",children:[(0,sn.jsx)("div",{className:"step-number",children:"1"}),(0,sn.jsxs)("div",{className:"step-content",children:[(0,sn.jsx)("h4",{children:s("subscription.payment.step1_title")}),(0,sn.jsx)("p",{children:s("subscription.payment.step1_description")})]})]}),(0,sn.jsxs)("div",{className:"step-item",children:[(0,sn.jsx)("div",{className:"step-number",children:"2"}),(0,sn.jsxs)("div",{className:"step-content",children:[(0,sn.jsx)("h4",{children:s("subscription.payment.step2_title")}),(0,sn.jsx)("p",{children:s("subscription.payment.step2_description")})]})]}),(0,sn.jsxs)("div",{className:"step-item",children:[(0,sn.jsx)("div",{className:"step-number",children:"3"}),(0,sn.jsxs)("div",{className:"step-content",children:[(0,sn.jsx)("h4",{children:s("subscription.payment.step3_title")}),(0,sn.jsx)("p",{children:s("subscription.payment.step3_description")})]})]})]})]}),(0,sn.jsxs)("div",{className:"success-actions",children:[(0,sn.jsxs)("button",{className:"btn-primary",onClick:()=>{"trial"===(null===l||void 0===l?void 0:l.subscription)?e("/dashboard?welcome=trial"):e("/dashboard?welcome=subscription")},children:[s("subscription.payment.start_using"),(0,sn.jsx)(ni,{size:16})]}),(0,sn.jsx)("button",{className:"btn-secondary",onClick:()=>{e("/subscription")},children:s("subscription.view_subscription")})]}),(0,sn.jsxs)("div",{className:"support-info",children:[(0,sn.jsx)("p",{children:s("subscription.payment.support_text")}),(0,sn.jsx)("a",{href:"mailto:support@example.com",className:"support-link",children:s("subscription.payment.contact_support")})]})]})});var y,x},E5=()=>{const{t:e}=nn(["common","subscription"]),t=ee(),{user:n}=mn(),{subscriptionStatus:r,subscriptionType:s,isTrialActive:a,isProfessional:o,isBasic:l,getRemainingDays:c,getExpirationDate:d}=ps(),[u,h]=(0,i.useState)(null),[p,m]=(0,i.useState)([]),[f,g]=(0,i.useState)(null),[v,y]=(0,i.useState)(!0),[x,b]=(0,i.useState)(!1),[w,j]=(0,i.useState)(!1),[N,k]=(0,i.useState)(!1),[A,S]=(0,i.useState)(""),[_,C]=(0,i.useState)(null);(0,i.useEffect)(()=>{E()},[]);const E=async()=>{try{var e,t,n,r,i,s;y(!0),C(null);let a=null,o=null,l=null;const c=[];try{a=await U4.getCurrentSubscription()}catch(Ae){console.error("Error loading current subscription:",Ae),c.push("subscription")}try{o=await U4.getBillingHistory()}catch(Ae){console.error("Error loading billing history:",Ae),c.push("billing")}try{l=await U4.getSubscriptionFeatures()}catch(Ae){console.error("Error loading subscription features:",Ae),c.push("features")}const d=(null===(e=a)||void 0===e?void 0:e.subscription)||(null===(t=a)||void 0===t?void 0:t.data)||a||null,u=Array.isArray(o)?o:Array.isArray(null===(n=o)||void 0===n?void 0:n.transactions)?o.transactions:Array.isArray(null===(r=o)||void 0===r?void 0:r.data)?o.data:[],p=(null===(i=l)||void 0===i?void 0:i.features)||(null===(s=l)||void 0===s?void 0:s.data)||l||null,f=localStorage.getItem("token"),v=[{id:"demo-tx-001",billedAt:(new Date).toISOString(),description:"Professional monthly subscription",status:"paid",amount:1870,currency:"EUR",invoiceNumber:"INV-DEMO-001",receiptUrl:null}];let x=[];try{const e=localStorage.getItem("mockBillingHistory");x=e?JSON.parse(e):[]}catch(Ae){console.warn("Read local billing history failed:",Ae)}h(d),m(0===u.length&&"dev-mock-token"===f?x.length>0?x:v:u),g(p),3===c.length&&(C("Failed to load subscription information"),Ao.error("Failed to load subscription information"))}catch(_){console.error("Error loading subscription data:",_),C(_.message||"Failed to load subscription information"),Ao.error("Failed to load subscription information")}finally{y(!1)}},P=e=>{const t={active:{text:"Active",className:"status-active",icon:ci},cancelled:{text:"Cancelled",className:"status-cancelled",icon:ls},past_due:{text:"Past Due",className:"status-past-due",icon:ei},paused:{text:"Paused",className:"status-paused",icon:pi},trialing:{text:"Trialing",className:"status-trialing",icon:cs},trial:{text:"Trialing",className:"status-trialing",icon:cs},expired:{text:"Expired",className:"status-expired",icon:ls},inactive:{text:"Inactive",className:"status-inactive",icon:Zr},succeeded:{text:"Succeeded",className:"status-active",icon:ci},paid:{text:"Paid",className:"status-active",icon:ci},failed:{text:"Failed",className:"status-past-due",icon:ei},refunded:{text:"Refunded",className:"status-cancelled",icon:Ki},processing:{text:"Processing",className:"status-paused",icon:Mi},pending:{text:"Pending",className:"status-paused",icon:pi},completed:{text:"Completed",className:"status-active",icon:ci}},n=t[e]||t.inactive,r=n.icon;return(0,sn.jsxs)("span",{className:"status-badge ".concat(n.className),children:[(0,sn.jsx)(r,{size:14}),n.text]})},T=e=>{if(!e)return"-";return("string"===typeof e?new Date(e):e).toLocaleDateString("en-GB",{year:"numeric",month:"long",day:"numeric"})},M=e=>{if(!e)return"-";return("string"===typeof e?new Date(e):e).toLocaleString("en-GB",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"})},D=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"EUR";return e?new Intl.NumberFormat("en-GB",{style:"currency",currency:t}).format(e/100):"-"};if(v)return(0,sn.jsx)("div",{className:"subscription-settings",children:(0,sn.jsxs)("div",{className:"loading-container",children:[(0,sn.jsx)("div",{className:"loading-spinner",children:(0,sn.jsx)(Ki,{className:"spin",size:32})}),(0,sn.jsx)("p",{children:"Loading subscription information..."})]})});if(_)return(0,sn.jsx)("div",{className:"subscription-settings",children:(0,sn.jsxs)("div",{className:"error-container",children:[(0,sn.jsx)(ei,{size:48,className:"error-icon"}),(0,sn.jsx)("h3",{children:"Load failed"}),(0,sn.jsx)("p",{children:_}),(0,sn.jsxs)("button",{className:"btn btn-primary",onClick:E,children:[(0,sn.jsx)(Ki,{size:16}),"Retry"]})]})});const O=(()=>{const e=((null===u||void 0===u?void 0:u.planType)||s||"free").replace(/^pro$/i,"professional");return"professional"===e||o?{name:"Professional",icon:ri,color:"blue",features:["Unlimited invoices","Advanced reports","Priority support","Custom templates","API access"]}:"basic"===e||l?{name:"Basic",icon:es,color:"green",features:["50 invoices per month","Basic reports","Email support","Standard templates"]}:a?{name:"Trial",icon:cs,color:"orange",features:["Try all features","14-day free trial","Full product experience"]}:{name:"Free",icon:Zi,color:"gray",features:["5 invoices per month","Basic features","Community support"]}})(),R=O.icon,I=((null===u||void 0===u?void 0:u.planType)||s||"free").replace(/^pro$/i,"professional"),L=d()||(null!==u&&void 0!==u&&u.endDate?new Date(null===u||void 0===u?void 0:u.endDate):null),F=c();let B=((null===u||void 0===u?void 0:u.status)||r||"inactive").toLowerCase();return"professional"===I&&("number"===typeof F?B=F>0||0===F?"active":"expired":L instanceof Date&&(B=L.getTime()>Date.now()?"active":"expired")),(0,sn.jsxs)("div",{className:"subscription-settings",children:[(0,sn.jsxs)("div",{className:"page-header",children:[(0,sn.jsxs)("div",{className:"header-content",children:[(0,sn.jsx)("h1",{children:"Subscription Management"}),(0,sn.jsx)("p",{children:"Manage your subscription plan and billing information"})]}),(0,sn.jsx)("div",{className:"header-actions",children:(0,sn.jsxs)("button",{className:"btn btn-secondary",onClick:async()=>{try{b(!0);const e=await U4.syncSubscription();e.success?(Ao.success("Subscription status synced successfully"),await E()):Ao.error(e.message||"Sync failed")}catch(_){console.error("Error syncing subscription:",_),Ao.error("Failed to sync subscription status")}finally{b(!1)}},disabled:x,children:[x?(0,sn.jsx)(Ki,{className:"spin",size:16}):(0,sn.jsx)(Ki,{size:16}),x?"Syncing...":"Sync Status"]})})]}),(0,sn.jsxs)("div",{className:"subscription-overview-card",children:[(0,sn.jsxs)("div",{className:"plan-header",children:[(0,sn.jsxs)("div",{className:"plan-info",children:[(0,sn.jsx)("div",{className:"plan-icon ".concat("active"===B?"active":"expired"===B?"expired":""),children:(0,sn.jsx)(R,{size:24})}),(0,sn.jsxs)("div",{className:"plan-details",children:[(0,sn.jsxs)("h2",{className:"plan-name",children:[O.name," Plan"]}),(0,sn.jsx)("div",{className:"plan-status",children:P(B)})]})]}),(L||(null===u||void 0===u?void 0:u.endDate))&&(0,sn.jsxs)("div",{className:"time-info",children:[(0,sn.jsx)("div",{className:"time-label",children:"Remaining Time"}),(0,sn.jsx)("div",{className:"time-value",children:(()=>{const e=c();return null===e?"Calculating...":0===e?"Due today":e<0?"Expired":"".concat(e," days")})()}),(0,sn.jsxs)("div",{className:"expiry-date",children:["Expires: ",T(L||(null===u||void 0===u?void 0:u.endDate))]})]})]}),(0,sn.jsxs)("div",{className:"plan-features",children:[(0,sn.jsx)("h4",{children:"Your plan includes:"}),(0,sn.jsx)("ul",{className:"features-list",children:O.features.map((e,t)=>(0,sn.jsxs)("li",{children:[(0,sn.jsx)(ci,{size:16}),e]},t))})]}),(0,sn.jsx)("div",{className:"plan-actions",children:(!u||"free"===I)&&(0,sn.jsxs)("button",{className:"btn btn-primary btn-large",onClick:async()=>{try{t("/pricing")}catch(_){console.error("Error navigating to pricing:",_),Ao.error("Failed to navigate to pricing")}},children:[(0,sn.jsx)(is,{size:18}),"Upgrade to paid plan"]})})]}),u&&(0,sn.jsxs)("div",{className:"settings-card",children:[(0,sn.jsx)("div",{className:"card-header",children:(0,sn.jsxs)("h3",{children:[(0,sn.jsx)(fi,{size:20}),"Subscription Details"]})}),(0,sn.jsx)("div",{className:"subscription-details",children:(0,sn.jsxs)("div",{className:"detail-grid",children:[(null===u||void 0===u?void 0:u.amount)&&(0,sn.jsxs)("div",{className:"detail-item",children:[(0,sn.jsxs)("div",{className:"detail-label",children:[(0,sn.jsx)(gi,{size:16}),"Subscription Price"]}),(0,sn.jsxs)("div",{className:"detail-value",children:[D(null===u||void 0===u?void 0:u.amount,null===u||void 0===u?void 0:u.currency)," / ",U4.formatBillingCycle(null===u||void 0===u?void 0:u.billingCycle)]})]}),((null===u||void 0===u?void 0:u.nextBillingDate)||L)&&"active"===B&&"free"!==I&&(0,sn.jsxs)("div",{className:"detail-item",children:[(0,sn.jsxs)("div",{className:"detail-label",children:[(0,sn.jsx)(oi,{size:16}),"Next Billing"]}),(0,sn.jsx)("div",{className:"detail-value",children:T((null===u||void 0===u?void 0:u.nextBillingDate)||L)})]}),(0,sn.jsxs)("div",{className:"detail-item",children:[(0,sn.jsxs)("div",{className:"detail-label",children:[(0,sn.jsx)(as,{size:16}),"Subscriber"]}),(0,sn.jsxs)("div",{className:"detail-value",children:[null===n||void 0===n?void 0:n.firstName," ",null===n||void 0===n?void 0:n.lastName]})]}),(0,sn.jsxs)("div",{className:"detail-item",children:[(0,sn.jsxs)("div",{className:"detail-label",children:[(0,sn.jsx)(Ri,{size:16}),"Billing Email"]}),(0,sn.jsx)("div",{className:"detail-value",children:null===n||void 0===n?void 0:n.email})]})]})})]}),(0,sn.jsxs)("div",{className:"settings-card",children:[(0,sn.jsx)("div",{className:"card-header",children:(0,sn.jsxs)("h3",{children:[(0,sn.jsx)(fi,{size:20}),"Billing History"]})}),(0,sn.jsx)("div",{className:"billing-section",children:p.length>0?(0,sn.jsx)("div",{className:"billing-history",children:p.map((e,t)=>(0,sn.jsxs)("div",{className:"billing-item",children:[(0,sn.jsxs)("div",{className:"billing-main",children:[(0,sn.jsxs)("div",{className:"billing-info",children:[(0,sn.jsxs)("div",{className:"billing-date",children:[(0,sn.jsx)(oi,{size:16}),M(e.billedAt||e.createdAt)]}),(0,sn.jsx)("div",{className:"billing-description",children:e.description||"Subscription Payment"})]}),(0,sn.jsx)("div",{className:"billing-status",children:P(e.status)}),(0,sn.jsx)("div",{className:"billing-amount",children:D(e.amount,e.currency)})]}),(0,sn.jsxs)("div",{className:"billing-actions",children:[e.receiptUrl&&(0,sn.jsx)("a",{href:e.receiptUrl,target:"_blank",rel:"noopener noreferrer",className:"btn btn-icon",title:"Download receipt",children:(0,sn.jsx)(vi,{size:16})}),e.invoiceNumber&&(0,sn.jsxs)("span",{className:"invoice-number",children:["#",e.invoiceNumber]})]})]},e.id||t))}):(0,sn.jsxs)("div",{className:"empty-state",children:[(0,sn.jsx)(fi,{size:48}),(0,sn.jsx)("h4",{children:"No billing history"}),(0,sn.jsx)("p",{children:"Your billing records will appear here"})]})})]}),N&&(0,sn.jsx)("div",{className:"modal-overlay",onClick:()=>k(!1),children:(0,sn.jsxs)("div",{className:"modal",onClick:e=>e.stopPropagation(),children:[(0,sn.jsxs)("div",{className:"modal-header",children:[(0,sn.jsx)("h3",{children:"Confirm Cancellation"}),(0,sn.jsx)("button",{className:"modal-close",onClick:()=>k(!1),children:(0,sn.jsx)(ls,{size:20})})]}),(0,sn.jsxs)("div",{className:"modal-body",children:[(0,sn.jsxs)("div",{className:"warning-box",children:[(0,sn.jsx)(ei,{size:24}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h4",{children:"Are you sure you want to cancel your subscription?"}),(0,sn.jsx)("p",{children:"After cancellation you will lose access to paid features. The cancellation takes effect at the end of the current billing cycle; you can continue using paid features until then."})]})]}),(0,sn.jsxs)("div",{className:"form-group",children:[(0,sn.jsx)("label",{htmlFor:"cancelReason",children:"Cancellation reason (optional)"}),(0,sn.jsx)("textarea",{id:"cancelReason",value:A,onChange:e=>S(e.target.value),placeholder:"Tell us why you\u2019re cancelling to help us improve...",rows:4})]})]}),(0,sn.jsxs)("div",{className:"modal-actions",children:[(0,sn.jsx)("button",{className:"btn btn-secondary",onClick:()=>{k(!1),S("")},disabled:w,children:"Keep Subscription"}),(0,sn.jsx)("button",{className:"btn btn-danger",onClick:async()=>{try{j(!0);const e=await U4.cancelSubscription(A);e.success?(Ao.success("Subscription cancelled successfully"),k(!1),S(""),await E()):Ao.error(e.message||"Failed to cancel subscription")}catch(_){console.error("Error cancelling subscription:",_),Ao.error("Failed to cancel subscription")}finally{j(!1)}},disabled:w,children:w?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(Ki,{className:"spin",size:16}),"Cancelling..."]}):(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(ls,{size:16}),"Confirm Cancellation"]})})]})]})})]})},P5=()=>{const{user:e,updateUser:t}=mn(),{isDarkMode:n}=vn(),[r,s]=(0,i.useState)(!1),[a,o]=(0,i.useState)([]),[l,c]=(0,i.useState)(null),{subscription:d,isExpired:u,daysRemaining:h,expiryDate:p,showWarning:m,hasFeature:f,getInvoiceLimit:g,refreshSubscription:v}=ps(),y=function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;const i={id:Date.now(),timestamp:(new Date).toLocaleString(),action:e,success:t,message:n,data:r};o(e=>[i,...e])};return(0,sn.jsx)("div",{className:"subscription-test-page ".concat(n?"dark":""),children:(0,sn.jsxs)("div",{className:"test-container",children:[(0,sn.jsxs)("div",{className:"test-header",children:[(0,sn.jsxs)("h1",{children:[(0,sn.jsx)($i,{className:"icon"})," \u8ba2\u9605\u65f6\u9650\u7ba1\u7406\u6d4b\u8bd5"]}),(0,sn.jsx)("p",{children:"\u6d4b\u8bd5\u65b0\u7684\u8ba2\u9605\u65f6\u9650\u7ba1\u7406\u7cfb\u7edf\u529f\u80fd"})]}),(0,sn.jsxs)("div",{className:"status-section",children:[(0,sn.jsxs)("h2",{children:[(0,sn.jsx)(as,{className:"icon"})," \u5f53\u524d\u8ba2\u9605\u72b6\u6001"]}),(0,sn.jsxs)("div",{className:"status-grid",children:[(0,sn.jsxs)("div",{className:"status-card",children:[(0,sn.jsx)("h3",{children:"\u7528\u6237\u4fe1\u606f"}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u7528\u6237ID:"})," ",null===e||void 0===e?void 0:e.id]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u90ae\u7bb1:"})," ",null===e||void 0===e?void 0:e.email]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u8bd5\u7528\u5df2\u4f7f\u7528:"})," ",null!==e&&void 0!==e&&e.trialUsed?"\u662f":"\u5426"]})]}),(0,sn.jsxs)("div",{className:"status-card",children:[(0,sn.jsx)("h3",{children:"\u8ba2\u9605\u8be6\u60c5"}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u72b6\u6001:"})," ",(0,sn.jsx)("span",{className:"status ".concat(null===d||void 0===d?void 0:d.status),children:(null===d||void 0===d?void 0:d.status)||"N/A"})]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u7c7b\u578b:"})," ",(null===d||void 0===d?void 0:d.type)||"N/A"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u8ba1\u8d39\u5468\u671f:"})," ",(null===d||void 0===d?void 0:d.billingCycle)||"N/A"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u4ef7\u683c:"})," ",(null===d||void 0===d?void 0:d.price)||"N/A"]})]}),(0,sn.jsxs)("div",{className:"status-card",children:[(0,sn.jsx)("h3",{children:"\u65f6\u95f4\u4fe1\u606f"}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u662f\u5426\u8fc7\u671f:"})," ",(0,sn.jsx)("span",{className:u?"expired":"active",children:u?"\u662f":"\u5426"})]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u5269\u4f59\u5929\u6570:"})," ",null!==h?"".concat(h," \u5929"):"N/A"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u5230\u671f\u65e5\u671f:"})," ",p?new Date(p).toLocaleDateString():"N/A"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u663e\u793a\u8b66\u544a:"})," ",m?"\u662f":"\u5426"]})]}),(0,sn.jsxs)("div",{className:"status-card",children:[(0,sn.jsx)("h3",{children:"\u529f\u80fd\u6743\u9650"}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u9ad8\u7ea7\u529f\u80fd:"})," ",f("advanced")?"\u2705":"\u274c"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u5bfc\u51fa\u529f\u80fd:"})," ",f("export")?"\u2705":"\u274c"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u53d1\u7968\u9650\u5236:"})," ",g()]})]})]})]}),(0,sn.jsxs)("div",{className:"actions-section",children:[(0,sn.jsxs)("h2",{children:[(0,sn.jsx)(Hi,{className:"icon"})," \u6d4b\u8bd5\u64cd\u4f5c"]}),(0,sn.jsxs)("div",{className:"actions-grid",children:[(0,sn.jsx)("button",{onClick:async()=>{s(!0);try{const n=await zt.default.post("/paddle/force-expire");n.data.success?(await t((0,Ne.A)((0,Ne.A)({},e),{},{subscriptionStatus:n.data.data.subscriptionStatus,subscriptionEndDate:n.data.data.subscriptionEndDate})),await v(),y("\u65f6\u95f4\u5f52\u96f6",!0,"\u5269\u4f59\u65f6\u95f4\u5df2\u8bbe\u4e3a0\uff0c\u8ba2\u9605\u72b6\u6001\u5df2\u8fc7\u671f\uff08\u540e\u7aef\u5df2\u540c\u6b65\uff09",n.data.data),Ao.success("\u5269\u4f59\u65f6\u95f4\u5df2\u5f52\u96f6\uff0c\u8ba2\u9605\u5df2\u8fc7\u671f\uff01")):(y("\u65f6\u95f4\u5f52\u96f6",!1,n.data.message||"\u5f3a\u5236\u8fc7\u671f\u5931\u8d25"),Ao.error(n.data.message||"\u5f3a\u5236\u8fc7\u671f\u5931\u8d25"))}catch(n){console.error("\u5f3a\u5236\u8fc7\u671f\u5931\u8d25:",n),y("\u65f6\u95f4\u5f52\u96f6",!1,n.message),Ao.error("\u5f3a\u5236\u8fc7\u671f\u5931\u8d25")}finally{s(!1)}},disabled:r,className:"test-button expire-button",children:"\u23f0 \u65f6\u95f4\u5f52\u96f6\uff08\u5f3a\u5236\u8fc7\u671f\uff09"}),(0,sn.jsxs)("button",{className:"test-btn trial-btn",onClick:async()=>{s(!0);try{const n=await hs.default.activateTrial();n.success?(await t((0,Ne.A)((0,Ne.A)({},e),{},{subscriptionStatus:"trial",subscriptionEndDate:n.subscription.endDate,trialUsed:!0})),await v(),y("\u6fc0\u6d3b\u514d\u8d39\u8bd5\u7528",!0,"\u8bd5\u7528\u6fc0\u6d3b\u6210\u529f\uff01\u8bd5\u7528\u671f\u81f3 ".concat(new Date(n.subscription.endDate).toLocaleDateString(),"\uff0c\u5269\u4f59 ").concat(n.subscription.daysRemaining," \u5929"),n),Ao.success("\u514d\u8d39\u8bd5\u7528\u6fc0\u6d3b\u6210\u529f\uff01")):(y("\u6fc0\u6d3b\u514d\u8d39\u8bd5\u7528",!1,n.message||"\u6fc0\u6d3b\u5931\u8d25"),Ao.error(n.message||"\u6fc0\u6d3b\u5931\u8d25"))}catch(n){console.error("\u6fc0\u6d3b\u8bd5\u7528\u5931\u8d25:",n),y("\u6fc0\u6d3b\u514d\u8d39\u8bd5\u7528",!1,n.message),Ao.error("\u6fc0\u6d3b\u8bd5\u7528\u5931\u8d25")}finally{s(!1)}},disabled:r||(null===e||void 0===e?void 0:e.trialUsed),children:[(0,sn.jsx)(pi,{className:"icon"}),"\u6fc0\u6d3b\u514d\u8d39\u8bd5\u7528",(null===e||void 0===e?void 0:e.trialUsed)&&(0,sn.jsx)("span",{className:"disabled-text",children:"(\u5df2\u4f7f\u7528)"})]}),(0,sn.jsxs)("button",{className:"test-btn payment-btn",onClick:()=>async function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pro_monthly";s(!0);try{const r=await zt.default.post("/paddle/mock-payment-success",{plan:"professional",billingCycle:"monthly",transactionId:"mock_".concat(Date.now())});r.data.success?(await t((0,Ne.A)((0,Ne.A)({},e),{},{subscription:"professional",subscriptionStatus:"active",subscriptionEndDate:r.data.subscription.endDate})),await v(),y("\u6a21\u62df\u652f\u4ed8",!0,"\u652f\u4ed8\u6210\u529f\uff01\u8ba2\u9605 ".concat(n,"\uff0c\u5269\u4f59 ").concat(r.data.subscription.daysRemaining," \u5929"),r.data),Ao.success("\u652f\u4ed8\u6a21\u62df\u6210\u529f\uff01")):(y("\u6a21\u62df\u652f\u4ed8",!1,r.data.message||"\u652f\u4ed8\u5931\u8d25"),Ao.error(r.data.message||"\u652f\u4ed8\u5931\u8d25"))}catch(r){console.error("\u6a21\u62df\u652f\u4ed8\u5931\u8d25:",r),y("\u6a21\u62df\u652f\u4ed8",!1,r.message),Ao.error("\u6a21\u62df\u652f\u4ed8\u5931\u8d25")}finally{s(!1)}}("pro_monthly"),disabled:r,children:[(0,sn.jsx)(Hi,{className:"icon"}),"\u6a21\u62df\u6708\u4ed8\u652f\u4ed8\uff08\u7d2f\u52a030\u5929\uff09"]}),(0,sn.jsxs)("button",{className:"test-btn status-btn",onClick:async()=>{s(!0);try{const e=await hs.default.getSubscriptionStatus();c(e),y("\u83b7\u53d6\u8ba2\u9605\u72b6\u6001",!0,"\u8ba2\u9605\u72b6\u6001\u83b7\u53d6\u6210\u529f",e),Ao.success("\u8ba2\u9605\u72b6\u6001\u83b7\u53d6\u6210\u529f\uff01")}catch(e){console.error("\u83b7\u53d6\u8ba2\u9605\u72b6\u6001\u5931\u8d25:",e),y("\u83b7\u53d6\u8ba2\u9605\u72b6\u6001",!1,e.message),Ao.error("\u83b7\u53d6\u8ba2\u9605\u72b6\u6001\u5931\u8d25")}finally{s(!1)}},disabled:r,children:[(0,sn.jsx)(Ki,{className:"icon"}),"\u83b7\u53d6\u8ba2\u9605\u72b6\u6001"]}),(0,sn.jsxs)("button",{className:"test-btn refresh-btn",onClick:v,disabled:r,children:[(0,sn.jsx)(Ki,{className:"icon"}),"\u5237\u65b0\u8ba2\u9605"]}),(0,sn.jsxs)("button",{className:"test-btn reset-btn",onClick:async()=>{s(!0);try{const n=await hs.default.resetTrialStatus();n.success?(await t((0,Ne.A)((0,Ne.A)({},e),{},{subscriptionStatus:"free",subscriptionEndDate:null,subscriptionType:null,trialUsed:!1})),await v(),y("\u91cd\u7f6e\u8bd5\u7528\u72b6\u6001",!0,"\u8bd5\u7528\u72b6\u6001\u5df2\u91cd\u7f6e",n.data),Ao.success("\u8bd5\u7528\u72b6\u6001\u5df2\u91cd\u7f6e\uff01")):(y("\u91cd\u7f6e\u8bd5\u7528\u72b6\u6001",!1,n.message||"\u91cd\u7f6e\u5931\u8d25"),Ao.error(n.message||"\u91cd\u7f6e\u5931\u8d25"))}catch(n){console.error("\u91cd\u7f6e\u8bd5\u7528\u5931\u8d25:",n),y("\u91cd\u7f6e\u8bd5\u7528\u72b6\u6001",!1,n.message),Ao.error("\u91cd\u7f6e\u8bd5\u7528\u5931\u8d25")}finally{s(!1)}},disabled:r,children:[(0,sn.jsx)(ns,{className:"icon"}),"\u91cd\u7f6e\u8bd5\u7528\u72b6\u6001"]})]})]}),(0,sn.jsxs)("div",{className:"results-section",children:[(0,sn.jsxs)("div",{className:"results-header",children:[(0,sn.jsxs)("h2",{children:[(0,sn.jsx)(pi,{className:"icon"})," \u6d4b\u8bd5\u7ed3\u679c"]}),(0,sn.jsxs)("button",{className:"clear-btn",onClick:()=>{o([]),Ao.info("\u6d4b\u8bd5\u7ed3\u679c\u5df2\u6e05\u7a7a")},disabled:0===a.length,children:[(0,sn.jsx)(ns,{className:"icon"}),"\u6e05\u7a7a\u7ed3\u679c"]})]}),(0,sn.jsx)("div",{className:"results-list",children:0===a.length?(0,sn.jsx)("div",{className:"no-results",children:(0,sn.jsx)("p",{children:"\u6682\u65e0\u6d4b\u8bd5\u7ed3\u679c"})}):a.map(e=>(0,sn.jsxs)("div",{className:"result-item ".concat(e.success?"success":"error"),children:[(0,sn.jsxs)("div",{className:"result-header",children:[(0,sn.jsx)("span",{className:"result-action",children:e.action}),(0,sn.jsx)("span",{className:"result-time",children:e.timestamp})]}),(0,sn.jsx)("div",{className:"result-message",children:e.message}),e.data&&(0,sn.jsxs)("details",{className:"result-data",children:[(0,sn.jsx)("summary",{children:"\u8be6\u7ec6\u6570\u636e"}),(0,sn.jsx)("pre",{children:JSON.stringify(e.data,null,2)})]})]},e.id))})]}),l&&(0,sn.jsxs)("div",{className:"api-data-section",children:[(0,sn.jsxs)("h2",{children:[(0,sn.jsx)($i,{className:"icon"})," API \u54cd\u5e94\u6570\u636e"]}),(0,sn.jsx)("div",{className:"api-data",children:(0,sn.jsx)("pre",{children:JSON.stringify(l,null,2)})})]})]})})},T5=()=>{const{user:e}=mn(),t=ps();return(0,sn.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,sn.jsx)("h1",{className:"text-2xl font-bold mb-6",children:"\u8ba2\u9605\u72b6\u6001\u6d4b\u8bd5\u9875\u9762"}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sn.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,sn.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"\u7528\u6237\u4fe1\u606f (AuthContext)"}),(0,sn.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"ID:"})," ",null===e||void 0===e?void 0:e.id]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u59d3\u540d:"})," ",null===e||void 0===e?void 0:e.name]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u90ae\u7bb1:"})," ",null===e||void 0===e?void 0:e.email]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u8ba2\u9605\u7c7b\u578b:"})," ",(null===e||void 0===e?void 0:e.subscription)||"\u672a\u8bbe\u7f6e"]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u8ba2\u9605\u72b6\u6001:"})," ",(null===e||void 0===e?void 0:e.subscriptionStatus)||"\u672a\u8bbe\u7f6e"]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u8fc7\u671f\u65f6\u95f4:"})," ",(null===e||void 0===e?void 0:e.subscriptionEndDate)||"\u672a\u8bbe\u7f6e"]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u4ea4\u6613ID:"})," ",(null===e||void 0===e?void 0:e.paddleTransactionId)||"\u672a\u8bbe\u7f6e"]})]})]}),(0,sn.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow",children:[(0,sn.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"\u8ba2\u9605\u8ba1\u65f6\u5668 (useSubscriptionTimer)"}),(0,sn.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u8ba2\u9605\u6570\u636e:"})," ",t.subscription?"\u5df2\u52a0\u8f7d":"\u672a\u52a0\u8f7d"]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u8ba2\u9605\u7c7b\u578b:"})," ",t.subscriptionType||"\u672a\u8bbe\u7f6e"]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u8ba2\u9605\u72b6\u6001:"})," ",t.subscriptionStatus||"\u672a\u8bbe\u7f6e"]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u662f\u5426\u8fc7\u671f:"})," ",t.isExpired?"\u662f":"\u5426"]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u5269\u4f59\u5929\u6570:"})," ",t.daysRemaining||"\u672a\u8ba1\u7b97"]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u8fc7\u671f\u65e5\u671f:"})," ",t.expiryDate?t.expiryDate.toLocaleDateString():"\u672a\u8bbe\u7f6e"]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u663e\u793a\u8b66\u544a:"})," ",t.showWarning?"\u662f":"\u5426"]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u6709\u6d3b\u8dc3\u8ba2\u9605:"})," ",t.hasActiveSubscription?"\u662f":"\u5426"]})]})]}),(0,sn.jsxs)("div",{className:"bg-white p-4 rounded-lg shadow md:col-span-2",children:[(0,sn.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"TrialCountdown \u7ec4\u4ef6\u663e\u793a"}),(0,sn.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u6b63\u5e38\u5927\u5c0f:"}),(0,sn.jsx)(ms,{size:"normal"})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("strong",{children:"\u5c0f\u5c3a\u5bf8:"}),(0,sn.jsx)(ms,{size:"small"})]})]})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg md:col-span-2",children:[(0,sn.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"\u8c03\u8bd5\u4fe1\u606f"}),(0,sn.jsxs)("div",{className:"text-xs",children:[(0,sn.jsx)("div",{children:(0,sn.jsx)("strong",{children:"\u5b8c\u6574\u7528\u6237\u5bf9\u8c61:"})}),(0,sn.jsx)("pre",{className:"bg-gray-100 p-2 rounded mt-1 overflow-auto",children:JSON.stringify(e,null,2)}),(0,sn.jsx)("div",{className:"mt-3",children:(0,sn.jsx)("strong",{children:"\u5b8c\u6574\u8ba2\u9605\u6570\u636e:"})}),(0,sn.jsx)("pre",{className:"bg-gray-100 p-2 rounded mt-1 overflow-auto",children:JSON.stringify(t,null,2)})]})]})]})]})},M5=()=>{const{user:e,updateUser:t}=mn(),n=ps(),[r,s]=(0,i.useState)(!1);return(0,sn.jsxs)("div",{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow max-w-4xl mx-auto",children:[(0,sn.jsx)("h2",{className:"text-xl font-bold mb-4",children:"Payment Function Test"}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,sn.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded",children:[(0,sn.jsx)("h3",{className:"font-semibold mb-2",children:"\u7528\u6237\u4fe1\u606f"}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u90ae\u7bb1:"})," ",(null===e||void 0===e?void 0:e.email)||"\u672a\u767b\u5f55"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u5f53\u524d\u8ba2\u9605:"})," ",(null===e||void 0===e?void 0:e.subscription)||"free"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u8ba2\u9605\u72b6\u6001:"})," ",(null===e||void 0===e?void 0:e.subscriptionStatus)||"inactive"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u5230\u671f\u65f6\u95f4:"})," ",(null===e||void 0===e?void 0:e.subscriptionEndDate)||"\u65e0"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u4ea4\u6613ID:"})," ",(null===e||void 0===e?void 0:e.paddleTransactionId)||"\u65e0"]})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 dark:bg-gray-700 p-4 rounded",children:[(0,sn.jsx)("h3",{className:"font-semibold mb-2",children:"\u8ba2\u9605\u8ba1\u65f6\u5668\u72b6\u6001"}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u8ba2\u9605\u7c7b\u578b:"})," ",n.subscriptionType]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u8ba2\u9605\u72b6\u6001:"})," ",n.subscriptionStatus]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u5269\u4f59\u5929\u6570:"})," ",n.daysRemaining]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u662f\u5426\u8fc7\u671f:"})," ",n.isExpired?"\u662f":"\u5426"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u662f\u5426\u4e13\u4e1a\u7248:"})," ",n.isProfessional?"\u662f":"\u5426"]}),(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u52a0\u8f7d\u72b6\u6001:"})," ",n.loading?"\u52a0\u8f7d\u4e2d":"\u5df2\u52a0\u8f7d"]}),n.error&&(0,sn.jsxs)("p",{children:[(0,sn.jsx)("strong",{children:"\u9519\u8bef:"})," ",n.error]})]})]}),(0,sn.jsxs)("div",{className:"mt-6 flex gap-4",children:[(0,sn.jsx)("button",{onClick:async()=>{if(console.log("=== Test payment button clicked ==="),console.log("\u7528\u6237\u72b6\u6001:",e),e){s(!0);try{console.log("Starting mock payment API call...");const r=await zt.default.post("/paddle/mock-payment-success",{plan:"professional",billingCycle:"monthly",transactionId:"test_".concat(Date.now())});if(console.log("Payment API response:",r.data),r.data.success){const i=r.data.subscription,s=(0,Ne.A)((0,Ne.A)({},e),{},{subscription:i.status,subscriptionStatus:"active",subscriptionEndDate:i.endDate,paddleTransactionId:i.transactionId});console.log("\u66f4\u65b0\u7528\u6237\u6570\u636e:",s),t(s),n.refreshSubscription&&await n.refreshSubscription(),Bt.success("Payment successful! ".concat(i.daysRemaining," days remaining"))}else Bt.error("Payment failed")}catch(r){console.error("Payment error:",r),Bt.error("An error occurred during payment: ".concat(r.message))}finally{s(!1)}}else Bt.error("Please log in first")},disabled:r,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50",children:r?"Processing...":"Test Payment"}),(0,sn.jsx)("button",{onClick:async()=>{try{console.log("Testing subscription status API...");const e=await zt.default.get("/paddle/subscription-status");console.log("Subscription status API response:",e.data),Bt.success("Subscription status API call succeeded")}catch(e){console.error("Subscription status API error:",e),Bt.error("Subscription status API error: ".concat(e.message))}},className:"px-6 py-3 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Test Subscription Status API"})]})]})},D5=()=>{const{t:e}=nn(),{user:t}=mn(),n=ee(),[r,s]=(0,i.useState)("pro"),[a,o]=(0,i.useState)("monthly"),[l,c]=(0,i.useState)(!1),d={free:{name:e("upgrade:plans.free.name"),price:0,features:[e("upgrade:plans.free.feature1"),e("upgrade:plans.free.feature2"),e("upgrade:plans.free.feature3"),e("upgrade:plans.free.feature4")],limitations:[e("upgrade:plans.free.limitation1"),e("upgrade:plans.free.limitation2"),e("upgrade:plans.free.limitation3")]},pro:{name:e("upgrade:plans.pro.name"),monthlyPrice:18.7,yearlyPrice:187,features:[e("upgrade:plans.pro.feature1"),e("upgrade:plans.pro.feature2"),e("upgrade:plans.pro.feature3"),e("upgrade:plans.pro.feature4"),e("upgrade:plans.pro.feature5"),e("upgrade:plans.pro.feature6"),e("upgrade:plans.pro.feature7"),e("upgrade:plans.pro.feature8")]},enterprise:{name:e("upgrade:plans.enterprise.name"),monthlyPrice:39,yearlyPrice:390,features:[e("upgrade:plans.enterprise.feature1"),e("upgrade:plans.enterprise.feature2"),e("upgrade:plans.enterprise.feature3"),e("upgrade:plans.enterprise.feature4"),e("upgrade:plans.enterprise.feature5"),e("upgrade:plans.enterprise.feature6"),e("upgrade:plans.enterprise.feature7"),e("upgrade:plans.enterprise.feature8"),e("upgrade:plans.enterprise.feature9"),e("upgrade:plans.enterprise.feature10")]}},u=n=>{let{planKey:i,isPopular:o=!1}=n;const l=d[i],c=(null===t||void 0===t?void 0:t.subscription)===i||"free"===i&&!(null!==t&&void 0!==t&&t.subscription),u=(e=>{if("free"===e)return 0;const t=d[e];return"monthly"===a?t.monthlyPrice:t.yearlyPrice})(i),h=(e=>{if("free"===e)return 0;const t=d[e];return"monthly"===a?t.monthlyPrice:Math.round(t.yearlyPrice/12)})(i),p=(e=>{if("free"===e||"monthly"===a)return null;const t=d[e];return 12*t.monthlyPrice-t.yearlyPrice})(i);return(0,sn.jsxs)("div",{className:"relative bg-white rounded-2xl shadow-lg border-2 transition-all duration-200 ".concat(r===i?"border-blue-500 shadow-blue-200":"border-gray-200 hover:border-gray-300"," ").concat(o?"ring-2 ring-blue-500 ring-opacity-50":""),children:[o&&(0,sn.jsx)("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2",children:(0,sn.jsx)("span",{className:"bg-gradient-to-r from-blue-500 to-purple-600 text-white px-4 py-1 rounded-full text-sm font-medium",children:e("upgrade:popular")})}),c&&(0,sn.jsx)("div",{className:"absolute -top-4 right-4",children:(0,sn.jsx)("span",{className:"bg-green-500 text-white px-3 py-1 rounded-full text-sm font-medium",children:e("upgrade:currentPlan")})}),(0,sn.jsxs)("div",{className:"p-8",children:[(0,sn.jsxs)("div",{className:"text-center mb-8",children:[(0,sn.jsx)("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:l.name}),(0,sn.jsx)("div",{className:"mb-4",children:"free"===i?(0,sn.jsx)("div",{className:"text-4xl font-bold text-gray-900",children:e("upgrade:free")}):(0,sn.jsxs)("div",{children:[(0,sn.jsxs)("div",{className:"text-4xl font-bold text-gray-900",children:["\u20ac",h,(0,sn.jsxs)("span",{className:"text-lg font-normal text-gray-500",children:["/",e("upgrade:month")]})]}),"yearly"===a&&(0,sn.jsx)("div",{className:"text-sm text-gray-500",children:e("upgrade:billedYearly",{amount:u})}),p&&(0,sn.jsx)("div",{className:"text-sm text-green-600 font-medium",children:e("upgrade:save",{amount:p})})]})}),(0,sn.jsx)("button",{onClick:()=>s(i),disabled:c,className:"w-full py-3 px-6 rounded-lg font-medium transition-colors ".concat(c?"bg-gray-100 text-gray-500 cursor-not-allowed":r===i?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:e(c?"upgrade:currentPlan":r===i?"upgrade:selected":"upgrade:select")})]}),(0,sn.jsxs)("div",{className:"space-y-4",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:e("upgrade:features")}),(0,sn.jsx)("ul",{className:"space-y-2",children:l.features.map((e,t)=>(0,sn.jsxs)("li",{className:"flex items-start",children:[(0,sn.jsx)("svg",{className:"w-5 h-5 text-green-500 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sn.jsx)("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),(0,sn.jsx)("span",{className:"text-gray-700 text-sm",children:e})]},t))})]}),l.limitations&&(0,sn.jsxs)("div",{children:[(0,sn.jsx)("h4",{className:"font-semibold text-gray-900 mb-3",children:e("upgrade:limitations")}),(0,sn.jsx)("ul",{className:"space-y-2",children:l.limitations.map((e,t)=>(0,sn.jsxs)("li",{className:"flex items-start",children:[(0,sn.jsx)("svg",{className:"w-5 h-5 text-red-500 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sn.jsx)("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),(0,sn.jsx)("span",{className:"text-gray-700 text-sm",children:e})]},t))})]})]})]})]})};return(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,sn.jsxs)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[(0,sn.jsxs)("div",{className:"text-center mb-12",children:[(0,sn.jsx)("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:e("upgrade:title")}),(0,sn.jsx)("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto",children:e("upgrade:subtitle")})]}),(0,sn.jsx)("div",{className:"flex justify-center mb-12",children:(0,sn.jsxs)("div",{className:"bg-gray-100 p-1 rounded-lg",children:[(0,sn.jsx)("button",{onClick:()=>o("monthly"),className:"px-6 py-2 rounded-md font-medium transition-colors ".concat("monthly"===a?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:e("upgrade:monthly")}),(0,sn.jsxs)("button",{onClick:()=>o("yearly"),className:"px-6 py-2 rounded-md font-medium transition-colors relative ".concat("yearly"===a?"bg-white text-gray-900 shadow-sm":"text-gray-500 hover:text-gray-700"),children:[e("upgrade:yearly"),(0,sn.jsx)("span",{className:"absolute -top-2 -right-2 bg-green-500 text-white text-xs px-2 py-1 rounded-full",children:"-17%"})]})]})}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[(0,sn.jsx)(u,{planKey:"free"}),(0,sn.jsx)(u,{planKey:"pro",isPopular:!0}),(0,sn.jsx)(u,{planKey:"enterprise"})]}),(0,sn.jsx)("div",{className:"text-center",children:(0,sn.jsx)("button",{onClick:async()=>{if("free"!==r){c(!0);try{console.log("\u5347\u7ea7\u8ba1\u5212:",r,"\u8ba1\u8d39\u5468\u671f:",a),alert("\u652f\u4ed8\u529f\u80fd\u6b63\u5728\u5f00\u53d1\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5")}catch(t){console.error("Upgrade error:",t),alert(e("upgrade:errors.paymentFailed"))}finally{c(!1)}}else n("/dashboard")},disabled:l||r===((null===t||void 0===t?void 0:t.subscription)||"free"),className:"px-8 py-4 rounded-lg font-semibold text-lg transition-colors ".concat(l||r===((null===t||void 0===t?void 0:t.subscription)||"free")?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-gradient-to-r from-blue-500 to-purple-600 text-white hover:from-blue-600 hover:to-purple-700"),children:l?(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsxs)("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[(0,sn.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,sn.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),e("upgrade:processing")]}):r===((null===t||void 0===t?void 0:t.subscription)||"free")?e("upgrade:currentPlan"):e("free"===r?"upgrade:backToFree":"upgrade:upgradeNow")})}),(0,sn.jsxs)("div",{className:"mt-16",children:[(0,sn.jsx)("h2",{className:"text-2xl font-bold text-gray-900 text-center mb-8",children:e("upgrade:faq.title")}),(0,sn.jsxs)("div",{className:"max-w-3xl mx-auto space-y-6",children:[(0,sn.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,sn.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:e("upgrade:faq.q1.question")}),(0,sn.jsx)("p",{className:"text-gray-600",children:e("upgrade:faq.q1.answer")})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,sn.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:e("upgrade:faq.q2.question")}),(0,sn.jsx)("p",{className:"text-gray-600",children:e("upgrade:faq.q2.answer")})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,sn.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:e("upgrade:faq.q3.question")}),(0,sn.jsx)("p",{className:"text-gray-600",children:e("upgrade:faq.q3.answer")})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-sm",children:[(0,sn.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:e("upgrade:faq.q4.question")}),(0,sn.jsx)("p",{className:"text-gray-600",children:e("upgrade:faq.q4.answer")})]})]})]}),(0,sn.jsx)("div",{className:"mt-12 text-center",children:(0,sn.jsxs)("div",{className:"flex items-center justify-center space-x-8 text-gray-500",children:[(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sn.jsx)("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e("upgrade:security.ssl")]}),(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sn.jsx)("path",{fillRule:"evenodd",d:"M18 8a6 6 0 01-7.743 5.743L10 14l-0.257-0.257A6 6 0 1118 8zM10 2a8 8 0 100 16 8 8 0 000-16zm0 11a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}),e("upgrade:security.gdpr")]}),(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)("svg",{className:"w-6 h-6 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:(0,sn.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),e("upgrade:security.moneyBack")]})]})})]})})};var O5,R5="clover",I5="https://js.stripe.com",L5="".concat(I5,"/").concat(R5,"/stripe.js"),F5=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,B5=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,z5="loadStripe.setLoadParameters was called but an existing Stripe.js script already exists in the document; existing script parameters will be used",W5=function(e){return F5.test(e)||B5.test(e)},U5=function(e){var t=e&&!e.advancedFraudSignals?"?advancedFraudSignals=false":"",n=document.createElement("script");n.src="".concat(L5).concat(t);var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(n),n},V5=null,H5=null,q5=null,G5=function(e){return null!==V5?V5:(V5=new Promise(function(t,n){if("undefined"!==typeof window&&"undefined"!==typeof document)if(window.Stripe&&e&&console.warn(z5),window.Stripe)t(window.Stripe);else try{var r=function(){for(var e=document.querySelectorAll('script[src^="'.concat(I5,'"]')),t=0;t<e.length;t++){var n=e[t];if(W5(n.src))return n}return null}();if(r&&e)console.warn(z5);else if(r){if(r&&null!==q5&&null!==H5){var i;r.removeEventListener("load",q5),r.removeEventListener("error",H5),null===(i=r.parentNode)||void 0===i||i.removeChild(r),r=U5(e)}}else r=U5(e);q5=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,n),H5=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(n),r.addEventListener("load",q5),r.addEventListener("error",H5)}catch(s){return void n(s)}else t(null)}),V5.catch(function(e){return V5=null,Promise.reject(e)}))},K5=!1,Y5=function(){return O5||(O5=G5(null).catch(function(e){return O5=null,Promise.reject(e)}))};Promise.resolve().then(function(){return Y5()}).catch(function(e){K5||console.warn(e)});var X5=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];K5=!0;var r=Date.now();return Y5().then(function(e){return function(e,t,n){if(null===e)return null;var r=t[0].match(/^pk_test/),i=function(e){return 3===e?"v3":e}(e.version),s=R5;r&&i!==s&&console.warn("Stripe.js@".concat(i," was loaded on the page, but @stripe/stripe-js@").concat("8.2.0"," expected Stripe.js@").concat(s,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var a=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"8.2.0",startTime:t})}(a,n),a}(e,t,r)})},J5=n(5173);function $5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function Q5(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?$5(Object(n),!0).forEach(function(t){e6(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$5(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Z5(e){return Z5="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Z5(e)}function e6(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t6(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function n6(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=e&&("undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==n)return;var r,i,s=[],a=!0,o=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(s.push(r.value),!t||s.length!==t);a=!0);}catch(l){o=!0,i=l}finally{try{a||null==n.return||n.return()}finally{if(o)throw i}}return s}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return r6(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r6(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r6(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var i6=function(e,t,n){var r=!!n,s=i.useRef(n);i.useEffect(function(){s.current=n},[n]),i.useEffect(function(){if(!r||!e)return function(){};var n=function(){s.current&&s.current.apply(s,arguments)};return e.on(t,n),function(){e.off(t,n)}},[r,t,e,s])},s6=function(e){var t=i.useRef(e);return i.useEffect(function(){t.current=e},[e]),t.current},a6=function(e){return null!==e&&"object"===Z5(e)},o6="[object Object]",l6=function e(t,n){if(!a6(t)||!a6(n))return t===n;var r=Array.isArray(t);if(r!==Array.isArray(n))return!1;var i=Object.prototype.toString.call(t)===o6;if(i!==(Object.prototype.toString.call(n)===o6))return!1;if(!i&&!r)return t===n;var s=Object.keys(t),a=Object.keys(n);if(s.length!==a.length)return!1;for(var o={},l=0;l<s.length;l+=1)o[s[l]]=!0;for(var c=0;c<a.length;c+=1)o[a[c]]=!0;var d=Object.keys(o);if(d.length!==s.length)return!1;var u=t,h=n;return d.every(function(t){return e(u[t],h[t])})},c6=function(e,t,n){return a6(e)?Object.keys(e).reduce(function(r,i){var s=!a6(t)||!l6(e[i],t[i]);return n.includes(i)?(s&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),r):s?Q5(Q5({},r||{}),{},e6({},i,e[i])):r},null):null},d6="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",u6=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d6;if(null===e||a6(t=e)&&"function"===typeof t.elements&&"function"===typeof t.createToken&&"function"===typeof t.createPaymentMethod&&"function"===typeof t.confirmCardPayment)return e;throw new Error(n)},h6=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d6;if(function(e){return a6(e)&&"function"===typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return u6(e,t)})};var n=u6(e,t);return null===n?{tag:"empty"}:{tag:"sync",stripe:n}},p6=function(e){e&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"5.3.0"}),e.registerAppInfo({name:"react-stripe-js",version:"5.3.0",url:"https://stripe.com/docs/stripe-js/react"}))},m6=i.createContext(null);m6.displayName="ElementsContext";var f6=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},g6=function(e){var t=e.stripe,n=e.options,r=e.children,s=i.useMemo(function(){return h6(t)},[t]),a=n6(i.useState(function(){return{stripe:"sync"===s.tag?s.stripe:null,elements:"sync"===s.tag?s.stripe.elements(n):null}}),2),o=a[0],l=a[1];i.useEffect(function(){var e=!0,t=function(e){l(function(t){return t.stripe?t:{stripe:e,elements:e.elements(n)}})};return"async"!==s.tag||o.stripe?"sync"!==s.tag||o.stripe||t(s.stripe):s.stripePromise.then(function(n){n&&e&&t(n)}),function(){e=!1}},[s,o,n]);var c=s6(t);i.useEffect(function(){null!==c&&c!==t&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[c,t]);var d=s6(n);return i.useEffect(function(){if(o.elements){var e=c6(n,d,["clientSecret","fonts"]);e&&o.elements.update(e)}},[n,d,o.elements]),i.useEffect(function(){p6(o.stripe)},[o.stripe]),i.createElement(m6.Provider,{value:o},r)};g6.propTypes={stripe:J5.any,options:J5.object};var v6=function(e){var t=i.useContext(m6);return f6(t,e)},y6=function(){return v6("calls useElements()").elements};J5.func.isRequired;var x6=i.createContext(null);x6.displayName="CheckoutContext",J5.any,J5.shape({clientSecret:J5.oneOfType([J5.string,J5.instanceOf(Promise)]).isRequired,elementsOptions:J5.object}).isRequired;var b6=function(e){var t=i.useContext(x6),n=i.useContext(m6);if(t){if(n)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t}return f6(n,e)},w6=["mode"],j6=function(e,t){var n,r="".concat((n=e).charAt(0).toUpperCase()+n.slice(1),"Element"),s=t?function(e){b6("mounts <".concat(r,">"));var t=e.id,n=e.className;return i.createElement("div",{id:t,className:n})}:function(t){var n,s=t.id,a=t.className,o=t.options,l=void 0===o?{}:o,c=t.onBlur,d=t.onFocus,u=t.onReady,h=t.onChange,p=t.onEscape,m=t.onClick,f=t.onLoadError,g=t.onLoaderStart,v=t.onNetworksChange,y=t.onConfirm,x=t.onCancel,b=t.onShippingAddressChange,w=t.onShippingRateChange,j=t.onSavedPaymentMethodRemove,N=t.onSavedPaymentMethodUpdate,k=b6("mounts <".concat(r,">")),A="elements"in k?k.elements:null,S="checkoutState"in k?k.checkoutState:null,_="success"===(null===S||void 0===S?void 0:S.type)||"loading"===(null===S||void 0===S?void 0:S.type)?S.sdk:null,C=n6(i.useState(null),2),E=C[0],P=C[1],T=i.useRef(null),M=i.useRef(null);i6(E,"blur",c),i6(E,"focus",d),i6(E,"escape",p),i6(E,"click",m),i6(E,"loaderror",f),i6(E,"loaderstart",g),i6(E,"networkschange",v),i6(E,"confirm",y),i6(E,"cancel",x),i6(E,"shippingaddresschange",b),i6(E,"shippingratechange",w),i6(E,"savedpaymentmethodremove",j),i6(E,"savedpaymentmethodupdate",N),i6(E,"change",h),u&&(n="expressCheckout"===e?u:function(){u(E)}),i6(E,"ready",n),i.useLayoutEffect(function(){if(null===T.current&&null!==M.current&&(A||_)){var t=null;if(_)switch(e){case"payment":t=_.createPaymentElement(l);break;case"address":if(!("mode"in l))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var n=l.mode,i=t6(l,w6);if("shipping"===n)t=_.createShippingAddressElement(i);else{if("billing"!==n)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=_.createBillingAddressElement(i)}break;case"expressCheckout":t=_.createExpressCheckoutElement(l);break;case"currencySelector":t=_.createCurrencySelectorElement();break;case"taxId":t=_.createTaxIdElement(l);break;default:throw new Error("Invalid Element type ".concat(r,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else A&&(t=A.create(e,l));T.current=t,P(t),t&&t.mount(M.current)}},[A,_,l]);var D=s6(l);return i.useEffect(function(){if(T.current){var e=c6(l,D,["paymentRequest"]);e&&"update"in T.current&&T.current.update(e)}},[l,D]),i.useLayoutEffect(function(){return function(){if(T.current&&"function"===typeof T.current.destroy)try{T.current.destroy(),T.current=null}catch(e){}}},[]),i.createElement("div",{id:s,className:a,ref:M})};return s.propTypes={id:J5.string,className:J5.string,onChange:J5.func,onBlur:J5.func,onFocus:J5.func,onReady:J5.func,onEscape:J5.func,onClick:J5.func,onLoadError:J5.func,onLoaderStart:J5.func,onNetworksChange:J5.func,onConfirm:J5.func,onCancel:J5.func,onShippingAddressChange:J5.func,onShippingRateChange:J5.func,onSavedPaymentMethodRemove:J5.func,onSavedPaymentMethodUpdate:J5.func,options:J5.object},s.displayName=r,s.__elementType=e,s},N6="undefined"===typeof window,k6=i.createContext(null);k6.displayName="EmbeddedCheckoutProviderContext";var A6=function(){return b6("calls useStripe()").stripe},S6=(j6("auBankAccount",N6),j6("card",N6));j6("cardNumber",N6),j6("cardExpiry",N6),j6("cardCvc",N6),j6("iban",N6),j6("payment",N6),j6("expressCheckout",N6),j6("paymentRequestButton",N6),j6("linkAuthentication",N6),j6("address",N6),j6("shippingAddress",N6),j6("paymentMethodMessaging",N6),j6("taxId",N6);const _6=!"pk_test_51QSvKnP7VKjGhKJhYourTestKeyHereAbCdEfGhIjKlMnOpQrStUvWxYz".includes("YourTestKeyHere")?X5("pk_test_51QSvKnP7VKjGhKJhYourTestKeyHereAbCdEfGhIjKlMnOpQrStUvWxYz"):null,C6=e=>{let{invoice:t,clientSecret:n,onPaymentSuccess:r,onPaymentError:s}=e;const a=A6(),o=y6(),[l,c]=(0,i.useState)(!1),[d,u]=(0,i.useState)("stripe");return(0,sn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),c(!0);try{var i;const e=!1,c=null===(i="pk_test_51QSvKnP7VKjGhKJhYourTestKeyHereAbCdEfGhIjKlMnOpQrStUvWxYz")?void 0:i.includes("YourTestKeyHere");if(e&&c){console.log("\ud83d\udd27 \u4f7f\u7528\u6a21\u62df\u652f\u4ed8 (\u5f00\u53d1\u6a21\u5f0f)"),await new Promise(e=>setTimeout(e,2e3));const e=null===n||void 0===n?void 0:n.split("_secret_")[0];if(e){const t={id:e,status:"succeeded",amount:5e3,currency:"eur",created:Math.floor(Date.now()/1e3)};return void r(t)}return void s("\u65e0\u6548\u7684\u652f\u4ed8\u610f\u56feID")}if(!a||!o)return void s("Stripe \u672a\u6b63\u786e\u521d\u59cb\u5316");if("stripe"===d){var l,u;const e=o.getElement(S6),{error:i,paymentIntent:c}=await a.confirmCardPayment(n,{payment_method:{card:e,billing_details:{name:(null===(l=t.Client)||void 0===l?void 0:l.name)||"Client",email:(null===(u=t.Client)||void 0===u?void 0:u.email)||""}}});i?s(i.message):"succeeded"===c.status&&r(c)}}catch(h){console.error("Payment processing error:",h),s("\u652f\u4ed8\u5904\u7406\u65f6\u51fa\u9519\uff0c\u8bf7\u7a0d\u540e\u91cd\u8bd5")}finally{c(!1)}},className:"space-y-6",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"\u652f\u4ed8\u65b9\u5f0f"}),(0,sn.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,sn.jsxs)("button",{type:"button",onClick:()=>u("stripe"),className:"p-4 border-2 rounded-lg flex items-center justify-center space-x-2 transition-colors ".concat("stripe"===d?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),children:[(0,sn.jsx)(fi,{}),(0,sn.jsx)("span",{children:"\u4fe1\u7528\u5361/\u501f\u8bb0\u5361"})]}),(0,sn.jsxs)("button",{type:"button",onClick:()=>u("paypal"),className:"p-4 border-2 rounded-lg flex items-center justify-center space-x-2 transition-colors ".concat("paypal"===d?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"),disabled:!0,children:[(0,sn.jsx)("span",{children:"PayPal"}),(0,sn.jsx)("span",{className:"text-xs text-gray-500",children:"(\u5373\u5c06\u63a8\u51fa)"})]})]})]}),"stripe"===d&&(0,sn.jsxs)("div",{children:[(0,sn.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\u94f6\u884c\u5361\u4fe1\u606f"}),(0,sn.jsx)("div",{className:"p-4 border border-gray-300 rounded-lg",children:(0,sn.jsx)(S6,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}},invalid:{color:"#9e2146"}}}})})]}),(0,sn.jsx)("button",{type:"submit",disabled:l||"stripe"!==d||!a,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-medium hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:l?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(Mi,{className:"animate-spin"}),(0,sn.jsx)("span",{children:"\u6b63\u5728\u5904\u7406\u652f\u4ed8..."})]}):(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(Zi,{}),(0,sn.jsxs)("span",{children:["\u5b89\u5168\u652f\u4ed8 ",new Intl.NumberFormat("zh-CN",{style:"currency",currency:"EUR"}).format(t.total)]})]})})]})},E6=()=>{var e,t;const{token:n}=ne(),r=ee(),[s,a]=(0,i.useState)(null),[o,l]=(0,i.useState)(!0),[c,d]=(0,i.useState)(null),[u,h]=(0,i.useState)(!1),[p,m]=(0,i.useState)(null),f=(0,i.useRef)(!1);(0,i.useEffect)(()=>{g()},[n]);const g=async()=>{try{l(!0);const e=await VF.getInvoiceByToken(n);if(e.success){a(e.data.invoice);const t=await VF.createPaymentIntentByToken(n);t.success&&m(t.data.clientSecret)}else d("\u53d1\u7968\u672a\u627e\u5230\u6216\u652f\u4ed8\u94fe\u63a5\u5df2\u8fc7\u671f")}catch(c){console.error("Error loading invoice:",c),d("\u52a0\u8f7d\u53d1\u7968\u4fe1\u606f\u65f6\u51fa\u9519")}finally{l(!1)}},v=e=>new Intl.NumberFormat("zh-CN",{style:"currency",currency:"EUR"}).format(e),y=e=>new Date(e).toLocaleDateString("zh-CN");return o?(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,sn.jsxs)("div",{className:"text-center",children:[(0,sn.jsx)(Mi,{className:"animate-spin h-12 w-12 text-blue-600 mx-auto mb-4"}),(0,sn.jsx)("p",{className:"text-gray-600",children:"\u6b63\u5728\u52a0\u8f7d\u53d1\u7968\u4fe1\u606f..."})]})}):c?(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,sn.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,sn.jsx)(Zr,{className:"h-16 w-16 text-red-500 mx-auto mb-4"}),(0,sn.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"\u652f\u4ed8\u9875\u9762\u51fa\u9519"}),(0,sn.jsx)("p",{className:"text-gray-600 mb-6",children:c}),(0,sn.jsxs)("div",{className:"space-y-3",children:[(0,sn.jsx)("button",{onClick:()=>{d(null),g()},className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg",children:"\u91cd\u65b0\u52a0\u8f7d"}),(0,sn.jsx)("p",{className:"text-sm text-gray-500",children:"\u5982\u679c\u95ee\u9898\u6301\u7eed\u5b58\u5728\uff0c\u8bf7\u8054\u7cfb\u53d1\u7968\u53d1\u9001\u65b9"})]})]})}):u?(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:(0,sn.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,sn.jsx)("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,sn.jsx)(ci,{className:"h-8 w-8 text-green-600"})}),(0,sn.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"\u652f\u4ed8\u6210\u529f\uff01"}),(0,sn.jsxs)("p",{className:"text-gray-600 mb-4",children:["\u60a8\u7684\u652f\u4ed8\u5df2\u6210\u529f\u5904\u7406\uff0c\u53d1\u7968 ",s.invoiceNumber," \u5df2\u6807\u8bb0\u4e3a\u5df2\u4ed8\u6b3e\u3002"]}),(0,sn.jsx)("p",{className:"text-sm text-gray-500",children:"\u6b63\u5728\u8df3\u8f6c\u5230\u6210\u529f\u9875\u9762..."})]})}):s?(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 py-8",children:(0,sn.jsxs)("div",{className:"max-w-2xl mx-auto px-4",children:[(0,sn.jsxs)("div",{className:"text-center mb-8",children:[(0,sn.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\u53d1\u7968\u652f\u4ed8"}),(0,sn.jsx)("p",{className:"text-gray-600",children:"\u5b89\u5168\u4fbf\u6377\u7684\u5728\u7ebf\u652f\u4ed8"})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-lg overflow-hidden",children:[(0,sn.jsxs)("div",{className:"p-6 border-b border-gray-200",children:[(0,sn.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"\u53d1\u7968\u8be6\u60c5"}),(0,sn.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)(as,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"text-sm text-gray-600",children:"\u5ba2\u6237"}),(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:null===(e=s.Client)||void 0===e?void 0:e.name}),(null===(t=s.Client)||void 0===t?void 0:t.company)&&(0,sn.jsx)("p",{className:"text-sm text-gray-500",children:s.Client.company})]})]}),(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)(oi,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"text-sm text-gray-600",children:"\u53d1\u7968\u65e5\u671f"}),(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:y(s.issueDate)})]})]}),(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)(gi,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"text-sm text-gray-600",children:"\u53d1\u7968\u7f16\u53f7"}),(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:s.invoiceNumber})]})]}),(0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)(oi,{className:"h-5 w-5 text-gray-400 mr-3"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"text-sm text-gray-600",children:"\u5230\u671f\u65e5\u671f"}),(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:y(s.dueDate)})]})]})]}),s.InvoiceItems&&s.InvoiceItems.length>0&&(0,sn.jsxs)("div",{className:"mb-6",children:[(0,sn.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-3",children:"\u53d1\u7968\u9879\u76ee"}),(0,sn.jsx)("div",{className:"space-y-2",children:s.InvoiceItems.map((e,t)=>(0,sn.jsxs)("div",{className:"flex justify-between items-center py-2 border-b border-gray-100",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:e.description}),(0,sn.jsxs)("p",{className:"text-sm text-gray-600",children:["\u6570\u91cf: ",e.quantity," \xd7 ",v(e.unitPrice)]})]}),(0,sn.jsx)("p",{className:"font-medium text-gray-900",children:v(e.quantity*e.unitPrice)})]},t))})]}),(0,sn.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,sn.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,sn.jsx)("span",{className:"text-gray-600",children:"\u5c0f\u8ba1"}),(0,sn.jsx)("span",{className:"font-medium",children:v(s.subtotal||s.total)})]}),s.taxAmount>0&&(0,sn.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,sn.jsx)("span",{className:"text-gray-600",children:"\u7a0e\u8d39"}),(0,sn.jsx)("span",{className:"font-medium",children:v(s.taxAmount)})]}),(0,sn.jsxs)("div",{className:"flex justify-between items-center text-lg font-bold border-t border-gray-200 pt-2",children:[(0,sn.jsx)("span",{children:"\u603b\u8ba1"}),(0,sn.jsx)("span",{className:"text-green-600",children:v(s.total)})]})]})]}),(0,sn.jsxs)("div",{className:"p-6",children:[p?_6?(0,sn.jsx)(g6,{stripe:_6,options:{clientSecret:p},children:(0,sn.jsx)(C6,{invoice:s,clientSecret:p,onPaymentSuccess:async e=>{try{if((await VF.confirmPayment({paymentIntentId:e.id,invoiceId:s.id})).success){if(!f.current){const t=Math.round(100*(s.total||0));_5({id:"inv-".concat(s.id,"-pi-").concat(e.id),amountCents:t,currency:"EUR",description:"\u53d1\u7968\u652f\u4ed8",invoiceNumber:s.invoiceNumber}),f.current=!0}h(!0),setTimeout(()=>{r("/payment/success")},3e3)}else d("\u652f\u4ed8\u786e\u8ba4\u5931\u8d25")}catch(c){console.error("Payment confirmation error:",c),d("\u652f\u4ed8\u786e\u8ba4\u65f6\u51fa\u9519")}},onPaymentError:e=>{d(e)}})}):(0,sn.jsxs)("div",{className:"text-center py-8",children:[(0,sn.jsx)(Zi,{className:"h-8 w-8 text-yellow-600 mx-auto mb-4"}),(0,sn.jsx)("p",{className:"text-gray-600 mb-2",children:"\u652f\u4ed8\u529f\u80fd\u6682\u65f6\u4e0d\u53ef\u7528"}),(0,sn.jsx)("p",{className:"text-sm text-gray-500",children:"\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u914d\u7f6e\u652f\u4ed8\u670d\u52a1"})]}):(0,sn.jsxs)("div",{className:"text-center py-8",children:[(0,sn.jsx)(Mi,{className:"animate-spin h-8 w-8 text-blue-600 mx-auto mb-4"}),(0,sn.jsx)("p",{className:"text-gray-600",children:"\u6b63\u5728\u521d\u59cb\u5316\u652f\u4ed8..."})]}),(0,sn.jsx)("div",{className:"mt-4 text-center",children:(0,sn.jsxs)("p",{className:"text-sm text-gray-500 flex items-center justify-center",children:[(0,sn.jsx)(Zi,{className:"mr-1"}),"\u60a8\u7684\u652f\u4ed8\u4fe1\u606f\u53d7\u5230 SSL \u52a0\u5bc6\u4fdd\u62a4"]})})]})]})]})}):null},P6=()=>{ee();return(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12",children:(0,sn.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[(0,sn.jsx)("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:(0,sn.jsx)(ci,{className:"h-10 w-10 text-green-600"})}),(0,sn.jsx)("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"\u652f\u4ed8\u6210\u529f\uff01"}),(0,sn.jsx)("p",{className:"text-gray-600 mb-8",children:"\u611f\u8c22\u60a8\u7684\u4ed8\u6b3e\uff01\u60a8\u7684\u652f\u4ed8\u5df2\u6210\u529f\u5904\u7406\uff0c\u53d1\u7968\u5df2\u6807\u8bb0\u4e3a\u5df2\u4ed8\u6b3e\u3002"}),(0,sn.jsxs)("div",{className:"space-y-3",children:[(0,sn.jsxs)("button",{onClick:()=>window.print(),className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg flex items-center justify-center",children:[(0,sn.jsx)(vi,{className:"mr-2"}),"\u4e0b\u8f7d\u6536\u636e"]}),(0,sn.jsxs)("button",{onClick:()=>{const e=encodeURIComponent("\u652f\u4ed8\u786e\u8ba4"),t=encodeURIComponent("\u60a8\u597d\uff0c\n\n\u6211\u5df2\u6210\u529f\u5b8c\u6210\u53d1\u7968\u652f\u4ed8\u3002\n\n\u8c22\u8c22\uff01");window.location.href="mailto:?subject=".concat(e,"&body=").concat(t)},className:"w-full bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-4 rounded-lg flex items-center justify-center",children:[(0,sn.jsx)(Ri,{className:"mr-2"}),"\u53d1\u9001\u786e\u8ba4\u90ae\u4ef6"]}),(0,sn.jsxs)("div",{className:"w-full bg-gray-100 text-gray-700 font-medium py-3 px-4 rounded-lg flex items-center justify-center",children:[(0,sn.jsx)(ci,{className:"mr-2"}),"\u652f\u4ed8\u5b8c\u6210"]})]}),(0,sn.jsx)("div",{className:"mt-8 pt-6 border-t border-gray-200",children:(0,sn.jsx)("p",{className:"text-sm text-gray-500",children:"\u5982\u679c\u60a8\u6709\u4efb\u4f55\u95ee\u9898\uff0c\u8bf7\u8054\u7cfb\u6211\u4eec\u7684\u5ba2\u670d\u56e2\u961f\u3002"})})]})})},T6=!"pk_test_51QSvKnP7VKjGhKJhYourTestKeyHereAbCdEfGhIjKlMnOpQrStUvWxYz".includes("YourTestKeyHere")?X5("pk_test_51QSvKnP7VKjGhKJhYourTestKeyHereAbCdEfGhIjKlMnOpQrStUvWxYz"):null,M6=e=>{var t;let{onPaymentSuccess:n,onPaymentError:r}=e;const s=A6(),a=y6(),[o,l]=(0,i.useState)(!1),[c,d]=(0,i.useState)("stripe"),u=(null===(t="pk_test_51QSvKnP7VKjGhKJhYourTestKeyHereAbCdEfGhIjKlMnOpQrStUvWxYz")||t.includes("YourTestKeyHere"),!1);return(0,sn.jsxs)("form",{onSubmit:async e=>{e.preventDefault(),l(!0);try{var t;const e=!1,r=null===(t="pk_test_51QSvKnP7VKjGhKJhYourTestKeyHereAbCdEfGhIjKlMnOpQrStUvWxYz")?void 0:t.includes("YourTestKeyHere");if(!e||!r){if(!s||!a)throw new Error("Stripe \u672a\u6b63\u786e\u52a0\u8f7d");a.getElement(S6);throw new Error("\u9700\u8981\u914d\u7f6e\u771f\u5b9e\u7684 Stripe \u5bc6\u94a5\u624d\u80fd\u8fdb\u884c\u771f\u5b9e\u652f\u4ed8")}{console.log("\ud83d\udd27 \u4f7f\u7528\u6a21\u62df\u652f\u4ed8 (\u5f00\u53d1\u6a21\u5f0f)"),await new Promise(e=>setTimeout(e,2e3));const e={id:"pi_mock_"+Date.now(),status:"succeeded",amount:1e4,currency:"usd"};n(e)}}catch(i){console.error("\u652f\u4ed8\u9519\u8bef:",i),r(i.message)}finally{l(!1)}},className:"space-y-6",children:[(0,sn.jsxs)("div",{className:"space-y-4",children:[(0,sn.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[(0,sn.jsx)(fi,{className:"mr-2"}),"\u9009\u62e9\u652f\u4ed8\u65b9\u5f0f"]}),(0,sn.jsx)("div",{className:"grid grid-cols-1 gap-4",children:(0,sn.jsxs)("label",{className:"flex items-center p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:border-blue-300 transition-colors",children:[(0,sn.jsx)("input",{type:"radio",name:"paymentMethod",value:"stripe",checked:"stripe"===c,onChange:e=>d(e.target.value),className:"mr-3"}),(0,sn.jsx)(fi,{className:"mr-2 text-blue-600"}),(0,sn.jsx)("span",{className:"font-medium",children:"\u4fe1\u7528\u5361/\u501f\u8bb0\u5361"}),u]})})]}),"stripe"===c&&(0,sn.jsxs)("div",{className:"space-y-4",children:[(0,sn.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\u5361\u7247\u4fe1\u606f"}),(0,sn.jsx)("div",{className:"p-4 border border-gray-300 rounded-lg",children:(0,sn.jsx)(S6,{options:{style:{base:{fontSize:"16px",color:"#424770","::placeholder":{color:"#aab7c4"}}}}})})]}),(0,sn.jsx)("button",{type:"submit",disabled:o||!s||"stripe"===c,className:"w-full py-3 px-4 rounded-lg font-semibold text-white transition-all duration-200 flex items-center justify-center ".concat(o?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700 active:bg-blue-800"),children:o?(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(Mi,{className:"animate-spin mr-2"}),"\u5904\u7406\u4e2d..."]}):(0,sn.jsxs)(sn.Fragment,{children:[(0,sn.jsx)(gi,{className:"mr-2"}),"\u7acb\u5373\u652f\u4ed8 $100.00"]})}),u]})},D6=()=>{const e=ee(),[t,n]=(0,i.useState)("pending"),[r,s]=(0,i.useState)(null),[a,o]=(0,i.useState)(""),l={id:"TEST-001",amount:100,currency:"USD",description:"\u6d4b\u8bd5\u53d1\u7968\u652f\u4ed8",clientName:"\u6d4b\u8bd5\u5ba2\u6237",dueDate:new Date(Date.now()+6048e5).toLocaleDateString()},c=()=>{n("pending"),s(null),o("")};return"success"===t?(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,sn.jsx)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-lg p-8",children:(0,sn.jsxs)("div",{className:"text-center",children:[(0,sn.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100 mb-4",children:(0,sn.jsx)(ci,{className:"h-6 w-6 text-green-600"})}),(0,sn.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"\u652f\u4ed8\u6210\u529f\uff01"}),(0,sn.jsx)("p",{className:"text-gray-600 mb-6",children:"\u60a8\u7684\u652f\u4ed8\u5df2\u6210\u529f\u5904\u7406"}),(0,sn.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[(0,sn.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"\u652f\u4ed8\u8be6\u60c5"}),(0,sn.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,sn.jsxs)("div",{className:"flex justify-between",children:[(0,sn.jsx)("span",{className:"text-gray-600",children:"\u652f\u4ed8ID:"}),(0,sn.jsx)("span",{className:"font-mono",children:null===r||void 0===r?void 0:r.id})]}),(0,sn.jsxs)("div",{className:"flex justify-between",children:[(0,sn.jsx)("span",{className:"text-gray-600",children:"\u91d1\u989d:"}),(0,sn.jsxs)("span",{children:["$",((null===r||void 0===r?void 0:r.amount)/100).toFixed(2)]})]}),(0,sn.jsxs)("div",{className:"flex justify-between",children:[(0,sn.jsx)("span",{className:"text-gray-600",children:"\u72b6\u6001:"}),(0,sn.jsx)("span",{className:"text-green-600 font-semibold",children:null===r||void 0===r?void 0:r.status})]})]})]}),(0,sn.jsxs)("div",{className:"space-y-3",children:[(0,sn.jsx)("button",{onClick:c,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"\u518d\u6b21\u6d4b\u8bd5\u652f\u4ed8"}),(0,sn.jsx)("button",{onClick:()=>e("/"),className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors",children:"\u8fd4\u56de\u9996\u9875"})]})]})})}):"error"===t?(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,sn.jsx)("div",{className:"max-w-md mx-auto bg-white rounded-lg shadow-lg p-8",children:(0,sn.jsxs)("div",{className:"text-center",children:[(0,sn.jsx)("div",{className:"mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100 mb-4",children:(0,sn.jsx)(Zr,{className:"h-6 w-6 text-red-600"})}),(0,sn.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"\u652f\u4ed8\u5931\u8d25"}),(0,sn.jsx)("p",{className:"text-gray-600 mb-4",children:"\u652f\u4ed8\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u4e86\u95ee\u9898"}),(0,sn.jsx)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 mb-6",children:(0,sn.jsx)("p",{className:"text-sm text-red-700",children:a})}),(0,sn.jsxs)("div",{className:"space-y-3",children:[(0,sn.jsx)("button",{onClick:c,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition-colors",children:"\u91cd\u8bd5\u652f\u4ed8"}),(0,sn.jsx)("button",{onClick:()=>e("/"),className:"w-full bg-gray-200 text-gray-800 py-2 px-4 rounded-lg hover:bg-gray-300 transition-colors",children:"\u8fd4\u56de\u9996\u9875"})]})]})})}):(0,sn.jsx)("div",{className:"min-h-screen bg-gray-50 py-12",children:(0,sn.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-lg mb-6",children:[(0,sn.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,sn.jsxs)("div",{className:"flex items-center justify-between",children:[(0,sn.jsxs)("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[(0,sn.jsx)(wi,{className:"mr-3 text-blue-600"}),"\u6d4b\u8bd5\u652f\u4ed8\u9875\u9762"]}),(0,sn.jsxs)("button",{onClick:()=>e("/"),className:"flex items-center text-gray-600 hover:text-gray-900 transition-colors",children:[(0,sn.jsx)(ti,{className:"mr-1"}),"\u8fd4\u56de"]})]})}),(0,sn.jsxs)("div",{className:"px-6 py-4",children:[(0,sn.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"\u53d1\u7968\u4fe1\u606f"}),(0,sn.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,sn.jsxs)("div",{children:[(0,sn.jsx)("span",{className:"text-gray-600",children:"\u53d1\u7968\u53f7:"}),(0,sn.jsx)("span",{className:"ml-2 font-semibold",children:l.id})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("span",{className:"text-gray-600",children:"\u5ba2\u6237:"}),(0,sn.jsx)("span",{className:"ml-2 font-semibold",children:l.clientName})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("span",{className:"text-gray-600",children:"\u91d1\u989d:"}),(0,sn.jsxs)("span",{className:"ml-2 font-semibold text-green-600",children:["$",l.amount.toFixed(2)," ",l.currency]})]}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("span",{className:"text-gray-600",children:"\u5230\u671f\u65e5:"}),(0,sn.jsx)("span",{className:"ml-2 font-semibold",children:l.dueDate})]})]})]})]}),(0,sn.jsxs)("div",{className:"bg-white rounded-lg shadow-lg",children:[(0,sn.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,sn.jsxs)("h2",{className:"text-xl font-semibold text-gray-900 flex items-center",children:[(0,sn.jsx)(Zi,{className:"mr-2 text-green-600"}),"\u5b89\u5168\u652f\u4ed8"]})}),(0,sn.jsx)("div",{className:"px-6 py-6",children:T6?(0,sn.jsx)(g6,{stripe:T6,children:(0,sn.jsx)(M6,{onPaymentSuccess:e=>{console.log("\u2705 \u652f\u4ed8\u6210\u529f:",e),s(e),n("success")},onPaymentError:e=>{console.error("\u274c \u652f\u4ed8\u5931\u8d25:",e),o(e),n("error")}})}):(0,sn.jsxs)("div",{className:"text-center py-8",children:[(0,sn.jsx)(Zi,{className:"h-8 w-8 text-yellow-600 mx-auto mb-4"}),(0,sn.jsx)("p",{className:"text-gray-600 mb-2",children:"\u652f\u4ed8\u529f\u80fd\u6682\u65f6\u4e0d\u53ef\u7528"}),(0,sn.jsx)("p",{className:"text-sm text-gray-500",children:"\u8bf7\u8054\u7cfb\u7ba1\u7406\u5458\u914d\u7f6e\u652f\u4ed8\u670d\u52a1"})]})})]}),(0,sn.jsx)("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,sn.jsxs)("div",{className:"flex items-start",children:[(0,sn.jsx)(Zi,{className:"text-blue-600 mr-2 mt-0.5"}),(0,sn.jsxs)("div",{className:"text-sm text-blue-800",children:[(0,sn.jsx)("p",{className:"font-semibold mb-1",children:"\u5b89\u5168\u4fdd\u969c"}),(0,sn.jsxs)("p",{children:["\u60a8\u7684\u652f\u4ed8\u4fe1\u606f\u901a\u8fc7SSL\u52a0\u5bc6\u4f20\u8f93\uff0c\u6211\u4eec\u4e0d\u4f1a\u5b58\u50a8\u60a8\u7684\u94f6\u884c\u5361\u4fe1\u606f\u3002",!1]})]})]})})]})})},O6=e=>{let{children:t}=e;const{user:n,loading:r}=mn(),i=Q();return r?(0,sn.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,sn.jsx)("div",{className:"animate-spin rounded-full h-32 w-32 border-b-2 border-blue-500"})}):n?t:(0,sn.jsx)(ve,{to:"/login",state:{from:i},replace:!0})},R6=()=>{const{user:e}=mn(),[t,n]=(0,i.useState)(!1);return(0,i.useEffect)(()=>{if(null===e||void 0===e||!e.subscriptionEndDate||t)return;const r=setTimeout(()=>{const t=(new Date).getTime(),r=new Date(e.subscriptionEndDate).getTime()-t,i=Math.ceil(r/864e5);if(i>0&&i<=3){const e=(new Date).toDateString();localStorage.getItem("lastExpiryNotification")!==e&&(Ao.warning((0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)(pi,{className:"mr-2 h-5 w-5"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("div",{className:"font-medium",children:"Trial ending soon"}),(0,sn.jsxs)("div",{className:"text-sm",children:["You have ",i," days remaining. Please renew."]})]})]}),{position:"top-center",autoClose:8e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),localStorage.setItem("lastExpiryNotification",e),n(!0))}else if(i<=0){const e=localStorage.getItem("lastExpiryNotification"),t=(new Date).toDateString();e!==t&&(Ao.error((0,sn.jsxs)("div",{className:"flex items-center",children:[(0,sn.jsx)(ei,{className:"mr-2 h-5 w-5"}),(0,sn.jsxs)("div",{children:[(0,sn.jsx)("div",{className:"font-medium",children:"Trial has expired"}),(0,sn.jsx)("div",{className:"text-sm",children:"Please renew to continue using all features"})]})]}),{position:"top-center",autoClose:1e4,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0}),localStorage.setItem("lastExpiryNotification",t),n(!0))}},1e3);return()=>clearTimeout(r)},[null===e||void 0===e?void 0:e.subscriptionEndDate,t]),null},I6=async()=>{try{console.log("\u6e05\u9664localStorage\u6570\u636e...");const e=[];for(let t=0;t<localStorage.length;t++)e.push(localStorage.key(t));e.forEach(e=>{const t=localStorage.getItem(e);console.log("\u68c0\u67e5\u9879\u76ee: ".concat(e," = ").concat(t)),t&&(t.includes("\u6d4b\u8bd5\u516c\u53f8")||t.includes("Invomate SAS")||t.includes("123 Rue de Paris")||t.includes("FR32123456789")||t.includes("test")||t.includes("Test")||e.includes("test")||e.includes("Test")||e.includes("\u6d4b\u8bd5"))&&(console.log("\u79fb\u9664\u6d4b\u8bd5\u6570\u636e: ".concat(e)),localStorage.removeItem(e))});return["user","token","frenchCompanySettings","companySettings","userSettings","unifiedSettings","newInvoiceFormData","mockBillingHistory","sandboxMode","redirectAfterLogin","autoMode","userProfile","userTimezone"].forEach(e=>{localStorage.getItem(e)&&(console.log("\u5f3a\u5236\u6e05\u9664: ".concat(e)),localStorage.removeItem(e))}),console.log("\u6e05\u9664sessionStorage\u6570\u636e..."),sessionStorage.clear(),{success:!0,message:"\u6570\u636e\u6e05\u7406\u5b8c\u6210"}}catch(e){return console.error("\u6570\u636e\u6e05\u7406\u5931\u8d25:",e),{success:!1,error:e.message}}},L6=I6;"undefined"!==typeof window&&(window.completeDataCleanup=I6,console.log("\u5df2\u6dfb\u52a0 completeDataCleanup \u51fd\u6570\u5230 window \u5bf9\u8c61"),console.log("\u5728\u63a7\u5236\u53f0\u8fd0\u884c: completeDataCleanup()"));const F6=function(){return(0,i.useEffect)(()=>{localStorage.getItem("prodCleanupDone")||(async()=>{try{await L6(),localStorage.setItem("prodCleanupDone","1"),console.log("\u751f\u4ea7\u6a21\u5f0f\u6e05\u7406\u5b8c\u6210")}catch(Ae){console.warn("\u751f\u4ea7\u6a21\u5f0f\u6e05\u7406\u5931\u8d25:",Ae)}})()},[]),(0,sn.jsx)(rn,{i18n:Tr,children:(0,sn.jsx)(yn,{children:(0,sn.jsx)(fn,{children:(0,sn.jsx)(An,{children:(0,sn.jsx)(wn,{children:(0,sn.jsxs)("div",{className:"App",children:[(0,sn.jsx)(Ft,{position:"top-right"}),(0,sn.jsx)(R6,{}),(0,sn.jsxs)(we,{children:[(0,sn.jsx)(xe,{path:"/login",element:(0,sn.jsx)(Ms,{})}),(0,sn.jsx)(xe,{path:"/register",element:(0,sn.jsx)(_o,{})}),(0,sn.jsx)(xe,{path:"/payment/:token",element:(0,sn.jsx)(E6,{})}),(0,sn.jsx)(xe,{path:"/payment/success",element:(0,sn.jsx)(P6,{})}),(0,sn.jsx)(xe,{path:"/test-payment",element:(0,sn.jsx)(D6,{})}),(0,sn.jsxs)(xe,{path:"/",element:(0,sn.jsx)(O6,{children:(0,sn.jsx)(bs,{})}),children:[(0,sn.jsx)(xe,{index:!0,element:(0,sn.jsx)(ve,{to:"/dashboard",replace:!0})}),(0,sn.jsx)(xe,{path:"dashboard",element:(0,sn.jsx)(UF,{})}),(0,sn.jsx)(xe,{path:"invoices",element:(0,sn.jsx)(y4,{})}),(0,sn.jsx)(xe,{path:"invoices/new",element:(0,sn.jsx)(f5,{})}),(0,sn.jsx)(xe,{path:"invoices/edit/:id",element:(0,sn.jsx)($4,{})}),(0,sn.jsx)(xe,{path:"invoices/:id",element:(0,sn.jsx)(x5,{})}),(0,sn.jsx)(xe,{path:"overdue-invoices",element:(0,sn.jsx)(b5,{})}),(0,sn.jsx)(xe,{path:"clients",element:(0,sn.jsx)(b4,{})}),(0,sn.jsx)(xe,{path:"reports",element:(0,sn.jsx)(K4,{})}),(0,sn.jsx)(xe,{path:"pricing",element:(0,sn.jsx)(S5,{})}),(0,sn.jsx)(xe,{path:"paddle-pricing",element:(0,sn.jsx)(S5,{})}),(0,sn.jsx)(xe,{path:"payment-success",element:(0,sn.jsx)(C5,{})}),(0,sn.jsx)(xe,{path:"payment-success-new",element:(0,sn.jsx)(C5,{})}),(0,sn.jsx)(xe,{path:"subscription",element:(0,sn.jsx)(E5,{})}),(0,sn.jsx)(xe,{path:"subscription-settings",element:(0,sn.jsx)(E5,{})}),(0,sn.jsx)(xe,{path:"subscription-test",element:(0,sn.jsx)(P5,{})}),(0,sn.jsx)(xe,{path:"subscription-debug",element:(0,sn.jsx)(T5,{})}),(0,sn.jsx)(xe,{path:"payment-test",element:(0,sn.jsx)(M5,{})}),(0,sn.jsx)(xe,{path:"upgrade",element:(0,sn.jsx)(D5,{})}),(0,sn.jsx)(xe,{path:"settings",element:(0,sn.jsx)(k4,{})}),(0,sn.jsx)(xe,{path:"email-config",element:(0,sn.jsx)(ve,{to:"/settings?tab=email",replace:!0})}),(0,sn.jsx)(xe,{path:"terms",element:(0,sn.jsx)(j5,{})}),(0,sn.jsx)(xe,{path:"privacy",element:(0,sn.jsx)(k5,{})}),(0,sn.jsx)(xe,{path:"legal",element:(0,sn.jsx)(A5,{})})]})]})]})})})})})})};a.createRoot(document.getElementById("root")).render((0,sn.jsx)(i.StrictMode,{children:(0,sn.jsx)(Br,{children:(0,sn.jsx)(F6,{})})}))})()})();
//# sourceMappingURL=main.fbcf7a0e.js.map