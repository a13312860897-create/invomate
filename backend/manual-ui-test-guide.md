# 前端邮件发送功能手动测试指南

## 测试环境确认
- ✅ 后端服务器运行在: http://localhost:8080
- ✅ 前端服务器运行在: http://localhost:3000
- ✅ 邮件发送API测试通过

## 测试步骤

### 1. 测试发票详情页面的邮件发送功能

1. **打开前端页面**
   - 在浏览器中访问: http://localhost:3000

2. **进入发票详情页面**
   - 在发票列表中点击任意一个发票
   - 或直接访问: http://localhost:3000/invoices/1

3. **测试邮件发送按钮**
   - 在发票详情页面找到"发送邮件"按钮（绿色按钮，带邮件图标）
   - 点击"发送邮件"按钮
   - 观察页面反馈：
     - 应该显示"正在发送邮件..."的加载提示
     - 成功后显示"邮件发送成功"的提示
     - 如果失败，会显示具体的错误信息

### 2. 测试新发票表单的邮件发送功能

1. **创建新发票**
   - 访问: http://localhost:3000/invoices/new
   - 填写发票信息（客户、项目等）

2. **测试邮件发送**
   - 在表单中找到邮件发送相关的按钮或选项
   - 测试邮件发送功能

## 预期结果

### 成功情况
- 点击发送邮件按钮后，页面显示加载状态
- 几秒后显示"邮件发送成功"的提示
- 浏览器开发者工具的Network标签中可以看到对 `/api/ai/send-invoice-email` 的POST请求返回200状态码

### 失败情况
- 如果出现错误，页面会显示具体的错误信息
- 常见错误可能包括：
  - 网络连接问题
  - 邮件配置问题
  - 认证问题

## 调试信息

如果遇到问题，请检查：

1. **浏览器开发者工具**
   - 按F12打开开发者工具
   - 查看Console标签的错误信息
   - 查看Network标签的网络请求

2. **后端日志**
   - 查看后端终端的日志输出
   - 关注邮件发送相关的日志

## 测试用例

### 测试用例1：发票详情页面邮件发送
- **前置条件**: 存在至少一个发票
- **操作步骤**: 进入发票详情页面 → 点击发送邮件按钮
- **预期结果**: 邮件发送成功，显示成功提示

### 测试用例2：新发票邮件发送
- **前置条件**: 创建新发票表单
- **操作步骤**: 填写发票信息 → 使用邮件发送功能
- **预期结果**: 邮件发送成功

## 技术细节

- 邮件发送使用 `/api/ai/send-invoice-email` API
- 认证使用JWT token或开发模式的mock token
- 邮件内容包含发票的详细信息
- 支持PDF附件发送